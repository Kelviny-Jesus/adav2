const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-ClkHvYwd.js","assets/index-BoFGafk4.js","assets/index-4MufcReh.js","assets/index-DgoachrA.js","assets/profile-BYW5p1bK.js","assets/components-ki2z-XRs.js","assets/angular-html-LfdN0zeE.js","assets/html-C2L_23MC.js","assets/javascript-ySlJ1b_l.js","assets/css-BPhBrDlE.js","assets/angular-ts-CKsD7JZE.js","assets/scss-C31hgJw-.js","assets/apl-BBq3IX1j.js","assets/xml-e3z08dGr.js","assets/java-xI-RfyKK.js","assets/json-BQoSv7ci.js","assets/astro-CqkE3fuf.js","assets/typescript-Dj6nwHGl.js","assets/postcss-B3ZDOciz.js","assets/blade-a8OxSdnT.js","assets/sql-COK4E0Yg.js","assets/bsl-Dgyn0ogV.js","assets/sdbl-BLhTXw86.js","assets/cairo--RitsXJZ.js","assets/python-DhUJRlN_.js","assets/cobol-PTqiYgYu.js","assets/coffee-dyiR41kL.js","assets/cpp-BksuvNSY.js","assets/regexp-DWJ3fJO_.js","assets/glsl-DBO2IWDn.js","assets/c-C3t2pwGQ.js","assets/crystal-DtDmRg-F.js","assets/shellscript-atvbtKCR.js","assets/edge-D5gP-w-T.js","assets/html-derivative-CSfWNPLT.js","assets/elixir-CLiX3zqd.js","assets/elm-CmHSxxaM.js","assets/erb-BYTLMnw6.js","assets/ruby-DeZ3UC14.js","assets/haml-B2EZWmdv.js","assets/graphql-cDcHW_If.js","assets/jsx-BAng5TT0.js","assets/tsx-B6W0miNI.js","assets/lua-CvWAzNxB.js","assets/yaml-CVw76BM1.js","assets/fortran-fixed-form-TqA4NnZg.js","assets/fortran-free-form-DKXYxT9g.js","assets/fsharp-XplgxFYe.js","assets/markdown-UIAJJxZW.js","assets/gdresource-BHYsBjWJ.js","assets/gdshader-SKMF96pI.js","assets/gdscript-DfxzS6Rs.js","assets/git-commit-i4q6IMui.js","assets/diff-BgYniUM_.js","assets/git-rebase-B-v9cOL2.js","assets/glimmer-js-D-cwc0-E.js","assets/glimmer-ts-pgjy16dm.js","assets/hack-D1yCygmZ.js","assets/handlebars-BQGss363.js","assets/http-FRrOvY1W.js","assets/hxml-TIA70rKU.js","assets/haxe-C5wWYbrZ.js","assets/imba-bv_oIlVt.js","assets/jinja-DGy0s7-h.js","assets/jison-BqZprYcd.js","assets/julia-BBuGR-5E.js","assets/r-CwjWoCRV.js","assets/latex-C-cWTeAZ.js","assets/tex-rYs2v40G.js","assets/liquid-D3W5UaiH.js","assets/marko-z0MBrx5-.js","assets/less-BfCpw3nA.js","assets/mdc-DB_EDNY_.js","assets/nginx-D_VnBJ67.js","assets/nim-ZlGxZxc3.js","assets/perl-CHQXSrWU.js","assets/php-B5ebYQev.js","assets/pug-CM9l7STV.js","assets/qml-D8XfuvdV.js","assets/razor-CNLDkMZG.js","assets/csharp-D9R-vmeu.js","assets/rst-4NLicBqY.js","assets/cmake-DbXoA79R.js","assets/sas-BmTFh92c.js","assets/shaderlab-B7qAK45m.js","assets/hlsl-ifBTmRxC.js","assets/shellsession-C_rIy8kc.js","assets/soy-C-lX7w71.js","assets/sparql-bYkjHRlG.js","assets/turtle-BMR_PYu6.js","assets/stata-DorPZHa4.js","assets/svelte-MSaWC3Je.js","assets/templ-dwX3ZSMB.js","assets/go-B1SYOhNW.js","assets/ts-tags-CipyTH0X.js","assets/twig-NC5TFiHP.js","assets/vue-BuYVFjOK.js","assets/vue-html-xdeiXROB.js","assets/xsl-Dd0NUgwM.js","assets/index-3qzvSMVQ.js","assets/index-C-79LYRP.js","assets/index-FZdYhQHU.js","assets/index-B0Mday8L.js","assets/index-CNu7eLcY.js","assets/index-B-zBHrsd.js","assets/index-CHmdD3mr.js","assets/index-D4akM7ai.js","assets/index-9p206cjr.js","assets/index-Dcpw_2fZ.js","assets/index-FUeV-qdY.js"])))=>i.map(i=>d[i]);
import{K as _s,r as A,j as p,M as ut,P as zm,f as Vm,Q as kae,J as Na,u as Cae,a as IH,S as Tae,b as Aae,G as Pae}from"./index-4MufcReh.js";import{p as Qn,c as Ws,u as Ot,t as R1,a as OH,m as Rh,b as Zr,l as Ut,s as Nae,g as zD,d as Lae,r as Lg}from"./index-BoFGafk4.js";import{a as qn}from"./index-DgoachrA.js";import{p as nv,u as Bw}from"./profile-BYW5p1bK.js";import{u as Rae}from"./components-ki2z-XRs.js";const Iae=5,n_=6,r_=10;let Oae=(t,e,n,r)=>(t.events=t.events||{},t.events[n+r_]||(t.events[n+r_]=r(i=>{t.events[n].reduceRight((s,o)=>(o(s),s),{shared:{},...i})})),t.events[n]=t.events[n]||[],t.events[n].push(e),()=>{let i=t.events[n],s=i.indexOf(e);i.splice(s,1),i.length||(delete t.events[n],t.events[n+r_](),delete t.events[n+r_])}),Dae=1e3,Mae=(t,e)=>Oae(t,r=>{let i=e(r);i&&t.events[n_].push(i)},Iae,r=>{let i=t.listen;t.listen=(...o)=>(!t.lc&&!t.active&&(t.active=!0,r()),i(...o));let s=t.off;return t.events[n_]=[],t.off=()=>{s(),setTimeout(()=>{if(t.active&&!t.lc){t.active=!1;for(let o of t.events[n_])o();t.events[n_]=[]}},Dae)},()=>{t.listen=i,t.off=s}}),jae=(t,e,n)=>{Array.isArray(t)||(t=[t]);let r,i=0,s=()=>{let l=t.map(c=>c.get());if(r===void 0||l.some((c,u)=>c!==r[u])){let c=++i;r=l;let u=e(...l);u&&u.then&&u.t?u.then(h=>{c===i&&o.set(h)}):o.set(u)}},o=qn(void 0,Math.max(...t.map(l=>l.l))+1),a=s;return Mae(o,()=>{let l=t.map(c=>c.listen(a,-1/o.l));return s(),()=>{for(let c of l)c()}}),o},XN=(t,e)=>jae(t,e);function Vn(t){"@babel/helpers - typeof";return Vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vn(t)}let Fae=(t,e=21)=>(n=e)=>{let r="",i=n|0;for(;i--;)r+=t[Math.random()*t.length|0];return r};var ai={},RE={};RE.byteLength=$ae;RE.toByteArray=zae;RE.fromByteArray=Gae;var Al=[],jo=[],Bae=typeof Uint8Array<"u"?Uint8Array:Array,sC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Tp=0,Uae=sC.length;Tp<Uae;++Tp)Al[Tp]=sC[Tp],jo[sC.charCodeAt(Tp)]=Tp;jo[45]=62;jo[95]=63;function DH(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function $ae(t){var e=DH(t),n=e[0],r=e[1];return(n+r)*3/4-r}function Hae(t,e,n){return(e+n)*3/4-n}function zae(t){var e,n=DH(t),r=n[0],i=n[1],s=new Bae(Hae(t,r,i)),o=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=jo[t.charCodeAt(l)]<<18|jo[t.charCodeAt(l+1)]<<12|jo[t.charCodeAt(l+2)]<<6|jo[t.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=jo[t.charCodeAt(l)]<<2|jo[t.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=jo[t.charCodeAt(l)]<<10|jo[t.charCodeAt(l+1)]<<4|jo[t.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function Vae(t){return Al[t>>18&63]+Al[t>>12&63]+Al[t>>6&63]+Al[t&63]}function Wae(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(Vae(r));return i.join("")}function Gae(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(Wae(t,o,o+s>a?a:o+s));return r===1?(e=t[n-1],i.push(Al[e>>2]+Al[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(Al[e>>10]+Al[e>>4&63]+Al[e<<2&63]+"=")),i.join("")}var ZN={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ZN.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?i-1:0,d=n?-1:1,f=t[e+h];for(h+=d,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=s*256+t[e+h],h+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=o*256+t[e+h],h+=d,u-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(f?-1:1)*o*Math.pow(2,s-r)};ZN.write=function(t,e,n,r,i,s){var o,a,l,c=s*8-i-1,u=(1<<c)-1,h=u>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:s-1,m=r?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=d/l:e+=d*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(e*l-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+f]=a&255,f+=m,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+f]=o&255,f+=m,o/=256,c-=8);t[n+f-m]|=g*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=RE,n=ZN,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=S,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;u.TYPED_ARRAY_SUPPORT=l(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const re=new s(1),$={foo:function(){return 42}};return Object.setPrototypeOf($,s.prototype),Object.setPrototypeOf(re,$),re.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function c(re){if(re>i)throw new RangeError('The value "'+re+'" is invalid for option "size"');const $=new s(re);return Object.setPrototypeOf($,u.prototype),$}function u(re,$,G){if(typeof re=="number"){if(typeof $=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(re)}return h(re,$,G)}u.poolSize=8192;function h(re,$,G){if(typeof re=="string")return g(re,$);if(o.isView(re))return y(re);if(re==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof re);if(Be(re,o)||re&&Be(re.buffer,o)||typeof a<"u"&&(Be(re,a)||re&&Be(re.buffer,a)))return v(re,$,G);if(typeof re=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ue=re.valueOf&&re.valueOf();if(ue!=null&&ue!==re)return u.from(ue,$,G);const Ne=x(re);if(Ne)return Ne;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof re[Symbol.toPrimitive]=="function")return u.from(re[Symbol.toPrimitive]("string"),$,G);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof re)}u.from=function(re,$,G){return h(re,$,G)},Object.setPrototypeOf(u.prototype,s.prototype),Object.setPrototypeOf(u,s);function d(re){if(typeof re!="number")throw new TypeError('"size" argument must be of type number');if(re<0)throw new RangeError('The value "'+re+'" is invalid for option "size"')}function f(re,$,G){return d(re),re<=0?c(re):$!==void 0?typeof G=="string"?c(re).fill($,G):c(re).fill($):c(re)}u.alloc=function(re,$,G){return f(re,$,G)};function m(re){return d(re),c(re<0?0:w(re)|0)}u.allocUnsafe=function(re){return m(re)},u.allocUnsafeSlow=function(re){return m(re)};function g(re,$){if((typeof $!="string"||$==="")&&($="utf8"),!u.isEncoding($))throw new TypeError("Unknown encoding: "+$);const G=E(re,$)|0;let ue=c(G);const Ne=ue.write(re,$);return Ne!==G&&(ue=ue.slice(0,Ne)),ue}function b(re){const $=re.length<0?0:w(re.length)|0,G=c($);for(let ue=0;ue<$;ue+=1)G[ue]=re[ue]&255;return G}function y(re){if(Be(re,s)){const $=new s(re);return v($.buffer,$.byteOffset,$.byteLength)}return b(re)}function v(re,$,G){if($<0||re.byteLength<$)throw new RangeError('"offset" is outside of buffer bounds');if(re.byteLength<$+(G||0))throw new RangeError('"length" is outside of buffer bounds');let ue;return $===void 0&&G===void 0?ue=new s(re):G===void 0?ue=new s(re,$):ue=new s(re,$,G),Object.setPrototypeOf(ue,u.prototype),ue}function x(re){if(u.isBuffer(re)){const $=w(re.length)|0,G=c($);return G.length===0||re.copy(G,0,0,$),G}if(re.length!==void 0)return typeof re.length!="number"||Ee(re.length)?c(0):b(re);if(re.type==="Buffer"&&Array.isArray(re.data))return b(re.data)}function w(re){if(re>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return re|0}function S(re){return+re!=re&&(re=0),u.alloc(+re)}u.isBuffer=function($){return $!=null&&$._isBuffer===!0&&$!==u.prototype},u.compare=function($,G){if(Be($,s)&&($=u.from($,$.offset,$.byteLength)),Be(G,s)&&(G=u.from(G,G.offset,G.byteLength)),!u.isBuffer($)||!u.isBuffer(G))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if($===G)return 0;let ue=$.length,Ne=G.length;for(let De=0,Ve=Math.min(ue,Ne);De<Ve;++De)if($[De]!==G[De]){ue=$[De],Ne=G[De];break}return ue<Ne?-1:Ne<ue?1:0},u.isEncoding=function($){switch(String($).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function($,G){if(!Array.isArray($))throw new TypeError('"list" argument must be an Array of Buffers');if($.length===0)return u.alloc(0);let ue;if(G===void 0)for(G=0,ue=0;ue<$.length;++ue)G+=$[ue].length;const Ne=u.allocUnsafe(G);let De=0;for(ue=0;ue<$.length;++ue){let Ve=$[ue];if(Be(Ve,s))De+Ve.length>Ne.length?(u.isBuffer(Ve)||(Ve=u.from(Ve)),Ve.copy(Ne,De)):s.prototype.set.call(Ne,Ve,De);else if(u.isBuffer(Ve))Ve.copy(Ne,De);else throw new TypeError('"list" argument must be an Array of Buffers');De+=Ve.length}return Ne};function E(re,$){if(u.isBuffer(re))return re.length;if(o.isView(re)||Be(re,o))return re.byteLength;if(typeof re!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof re);const G=re.length,ue=arguments.length>2&&arguments[2]===!0;if(!ue&&G===0)return 0;let Ne=!1;for(;;)switch($){case"ascii":case"latin1":case"binary":return G;case"utf8":case"utf-8":return Pe(re).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G*2;case"hex":return G>>>1;case"base64":return $e(re).length;default:if(Ne)return ue?-1:Pe(re).length;$=(""+$).toLowerCase(),Ne=!0}}u.byteLength=E;function k(re,$,G){let ue=!1;if(($===void 0||$<0)&&($=0),$>this.length||((G===void 0||G>this.length)&&(G=this.length),G<=0)||(G>>>=0,$>>>=0,G<=$))return"";for(re||(re="utf8");;)switch(re){case"hex":return M(this,$,G);case"utf8":case"utf-8":return X(this,$,G);case"ascii":return F(this,$,G);case"latin1":case"binary":return Y(this,$,G);case"base64":return Q(this,$,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,$,G);default:if(ue)throw new TypeError("Unknown encoding: "+re);re=(re+"").toLowerCase(),ue=!0}}u.prototype._isBuffer=!0;function _(re,$,G){const ue=re[$];re[$]=re[G],re[G]=ue}u.prototype.swap16=function(){const $=this.length;if($%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let G=0;G<$;G+=2)_(this,G,G+1);return this},u.prototype.swap32=function(){const $=this.length;if($%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let G=0;G<$;G+=4)_(this,G,G+3),_(this,G+1,G+2);return this},u.prototype.swap64=function(){const $=this.length;if($%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let G=0;G<$;G+=8)_(this,G,G+7),_(this,G+1,G+6),_(this,G+2,G+5),_(this,G+3,G+4);return this},u.prototype.toString=function(){const $=this.length;return $===0?"":arguments.length===0?X(this,0,$):k.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function($){if(!u.isBuffer($))throw new TypeError("Argument must be a Buffer");return this===$?!0:u.compare(this,$)===0},u.prototype.inspect=function(){let $="";const G=t.INSPECT_MAX_BYTES;return $=this.toString("hex",0,G).replace(/(.{2})/g,"$1 ").trim(),this.length>G&&($+=" ... "),"<Buffer "+$+">"},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function($,G,ue,Ne,De){if(Be($,s)&&($=u.from($,$.offset,$.byteLength)),!u.isBuffer($))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof $);if(G===void 0&&(G=0),ue===void 0&&(ue=$?$.length:0),Ne===void 0&&(Ne=0),De===void 0&&(De=this.length),G<0||ue>$.length||Ne<0||De>this.length)throw new RangeError("out of range index");if(Ne>=De&&G>=ue)return 0;if(Ne>=De)return-1;if(G>=ue)return 1;if(G>>>=0,ue>>>=0,Ne>>>=0,De>>>=0,this===$)return 0;let Ve=De-Ne,Ft=ue-G;const It=Math.min(Ve,Ft),xn=this.slice(Ne,De),Kt=$.slice(G,ue);for(let nn=0;nn<It;++nn)if(xn[nn]!==Kt[nn]){Ve=xn[nn],Ft=Kt[nn];break}return Ve<Ft?-1:Ft<Ve?1:0};function L(re,$,G,ue,Ne){if(re.length===0)return-1;if(typeof G=="string"?(ue=G,G=0):G>2147483647?G=2147483647:G<-2147483648&&(G=-2147483648),G=+G,Ee(G)&&(G=Ne?0:re.length-1),G<0&&(G=re.length+G),G>=re.length){if(Ne)return-1;G=re.length-1}else if(G<0)if(Ne)G=0;else return-1;if(typeof $=="string"&&($=u.from($,ue)),u.isBuffer($))return $.length===0?-1:R(re,$,G,ue,Ne);if(typeof $=="number")return $=$&255,typeof s.prototype.indexOf=="function"?Ne?s.prototype.indexOf.call(re,$,G):s.prototype.lastIndexOf.call(re,$,G):R(re,[$],G,ue,Ne);throw new TypeError("val must be string, number or Buffer")}function R(re,$,G,ue,Ne){let De=1,Ve=re.length,Ft=$.length;if(ue!==void 0&&(ue=String(ue).toLowerCase(),ue==="ucs2"||ue==="ucs-2"||ue==="utf16le"||ue==="utf-16le")){if(re.length<2||$.length<2)return-1;De=2,Ve/=2,Ft/=2,G/=2}function It(Kt,nn){return De===1?Kt[nn]:Kt.readUInt16BE(nn*De)}let xn;if(Ne){let Kt=-1;for(xn=G;xn<Ve;xn++)if(It(re,xn)===It($,Kt===-1?0:xn-Kt)){if(Kt===-1&&(Kt=xn),xn-Kt+1===Ft)return Kt*De}else Kt!==-1&&(xn-=xn-Kt),Kt=-1}else for(G+Ft>Ve&&(G=Ve-Ft),xn=G;xn>=0;xn--){let Kt=!0;for(let nn=0;nn<Ft;nn++)if(It(re,xn+nn)!==It($,nn)){Kt=!1;break}if(Kt)return xn}return-1}u.prototype.includes=function($,G,ue){return this.indexOf($,G,ue)!==-1},u.prototype.indexOf=function($,G,ue){return L(this,$,G,ue,!0)},u.prototype.lastIndexOf=function($,G,ue){return L(this,$,G,ue,!1)};function C(re,$,G,ue){G=Number(G)||0;const Ne=re.length-G;ue?(ue=Number(ue),ue>Ne&&(ue=Ne)):ue=Ne;const De=$.length;ue>De/2&&(ue=De/2);let Ve;for(Ve=0;Ve<ue;++Ve){const Ft=parseInt($.substr(Ve*2,2),16);if(Ee(Ft))return Ve;re[G+Ve]=Ft}return Ve}function P(re,$,G,ue){return Fe(Pe($,re.length-G),re,G,ue)}function O(re,$,G,ue){return Fe(Re($),re,G,ue)}function N(re,$,G,ue){return Fe($e($),re,G,ue)}function H(re,$,G,ue){return Fe(we($,re.length-G),re,G,ue)}u.prototype.write=function($,G,ue,Ne){if(G===void 0)Ne="utf8",ue=this.length,G=0;else if(ue===void 0&&typeof G=="string")Ne=G,ue=this.length,G=0;else if(isFinite(G))G=G>>>0,isFinite(ue)?(ue=ue>>>0,Ne===void 0&&(Ne="utf8")):(Ne=ue,ue=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const De=this.length-G;if((ue===void 0||ue>De)&&(ue=De),$.length>0&&(ue<0||G<0)||G>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ne||(Ne="utf8");let Ve=!1;for(;;)switch(Ne){case"hex":return C(this,$,G,ue);case"utf8":case"utf-8":return P(this,$,G,ue);case"ascii":case"latin1":case"binary":return O(this,$,G,ue);case"base64":return N(this,$,G,ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,$,G,ue);default:if(Ve)throw new TypeError("Unknown encoding: "+Ne);Ne=(""+Ne).toLowerCase(),Ve=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Q(re,$,G){return $===0&&G===re.length?e.fromByteArray(re):e.fromByteArray(re.slice($,G))}function X(re,$,G){G=Math.min(re.length,G);const ue=[];let Ne=$;for(;Ne<G;){const De=re[Ne];let Ve=null,Ft=De>239?4:De>223?3:De>191?2:1;if(Ne+Ft<=G){let It,xn,Kt,nn;switch(Ft){case 1:De<128&&(Ve=De);break;case 2:It=re[Ne+1],(It&192)===128&&(nn=(De&31)<<6|It&63,nn>127&&(Ve=nn));break;case 3:It=re[Ne+1],xn=re[Ne+2],(It&192)===128&&(xn&192)===128&&(nn=(De&15)<<12|(It&63)<<6|xn&63,nn>2047&&(nn<55296||nn>57343)&&(Ve=nn));break;case 4:It=re[Ne+1],xn=re[Ne+2],Kt=re[Ne+3],(It&192)===128&&(xn&192)===128&&(Kt&192)===128&&(nn=(De&15)<<18|(It&63)<<12|(xn&63)<<6|Kt&63,nn>65535&&nn<1114112&&(Ve=nn))}}Ve===null?(Ve=65533,Ft=1):Ve>65535&&(Ve-=65536,ue.push(Ve>>>10&1023|55296),Ve=56320|Ve&1023),ue.push(Ve),Ne+=Ft}return j(ue)}const J=4096;function j(re){const $=re.length;if($<=J)return String.fromCharCode.apply(String,re);let G="",ue=0;for(;ue<$;)G+=String.fromCharCode.apply(String,re.slice(ue,ue+=J));return G}function F(re,$,G){let ue="";G=Math.min(re.length,G);for(let Ne=$;Ne<G;++Ne)ue+=String.fromCharCode(re[Ne]&127);return ue}function Y(re,$,G){let ue="";G=Math.min(re.length,G);for(let Ne=$;Ne<G;++Ne)ue+=String.fromCharCode(re[Ne]);return ue}function M(re,$,G){const ue=re.length;(!$||$<0)&&($=0),(!G||G<0||G>ue)&&(G=ue);let Ne="";for(let De=$;De<G;++De)Ne+=qe[re[De]];return Ne}function D(re,$,G){const ue=re.slice($,G);let Ne="";for(let De=0;De<ue.length-1;De+=2)Ne+=String.fromCharCode(ue[De]+ue[De+1]*256);return Ne}u.prototype.slice=function($,G){const ue=this.length;$=~~$,G=G===void 0?ue:~~G,$<0?($+=ue,$<0&&($=0)):$>ue&&($=ue),G<0?(G+=ue,G<0&&(G=0)):G>ue&&(G=ue),G<$&&(G=$);const Ne=this.subarray($,G);return Object.setPrototypeOf(Ne,u.prototype),Ne};function V(re,$,G){if(re%1!==0||re<0)throw new RangeError("offset is not uint");if(re+$>G)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function($,G,ue){$=$>>>0,G=G>>>0,ue||V($,G,this.length);let Ne=this[$],De=1,Ve=0;for(;++Ve<G&&(De*=256);)Ne+=this[$+Ve]*De;return Ne},u.prototype.readUintBE=u.prototype.readUIntBE=function($,G,ue){$=$>>>0,G=G>>>0,ue||V($,G,this.length);let Ne=this[$+--G],De=1;for(;G>0&&(De*=256);)Ne+=this[$+--G]*De;return Ne},u.prototype.readUint8=u.prototype.readUInt8=function($,G){return $=$>>>0,G||V($,1,this.length),this[$]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function($,G){return $=$>>>0,G||V($,2,this.length),this[$]|this[$+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function($,G){return $=$>>>0,G||V($,2,this.length),this[$]<<8|this[$+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function($,G){return $=$>>>0,G||V($,4,this.length),(this[$]|this[$+1]<<8|this[$+2]<<16)+this[$+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function($,G){return $=$>>>0,G||V($,4,this.length),this[$]*16777216+(this[$+1]<<16|this[$+2]<<8|this[$+3])},u.prototype.readBigUInt64LE=Xe(function($){$=$>>>0,ne($,"offset");const G=this[$],ue=this[$+7];(G===void 0||ue===void 0)&&oe($,this.length-8);const Ne=G+this[++$]*2**8+this[++$]*2**16+this[++$]*2**24,De=this[++$]+this[++$]*2**8+this[++$]*2**16+ue*2**24;return BigInt(Ne)+(BigInt(De)<<BigInt(32))}),u.prototype.readBigUInt64BE=Xe(function($){$=$>>>0,ne($,"offset");const G=this[$],ue=this[$+7];(G===void 0||ue===void 0)&&oe($,this.length-8);const Ne=G*2**24+this[++$]*2**16+this[++$]*2**8+this[++$],De=this[++$]*2**24+this[++$]*2**16+this[++$]*2**8+ue;return(BigInt(Ne)<<BigInt(32))+BigInt(De)}),u.prototype.readIntLE=function($,G,ue){$=$>>>0,G=G>>>0,ue||V($,G,this.length);let Ne=this[$],De=1,Ve=0;for(;++Ve<G&&(De*=256);)Ne+=this[$+Ve]*De;return De*=128,Ne>=De&&(Ne-=Math.pow(2,8*G)),Ne},u.prototype.readIntBE=function($,G,ue){$=$>>>0,G=G>>>0,ue||V($,G,this.length);let Ne=G,De=1,Ve=this[$+--Ne];for(;Ne>0&&(De*=256);)Ve+=this[$+--Ne]*De;return De*=128,Ve>=De&&(Ve-=Math.pow(2,8*G)),Ve},u.prototype.readInt8=function($,G){return $=$>>>0,G||V($,1,this.length),this[$]&128?(255-this[$]+1)*-1:this[$]},u.prototype.readInt16LE=function($,G){$=$>>>0,G||V($,2,this.length);const ue=this[$]|this[$+1]<<8;return ue&32768?ue|4294901760:ue},u.prototype.readInt16BE=function($,G){$=$>>>0,G||V($,2,this.length);const ue=this[$+1]|this[$]<<8;return ue&32768?ue|4294901760:ue},u.prototype.readInt32LE=function($,G){return $=$>>>0,G||V($,4,this.length),this[$]|this[$+1]<<8|this[$+2]<<16|this[$+3]<<24},u.prototype.readInt32BE=function($,G){return $=$>>>0,G||V($,4,this.length),this[$]<<24|this[$+1]<<16|this[$+2]<<8|this[$+3]},u.prototype.readBigInt64LE=Xe(function($){$=$>>>0,ne($,"offset");const G=this[$],ue=this[$+7];(G===void 0||ue===void 0)&&oe($,this.length-8);const Ne=this[$+4]+this[$+5]*2**8+this[$+6]*2**16+(ue<<24);return(BigInt(Ne)<<BigInt(32))+BigInt(G+this[++$]*2**8+this[++$]*2**16+this[++$]*2**24)}),u.prototype.readBigInt64BE=Xe(function($){$=$>>>0,ne($,"offset");const G=this[$],ue=this[$+7];(G===void 0||ue===void 0)&&oe($,this.length-8);const Ne=(G<<24)+this[++$]*2**16+this[++$]*2**8+this[++$];return(BigInt(Ne)<<BigInt(32))+BigInt(this[++$]*2**24+this[++$]*2**16+this[++$]*2**8+ue)}),u.prototype.readFloatLE=function($,G){return $=$>>>0,G||V($,4,this.length),n.read(this,$,!0,23,4)},u.prototype.readFloatBE=function($,G){return $=$>>>0,G||V($,4,this.length),n.read(this,$,!1,23,4)},u.prototype.readDoubleLE=function($,G){return $=$>>>0,G||V($,8,this.length),n.read(this,$,!0,52,8)},u.prototype.readDoubleBE=function($,G){return $=$>>>0,G||V($,8,this.length),n.read(this,$,!1,52,8)};function W(re,$,G,ue,Ne,De){if(!u.isBuffer(re))throw new TypeError('"buffer" argument must be a Buffer instance');if($>Ne||$<De)throw new RangeError('"value" argument is out of bounds');if(G+ue>re.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function($,G,ue,Ne){if($=+$,G=G>>>0,ue=ue>>>0,!Ne){const Ft=Math.pow(2,8*ue)-1;W(this,$,G,ue,Ft,0)}let De=1,Ve=0;for(this[G]=$&255;++Ve<ue&&(De*=256);)this[G+Ve]=$/De&255;return G+ue},u.prototype.writeUintBE=u.prototype.writeUIntBE=function($,G,ue,Ne){if($=+$,G=G>>>0,ue=ue>>>0,!Ne){const Ft=Math.pow(2,8*ue)-1;W(this,$,G,ue,Ft,0)}let De=ue-1,Ve=1;for(this[G+De]=$&255;--De>=0&&(Ve*=256);)this[G+De]=$/Ve&255;return G+ue},u.prototype.writeUint8=u.prototype.writeUInt8=function($,G,ue){return $=+$,G=G>>>0,ue||W(this,$,G,1,255,0),this[G]=$&255,G+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function($,G,ue){return $=+$,G=G>>>0,ue||W(this,$,G,2,65535,0),this[G]=$&255,this[G+1]=$>>>8,G+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function($,G,ue){return $=+$,G=G>>>0,ue||W(this,$,G,2,65535,0),this[G]=$>>>8,this[G+1]=$&255,G+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function($,G,ue){return $=+$,G=G>>>0,ue||W(this,$,G,4,4294967295,0),this[G+3]=$>>>24,this[G+2]=$>>>16,this[G+1]=$>>>8,this[G]=$&255,G+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function($,G,ue){return $=+$,G=G>>>0,ue||W(this,$,G,4,4294967295,0),this[G]=$>>>24,this[G+1]=$>>>16,this[G+2]=$>>>8,this[G+3]=$&255,G+4};function te(re,$,G,ue,Ne){pe($,ue,Ne,re,G,7);let De=Number($&BigInt(4294967295));re[G++]=De,De=De>>8,re[G++]=De,De=De>>8,re[G++]=De,De=De>>8,re[G++]=De;let Ve=Number($>>BigInt(32)&BigInt(4294967295));return re[G++]=Ve,Ve=Ve>>8,re[G++]=Ve,Ve=Ve>>8,re[G++]=Ve,Ve=Ve>>8,re[G++]=Ve,G}function ee(re,$,G,ue,Ne){pe($,ue,Ne,re,G,7);let De=Number($&BigInt(4294967295));re[G+7]=De,De=De>>8,re[G+6]=De,De=De>>8,re[G+5]=De,De=De>>8,re[G+4]=De;let Ve=Number($>>BigInt(32)&BigInt(4294967295));return re[G+3]=Ve,Ve=Ve>>8,re[G+2]=Ve,Ve=Ve>>8,re[G+1]=Ve,Ve=Ve>>8,re[G]=Ve,G+8}u.prototype.writeBigUInt64LE=Xe(function($,G=0){return te(this,$,G,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Xe(function($,G=0){return ee(this,$,G,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function($,G,ue,Ne){if($=+$,G=G>>>0,!Ne){const It=Math.pow(2,8*ue-1);W(this,$,G,ue,It-1,-It)}let De=0,Ve=1,Ft=0;for(this[G]=$&255;++De<ue&&(Ve*=256);)$<0&&Ft===0&&this[G+De-1]!==0&&(Ft=1),this[G+De]=($/Ve>>0)-Ft&255;return G+ue},u.prototype.writeIntBE=function($,G,ue,Ne){if($=+$,G=G>>>0,!Ne){const It=Math.pow(2,8*ue-1);W(this,$,G,ue,It-1,-It)}let De=ue-1,Ve=1,Ft=0;for(this[G+De]=$&255;--De>=0&&(Ve*=256);)$<0&&Ft===0&&this[G+De+1]!==0&&(Ft=1),this[G+De]=($/Ve>>0)-Ft&255;return G+ue},u.prototype.writeInt8=function($,G,ue){return $=+$,G=G>>>0,ue||W(this,$,G,1,127,-128),$<0&&($=255+$+1),this[G]=$&255,G+1},u.prototype.writeInt16LE=function($,G,ue){return $=+$,G=G>>>0,ue||W(this,$,G,2,32767,-32768),this[G]=$&255,this[G+1]=$>>>8,G+2},u.prototype.writeInt16BE=function($,G,ue){return $=+$,G=G>>>0,ue||W(this,$,G,2,32767,-32768),this[G]=$>>>8,this[G+1]=$&255,G+2},u.prototype.writeInt32LE=function($,G,ue){return $=+$,G=G>>>0,ue||W(this,$,G,4,2147483647,-2147483648),this[G]=$&255,this[G+1]=$>>>8,this[G+2]=$>>>16,this[G+3]=$>>>24,G+4},u.prototype.writeInt32BE=function($,G,ue){return $=+$,G=G>>>0,ue||W(this,$,G,4,2147483647,-2147483648),$<0&&($=4294967295+$+1),this[G]=$>>>24,this[G+1]=$>>>16,this[G+2]=$>>>8,this[G+3]=$&255,G+4},u.prototype.writeBigInt64LE=Xe(function($,G=0){return te(this,$,G,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Xe(function($,G=0){return ee(this,$,G,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function K(re,$,G,ue,Ne,De){if(G+ue>re.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("Index out of range")}function he(re,$,G,ue,Ne){return $=+$,G=G>>>0,Ne||K(re,$,G,4),n.write(re,$,G,ue,23,4),G+4}u.prototype.writeFloatLE=function($,G,ue){return he(this,$,G,!0,ue)},u.prototype.writeFloatBE=function($,G,ue){return he(this,$,G,!1,ue)};function be(re,$,G,ue,Ne){return $=+$,G=G>>>0,Ne||K(re,$,G,8),n.write(re,$,G,ue,52,8),G+8}u.prototype.writeDoubleLE=function($,G,ue){return be(this,$,G,!0,ue)},u.prototype.writeDoubleBE=function($,G,ue){return be(this,$,G,!1,ue)},u.prototype.copy=function($,G,ue,Ne){if(!u.isBuffer($))throw new TypeError("argument should be a Buffer");if(ue||(ue=0),!Ne&&Ne!==0&&(Ne=this.length),G>=$.length&&(G=$.length),G||(G=0),Ne>0&&Ne<ue&&(Ne=ue),Ne===ue||$.length===0||this.length===0)return 0;if(G<0)throw new RangeError("targetStart out of bounds");if(ue<0||ue>=this.length)throw new RangeError("Index out of range");if(Ne<0)throw new RangeError("sourceEnd out of bounds");Ne>this.length&&(Ne=this.length),$.length-G<Ne-ue&&(Ne=$.length-G+ue);const De=Ne-ue;return this===$&&typeof s.prototype.copyWithin=="function"?this.copyWithin(G,ue,Ne):s.prototype.set.call($,this.subarray(ue,Ne),G),De},u.prototype.fill=function($,G,ue,Ne){if(typeof $=="string"){if(typeof G=="string"?(Ne=G,G=0,ue=this.length):typeof ue=="string"&&(Ne=ue,ue=this.length),Ne!==void 0&&typeof Ne!="string")throw new TypeError("encoding must be a string");if(typeof Ne=="string"&&!u.isEncoding(Ne))throw new TypeError("Unknown encoding: "+Ne);if($.length===1){const Ve=$.charCodeAt(0);(Ne==="utf8"&&Ve<128||Ne==="latin1")&&($=Ve)}}else typeof $=="number"?$=$&255:typeof $=="boolean"&&($=Number($));if(G<0||this.length<G||this.length<ue)throw new RangeError("Out of range index");if(ue<=G)return this;G=G>>>0,ue=ue===void 0?this.length:ue>>>0,$||($=0);let De;if(typeof $=="number")for(De=G;De<ue;++De)this[De]=$;else{const Ve=u.isBuffer($)?$:u.from($,Ne),Ft=Ve.length;if(Ft===0)throw new TypeError('The value "'+$+'" is invalid for argument "value"');for(De=0;De<ue-G;++De)this[De+G]=Ve[De%Ft]}return this};const Se={};function Ce(re,$,G){Se[re]=class extends G{constructor(){super(),Object.defineProperty(this,"message",{value:$.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${re}]`,this.stack,delete this.name}get code(){return re}set code(Ne){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ne,writable:!0})}toString(){return`${this.name} [${re}]: ${this.message}`}}}Ce("ERR_BUFFER_OUT_OF_BOUNDS",function(re){return re?`${re} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ce("ERR_INVALID_ARG_TYPE",function(re,$){return`The "${re}" argument must be of type number. Received type ${typeof $}`},TypeError),Ce("ERR_OUT_OF_RANGE",function(re,$,G){let ue=`The value of "${re}" is out of range.`,Ne=G;return Number.isInteger(G)&&Math.abs(G)>2**32?Ne=ke(String(G)):typeof G=="bigint"&&(Ne=String(G),(G>BigInt(2)**BigInt(32)||G<-(BigInt(2)**BigInt(32)))&&(Ne=ke(Ne)),Ne+="n"),ue+=` It must be ${$}. Received ${Ne}`,ue},RangeError);function ke(re){let $="",G=re.length;const ue=re[0]==="-"?1:0;for(;G>=ue+4;G-=3)$=`_${re.slice(G-3,G)}${$}`;return`${re.slice(0,G)}${$}`}function q(re,$,G){ne($,"offset"),(re[$]===void 0||re[$+G]===void 0)&&oe($,re.length-(G+1))}function pe(re,$,G,ue,Ne,De){if(re>G||re<$){const Ve=typeof $=="bigint"?"n":"";let Ft;throw $===0||$===BigInt(0)?Ft=`>= 0${Ve} and < 2${Ve} ** ${(De+1)*8}${Ve}`:Ft=`>= -(2${Ve} ** ${(De+1)*8-1}${Ve}) and < 2 ** ${(De+1)*8-1}${Ve}`,new Se.ERR_OUT_OF_RANGE("value",Ft,re)}q(ue,Ne,De)}function ne(re,$){if(typeof re!="number")throw new Se.ERR_INVALID_ARG_TYPE($,"number",re)}function oe(re,$,G){throw Math.floor(re)!==re?(ne(re,G),new Se.ERR_OUT_OF_RANGE("offset","an integer",re)):$<0?new Se.ERR_BUFFER_OUT_OF_BOUNDS:new Se.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${$}`,re)}const ae=/[^+/0-9A-Za-z-_]/g;function me(re){if(re=re.split("=")[0],re=re.trim().replace(ae,""),re.length<2)return"";for(;re.length%4!==0;)re=re+"=";return re}function Pe(re,$){$=$||1/0;let G;const ue=re.length;let Ne=null;const De=[];for(let Ve=0;Ve<ue;++Ve){if(G=re.charCodeAt(Ve),G>55295&&G<57344){if(!Ne){if(G>56319){($-=3)>-1&&De.push(239,191,189);continue}else if(Ve+1===ue){($-=3)>-1&&De.push(239,191,189);continue}Ne=G;continue}if(G<56320){($-=3)>-1&&De.push(239,191,189),Ne=G;continue}G=(Ne-55296<<10|G-56320)+65536}else Ne&&($-=3)>-1&&De.push(239,191,189);if(Ne=null,G<128){if(($-=1)<0)break;De.push(G)}else if(G<2048){if(($-=2)<0)break;De.push(G>>6|192,G&63|128)}else if(G<65536){if(($-=3)<0)break;De.push(G>>12|224,G>>6&63|128,G&63|128)}else if(G<1114112){if(($-=4)<0)break;De.push(G>>18|240,G>>12&63|128,G>>6&63|128,G&63|128)}else throw new Error("Invalid code point")}return De}function Re(re){const $=[];for(let G=0;G<re.length;++G)$.push(re.charCodeAt(G)&255);return $}function we(re,$){let G,ue,Ne;const De=[];for(let Ve=0;Ve<re.length&&!(($-=2)<0);++Ve)G=re.charCodeAt(Ve),ue=G>>8,Ne=G%256,De.push(Ne),De.push(ue);return De}function $e(re){return e.toByteArray(me(re))}function Fe(re,$,G,ue){let Ne;for(Ne=0;Ne<ue&&!(Ne+G>=$.length||Ne>=re.length);++Ne)$[Ne+G]=re[Ne];return Ne}function Be(re,$){return re instanceof $||re!=null&&re.constructor!=null&&re.constructor.name!=null&&re.constructor.name===$.name}function Ee(re){return re!==re}const qe=function(){const re="0123456789abcdef",$=new Array(256);for(let G=0;G<16;++G){const ue=G*16;for(let Ne=0;Ne<16;++Ne)$[ue+Ne]=re[G]+re[Ne]}return $}();function Xe(re){return typeof BigInt>"u"?et:re}function et(){throw new Error("BigInt not supported")}})(ai);const xt=ai.Buffer,qae=ai.Blob,Kae=ai.BlobOptions,MH=ai.Buffer,Yae=ai.File,Xae=ai.FileOptions,Zae=ai.INSPECT_MAX_BYTES,Jae=ai.SlowBuffer,Qae=ai.TranscodeEncoding,ele=ai.atob,tle=ai.btoa,nle=ai.constants,rle=ai.isAscii,ile=ai.isUtf8,sle=ai.kMaxLength,ole=ai.kStringMaxLength,ale=ai.resolveObjectURL,lle=ai.transcode,cle=Object.freeze(Object.defineProperty({__proto__:null,Blob:qae,BlobOptions:Kae,Buffer:MH,File:Yae,FileOptions:Xae,INSPECT_MAX_BYTES:Zae,SlowBuffer:Jae,TranscodeEncoding:Qae,atob:ele,btoa:tle,constants:nle,default:xt,isAscii:rle,isUtf8:ile,kMaxLength:sle,kStringMaxLength:ole,resolveObjectURL:ale,transcode:lle},Symbol.toStringTag,{value:"Module"}));var Rg={exports:{}};const ule=typeof xt<"u",VD=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,WD=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function jH(t,e,n){n==null&&e!==null&&typeof e=="object"&&(n=e,e=void 0),ule&&xt.isBuffer(t)&&(t=t.toString()),t&&t.charCodeAt(0)===65279&&(t=t.slice(1));const r=JSON.parse(t,e);if(r===null||typeof r!="object")return r;const i=n&&n.protoAction||"error",s=n&&n.constructorAction||"error";if(i==="ignore"&&s==="ignore")return r;if(i!=="ignore"&&s!=="ignore"){if(VD.test(t)===!1&&WD.test(t)===!1)return r}else if(i!=="ignore"&&s==="ignore"){if(VD.test(t)===!1)return r}else if(WD.test(t)===!1)return r;return FH(r,{protoAction:i,constructorAction:s,safe:n&&n.safe})}function FH(t,{protoAction:e="error",constructorAction:n="error",safe:r}={}){let i=[t];for(;i.length;){const s=i;i=[];for(const o of s){if(e!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(r===!0)return null;if(e==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if(n!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(r===!0)return null;if(n==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(const a in o){const l=o[a];l&&typeof l=="object"&&i.push(l)}}}return t}function JN(t,e,n){const r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return jH(t,e,n)}finally{Error.stackTraceLimit=r}}function hle(t,e){const n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return jH(t,e,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=n}}Rg.exports=JN;Rg.exports.default=JN;Rg.exports.parse=JN;Rg.exports.safeParse=hle;Rg.exports.scan=FH;var dle=Rg.exports;const QN=_s(dle);var kn;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(kn||(kn={}));var f3;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(f3||(f3={}));const At=kn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Tc=t=>{switch(typeof t){case"undefined":return At.undefined;case"string":return At.string;case"number":return isNaN(t)?At.nan:At.number;case"boolean":return At.boolean;case"function":return At.function;case"bigint":return At.bigint;case"symbol":return At.symbol;case"object":return Array.isArray(t)?At.array:t===null?At.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?At.promise:typeof Map<"u"&&t instanceof Map?At.map:typeof Set<"u"&&t instanceof Set?At.set:typeof Date<"u"&&t instanceof Date?At.date:At.object;default:return At.unknown}},dt=kn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),fle=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class yo extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return i(this),r}static assert(e){if(!(e instanceof yo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,kn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}yo.create=t=>new yo(t);const Wm=(t,e)=>{let n;switch(t.code){case dt.invalid_type:t.received===At.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case dt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,kn.jsonStringifyReplacer)}`;break;case dt.unrecognized_keys:n=`Unrecognized key(s) in object: ${kn.joinValues(t.keys,", ")}`;break;case dt.invalid_union:n="Invalid input";break;case dt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${kn.joinValues(t.options)}`;break;case dt.invalid_enum_value:n=`Invalid enum value. Expected ${kn.joinValues(t.options)}, received '${t.received}'`;break;case dt.invalid_arguments:n="Invalid function arguments";break;case dt.invalid_return_type:n="Invalid function return type";break;case dt.invalid_date:n="Invalid date";break;case dt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:kn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case dt.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case dt.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case dt.custom:n="Invalid input";break;case dt.invalid_intersection_types:n="Intersection results could not be merged";break;case dt.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case dt.not_finite:n="Number must be finite";break;default:n=e.defaultError,kn.assertNever(t)}return{message:n}};let BH=Wm;function ple(t){BH=t}function A2(){return BH}const P2=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}},mle=[];function Et(t,e){const n=A2(),r=P2({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Wm?void 0:Wm].filter(i=>!!i)});t.common.issues.push(r)}class ns{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return qt;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return ns.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return qt;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const qt=Object.freeze({status:"aborted"}),Jp=t=>({status:"dirty",value:t}),xs=t=>({status:"valid",value:t}),p3=t=>t.status==="aborted",m3=t=>t.status==="dirty",of=t=>t.status==="valid",I1=t=>typeof Promise<"u"&&t instanceof Promise;function N2(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function UH(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Bt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Bt||(Bt={}));var _b,wb;class Zl{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const GD=(t,e)=>{if(of(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new yo(t.common.issues);return this._error=n,this._error}}};function un(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{var l,c;const{message:u}=t;return o.code==="invalid_enum_value"?{message:u??a.defaultError}:typeof a.data>"u"?{message:(l=u??r)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(c=u??n)!==null&&c!==void 0?c:a.defaultError}},description:i}}class dn{get description(){return this._def.description}_getType(e){return Tc(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Tc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ns,ctx:{common:e.parent.common,data:e.data,parsedType:Tc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(I1(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Tc(e)},s=this._parseSync({data:e,path:i.path,parent:i});return GD(i,s)}"~validate"(e){var n,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Tc(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:i});return of(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((r=(n=s?.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(s=>of(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Tc(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(I1(i)?i:Promise.resolve(i));return GD(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:dt.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Ba({schema:this,typeName:vt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ma.create(this,this._def)}nullable(){return fh.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Da.create(this)}promise(){return qm.create(this,this._def)}or(e){return j1.create([this,e],this._def)}and(e){return F1.create(this,e,this._def)}transform(e){return new Ba({...un(this._def),schema:this,typeName:vt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new z1({...un(this._def),innerType:this,defaultValue:n,typeName:vt.ZodDefault})}brand(){return new eL({typeName:vt.ZodBranded,type:this,...un(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new V1({...un(this._def),innerType:this,catchValue:n,typeName:vt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return rv.create(this,e)}readonly(){return W1.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const gle=/^c[^\s-]{8,}$/i,ble=/^[0-9a-z]+$/,yle=/^[0-9A-HJKMNP-TV-Z]{26}$/i,vle=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,xle=/^[a-z0-9_-]{21}$/i,_le=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,wle=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Sle=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Ele="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let oC;const kle=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Cle=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Tle=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Ale=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Ple=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Nle=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,$H="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Lle=new RegExp(`^${$H}$`);function HH(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Rle(t){return new RegExp(`^${HH(t)}$`)}function zH(t){let e=`${$H}T${HH(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function Ile(t,e){return!!((e==="v4"||!e)&&kle.test(t)||(e==="v6"||!e)&&Tle.test(t))}function Ole(t,e){if(!_le.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function Dle(t,e){return!!((e==="v4"||!e)&&Cle.test(t)||(e==="v6"||!e)&&Ale.test(t))}class La extends dn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==At.string){const s=this._getOrReturnCtx(e);return Et(s,{code:dt.invalid_type,expected:At.string,received:s.parsedType}),qt}const r=new ns;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Et(i,{code:dt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Et(i,{code:dt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?Et(i,{code:dt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Et(i,{code:dt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")Sle.test(e.data)||(i=this._getOrReturnCtx(e,i),Et(i,{validation:"email",code:dt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")oC||(oC=new RegExp(Ele,"u")),oC.test(e.data)||(i=this._getOrReturnCtx(e,i),Et(i,{validation:"emoji",code:dt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")vle.test(e.data)||(i=this._getOrReturnCtx(e,i),Et(i,{validation:"uuid",code:dt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")xle.test(e.data)||(i=this._getOrReturnCtx(e,i),Et(i,{validation:"nanoid",code:dt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")gle.test(e.data)||(i=this._getOrReturnCtx(e,i),Et(i,{validation:"cuid",code:dt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")ble.test(e.data)||(i=this._getOrReturnCtx(e,i),Et(i,{validation:"cuid2",code:dt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")yle.test(e.data)||(i=this._getOrReturnCtx(e,i),Et(i,{validation:"ulid",code:dt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Et(i,{validation:"url",code:dt.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Et(i,{validation:"regex",code:dt.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Et(i,{code:dt.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Et(i,{code:dt.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Et(i,{code:dt.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?zH(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Et(i,{code:dt.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?Lle.test(e.data)||(i=this._getOrReturnCtx(e,i),Et(i,{code:dt.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?Rle(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Et(i,{code:dt.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?wle.test(e.data)||(i=this._getOrReturnCtx(e,i),Et(i,{validation:"duration",code:dt.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?Ile(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Et(i,{validation:"ip",code:dt.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?Ole(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),Et(i,{validation:"jwt",code:dt.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?Dle(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Et(i,{validation:"cidr",code:dt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?Ple.test(e.data)||(i=this._getOrReturnCtx(e,i),Et(i,{validation:"base64",code:dt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?Nle.test(e.data)||(i=this._getOrReturnCtx(e,i),Et(i,{validation:"base64url",code:dt.invalid_string,message:s.message}),r.dirty()):kn.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:dt.invalid_string,...Bt.errToObj(r)})}_addCheck(e){return new La({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Bt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Bt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Bt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Bt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Bt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Bt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Bt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Bt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Bt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Bt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Bt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Bt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Bt.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...Bt.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Bt.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Bt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Bt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Bt.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Bt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Bt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Bt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Bt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Bt.errToObj(n)})}nonempty(e){return this.min(1,Bt.errToObj(e))}trim(){return new La({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new La({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new La({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}La.create=t=>{var e;return new La({checks:[],typeName:vt.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...un(t)})};function Mle(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class uh extends dn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==At.number){const s=this._getOrReturnCtx(e);return Et(s,{code:dt.invalid_type,expected:At.number,received:s.parsedType}),qt}let r;const i=new ns;for(const s of this._def.checks)s.kind==="int"?kn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Et(r,{code:dt.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Et(r,{code:dt.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Et(r,{code:dt.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?Mle(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),Et(r,{code:dt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Et(r,{code:dt.not_finite,message:s.message}),i.dirty()):kn.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Bt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Bt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Bt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Bt.toString(n))}setLimit(e,n,r,i){return new uh({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Bt.toString(i)}]})}_addCheck(e){return new uh({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Bt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Bt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Bt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Bt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Bt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Bt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Bt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Bt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Bt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&kn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}uh.create=t=>new uh({checks:[],typeName:vt.ZodNumber,coerce:t?.coerce||!1,...un(t)});class hh extends dn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==At.bigint)return this._getInvalidInput(e);let r;const i=new ns;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Et(r,{code:dt.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Et(r,{code:dt.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Et(r,{code:dt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):kn.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Et(n,{code:dt.invalid_type,expected:At.bigint,received:n.parsedType}),qt}gte(e,n){return this.setLimit("min",e,!0,Bt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Bt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Bt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Bt.toString(n))}setLimit(e,n,r,i){return new hh({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Bt.toString(i)}]})}_addCheck(e){return new hh({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Bt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Bt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Bt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Bt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Bt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}hh.create=t=>{var e;return new hh({checks:[],typeName:vt.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...un(t)})};class O1 extends dn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==At.boolean){const r=this._getOrReturnCtx(e);return Et(r,{code:dt.invalid_type,expected:At.boolean,received:r.parsedType}),qt}return xs(e.data)}}O1.create=t=>new O1({typeName:vt.ZodBoolean,coerce:t?.coerce||!1,...un(t)});class af extends dn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==At.date){const s=this._getOrReturnCtx(e);return Et(s,{code:dt.invalid_type,expected:At.date,received:s.parsedType}),qt}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Et(s,{code:dt.invalid_date}),qt}const r=new ns;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Et(i,{code:dt.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Et(i,{code:dt.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):kn.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new af({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Bt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Bt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}af.create=t=>new af({checks:[],coerce:t?.coerce||!1,typeName:vt.ZodDate,...un(t)});class L2 extends dn{_parse(e){if(this._getType(e)!==At.symbol){const r=this._getOrReturnCtx(e);return Et(r,{code:dt.invalid_type,expected:At.symbol,received:r.parsedType}),qt}return xs(e.data)}}L2.create=t=>new L2({typeName:vt.ZodSymbol,...un(t)});class D1 extends dn{_parse(e){if(this._getType(e)!==At.undefined){const r=this._getOrReturnCtx(e);return Et(r,{code:dt.invalid_type,expected:At.undefined,received:r.parsedType}),qt}return xs(e.data)}}D1.create=t=>new D1({typeName:vt.ZodUndefined,...un(t)});class M1 extends dn{_parse(e){if(this._getType(e)!==At.null){const r=this._getOrReturnCtx(e);return Et(r,{code:dt.invalid_type,expected:At.null,received:r.parsedType}),qt}return xs(e.data)}}M1.create=t=>new M1({typeName:vt.ZodNull,...un(t)});class Gm extends dn{constructor(){super(...arguments),this._any=!0}_parse(e){return xs(e.data)}}Gm.create=t=>new Gm({typeName:vt.ZodAny,...un(t)});class zd extends dn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return xs(e.data)}}zd.create=t=>new zd({typeName:vt.ZodUnknown,...un(t)});class qc extends dn{_parse(e){const n=this._getOrReturnCtx(e);return Et(n,{code:dt.invalid_type,expected:At.never,received:n.parsedType}),qt}}qc.create=t=>new qc({typeName:vt.ZodNever,...un(t)});class R2 extends dn{_parse(e){if(this._getType(e)!==At.undefined){const r=this._getOrReturnCtx(e);return Et(r,{code:dt.invalid_type,expected:At.void,received:r.parsedType}),qt}return xs(e.data)}}R2.create=t=>new R2({typeName:vt.ZodVoid,...un(t)});class Da extends dn{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==At.array)return Et(n,{code:dt.invalid_type,expected:At.array,received:n.parsedType}),qt;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(Et(n,{code:o?dt.too_big:dt.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Et(n,{code:dt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Et(n,{code:dt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new Zl(n,o,n.path,a)))).then(o=>ns.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new Zl(n,o,n.path,a)));return ns.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new Da({...this._def,minLength:{value:e,message:Bt.toString(n)}})}max(e,n){return new Da({...this._def,maxLength:{value:e,message:Bt.toString(n)}})}length(e,n){return new Da({...this._def,exactLength:{value:e,message:Bt.toString(n)}})}nonempty(e){return this.min(1,e)}}Da.create=(t,e)=>new Da({type:t,minLength:null,maxLength:null,exactLength:null,typeName:vt.ZodArray,...un(e)});function Wp(t){if(t instanceof wr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Ma.create(Wp(r))}return new wr({...t._def,shape:()=>e})}else return t instanceof Da?new Da({...t._def,type:Wp(t.element)}):t instanceof Ma?Ma.create(Wp(t.unwrap())):t instanceof fh?fh.create(Wp(t.unwrap())):t instanceof Jl?Jl.create(t.items.map(e=>Wp(e))):t}class wr extends dn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=kn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==At.object){const c=this._getOrReturnCtx(e);return Et(c,{code:dt.invalid_type,expected:At.object,received:c.parsedType}),qt}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof qc&&this._def.unknownKeys==="strip"))for(const c in i.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],h=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Zl(i,h,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof qc){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(c==="strict")a.length>0&&(Et(i,{code:dt.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const h=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Zl(i,h,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const h=await u.key,d=await u.value;c.push({key:h,value:d,alwaysSet:u.alwaysSet})}return c}).then(c=>ns.mergeObjectSync(r,c)):ns.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return Bt.errToObj,new wr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,a;const l=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Bt.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new wr({...this._def,unknownKeys:"strip"})}passthrough(){return new wr({...this._def,unknownKeys:"passthrough"})}extend(e){return new wr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new wr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:vt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new wr({...this._def,catchall:e})}pick(e){const n={};return kn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new wr({...this._def,shape:()=>n})}omit(e){const n={};return kn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new wr({...this._def,shape:()=>n})}deepPartial(){return Wp(this)}partial(e){const n={};return kn.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new wr({...this._def,shape:()=>n})}required(e){const n={};return kn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof Ma;)s=s._def.innerType;n[r]=s}}),new wr({...this._def,shape:()=>n})}keyof(){return VH(kn.objectKeys(this.shape))}}wr.create=(t,e)=>new wr({shape:()=>t,unknownKeys:"strip",catchall:qc.create(),typeName:vt.ZodObject,...un(e)});wr.strictCreate=(t,e)=>new wr({shape:()=>t,unknownKeys:"strict",catchall:qc.create(),typeName:vt.ZodObject,...un(e)});wr.lazycreate=(t,e)=>new wr({shape:t,unknownKeys:"strip",catchall:qc.create(),typeName:vt.ZodObject,...un(e)});class j1 extends dn{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new yo(a.ctx.common.issues));return Et(n,{code:dt.invalid_union,unionErrors:o}),qt}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new yo(l));return Et(n,{code:dt.invalid_union,unionErrors:a}),qt}}get options(){return this._def.options}}j1.create=(t,e)=>new j1({options:t,typeName:vt.ZodUnion,...un(e)});const Ec=t=>t instanceof U1?Ec(t.schema):t instanceof Ba?Ec(t.innerType()):t instanceof $1?[t.value]:t instanceof dh?t.options:t instanceof H1?kn.objectValues(t.enum):t instanceof z1?Ec(t._def.innerType):t instanceof D1?[void 0]:t instanceof M1?[null]:t instanceof Ma?[void 0,...Ec(t.unwrap())]:t instanceof fh?[null,...Ec(t.unwrap())]:t instanceof eL||t instanceof W1?Ec(t.unwrap()):t instanceof V1?Ec(t._def.innerType):[];class IE extends dn{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==At.object)return Et(n,{code:dt.invalid_type,expected:At.object,received:n.parsedType}),qt;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(Et(n,{code:dt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),qt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=Ec(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new IE({typeName:vt.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...un(r)})}}function g3(t,e){const n=Tc(t),r=Tc(e);if(t===e)return{valid:!0,data:t};if(n===At.object&&r===At.object){const i=kn.objectKeys(e),s=kn.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=g3(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===At.array&&r===At.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=g3(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===At.date&&r===At.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class F1 extends dn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(p3(s)||p3(o))return qt;const a=g3(s.value,o.value);return a.valid?((m3(s)||m3(o))&&n.dirty(),{status:n.value,value:a.data}):(Et(r,{code:dt.invalid_intersection_types}),qt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}F1.create=(t,e,n)=>new F1({left:t,right:e,typeName:vt.ZodIntersection,...un(n)});class Jl extends dn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==At.array)return Et(r,{code:dt.invalid_type,expected:At.array,received:r.parsedType}),qt;if(r.data.length<this._def.items.length)return Et(r,{code:dt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),qt;!this._def.rest&&r.data.length>this._def.items.length&&(Et(r,{code:dt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Zl(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>ns.mergeArray(n,o)):ns.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Jl({...this._def,rest:e})}}Jl.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Jl({items:t,typeName:vt.ZodTuple,rest:null,...un(e)})};class B1 extends dn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==At.object)return Et(r,{code:dt.invalid_type,expected:At.object,received:r.parsedType}),qt;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new Zl(r,a,r.path,a)),value:o._parse(new Zl(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?ns.mergeObjectAsync(n,i):ns.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof dn?new B1({keyType:e,valueType:n,typeName:vt.ZodRecord,...un(r)}):new B1({keyType:La.create(),valueType:e,typeName:vt.ZodRecord,...un(n)})}}class I2 extends dn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==At.map)return Et(r,{code:dt.invalid_type,expected:At.map,received:r.parsedType}),qt;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:i._parse(new Zl(r,a,r.path,[c,"key"])),value:s._parse(new Zl(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return qt;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return qt;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}I2.create=(t,e,n)=>new I2({valueType:e,keyType:t,typeName:vt.ZodMap,...un(n)});class lf extends dn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==At.set)return Et(r,{code:dt.invalid_type,expected:At.set,received:r.parsedType}),qt;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Et(r,{code:dt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Et(r,{code:dt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return qt;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>s._parse(new Zl(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new lf({...this._def,minSize:{value:e,message:Bt.toString(n)}})}max(e,n){return new lf({...this._def,maxSize:{value:e,message:Bt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}lf.create=(t,e)=>new lf({valueType:t,minSize:null,maxSize:null,typeName:vt.ZodSet,...un(e)});class mm extends dn{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==At.function)return Et(n,{code:dt.invalid_type,expected:At.function,received:n.parsedType}),qt;function r(a,l){return P2({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,A2(),Wm].filter(c=>!!c),issueData:{code:dt.invalid_arguments,argumentsError:l}})}function i(a,l){return P2({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,A2(),Wm].filter(c=>!!c),issueData:{code:dt.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof qm){const a=this;return xs(async function(...l){const c=new yo([]),u=await a._def.args.parseAsync(l,s).catch(f=>{throw c.addIssue(r(l,f)),c}),h=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(h,s).catch(f=>{throw c.addIssue(i(h,f)),c})})}else{const a=this;return xs(function(...l){const c=a._def.args.safeParse(l,s);if(!c.success)throw new yo([r(l,c.error)]);const u=Reflect.apply(o,this,c.data),h=a._def.returns.safeParse(u,s);if(!h.success)throw new yo([i(u,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new mm({...this._def,args:Jl.create(e).rest(zd.create())})}returns(e){return new mm({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new mm({args:e||Jl.create([]).rest(zd.create()),returns:n||zd.create(),typeName:vt.ZodFunction,...un(r)})}}class U1 extends dn{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}U1.create=(t,e)=>new U1({getter:t,typeName:vt.ZodLazy,...un(e)});class $1 extends dn{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Et(n,{received:n.data,code:dt.invalid_literal,expected:this._def.value}),qt}return{status:"valid",value:e.data}}get value(){return this._def.value}}$1.create=(t,e)=>new $1({value:t,typeName:vt.ZodLiteral,...un(e)});function VH(t,e){return new dh({values:t,typeName:vt.ZodEnum,...un(e)})}class dh extends dn{constructor(){super(...arguments),_b.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Et(n,{expected:kn.joinValues(r),received:n.parsedType,code:dt.invalid_type}),qt}if(N2(this,_b)||UH(this,_b,new Set(this._def.values)),!N2(this,_b).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Et(n,{received:n.data,code:dt.invalid_enum_value,options:r}),qt}return xs(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return dh.create(e,{...this._def,...n})}exclude(e,n=this._def){return dh.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}_b=new WeakMap;dh.create=VH;class H1 extends dn{constructor(){super(...arguments),wb.set(this,void 0)}_parse(e){const n=kn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==At.string&&r.parsedType!==At.number){const i=kn.objectValues(n);return Et(r,{expected:kn.joinValues(i),received:r.parsedType,code:dt.invalid_type}),qt}if(N2(this,wb)||UH(this,wb,new Set(kn.getValidEnumValues(this._def.values))),!N2(this,wb).has(e.data)){const i=kn.objectValues(n);return Et(r,{received:r.data,code:dt.invalid_enum_value,options:i}),qt}return xs(e.data)}get enum(){return this._def.values}}wb=new WeakMap;H1.create=(t,e)=>new H1({values:t,typeName:vt.ZodNativeEnum,...un(e)});class qm extends dn{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==At.promise&&n.common.async===!1)return Et(n,{code:dt.invalid_type,expected:At.promise,received:n.parsedType}),qt;const r=n.parsedType===At.promise?n.data:Promise.resolve(n.data);return xs(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}qm.create=(t,e)=>new qm({type:t,typeName:vt.ZodPromise,...un(e)});class Ba extends dn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===vt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{Et(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return qt;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?qt:l.status==="dirty"||n.value==="dirty"?Jp(l.value):l});{if(n.value==="aborted")return qt;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?qt:a.status==="dirty"||n.value==="dirty"?Jp(a.value):a}}if(i.type==="refinement"){const o=a=>{const l=i.refinement(a,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?qt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?qt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!of(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>of(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);kn.assertNever(i)}}Ba.create=(t,e,n)=>new Ba({schema:t,typeName:vt.ZodEffects,effect:e,...un(n)});Ba.createWithPreprocess=(t,e,n)=>new Ba({schema:e,effect:{type:"preprocess",transform:t},typeName:vt.ZodEffects,...un(n)});class Ma extends dn{_parse(e){return this._getType(e)===At.undefined?xs(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ma.create=(t,e)=>new Ma({innerType:t,typeName:vt.ZodOptional,...un(e)});class fh extends dn{_parse(e){return this._getType(e)===At.null?xs(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}fh.create=(t,e)=>new fh({innerType:t,typeName:vt.ZodNullable,...un(e)});class z1 extends dn{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===At.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}z1.create=(t,e)=>new z1({innerType:t,typeName:vt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...un(e)});class V1 extends dn{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return I1(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new yo(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new yo(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}V1.create=(t,e)=>new V1({innerType:t,typeName:vt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...un(e)});class O2 extends dn{_parse(e){if(this._getType(e)!==At.nan){const r=this._getOrReturnCtx(e);return Et(r,{code:dt.invalid_type,expected:At.nan,received:r.parsedType}),qt}return{status:"valid",value:e.data}}}O2.create=t=>new O2({typeName:vt.ZodNaN,...un(t)});const jle=Symbol("zod_brand");class eL extends dn{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class rv extends dn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?qt:s.status==="dirty"?(n.dirty(),Jp(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?qt:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new rv({in:e,out:n,typeName:vt.ZodPipeline})}}class W1 extends dn{_parse(e){const n=this._def.innerType._parse(e),r=i=>(of(i)&&(i.value=Object.freeze(i.value)),i);return I1(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}W1.create=(t,e)=>new W1({innerType:t,typeName:vt.ZodReadonly,...un(e)});function qD(t,e){const n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function WH(t,e={},n){return t?Gm.create().superRefine((r,i)=>{var s,o;const a=t(r);if(a instanceof Promise)return a.then(l=>{var c,u;if(!l){const h=qD(e,r),d=(u=(c=h.fatal)!==null&&c!==void 0?c:n)!==null&&u!==void 0?u:!0;i.addIssue({code:"custom",...h,fatal:d})}});if(!a){const l=qD(e,r),c=(o=(s=l.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0;i.addIssue({code:"custom",...l,fatal:c})}}):Gm.create()}const Fle={object:wr.lazycreate};var vt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(vt||(vt={}));const Ble=(t,e={message:`Input not instance of ${t.name}`})=>WH(n=>n instanceof t,e),GH=La.create,qH=uh.create,Ule=O2.create,$le=hh.create,KH=O1.create,Hle=af.create,zle=L2.create,Vle=D1.create,Wle=M1.create,Gle=Gm.create,qle=zd.create,Kle=qc.create,Yle=R2.create,Xle=Da.create,Zle=wr.create,Jle=wr.strictCreate,Qle=j1.create,ece=IE.create,tce=F1.create,nce=Jl.create,rce=B1.create,ice=I2.create,sce=lf.create,oce=mm.create,ace=U1.create,lce=$1.create,cce=dh.create,uce=H1.create,hce=qm.create,KD=Ba.create,dce=Ma.create,fce=fh.create,pce=Ba.createWithPreprocess,mce=rv.create,gce=()=>GH().optional(),bce=()=>qH().optional(),yce=()=>KH().optional(),vce={string:t=>La.create({...t,coerce:!0}),number:t=>uh.create({...t,coerce:!0}),boolean:t=>O1.create({...t,coerce:!0}),bigint:t=>hh.create({...t,coerce:!0}),date:t=>af.create({...t,coerce:!0})},xce=qt;var Pt=Object.freeze({__proto__:null,defaultErrorMap:Wm,setErrorMap:ple,getErrorMap:A2,makeIssue:P2,EMPTY_PATH:mle,addIssueToContext:Et,ParseStatus:ns,INVALID:qt,DIRTY:Jp,OK:xs,isAborted:p3,isDirty:m3,isValid:of,isAsync:I1,get util(){return kn},get objectUtil(){return f3},ZodParsedType:At,getParsedType:Tc,ZodType:dn,datetimeRegex:zH,ZodString:La,ZodNumber:uh,ZodBigInt:hh,ZodBoolean:O1,ZodDate:af,ZodSymbol:L2,ZodUndefined:D1,ZodNull:M1,ZodAny:Gm,ZodUnknown:zd,ZodNever:qc,ZodVoid:R2,ZodArray:Da,ZodObject:wr,ZodUnion:j1,ZodDiscriminatedUnion:IE,ZodIntersection:F1,ZodTuple:Jl,ZodRecord:B1,ZodMap:I2,ZodSet:lf,ZodFunction:mm,ZodLazy:U1,ZodLiteral:$1,ZodEnum:dh,ZodNativeEnum:H1,ZodPromise:qm,ZodEffects:Ba,ZodTransformer:Ba,ZodOptional:Ma,ZodNullable:fh,ZodDefault:z1,ZodCatch:V1,ZodNaN:O2,BRAND:jle,ZodBranded:eL,ZodPipeline:rv,ZodReadonly:W1,custom:WH,Schema:dn,ZodSchema:dn,late:Fle,get ZodFirstPartyTypeKind(){return vt},coerce:vce,any:Gle,array:Xle,bigint:$le,boolean:KH,date:Hle,discriminatedUnion:ece,effect:KD,enum:cce,function:oce,instanceof:Ble,intersection:tce,lazy:ace,literal:lce,map:ice,nan:Ule,nativeEnum:uce,never:Kle,null:Wle,nullable:fce,number:qH,object:Zle,oboolean:yce,onumber:bce,optional:dce,ostring:gce,pipeline:mce,preprocess:pce,promise:hce,record:rce,set:sce,strictObject:Jle,string:GH,symbol:zle,transformer:KD,tuple:nce,undefined:Vle,union:Qle,unknown:qle,void:Yle,NEVER:xce,ZodIssueCode:dt,quotelessJson:fle,ZodError:yo});class YH{cachedDynamicModels;getApiKeyLink;labelForGetApiKey;icon;getProviderBaseUrlAndKey(e){const{apiKeys:n,providerSettings:r,serverEnv:i,defaultBaseUrlKey:s,defaultApiTokenKey:o}=e;let a=r?.baseUrl;const l=Ed.getInstance();a&&a.length==0&&(a=void 0);const c=this.config.baseUrlKey||s;let u=a||i?.[c]||Qn?.env?.[c]||l.env?.[c]||this.config.baseUrl;u&&u.endsWith("/")&&(u=u.slice(0,-1));const h=this.config.apiTokenKey||o,d=n?.[this.name]||i?.[h]||Qn?.env?.[h]||l.env?.[h];return{baseUrl:u,apiKey:d}}getModelsFromCache(e){if(!this.cachedDynamicModels)return null;const n=this.cachedDynamicModels.cacheId,r=this.getDynamicModelsCacheKey(e);return n!==r?(this.cachedDynamicModels=void 0,null):this.cachedDynamicModels.models}getDynamicModelsCacheKey(e){return JSON.stringify({apiKeys:e.apiKeys?.[this.name],providerSettings:e.providerSettings?.[this.name],serverEnv:e.serverEnv})}storeDynamicModels(e,n){const r=this.getDynamicModelsCacheKey(e);this.cachedDynamicModels={cacheId:r,models:n}}}var XH="vercel.ai.error",_ce=Symbol.for(XH),ZH,wce=class JH extends Error{constructor({name:e,message:n,cause:r}){super(n),this[ZH]=!0,this.name=e,this.cause=r}static isInstance(e){return JH.hasMarker(e,XH)}static hasMarker(e,n){const r=Symbol.for(n);return e!=null&&typeof e=="object"&&r in e&&typeof e[r]=="boolean"&&e[r]===!0}toJSON(){return{name:this.name,message:this.message}}};ZH=_ce;var ra=wce,b3="AI_APICallError",QH=`vercel.ai.error.${b3}`,Sce=Symbol.for(QH),ez,Lc=class extends ra{constructor({message:t,url:e,requestBodyValues:n,statusCode:r,responseHeaders:i,responseBody:s,cause:o,isRetryable:a=r!=null&&(r===408||r===409||r===429||r>=500),data:l}){super({name:b3,message:t,cause:o}),this[ez]=!0,this.url=e,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=i,this.responseBody=s,this.isRetryable=a,this.data=l}static isInstance(t){return ra.hasMarker(t,QH)}static isAPICallError(t){return t instanceof Error&&t.name===b3&&typeof t.url=="string"&&typeof t.requestBodyValues=="object"&&(t.statusCode==null||typeof t.statusCode=="number")&&(t.responseHeaders==null||typeof t.responseHeaders=="object")&&(t.responseBody==null||typeof t.responseBody=="string")&&(t.cause==null||typeof t.cause=="object")&&typeof t.isRetryable=="boolean"&&(t.data==null||typeof t.data=="object")}toJSON(){return{name:this.name,message:this.message,url:this.url,requestBodyValues:this.requestBodyValues,statusCode:this.statusCode,responseHeaders:this.responseHeaders,responseBody:this.responseBody,cause:this.cause,isRetryable:this.isRetryable,data:this.data}}};ez=Sce;var y3="AI_EmptyResponseBodyError",tz=`vercel.ai.error.${y3}`,Ece=Symbol.for(tz),nz,kce=class extends ra{constructor({message:t="Empty response body"}={}){super({name:y3,message:t}),this[nz]=!0}static isInstance(t){return ra.hasMarker(t,tz)}static isEmptyResponseBodyError(t){return t instanceof Error&&t.name===y3}};nz=Ece;function rz(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var v3="AI_JSONParseError",iz=`vercel.ai.error.${v3}`,Cce=Symbol.for(iz),sz,D2=class extends ra{constructor({text:e,cause:n}){super({name:v3,message:`JSON parsing failed: Text: ${e}.
Error message: ${rz(n)}`,cause:n}),this[sz]=!0,this.text=e}static isInstance(e){return ra.hasMarker(e,iz)}static isJSONParseError(e){return e instanceof Error&&e.name===v3&&typeof e.text=="string"&&typeof e.cause=="string"}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,valueText:this.text}}};sz=Cce;var x3="AI_LoadAPIKeyError",oz=`vercel.ai.error.${x3}`,Tce=Symbol.for(oz),az,i_=class extends ra{constructor({message:t}){super({name:x3,message:t}),this[az]=!0}static isInstance(t){return ra.hasMarker(t,oz)}static isLoadAPIKeyError(t){return t instanceof Error&&t.name===x3}};az=Tce;var _3="AI_TypeValidationError",lz=`vercel.ai.error.${_3}`,Ace=Symbol.for(lz),cz,Gb=class extends ra{constructor({value:e,cause:n}){super({name:_3,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${rz(n)}`,cause:n}),this[cz]=!0,this.value=e}static isInstance(e){return ra.hasMarker(e,lz)}static isTypeValidationError(e){return e instanceof Error&&e.name===_3}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,value:this.value}}};cz=Ace;var w3="AI_UnsupportedFunctionalityError",uz=`vercel.ai.error.${w3}`,Pce=Symbol.for(uz),hz,S3=class extends ra{constructor({functionality:t}){super({name:w3,message:`'${t}' functionality not supported.`}),this[hz]=!0,this.functionality=t}static isInstance(t){return ra.hasMarker(t,uz)}static isUnsupportedFunctionalityError(t){return t instanceof Error&&t.name===w3&&typeof t.functionality=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,functionality:this.functionality}}};hz=Pce;function Nce(t){let e,n,r,i,s,o,a;return l(),{feed:c,reset:l};function l(){e=!0,n="",r=0,i=-1,s=void 0,o=void 0,a=""}function c(h){n=n?n+h:h,e&&Lce(n)&&(n=n.slice(dz.length)),e=!1;const d=n.length;let f=0,m=!1;for(;f<d;){m&&(n[f]===`
`&&++f,m=!1);let g=-1,b=i,y;for(let v=r;g<0&&v<d;++v)y=n[v],y===":"&&b<0?b=v-f:y==="\r"?(m=!0,g=v-f):y===`
`&&(g=v-f);if(g<0){r=d-f,i=b;break}else r=0,i=-1;u(n,f,b,g),f+=g+1}f===d?n="":f>0&&(n=n.slice(f))}function u(h,d,f,m){if(m===0){a.length>0&&(t({type:"event",id:s,event:o||void 0,data:a.slice(0,-1)}),a="",s=void 0),o=void 0;return}const g=f<0,b=h.slice(d,d+(g?m:f));let y=0;g?y=m:h[d+f+1]===" "?y=f+2:y=f+1;const v=d+y,x=m-y,w=h.slice(v,v+x).toString();if(b==="data")a+=w?"".concat(w,`
`):`
`;else if(b==="event")o=w;else if(b==="id"&&!w.includes("\0"))s=w;else if(b==="retry"){const S=parseInt(w,10);Number.isNaN(S)||t({type:"reconnect-interval",value:S})}}}const dz=[239,187,191];function Lce(t){return dz.every((e,n)=>t.charCodeAt(n)===e)}class Rce extends TransformStream{constructor(){let e;super({start(n){e=Nce(r=>{r.type==="event"&&n.enqueue(r)})},transform(n){e.feed(n)}})}}var Ice={};function YD(...t){return t.reduce((e,n)=>({...e,...n??{}}),{})}function OE(t){const e={};return t.headers.forEach((n,r)=>{e[r]=n}),e}function aC(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}function Oce({apiKey:t,environmentVariableName:e,apiKeyParameterName:n="apiKey",description:r}){if(typeof t=="string")return t;if(t!=null)throw new i_({message:`${r} API key must be a string.`});if(typeof Qn>"u")throw new i_({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(t=Ice[e],t==null)throw new i_({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new i_({message:`${r} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}var E3=Symbol.for("vercel.ai.validator");function Dce(t){return{[E3]:!0,validate:t}}function Mce(t){return typeof t=="object"&&t!==null&&E3 in t&&t[E3]===!0&&"validate"in t}function jce(t){return Dce(e=>{const n=t.safeParse(e);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function Fce({value:t,schema:e}){const n=fz({value:t,schema:e});if(!n.success)throw new Gb({value:t,cause:n.error});return n.value}function fz({value:t,schema:e}){const n=Mce(e)?e:jce(e);try{if(n.validate==null)return{success:!0,value:t};const r=n.validate(t);return r.success?r:{success:!1,error:new Gb({value:t,cause:r.error})}}catch(r){return{success:!1,error:Gb.isTypeValidationError(r)?r:new Gb({value:t,cause:r})}}}function Bce({text:t,schema:e}){try{const n=QN.parse(t);return e==null?n:Fce({value:n,schema:e})}catch(n){throw D2.isJSONParseError(n)||Gb.isTypeValidationError(n)?n:new D2({text:t,cause:n})}}function pz({text:t,schema:e}){try{const n=QN.parse(t);return e==null?{success:!0,value:n}:fz({value:n,schema:e})}catch(n){return{success:!1,error:D2.isJSONParseError(n)?n:new D2({text:t,cause:n})}}}function Uce(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>n!=null))}var $ce=()=>fetch,XD=async({url:t,headers:e,body:n,failedResponseHandler:r,successfulResponseHandler:i,abortSignal:s,fetch:o})=>Hce({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:i,abortSignal:s,fetch:o}),Hce=async({url:t,headers:e={},body:n,successfulResponseHandler:r,failedResponseHandler:i,abortSignal:s,fetch:o=$ce()})=>{try{const a=await o(t,{method:"POST",headers:Uce(e),body:n.content,signal:s}),l=OE(a);if(!a.ok){let c;try{c=await i({response:a,url:t,requestBodyValues:n.values})}catch(u){throw aC(u)||Lc.isAPICallError(u)?u:new Lc({message:"Failed to process error response",cause:u,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:a,url:t,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(aC(c)||Lc.isAPICallError(c))?c:new Lc({message:"Failed to process successful response",cause:c,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}}catch(a){if(aC(a))throw a;if(a instanceof TypeError&&a.message==="fetch failed"){const l=a.cause;if(l!=null)throw new Lc({message:`Cannot connect to API: ${l.message}`,cause:l,url:t,requestBodyValues:n.values,isRetryable:!0})}throw a}},zce=({errorSchema:t,errorToMessage:e,isRetryable:n})=>async({response:r,url:i,requestBodyValues:s})=>{const o=await r.text(),a=OE(r);if(o.trim()==="")return{responseHeaders:a,value:new Lc({message:r.statusText,url:i,requestBodyValues:s,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})};try{const l=Bce({text:o,schema:t});return{responseHeaders:a,value:new Lc({message:e(l),url:i,requestBodyValues:s,statusCode:r.status,responseHeaders:a,responseBody:o,data:l,isRetryable:n?.(r,l)})}}catch{return{responseHeaders:a,value:new Lc({message:r.statusText,url:i,requestBodyValues:s,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})}}},Vce=t=>async({response:e})=>{const n=OE(e);if(e.body==null)throw new kce({});return{responseHeaders:n,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new Rce).pipeThrough(new TransformStream({transform({data:r},i){r!=="[DONE]"&&i.enqueue(pz({text:r,schema:t}))}}))}},Wce=t=>async({response:e,url:n,requestBodyValues:r})=>{const i=await e.text(),s=pz({text:i,schema:t}),o=OE(e);if(!s.success)throw new Lc({message:"Invalid JSON response",cause:s.error,statusCode:e.status,responseHeaders:o,responseBody:i,url:n,requestBodyValues:r});return{responseHeaders:o,value:s.value}};function Gce(t){let e="";for(let n=0;n<t.length;n++)e+=String.fromCodePoint(t[n]);return globalThis.btoa(e)}function qce(t){return t?.replace(/\/$/,"")}var Kce=Pt.object({type:Pt.literal("error"),error:Pt.object({type:Pt.string(),message:Pt.string()})}),ZD=zce({errorSchema:Kce,errorToMessage:t=>t.error.message});function Yce(t){var e;const n=Xce(t);let r;const i=[];for(let s=0;s<n.length;s++){const o=n[s],a=o.type;switch(a){case"system":{if(r!=null)throw new S3({functionality:"Multiple system messages that are separated by user/assistant messages"});r=o.messages.map(({content:l})=>l).join(`
`);break}case"user":{const l=[];for(const{role:c,content:u}of o.messages)switch(c){case"user":{for(const h of u)switch(h.type){case"text":{l.push({type:"text",text:h.text});break}case"image":{if(h.image instanceof URL)throw new S3({functionality:"Image URLs in user messages"});l.push({type:"image",source:{type:"base64",media_type:(e=h.mimeType)!=null?e:"image/jpeg",data:Gce(h.image)}});break}}break}case"tool":{for(const h of u)l.push({type:"tool_result",tool_use_id:h.toolCallId,content:JSON.stringify(h.result),is_error:h.isError});break}default:{const h=c;throw new Error(`Unsupported role: ${h}`)}}i.push({role:"user",content:l});break}case"assistant":{const l=[];for(const{content:c}of o.messages)for(let u=0;u<c.length;u++){const h=c[u];switch(h.type){case"text":{l.push({type:"text",text:s===n.length-1&&u===o.messages.length-1?h.text.trim():h.text});break}case"tool-call":{l.push({type:"tool_use",id:h.toolCallId,name:h.toolName,input:h.args});break}}}i.push({role:"assistant",content:l});break}default:{const l=a;throw new Error(`Unsupported type: ${l}`)}}}return{system:r,messages:i}}function Xce(t){const e=[];let n;for(const{role:r,content:i}of t)switch(r){case"system":{n?.type!=="system"&&(n={type:"system",messages:[]},e.push(n)),n.messages.push({role:r,content:i});break}case"assistant":{n?.type!=="assistant"&&(n={type:"assistant",messages:[]},e.push(n)),n.messages.push({role:r,content:i});break}case"user":{n?.type!=="user"&&(n={type:"user",messages:[]},e.push(n)),n.messages.push({role:r,content:i});break}case"tool":{n?.type!=="user"&&(n={type:"user",messages:[]},e.push(n)),n.messages.push({role:r,content:i});break}default:{const s=r;throw new Error(`Unsupported role: ${s}`)}}return e}function JD(t){switch(t){case"end_turn":case"stop_sequence":return"stop";case"tool_use":return"tool-calls";case"max_tokens":return"length";default:return"other"}}var Zce=class{constructor(t,e,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.supportsImageUrls=!1,this.modelId=t,this.settings=e,this.config=n}get provider(){return this.config.provider}async getArgs({mode:t,prompt:e,maxTokens:n,temperature:r,topP:i,topK:s,frequencyPenalty:o,presencePenalty:a,stopSequences:l,responseFormat:c,seed:u}){const h=t.type,d=[];o!=null&&d.push({type:"unsupported-setting",setting:"frequencyPenalty"}),a!=null&&d.push({type:"unsupported-setting",setting:"presencePenalty"}),u!=null&&d.push({type:"unsupported-setting",setting:"seed"}),c!=null&&c.type!=="text"&&d.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const f=Yce(e),m={model:this.modelId,top_k:s??this.settings.topK,max_tokens:n??4096,temperature:r,top_p:i,stop_sequences:l,system:f.system,messages:f.messages};switch(h){case"regular":return{args:{...m,...eue(t)},warnings:d};case"object-json":throw new S3({functionality:"json-mode object generation"});case"object-tool":{const{name:g,description:b,parameters:y}=t.tool;return{args:{...m,tools:[{name:g,description:b,input_schema:y}],tool_choice:{type:"tool",name:g}},warnings:d}}default:{const g=h;throw new Error(`Unsupported type: ${g}`)}}}async doGenerate(t){const{args:e,warnings:n}=await this.getArgs(t),{responseHeaders:r,value:i}=await XD({url:`${this.config.baseURL}/messages`,headers:YD(this.config.headers(),t.headers),body:e,failedResponseHandler:ZD,successfulResponseHandler:Wce(Jce),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:s,...o}=e;let a="";for(const c of i.content)c.type==="text"&&(a+=c.text);let l;if(i.content.some(c=>c.type==="tool_use")){l=[];for(const c of i.content)c.type==="tool_use"&&l.push({toolCallType:"function",toolCallId:c.id,toolName:c.name,args:JSON.stringify(c.input)})}return{text:a,toolCalls:l,finishReason:JD(i.stop_reason),usage:{promptTokens:i.usage.input_tokens,completionTokens:i.usage.output_tokens},rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:r},warnings:n}}async doStream(t){const{args:e,warnings:n}=await this.getArgs(t),{responseHeaders:r,value:i}=await XD({url:`${this.config.baseURL}/messages`,headers:YD(this.config.headers(),t.headers),body:{...e,stream:!0},failedResponseHandler:ZD,successfulResponseHandler:Vce(Qce),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:s,...o}=e;let a="other";const l={promptTokens:Number.NaN,completionTokens:Number.NaN},c={};return{stream:i.pipeThrough(new TransformStream({transform(u,h){if(!u.success){h.enqueue({type:"error",error:u.error});return}const d=u.value;switch(d.type){case"ping":return;case"content_block_start":{const f=d.content_block.type;switch(f){case"text":return;case"tool_use":{c[d.index]={toolCallId:d.content_block.id,toolName:d.content_block.name,jsonText:""};return}default:{const m=f;throw new Error(`Unsupported content block type: ${m}`)}}}case"content_block_stop":{if(c[d.index]!=null){const f=c[d.index];h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:f.toolCallId,toolName:f.toolName,args:f.jsonText}),delete c[d.index]}return}case"content_block_delta":{const f=d.delta.type;switch(f){case"text_delta":{h.enqueue({type:"text-delta",textDelta:d.delta.text});return}case"input_json_delta":{const m=c[d.index];h.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:m.toolCallId,toolName:m.toolName,argsTextDelta:d.delta.partial_json}),m.jsonText+=d.delta.partial_json;return}default:{const m=f;throw new Error(`Unsupported delta type: ${m}`)}}}case"message_start":{l.promptTokens=d.message.usage.input_tokens,l.completionTokens=d.message.usage.output_tokens;return}case"message_delta":{l.completionTokens=d.usage.output_tokens,a=JD(d.delta.stop_reason);return}case"message_stop":{h.enqueue({type:"finish",finishReason:a,usage:l});return}case"error":{h.enqueue({type:"error",error:d.error});return}default:{const f=d;throw new Error(`Unsupported chunk type: ${f}`)}}}})),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:r},warnings:n}}},Jce=Pt.object({type:Pt.literal("message"),content:Pt.array(Pt.discriminatedUnion("type",[Pt.object({type:Pt.literal("text"),text:Pt.string()}),Pt.object({type:Pt.literal("tool_use"),id:Pt.string(),name:Pt.string(),input:Pt.unknown()})])),stop_reason:Pt.string().optional().nullable(),usage:Pt.object({input_tokens:Pt.number(),output_tokens:Pt.number()})}),Qce=Pt.discriminatedUnion("type",[Pt.object({type:Pt.literal("message_start"),message:Pt.object({usage:Pt.object({input_tokens:Pt.number(),output_tokens:Pt.number()})})}),Pt.object({type:Pt.literal("content_block_start"),index:Pt.number(),content_block:Pt.discriminatedUnion("type",[Pt.object({type:Pt.literal("text"),text:Pt.string()}),Pt.object({type:Pt.literal("tool_use"),id:Pt.string(),name:Pt.string()})])}),Pt.object({type:Pt.literal("content_block_delta"),index:Pt.number(),delta:Pt.discriminatedUnion("type",[Pt.object({type:Pt.literal("input_json_delta"),partial_json:Pt.string()}),Pt.object({type:Pt.literal("text_delta"),text:Pt.string()})])}),Pt.object({type:Pt.literal("content_block_stop"),index:Pt.number()}),Pt.object({type:Pt.literal("error"),error:Pt.object({type:Pt.string(),message:Pt.string()})}),Pt.object({type:Pt.literal("message_delta"),delta:Pt.object({stop_reason:Pt.string().optional().nullable()}),usage:Pt.object({output_tokens:Pt.number()})}),Pt.object({type:Pt.literal("message_stop")}),Pt.object({type:Pt.literal("ping")})]);function eue(t){var e;const n=(e=t.tools)!=null&&e.length?t.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(o=>({name:o.name,description:o.description,input_schema:o.parameters})),i=t.toolChoice;if(i==null)return{tools:r,tool_choice:void 0};const s=i.type;switch(s){case"auto":return{tools:r,tool_choice:{type:"auto"}};case"required":return{tools:r,tool_choice:{type:"any"}};case"none":return{tools:void 0,tool_choice:void 0};case"tool":return{tools:r,tool_choice:{type:"tool",name:i.toolName}};default:{const o=s;throw new Error(`Unsupported tool choice type: ${o}`)}}}function mz(t={}){var e,n;const r=(n=qce((e=t.baseURL)!=null?e:t.baseUrl))!=null?n:"https://api.anthropic.com/v1",i=()=>({"anthropic-version":"2023-06-01","x-api-key":Oce({apiKey:t.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...t.headers}),s=(a,l={})=>new Zce(a,l,{provider:"anthropic.messages",baseURL:r,headers:i,fetch:t.fetch}),o=function(a,l){if(new.target)throw new Error("The Anthropic model function cannot be called with the new keyword.");return s(a,l)};return o.languageModel=s,o.chat=s,o.messages=s,o}mz();class tue extends YH{name="Anthropic";getApiKeyLink="https://console.anthropic.com/settings/keys";config={apiTokenKey:"ANTHROPIC_API_KEY"};staticModels=[{name:"claude-3-7-sonnet-20250219",label:"Claude 3.7 Sonnet",provider:"Anthropic",maxTokenAllowed:32768}];async getDynamicModels(e,n,r){const{apiKey:i}=this.getProviderBaseUrlAndKey({apiKeys:e,providerSettings:n,serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"OPENAI_API_KEY"});if(!i)throw`Missing Api Key configuration for ${this.name} provider`;const o=await(await fetch("https://api.anthropic.com/v1/models",{headers:{"x-api-key":`${i}`,"anthropic-version":"2023-06-01"}})).json(),a=this.staticModels.map(c=>c.name);return o.data.filter(c=>c.type==="model"&&!a.includes(c.id)).map(c=>({name:c.id,label:`${c.display_name}`,provider:this.name,maxTokenAllowed:32e3}))}getModelInstance=e=>{const{apiKeys:n,providerSettings:r,serverEnv:i,model:s}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:n,providerSettings:r,serverEnv:i,defaultBaseUrlKey:"",defaultApiTokenKey:"ANTHROPIC_API_KEY"});return mz({apiKey:o})(s)}}const nue=Object.freeze(Object.defineProperty({__proto__:null,AnthropicProvider:tue},Symbol.toStringTag,{value:"Module"})),ll=Ws("LLMManager");class Ed{static _instance;_providers=new Map;_modelList=[];_env={};constructor(e){this._registerProvidersFromDirectory(),this._env=e}static getInstance(e={}){return Ed._instance||(Ed._instance=new Ed(e)),Ed._instance}get env(){return this._env}async _registerProvidersFromDirectory(){try{for(const e of Object.values(nue))if(typeof e=="function"&&e.prototype instanceof YH){const n=new e;try{this.registerProvider(n)}catch(r){ll.warn("Failed To Register Provider: ",n.name,"error:",r.message)}}}catch(e){ll.error("Error registering providers:",e)}}registerProvider(e){if(this._providers.has(e.name)){ll.warn(`Provider ${e.name} is already registered. Skipping.`);return}ll.info("Registering Provider: ",e.name),this._providers.set(e.name,e),this._modelList=[...this._modelList,...e.staticModels]}getProvider(e){return this._providers.get(e)}getAllProviders(){return Array.from(this._providers.values())}getModelList(){return this._modelList}async updateModelList(e){const{apiKeys:n,providerSettings:r,serverEnv:i}=e;let s=Array.from(this._providers.values()).map(d=>d.name);r&&Object.keys(r).length>0&&(s=s.filter(d=>r[d].enabled));const o=await Promise.all(Array.from(this._providers.values()).filter(d=>s.includes(d.name)).filter(d=>!!d.getDynamicModels).map(async d=>{const f=d.getModelsFromCache(e);return f||await d.getDynamicModels(n,r?.[d.name],i).then(g=>(ll.info(`Caching ${g.length} dynamic models for ${d.name}`),d.storeDynamicModels(e,g),g)).catch(g=>(ll.error(`Error getting dynamic models ${d.name} :`,g),[]))})),a=Array.from(this._providers.values()).flatMap(d=>d.staticModels||[]),l=o.flat(),c=l.map(d=>`${d.name}-${d.provider}`),u=a.filter(d=>!c.includes(`${d.name}-${d.provider}`)),h=[...l,...u];return h.sort((d,f)=>d.name.localeCompare(f.name)),this._modelList=h,h}getStaticModelList(){return[...this._providers.values()].flatMap(e=>e.staticModels||[])}async getModelListFromProvider(e,n){const r=this._providers.get(e.name);if(!r)throw new Error(`Provider ${e.name} not found`);const i=r.staticModels||[];if(!r.getDynamicModels)return i;const{apiKeys:s,providerSettings:o,serverEnv:a}=n,l=r.getModelsFromCache({apiKeys:s,providerSettings:o,serverEnv:a});if(l)return ll.info(`Found ${l.length} cached models for ${r.name}`),[...l,...i];ll.info(`Getting dynamic models for ${r.name}`);const c=await r.getDynamicModels?.(s,o?.[r.name],a).then(f=>(ll.info(`Got ${f.length} dynamic models for ${r.name}`),r.storeDynamicModels(n,f),f)).catch(f=>(ll.error(`Error getting dynamic models ${r.name} :`,f),[])),u=c.map(f=>f.name),h=i.filter(f=>!u.includes(f.name)),d=[...c,...h];return d.sort((f,m)=>f.name.localeCompare(m.name)),d}getStaticModelListFromProvider(e){const n=this._providers.get(e.name);if(!n)throw new Error(`Provider ${e.name} not found`);return[...n.staticModels||[]]}getDefaultProvider(){const e=this._providers.values().next().value;if(!e)throw new Error("No providers registered");return e}}const rue={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},gz="project",Kc=`/home/${gz}`,iue=/^\[Model: (.*?)\]\n\n/,sue=/\[Provider: (.*?)\]\n\n/,oue="claude-3-7-sonnet-20250219",lC="cachedPrompt",bz=Ed.getInstance(rue),tL=bz.getAllProviders(),aue=bz.getDefaultProvider(),nL={};tL.forEach(t=>{nL[t.name]={baseUrlKey:t.config.baseUrlKey,apiTokenKey:t.config.apiTokenKey}});const M2=[{name:"bolt-astro-basic",label:"Astro Basic",description:"Lightweight Astro starter template for building fast static websites",githubRepo:"thecodacus/bolt-astro-basic-template",tags:["astro","blog","performance"],icon:"i-bolt:astro"},{name:"bolt-nextjs-shadcn",label:"Next.js with shadcn/ui",description:"Next.js starter fullstack template integrated with shadcn/ui components and styling system",githubRepo:"thecodacus/bolt-nextjs-shadcn-template",tags:["nextjs","react","typescript","shadcn","tailwind"],icon:"i-bolt:nextjs"},{name:"bolt-qwik-ts",label:"Qwik TypeScript",description:"Qwik framework starter with TypeScript for building resumable applications",githubRepo:"thecodacus/bolt-qwik-ts-template",tags:["qwik","typescript","performance","resumable"],icon:"i-bolt:qwik"},{name:"bolt-remix-ts",label:"Remix TypeScript",description:"Remix framework starter with TypeScript for full-stack web applications",githubRepo:"thecodacus/bolt-remix-ts-template",tags:["remix","typescript","fullstack","react"],icon:"i-bolt:remix"},{name:"bolt-slidev",label:"Slidev Presentation",description:"Slidev starter template for creating developer-friendly presentations using Markdown",githubRepo:"thecodacus/bolt-slidev-template",tags:["slidev","presentation","markdown"],icon:"i-bolt:slidev"},{name:"bolt-sveltekit",label:"SvelteKit",description:"SvelteKit starter template for building fast, efficient web applications",githubRepo:"bolt-sveltekit-template",tags:["svelte","sveltekit","typescript"],icon:"i-bolt:svelte"},{name:"vanilla-vite",label:"Vanilla + Vite",description:"Minimal Vite starter template for vanilla JavaScript projects",githubRepo:"thecodacus/vanilla-vite-template",tags:["vite","vanilla-js","minimal"],icon:"i-bolt:vite"},{name:"bolt-vite-react",label:"React + Vite + typescript",description:"React starter template powered by Vite for fast development experience",githubRepo:"thecodacus/bolt-vite-react-ts-template",tags:["react","vite","frontend"],icon:"i-bolt:react"},{name:"bolt-vite-ts",label:"Vite + TypeScript",description:"Vite starter template with TypeScript configuration for type-safe development",githubRepo:"thecodacus/bolt-vite-ts-template",tags:["vite","typescript","minimal"],icon:"i-bolt:typescript"},{name:"bolt-vue",label:"Vue.js",description:"Vue.js starter template with modern tooling and best practices",githubRepo:"thecodacus/bolt-vue-template",tags:["vue","typescript","frontend"],icon:"i-bolt:vue"},{name:"bolt-angular",label:"Angular Starter",description:"A modern Angular starter template with TypeScript support and best practices configuration",githubRepo:"thecodacus/bolt-angular-template",tags:["angular","typescript","frontend","spa"],icon:"i-bolt:angular"}];function lue(){return()=>{}}function cue(){return A.useSyncExternalStore(lue,()=>!0,()=>!1)}function Bu({children:t,fallback:e=null}){return cue()?A.createElement(A.Fragment,null,t()):A.createElement(A.Fragment,null,e)}const cC={free:10,starter:100,pro:300,default:10};function uue(t,e){const[n,r]=A.useState(0),[i,s]=A.useState(!1),[o,a]=A.useState(!1),[l,c]=A.useState(0);return A.useEffect(()=>{if(t&&e){if(e.role==="admin"){c(1/0);return}const m=e.plan?.toLowerCase()||"free";c(m in cC?cC[m]:cC.default)}else c(1)},[t,e]),A.useEffect(()=>{const m=new Date().getMonth()+"-"+new Date().getFullYear();if(localStorage.getItem("messageCountMonth")!==m){localStorage.setItem("messageCountMonth",m),localStorage.setItem("messageCount","0"),r(0);return}const b=localStorage.getItem("messageCount");b&&r(parseInt(b,10))},[t]),A.useEffect(()=>{t&&s(!1)},[t]),{messageCount:n,monthlyLimit:l,showLoginPrompt:i,showSubscriptionPlans:o,incrementMessageCount:()=>{if(t&&e?.role==="admin")return!0;const m=n+1;if(!t&&m>1)return s(!0),!1;if(t&&m>l)return a(!0),!1;r(m);const g=new Date().getMonth()+"-"+new Date().getFullYear();return localStorage.setItem("messageCountMonth",g),localStorage.setItem("messageCount",m.toString()),!0},resetMessageCount:()=>{r(0),localStorage.setItem("messageCount","0")},closeLoginPrompt:()=>{s(!1)},closeSubscriptionPlans:()=>{a(!1)},canSendMessage:t?e?.role==="admin"||n<l:n<1}}const uC={free:0,starter:4,pro:20,admin:1/0,default:0};function yz(t,e){const[n,r]=A.useState(0),[i,s]=A.useState(!1),[o,a]=A.useState(0);return A.useEffect(()=>{if(t&&e){if(e.role==="admin"){a(1/0);return}const h=e.plan?.toLowerCase()||"free";a(h in uC?uC[h]:uC.default)}else a(0)},[t,e]),A.useEffect(()=>{const h=new Date().getMonth()+"-"+new Date().getFullYear();if(localStorage.getItem("exportCountMonth")!==h){localStorage.setItem("exportCountMonth",h),localStorage.setItem("exportCount","0"),r(0);return}const f=localStorage.getItem("exportCount");f&&r(parseInt(f,10))},[t]),{exportCount:n,monthlyLimit:o,showSubscriptionPlans:i,incrementExportCount:()=>{if(t&&e?.role==="admin")return!0;if(t&&e?.plan?.toLowerCase()==="free")return s(!0),!1;const h=n+1;if(t&&h>o)return s(!0),!1;r(h);const d=new Date().getMonth()+"-"+new Date().getFullYear();return localStorage.setItem("exportCountMonth",d),localStorage.setItem("exportCount",h.toString()),!0},resetExportCount:()=>{r(0),localStorage.setItem("exportCount","0")},closeSubscriptionPlans:()=>{s(!1)},canExport:t?e?.role==="admin"||e?.plan?.toLowerCase()!=="free"&&n<o:!1}}const rL=({isOpen:t,onClose:e})=>t?p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-[#0d1117] rounded-lg p-8 w-full max-w-5xl relative overflow-auto max-h-[90vh]",children:[p.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-300 bg-transparent border-0 outline-none p-0",children:p.jsx("div",{className:"i-ph:x text-xl"})}),p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Acabou as mensagens?"}),p.jsx("p",{className:"text-xl text-gray-300",children:"Volte ms que vem ou assine um dos nossos planos para ter mais mensagens!"})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-[#0a0a0c] rounded-lg p-6 flex flex-col h-full",children:[p.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Starter"}),p.jsx("p",{className:"text-gray-400 mb-6",children:"Ideal para uso pessoal"}),p.jsxs("div",{className:"text-4xl font-bold text-white mb-6",children:["R$149,99",p.jsx("span",{className:"text-lg font-normal text-gray-400",children:"/ms"})]}),p.jsx("a",{href:"https://buy.stripe.com/8wMdSa5kfaH83GU6ou",target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-[#1a2b4c] hover:bg-[#1f3461] text-white py-3 rounded-md mb-8 font-medium text-center",children:"Assinar Agora"}),p.jsxs("div",{className:"space-y-4 mt-auto",children:[p.jsxs("div",{className:"flex items-start",children:[p.jsx("div",{className:"text-blue-500 mr-3 mt-1",children:p.jsx("div",{className:"i-ph:check-circle-fill text-lg"})}),p.jsx("span",{className:"text-white",children:"100 mensagens por ms"})]}),p.jsxs("div",{className:"flex items-start",children:[p.jsx("div",{className:"text-blue-500 mr-3 mt-1",children:p.jsx("div",{className:"i-ph:check-circle-fill text-lg"})}),p.jsx("span",{className:"text-white",children:"4 exportaes de chat"})]}),p.jsxs("div",{className:"flex items-start",children:[p.jsx("div",{className:"text-blue-500 mr-3 mt-1",children:p.jsx("div",{className:"i-ph:check-circle-fill text-lg"})}),p.jsx("span",{className:"text-white",children:"Acesso a todos os modelos"})]}),p.jsxs("div",{className:"flex items-start",children:[p.jsx("div",{className:"text-blue-500 mr-3 mt-1",children:p.jsx("div",{className:"i-ph:check-circle-fill text-lg"})}),p.jsx("span",{className:"text-white",children:"Suporte por email"})]})]})]}),p.jsxs("div",{className:"bg-[#0a0a0c] rounded-lg p-6 flex flex-col h-full relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 right-0",children:p.jsx("div",{className:"bg-blue-600 text-white px-4 py-1 font-medium",children:"Popular"})}),p.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Pro"}),p.jsx("p",{className:"text-gray-400 mb-6",children:"Para profissionais e equipes"}),p.jsxs("div",{className:"text-4xl font-bold text-white mb-6",children:["R$349,99",p.jsx("span",{className:"text-lg font-normal text-gray-400",children:"/ms"})]}),p.jsx("a",{href:"https://buy.stripe.com/3cs6pIh2XbLcfpCbIP",target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-md mb-8 font-medium text-center",children:"Assinar Agora"}),p.jsxs("div",{className:"space-y-4 mt-auto",children:[p.jsxs("div",{className:"flex items-start",children:[p.jsx("div",{className:"text-blue-500 mr-3 mt-1",children:p.jsx("div",{className:"i-ph:check-circle-fill text-lg"})}),p.jsx("span",{className:"text-white",children:"300 mensagens por ms"})]}),p.jsxs("div",{className:"flex items-start",children:[p.jsx("div",{className:"text-blue-500 mr-3 mt-1",children:p.jsx("div",{className:"i-ph:check-circle-fill text-lg"})}),p.jsx("span",{className:"text-white",children:"20 exportaes de chat"})]}),p.jsxs("div",{className:"flex items-start",children:[p.jsx("div",{className:"text-blue-500 mr-3 mt-1",children:p.jsx("div",{className:"i-ph:check-circle-fill text-lg"})}),p.jsx("span",{className:"text-white",children:"Acesso prioritrio a novos recursos"})]}),p.jsxs("div",{className:"flex items-start",children:[p.jsx("div",{className:"text-blue-500 mr-3 mt-1",children:p.jsx("div",{className:"i-ph:check-circle-fill text-lg"})}),p.jsx("span",{className:"text-white",children:"Acesso a todos os modelos"})]}),p.jsxs("div",{className:"flex items-start",children:[p.jsx("div",{className:"text-blue-500 mr-3 mt-1",children:p.jsx("div",{className:"i-ph:check-circle-fill text-lg"})}),p.jsx("span",{className:"text-white",children:"Suporte prioritrio"})]}),p.jsxs("div",{className:"flex items-start",children:[p.jsx("div",{className:"text-blue-500 mr-3 mt-1",children:p.jsx("div",{className:"i-ph:check-circle-fill text-lg"})}),p.jsx("span",{className:"text-white",children:"Recursos avanados de personalizao"})]})]})]})]})]})}):null,iL=A.createContext({});function G1(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const DE=A.createContext(null),sL=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class hue extends A.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function due({children:t,isPresent:e}){const n=A.useId(),r=A.useRef(null),i=A.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=A.useContext(sL);return A.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),p.jsx(hue,{isPresent:e,childRef:r,sizeRef:i,children:A.cloneElement(t,{ref:r})})}const fue=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=G1(pue),l=A.useId(),c=A.useCallback(h=>{a.set(h,!0);for(const d of a.values())if(!d)return;r&&r()},[a,r]),u=A.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c,register:h=>(a.set(h,!1),()=>a.delete(h))}),s?[Math.random(),c]:[n,c]);return A.useMemo(()=>{a.forEach((h,d)=>a.set(d,!1))},[n]),A.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=p.jsx(due,{isPresent:n,children:t})),p.jsx(DE.Provider,{value:u,children:t})};function pue(){return new Map}function vz(t=!0){const e=A.useContext(DE);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=A.useId();A.useEffect(()=>{t&&i(s)},[t]);const o=A.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const s_=t=>t.key||"";function QD(t){const e=[];return A.Children.forEach(t,n=>{A.isValidElement(n)&&e.push(n)}),e}const oL=typeof window<"u",xz=oL?A.useLayoutEffect:A.useEffect,Ql=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=vz(o),c=A.useMemo(()=>QD(t),[t]),u=o&&!a?[]:c.map(s_),h=A.useRef(!0),d=A.useRef(c),f=G1(()=>new Map),[m,g]=A.useState(c),[b,y]=A.useState(c);xz(()=>{h.current=!1,d.current=c;for(let w=0;w<b.length;w++){const S=s_(b[w]);u.includes(S)?f.delete(S):f.get(S)!==!0&&f.set(S,!1)}},[b,u.length,u.join("-")]);const v=[];if(c!==m){let w=[...c];for(let S=0;S<b.length;S++){const E=b[S],k=s_(E);u.includes(k)||(w.splice(S,0,E),v.push(E))}s==="wait"&&v.length&&(w=v),y(QD(w)),g(c);return}const{forceRender:x}=A.useContext(iL);return p.jsx(p.Fragment,{children:b.map(w=>{const S=s_(w),E=o&&!a?!1:c===b||u.includes(S),k=()=>{if(f.has(S))f.set(S,!0);else return;let _=!0;f.forEach(L=>{L||(_=!1)}),_&&(x?.(),y(d.current),o&&l?.(),r&&r())};return p.jsx(fue,{isPresent:E,initial:!h.current||n?void 0:!1,custom:E?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:E?void 0:k,children:w},S)})})},vo=t=>t;let _z=vo;function aL(t){let e;return()=>(e===void 0&&(e=t()),e)}const cf=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},zl=t=>t*1e3,Vl=t=>t/1e3,mue={useManualTiming:!1};function gue(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,u=!1,h=!1)=>{const f=h&&r?e:n;return u&&s.add(c),f.has(c)||f.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const o_=["read","resolveKeyframes","update","preRender","render","postRender"],bue=40;function wz(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=o_.reduce((y,v)=>(y[v]=gue(s),y),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:h,postRender:d}=o,f=()=>{const y=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(y-i.timestamp,bue),1),i.timestamp=y,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),h.process(i),d.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(f))},m=()=>{n=!0,r=!0,i.isProcessing||t(f)};return{schedule:o_.reduce((y,v)=>{const x=o[v];return y[v]=(w,S=!1,E=!1)=>(n||m(),x.schedule(w,S,E)),y},{}),cancel:y=>{for(let v=0;v<o_.length;v++)o[o_[v]].cancel(y)},state:i,steps:o}}const{schedule:fr,cancel:ph,state:Li,steps:hC}=wz(typeof requestAnimationFrame<"u"?requestAnimationFrame:vo,!0),Sz=A.createContext({strict:!1}),e6={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Km={};for(const t in e6)Km[t]={isEnabled:e=>e6[t].some(n=>!!e[n])};function yue(t){for(const e in t)Km[e]={...Km[e],...t[e]}}const vue=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function j2(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||vue.has(t)}let Ez=t=>!j2(t);function xue(t){t&&(Ez=e=>e.startsWith("on")?!j2(e):t(e))}try{xue(require("@emotion/is-prop-valid").default)}catch{}function _ue(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(Ez(i)||n===!0&&j2(i)||!e&&!j2(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function wue(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const ME=A.createContext({});function q1(t){return typeof t=="string"||Array.isArray(t)}function jE(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const lL=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],cL=["initial",...lL];function FE(t){return jE(t.animate)||cL.some(e=>q1(t[e]))}function kz(t){return!!(FE(t)||t.variants)}function Sue(t,e){if(FE(t)){const{initial:n,animate:r}=t;return{initial:n===!1||q1(n)?n:void 0,animate:q1(r)?r:void 0}}return t.inherit!==!1?e:{}}function Eue(t){const{initial:e,animate:n}=Sue(t,A.useContext(ME));return A.useMemo(()=>({initial:e,animate:n}),[t6(e),t6(n)])}function t6(t){return Array.isArray(t)?t.join(" "):t}const kue=Symbol.for("motionComponentSymbol");function Qp(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Cue(t,e,n){return A.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Qp(n)&&(n.current=r))},[e])}const uL=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Tue="framerAppearId",Cz="data-"+uL(Tue),{schedule:hL}=wz(queueMicrotask,!1),Tz=A.createContext({});function Aue(t,e,n,r,i){var s,o;const{visualElement:a}=A.useContext(ME),l=A.useContext(Sz),c=A.useContext(DE),u=A.useContext(sL).reducedMotion,h=A.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const d=h.current,f=A.useContext(Tz);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&Pue(h.current,n,i,f);const m=A.useRef(!1);A.useInsertionEffect(()=>{d&&m.current&&d.update(n,c)});const g=n[Cz],b=A.useRef(!!g&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,g))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,g)));return xz(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),hL.render(d.render),b.current&&d.animationState&&d.animationState.animateChanges())}),A.useEffect(()=>{d&&(!b.current&&d.animationState&&d.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,g)}),b.current=!1))}),d}function Pue(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Az(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Qp(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function Az(t){if(t)return t.options.allowProjection!==!1?t.projection:Az(t.parent)}function Nue({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&yue(t);function a(c,u){let h;const d={...A.useContext(sL),...c,layoutId:Lue(c)},{isStatic:f}=d,m=Eue(c),g=r(c,f);if(!f&&oL){Rue();const b=Iue(d);h=b.MeasureLayout,m.visualElement=Aue(i,g,d,e,b.ProjectionNode)}return p.jsxs(ME.Provider,{value:m,children:[h&&m.visualElement?p.jsx(h,{visualElement:m.visualElement,...d}):null,n(i,c,Cue(g,m.visualElement,u),g,f,m.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=A.forwardRef(a);return l[kue]=i,l}function Lue({layoutId:t}){const e=A.useContext(iL).id;return e&&t!==void 0?e+"-"+t:t}function Rue(t,e){A.useContext(Sz).strict}function Iue(t){const{drag:e,layout:n}=Km;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Oue=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function dL(t){return typeof t!="string"||t.includes("-")?!1:!!(Oue.indexOf(t)>-1||/[A-Z]/u.test(t))}function n6(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function fL(t,e,n,r){if(typeof e=="function"){const[i,s]=n6(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=n6(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const k3=t=>Array.isArray(t),Due=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Mue=t=>k3(t)?t[t.length-1]||0:t,xi=t=>!!(t&&t.getVelocity);function Uw(t){const e=xi(t)?t.get():t;return Due(e)?e.toValue():e}function jue({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:Fue(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const Pz=t=>(e,n)=>{const r=A.useContext(ME),i=A.useContext(DE),s=()=>jue(t,e,r,i);return n?s():G1(s)};function Fue(t,e,n,r){const i={},s=r(t,{});for(const d in s)i[d]=Uw(s[d]);let{initial:o,animate:a}=t;const l=FE(t),c=kz(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!jE(h)){const d=Array.isArray(h)?h:[h];for(let f=0;f<d.length;f++){const m=fL(t,d[f]);if(m){const{transitionEnd:g,transition:b,...y}=m;for(const v in y){let x=y[v];if(Array.isArray(x)){const w=u?x.length-1:0;x=x[w]}x!==null&&(i[v]=x)}for(const v in g)i[v]=g[v]}}}return i}const Ig=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Lf=new Set(Ig),Nz=t=>e=>typeof e=="string"&&e.startsWith(t),Lz=Nz("--"),Bue=Nz("var(--"),pL=t=>Bue(t)?Uue.test(t.split("/*")[0].trim()):!1,Uue=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Rz=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Yc=(t,e,n)=>n>e?e:n<t?t:n,Og={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},K1={...Og,transform:t=>Yc(0,1,t)},a_={...Og,default:1},iv=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Nu=iv("deg"),Wl=iv("%"),Wt=iv("px"),$ue=iv("vh"),Hue=iv("vw"),r6={...Wl,parse:t=>Wl.parse(t)/100,transform:t=>Wl.transform(t*100)},zue={borderWidth:Wt,borderTopWidth:Wt,borderRightWidth:Wt,borderBottomWidth:Wt,borderLeftWidth:Wt,borderRadius:Wt,radius:Wt,borderTopLeftRadius:Wt,borderTopRightRadius:Wt,borderBottomRightRadius:Wt,borderBottomLeftRadius:Wt,width:Wt,maxWidth:Wt,height:Wt,maxHeight:Wt,top:Wt,right:Wt,bottom:Wt,left:Wt,padding:Wt,paddingTop:Wt,paddingRight:Wt,paddingBottom:Wt,paddingLeft:Wt,margin:Wt,marginTop:Wt,marginRight:Wt,marginBottom:Wt,marginLeft:Wt,backgroundPositionX:Wt,backgroundPositionY:Wt},Vue={rotate:Nu,rotateX:Nu,rotateY:Nu,rotateZ:Nu,scale:a_,scaleX:a_,scaleY:a_,scaleZ:a_,skew:Nu,skewX:Nu,skewY:Nu,distance:Wt,translateX:Wt,translateY:Wt,translateZ:Wt,x:Wt,y:Wt,z:Wt,perspective:Wt,transformPerspective:Wt,opacity:K1,originX:r6,originY:r6,originZ:Wt},i6={...Og,transform:Math.round},mL={...zue,...Vue,zIndex:i6,size:Wt,fillOpacity:K1,strokeOpacity:K1,numOctaves:i6},Wue={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Gue=Ig.length;function que(t,e,n){let r="",i=!0;for(let s=0;s<Gue;s++){const o=Ig[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=Rz(a,mL[o]);if(!l){i=!1;const u=Wue[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function gL(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Lf.has(l)){o=!0;continue}else if(Lz(l)){i[l]=c;continue}else{const u=Rz(c,mL[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=que(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const Kue={offset:"stroke-dashoffset",array:"stroke-dasharray"},Yue={offset:"strokeDashoffset",array:"strokeDasharray"};function Xue(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Kue:Yue;t[s.offset]=Wt.transform(-r);const o=Wt.transform(e),a=Wt.transform(n);t[s.array]=`${o} ${a}`}function s6(t,e,n){return typeof t=="string"?t:Wt.transform(e+n*t)}function Zue(t,e,n){const r=s6(e,t.x,t.width),i=s6(n,t.y,t.height);return`${r} ${i}`}function bL(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,h){if(gL(t,c,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:f,dimensions:m}=t;d.transform&&(m&&(f.transform=d.transform),delete d.transform),m&&(i!==void 0||s!==void 0||f.transform)&&(f.transformOrigin=Zue(m,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),o!==void 0&&Xue(d,o,a,l,!1)}const yL=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Iz=()=>({...yL(),attrs:{}}),vL=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Oz(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const Dz=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Mz(t,e,n,r){Oz(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Dz.has(i)?i:uL(i),e.attrs[i])}const F2={};function Jue(t){Object.assign(F2,t)}function jz(t,{layout:e,layoutId:n}){return Lf.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!F2[t]||t==="opacity")}function xL(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(xi(i[o])||e.style&&xi(e.style[o])||jz(o,t)||((r=n?.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function Fz(t,e,n){const r=xL(t,e,n);for(const i in t)if(xi(t[i])||xi(e[i])){const s=Ig.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function Que(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const o6=["x","y","width","height","cx","cy","r"],ehe={useVisualState:Pz({scrapeMotionValuesFromProps:Fz,createRenderState:Iz,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(Lf.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<o6.length;a++){const l=o6[a];t[l]!==e[l]&&(o=!0)}o&&fr.read(()=>{Que(n,r),fr.render(()=>{bL(r,i,vL(n.tagName),t.transformTemplate),Mz(n,r)})})}})},the={useVisualState:Pz({scrapeMotionValuesFromProps:xL,createRenderState:yL})};function Bz(t,e,n){for(const r in e)!xi(e[r])&&!jz(r,n)&&(t[r]=e[r])}function nhe({transformTemplate:t},e){return A.useMemo(()=>{const n=yL();return gL(n,e,t),Object.assign({},n.vars,n.style)},[e])}function rhe(t,e){const n=t.style||{},r={};return Bz(r,n,t),Object.assign(r,nhe(t,e)),r}function ihe(t,e){const n={},r=rhe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function she(t,e,n,r){const i=A.useMemo(()=>{const s=Iz();return bL(s,e,vL(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};Bz(s,t.style,t),i.style={...s,...i.style}}return i}function ohe(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(dL(n)?she:ihe)(r,s,o,n),c=_ue(r,typeof n=="string",t),u=n!==A.Fragment?{...c,...l,ref:i}:{},{children:h}=r,d=A.useMemo(()=>xi(h)?h.get():h,[h]);return A.createElement(n,{...u,children:d})}}function ahe(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...dL(r)?ehe:the,preloadedFeatures:t,useRender:ohe(i),createVisualElement:e,Component:r};return Nue(o)}}function Uz(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function BE(t,e,n){const r=t.getProps();return fL(r,e,n!==void 0?n:r.custom,t)}const lhe=aL(()=>window.ScrollTimeline!==void 0);class che{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(lhe()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class $z extends che{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function _L(t,e){return t?t[e]||t.default||t:void 0}const B2=2e4;function wL(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<B2;)e+=n,r=t.next(e);return e>=B2?1/0:e}function uhe(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(wL(r),B2);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:Vl(i)}}function UE(t){return typeof t=="function"}function a6(t,e){t.timeline=e,t.onfinish=null}const SL=t=>Array.isArray(t)&&typeof t[0]=="number",hhe={linearEasing:void 0};function dhe(t,e){const n=aL(t);return()=>{var r;return(r=hhe[e])!==null&&r!==void 0?r:n()}}const U2=dhe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Hz=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(cf(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function zz(t){return!!(typeof t=="function"&&U2()||!t||typeof t=="string"&&(t in C3||U2())||SL(t)||Array.isArray(t)&&t.every(zz))}const Sb=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,C3={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Sb([0,.65,.55,1]),circOut:Sb([.55,0,1,.45]),backIn:Sb([.31,.01,.66,-.59]),backOut:Sb([.33,1.53,.69,.99])};function Vz(t,e){if(t)return typeof t=="function"&&U2()?Hz(t,e):SL(t)?Sb(t):Array.isArray(t)?t.map(n=>Vz(n,e)||C3.easeOut):C3[t]}const Ta={x:!1,y:!1};function Wz(){return Ta.x||Ta.y}function Gz(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;e&&(i=e.current);const s=(r=n?.[t])!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function qz(t,e){const n=Gz(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function l6(t){return e=>{e.pointerType==="touch"||Wz()||t(e)}}function fhe(t,e,n={}){const[r,i,s]=qz(t,n),o=l6(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=l6(h=>{c(h),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const Kz=(t,e)=>e?t===e?!0:Kz(t,e.parentElement):!1,EL=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,phe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function mhe(t){return phe.has(t.tagName)||t.tabIndex!==-1}const Eb=new WeakSet;function c6(t){return e=>{e.key==="Enter"&&t(e)}}function dC(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ghe=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=c6(()=>{if(Eb.has(n))return;dC(n,"down");const i=c6(()=>{dC(n,"up")}),s=()=>dC(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function u6(t){return EL(t)&&!Wz()}function bhe(t,e,n={}){const[r,i,s]=qz(t,n),o=a=>{const l=a.currentTarget;if(!u6(a)||Eb.has(l))return;Eb.add(l);const c=e(a),u=(f,m)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",d),!(!u6(f)||!Eb.has(l))&&(Eb.delete(l),typeof c=="function"&&c(f,{success:m}))},h=f=>{u(f,n.useGlobalTarget||Kz(l,f.target))},d=f=>{u(f,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",d,i)};return r.forEach(a=>{!mhe(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>ghe(c,i),i)}),s}function yhe(t){return t==="x"||t==="y"?Ta[t]?null:(Ta[t]=!0,()=>{Ta[t]=!1}):Ta.x||Ta.y?null:(Ta.x=Ta.y=!0,()=>{Ta.x=Ta.y=!1})}const Yz=new Set(["width","height","top","left","right","bottom",...Ig]);let $w;function vhe(){$w=void 0}const Gl={now:()=>($w===void 0&&Gl.set(Li.isProcessing||mue.useManualTiming?Li.timestamp:performance.now()),$w),set:t=>{$w=t,queueMicrotask(vhe)}};function kL(t,e){t.indexOf(e)===-1&&t.push(e)}function $E(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class CL{constructor(){this.subscriptions=[]}add(e){return kL(this.subscriptions,e),()=>$E(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Xz(t,e){return e?t*(1e3/e):0}const h6=30,xhe=t=>!isNaN(parseFloat(t));class _he{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Gl.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Gl.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=xhe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new CL);const r=this.events[e].add(n);return e==="change"?()=>{r(),fr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Gl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>h6)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,h6);return Xz(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Y1(t,e){return new _he(t,e)}function whe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Y1(n))}function She(t,e){const n=BE(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=Mue(s[o]);whe(t,o,a)}}function Ehe(t){return!!(xi(t)&&t.add)}function T3(t,e){const n=t.getValue("willChange");if(Ehe(n))return n.add(e)}function Zz(t){return t.props[Cz]}const Jz=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,khe=1e-7,Che=12;function The(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=Jz(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>khe&&++a<Che);return o}function Rf(t,e,n,r){if(t===e&&n===r)return vo;const i=s=>The(s,0,1,t,n);return s=>s===0||s===1?s:Jz(i(s),e,r)}const Qz=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,eV=t=>e=>1-t(1-e),tV=Rf(.33,1.53,.69,.99),TL=eV(tV),nV=Qz(TL),rV=t=>(t*=2)<1?.5*TL(t):.5*(2-Math.pow(2,-10*(t-1))),AL=t=>1-Math.sin(Math.acos(t)),iV=eV(AL),sV=Qz(AL),oV=t=>/^0[^.\s]+$/u.test(t);function Ahe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||oV(t):!0}const qb=t=>Math.round(t*1e5)/1e5,PL=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Phe(t){return t==null}const Nhe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,NL=(t,e)=>n=>!!(typeof n=="string"&&Nhe.test(n)&&n.startsWith(t)||e&&!Phe(n)&&Object.prototype.hasOwnProperty.call(n,e)),aV=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(PL);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Lhe=t=>Yc(0,255,t),fC={...Og,transform:t=>Math.round(Lhe(t))},kd={test:NL("rgb","red"),parse:aV("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+fC.transform(t)+", "+fC.transform(e)+", "+fC.transform(n)+", "+qb(K1.transform(r))+")"};function Rhe(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const A3={test:NL("#"),parse:Rhe,transform:kd.transform},em={test:NL("hsl","hue"),parse:aV("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Wl.transform(qb(e))+", "+Wl.transform(qb(n))+", "+qb(K1.transform(r))+")"},Ki={test:t=>kd.test(t)||A3.test(t)||em.test(t),parse:t=>kd.test(t)?kd.parse(t):em.test(t)?em.parse(t):A3.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?kd.transform(t):em.transform(t)},Ihe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Ohe(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(PL))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Ihe))===null||n===void 0?void 0:n.length)||0)>0}const lV="number",cV="color",Dhe="var",Mhe="var(",d6="${}",jhe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function X1(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(jhe,l=>(Ki.test(l)?(r.color.push(s),i.push(cV),n.push(Ki.parse(l))):l.startsWith(Mhe)?(r.var.push(s),i.push(Dhe),n.push(l)):(r.number.push(s),i.push(lV),n.push(parseFloat(l))),++s,d6)).split(d6);return{values:n,split:a,indexes:r,types:i}}function uV(t){return X1(t).values}function hV(t){const{split:e,types:n}=X1(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===lV?s+=qb(i[o]):a===cV?s+=Ki.transform(i[o]):s+=i[o]}return s}}const Fhe=t=>typeof t=="number"?0:t;function Bhe(t){const e=uV(t);return hV(t)(e.map(Fhe))}const mh={test:Ohe,parse:uV,createTransformer:hV,getAnimatableNone:Bhe},Uhe=new Set(["brightness","contrast","saturate","opacity"]);function $he(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(PL)||[];if(!r)return t;const i=n.replace(r,"");let s=Uhe.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const Hhe=/\b([a-z-]*)\(.*?\)/gu,P3={...mh,getAnimatableNone:t=>{const e=t.match(Hhe);return e?e.map($he).join(" "):t}},zhe={...mL,color:Ki,backgroundColor:Ki,outlineColor:Ki,fill:Ki,stroke:Ki,borderColor:Ki,borderTopColor:Ki,borderRightColor:Ki,borderBottomColor:Ki,borderLeftColor:Ki,filter:P3,WebkitFilter:P3},LL=t=>zhe[t];function dV(t,e){let n=LL(t);return n!==P3&&(n=mh),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Vhe=new Set(["auto","none","0"]);function Whe(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!Vhe.has(s)&&X1(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=dV(n,i)}const f6=t=>t===Og||t===Wt,p6=(t,e)=>parseFloat(t.split(", ")[e]),m6=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return p6(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?p6(s[1],t):0}},Ghe=new Set(["x","y","z"]),qhe=Ig.filter(t=>!Ghe.has(t));function Khe(t){const e=[];return qhe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Ym={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:m6(4,13),y:m6(5,14)};Ym.translateX=Ym.x;Ym.translateY=Ym.y;const Vd=new Set;let N3=!1,L3=!1;function fV(){if(L3){const t=Array.from(Vd).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Khe(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}L3=!1,N3=!1,Vd.forEach(t=>t.complete()),Vd.clear()}function pV(){Vd.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(L3=!0)})}function Yhe(){pV(),fV()}class RL{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Vd.add(this),N3||(N3=!0,fr.read(pV),fr.resolveKeyframes(fV))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i?.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Vd.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Vd.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const mV=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Xhe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Zhe(t){const e=Xhe.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function gV(t,e,n=1){const[r,i]=Zhe(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return mV(o)?parseFloat(o):o}return pL(i)?gV(i,e,n+1):i}const bV=t=>e=>e.test(t),Jhe={test:t=>t==="auto",parse:t=>t},yV=[Og,Wt,Wl,Nu,Hue,$ue,Jhe],g6=t=>yV.find(bV(t));class vV extends RL{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),pL(c))){const u=gV(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Yz.has(r)||e.length!==2)return;const[i,s]=e,o=g6(i),a=g6(s);if(o!==a)if(f6(o)&&f6(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)Ahe(e[i])&&r.push(i);r.length&&Whe(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ym[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=Ym[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const b6=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(mh.test(t)||t==="0")&&!t.startsWith("url("));function Qhe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function ede(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=b6(i,e),a=b6(s,e);return!o||!a?!1:Qhe(t)||(n==="spring"||UE(n))&&r}const tde=t=>t!==null;function HE(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(tde),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const nde=40;class xV{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Gl.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>nde?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Yhe(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Gl.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!ede(e,r,i,s))if(o)this.options.duration=0;else{l&&l(HE(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const br=(t,e,n)=>t+(e-t)*n;function pC(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function rde({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=pC(l,a,t+1/3),s=pC(l,a,t),o=pC(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function $2(t,e){return n=>n>0?e:t}const mC=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},ide=[A3,kd,em],sde=t=>ide.find(e=>e.test(t));function y6(t){const e=sde(t);if(!e)return!1;let n=e.parse(t);return e===em&&(n=rde(n)),n}const v6=(t,e)=>{const n=y6(t),r=y6(e);if(!n||!r)return $2(t,e);const i={...n};return s=>(i.red=mC(n.red,r.red,s),i.green=mC(n.green,r.green,s),i.blue=mC(n.blue,r.blue,s),i.alpha=br(n.alpha,r.alpha,s),kd.transform(i))},ode=(t,e)=>n=>e(t(n)),sv=(...t)=>t.reduce(ode),R3=new Set(["none","hidden"]);function ade(t,e){return R3.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function lde(t,e){return n=>br(t,e,n)}function IL(t){return typeof t=="number"?lde:typeof t=="string"?pL(t)?$2:Ki.test(t)?v6:hde:Array.isArray(t)?_V:typeof t=="object"?Ki.test(t)?v6:cde:$2}function _V(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>IL(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function cde(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=IL(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function ude(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const hde=(t,e)=>{const n=mh.createTransformer(e),r=X1(t),i=X1(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?R3.has(t)&&!i.values.length||R3.has(e)&&!r.values.length?ade(t,e):sv(_V(ude(r,i),i.values),n):$2(t,e)};function wV(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?br(t,e,n):IL(t)(t,e)}const dde=5;function SV(t,e,n){const r=Math.max(e-dde,0);return Xz(n-t(r),e-r)}const Ar={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},x6=.001;function fde({duration:t=Ar.duration,bounce:e=Ar.bounce,velocity:n=Ar.velocity,mass:r=Ar.mass}){let i,s,o=1-e;o=Yc(Ar.minDamping,Ar.maxDamping,o),t=Yc(Ar.minDuration,Ar.maxDuration,Vl(t)),o<1?(i=c=>{const u=c*o,h=u*t,d=u-n,f=I3(c,o),m=Math.exp(-h);return x6-d/f*m},s=c=>{const h=c*o*t,d=h*n+n,f=Math.pow(o,2)*Math.pow(c,2)*t,m=Math.exp(-h),g=I3(Math.pow(c,2),o);return(-i(c)+x6>0?-1:1)*((d-f)*m)/g}):(i=c=>{const u=Math.exp(-c*t),h=(c-n)*t+1;return-.001+u*h},s=c=>{const u=Math.exp(-c*t),h=(n-c)*(t*t);return u*h});const a=5/t,l=mde(i,s,a);if(t=zl(t),isNaN(l))return{stiffness:Ar.stiffness,damping:Ar.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const pde=12;function mde(t,e,n){let r=n;for(let i=1;i<pde;i++)r=r-t(r)/e(r);return r}function I3(t,e){return t*Math.sqrt(1-e*e)}const gde=["duration","bounce"],bde=["stiffness","damping","mass"];function _6(t,e){return e.some(n=>t[n]!==void 0)}function yde(t){let e={velocity:Ar.velocity,stiffness:Ar.stiffness,damping:Ar.damping,mass:Ar.mass,isResolvedFromDuration:!1,...t};if(!_6(t,bde)&&_6(t,gde))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Yc(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Ar.mass,stiffness:i,damping:s}}else{const n=fde(t);e={...e,...n,mass:Ar.mass},e.isResolvedFromDuration=!0}return e}function OL(t=Ar.visualDuration,e=Ar.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:h,velocity:d,isResolvedFromDuration:f}=yde({...n,velocity:-Vl(n.velocity||0)}),m=d||0,g=c/(2*Math.sqrt(l*u)),b=o-s,y=Vl(Math.sqrt(l/u)),v=Math.abs(b)<5;r||(r=v?Ar.restSpeed.granular:Ar.restSpeed.default),i||(i=v?Ar.restDelta.granular:Ar.restDelta.default);let x;if(g<1){const S=I3(y,g);x=E=>{const k=Math.exp(-g*y*E);return o-k*((m+g*y*b)/S*Math.sin(S*E)+b*Math.cos(S*E))}}else if(g===1)x=S=>o-Math.exp(-y*S)*(b+(m+y*b)*S);else{const S=y*Math.sqrt(g*g-1);x=E=>{const k=Math.exp(-g*y*E),_=Math.min(S*E,300);return o-k*((m+g*y*b)*Math.sinh(_)+S*b*Math.cosh(_))/S}}const w={calculatedDuration:f&&h||null,next:S=>{const E=x(S);if(f)a.done=S>=h;else{let k=0;g<1&&(k=S===0?zl(m):SV(x,S,E));const _=Math.abs(k)<=r,L=Math.abs(o-E)<=i;a.done=_&&L}return a.value=a.done?o:E,a},toString:()=>{const S=Math.min(wL(w),B2),E=Hz(k=>w.next(S*k).value,S,30);return S+"ms "+E}};return w}function w6({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=t[0],d={done:!1,value:h},f=_=>a!==void 0&&_<a||l!==void 0&&_>l,m=_=>a===void 0?l:l===void 0||Math.abs(a-_)<Math.abs(l-_)?a:l;let g=n*e;const b=h+g,y=o===void 0?b:o(b);y!==b&&(g=y-h);const v=_=>-g*Math.exp(-_/r),x=_=>y+v(_),w=_=>{const L=v(_),R=x(_);d.done=Math.abs(L)<=c,d.value=d.done?y:R};let S,E;const k=_=>{f(d.value)&&(S=_,E=OL({keyframes:[d.value,m(d.value)],velocity:SV(x,_,d.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return k(0),{calculatedDuration:null,next:_=>{let L=!1;return!E&&S===void 0&&(L=!0,w(_),k(_)),S!==void 0&&_>=S?E.next(_-S):(!L&&w(_),d)}}}const vde=Rf(.42,0,1,1),xde=Rf(0,0,.58,1),EV=Rf(.42,0,.58,1),kV=t=>Array.isArray(t)&&typeof t[0]!="number",_de={linear:vo,easeIn:vde,easeInOut:EV,easeOut:xde,circIn:AL,circInOut:sV,circOut:iV,backIn:TL,backInOut:nV,backOut:tV,anticipate:rV},S6=t=>{if(SL(t)){_z(t.length===4);const[e,n,r,i]=t;return Rf(e,n,r,i)}else if(typeof t=="string")return _de[t];return t};function wde(t,e,n){const r=[],i=n||wV,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||vo:e;a=sv(l,a)}r.push(a)}return r}function Sde(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(_z(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=wde(e,r,i),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const d=cf(t[h],t[h+1],u);return a[h](d)};return n?u=>c(Yc(t[0],t[s-1],u)):c}function CV(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=cf(0,e,r);t.push(br(n,1,i))}}function TV(t){const e=[0];return CV(e,t.length-1),e}function Ede(t,e){return t.map(n=>n*e)}function kde(t,e){return t.map(()=>e||EV).splice(0,t.length-1)}function H2({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=kV(r)?r.map(S6):S6(r),s={done:!1,value:e[0]},o=Ede(n&&n.length===e.length?n:TV(e),t),a=Sde(o,e,{ease:Array.isArray(i)?i:kde(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const Cde=t=>{const e=({timestamp:n})=>t(n);return{start:()=>fr.update(e,!0),stop:()=>ph(e),now:()=>Li.isProcessing?Li.timestamp:Gl.now()}},Tde={decay:w6,inertia:w6,tween:H2,keyframes:H2,spring:OL},Ade=t=>t/100;class DL extends xV{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=i?.KeyframeResolver||RL,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=UE(n)?n:Tde[n]||H2;let l,c;a!==H2&&typeof e[0]!="number"&&(l=sv(Ade,wV(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=wL(u));const{calculatedDuration:h}=u,d=h+i,f=d*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:d,totalDuration:f}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:_}=this.options;return{done:!0,value:_[_.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:h}=r;if(this.startTime===null)return s.next(0);const{delay:d,repeat:f,repeatType:m,repeatDelay:g,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const y=this.currentTime-d*(this.speed>=0?1:-1),v=this.speed>=0?y<0:y>u;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let x=this.currentTime,w=s;if(f){const _=Math.min(this.currentTime,u)/h;let L=Math.floor(_),R=_%1;!R&&_>=1&&(R=1),R===1&&L--,L=Math.min(L,f+1),!!(L%2)&&(m==="reverse"?(R=1-R,g&&(R-=g/h)):m==="mirror"&&(w=o)),x=Yc(0,1,R)*h}const S=v?{done:!1,value:l[0]}:w.next(x);a&&(S.value=a(S.value));let{done:E}=S;!v&&c!==null&&(E=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return k&&i!==void 0&&(S.value=HE(l,this.options,i)),b&&b(S.value),k&&this.finish(),S}get duration(){const{resolved:e}=this;return e?Vl(e.calculatedDuration):0}get time(){return Vl(this.currentTime)}set time(e){e=zl(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Vl(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Cde,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Pde=new Set(["opacity","clipPath","filter","transform"]);function Nde(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=Vz(a,i);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const Lde=aL(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),z2=10,Rde=2e4;function Ide(t){return UE(t.type)||t.type==="spring"||!zz(t.ease)}function Ode(t,e){const n=new DL({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<Rde;)r=n.sample(s),i.push(r.value),s+=z2;return{times:void 0,keyframes:i,duration:s-z2,ease:"linear"}}const AV={anticipate:rV,backInOut:nV,circInOut:sV};function Dde(t){return t in AV}class E6 extends xV{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new vV(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&U2()&&Dde(s)&&(s=AV[s]),Ide(this.options)){const{onComplete:h,onUpdate:d,motionValue:f,element:m,...g}=this.options,b=Ode(e,g);e=b.keyframes,e.length===1&&(e[1]=e[0]),r=b.duration,i=b.times,s=b.ease,o="keyframes"}const u=Nde(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(a6(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:h}=this.options;a.set(HE(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Vl(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Vl(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=zl(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return vo;const{animation:r}=n;a6(r,e)}return vo}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:h,element:d,...f}=this.options,m=new DL({...f,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),g=zl(this.time);c.setWithVelocity(m.sample(g-z2).value,m.sample(g).value,z2)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return Lde()&&r&&Pde.has(r)&&!l&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const Mde={type:"spring",stiffness:500,damping:25,restSpeed:10},jde=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Fde={type:"keyframes",duration:.8},Bde={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ude=(t,{keyframes:e})=>e.length>2?Fde:Lf.has(t)?t.startsWith("scale")?jde(e[1]):Mde:Bde;function $de({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const ML=(t,e,n,r={},i,s)=>o=>{const a=_L(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-zl(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:d=>{e.set(d),a.onUpdate&&a.onUpdate(d)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};$de(a)||(u={...u,...Ude(t,u)}),u.duration&&(u.duration=zl(u.duration)),u.repeatDelay&&(u.repeatDelay=zl(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),h&&!s&&e.get()!==void 0){const d=HE(u.keyframes,a);if(d!==void 0)return fr.update(()=>{u.onUpdate(d),u.onComplete()}),new $z([])}return!s&&E6.supports(u)?new E6(u):new DL(u)};function Hde({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function jL(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const d=t.getValue(h,(s=t.latestValues[h])!==null&&s!==void 0?s:null),f=l[h];if(f===void 0||u&&Hde(u,h))continue;const m={delay:n,..._L(o||{},h)};let g=!1;if(window.MotionHandoffAnimation){const y=Zz(t);if(y){const v=window.MotionHandoffAnimation(y,h,fr);v!==null&&(m.startTime=v,g=!0)}}T3(t,h),d.start(ML(h,d,f,t.shouldReduceMotion&&Yz.has(h)?{type:!1}:m,t,g));const b=d.animation;b&&c.push(b)}return a&&Promise.all(c).then(()=>{fr.update(()=>{a&&She(t,a)})}),c}function O3(t,e,n={}){var r;const i=BE(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(jL(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:d}=s;return zde(t,e,u+c,h,d,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function zde(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(Vde).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(O3(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function Vde(t,e){return t.sortNodePosition(e)}function Wde(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>O3(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=O3(t,e,n);else{const i=typeof e=="function"?BE(t,e,n.custom):e;r=Promise.all(jL(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const Gde=cL.length;function PV(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?PV(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Gde;n++){const r=cL[n],i=t.props[r];(q1(i)||i===!1)&&(e[r]=i)}return e}const qde=[...lL].reverse(),Kde=lL.length;function Yde(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Wde(t,n,r)))}function Xde(t){let e=Yde(t),n=k6(),r=!0;const i=l=>(c,u)=>{var h;const d=BE(t,u,l==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(d){const{transition:f,transitionEnd:m,...g}=d;c={...c,...g,...m}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=PV(t.parent)||{},h=[],d=new Set;let f={},m=1/0;for(let b=0;b<Kde;b++){const y=qde[b],v=n[y],x=c[y]!==void 0?c[y]:u[y],w=q1(x),S=y===l?v.isActive:null;S===!1&&(m=b);let E=x===u[y]&&x!==c[y]&&w;if(E&&r&&t.manuallyAnimateOnMount&&(E=!1),v.protectedKeys={...f},!v.isActive&&S===null||!x&&!v.prevProp||jE(x)||typeof x=="boolean")continue;const k=Zde(v.prevProp,x);let _=k||y===l&&v.isActive&&!E&&w||b>m&&w,L=!1;const R=Array.isArray(x)?x:[x];let C=R.reduce(i(y),{});S===!1&&(C={});const{prevResolvedValues:P={}}=v,O={...P,...C},N=X=>{_=!0,d.has(X)&&(L=!0,d.delete(X)),v.needsAnimating[X]=!0;const J=t.getValue(X);J&&(J.liveStyle=!1)};for(const X in O){const J=C[X],j=P[X];if(f.hasOwnProperty(X))continue;let F=!1;k3(J)&&k3(j)?F=!Uz(J,j):F=J!==j,F?J!=null?N(X):d.add(X):J!==void 0&&d.has(X)?N(X):v.protectedKeys[X]=!0}v.prevProp=x,v.prevResolvedValues=C,v.isActive&&(f={...f,...C}),r&&t.blockInitialAnimation&&(_=!1),_&&(!(E&&k)||L)&&h.push(...R.map(X=>({animation:X,options:{type:y}})))}if(d.size){const b={};d.forEach(y=>{const v=t.getBaseTarget(y),x=t.getValue(y);x&&(x.liveStyle=!0),b[y]=v??null}),h.push({animation:b})}let g=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(h):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(d=>{var f;return(f=d.animationState)===null||f===void 0?void 0:f.setActive(l,c)}),n[l].isActive=c;const h=o(l);for(const d in n)n[d].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=k6(),r=!0}}}function Zde(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Uz(e,t):!1}function Qh(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function k6(){return{animate:Qh(!0),whileInView:Qh(),whileHover:Qh(),whileTap:Qh(),whileDrag:Qh(),whileFocus:Qh(),exit:Qh()}}class Ih{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Jde extends Ih{constructor(e){super(e),e.animationState||(e.animationState=Xde(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();jE(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Qde=0;class efe extends Ih{constructor(){super(...arguments),this.id=Qde++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const tfe={animation:{Feature:Jde},exit:{Feature:efe}};function Z1(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ov(t){return{point:{x:t.pageX,y:t.pageY}}}const nfe=t=>e=>EL(e)&&t(e,ov(e));function Kb(t,e,n,r){return Z1(t,e,nfe(n),r)}const C6=(t,e)=>Math.abs(t-e);function rfe(t,e){const n=C6(t.x,e.x),r=C6(t.y,e.y);return Math.sqrt(n**2+r**2)}class NV{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=bC(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,f=rfe(h.offset,{x:0,y:0})>=3;if(!d&&!f)return;const{point:m}=h,{timestamp:g}=Li;this.history.push({...m,timestamp:g});const{onStart:b,onMove:y}=this.handlers;d||(b&&b(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,h)},this.handlePointerMove=(h,d)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=gC(d,this.transformPagePoint),fr.update(this.updatePoint,!0)},this.handlePointerUp=(h,d)=>{this.end();const{onEnd:f,onSessionEnd:m,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=bC(h.type==="pointercancel"?this.lastMoveEventInfo:gC(d,this.transformPagePoint),this.history);this.startEvent&&f&&f(h,b),m&&m(h,b)},!EL(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=ov(e),a=gC(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Li;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,bC(a,this.history)),this.removeListeners=sv(Kb(this.contextWindow,"pointermove",this.handlePointerMove),Kb(this.contextWindow,"pointerup",this.handlePointerUp),Kb(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ph(this.updatePoint)}}function gC(t,e){return e?{point:e(t.point)}:t}function T6(t,e){return{x:t.x-e.x,y:t.y-e.y}}function bC({point:t},e){return{point:t,delta:T6(t,LV(e)),offset:T6(t,ife(e)),velocity:sfe(e,.1)}}function ife(t){return t[0]}function LV(t){return t[t.length-1]}function sfe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=LV(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>zl(e)));)n--;if(!r)return{x:0,y:0};const s=Vl(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const RV=1e-4,ofe=1-RV,afe=1+RV,IV=.01,lfe=0-IV,cfe=0+IV;function wo(t){return t.max-t.min}function ufe(t,e,n){return Math.abs(t-e)<=n}function A6(t,e,n,r=.5){t.origin=r,t.originPoint=br(e.min,e.max,t.origin),t.scale=wo(n)/wo(e),t.translate=br(n.min,n.max,t.origin)-t.originPoint,(t.scale>=ofe&&t.scale<=afe||isNaN(t.scale))&&(t.scale=1),(t.translate>=lfe&&t.translate<=cfe||isNaN(t.translate))&&(t.translate=0)}function Yb(t,e,n,r){A6(t.x,e.x,n.x,r?r.originX:void 0),A6(t.y,e.y,n.y,r?r.originY:void 0)}function P6(t,e,n){t.min=n.min+e.min,t.max=t.min+wo(e)}function hfe(t,e,n){P6(t.x,e.x,n.x),P6(t.y,e.y,n.y)}function N6(t,e,n){t.min=e.min-n.min,t.max=t.min+wo(e)}function Xb(t,e,n){N6(t.x,e.x,n.x),N6(t.y,e.y,n.y)}function dfe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?br(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?br(n,t,r.max):Math.min(t,n)),t}function L6(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function ffe(t,{top:e,left:n,bottom:r,right:i}){return{x:L6(t.x,n,i),y:L6(t.y,e,r)}}function R6(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function pfe(t,e){return{x:R6(t.x,e.x),y:R6(t.y,e.y)}}function mfe(t,e){let n=.5;const r=wo(t),i=wo(e);return i>r?n=cf(e.min,e.max-r,t.min):r>i&&(n=cf(t.min,t.max-i,e.min)),Yc(0,1,n)}function gfe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const D3=.35;function bfe(t=D3){return t===!1?t=0:t===!0&&(t=D3),{x:I6(t,"left","right"),y:I6(t,"top","bottom")}}function I6(t,e,n){return{min:O6(t,e),max:O6(t,n)}}function O6(t,e){return typeof t=="number"?t:t[e]||0}const D6=()=>({translate:0,scale:1,origin:0,originPoint:0}),tm=()=>({x:D6(),y:D6()}),M6=()=>({min:0,max:0}),Cr=()=>({x:M6(),y:M6()});function Mo(t){return[t("x"),t("y")]}function OV({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function yfe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function vfe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function yC(t){return t===void 0||t===1}function M3({scale:t,scaleX:e,scaleY:n}){return!yC(t)||!yC(e)||!yC(n)}function cd(t){return M3(t)||DV(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function DV(t){return j6(t.x)||j6(t.y)}function j6(t){return t&&t!=="0%"}function V2(t,e,n){const r=t-n,i=e*r;return n+i}function F6(t,e,n,r,i){return i!==void 0&&(t=V2(t,i,r)),V2(t,n,r)+e}function j3(t,e=0,n=1,r,i){t.min=F6(t.min,e,n,r,i),t.max=F6(t.max,e,n,r,i)}function MV(t,{x:e,y:n}){j3(t.x,e.translate,e.scale,e.originPoint),j3(t.y,n.translate,n.scale,n.originPoint)}const B6=.999999999999,U6=1.0000000000001;function xfe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&rm(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,MV(t,o)),r&&cd(s.latestValues)&&rm(t,s.latestValues))}e.x<U6&&e.x>B6&&(e.x=1),e.y<U6&&e.y>B6&&(e.y=1)}function nm(t,e){t.min=t.min+e,t.max=t.max+e}function $6(t,e,n,r,i=.5){const s=br(t.min,t.max,i);j3(t,e,n,s,r)}function rm(t,e){$6(t.x,e.x,e.scaleX,e.scale,e.originX),$6(t.y,e.y,e.scaleY,e.scale,e.originY)}function jV(t,e){return OV(vfe(t.getBoundingClientRect(),e))}function _fe(t,e,n){const r=jV(t,n),{scroll:i}=e;return i&&(nm(r.x,i.offset.x),nm(r.y,i.offset.y)),r}const FV=({current:t})=>t?t.ownerDocument.defaultView:null,wfe=new WeakMap;class Sfe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Cr(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ov(u).point)},s=(u,h)=>{const{drag:d,dragPropagation:f,onDragStart:m}=this.getProps();if(d&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=yhe(d),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Mo(b=>{let y=this.getAxisMotionValue(b).get()||0;if(Wl.test(y)){const{projection:v}=this.visualElement;if(v&&v.layout){const x=v.layout.layoutBox[b];x&&(y=wo(x)*(parseFloat(y)/100))}}this.originPoint[b]=y}),m&&fr.postRender(()=>m(u,h)),T3(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:d,dragDirectionLock:f,onDirectionLock:m,onDrag:g}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:b}=h;if(f&&this.currentDirection===null){this.currentDirection=Efe(b),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",h.point,b),this.updateAxis("y",h.point,b),this.visualElement.render(),g&&g(u,h)},a=(u,h)=>this.stop(u,h),l=()=>Mo(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new NV(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:FV(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&fr.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!l_(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=dfe(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Qp(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=ffe(i.layoutBox,n):this.constraints=!1,this.elastic=bfe(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Mo(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=gfe(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Qp(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=_fe(r,i.root,this.visualElement.getTransformPagePoint());let o=pfe(i.layout.layoutBox,s);if(n){const a=n(yfe(o));this.hasMutatedConstraints=!!a,a&&(o=OV(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Mo(u=>{if(!l_(u,n,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const d=i?200:1e6,f=i?40:1e7,m={type:"inertia",velocity:r?e[u]:0,bounceStiffness:d,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(u,m)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return T3(this.visualElement,e),r.start(ML(e,r,0,n,this.visualElement,!1))}stopAnimation(){Mo(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Mo(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Mo(n=>{const{drag:r}=this.getProps();if(!l_(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-br(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Qp(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Mo(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=mfe({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Mo(o=>{if(!l_(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(br(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;wfe.set(this.visualElement,this);const e=this.visualElement.current,n=Kb(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Qp(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),fr.read(r);const o=Z1(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Mo(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=D3,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function l_(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Efe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class kfe extends Ih{constructor(e){super(e),this.removeGroupControls=vo,this.removeListeners=vo,this.controls=new Sfe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||vo}unmount(){this.removeGroupControls(),this.removeListeners()}}const H6=t=>(e,n)=>{t&&fr.postRender(()=>t(e,n))};class Cfe extends Ih{constructor(){super(...arguments),this.removePointerDownListener=vo}onPointerDown(e){this.session=new NV(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:FV(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:H6(e),onStart:H6(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&fr.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Kb(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Hw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function z6(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const V0={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Wt.test(t))t=parseFloat(t);else return t;const n=z6(t,e.target.x),r=z6(t,e.target.y);return`${n}% ${r}%`}},Tfe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=mh.parse(t);if(i.length>5)return r;const s=mh.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=br(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class Afe extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;Jue(Pfe),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Hw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||fr.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),hL.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function BV(t){const[e,n]=vz(),r=A.useContext(iL);return p.jsx(Afe,{...t,layoutGroup:r,switchLayoutGroup:A.useContext(Tz),isPresent:e,safeToRemove:n})}const Pfe={borderRadius:{...V0,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:V0,borderTopRightRadius:V0,borderBottomLeftRadius:V0,borderBottomRightRadius:V0,boxShadow:Tfe};function UV(t,e,n){const r=xi(t)?t:Y1(t);return r.start(ML("",r,e,n)),r.animation}function $V(t){return t instanceof SVGElement&&t.tagName!=="svg"}const Nfe=(t,e)=>t.depth-e.depth;class Lfe{constructor(){this.children=[],this.isDirty=!1}add(e){kL(this.children,e),this.isDirty=!0}remove(e){$E(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Nfe),this.isDirty=!1,this.children.forEach(e)}}function Rfe(t,e){const n=Gl.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(ph(r),t(s-e))};return fr.read(r,!0),()=>ph(r)}const HV=["TopLeft","TopRight","BottomLeft","BottomRight"],Ife=HV.length,V6=t=>typeof t=="string"?parseFloat(t):t,W6=t=>typeof t=="number"||Wt.test(t);function Ofe(t,e,n,r,i,s){i?(t.opacity=br(0,n.opacity!==void 0?n.opacity:1,Dfe(r)),t.opacityExit=br(e.opacity!==void 0?e.opacity:1,0,Mfe(r))):s&&(t.opacity=br(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<Ife;o++){const a=`border${HV[o]}Radius`;let l=G6(e,a),c=G6(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||W6(l)===W6(c)?(t[a]=Math.max(br(V6(l),V6(c),r),0),(Wl.test(c)||Wl.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=br(e.rotate||0,n.rotate||0,r))}function G6(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Dfe=zV(0,.5,iV),Mfe=zV(.5,.95,vo);function zV(t,e,n){return r=>r<t?0:r>e?1:n(cf(t,e,r))}function q6(t,e){t.min=e.min,t.max=e.max}function Io(t,e){q6(t.x,e.x),q6(t.y,e.y)}function K6(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Y6(t,e,n,r,i){return t-=e,t=V2(t,1/n,r),i!==void 0&&(t=V2(t,1/i,r)),t}function jfe(t,e=0,n=1,r=.5,i,s=t,o=t){if(Wl.test(e)&&(e=parseFloat(e),e=br(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=br(s.min,s.max,r);t===s&&(a-=e),t.min=Y6(t.min,e,n,a,i),t.max=Y6(t.max,e,n,a,i)}function X6(t,e,[n,r,i],s,o){jfe(t,e[n],e[r],e[i],e.scale,s,o)}const Ffe=["x","scaleX","originX"],Bfe=["y","scaleY","originY"];function Z6(t,e,n,r){X6(t.x,e,Ffe,n?n.x:void 0,r?r.x:void 0),X6(t.y,e,Bfe,n?n.y:void 0,r?r.y:void 0)}function J6(t){return t.translate===0&&t.scale===1}function VV(t){return J6(t.x)&&J6(t.y)}function Q6(t,e){return t.min===e.min&&t.max===e.max}function Ufe(t,e){return Q6(t.x,e.x)&&Q6(t.y,e.y)}function eM(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function WV(t,e){return eM(t.x,e.x)&&eM(t.y,e.y)}function tM(t){return wo(t.x)/wo(t.y)}function nM(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class $fe{constructor(){this.members=[]}add(e){kL(this.members,e),e.scheduleRender()}remove(e){if($E(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Hfe(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:d,skewX:f,skewY:m}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),h&&(r+=`rotateX(${h}deg) `),d&&(r+=`rotateY(${d}deg) `),f&&(r+=`skewX(${f}deg) `),m&&(r+=`skewY(${m}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const ud={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},kb=typeof window<"u"&&window.MotionDebug!==void 0,vC=["","X","Y","Z"],zfe={visibility:"hidden"},rM=1e3;let Vfe=0;function xC(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function GV(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Zz(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",fr,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&GV(r)}function qV({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e?.()){this.id=Vfe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,kb&&(ud.totalNodes=ud.resolvedTargetDeltas=ud.recalculatedProjection=0),this.nodes.forEach(qfe),this.nodes.forEach(Jfe),this.nodes.forEach(Qfe),this.nodes.forEach(Kfe),kb&&window.MotionDebug.record(ud)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Lfe)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new CL),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=$V(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const d=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=Rfe(d,250),Hw.hasAnimatedSinceResize&&(Hw.hasAnimatedSinceResize=!1,this.nodes.forEach(sM))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d,hasRelativeTargetChanged:f,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||ipe,{onLayoutAnimationStart:b,onLayoutAnimationComplete:y}=u.getProps(),v=!this.targetLayout||!WV(this.targetLayout,m)||f,x=!d&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||d&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,x);const w={..._L(g,"layout"),onPlay:b,onComplete:y};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else d||sM(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ph(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(epe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&GV(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(iM);return}this.isUpdating||this.nodes.forEach(Xfe),this.isUpdating=!1,this.nodes.forEach(Zfe),this.nodes.forEach(Wfe),this.nodes.forEach(Gfe),this.clearAllSnapshots();const a=Gl.now();Li.delta=Yc(0,1e3/60,a-Li.timestamp),Li.timestamp=a,Li.isProcessing=!0,hC.update.process(Li),hC.preRender.process(Li),hC.render.process(Li),Li.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,hL.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Yfe),this.sharedNodes.forEach(tpe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,fr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){fr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Cr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!VV(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||cd(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),spe(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Cr();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(ope))){const{scroll:u}=this.root;u&&(nm(l.x,u.offset.x),nm(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=Cr();if(Io(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:d}=u;u!==this.root&&h&&d.layoutScroll&&(h.wasRoot&&Io(l,o),nm(l.x,h.offset.x),nm(l.y,h.offset.y))}return l}applyTransform(o,a=!1){const l=Cr();Io(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&rm(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),cd(u.latestValues)&&rm(l,u.latestValues)}return cd(this.latestValues)&&rm(l,this.latestValues),l}removeTransform(o){const a=Cr();Io(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!cd(c.latestValues))continue;M3(c.latestValues)&&c.updateSnapshot();const u=Cr(),h=c.measurePageBox();Io(u,h),Z6(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return cd(this.latestValues)&&Z6(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Li.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:d}=this.options;if(!(!this.layout||!(h||d))){if(this.resolvedRelativeTargetAt=Li.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Cr(),this.relativeTargetOrigin=Cr(),Xb(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),Io(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Cr(),this.targetWithTransforms=Cr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hfe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Io(this.target,this.layout.layoutBox),MV(this.target,this.targetDelta)):Io(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Cr(),this.relativeTargetOrigin=Cr(),Xb(this.relativeTargetOrigin,this.target,f.target),Io(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}kb&&ud.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||M3(this.parent.latestValues)||DV(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Li.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Io(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;xfe(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Cr());const{target:m}=a;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(K6(this.prevProjectionDelta.x,this.projectionDelta.x),K6(this.prevProjectionDelta.y,this.projectionDelta.y)),Yb(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==f||!nM(this.projectionDelta.x,this.prevProjectionDelta.x)||!nM(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m)),kb&&ud.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=tm(),this.projectionDelta=tm(),this.projectionDeltaWithTransform=tm()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=tm();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=Cr(),f=l?l.source:void 0,m=this.layout?this.layout.source:void 0,g=f!==m,b=this.getStack(),y=!b||b.members.length<=1,v=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(rpe));this.animationProgress=0;let x;this.mixTargetDelta=w=>{const S=w/1e3;oM(h.x,o.x,S),oM(h.y,o.y,S),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xb(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),npe(this.relativeTarget,this.relativeTargetOrigin,d,S),x&&Ufe(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=Cr()),Io(x,this.relativeTarget)),g&&(this.animationValues=u,Ofe(u,c,this.latestValues,S,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ph(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=fr.update(()=>{Hw.hasAnimatedSinceResize=!0,this.currentAnimation=UV(0,rM,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(rM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&KV(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Cr();const h=wo(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const d=wo(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+d}Io(a,l),rm(a,u),Yb(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new $fe),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&xC("z",o,c,this.animationValues);for(let u=0;u<vC.length;u++)xC(`rotate${vC[u]}`,o,c,this.animationValues),xC(`skew${vC[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return zfe;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Uw(o?.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Uw(o?.pointerEvents)||""),this.hasProjected&&!cd(this.latestValues)&&(g.transform=u?u({},""):"none",this.hasProjected=!1),g}const d=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=Hfe(this.projectionDeltaWithTransform,this.treeScale,d),u&&(c.transform=u(d,c.transform));const{x:f,y:m}=this.projectionDelta;c.transformOrigin=`${f.origin*100}% ${m.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=d.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:c.opacity=h===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in F2){if(d[g]===void 0)continue;const{correct:b,applyTo:y}=F2[g],v=c.transform==="none"?d[g]:b(d[g],h);if(y){const x=y.length;for(let w=0;w<x;w++)c[y[w]]=v}else c[g]=v}return this.options.layoutId&&(c.pointerEvents=h===this?Uw(o?.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(iM),this.root.sharedNodes.clear()}}}function Wfe(t){t.updateLayout()}function Gfe(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Mo(h=>{const d=o?n.measuredBox[h]:n.layoutBox[h],f=wo(d);d.min=r[h].min,d.max=d.min+f}):KV(s,n.layoutBox,r)&&Mo(h=>{const d=o?n.measuredBox[h]:n.layoutBox[h],f=wo(r[h]);d.max=d.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+f)});const a=tm();Yb(a,r,n.layoutBox);const l=tm();o?Yb(l,t.applyTransform(i,!0),n.measuredBox):Yb(l,r,n.layoutBox);const c=!VV(a);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:d,layout:f}=h;if(d&&f){const m=Cr();Xb(m,n.layoutBox,d.layoutBox);const g=Cr();Xb(g,r,f.layoutBox),WV(m,g)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=m,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function qfe(t){kb&&ud.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Kfe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Yfe(t){t.clearSnapshot()}function iM(t){t.clearMeasurements()}function Xfe(t){t.isLayoutDirty=!1}function Zfe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function sM(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Jfe(t){t.resolveTargetDelta()}function Qfe(t){t.calcProjection()}function epe(t){t.resetSkewAndRotation()}function tpe(t){t.removeLeadSnapshot()}function oM(t,e,n){t.translate=br(e.translate,0,n),t.scale=br(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function aM(t,e,n,r){t.min=br(e.min,n.min,r),t.max=br(e.max,n.max,r)}function npe(t,e,n,r){aM(t.x,e.x,n.x,r),aM(t.y,e.y,n.y,r)}function rpe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const ipe={duration:.45,ease:[.4,0,.1,1]},lM=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),cM=lM("applewebkit/")&&!lM("chrome/")?Math.round:vo;function uM(t){t.min=cM(t.min),t.max=cM(t.max)}function spe(t){uM(t.x),uM(t.y)}function KV(t,e,n){return t==="position"||t==="preserve-aspect"&&!ufe(tM(e),tM(n),.2)}function ope(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const ape=qV({attachResizeListener:(t,e)=>Z1(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),_C={current:void 0},YV=qV({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!_C.current){const t=new ape({});t.mount(window),t.setOptions({layoutScroll:!0}),_C.current=t}return _C.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),lpe={pan:{Feature:Cfe},drag:{Feature:kfe,ProjectionNode:YV,MeasureLayout:BV}};function hM(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&fr.postRender(()=>s(e,ov(e)))}class cpe extends Ih{mount(){const{current:e}=this.node;e&&(this.unmount=fhe(e,n=>(hM(this.node,n,"Start"),r=>hM(this.node,r,"End"))))}unmount(){}}class upe extends Ih{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sv(Z1(this.node.current,"focus",()=>this.onFocus()),Z1(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function dM(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&fr.postRender(()=>s(e,ov(e)))}class hpe extends Ih{mount(){const{current:e}=this.node;e&&(this.unmount=bhe(e,n=>(dM(this.node,n,"Start"),(r,{success:i})=>dM(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const F3=new WeakMap,wC=new WeakMap,dpe=t=>{const e=F3.get(t.target);e&&e(t)},fpe=t=>{t.forEach(dpe)};function ppe({root:t,...e}){const n=t||document;wC.has(n)||wC.set(n,{});const r=wC.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(fpe,{root:t,...e})),r[i]}function mpe(t,e,n){const r=ppe(e);return F3.set(t,n),r.observe(t),()=>{F3.delete(t),r.unobserve(t)}}const gpe={some:0,all:1};class bpe extends Ih{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:gpe[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),d=c?u:h;d&&d(l)};return mpe(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(ype(e,n))&&this.startObserver()}unmount(){}}function ype({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const vpe={inView:{Feature:bpe},tap:{Feature:hpe},focus:{Feature:upe},hover:{Feature:cpe}},xpe={layout:{ProjectionNode:YV,MeasureLayout:BV}},B3={current:null},XV={current:!1};function _pe(){if(XV.current=!0,!!oL)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>B3.current=t.matches;t.addListener(e),e()}else B3.current=!1}const wpe=[...yV,Ki,mh],Spe=t=>wpe.find(bV(t)),Xm=new WeakMap;function Epe(t,e,n){for(const r in e){const i=e[r],s=n[r];if(xi(i))t.addValue(r,i);else if(xi(s))t.addValue(r,Y1(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Y1(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const fM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ZV{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=RL,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Gl.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,fr.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=FE(n),this.isVariantNode=kz(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const m=d[f];l[f]!==void 0&&xi(m)&&m.set(l[f],!1)}}mount(e){this.current=e,Xm.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),XV.current||_pe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:B3.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Xm.delete(this.current),this.projection&&this.projection.unmount(),ph(this.notifyUpdate),ph(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Lf.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&fr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Km){const n=Km[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Cr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<fM.length;r++){const i=fM[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=Epe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Y1(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(mV(i)||oV(i))?i=parseFloat(i):!Spe(i)&&mh.test(n)&&(i=dV(e,n)),this.setBaseTarget(e,xi(i)?i.get():i)),xi(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=fL(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!xi(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new CL),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class JV extends ZV{constructor(){super(...arguments),this.KeyframeResolver=vV}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;xi(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function kpe(t){return window.getComputedStyle(t)}class QV extends JV{constructor(){super(...arguments),this.type="html",this.renderInstance=Oz}readValueFromInstance(e,n){if(Lf.has(n)){const r=LL(n);return r&&r.default||0}else{const r=kpe(e),i=(Lz(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return jV(e,n)}build(e,n,r){gL(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return xL(e,n,r)}}class eW extends JV{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Cr}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Lf.has(n)){const r=LL(n);return r&&r.default||0}return n=Dz.has(n)?n:uL(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Fz(e,n,r)}build(e,n,r){bL(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){Mz(e,n,r,i)}mount(e){this.isSVGTag=vL(e.tagName),super.mount(e)}}const Cpe=(t,e)=>dL(t)?new eW(e):new QV(e,{allowProjection:t!==A.Fragment}),Tpe=ahe({...tfe,...vpe,...lpe,...xpe},Cpe),at=wue(Tpe);function Ape(t){return A.useEffect(()=>()=>t(),[])}const Ppe=(t,e,n)=>{const r=e-t;return((n-t)%r+r)%r+t};function tW(t,e){return kV(t)?t[Ppe(0,t.length,e)]:t}function FL(t){return typeof t=="object"&&!Array.isArray(t)}function nW(t,e,n,r){return typeof t=="string"&&FL(e)?Gz(t,n,r):t instanceof NodeList?Array.from(t):Array.isArray(t)?t:[t]}function Npe(t,e,n){return t*(e+1)}function pM(t,e,n,r){var i;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?n:(i=r.get(e))!==null&&i!==void 0?i:t}function Lpe(t,e,n){for(let r=0;r<t.length;r++){const i=t[r];i.at>e&&i.at<n&&($E(t,i),r--)}}function Rpe(t,e,n,r,i,s){Lpe(t,i,s);for(let o=0;o<e.length;o++)t.push({value:e[o],at:br(i,s,r[o]),easing:tW(n,o)})}function Ipe(t,e){for(let n=0;n<t.length;n++)t[n]=t[n]/(e+1)}function Ope(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const Dpe="easeInOut";function Mpe(t,{defaultTransition:e={},...n}={},r,i){const s=e.duration||.3,o=new Map,a=new Map,l={},c=new Map;let u=0,h=0,d=0;for(let f=0;f<t.length;f++){const m=t[f];if(typeof m=="string"){c.set(m,h);continue}else if(!Array.isArray(m)){c.set(m.name,pM(h,m.at,u,c));continue}let[g,b,y={}]=m;y.at!==void 0&&(h=pM(h,y.at,u,c));let v=0;const x=(w,S,E,k=0,_=0)=>{const L=jpe(w),{delay:R=0,times:C=TV(L),type:P="keyframes",repeat:O,repeatType:N,repeatDelay:H=0,...Q}=S;let{ease:X=e.ease||"easeOut",duration:J}=S;const j=typeof R=="function"?R(k,_):R,F=L.length,Y=UE(P)?P:i?.[P];if(F<=2&&Y){let W=100;if(F===2&&Upe(L)){const K=L[1]-L[0];W=Math.abs(K)}const te={...Q};J!==void 0&&(te.duration=zl(J));const ee=uhe(te,W,Y);X=ee.ease,J=ee.duration}J??(J=s);const M=h+j;C.length===1&&C[0]===0&&(C[1]=1);const D=C.length-L.length;if(D>0&&CV(C,D),L.length===1&&L.unshift(null),O){J=Npe(J,O);const W=[...L],te=[...C];X=Array.isArray(X)?[...X]:[X];const ee=[...X];for(let K=0;K<O;K++){L.push(...W);for(let he=0;he<W.length;he++)C.push(te[he]+(K+1)),X.push(he===0?"linear":tW(ee,he-1))}Ipe(C,O)}const V=M+J;Rpe(E,L,X,C,M,V),v=Math.max(j+J,v),d=Math.max(V,d)};if(xi(g)){const w=mM(g,a);x(b,y,gM("default",w))}else{const w=nW(g,b,r,l),S=w.length;for(let E=0;E<S;E++){b=b,y=y;const k=w[E],_=mM(k,a);for(const L in b)x(b[L],Fpe(y,L),gM(L,_),E,S)}}u=h,h+=v}return a.forEach((f,m)=>{for(const g in f){const b=f[g];b.sort(Ope);const y=[],v=[],x=[];for(let S=0;S<b.length;S++){const{at:E,value:k,easing:_}=b[S];y.push(k),v.push(cf(0,d,E)),x.push(_||"easeOut")}v[0]!==0&&(v.unshift(0),y.unshift(y[0]),x.unshift(Dpe)),v[v.length-1]!==1&&(v.push(1),y.push(null)),o.has(m)||o.set(m,{keyframes:{},transition:{}});const w=o.get(m);w.keyframes[g]=y,w.transition[g]={...e,duration:d,ease:x,times:v,...n}}}),o}function mM(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function gM(t,e){return e[t]||(e[t]=[]),e[t]}function jpe(t){return Array.isArray(t)?t:[t]}function Fpe(t,e){return t&&t[e]?{...t,...t[e]}:{...t}}const Bpe=t=>typeof t=="number",Upe=t=>t.every(Bpe);function $pe(t,e){return t in e}class Hpe extends ZV{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,n){if($pe(n,e)){const r=e[n];if(typeof r=="string"||typeof r=="number")return r}}getBaseTargetFromProps(){}removeValueFromRenderState(e,n){delete n.output[e]}measureInstanceViewportBox(){return Cr()}build(e,n){Object.assign(e.output,n)}renderInstance(e,{output:n}){Object.assign(e,n)}sortInstanceNodePosition(){return 0}}function zpe(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=$V(t)?new eW(e):new QV(e);n.mount(t),Xm.set(t,n)}function Vpe(t){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new Hpe(e);n.mount(t),Xm.set(t,n)}function Wpe(t,e){return xi(t)||typeof t=="number"||typeof t=="string"&&!FL(e)}function rW(t,e,n,r){const i=[];if(Wpe(t,e))i.push(UV(t,FL(e)&&e.default||e,n&&(n.default||n)));else{const s=nW(t,e,r),o=s.length;for(let a=0;a<o;a++){const l=s[a],c=l instanceof Element?zpe:Vpe;Xm.has(l)||c(l);const u=Xm.get(l),h={...n};"delay"in h&&typeof h.delay=="function"&&(h.delay=h.delay(a,o)),i.push(...jL(u,{...e,transition:h},{}))}}return i}function Gpe(t,e,n){const r=[];return Mpe(t,e,n,{spring:OL}).forEach(({keyframes:s,transition:o},a)=>{r.push(...rW(a,s,o))}),r}function qpe(t){return Array.isArray(t)&&t.some(Array.isArray)}function Kpe(t){function e(n,r,i){let s=[];qpe(n)?s=Gpe(n,r,t):s=rW(n,r,i,t);const o=new $z(s);return t&&t.animations.push(o),o}return e}function Ype(){const t=G1(()=>({current:null,animations:[]})),e=G1(()=>Kpe(t));return Ape(()=>{t.animations.forEach(n=>n.stop())}),[t,e]}function iW(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=iW(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Fc(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=iW(t))&&(r&&(r+=" "),r+=e);return r}const J1=t=>typeof t=="number"&&!isNaN(t),Wd=t=>typeof t=="string",ho=t=>typeof t=="function",zw=t=>Wd(t)||ho(t)?t:null,U3=t=>A.isValidElement(t)||Wd(t)||ho(t)||J1(t);function Xpe(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:i}=t;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,n)})})}function av(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:i=!0,collapseDuration:s=300}=t;return function(o){let{children:a,position:l,preventExitTransition:c,done:u,nodeRef:h,isIn:d,playToast:f}=o;const m=r?`${e}--${l}`:e,g=r?`${n}--${l}`:n,b=A.useRef(0);return A.useLayoutEffect(()=>{const y=h.current,v=m.split(" "),x=w=>{w.target===h.current&&(f(),y.removeEventListener("animationend",x),y.removeEventListener("animationcancel",x),b.current===0&&w.type!=="animationcancel"&&y.classList.remove(...v))};y.classList.add(...v),y.addEventListener("animationend",x),y.addEventListener("animationcancel",x)},[]),A.useEffect(()=>{const y=h.current,v=()=>{y.removeEventListener("animationend",v),i?Xpe(y,u,s):u()};d||(c?v():(b.current=1,y.className+=` ${g}`,y.addEventListener("animationend",v)))},[d]),ut.createElement(ut.Fragment,null,a)}}function bM(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const ms=new Map;let Q1=[];const $3=new Set,Zpe=t=>$3.forEach(e=>e(t)),sW=()=>ms.size>0;function oW(t,e){var n;if(e)return!((n=ms.get(e))==null||!n.isToastActive(t));let r=!1;return ms.forEach(i=>{i.isToastActive(t)&&(r=!0)}),r}function aW(t,e){U3(t)&&(sW()||Q1.push({content:t,options:e}),ms.forEach(n=>{n.buildToast(t,e)}))}function yM(t,e){ms.forEach(n=>{e!=null&&e!=null&&e.containerId?e?.containerId===n.id&&n.toggle(t,e?.id):n.toggle(t,e?.id)})}function Jpe(t){const{subscribe:e,getSnapshot:n,setProps:r}=A.useRef(function(s){const o=s.containerId||1;return{subscribe(a){const l=function(u,h,d){let f=1,m=0,g=[],b=[],y=[],v=h;const x=new Map,w=new Set,S=()=>{y=Array.from(x.values()),w.forEach(_=>_())},E=_=>{b=_==null?[]:b.filter(L=>L!==_),S()},k=_=>{const{toastId:L,onOpen:R,updateId:C,children:P}=_.props,O=C==null;_.staleId&&x.delete(_.staleId),x.set(L,_),b=[...b,_.props.toastId].filter(N=>N!==_.staleId),S(),d(bM(_,O?"added":"updated")),O&&ho(R)&&R(A.isValidElement(P)&&P.props)};return{id:u,props:v,observe:_=>(w.add(_),()=>w.delete(_)),toggle:(_,L)=>{x.forEach(R=>{L!=null&&L!==R.props.toastId||ho(R.toggle)&&R.toggle(_)})},removeToast:E,toasts:x,clearQueue:()=>{m-=g.length,g=[]},buildToast:(_,L)=>{if((M=>{let{containerId:D,toastId:V,updateId:W}=M;const te=D?D!==u:u!==1,ee=x.has(V)&&W==null;return te||ee})(L))return;const{toastId:R,updateId:C,data:P,staleId:O,delay:N}=L,H=()=>{E(R)},Q=C==null;Q&&m++;const X={...v,style:v.toastStyle,key:f++,...Object.fromEntries(Object.entries(L).filter(M=>{let[D,V]=M;return V!=null})),toastId:R,updateId:C,data:P,closeToast:H,isIn:!1,className:zw(L.className||v.toastClassName),bodyClassName:zw(L.bodyClassName||v.bodyClassName),progressClassName:zw(L.progressClassName||v.progressClassName),autoClose:!L.isLoading&&(J=L.autoClose,j=v.autoClose,J===!1||J1(J)&&J>0?J:j),deleteToast(){const M=x.get(R),{onClose:D,children:V}=M.props;ho(D)&&D(A.isValidElement(V)&&V.props),d(bM(M,"removed")),x.delete(R),m--,m<0&&(m=0),g.length>0?k(g.shift()):S()}};var J,j;X.closeButton=v.closeButton,L.closeButton===!1||U3(L.closeButton)?X.closeButton=L.closeButton:L.closeButton===!0&&(X.closeButton=!U3(v.closeButton)||v.closeButton);let F=_;A.isValidElement(_)&&!Wd(_.type)?F=A.cloneElement(_,{closeToast:H,toastProps:X,data:P}):ho(_)&&(F=_({closeToast:H,toastProps:X,data:P}));const Y={content:F,props:X,staleId:O};v.limit&&v.limit>0&&m>v.limit&&Q?g.push(Y):J1(N)?setTimeout(()=>{k(Y)},N):k(Y)},setProps(_){v=_},setToggle:(_,L)=>{x.get(_).toggle=L},isToastActive:_=>b.some(L=>L===_),getSnapshot:()=>y}}(o,s,Zpe);ms.set(o,l);const c=l.observe(a);return Q1.forEach(u=>aW(u.content,u.options)),Q1=[],()=>{c(),ms.delete(o)}},setProps(a){var l;(l=ms.get(o))==null||l.setProps(a)},getSnapshot(){var a;return(a=ms.get(o))==null?void 0:a.getSnapshot()}}}(t)).current;r(t);const i=A.useSyncExternalStore(e,n,n);return{getToastToRender:function(s){if(!i)return[];const o=new Map;return t.newestOnTop&&i.reverse(),i.forEach(a=>{const{position:l}=a.props;o.has(l)||o.set(l,[]),o.get(l).push(a)}),Array.from(o,a=>s(a[0],a[1]))},isToastActive:oW,count:i?.length}}function Qpe(t){const[e,n]=A.useState(!1),[r,i]=A.useState(!1),s=A.useRef(null),o=A.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:l,closeToast:c,onClick:u,closeOnClick:h}=t;var d,f;function m(){n(!0)}function g(){n(!1)}function b(x){const w=s.current;o.canDrag&&w&&(o.didMove=!0,e&&g(),o.delta=t.draggableDirection==="x"?x.clientX-o.start:x.clientY-o.start,o.start!==x.clientX&&(o.canCloseOnClick=!1),w.style.transform=`translate3d(${t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`},0)`,w.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function y(){document.removeEventListener("pointermove",b),document.removeEventListener("pointerup",y);const x=s.current;if(o.canDrag&&o.didMove&&x){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return i(!0),t.closeToast(),void t.collapseAll();x.style.transition="transform 0.2s, opacity 0.2s",x.style.removeProperty("transform"),x.style.removeProperty("opacity")}}(f=ms.get((d={id:t.toastId,containerId:t.containerId,fn:n}).containerId||1))==null||f.setToggle(d.id,d.fn),A.useEffect(()=>{if(t.pauseOnFocusLoss)return document.hasFocus()||g(),window.addEventListener("focus",m),window.addEventListener("blur",g),()=>{window.removeEventListener("focus",m),window.removeEventListener("blur",g)}},[t.pauseOnFocusLoss]);const v={onPointerDown:function(x){if(t.draggable===!0||t.draggable===x.pointerType){o.didMove=!1,document.addEventListener("pointermove",b),document.addEventListener("pointerup",y);const w=s.current;o.canCloseOnClick=!0,o.canDrag=!0,w.style.transition="none",t.draggableDirection==="x"?(o.start=x.clientX,o.removalDistance=w.offsetWidth*(t.draggablePercent/100)):(o.start=x.clientY,o.removalDistance=w.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent)/100)}},onPointerUp:function(x){const{top:w,bottom:S,left:E,right:k}=s.current.getBoundingClientRect();x.nativeEvent.type!=="touchend"&&t.pauseOnHover&&x.clientX>=E&&x.clientX<=k&&x.clientY>=w&&x.clientY<=S?g():m()}};return a&&l&&(v.onMouseEnter=g,t.stacked||(v.onMouseLeave=m)),h&&(v.onClick=x=>{u&&u(x),o.canCloseOnClick&&c()}),{playToast:m,pauseToast:g,isRunning:e,preventExitTransition:r,toastRef:s,eventHandlers:v}}function eme(t){let{delay:e,isRunning:n,closeToast:r,type:i="default",hide:s,className:o,style:a,controlledProgress:l,progress:c,rtl:u,isIn:h,theme:d}=t;const f=s||l&&c===0,m={...a,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused"};l&&(m.transform=`scaleX(${c})`);const g=Fc("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${d}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":u}),b=ho(o)?o({rtl:u,type:i,defaultClassName:g}):Fc(g,o),y={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{h&&r()}};return ut.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":f},ut.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${d} Toastify__progress-bar--${i}`}),ut.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:b,style:m,...y}))}let tme=1;const lW=()=>""+tme++;function nme(t){return t&&(Wd(t.toastId)||J1(t.toastId))?t.toastId:lW()}function Zb(t,e){return aW(t,e),e.toastId}function W2(t,e){return{...e,type:e&&e.type||t,toastId:nme(e)}}function c_(t){return(e,n)=>Zb(e,W2(t,n))}function He(t,e){return Zb(t,W2("default",e))}He.loading=(t,e)=>Zb(t,W2("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),He.promise=function(t,e,n){let r,{pending:i,error:s,success:o}=e;i&&(r=Wd(i)?He.loading(i,n):He.loading(i.render,{...n,...i}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(u,h,d)=>{if(h==null)return void He.dismiss(r);const f={type:u,...a,...n,data:d},m=Wd(h)?{render:h}:h;return r?He.update(r,{...f,...m}):He(m.render,{...f,...m}),d},c=ho(t)?t():t;return c.then(u=>l("success",o,u)).catch(u=>l("error",s,u)),c},He.success=c_("success"),He.info=c_("info"),He.error=c_("error"),He.warning=c_("warning"),He.warn=He.warning,He.dark=(t,e)=>Zb(t,W2("default",{theme:"dark",...e})),He.dismiss=function(t){(function(e){var n;if(sW()){if(e==null||Wd(n=e)||J1(n))ms.forEach(r=>{r.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const r=ms.get(e.containerId);r?r.removeToast(e.id):ms.forEach(i=>{i.removeToast(e.id)})}}else Q1=Q1.filter(r=>e!=null&&r.options.toastId!==e)})(t)},He.clearWaitingQueue=function(t){t===void 0&&(t={}),ms.forEach(e=>{!e.props.limit||t.containerId&&e.id!==t.containerId||e.clearQueue()})},He.isActive=oW,He.update=function(t,e){e===void 0&&(e={});const n=((r,i)=>{var s;let{containerId:o}=i;return(s=ms.get(o||1))==null?void 0:s.toasts.get(r)})(t,e);if(n){const{props:r,content:i}=n,s={delay:100,...r,...e,toastId:e.toastId||t,updateId:lW()};s.toastId!==t&&(s.staleId=t);const o=s.render||i;delete s.render,Zb(o,s)}},He.done=t=>{He.update(t,{progress:1})},He.onChange=function(t){return $3.add(t),()=>{$3.delete(t)}},He.play=t=>yM(!0,t),He.pause=t=>yM(!1,t);const rme=typeof window<"u"?A.useLayoutEffect:A.useEffect,u_=t=>{let{theme:e,type:n,isLoading:r,...i}=t;return ut.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...i})},SC={info:function(t){return ut.createElement(u_,{...t},ut.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return ut.createElement(u_,{...t},ut.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return ut.createElement(u_,{...t},ut.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return ut.createElement(u_,{...t},ut.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return ut.createElement("div",{className:"Toastify__spinner"})}},ime=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:i,playToast:s}=Qpe(t),{closeButton:o,children:a,autoClose:l,onClick:c,type:u,hideProgressBar:h,closeToast:d,transition:f,position:m,className:g,style:b,bodyClassName:y,bodyStyle:v,progressClassName:x,progressStyle:w,updateId:S,role:E,progress:k,rtl:_,toastId:L,deleteToast:R,isIn:C,isLoading:P,closeOnClick:O,theme:N}=t,H=Fc("Toastify__toast",`Toastify__toast-theme--${N}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":_},{"Toastify__toast--close-on-click":O}),Q=ho(g)?g({rtl:_,position:m,type:u,defaultClassName:H}):Fc(H,g),X=function(Y){let{theme:M,type:D,isLoading:V,icon:W}=Y,te=null;const ee={theme:M,type:D};return W===!1||(ho(W)?te=W({...ee,isLoading:V}):A.isValidElement(W)?te=A.cloneElement(W,ee):V?te=SC.spinner():(K=>K in SC)(D)&&(te=SC[D](ee))),te}(t),J=!!k||!l,j={closeToast:d,type:u,theme:N};let F=null;return o===!1||(F=ho(o)?o(j):A.isValidElement(o)?A.cloneElement(o,j):function(Y){let{closeToast:M,theme:D,ariaLabel:V="close"}=Y;return ut.createElement("button",{className:`Toastify__close-button Toastify__close-button--${D}`,type:"button",onClick:W=>{W.stopPropagation(),M(W)},"aria-label":V},ut.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ut.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(j)),ut.createElement(f,{isIn:C,done:R,position:m,preventExitTransition:n,nodeRef:r,playToast:s},ut.createElement("div",{id:L,onClick:c,"data-in":C,className:Q,...i,style:b,ref:r},ut.createElement("div",{...C&&{role:E},className:ho(y)?y({type:u}):Fc("Toastify__toast-body",y),style:v},X!=null&&ut.createElement("div",{className:Fc("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!P})},X),ut.createElement("div",null,a)),F,ut.createElement(eme,{...S&&!J?{key:`pb-${S}`}:{},rtl:_,theme:N,delay:l,isRunning:e,isIn:C,closeToast:d,hide:h,type:u,style:w,className:x,controlledProgress:J,progress:k||0})))},zE=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},sme=av(zE("bounce",!0));av(zE("slide",!0));av(zE("zoom"));av(zE("flip"));const ome={position:"top-right",transition:sme,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function ame(t){let e={...ome,...t};const n=t.stacked,[r,i]=A.useState(!0),s=A.useRef(null),{getToastToRender:o,isToastActive:a,count:l}=Jpe(e),{className:c,style:u,rtl:h,containerId:d}=e;function f(g){const b=Fc("Toastify__toast-container",`Toastify__toast-container--${g}`,{"Toastify__toast-container--rtl":h});return ho(c)?c({position:g,rtl:h,defaultClassName:b}):Fc(b,zw(c))}function m(){n&&(i(!0),He.play())}return rme(()=>{if(n){var g;const b=s.current.querySelectorAll('[data-in="true"]'),y=12,v=(g=e.position)==null?void 0:g.includes("top");let x=0,w=0;Array.from(b).reverse().forEach((S,E)=>{const k=S;k.classList.add("Toastify__toast--stacked"),E>0&&(k.dataset.collapsed=`${r}`),k.dataset.pos||(k.dataset.pos=v?"top":"bot");const _=x*(r?.2:1)+(r?0:y*E);k.style.setProperty("--y",`${v?_:-1*_}px`),k.style.setProperty("--g",`${y}`),k.style.setProperty("--s",""+(1-(r?w:0))),x+=k.offsetHeight,w+=.025})}},[r,l,n]),ut.createElement("div",{ref:s,className:"Toastify",id:d,onMouseEnter:()=>{n&&(i(!1),He.pause())},onMouseLeave:m},o((g,b)=>{const y=b.length?{...u}:{...u,pointerEvents:"none"};return ut.createElement("div",{className:f(g),style:y,key:`container-${g}`},b.map(v=>{let{content:x,props:w}=v;return ut.createElement(ime,{...w,stacked:n,collapseAll:m,isIn:a(w.toastId,w.containerId),style:w.style,key:`toast-${w.key}`},x)}))}))}function Mt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return e?.(i)}}function vM(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function VE(...t){return e=>{let n=!1;const r=t.map(i=>{const s=vM(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():vM(t[i],null)}}}}function Wn(...t){return A.useCallback(VE(...t),t)}function lme(t,e){const n=A.createContext(e),r=s=>{const{children:o,...a}=s,l=A.useMemo(()=>a,Object.values(a));return p.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function i(s){const o=A.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function ca(t,e=[]){let n=[];function r(s,o){const a=A.createContext(o),l=n.length;n=[...n,o];const c=h=>{const{scope:d,children:f,...m}=h,g=d?.[t]?.[l]||a,b=A.useMemo(()=>m,Object.values(m));return p.jsx(g.Provider,{value:b,children:f})};c.displayName=s+"Provider";function u(h,d){const f=d?.[t]?.[l]||a,m=A.useContext(f);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=n.map(o=>A.createContext(o));return function(a){const l=a?.[t]||s;return A.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,cme(i,...e)]}function cme(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var Xc=globalThis?.document?A.useLayoutEffect:()=>{},ume=zm.useId||(()=>{}),hme=0;function Hc(t){const[e,n]=A.useState(ume());return Xc(()=>{n(r=>r??String(hme++))},[t]),t||(e?`radix-${e}`:"")}function ii(t){const e=A.useRef(t);return A.useEffect(()=>{e.current=t}),A.useMemo(()=>(...n)=>e.current?.(...n),[])}function If({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=dme({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=ii(n),l=A.useCallback(c=>{if(s){const h=typeof c=="function"?c(t):c;h!==t&&a(h)}else i(c)},[s,t,i,a]);return[o,l]}function dme({defaultProp:t,onChange:e}){const n=A.useState(t),[r]=n,i=A.useRef(r),s=ii(e);return A.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}var uf=A.forwardRef((t,e)=>{const{children:n,...r}=t,i=A.Children.toArray(n),s=i.find(fme);if(s){const o=s.props.children,a=i.map(l=>l===s?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:l);return p.jsx(H3,{...r,ref:e,children:A.isValidElement(o)?A.cloneElement(o,void 0,a):null})}return p.jsx(H3,{...r,ref:e,children:n})});uf.displayName="Slot";var H3=A.forwardRef((t,e)=>{const{children:n,...r}=t;if(A.isValidElement(n)){const i=mme(n),s=pme(r,n.props);return n.type!==A.Fragment&&(s.ref=e?VE(e,i):i),A.cloneElement(n,s)}return A.Children.count(n)>1?A.Children.only(null):null});H3.displayName="SlotClone";var cW=({children:t})=>p.jsx(p.Fragment,{children:t});function fme(t){return A.isValidElement(t)&&t.type===cW}function pme(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function mme(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var gme=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],vn=gme.reduce((t,e)=>{const n=A.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?uf:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(a,{...o,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function uW(t,e){t&&Vm.flushSync(()=>t.dispatchEvent(e))}function bme(t,e=globalThis?.document){const n=ii(t);A.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var yme="DismissableLayer",z3="dismissableLayer.update",vme="dismissableLayer.pointerDownOutside",xme="dismissableLayer.focusOutside",xM,hW=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),lv=A.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=A.useContext(hW),[u,h]=A.useState(null),d=u?.ownerDocument??globalThis?.document,[,f]=A.useState({}),m=Wn(e,k=>h(k)),g=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(b),v=u?g.indexOf(u):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,w=v>=y,S=Sme(k=>{const _=k.target,L=[...c.branches].some(R=>R.contains(_));!w||L||(i?.(k),o?.(k),k.defaultPrevented||a?.())},d),E=Eme(k=>{const _=k.target;[...c.branches].some(R=>R.contains(_))||(s?.(k),o?.(k),k.defaultPrevented||a?.())},d);return bme(k=>{v===c.layers.size-1&&(r?.(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},d),A.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(xM=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),_M(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=xM)}},[u,d,n,c]),A.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),_M())},[u,c]),A.useEffect(()=>{const k=()=>f({});return document.addEventListener(z3,k),()=>document.removeEventListener(z3,k)},[]),p.jsx(vn.div,{...l,ref:m,style:{pointerEvents:x?w?"auto":"none":void 0,...t.style},onFocusCapture:Mt(t.onFocusCapture,E.onFocusCapture),onBlurCapture:Mt(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Mt(t.onPointerDownCapture,S.onPointerDownCapture)})});lv.displayName=yme;var _me="DismissableLayerBranch",wme=A.forwardRef((t,e)=>{const n=A.useContext(hW),r=A.useRef(null),i=Wn(e,r);return A.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),p.jsx(vn.div,{...t,ref:i})});wme.displayName=_me;function Sme(t,e=globalThis?.document){const n=ii(t),r=A.useRef(!1),i=A.useRef(()=>{});return A.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){dW(vme,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Eme(t,e=globalThis?.document){const n=ii(t),r=A.useRef(!1);return A.useEffect(()=>{const i=s=>{s.target&&!r.current&&dW(xme,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function _M(){const t=new CustomEvent(z3);document.dispatchEvent(t)}function dW(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?uW(i,s):i.dispatchEvent(s)}var EC="focusScope.autoFocusOnMount",kC="focusScope.autoFocusOnUnmount",wM={bubbles:!1,cancelable:!0},kme="FocusScope",WE=A.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=A.useState(null),c=ii(i),u=ii(s),h=A.useRef(null),d=Wn(e,g=>l(g)),f=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(r){let g=function(x){if(f.paused||!a)return;const w=x.target;a.contains(w)?h.current=w:Lu(h.current,{select:!0})},b=function(x){if(f.paused||!a)return;const w=x.relatedTarget;w!==null&&(a.contains(w)||Lu(h.current,{select:!0}))},y=function(x){if(document.activeElement===document.body)for(const S of x)S.removedNodes.length>0&&Lu(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const v=new MutationObserver(y);return a&&v.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),v.disconnect()}}},[r,a,f.paused]),A.useEffect(()=>{if(a){EM.add(f);const g=document.activeElement;if(!a.contains(g)){const y=new CustomEvent(EC,wM);a.addEventListener(EC,c),a.dispatchEvent(y),y.defaultPrevented||(Cme(Lme(fW(a)),{select:!0}),document.activeElement===g&&Lu(a))}return()=>{a.removeEventListener(EC,c),setTimeout(()=>{const y=new CustomEvent(kC,wM);a.addEventListener(kC,u),a.dispatchEvent(y),y.defaultPrevented||Lu(g??document.body,{select:!0}),a.removeEventListener(kC,u),EM.remove(f)},0)}}},[a,c,u,f]);const m=A.useCallback(g=>{if(!n&&!r||f.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,y=document.activeElement;if(b&&y){const v=g.currentTarget,[x,w]=Tme(v);x&&w?!g.shiftKey&&y===w?(g.preventDefault(),n&&Lu(x,{select:!0})):g.shiftKey&&y===x&&(g.preventDefault(),n&&Lu(w,{select:!0})):y===v&&g.preventDefault()}},[n,r,f.paused]);return p.jsx(vn.div,{tabIndex:-1,...o,ref:d,onKeyDown:m})});WE.displayName=kme;function Cme(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Lu(r,{select:e}),document.activeElement!==n)return}function Tme(t){const e=fW(t),n=SM(e,t),r=SM(e.reverse(),t);return[n,r]}function fW(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function SM(t,e){for(const n of t)if(!Ame(n,{upTo:e}))return n}function Ame(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Pme(t){return t instanceof HTMLInputElement&&"select"in t}function Lu(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Pme(t)&&e&&t.select()}}var EM=Nme();function Nme(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=kM(t,e),t.unshift(e)},remove(e){t=kM(t,e),t[0]?.resume()}}}function kM(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Lme(t){return t.filter(e=>e.tagName!=="A")}var Rme="Portal",cv=A.forwardRef((t,e)=>{const{container:n,...r}=t,[i,s]=A.useState(!1);Xc(()=>s(!0),[]);const o=n||i&&globalThis?.document?.body;return o?kae.createPortal(p.jsx(vn.div,{...r,ref:e}),o):null});cv.displayName=Rme;function Ime(t,e){return A.useReducer((n,r)=>e[n][r]??n,t)}var Fi=t=>{const{present:e,children:n}=t,r=Ome(e),i=typeof n=="function"?n({present:r.isPresent}):A.Children.only(n),s=Wn(r.ref,Dme(i));return typeof n=="function"||r.isPresent?A.cloneElement(i,{ref:s}):null};Fi.displayName="Presence";function Ome(t){const[e,n]=A.useState(),r=A.useRef({}),i=A.useRef(t),s=A.useRef("none"),o=t?"mounted":"unmounted",[a,l]=Ime(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const c=h_(r.current);s.current=a==="mounted"?c:"none"},[a]),Xc(()=>{const c=r.current,u=i.current;if(u!==t){const d=s.current,f=h_(c);t?l("MOUNT"):f==="none"||c?.display==="none"?l("UNMOUNT"):l(u&&d!==f?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Xc(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,h=f=>{const g=h_(r.current).includes(f.animationName);if(f.target===e&&g&&(l("ANIMATION_END"),!i.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},d=f=>{f.target===e&&(s.current=h_(r.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function h_(t){return t?.animationName||"none"}function Dme(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var CC=0;function BL(){A.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??CM()),document.body.insertAdjacentElement("beforeend",t[1]??CM()),CC++,()=>{CC===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),CC--}},[])}function CM(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Pl=function(){return Pl=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Pl.apply(this,arguments)};function pW(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Mme(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Vw="right-scroll-bar-position",Ww="width-before-scroll-bar",jme="with-scroll-bars-hidden",Fme="--removed-body-scroll-bar-size";function TC(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Bme(t,e){var n=A.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var Ume=typeof window<"u"?A.useLayoutEffect:A.useEffect,TM=new WeakMap;function $me(t,e){var n=Bme(null,function(r){return t.forEach(function(i){return TC(i,r)})});return Ume(function(){var r=TM.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||TC(a,null)}),s.forEach(function(a){i.has(a)||TC(a,o)})}TM.set(n,t)},[t]),n}function Hme(t){return t}function zme(t,e){e===void 0&&(e=Hme);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return i}function Vme(t){t===void 0&&(t={});var e=zme(null);return e.options=Pl({async:!0,ssr:!1},t),e}var mW=function(t){var e=t.sideCar,n=pW(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return A.createElement(r,Pl({},n))};mW.isSideCarExport=!0;function Wme(t,e){return t.useMedium(e),mW}var gW=Vme(),AC=function(){},GE=A.forwardRef(function(t,e){var n=A.useRef(null),r=A.useState({onScrollCapture:AC,onWheelCapture:AC,onTouchMoveCapture:AC}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,h=t.shards,d=t.sideCar,f=t.noIsolation,m=t.inert,g=t.allowPinchZoom,b=t.as,y=b===void 0?"div":b,v=t.gapMode,x=pW(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,S=$me([n,e]),E=Pl(Pl({},x),i);return A.createElement(A.Fragment,null,u&&A.createElement(w,{sideCar:gW,removeScrollBar:c,shards:h,noIsolation:f,inert:m,setCallbacks:s,allowPinchZoom:!!g,lockRef:n,gapMode:v}),o?A.cloneElement(A.Children.only(a),Pl(Pl({},E),{ref:S})):A.createElement(y,Pl({},E,{className:l,ref:S}),a))});GE.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};GE.classNames={fullWidth:Ww,zeroRight:Vw};var Gme=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function qme(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Gme();return e&&t.setAttribute("nonce",e),t}function Kme(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Yme(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Xme=function(){var t=0,e=null;return{add:function(n){t==0&&(e=qme())&&(Kme(e,n),Yme(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Zme=function(){var t=Xme();return function(e,n){A.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},bW=function(){var t=Zme(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},Jme={left:0,top:0,right:0,gap:0},PC=function(t){return parseInt(t||"",10)||0},Qme=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[PC(n),PC(r),PC(i)]},ege=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Jme;var e=Qme(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},tge=bW(),gm="data-scroll-locked",nge=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(jme,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(gm,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Vw,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Ww,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Vw," .").concat(Vw,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ww," .").concat(Ww,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(gm,`] {
    `).concat(Fme,": ").concat(a,`px;
  }
`)},AM=function(){var t=parseInt(document.body.getAttribute(gm)||"0",10);return isFinite(t)?t:0},rge=function(){A.useEffect(function(){return document.body.setAttribute(gm,(AM()+1).toString()),function(){var t=AM()-1;t<=0?document.body.removeAttribute(gm):document.body.setAttribute(gm,t.toString())}},[])},ige=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;rge();var s=A.useMemo(function(){return ege(i)},[i]);return A.createElement(tge,{styles:nge(s,!e,i,n?"":"!important")})},V3=!1;if(typeof window<"u")try{var d_=Object.defineProperty({},"passive",{get:function(){return V3=!0,!0}});window.addEventListener("test",d_,d_),window.removeEventListener("test",d_,d_)}catch{V3=!1}var Ap=V3?{passive:!1}:!1,sge=function(t){return t.tagName==="TEXTAREA"},yW=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!sge(t)&&n[e]==="visible")},oge=function(t){return yW(t,"overflowY")},age=function(t){return yW(t,"overflowX")},PM=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=vW(t,r);if(i){var s=xW(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},lge=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},cge=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},vW=function(t,e){return t==="v"?oge(e):age(e)},xW=function(t,e){return t==="v"?lge(e):cge(e)},uge=function(t,e){return t==="h"&&e==="rtl"?-1:1},hge=function(t,e,n,r,i){var s=uge(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,u=o>0,h=0,d=0;do{var f=xW(t,a),m=f[0],g=f[1],b=f[2],y=g-b-s*m;(m||y)&&vW(t,a)&&(h+=y,d+=m),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(h)<1||!u&&Math.abs(d)<1)&&(c=!0),c},f_=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},NM=function(t){return[t.deltaX,t.deltaY]},LM=function(t){return t&&"current"in t?t.current:t},dge=function(t,e){return t[0]===e[0]&&t[1]===e[1]},fge=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},pge=0,Pp=[];function mge(t){var e=A.useRef([]),n=A.useRef([0,0]),r=A.useRef(),i=A.useState(pge++)[0],s=A.useState(bW)[0],o=A.useRef(t);A.useEffect(function(){o.current=t},[t]),A.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var g=Mme([t.lockRef.current],(t.shards||[]).map(LM),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=A.useCallback(function(g,b){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var y=f_(g),v=n.current,x="deltaX"in g?g.deltaX:v[0]-y[0],w="deltaY"in g?g.deltaY:v[1]-y[1],S,E=g.target,k=Math.abs(x)>Math.abs(w)?"h":"v";if("touches"in g&&k==="h"&&E.type==="range")return!1;var _=PM(k,E);if(!_)return!0;if(_?S=k:(S=k==="v"?"h":"v",_=PM(k,E)),!_)return!1;if(!r.current&&"changedTouches"in g&&(x||w)&&(r.current=S),!S)return!0;var L=r.current||S;return hge(L,b,g,L==="h"?x:w)},[]),l=A.useCallback(function(g){var b=g;if(!(!Pp.length||Pp[Pp.length-1]!==s)){var y="deltaY"in b?NM(b):f_(b),v=e.current.filter(function(S){return S.name===b.type&&(S.target===b.target||b.target===S.shadowParent)&&dge(S.delta,y)})[0];if(v&&v.should){b.cancelable&&b.preventDefault();return}if(!v){var x=(o.current.shards||[]).map(LM).filter(Boolean).filter(function(S){return S.contains(b.target)}),w=x.length>0?a(b,x[0]):!o.current.noIsolation;w&&b.cancelable&&b.preventDefault()}}},[]),c=A.useCallback(function(g,b,y,v){var x={name:g,delta:b,target:y,should:v,shadowParent:gge(y)};e.current.push(x),setTimeout(function(){e.current=e.current.filter(function(w){return w!==x})},1)},[]),u=A.useCallback(function(g){n.current=f_(g),r.current=void 0},[]),h=A.useCallback(function(g){c(g.type,NM(g),g.target,a(g,t.lockRef.current))},[]),d=A.useCallback(function(g){c(g.type,f_(g),g.target,a(g,t.lockRef.current))},[]);A.useEffect(function(){return Pp.push(s),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:d}),document.addEventListener("wheel",l,Ap),document.addEventListener("touchmove",l,Ap),document.addEventListener("touchstart",u,Ap),function(){Pp=Pp.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,Ap),document.removeEventListener("touchmove",l,Ap),document.removeEventListener("touchstart",u,Ap)}},[]);var f=t.removeScrollBar,m=t.inert;return A.createElement(A.Fragment,null,m?A.createElement(s,{styles:fge(i)}):null,f?A.createElement(ige,{gapMode:t.gapMode}):null)}function gge(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const bge=Wme(gW,mge);var qE=A.forwardRef(function(t,e){return A.createElement(GE,Pl({},t,{ref:e,sideCar:bge}))});qE.classNames=GE.classNames;var yge=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Np=new WeakMap,p_=new WeakMap,m_={},NC=0,_W=function(t){return t&&(t.host||_W(t.parentNode))},vge=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=_W(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},xge=function(t,e,n,r){var i=vge(e,Array.isArray(t)?t:[t]);m_[n]||(m_[n]=new WeakMap);var s=m_[n],o=[],a=new Set,l=new Set(i),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};i.forEach(c);var u=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(d){if(a.has(d))u(d);else try{var f=d.getAttribute(r),m=f!==null&&f!=="false",g=(Np.get(d)||0)+1,b=(s.get(d)||0)+1;Np.set(d,g),s.set(d,b),o.push(d),g===1&&m&&p_.set(d,!0),b===1&&d.setAttribute(n,"true"),m||d.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",d,y)}})};return u(e),a.clear(),NC++,function(){o.forEach(function(h){var d=Np.get(h)-1,f=s.get(h)-1;Np.set(h,d),s.set(h,f),d||(p_.has(h)||h.removeAttribute(r),p_.delete(h)),f||h.removeAttribute(n)}),NC--,NC||(Np=new WeakMap,Np=new WeakMap,p_=new WeakMap,m_={})}},UL=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=yge(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),xge(r,i,n,"aria-hidden")):function(){return null}},$L="Dialog",[wW,iit]=ca($L),[_ge,Wa]=wW($L),SW=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=A.useRef(null),l=A.useRef(null),[c=!1,u]=If({prop:r,defaultProp:i,onChange:s});return p.jsx(_ge,{scope:e,triggerRef:a,contentRef:l,contentId:Hc(),titleId:Hc(),descriptionId:Hc(),open:c,onOpenChange:u,onOpenToggle:A.useCallback(()=>u(h=>!h),[u]),modal:o,children:n})};SW.displayName=$L;var EW="DialogTrigger",kW=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Wa(EW,n),s=Wn(e,i.triggerRef);return p.jsx(vn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":VL(i.open),...r,ref:s,onClick:Mt(t.onClick,i.onOpenToggle)})});kW.displayName=EW;var HL="DialogPortal",[wge,CW]=wW(HL,{forceMount:void 0}),TW=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Wa(HL,e);return p.jsx(wge,{scope:e,forceMount:n,children:A.Children.map(r,o=>p.jsx(Fi,{present:n||s.open,children:p.jsx(cv,{asChild:!0,container:i,children:o})}))})};TW.displayName=HL;var G2="DialogOverlay",AW=A.forwardRef((t,e)=>{const n=CW(G2,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Wa(G2,t.__scopeDialog);return s.modal?p.jsx(Fi,{present:r||s.open,children:p.jsx(Sge,{...i,ref:e})}):null});AW.displayName=G2;var Sge=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Wa(G2,n);return p.jsx(qE,{as:uf,allowPinchZoom:!0,shards:[i.contentRef],children:p.jsx(vn.div,{"data-state":VL(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),hf="DialogContent",PW=A.forwardRef((t,e)=>{const n=CW(hf,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Wa(hf,t.__scopeDialog);return p.jsx(Fi,{present:r||s.open,children:s.modal?p.jsx(Ege,{...i,ref:e}):p.jsx(kge,{...i,ref:e})})});PW.displayName=hf;var Ege=A.forwardRef((t,e)=>{const n=Wa(hf,t.__scopeDialog),r=A.useRef(null),i=Wn(e,n.contentRef,r);return A.useEffect(()=>{const s=r.current;if(s)return UL(s)},[]),p.jsx(NW,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Mt(t.onCloseAutoFocus,s=>{s.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Mt(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:Mt(t.onFocusOutside,s=>s.preventDefault())})}),kge=A.forwardRef((t,e)=>{const n=Wa(hf,t.__scopeDialog),r=A.useRef(!1),i=A.useRef(!1);return p.jsx(NW,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{t.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||n.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{t.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;n.triggerRef.current?.contains(o)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),NW=A.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=Wa(hf,n),l=A.useRef(null),c=Wn(e,l);return BL(),p.jsxs(p.Fragment,{children:[p.jsx(WE,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:p.jsx(lv,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":VL(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(Cge,{titleId:a.titleId}),p.jsx(Age,{contentRef:l,descriptionId:a.descriptionId})]})]})}),zL="DialogTitle",LW=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Wa(zL,n);return p.jsx(vn.h2,{id:i.titleId,...r,ref:e})});LW.displayName=zL;var RW="DialogDescription",IW=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Wa(RW,n);return p.jsx(vn.p,{id:i.descriptionId,...r,ref:e})});IW.displayName=RW;var OW="DialogClose",DW=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Wa(OW,n);return p.jsx(vn.button,{type:"button",...r,ref:e,onClick:Mt(t.onClick,()=>i.onOpenChange(!1))})});DW.displayName=OW;function VL(t){return t?"open":"closed"}var MW="DialogTitleWarning",[sit,jW]=lme(MW,{contentName:hf,titleName:zL,docsSlug:"dialog"}),Cge=({titleId:t})=>{const e=jW(MW),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return A.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Tge="DialogDescriptionWarning",Age=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${jW(Tge).contentName}}.`;return A.useEffect(()=>{const i=t.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},xo=SW,Pge=kW,Gd=TW,qd=AW,Kd=PW,WL=LW,Nge=IW,gh=DW;function Ae(...t){let e="";for(const n of t)e=FW(e,Lge(n));return e}function Lge(t){if(typeof t=="string"||typeof t=="number")return t;if(typeof t!="object")return"";if(Array.isArray(t))return Ae(...t);let e="";for(const n in t)t[n]&&(e=FW(e,n));return e}function FW(t,e){return e?t?t+" "+e:t+e:t}const So=Rf(.4,0,.2,1),gi=A.memo(A.forwardRef(({icon:t,size:e="xl",className:n,iconClassName:r,disabledClassName:i,disabled:s=!1,title:o,onClick:a,children:l},c)=>p.jsx("button",{ref:c,className:Ae("flex items-center text-bolt-elements-item-contentDefault bg-transparent enabled:hover:text-bolt-elements-item-contentActive rounded-md p-1 enabled:hover:bg-bolt-elements-item-backgroundActive disabled:cursor-not-allowed",{[Ae("opacity-30",i)]:s},n),title:o,disabled:s,onClick:u=>{s||a?.(u)},children:l||p.jsx("div",{className:Ae(t,Rge(e),r)})})));function Rge(t){return t==="sm"?"text-sm":t==="md"?"text-md":t==="lg"?"text-lg":t==="xl"?"text-xl":"text-2xl"}const Yd=A.memo(({type:t,children:e,onClick:n,disabled:r})=>p.jsx("button",{className:Ae("inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm transition-colors",{"bg-blue-500 text-white hover:bg-blue-600 dark:bg-blue-500 dark:hover:bg-blue-600":t==="primary","bg-transparent text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-gray-100":t==="secondary","bg-transparent text-red-500 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-500/10":t==="danger"}),onClick:n,disabled:r,children:e})),Zc=A.memo(({className:t,children:e,...n})=>p.jsx(WL,{className:Ae("text-lg font-medium text-bolt-elements-textPrimary","flex items-center gap-2",t),...n,children:e})),BW=A.memo(({className:t,children:e,...n})=>p.jsx(Nge,{className:Ae("text-sm text-bolt-elements-textSecondary","mt-1",t),...n,children:e})),q2={duration:.15,ease:So},Ige={closed:{opacity:0,transition:q2},open:{opacity:1,transition:q2}},Oge={closed:{x:"-50%",y:"-40%",scale:.96,opacity:0,transition:q2},open:{x:"-50%",y:"-50%",scale:1,opacity:1,transition:q2}},df=A.memo(({children:t,className:e,showCloseButton:n=!0,onClose:r,onBackdrop:i})=>p.jsxs(Gd,{children:[p.jsx(qd,{asChild:!0,children:p.jsx(at.div,{className:Ae("fixed inset-0 z-[9999]","bg-[#FAFAFA]/80 dark:bg-[#0A0A0A]/80","backdrop-blur-[2px]"),initial:"closed",animate:"open",exit:"closed",variants:Ige,onClick:i})}),p.jsx(Kd,{asChild:!0,children:p.jsx(at.div,{className:Ae("fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2","bg-[#FAFAFA] dark:bg-[#0A0A0A]","rounded-lg shadow-lg","border border-[#E5E5E5] dark:border-[#1A1A1A]","z-[9999] w-[520px]",e),initial:"closed",animate:"open",exit:"closed",variants:Oge,children:p.jsxs("div",{className:"flex flex-col",children:[t,n&&p.jsx(gh,{asChild:!0,onClick:r,children:p.jsx(gi,{icon:"i-ph:x",className:"absolute top-3 right-3 text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary"})})]})})})]})),Dge=A.memo(({className:t})=>{const e=Ot(R1),[n,r]=A.useState(!1);return A.useEffect(()=>{r(!0)},[]),n&&p.jsx(gi,{className:t,icon:e==="dark"?"i-ph-sun-dim-duotone":"i-ph-moon-stars-duotone",size:"xl",title:"Toggle Theme",onClick:OH})});function Mge(t){const e=A.useRef({value:t,previous:t});return A.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function UW(t){const[e,n]=A.useState(void 0);return Xc(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var GL="Switch",[jge,oit]=ca(GL),[Fge,Bge]=jge(GL),qL=A.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...h}=t,[d,f]=A.useState(null),m=Wn(e,x=>f(x)),g=A.useRef(!1),b=d?u||!!d.closest("form"):!0,[y=!1,v]=If({prop:i,defaultProp:s,onChange:c});return p.jsxs(Fge,{scope:n,checked:y,disabled:a,children:[p.jsx(vn.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":zW(y),"data-disabled":a?"":void 0,disabled:a,value:l,...h,ref:m,onClick:Mt(t.onClick,x=>{v(w=>!w),b&&(g.current=x.isPropagationStopped(),g.current||x.stopPropagation())})}),b&&p.jsx(Uge,{control:d,bubbles:!g.current,name:r,value:l,checked:y,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});qL.displayName=GL;var $W="SwitchThumb",HW=A.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=Bge($W,n);return p.jsx(vn.span,{"data-state":zW(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});HW.displayName=$W;var Uge=t=>{const{control:e,checked:n,bubbles:r=!0,...i}=t,s=A.useRef(null),o=Mge(n),a=UW(e);return A.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==n&&h){const d=new Event("click",{bubbles:r});h.call(l,n),l.dispatchEvent(d)}},[o,n,r]),p.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:s,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function zW(t){return t?"checked":"unchecked"}var $ge=qL,Hge=HW;const Zo=A.memo(({className:t,onCheckedChange:e,checked:n})=>p.jsx($ge,{className:Ae("relative h-6 w-11 cursor-pointer rounded-full bg-bolt-elements-button-primary-background","transition-colors duration-200 ease-in-out","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50","data-[state=checked]:bg-bolt-elements-item-contentAccent",t),checked:n,onCheckedChange:r=>e?.(r),children:p.jsx(Hge,{className:Ae("block h-5 w-5 rounded-full bg-white","shadow-lg shadow-black/20","transition-transform duration-200 ease-in-out","translate-x-0.5","data-[state=checked]:translate-x-[1.375rem]","will-change-transform")})})),zge={profile:"i-ph:user-circle-fill",settings:"i-ph:gear-six-fill",notifications:"i-ph:bell-fill",features:"i-ph:star-fill",data:"i-ph:database-fill","cloud-providers":"i-ph:cloud-fill","local-providers":"i-ph:desktop-fill","service-status":"i-ph:activity-bold",connection:"i-ph:wifi-high-fill",debug:"i-ph:bug-fill","event-logs":"i-ph:list-bullets-fill",update:"i-ph:arrow-clockwise-fill","task-manager":"i-ph:chart-line-fill","tab-management":"i-ph:squares-four-fill"},Jb={profile:"Profile",settings:"Settings",notifications:"Notifications",features:"Features",data:"Data Management","cloud-providers":"Cloud Providers","local-providers":"Local Providers","service-status":"Service Status",connection:"Connection",debug:"Debug","event-logs":"Event Logs",update:"Updates","task-manager":"Task Manager","tab-management":"Tab Management"},Zm=[{id:"features",visible:!0,window:"user",order:0},{id:"data",visible:!0,window:"user",order:1},{id:"cloud-providers",visible:!0,window:"user",order:2},{id:"local-providers",visible:!0,window:"user",order:3},{id:"connection",visible:!0,window:"user",order:4},{id:"notifications",visible:!0,window:"user",order:5},{id:"event-logs",visible:!0,window:"user",order:6},{id:"profile",visible:!1,window:"user",order:7},{id:"settings",visible:!1,window:"user",order:8},{id:"task-manager",visible:!1,window:"user",order:9},{id:"service-status",visible:!1,window:"user",order:10},{id:"debug",visible:!1,window:"user",order:11},{id:"update",visible:!1,window:"user",order:12},{id:"features",visible:!0,window:"developer",order:0},{id:"data",visible:!0,window:"developer",order:1},{id:"cloud-providers",visible:!0,window:"developer",order:2},{id:"local-providers",visible:!0,window:"developer",order:3},{id:"connection",visible:!0,window:"developer",order:4},{id:"notifications",visible:!0,window:"developer",order:5},{id:"event-logs",visible:!0,window:"developer",order:6},{id:"profile",visible:!0,window:"developer",order:7},{id:"settings",visible:!0,window:"developer",order:8},{id:"task-manager",visible:!0,window:"developer",order:9},{id:"service-status",visible:!0,window:"developer",order:10},{id:"debug",visible:!0,window:"developer",order:11},{id:"update",visible:!0,window:"developer",order:12}],RM=t=>{let e;const n=new Set,r=(c,u)=>{const h=typeof c=="function"?c(e):c;if(!Object.is(h,e)){const d=e;e=u??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(f=>f(e,d))}},i=()=>e,a={setState:r,getState:i,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=e=t(r,i,a);return a},Vge=t=>t?RM(t):RM,Wge=t=>t;function VW(t,e=Wge){const n=ut.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return ut.useDebugValue(n),n}const IM=t=>{const e=Vge(t),n=r=>VW(e,r);return Object.assign(n,e),n},WW=t=>t?IM(t):IM,Qb=["Ollama","LMStudio","OpenAILike"],GW=["OpenAILike","LMStudio","Ollama"],Gge=Rh({toggleTheme:{key:"d",metaKey:!0,altKey:!0,shiftKey:!0,action:()=>OH(),description:"Toggle theme",isPreventDefault:!0},toggleTerminal:{key:"`",ctrlOrMetaKey:!0,action:()=>{},description:"Toggle terminal",isPreventDefault:!0}}),qW="provider_settings",ey=typeof window<"u",qge=()=>{const t={};if(tL.forEach(e=>{t[e.name]={...e,settings:{enabled:!GW.includes(e.name)}}}),ey){const e=localStorage.getItem(qW);if(e)try{const n=JSON.parse(e);Object.entries(n).forEach(([r,i])=>{t[r]&&(t[r].settings=i.settings)})}catch(n){console.error("Error parsing saved provider settings:",n)}}return t},e1=Rh(qge()),Kge=(t,e)=>{const n=e1.get(),r={...n[t],settings:{...n[t].settings,...e}};e1.setKey(t,r);const i=e1.get();localStorage.setItem(qW,JSON.stringify(i))},OM=qn(!1),Bo={LATEST_BRANCH:"isLatestBranch",AUTO_SELECT_TEMPLATE:"autoSelectTemplate",CONTEXT_OPTIMIZATION:"contextOptimizationEnabled",EVENT_LOGS:"isEventLogsEnabled",PROMPT_ID:"promptId",DEVELOPER_MODE:"isDeveloperMode"},Yge=()=>{const t=(e,n)=>{if(!ey)return n;const r=localStorage.getItem(e);if(r===null)return n;try{return JSON.parse(r)}catch{return n}};return{latestBranch:t(Bo.LATEST_BRANCH,!1),autoSelectTemplate:t(Bo.AUTO_SELECT_TEMPLATE,!0),contextOptimization:t(Bo.CONTEXT_OPTIMIZATION,!0),eventLogs:t(Bo.EVENT_LOGS,!0),promptId:ey&&localStorage.getItem(Bo.PROMPT_ID)||"default",developerMode:t(Bo.DEVELOPER_MODE,!1)}},Dg=Yge(),KW=qn(Dg.latestBranch),YW=qn(Dg.autoSelectTemplate),XW=qn(Dg.contextOptimization),ZW=qn(Dg.eventLogs),JW=qn(Dg.promptId),Xge=t=>{KW.set(t),localStorage.setItem(Bo.LATEST_BRANCH,JSON.stringify(t))},Zge=t=>{YW.set(t),localStorage.setItem(Bo.AUTO_SELECT_TEMPLATE,JSON.stringify(t))},Jge=t=>{XW.set(t),localStorage.setItem(Bo.CONTEXT_OPTIMIZATION,JSON.stringify(t))},Qge=t=>{ZW.set(t),localStorage.setItem(Bo.EVENT_LOGS,JSON.stringify(t))},e0e=t=>{JW.set(t),localStorage.setItem(Bo.PROMPT_ID,t)},t0e=()=>{const t={userTabs:Zm.filter(e=>e.window==="user"),developerTabs:Zm.filter(e=>e.window==="developer")};if(!ey)return t;try{const e=localStorage.getItem("bolt_tab_configuration");if(!e)return t;const n=JSON.parse(e);return!n?.userTabs||!n?.developerTabs?t:{userTabs:n.userTabs.filter(r=>r.window==="user"),developerTabs:n.developerTabs.filter(r=>r.window==="developer")}}catch(e){return console.warn("Failed to parse tab configuration:",e),t}},oh=Rh(t0e()),n0e=t=>{const e=oh.get();console.log("Current tab configuration before update:",e);const r=t.window==="user"?"userTabs":"developerTabs",i=e[r].map(o=>o.id===t.id?{...t}:o);i.find(o=>o.id===t.id)||i.push(t);const s={...e,[r]:i};console.log("New tab configuration after update:",s),oh.set(s),Zr.set("tabConfiguration",JSON.stringify(s),{expires:365,path:"/",sameSite:"strict"})},QW=()=>{const t={userTabs:Zm.filter(e=>e.window==="user"),developerTabs:Zm.filter(e=>e.window==="developer")};oh.set(t),localStorage.setItem("bolt_tab_configuration",JSON.stringify(t))},eG=qn(Dg.developerMode),r0e=t=>{eG.set(t),ey&&localStorage.setItem(Bo.DEVELOPER_MODE,JSON.stringify(t))},i0e=WW(t=>({isOpen:!1,selectedTab:"user",openSettings:()=>{t({isOpen:!0,selectedTab:"user"})},closeSettings:()=>{t({isOpen:!1,selectedTab:"user"})},setSelectedTab:e=>{t({selectedTab:e})}}));var tG={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},DM=ut.createContext&&ut.createContext(tG),s0e=["attr","size","title"];function o0e(t,e){if(t==null)return{};var n=a0e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function a0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function K2(){return K2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},K2.apply(this,arguments)}function MM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Y2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MM(Object(n),!0).forEach(function(r){l0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function l0e(t,e,n){return e=c0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c0e(t){var e=u0e(t,"string");return typeof e=="symbol"?e:e+""}function u0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nG(t){return t&&t.map((e,n)=>ut.createElement(e.tag,Y2({key:n},e.attr),nG(e.child)))}function li(t){return e=>ut.createElement(h0e,K2({attr:Y2({},t.attr)},e),nG(t.child))}function h0e(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=o0e(t,s0e),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),ut.createElement("svg",K2({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Y2(Y2({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&ut.createElement("title",null,s),t.children)};return DM!==void 0?ut.createElement(DM.Consumer,null,n=>e(n)):e(tG)}function d0e(t){return li({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 12h4.5l1.5 -6l4 12l2 -9l1.5 3h4.5"},child:[]}]})(t)}function rG(t){return li({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"},child:[]},{tag:"path",attr:{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"},child:[]},{tag:"path",attr:{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"},child:[]},{tag:"path",attr:{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"},child:[]},{tag:"path",attr:{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"},child:[]},{tag:"path",attr:{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"},child:[]}]})(t)}function f0e(t){return li({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35"},child:[]},{tag:"path",attr:{d:"M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946"},child:[]},{tag:"path",attr:{d:"M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348"},child:[]},{tag:"path",attr:{d:"M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45"},child:[]},{tag:"path",attr:{d:"M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946"},child:[]},{tag:"path",attr:{d:"M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42"},child:[]}]})(t)}function iG(t){return li({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6.657 16c-2.572 0 -4.657 -2.007 -4.657 -4.483c0 -2.475 2.085 -4.482 4.657 -4.482c.393 -1.762 1.794 -3.2 3.675 -3.773c1.88 -.572 3.956 -.193 5.444 1c1.488 1.19 2.162 3.007 1.77 4.769h.99c1.913 0 3.464 1.56 3.464 3.486c0 1.927 -1.551 3.487 -3.465 3.487h-11.878"},child:[]},{tag:"path",attr:{d:"M12 16v5"},child:[]},{tag:"path",attr:{d:"M16 16v4a1 1 0 0 0 1 1h4"},child:[]},{tag:"path",attr:{d:"M8 16v4a1 1 0 0 1 -1 1h-4"},child:[]}]})(t)}function p0e(t){return li({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"},child:[]},{tag:"path",attr:{d:"M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"},child:[]},{tag:"path",attr:{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"},child:[]},{tag:"path",attr:{d:"M14 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"},child:[]}]})(t)}const jM={profile:"i-ph:user-circle-fill",settings:"i-ph:gear-six-fill",notifications:"i-ph:bell-fill",features:"i-ph:star-fill",data:"i-ph:database-fill","cloud-providers":"i-ph:cloud-fill","local-providers":"i-ph:desktop-fill","service-status":"i-ph:activity-fill",connection:"i-ph:wifi-high-fill",debug:"i-ph:bug-fill","event-logs":"i-ph:list-bullets-fill",update:"i-ph:arrow-clockwise-fill","task-manager":"i-ph:chart-line-fill","tab-management":"i-ph:squares-four-fill"},Ru=["features","data","cloud-providers","local-providers","connection","notifications","event-logs"],Iu=["profile","settings","task-manager","service-status","debug","update"],m0e=[...Ru,...Iu],FM=new Set(["task-manager","service-status","update","local-providers"]),BM=()=>p.jsx("span",{className:"px-1.5 py-0.5 text-[10px] rounded-full bg-purple-500/10 text-purple-500 font-medium",children:"BETA"}),UM=()=>{const[t,e]=A.useState(""),n=Ot(oh),{setSelectedTab:r}=i0e(),i=(l,c)=>{if(!n.userTabs.find(f=>f.id===l)){const f={id:l,visible:c,window:"user",order:n.userTabs.length},m=[...n.userTabs,f];oh.set({...n,userTabs:m}),He.success(`Tab ${c?"enabled":"disabled"} successfully`);return}if(!(Ru.includes(l)||Iu.includes(l))&&c){He.error("This tab cannot be enabled in user mode");return}const d=n.userTabs.map(f=>f.id===l?{...f,visible:c}:f);oh.set({...n,userTabs:d}),He.success(`Tab ${c?"enabled":"disabled"} successfully`)},s=new Map(n.userTabs.map(l=>[l.id,l])),a=m0e.map(l=>s.get(l)||{id:l,visible:!1,window:"user",order:-1}).filter(l=>Jb[l.id].toLowerCase().includes(t.toLowerCase()));return A.useEffect(()=>()=>{r("user")},[r]),p.jsx("div",{className:"space-y-6",children:p.jsxs(at.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[p.jsxs("div",{className:"flex items-center justify-between gap-4 mt-8 mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:Ae("w-8 h-8 flex items-center justify-center rounded-lg","bg-bolt-elements-background-depth-3","text-purple-500"),children:p.jsx(p0e,{className:"w-5 h-5"})}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-md font-medium text-bolt-elements-textPrimary",children:"Tab Management"}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:"Configure visible tabs and their order"})]})]}),p.jsxs("div",{className:"relative w-64",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx("div",{className:"i-ph:magnifying-glass w-4 h-4 text-gray-400"})}),p.jsx("input",{type:"text",value:t,onChange:l=>e(l.target.value),placeholder:"Search tabs...",className:Ae("w-full pl-10 pr-4 py-2 rounded-lg","bg-bolt-elements-background-depth-2","border border-bolt-elements-borderColor","text-bolt-elements-textPrimary","placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-2 focus:ring-purple-500/30","transition-all duration-200")})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.some(l=>Ru.includes(l.id))&&p.jsxs("div",{className:"col-span-full flex items-center gap-2 mt-4 mb-2",children:[p.jsx("div",{className:"i-ph:star-fill w-4 h-4 text-purple-500"}),p.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Default Tabs"})]}),a.filter(l=>Ru.includes(l.id)).map((l,c)=>p.jsxs(at.div,{className:Ae("rounded-lg border bg-bolt-elements-background text-bolt-elements-textPrimary","bg-bolt-elements-background-depth-2","hover:bg-bolt-elements-background-depth-3","transition-all duration-200","relative overflow-hidden group"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:c*.1},whileHover:{scale:1.02},children:[p.jsx("div",{className:"absolute top-1 right-1.5 flex gap-1",children:p.jsx("span",{className:"px-1.5 py-0.25 text-xs rounded-full bg-purple-500/10 text-purple-500 font-medium mr-2",children:"Default"})}),p.jsxs("div",{className:"flex items-start gap-4 p-4",children:[p.jsx(at.div,{className:Ae("w-10 h-10 flex items-center justify-center rounded-xl","bg-bolt-elements-background-depth-3 group-hover:bg-bolt-elements-background-depth-4","transition-all duration-200",l.visible?"text-purple-500":"text-bolt-elements-textSecondary"),whileHover:{scale:1.1},whileTap:{scale:.9},children:p.jsx("div",{className:Ae("w-6 h-6","transition-transform duration-200","group-hover:rotate-12"),children:p.jsx("div",{className:Ae(jM[l.id],"w-full h-full")})})}),p.jsx("div",{className:"flex-1 min-w-0",children:p.jsxs("div",{className:"flex items-center justify-between gap-4",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary group-hover:text-purple-500 transition-colors",children:Jb[l.id]}),FM.has(l.id)&&p.jsx(BM,{})]}),p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:l.visible?"Visible in user mode":"Hidden in user mode"})]}),p.jsx(Zo,{checked:l.visible,onCheckedChange:u=>{!Ru.includes(l.id)&&!Iu.includes(l.id)||i(l.id,u)},className:Ae("data-[state=checked]:bg-purple-500 ml-4",{"opacity-50 pointer-events-none":!Ru.includes(l.id)&&!Iu.includes(l.id)})})]})})]}),p.jsx(at.div,{className:"absolute inset-0 border-2 border-purple-500/0 rounded-lg pointer-events-none",animate:{borderColor:l.visible?"rgba(168, 85, 247, 0.2)":"rgba(168, 85, 247, 0)",scale:l.visible?1:.98},transition:{duration:.2}})]},l.id)),a.some(l=>Iu.includes(l.id))&&p.jsxs("div",{className:"col-span-full flex items-center gap-2 mt-8 mb-2",children:[p.jsx("div",{className:"i-ph:plus-circle-fill w-4 h-4 text-blue-500"}),p.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Optional Tabs"})]}),a.filter(l=>Iu.includes(l.id)).map((l,c)=>p.jsxs(at.div,{className:Ae("rounded-lg border bg-bolt-elements-background text-bolt-elements-textPrimary","bg-bolt-elements-background-depth-2","hover:bg-bolt-elements-background-depth-3","transition-all duration-200","relative overflow-hidden group"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:c*.1},whileHover:{scale:1.02},children:[p.jsx("div",{className:"absolute top-1 right-1.5 flex gap-1",children:p.jsx("span",{className:"px-1.5 py-0.25 text-xs rounded-full bg-blue-500/10 text-blue-500 font-medium mr-2",children:"Optional"})}),p.jsxs("div",{className:"flex items-start gap-4 p-4",children:[p.jsx(at.div,{className:Ae("w-10 h-10 flex items-center justify-center rounded-xl","bg-bolt-elements-background-depth-3 group-hover:bg-bolt-elements-background-depth-4","transition-all duration-200",l.visible?"text-purple-500":"text-bolt-elements-textSecondary"),whileHover:{scale:1.1},whileTap:{scale:.9},children:p.jsx("div",{className:Ae("w-6 h-6","transition-transform duration-200","group-hover:rotate-12"),children:p.jsx("div",{className:Ae(jM[l.id],"w-full h-full")})})}),p.jsx("div",{className:"flex-1 min-w-0",children:p.jsxs("div",{className:"flex items-center justify-between gap-4",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary group-hover:text-purple-500 transition-colors",children:Jb[l.id]}),FM.has(l.id)&&p.jsx(BM,{})]}),p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:l.visible?"Visible in user mode":"Hidden in user mode"})]}),p.jsx(Zo,{checked:l.visible,onCheckedChange:u=>{!Ru.includes(l.id)&&!Iu.includes(l.id)||i(l.id,u)},className:Ae("data-[state=checked]:bg-purple-500 ml-4",{"opacity-50 pointer-events-none":!Ru.includes(l.id)&&!Iu.includes(l.id)})})]})})]}),p.jsx(at.div,{className:"absolute inset-0 border-2 border-purple-500/0 rounded-lg pointer-events-none",animate:{borderColor:l.visible?"rgba(168, 85, 247, 0.2)":"rgba(168, 85, 247, 0)",scale:l.visible?1:.98},transition:{duration:.2}})]},l.id))]})]})})},g0e=["top","right","bottom","left"],Jc=Math.min,Xi=Math.max,ty=Math.round,g_=Math.floor,ql=t=>({x:t,y:t}),b0e={left:"right",right:"left",bottom:"top",top:"bottom"},y0e={start:"end",end:"start"};function W3(t,e,n){return Xi(t,Jc(e,n))}function ec(t,e){return typeof t=="function"?t(e):t}function Qc(t){return t.split("-")[0]}function Mg(t){return t.split("-")[1]}function KL(t){return t==="x"?"y":"x"}function YL(t){return t==="y"?"height":"width"}function bh(t){return["top","bottom"].includes(Qc(t))?"y":"x"}function XL(t){return KL(bh(t))}function v0e(t,e,n){n===void 0&&(n=!1);const r=Mg(t),i=XL(t),s=YL(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=X2(o)),[o,X2(o)]}function x0e(t){const e=X2(t);return[G3(t),e,G3(e)]}function G3(t){return t.replace(/start|end/g,e=>y0e[e])}function _0e(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function w0e(t,e,n,r){const i=Mg(t);let s=_0e(Qc(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(G3)))),s}function X2(t){return t.replace(/left|right|bottom|top/g,e=>b0e[e])}function S0e(t){return{top:0,right:0,bottom:0,left:0,...t}}function sG(t){return typeof t!="number"?S0e(t):{top:t,right:t,bottom:t,left:t}}function Z2(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function $M(t,e,n){let{reference:r,floating:i}=t;const s=bh(e),o=XL(e),a=YL(o),l=Qc(e),c=s==="y",u=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let f;switch(l){case"top":f={x:u,y:r.y-i.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:h};break;case"left":f={x:r.x-i.width,y:h};break;default:f={x:r.x,y:r.y}}switch(Mg(e)){case"start":f[o]-=d*(n&&c?-1:1);break;case"end":f[o]+=d*(n&&c?-1:1);break}return f}const E0e=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:h}=$M(c,r,l),d=r,f={},m=0;for(let g=0;g<a.length;g++){const{name:b,fn:y}=a[g],{x:v,y:x,data:w,reset:S}=await y({x:u,y:h,initialPlacement:r,placement:d,strategy:i,middlewareData:f,rects:c,platform:o,elements:{reference:t,floating:e}});u=v??u,h=x??h,f={...f,[b]:{...f[b],...w}},S&&m<=50&&(m++,typeof S=="object"&&(S.placement&&(d=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):S.rects),{x:u,y:h}=$M(c,d,l)),g=-1)}return{x:u,y:h,placement:d,strategy:i,middlewareData:f}};async function Jm(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:d=!1,padding:f=0}=ec(e,t),m=sG(f),b=a[d?h==="floating"?"reference":"floating":h],y=Z2(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(b)))==null||n?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),v=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},S=Z2(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:x,strategy:l}):v);return{top:(y.top-S.top+m.top)/w.y,bottom:(S.bottom-y.bottom+m.bottom)/w.y,left:(y.left-S.left+m.left)/w.x,right:(S.right-y.right+m.right)/w.x}}const k0e=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=ec(t,e)||{};if(c==null)return{};const h=sG(u),d={x:n,y:r},f=XL(i),m=YL(f),g=await o.getDimensions(c),b=f==="y",y=b?"top":"left",v=b?"bottom":"right",x=b?"clientHeight":"clientWidth",w=s.reference[m]+s.reference[f]-d[f]-s.floating[m],S=d[f]-s.reference[f],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let k=E?E[x]:0;(!k||!await(o.isElement==null?void 0:o.isElement(E)))&&(k=a.floating[x]||s.floating[m]);const _=w/2-S/2,L=k/2-g[m]/2-1,R=Jc(h[y],L),C=Jc(h[v],L),P=R,O=k-g[m]-C,N=k/2-g[m]/2+_,H=W3(P,N,O),Q=!l.arrow&&Mg(i)!=null&&N!==H&&s.reference[m]/2-(N<P?R:C)-g[m]/2<0,X=Q?N<P?N-P:N-O:0;return{[f]:d[f]+X,data:{[f]:H,centerOffset:N-H-X,...Q&&{alignmentOffset:X}},reset:Q}}}),C0e=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...b}=ec(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Qc(i),v=bh(a),x=Qc(a)===a,w=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=d||(x||!g?[X2(a)]:x0e(a)),E=m!=="none";!d&&E&&S.push(...w0e(a,g,m,w));const k=[a,...S],_=await Jm(e,b),L=[];let R=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&L.push(_[y]),h){const N=v0e(i,o,w);L.push(_[N[0]],_[N[1]])}if(R=[...R,{placement:i,overflows:L}],!L.every(N=>N<=0)){var C,P;const N=(((C=s.flip)==null?void 0:C.index)||0)+1,H=k[N];if(H)return{data:{index:N,overflows:R},reset:{placement:H}};let Q=(P=R.filter(X=>X.overflows[0]<=0).sort((X,J)=>X.overflows[1]-J.overflows[1])[0])==null?void 0:P.placement;if(!Q)switch(f){case"bestFit":{var O;const X=(O=R.filter(J=>{if(E){const j=bh(J.placement);return j===v||j==="y"}return!0}).map(J=>[J.placement,J.overflows.filter(j=>j>0).reduce((j,F)=>j+F,0)]).sort((J,j)=>J[1]-j[1])[0])==null?void 0:O[0];X&&(Q=X);break}case"initialPlacement":Q=a;break}if(i!==Q)return{reset:{placement:Q}}}return{}}}};function HM(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function zM(t){return g0e.some(e=>t[e]>=0)}const T0e=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=ec(t,e);switch(r){case"referenceHidden":{const s=await Jm(e,{...i,elementContext:"reference"}),o=HM(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:zM(o)}}}case"escaped":{const s=await Jm(e,{...i,altBoundary:!0}),o=HM(s,n.floating);return{data:{escapedOffsets:o,escaped:zM(o)}}}default:return{}}}}};async function A0e(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Qc(n),a=Mg(n),l=bh(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,h=ec(e,t);let{mainAxis:d,crossAxis:f,alignmentAxis:m}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof m=="number"&&(f=a==="end"?m*-1:m),l?{x:f*u,y:d*c}:{x:d*c,y:f*u}}const P0e=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await A0e(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},N0e=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:y,y:v}=b;return{x:y,y:v}}},...l}=ec(t,e),c={x:n,y:r},u=await Jm(e,l),h=bh(Qc(i)),d=KL(h);let f=c[d],m=c[h];if(s){const b=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=f+u[b],x=f-u[y];f=W3(v,f,x)}if(o){const b=h==="y"?"top":"left",y=h==="y"?"bottom":"right",v=m+u[b],x=m-u[y];m=W3(v,m,x)}const g=a.fn({...e,[d]:f,[h]:m});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[d]:s,[h]:o}}}}}},L0e=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ec(t,e),u={x:n,y:r},h=bh(i),d=KL(h);let f=u[d],m=u[h];const g=ec(a,e),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const x=d==="y"?"height":"width",w=s.reference[d]-s.floating[x]+b.mainAxis,S=s.reference[d]+s.reference[x]-b.mainAxis;f<w?f=w:f>S&&(f=S)}if(c){var y,v;const x=d==="y"?"width":"height",w=["top","left"].includes(Qc(i)),S=s.reference[h]-s.floating[x]+(w&&((y=o.offset)==null?void 0:y[h])||0)+(w?0:b.crossAxis),E=s.reference[h]+s.reference[x]+(w?0:((v=o.offset)==null?void 0:v[h])||0)-(w?b.crossAxis:0);m<S?m=S:m>E&&(m=E)}return{[d]:f,[h]:m}}}},R0e=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=ec(t,e),u=await Jm(e,c),h=Qc(i),d=Mg(i),f=bh(i)==="y",{width:m,height:g}=s.floating;let b,y;h==="top"||h==="bottom"?(b=h,y=d===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=h,b=d==="end"?"top":"bottom");const v=g-u.top-u.bottom,x=m-u.left-u.right,w=Jc(g-u[b],v),S=Jc(m-u[y],x),E=!e.middlewareData.shift;let k=w,_=S;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(_=x),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(k=v),E&&!d){const R=Xi(u.left,0),C=Xi(u.right,0),P=Xi(u.top,0),O=Xi(u.bottom,0);f?_=m-2*(R!==0||C!==0?R+C:Xi(u.left,u.right)):k=g-2*(P!==0||O!==0?P+O:Xi(u.top,u.bottom))}await l({...e,availableWidth:_,availableHeight:k});const L=await o.getDimensions(a.floating);return m!==L.width||g!==L.height?{reset:{rects:!0}}:{}}}};function KE(){return typeof window<"u"}function jg(t){return oG(t)?(t.nodeName||"").toLowerCase():"#document"}function _o(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ic(t){var e;return(e=(oG(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function oG(t){return KE()?t instanceof Node||t instanceof _o(t).Node:!1}function gs(t){return KE()?t instanceof Element||t instanceof _o(t).Element:!1}function tc(t){return KE()?t instanceof HTMLElement||t instanceof _o(t).HTMLElement:!1}function VM(t){return!KE()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof _o(t).ShadowRoot}function uv(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Ua(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function I0e(t){return["table","td","th"].includes(jg(t))}function YE(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function ZL(t){const e=JL(),n=gs(t)?Ua(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function O0e(t){let e=yh(t);for(;tc(e)&&!Qm(e);){if(ZL(e))return e;if(YE(e))return null;e=yh(e)}return null}function JL(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Qm(t){return["html","body","#document"].includes(jg(t))}function Ua(t){return _o(t).getComputedStyle(t)}function XE(t){return gs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function yh(t){if(jg(t)==="html")return t;const e=t.assignedSlot||t.parentNode||VM(t)&&t.host||ic(t);return VM(e)?e.host:e}function aG(t){const e=yh(t);return Qm(e)?t.ownerDocument?t.ownerDocument.body:t.body:tc(e)&&uv(e)?e:aG(e)}function ny(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=aG(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=_o(i);if(s){const a=q3(o);return e.concat(o,o.visualViewport||[],uv(i)?i:[],a&&n?ny(a):[])}return e.concat(i,ny(i,[],n))}function q3(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function lG(t){const e=Ua(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=tc(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=ty(n)!==s||ty(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function QL(t){return gs(t)?t:t.contextElement}function bm(t){const e=QL(t);if(!tc(e))return ql(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=lG(e);let o=(s?ty(n.width):n.width)/r,a=(s?ty(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const D0e=ql(0);function cG(t){const e=_o(t);return!JL()||!e.visualViewport?D0e:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function M0e(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==_o(t)?!1:e}function ff(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=QL(t);let o=ql(1);e&&(r?gs(r)&&(o=bm(r)):o=bm(t));const a=M0e(s,n,r)?cG(s):ql(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(s){const d=_o(s),f=r&&gs(r)?_o(r):r;let m=d,g=q3(m);for(;g&&r&&f!==m;){const b=bm(g),y=g.getBoundingClientRect(),v=Ua(g),x=y.left+(g.clientLeft+parseFloat(v.paddingLeft))*b.x,w=y.top+(g.clientTop+parseFloat(v.paddingTop))*b.y;l*=b.x,c*=b.y,u*=b.x,h*=b.y,l+=x,c+=w,m=_o(g),g=q3(m)}}return Z2({width:u,height:h,x:l,y:c})}function eR(t,e){const n=XE(t).scrollLeft;return e?e.left+n:ff(ic(t)).left+n}function uG(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:eR(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function j0e(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=ic(r),a=e?YE(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=ql(1);const u=ql(0),h=tc(r);if((h||!h&&!s)&&((jg(r)!=="body"||uv(o))&&(l=XE(r)),tc(r))){const f=ff(r);c=bm(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}const d=o&&!h&&!s?uG(o,l,!0):ql(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+d.x,y:n.y*c.y-l.scrollTop*c.y+u.y+d.y}}function F0e(t){return Array.from(t.getClientRects())}function B0e(t){const e=ic(t),n=XE(t),r=t.ownerDocument.body,i=Xi(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Xi(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+eR(t);const a=-n.scrollTop;return Ua(r).direction==="rtl"&&(o+=Xi(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function U0e(t,e){const n=_o(t),r=ic(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=JL();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function $0e(t,e){const n=ff(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=tc(t)?bm(t):ql(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function WM(t,e,n){let r;if(e==="viewport")r=U0e(t,n);else if(e==="document")r=B0e(ic(t));else if(gs(e))r=$0e(e,n);else{const i=cG(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Z2(r)}function hG(t,e){const n=yh(t);return n===e||!gs(n)||Qm(n)?!1:Ua(n).position==="fixed"||hG(n,e)}function H0e(t,e){const n=e.get(t);if(n)return n;let r=ny(t,[],!1).filter(a=>gs(a)&&jg(a)!=="body"),i=null;const s=Ua(t).position==="fixed";let o=s?yh(t):t;for(;gs(o)&&!Qm(o);){const a=Ua(o),l=ZL(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||uv(o)&&!l&&hG(t,o))?r=r.filter(u=>u!==o):i=a,o=yh(o)}return e.set(t,r),r}function z0e(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?YE(e)?[]:H0e(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const h=WM(e,u,i);return c.top=Xi(h.top,c.top),c.right=Jc(h.right,c.right),c.bottom=Jc(h.bottom,c.bottom),c.left=Xi(h.left,c.left),c},WM(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function V0e(t){const{width:e,height:n}=lG(t);return{width:e,height:n}}function W0e(t,e,n){const r=tc(e),i=ic(e),s=n==="fixed",o=ff(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=ql(0);if(r||!r&&!s)if((jg(e)!=="body"||uv(i))&&(a=XE(e)),r){const d=ff(e,!0,s,e);l.x=d.x+e.clientLeft,l.y=d.y+e.clientTop}else i&&(l.x=eR(i));const c=i&&!r&&!s?uG(i,a):ql(0),u=o.left+a.scrollLeft-l.x-c.x,h=o.top+a.scrollTop-l.y-c.y;return{x:u,y:h,width:o.width,height:o.height}}function LC(t){return Ua(t).position==="static"}function GM(t,e){if(!tc(t)||Ua(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ic(t)===n&&(n=n.ownerDocument.body),n}function dG(t,e){const n=_o(t);if(YE(t))return n;if(!tc(t)){let i=yh(t);for(;i&&!Qm(i);){if(gs(i)&&!LC(i))return i;i=yh(i)}return n}let r=GM(t,e);for(;r&&I0e(r)&&LC(r);)r=GM(r,e);return r&&Qm(r)&&LC(r)&&!ZL(r)?n:r||O0e(t)||n}const G0e=async function(t){const e=this.getOffsetParent||dG,n=this.getDimensions,r=await n(t.floating);return{reference:W0e(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function q0e(t){return Ua(t).direction==="rtl"}const K0e={convertOffsetParentRelativeRectToViewportRelativeRect:j0e,getDocumentElement:ic,getClippingRect:z0e,getOffsetParent:dG,getElementRects:G0e,getClientRects:F0e,getDimensions:V0e,getScale:bm,isElement:gs,isRTL:q0e};function fG(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Y0e(t,e){let n=null,r;const i=ic(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:h,width:d,height:f}=c;if(a||e(),!d||!f)return;const m=g_(h),g=g_(i.clientWidth-(u+d)),b=g_(i.clientHeight-(h+f)),y=g_(u),x={rootMargin:-m+"px "+-g+"px "+-b+"px "+-y+"px",threshold:Xi(0,Jc(1,l))||1};let w=!0;function S(E){const k=E[0].intersectionRatio;if(k!==l){if(!w)return o();k?o(!1,k):r=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!fG(c,t.getBoundingClientRect())&&o(),w=!1}try{n=new IntersectionObserver(S,{...x,root:i.ownerDocument})}catch{n=new IntersectionObserver(S,x)}n.observe(t)}return o(!0),s}function pG(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=QL(t),u=i||s?[...c?ny(c):[],...ny(e)]:[];u.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const h=c&&a?Y0e(c,n):null;let d=-1,f=null;o&&(f=new ResizeObserver(y=>{let[v]=y;v&&v.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var x;(x=f)==null||x.observe(e)})),n()}),c&&!l&&f.observe(c),f.observe(e));let m,g=l?ff(t):null;l&&b();function b(){const y=ff(t);g&&!fG(g,y)&&n(),g=y,m=requestAnimationFrame(b)}return n(),()=>{var y;u.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),h?.(),(y=f)==null||y.disconnect(),f=null,l&&cancelAnimationFrame(m)}}const RC=Jm,X0e=P0e,Z0e=N0e,J0e=C0e,Q0e=R0e,ebe=T0e,qM=k0e,tbe=L0e,nbe=(t,e,n)=>{const r=new Map,i={platform:K0e,...n},s={...i.platform,_c:r};return E0e(t,e,{...i,platform:s})};var Gw=typeof document<"u"?A.useLayoutEffect:A.useEffect;function J2(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!J2(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!J2(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function mG(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function KM(t,e){const n=mG(t);return Math.round(e*n)/n}function IC(t){const e=A.useRef(t);return Gw(()=>{e.current=t}),e}function gG(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,h]=A.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[d,f]=A.useState(r);J2(d,r)||f(r);const[m,g]=A.useState(null),[b,y]=A.useState(null),v=A.useCallback(J=>{J!==E.current&&(E.current=J,g(J))},[]),x=A.useCallback(J=>{J!==k.current&&(k.current=J,y(J))},[]),w=s||m,S=o||b,E=A.useRef(null),k=A.useRef(null),_=A.useRef(u),L=l!=null,R=IC(l),C=IC(i),P=IC(c),O=A.useCallback(()=>{if(!E.current||!k.current)return;const J={placement:e,strategy:n,middleware:d};C.current&&(J.platform=C.current),nbe(E.current,k.current,J).then(j=>{const F={...j,isPositioned:P.current!==!1};N.current&&!J2(_.current,F)&&(_.current=F,Vm.flushSync(()=>{h(F)}))})},[d,e,n,C,P]);Gw(()=>{c===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,h(J=>({...J,isPositioned:!1})))},[c]);const N=A.useRef(!1);Gw(()=>(N.current=!0,()=>{N.current=!1}),[]),Gw(()=>{if(w&&(E.current=w),S&&(k.current=S),w&&S){if(R.current)return R.current(w,S,O);O()}},[w,S,O,R,L]);const H=A.useMemo(()=>({reference:E,floating:k,setReference:v,setFloating:x}),[v,x]),Q=A.useMemo(()=>({reference:w,floating:S}),[w,S]),X=A.useMemo(()=>{const J={position:n,left:0,top:0};if(!Q.floating)return J;const j=KM(Q.floating,u.x),F=KM(Q.floating,u.y);return a?{...J,transform:"translate("+j+"px, "+F+"px)",...mG(Q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:j,top:F}},[n,a,Q.floating,u.x,u.y]);return A.useMemo(()=>({...u,update:O,refs:H,elements:Q,floatingStyles:X}),[u,O,H,Q,X])}const rbe=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?qM({element:r.current,padding:i}).fn(n):{}:r?qM({element:r,padding:i}).fn(n):{}}}},tR=(t,e)=>({...X0e(t),options:[t,e]}),bG=(t,e)=>({...Z0e(t),options:[t,e]}),ibe=(t,e)=>({...tbe(t),options:[t,e]}),yG=(t,e)=>({...J0e(t),options:[t,e]}),vG=(t,e)=>({...Q0e(t),options:[t,e]}),sbe=(t,e)=>({...ebe(t),options:[t,e]}),obe=(t,e)=>({...rbe(t),options:[t,e]});var abe="Arrow",xG=A.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return p.jsx(vn.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});xG.displayName=abe;var lbe=xG,nR="Popper",[_G,Fg]=ca(nR),[cbe,wG]=_G(nR),SG=t=>{const{__scopePopper:e,children:n}=t,[r,i]=A.useState(null);return p.jsx(cbe,{scope:e,anchor:r,onAnchorChange:i,children:n})};SG.displayName=nR;var EG="PopperAnchor",kG=A.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=wG(EG,n),o=A.useRef(null),a=Wn(e,o);return A.useEffect(()=>{s.onAnchorChange(r?.current||o.current)}),r?null:p.jsx(vn.div,{...i,ref:a})});kG.displayName=EG;var rR="PopperContent",[ube,hbe]=_G(rR),CG=A.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:d=!1,updatePositionStrategy:f="optimized",onPlaced:m,...g}=t,b=wG(rR,n),[y,v]=A.useState(null),x=Wn(e,ee=>v(ee)),[w,S]=A.useState(null),E=UW(w),k=E?.width??0,_=E?.height??0,L=r+(s!=="center"?"-"+s:""),R=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},C=Array.isArray(c)?c:[c],P=C.length>0,O={padding:R,boundary:C.filter(fbe),altBoundary:P},{refs:N,floatingStyles:H,placement:Q,isPositioned:X,middlewareData:J}=gG({strategy:"fixed",placement:L,whileElementsMounted:(...ee)=>pG(...ee,{animationFrame:f==="always"}),elements:{reference:b.anchor},middleware:[tR({mainAxis:i+_,alignmentAxis:o}),l&&bG({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?ibe():void 0,...O}),l&&yG({...O}),vG({...O,apply:({elements:ee,rects:K,availableWidth:he,availableHeight:be})=>{const{width:Se,height:Ce}=K.reference,ke=ee.floating.style;ke.setProperty("--radix-popper-available-width",`${he}px`),ke.setProperty("--radix-popper-available-height",`${be}px`),ke.setProperty("--radix-popper-anchor-width",`${Se}px`),ke.setProperty("--radix-popper-anchor-height",`${Ce}px`)}}),w&&obe({element:w,padding:a}),pbe({arrowWidth:k,arrowHeight:_}),d&&sbe({strategy:"referenceHidden",...O})]}),[j,F]=PG(Q),Y=ii(m);Xc(()=>{X&&Y?.()},[X,Y]);const M=J.arrow?.x,D=J.arrow?.y,V=J.arrow?.centerOffset!==0,[W,te]=A.useState();return Xc(()=>{y&&te(window.getComputedStyle(y).zIndex)},[y]),p.jsx("div",{ref:N.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:X?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:W,"--radix-popper-transform-origin":[J.transformOrigin?.x,J.transformOrigin?.y].join(" "),...J.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:p.jsx(ube,{scope:n,placedSide:j,onArrowChange:S,arrowX:M,arrowY:D,shouldHideArrow:V,children:p.jsx(vn.div,{"data-side":j,"data-align":F,...g,ref:x,style:{...g.style,animation:X?void 0:"none"}})})})});CG.displayName=rR;var TG="PopperArrow",dbe={top:"bottom",right:"left",bottom:"top",left:"right"},AG=A.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=hbe(TG,r),o=dbe[s.placedSide];return p.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:p.jsx(lbe,{...i,ref:n,style:{...i.style,display:"block"}})})});AG.displayName=TG;function fbe(t){return t!==null}var pbe=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:i}=e,o=i.arrow?.centerOffset!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=PG(n),h={start:"0%",center:"50%",end:"100%"}[u],d=(i.arrow?.x??0)+a/2,f=(i.arrow?.y??0)+l/2;let m="",g="";return c==="bottom"?(m=o?h:`${d}px`,g=`${-l}px`):c==="top"?(m=o?h:`${d}px`,g=`${r.floating.height+l}px`):c==="right"?(m=`${-l}px`,g=o?h:`${f}px`):c==="left"&&(m=`${r.floating.width+l}px`,g=o?h:`${f}px`),{data:{x:m,y:g}}}});function PG(t){const[e,n="center"]=t.split("-");return[e,n]}var iR=SG,ZE=kG,sR=CG,oR=AG,mbe="VisuallyHidden",NG=A.forwardRef((t,e)=>p.jsx(vn.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));NG.displayName=mbe;var gbe=NG,[JE,ait]=ca("Tooltip",[Fg]),QE=Fg(),LG="TooltipProvider",bbe=700,K3="tooltip.open",[ybe,aR]=JE(LG),Q2=t=>{const{__scopeTooltip:e,delayDuration:n=bbe,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,[o,a]=A.useState(!0),l=A.useRef(!1),c=A.useRef(0);return A.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),p.jsx(ybe,{scope:e,isOpenDelayed:o,delayDuration:n,onOpen:A.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:A.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:A.useCallback(u=>{l.current=u},[]),disableHoverableContent:i,children:s})};Q2.displayName=LG;var ek="Tooltip",[vbe,hv]=JE(ek),RG=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=t,l=aR(ek,t.__scopeTooltip),c=QE(e),[u,h]=A.useState(null),d=Hc(),f=A.useRef(0),m=o??l.disableHoverableContent,g=a??l.delayDuration,b=A.useRef(!1),[y=!1,v]=If({prop:r,defaultProp:i,onChange:k=>{k?(l.onOpen(),document.dispatchEvent(new CustomEvent(K3))):l.onClose(),s?.(k)}}),x=A.useMemo(()=>y?b.current?"delayed-open":"instant-open":"closed",[y]),w=A.useCallback(()=>{window.clearTimeout(f.current),f.current=0,b.current=!1,v(!0)},[v]),S=A.useCallback(()=>{window.clearTimeout(f.current),f.current=0,v(!1)},[v]),E=A.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{b.current=!0,v(!0),f.current=0},g)},[g,v]);return A.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),p.jsx(iR,{...c,children:p.jsx(vbe,{scope:e,contentId:d,open:y,stateAttribute:x,trigger:u,onTriggerChange:h,onTriggerEnter:A.useCallback(()=>{l.isOpenDelayed?E():w()},[l.isOpenDelayed,E,w]),onTriggerLeave:A.useCallback(()=>{m?S():(window.clearTimeout(f.current),f.current=0)},[S,m]),onOpen:w,onClose:S,disableHoverableContent:m,children:n})})};RG.displayName=ek;var Y3="TooltipTrigger",IG=A.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=hv(Y3,n),s=aR(Y3,n),o=QE(n),a=A.useRef(null),l=Wn(e,a,i.onTriggerChange),c=A.useRef(!1),u=A.useRef(!1),h=A.useCallback(()=>c.current=!1,[]);return A.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),p.jsx(ZE,{asChild:!0,...o,children:p.jsx(vn.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:Mt(t.onPointerMove,d=>{d.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:Mt(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:Mt(t.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Mt(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:Mt(t.onBlur,i.onClose),onClick:Mt(t.onClick,i.onClose)})})});IG.displayName=Y3;var lR="TooltipPortal",[xbe,_be]=JE(lR,{forceMount:void 0}),OG=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:i}=t,s=hv(lR,e);return p.jsx(xbe,{scope:e,forceMount:n,children:p.jsx(Fi,{present:n||s.open,children:p.jsx(cv,{asChild:!0,container:i,children:r})})})};OG.displayName=lR;var eg="TooltipContent",DG=A.forwardRef((t,e)=>{const n=_be(eg,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=hv(eg,t.__scopeTooltip);return p.jsx(Fi,{present:r||o.open,children:o.disableHoverableContent?p.jsx(MG,{side:i,...s,ref:e}):p.jsx(wbe,{side:i,...s,ref:e})})}),wbe=A.forwardRef((t,e)=>{const n=hv(eg,t.__scopeTooltip),r=aR(eg,t.__scopeTooltip),i=A.useRef(null),s=Wn(e,i),[o,a]=A.useState(null),{trigger:l,onClose:c}=n,u=i.current,{onPointerInTransitChange:h}=r,d=A.useCallback(()=>{a(null),h(!1)},[h]),f=A.useCallback((m,g)=>{const b=m.currentTarget,y={x:m.clientX,y:m.clientY},v=kbe(y,b.getBoundingClientRect()),x=Cbe(y,v),w=Tbe(g.getBoundingClientRect()),S=Pbe([...x,...w]);a(S),h(!0)},[h]);return A.useEffect(()=>()=>d(),[d]),A.useEffect(()=>{if(l&&u){const m=b=>f(b,u),g=b=>f(b,l);return l.addEventListener("pointerleave",m),u.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",m),u.removeEventListener("pointerleave",g)}}},[l,u,f,d]),A.useEffect(()=>{if(o){const m=g=>{const b=g.target,y={x:g.clientX,y:g.clientY},v=l?.contains(b)||u?.contains(b),x=!Abe(y,o);v?d():x&&(d(),c())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,u,o,c,d]),p.jsx(MG,{...t,ref:s})}),[Sbe,Ebe]=JE(ek,{isInside:!1}),MG=A.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,l=hv(eg,n),c=QE(n),{onClose:u}=l;return A.useEffect(()=>(document.addEventListener(K3,u),()=>document.removeEventListener(K3,u)),[u]),A.useEffect(()=>{if(l.trigger){const h=d=>{d.target?.contains(l.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,u]),p.jsx(lv,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:p.jsxs(sR,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(cW,{children:r}),p.jsx(Sbe,{scope:n,isInside:!0,children:p.jsx(gbe,{id:l.contentId,role:"tooltip",children:i||r})})]})})});DG.displayName=eg;var jG="TooltipArrow",FG=A.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=QE(n);return Ebe(jG,n).isInside?null:p.jsx(oR,{...i,...r,ref:e})});FG.displayName=jG;function kbe(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Cbe(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Tbe(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function Abe(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function Pbe(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Nbe(e)}function Nbe(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var cR=Q2,uR=RG,hR=IG,dR=OG,fR=DG,pR=FG;const Lbe=({tab:t,onClick:e,isActive:n,hasUpdate:r,statusMessage:i,description:s,isLoading:o,className:a,children:l})=>p.jsx(cR,{delayDuration:200,children:p.jsx(uR,{children:p.jsx(hR,{asChild:!0,children:p.jsxs(at.div,{onClick:e,className:Ae("relative flex flex-col items-center p-6 rounded-xl","w-full h-full min-h-[160px]","bg-white dark:bg-[#141414]","border border-[#E5E5E5] dark:border-[#333333]","group","hover:bg-purple-50 dark:hover:bg-[#1a1a1a]","hover:border-purple-200 dark:hover:border-purple-900/30",n?"border-purple-500 dark:border-purple-500/50 bg-purple-500/5 dark:bg-purple-500/10":"",o?"cursor-wait opacity-70":"",a||""),children:[p.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 w-full",children:[p.jsx(at.div,{className:Ae("relative","w-14 h-14","flex items-center justify-center","rounded-xl","bg-gray-100 dark:bg-gray-800","ring-1 ring-gray-200 dark:ring-gray-700","group-hover:bg-purple-100 dark:group-hover:bg-gray-700/80","group-hover:ring-purple-200 dark:group-hover:ring-purple-800/30",n?"bg-purple-500/10 dark:bg-purple-500/10 ring-purple-500/30 dark:ring-purple-500/20":""),children:p.jsx(at.div,{className:Ae(zge[t.id],"w-8 h-8","text-gray-600 dark:text-gray-300","group-hover:text-purple-500 dark:group-hover:text-purple-400/80",n?"text-purple-500 dark:text-purple-400/90":"")})}),p.jsxs("div",{className:"flex flex-col items-center mt-5 w-full",children:[p.jsx("h3",{className:Ae("text-[15px] font-medium leading-snug mb-2","text-gray-700 dark:text-gray-200","group-hover:text-purple-600 dark:group-hover:text-purple-300/90",n?"text-purple-500 dark:text-purple-400/90":""),children:Jb[t.id]}),s&&p.jsx("p",{className:Ae("text-[13px] leading-relaxed","text-gray-500 dark:text-gray-400","max-w-[85%]","text-center","group-hover:text-purple-500 dark:group-hover:text-purple-400/70",n?"text-purple-400 dark:text-purple-400/80":""),children:s})]})]}),r&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 rounded-full bg-purple-500 dark:bg-purple-400 animate-pulse"}),p.jsx(dR,{children:p.jsxs(fR,{className:Ae("px-3 py-1.5 rounded-lg","bg-[#18181B] text-white","text-sm font-medium","select-none","z-[100]"),side:"top",sideOffset:5,children:[i,p.jsx(pR,{className:"fill-[#18181B]"})]})})]}),l]})})})});function Rbe(t,e){const n=t.replace(/^v/,""),r=e.replace(/^v/,""),i=n.split(".").map(Number),s=r.split(".").map(Number);for(let o=0;o<Math.max(i.length,s.length);o++){const a=i[o]||0,l=s[o]||0;if(a!==l)return a-l}return 0}const YM=async()=>{try{const t=await fetch("/package.json");if(!t.ok)throw new Error("Failed to fetch local package.json");const e=await t.json();if(!e.version||typeof e.version!="string")throw new Error("Invalid package.json format: missing or invalid version");const n=e.version,r=await fetch("https://raw.githubusercontent.com/stackblitz-labs/bolt.diy/main/package.json");if(!r.ok)throw new Error(`Failed to fetch latest package.json: ${r.status}`);const i=await r.json();if(!i.version||typeof i.version!="string")throw new Error("Invalid remote package.json format: missing or invalid version");const s=i.version,o=Rbe(s,n)>0;return{available:o,version:s,releaseNotes:o?"Update available. Check GitHub for release notes.":void 0}}catch(t){console.error("Error checking for updates:",t);const e=t instanceof Error?t.message:"Unknown error occurred";return{available:!1,version:"unknown",error:{type:e.toLowerCase().includes("network")||e.toLowerCase().includes("fetch")?"network":"unknown",message:`Failed to check for updates: ${e}`}}}},Ibe=async t=>{try{localStorage.setItem("last_acknowledged_update",t)}catch(e){console.error("Failed to store acknowledged version:",e)}},XM="bolt_last_acknowledged_version",BG=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState(""),[i,s]=A.useState(()=>{try{return localStorage.getItem(XM)}catch{return null}});return A.useEffect(()=>{const a=async()=>{try{const{available:c,version:u}=await YM();r(u),e(c&&u!==i)}catch(c){console.error("Failed to check for updates:",c)}};a();const l=setInterval(a,30*60*1e3);return()=>clearInterval(l)},[i]),{hasUpdate:t,currentVersion:n,acknowledgeUpdate:async()=>{try{const{version:a}=await YM();await Ibe(a);try{localStorage.setItem(XM,a)}catch(l){console.error("Failed to persist acknowledged version:",l)}s(a),e(!1)}catch(a){console.error("Failed to acknowledge update:",a)}}}},Obe=async()=>[{id:"feature-1",name:"Dark Mode",description:"Enable dark mode for better night viewing",viewed:!0,releaseDate:"2024-03-15"},{id:"feature-2",name:"Tab Management",description:"Customize your tab layout",viewed:!1,releaseDate:"2024-03-20"}],ZM=async t=>{console.log(`Marking feature ${t} as viewed`)},UG="bolt_viewed_features",Dbe=()=>{try{const t=localStorage.getItem(UG);return t?JSON.parse(t):[]}catch{return[]}},JM=t=>{try{localStorage.setItem(UG,JSON.stringify(t))}catch(e){console.error("Failed to persist viewed features:",e)}},Mbe=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState([]),[i,s]=A.useState(()=>Dbe());return A.useEffect(()=>{(async()=>{try{const u=(await Obe()).filter(h=>!i.includes(h.id));r(u),e(u.length>0)}catch(c){console.error("Failed to check for new features:",c)}})()},[i]),{hasNewFeatures:t,unviewedFeatures:n,acknowledgeFeature:async l=>{try{await ZM(l);const c=[...i,l];s(c),JM(c),r(u=>u.filter(h=>h.id!==l)),e(n.length>1)}catch(c){console.error("Failed to acknowledge feature:",c)}},acknowledgeAllFeatures:async()=>{try{await Promise.all(n.map(c=>ZM(c.id)));const l=[...i,...n.map(c=>c.id)];s(l),JM(l),r([]),e(!1)}catch(l){console.error("Failed to acknowledge all features:",l)}}}},QM=async()=>Object.values(Ut.logs.get()).filter(e=>e.category!=="system").map(e=>({id:e.id,title:e.details?.title||e.message.split(`
`)[0],message:e.message,type:e.level,timestamp:e.timestamp,read:Ut.isRead(e.id),details:e.details})).sort((e,n)=>new Date(n.timestamp).getTime()-new Date(e.timestamp).getTime()),e8=async t=>{Ut.markAsRead(t)},jbe=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState([]),i=Ot(Ut.logs),s=async()=>{try{const c=(await QM()).filter(u=>!Ut.isRead(u.id));r(c),e(c.length>0)}catch(l){console.error("Failed to check notifications:",l)}};return A.useEffect(()=>{s();const l=setInterval(s,60*1e3);return()=>clearInterval(l)},[i]),{hasUnreadNotifications:t,unreadNotifications:n,markAsRead:async l=>{try{await e8(l),await s()}catch(c){console.error("Failed to mark notification as read:",c)}},markAllAsRead:async()=>{try{const l=await QM();await Promise.all(l.map(c=>e8(c.id))),await s()}catch(l){console.error("Failed to mark all notifications as read:",l)}}}},Fbe=async()=>{try{if(!navigator.onLine)return{connected:!1,latency:0,lastChecked:new Date().toISOString()};const e=["/api/health","/","/favicon.ico"];let n=0,r=!1;for(const i of e)try{const s=performance.now(),o=await fetch(i,{method:"HEAD",cache:"no-cache"}),a=performance.now();if(o.ok){n=Math.round(a-s),r=!0;break}}catch(s){console.debug(`Failed to connect to ${i}:`,s);continue}return{connected:r,latency:n,lastChecked:new Date().toISOString()}}catch(t){return console.error("Connection check failed:",t),{connected:!1,latency:0,lastChecked:new Date().toISOString()}}},Bbe="bolt_acknowledged_connection_issue",Ube=()=>{try{return localStorage.getItem(Bbe)}catch{return null}},$be=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState(null),[i,s]=A.useState(()=>Ube()),o=async()=>{try{const c=await Fbe(),u=c.connected?c.latency>1e3?"high-latency":null:"disconnected";r(u),e(u!==null&&u!==i)}catch(c){console.error("Failed to check connection:",c),r("disconnected"),e(!0)}};return A.useEffect(()=>{o();const c=setInterval(o,10*1e3);return()=>clearInterval(c)},[i]),{hasConnectionIssues:t,currentIssue:n,acknowledgeIssue:()=>{s(n),s(n),e(!1)},resetAcknowledgment:()=>{s(null),s(null),o()}}},eS=new Set,Hbe=async()=>{const t={warnings:[],errors:[]};try{if(performance&&"memory"in performance){const n=performance.memory;n.usedJSHeapSize>n.jsHeapSizeLimit*.8&&t.warnings.push({id:"high-memory-usage",message:"High memory usage detected",type:"warning",timestamp:new Date().toISOString(),details:{used:n.usedJSHeapSize,total:n.jsHeapSizeLimit}})}if(navigator.storage&&navigator.storage.estimate){const n=await navigator.storage.estimate();(n.usage||0)/(n.quota||1)>.9&&t.warnings.push({id:"storage-quota-warning",message:"Storage quota nearly reached",type:"warning",timestamp:new Date().toISOString(),details:{used:n.usage,quota:n.quota}})}const e=localStorage.getItem("error_logs");return e&&JSON.parse(e).forEach(r=>{t.errors.push({id:`error-${r.timestamp}`,message:r.message,type:"error",timestamp:r.timestamp,details:r.details})}),t.warnings=t.warnings.filter(n=>!eS.has(n.id)),t.errors=t.errors.filter(n=>!eS.has(n.id)),t}catch(e){return console.error("Error getting debug status:",e),t}},t8=async t=>{eS.add(t)},n8=async t=>{eS.add(t);try{const e=localStorage.getItem("error_logs");if(e){const r=JSON.parse(e).filter(i=>`error-${i.timestamp}`!==t);localStorage.setItem("error_logs",JSON.stringify(r))}}catch(e){console.error("Error acknowledging error:",e)}},$G="bolt_acknowledged_debug_issues",zbe=()=>{try{const t=localStorage.getItem($G);return t?JSON.parse(t):[]}catch{return[]}},r8=t=>{try{localStorage.setItem($G,JSON.stringify(t))}catch(e){console.error("Failed to persist acknowledged debug issues:",e)}},Vbe=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState([]),[i,s]=A.useState(()=>zbe()),o=async()=>{try{const c=await Hbe(),u=[...c.warnings.map(h=>({...h,type:"warning"})),...c.errors.map(h=>({...h,type:"error"}))].filter(h=>!i.includes(h.id));r(u),e(u.length>0)}catch(c){console.error("Failed to check debug status:",c)}};return A.useEffect(()=>{o();const c=setInterval(o,5*1e3);return()=>clearInterval(c)},[i]),{hasActiveWarnings:t,activeIssues:n,acknowledgeIssue:async c=>{try{c.type==="warning"?await t8(c.id):await n8(c.id);const u=[...i,c.id];s(u),r8(u),r(h=>h.filter(d=>d.id!==c.id)),e(n.length>1)}catch(u){console.error("Failed to acknowledge issue:",u)}},acknowledgeAllIssues:async()=>{try{await Promise.all(n.map(u=>u.type==="warning"?t8(u.id):n8(u.id)));const c=[...i,...n.map(u=>u.id)];s(c),r8(c),r([]),e(!1)}catch(c){console.error("Failed to acknowledge all issues:",c)}}}};function HG(t){const e=t+"CollectionProvider",[n,r]=ca(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=f=>{const{scope:m,children:g}=f,b=ut.useRef(null),y=ut.useRef(new Map).current;return p.jsx(i,{scope:m,itemMap:y,collectionRef:b,children:g})};o.displayName=e;const a=t+"CollectionSlot",l=ut.forwardRef((f,m)=>{const{scope:g,children:b}=f,y=s(a,g),v=Wn(m,y.collectionRef);return p.jsx(uf,{ref:v,children:b})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",h=ut.forwardRef((f,m)=>{const{scope:g,children:b,...y}=f,v=ut.useRef(null),x=Wn(m,v),w=s(c,g);return ut.useEffect(()=>(w.itemMap.set(v,{ref:v,...y}),()=>void w.itemMap.delete(v))),p.jsx(uf,{[u]:"",ref:x,children:b})});h.displayName=c;function d(f){const m=s(t+"CollectionConsumer",f);return ut.useCallback(()=>{const b=m.collectionRef.current;if(!b)return[];const y=Array.from(b.querySelectorAll(`[${u}]`));return Array.from(m.itemMap.values()).sort((w,S)=>y.indexOf(w.ref.current)-y.indexOf(S.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:o,Slot:l,ItemSlot:h},d,r]}var Wbe=A.createContext(void 0);function mR(t){const e=A.useContext(Wbe);return t||e||"ltr"}var OC="rovingFocusGroup.onEntryFocus",Gbe={bubbles:!1,cancelable:!0},tk="RovingFocusGroup",[X3,zG,qbe]=HG(tk),[Kbe,VG]=ca(tk,[qbe]),[Ybe,Xbe]=Kbe(tk),WG=A.forwardRef((t,e)=>p.jsx(X3.Provider,{scope:t.__scopeRovingFocusGroup,children:p.jsx(X3.Slot,{scope:t.__scopeRovingFocusGroup,children:p.jsx(Zbe,{...t,ref:e})})}));WG.displayName=tk;var Zbe=A.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...h}=t,d=A.useRef(null),f=Wn(e,d),m=mR(s),[g=null,b]=If({prop:o,defaultProp:a,onChange:l}),[y,v]=A.useState(!1),x=ii(c),w=zG(n),S=A.useRef(!1),[E,k]=A.useState(0);return A.useEffect(()=>{const _=d.current;if(_)return _.addEventListener(OC,x),()=>_.removeEventListener(OC,x)},[x]),p.jsx(Ybe,{scope:n,orientation:r,dir:m,loop:i,currentTabStopId:g,onItemFocus:A.useCallback(_=>b(_),[b]),onItemShiftTab:A.useCallback(()=>v(!0),[]),onFocusableItemAdd:A.useCallback(()=>k(_=>_+1),[]),onFocusableItemRemove:A.useCallback(()=>k(_=>_-1),[]),children:p.jsx(vn.div,{tabIndex:y||E===0?-1:0,"data-orientation":r,...h,ref:f,style:{outline:"none",...t.style},onMouseDown:Mt(t.onMouseDown,()=>{S.current=!0}),onFocus:Mt(t.onFocus,_=>{const L=!S.current;if(_.target===_.currentTarget&&L&&!y){const R=new CustomEvent(OC,Gbe);if(_.currentTarget.dispatchEvent(R),!R.defaultPrevented){const C=w().filter(Q=>Q.focusable),P=C.find(Q=>Q.active),O=C.find(Q=>Q.id===g),H=[P,O,...C].filter(Boolean).map(Q=>Q.ref.current);KG(H,u)}}S.current=!1}),onBlur:Mt(t.onBlur,()=>v(!1))})})}),GG="RovingFocusGroupItem",qG=A.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...o}=t,a=Hc(),l=s||a,c=Xbe(GG,n),u=c.currentTabStopId===l,h=zG(n),{onFocusableItemAdd:d,onFocusableItemRemove:f}=c;return A.useEffect(()=>{if(r)return d(),()=>f()},[r,d,f]),p.jsx(X3.ItemSlot,{scope:n,id:l,focusable:r,active:i,children:p.jsx(vn.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:Mt(t.onMouseDown,m=>{r?c.onItemFocus(l):m.preventDefault()}),onFocus:Mt(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:Mt(t.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){c.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const g=e1e(m,c.orientation,c.dir);if(g!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let y=h().filter(v=>v.focusable).map(v=>v.ref.current);if(g==="last")y.reverse();else if(g==="prev"||g==="next"){g==="prev"&&y.reverse();const v=y.indexOf(m.currentTarget);y=c.loop?t1e(y,v+1):y.slice(v+1)}setTimeout(()=>KG(y))}})})})});qG.displayName=GG;var Jbe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Qbe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function e1e(t,e,n){const r=Qbe(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Jbe[r]}function KG(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function t1e(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var n1e=WG,r1e=qG,Z3=["Enter"," "],i1e=["ArrowDown","PageUp","Home"],YG=["ArrowUp","PageDown","End"],s1e=[...i1e,...YG],o1e={ltr:[...Z3,"ArrowRight"],rtl:[...Z3,"ArrowLeft"]},a1e={ltr:["ArrowLeft"],rtl:["ArrowRight"]},dv="Menu",[ry,l1e,c1e]=HG(dv),[Of,nk]=ca(dv,[c1e,Fg,VG]),rk=Fg(),XG=VG(),[u1e,Df]=Of(dv),[h1e,fv]=Of(dv),ZG=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,a=rk(e),[l,c]=A.useState(null),u=A.useRef(!1),h=ii(s),d=mR(i);return A.useEffect(()=>{const f=()=>{u.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>u.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),p.jsx(iR,{...a,children:p.jsx(u1e,{scope:e,open:n,onOpenChange:h,content:l,onContentChange:c,children:p.jsx(h1e,{scope:e,onClose:A.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:d,modal:o,children:r})})})};ZG.displayName=dv;var d1e="MenuAnchor",gR=A.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=rk(n);return p.jsx(ZE,{...i,...r,ref:e})});gR.displayName=d1e;var bR="MenuPortal",[f1e,JG]=Of(bR,{forceMount:void 0}),QG=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=Df(bR,e);return p.jsx(f1e,{scope:e,forceMount:n,children:p.jsx(Fi,{present:n||s.open,children:p.jsx(cv,{asChild:!0,container:i,children:r})})})};QG.displayName=bR;var Jo="MenuContent",[p1e,yR]=Of(Jo),eq=A.forwardRef((t,e)=>{const n=JG(Jo,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Df(Jo,t.__scopeMenu),o=fv(Jo,t.__scopeMenu);return p.jsx(ry.Provider,{scope:t.__scopeMenu,children:p.jsx(Fi,{present:r||s.open,children:p.jsx(ry.Slot,{scope:t.__scopeMenu,children:o.modal?p.jsx(m1e,{...i,ref:e}):p.jsx(g1e,{...i,ref:e})})})})}),m1e=A.forwardRef((t,e)=>{const n=Df(Jo,t.__scopeMenu),r=A.useRef(null),i=Wn(e,r);return A.useEffect(()=>{const s=r.current;if(s)return UL(s)},[]),p.jsx(vR,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Mt(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),g1e=A.forwardRef((t,e)=>{const n=Df(Jo,t.__scopeMenu);return p.jsx(vR,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),vR=A.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:d,onDismiss:f,disableOutsideScroll:m,...g}=t,b=Df(Jo,n),y=fv(Jo,n),v=rk(n),x=XG(n),w=l1e(n),[S,E]=A.useState(null),k=A.useRef(null),_=Wn(e,k,b.onContentChange),L=A.useRef(0),R=A.useRef(""),C=A.useRef(0),P=A.useRef(null),O=A.useRef("right"),N=A.useRef(0),H=m?qE:A.Fragment,Q=m?{as:uf,allowPinchZoom:!0}:void 0,X=j=>{const F=R.current+j,Y=w().filter(ee=>!ee.disabled),M=document.activeElement,D=Y.find(ee=>ee.ref.current===M)?.textValue,V=Y.map(ee=>ee.textValue),W=A1e(V,F,D),te=Y.find(ee=>ee.textValue===W)?.ref.current;(function ee(K){R.current=K,window.clearTimeout(L.current),K!==""&&(L.current=window.setTimeout(()=>ee(""),1e3))})(F),te&&setTimeout(()=>te.focus())};A.useEffect(()=>()=>window.clearTimeout(L.current),[]),BL();const J=A.useCallback(j=>O.current===P.current?.side&&N1e(j,P.current?.area),[]);return p.jsx(p1e,{scope:n,searchRef:R,onItemEnter:A.useCallback(j=>{J(j)&&j.preventDefault()},[J]),onItemLeave:A.useCallback(j=>{J(j)||(k.current?.focus(),E(null))},[J]),onTriggerLeave:A.useCallback(j=>{J(j)&&j.preventDefault()},[J]),pointerGraceTimerRef:C,onPointerGraceIntentChange:A.useCallback(j=>{P.current=j},[]),children:p.jsx(H,{...Q,children:p.jsx(WE,{asChild:!0,trapped:i,onMountAutoFocus:Mt(s,j=>{j.preventDefault(),k.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:p.jsx(lv,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:d,onDismiss:f,children:p.jsx(n1e,{asChild:!0,...x,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:E,onEntryFocus:Mt(l,j=>{y.isUsingKeyboardRef.current||j.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(sR,{role:"menu","aria-orientation":"vertical","data-state":gq(b.open),"data-radix-menu-content":"",dir:y.dir,...v,...g,ref:_,style:{outline:"none",...g.style},onKeyDown:Mt(g.onKeyDown,j=>{const Y=j.target.closest("[data-radix-menu-content]")===j.currentTarget,M=j.ctrlKey||j.altKey||j.metaKey,D=j.key.length===1;Y&&(j.key==="Tab"&&j.preventDefault(),!M&&D&&X(j.key));const V=k.current;if(j.target!==V||!s1e.includes(j.key))return;j.preventDefault();const te=w().filter(ee=>!ee.disabled).map(ee=>ee.ref.current);YG.includes(j.key)&&te.reverse(),C1e(te)}),onBlur:Mt(t.onBlur,j=>{j.currentTarget.contains(j.target)||(window.clearTimeout(L.current),R.current="")}),onPointerMove:Mt(t.onPointerMove,iy(j=>{const F=j.target,Y=N.current!==j.clientX;if(j.currentTarget.contains(F)&&Y){const M=j.clientX>N.current?"right":"left";O.current=M,N.current=j.clientX}}))})})})})})})});eq.displayName=Jo;var b1e="MenuGroup",xR=A.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(vn.div,{role:"group",...r,ref:e})});xR.displayName=b1e;var y1e="MenuLabel",tq=A.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(vn.div,{...r,ref:e})});tq.displayName=y1e;var tS="MenuItem",i8="menu.itemSelect",ik=A.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=A.useRef(null),o=fv(tS,t.__scopeMenu),a=yR(tS,t.__scopeMenu),l=Wn(e,s),c=A.useRef(!1),u=()=>{const h=s.current;if(!n&&h){const d=new CustomEvent(i8,{bubbles:!0,cancelable:!0});h.addEventListener(i8,f=>r?.(f),{once:!0}),uW(h,d),d.defaultPrevented?c.current=!1:o.onClose()}};return p.jsx(nq,{...i,ref:l,disabled:n,onClick:Mt(t.onClick,u),onPointerDown:h=>{t.onPointerDown?.(h),c.current=!0},onPointerUp:Mt(t.onPointerUp,h=>{c.current||h.currentTarget?.click()}),onKeyDown:Mt(t.onKeyDown,h=>{const d=a.searchRef.current!=="";n||d&&h.key===" "||Z3.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});ik.displayName=tS;var nq=A.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=yR(tS,n),a=XG(n),l=A.useRef(null),c=Wn(e,l),[u,h]=A.useState(!1),[d,f]=A.useState("");return A.useEffect(()=>{const m=l.current;m&&f((m.textContent??"").trim())},[s.children]),p.jsx(ry.ItemSlot,{scope:n,disabled:r,textValue:i??d,children:p.jsx(r1e,{asChild:!0,...a,focusable:!r,children:p.jsx(vn.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:c,onPointerMove:Mt(t.onPointerMove,iy(m=>{r?o.onItemLeave(m):(o.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Mt(t.onPointerLeave,iy(m=>o.onItemLeave(m))),onFocus:Mt(t.onFocus,()=>h(!0)),onBlur:Mt(t.onBlur,()=>h(!1))})})})}),v1e="MenuCheckboxItem",rq=A.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return p.jsx(lq,{scope:t.__scopeMenu,checked:n,children:p.jsx(ik,{role:"menuitemcheckbox","aria-checked":nS(n)?"mixed":n,...i,ref:e,"data-state":wR(n),onSelect:Mt(i.onSelect,()=>r?.(nS(n)?!0:!n),{checkForDefaultPrevented:!1})})})});rq.displayName=v1e;var iq="MenuRadioGroup",[x1e,_1e]=Of(iq,{value:void 0,onValueChange:()=>{}}),sq=A.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,s=ii(r);return p.jsx(x1e,{scope:t.__scopeMenu,value:n,onValueChange:s,children:p.jsx(xR,{...i,ref:e})})});sq.displayName=iq;var oq="MenuRadioItem",aq=A.forwardRef((t,e)=>{const{value:n,...r}=t,i=_1e(oq,t.__scopeMenu),s=n===i.value;return p.jsx(lq,{scope:t.__scopeMenu,checked:s,children:p.jsx(ik,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":wR(s),onSelect:Mt(r.onSelect,()=>i.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});aq.displayName=oq;var _R="MenuItemIndicator",[lq,w1e]=Of(_R,{checked:!1}),cq=A.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=w1e(_R,n);return p.jsx(Fi,{present:r||nS(s.checked)||s.checked===!0,children:p.jsx(vn.span,{...i,ref:e,"data-state":wR(s.checked)})})});cq.displayName=_R;var S1e="MenuSeparator",uq=A.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(vn.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});uq.displayName=S1e;var E1e="MenuArrow",hq=A.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=rk(n);return p.jsx(oR,{...i,...r,ref:e})});hq.displayName=E1e;var k1e="MenuSub",[lit,dq]=Of(k1e),Cb="MenuSubTrigger",fq=A.forwardRef((t,e)=>{const n=Df(Cb,t.__scopeMenu),r=fv(Cb,t.__scopeMenu),i=dq(Cb,t.__scopeMenu),s=yR(Cb,t.__scopeMenu),o=A.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=A.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return A.useEffect(()=>u,[u]),A.useEffect(()=>{const h=a.current;return()=>{window.clearTimeout(h),l(null)}},[a,l]),p.jsx(gR,{asChild:!0,...c,children:p.jsx(nq,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":gq(n.open),...t,ref:VE(e,i.onTriggerChange),onClick:h=>{t.onClick?.(h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Mt(t.onPointerMove,iy(h=>{s.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Mt(t.onPointerLeave,iy(h=>{u();const d=n.content?.getBoundingClientRect();if(d){const f=n.content?.dataset.side,m=f==="right",g=m?-5:5,b=d[m?"left":"right"],y=d[m?"right":"left"];s.onPointerGraceIntentChange({area:[{x:h.clientX+g,y:h.clientY},{x:b,y:d.top},{x:y,y:d.top},{x:y,y:d.bottom},{x:b,y:d.bottom}],side:f}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(h),h.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Mt(t.onKeyDown,h=>{const d=s.searchRef.current!=="";t.disabled||d&&h.key===" "||o1e[r.dir].includes(h.key)&&(n.onOpenChange(!0),n.content?.focus(),h.preventDefault())})})})});fq.displayName=Cb;var pq="MenuSubContent",mq=A.forwardRef((t,e)=>{const n=JG(Jo,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Df(Jo,t.__scopeMenu),o=fv(Jo,t.__scopeMenu),a=dq(pq,t.__scopeMenu),l=A.useRef(null),c=Wn(e,l);return p.jsx(ry.Provider,{scope:t.__scopeMenu,children:p.jsx(Fi,{present:r||s.open,children:p.jsx(ry.Slot,{scope:t.__scopeMenu,children:p.jsx(vR,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{o.isUsingKeyboardRef.current&&l.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Mt(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Mt(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:Mt(t.onKeyDown,u=>{const h=u.currentTarget.contains(u.target),d=a1e[o.dir].includes(u.key);h&&d&&(s.onOpenChange(!1),a.trigger?.focus(),u.preventDefault())})})})})})});mq.displayName=pq;function gq(t){return t?"open":"closed"}function nS(t){return t==="indeterminate"}function wR(t){return nS(t)?"indeterminate":t?"checked":"unchecked"}function C1e(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function T1e(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function A1e(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=T1e(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function P1e(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function N1e(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return P1e(n,e)}function iy(t){return e=>e.pointerType==="mouse"?t(e):void 0}var bq=ZG,yq=gR,vq=QG,xq=eq,_q=xR,wq=tq,Sq=ik,Eq=rq,kq=sq,Cq=aq,Tq=cq,Aq=uq,Pq=hq,Nq=fq,Lq=mq,SR="DropdownMenu",[L1e,cit]=ca(SR,[nk]),ws=nk(),[R1e,Rq]=L1e(SR),Iq=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=ws(e),c=A.useRef(null),[u=!1,h]=If({prop:i,defaultProp:s,onChange:o});return p.jsx(R1e,{scope:e,triggerId:Hc(),triggerRef:c,contentId:Hc(),open:u,onOpenChange:h,onOpenToggle:A.useCallback(()=>h(d=>!d),[h]),modal:a,children:p.jsx(bq,{...l,open:u,onOpenChange:h,dir:r,modal:a,children:n})})};Iq.displayName=SR;var Oq="DropdownMenuTrigger",Dq=A.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=Rq(Oq,n),o=ws(n);return p.jsx(yq,{asChild:!0,...o,children:p.jsx(vn.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:VE(e,s.triggerRef),onPointerDown:Mt(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:Mt(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});Dq.displayName=Oq;var I1e="DropdownMenuPortal",Mq=t=>{const{__scopeDropdownMenu:e,...n}=t,r=ws(e);return p.jsx(vq,{...r,...n})};Mq.displayName=I1e;var jq="DropdownMenuContent",Fq=A.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Rq(jq,n),s=ws(n),o=A.useRef(!1);return p.jsx(xq,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:Mt(t.onCloseAutoFocus,a=>{o.current||i.triggerRef.current?.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:Mt(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!i.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Fq.displayName=jq;var O1e="DropdownMenuGroup",D1e=A.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ws(n);return p.jsx(_q,{...i,...r,ref:e})});D1e.displayName=O1e;var M1e="DropdownMenuLabel",j1e=A.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ws(n);return p.jsx(wq,{...i,...r,ref:e})});j1e.displayName=M1e;var F1e="DropdownMenuItem",Bq=A.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ws(n);return p.jsx(Sq,{...i,...r,ref:e})});Bq.displayName=F1e;var B1e="DropdownMenuCheckboxItem",U1e=A.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ws(n);return p.jsx(Eq,{...i,...r,ref:e})});U1e.displayName=B1e;var $1e="DropdownMenuRadioGroup",H1e=A.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ws(n);return p.jsx(kq,{...i,...r,ref:e})});H1e.displayName=$1e;var z1e="DropdownMenuRadioItem",V1e=A.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ws(n);return p.jsx(Cq,{...i,...r,ref:e})});V1e.displayName=z1e;var W1e="DropdownMenuItemIndicator",G1e=A.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ws(n);return p.jsx(Tq,{...i,...r,ref:e})});G1e.displayName=W1e;var q1e="DropdownMenuSeparator",K1e=A.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ws(n);return p.jsx(Aq,{...i,...r,ref:e})});K1e.displayName=q1e;var Y1e="DropdownMenuArrow",Uq=A.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ws(n);return p.jsx(Pq,{...i,...r,ref:e})});Uq.displayName=Y1e;var X1e="DropdownMenuSubTrigger",Z1e=A.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ws(n);return p.jsx(Nq,{...i,...r,ref:e})});Z1e.displayName=X1e;var J1e="DropdownMenuSubContent",Q1e=A.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ws(n);return p.jsx(Lq,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Q1e.displayName=J1e;var sk=Iq,ok=Dq,ak=Mq,lk=Fq,im=Bq,eye=Uq;const s8=()=>p.jsx("span",{className:"px-1.5 py-0.5 rounded-full bg-blue-500/10 dark:bg-blue-900/10 text-[10px] font-medium text-blue-600 dark:text-blue-300 ml-2",children:"BETA"}),tye=({onSelectTab:t})=>{const e=Ot(nv);return p.jsxs(sk,{children:[p.jsx(ok,{asChild:!0,children:p.jsx(at.button,{className:"w-10 h-10 rounded-full bg-transparent flex items-center justify-center focus:outline-none",whileHover:{scale:1.02},whileTap:{scale:.98},children:e?.avatar?p.jsx("img",{src:e.avatar,alt:e?.username||"Profile",className:"w-full h-full rounded-full object-cover",loading:"eager",decoding:"sync"}):p.jsx("div",{className:"w-full h-full rounded-full flex items-center justify-center bg-white dark:bg-gray-800 text-gray-400 dark:text-gray-500",children:p.jsx("div",{className:"i-ph:question w-6 h-6"})})})}),p.jsx(ak,{children:p.jsxs(lk,{className:Ae("min-w-[240px] z-[250]","bg-white dark:bg-[#141414]","rounded-lg shadow-lg","border border-gray-200/50 dark:border-gray-800/50","animate-in fade-in-0 zoom-in-95","py-1"),sideOffset:5,align:"end",children:[p.jsxs("div",{className:Ae("px-4 py-3 flex items-center gap-3","border-b border-gray-200/50 dark:border-gray-800/50"),children:[p.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden flex-shrink-0 bg-white dark:bg-gray-800 shadow-sm",children:e?.avatar?p.jsx("img",{src:e.avatar,alt:e?.username||"Profile",className:Ae("w-full h-full","object-cover","transform-gpu","image-rendering-crisp"),loading:"eager",decoding:"sync"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 dark:text-gray-500 font-medium text-lg",children:p.jsx("span",{className:"relative -top-0.5",children:"?"})})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"font-medium text-sm text-gray-900 dark:text-white truncate",children:e?.username||"Guest User"}),e?.bio&&p.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e.bio})]})]}),p.jsxs(im,{className:Ae("flex items-center gap-2 px-4 py-2.5","text-sm text-gray-700 dark:text-gray-200","hover:bg-blue-50 dark:hover:bg-blue-900/10","hover:text-blue-500 dark:hover:text-blue-400","cursor-pointer transition-all duration-200","outline-none","group"),onClick:()=>t("profile"),children:[p.jsx("div",{className:"i-ph:user-circle w-4 h-4 text-gray-400 group-hover:text-blue-500 dark:group-hover:text-blue-400 transition-colors"})," ","Edit Profile"]}),p.jsxs(im,{className:Ae("flex items-center gap-2 px-4 py-2.5","text-sm text-gray-700 dark:text-gray-200","hover:bg-blue-50 dark:hover:bg-blue-900/10","hover:text-blue-500 dark:hover:text-blue-400","cursor-pointer transition-all duration-200","outline-none","group"),onClick:()=>t("settings"),children:[p.jsx("div",{className:"i-ph:gear-six w-4 h-4 text-gray-400 group-hover:text-blue-500 dark:group-hover:text-blue-400 transition-colors"})," ","Settings"]}),p.jsx("div",{className:"my-1 border-t border-gray-200/50 dark:border-gray-800/50"}),p.jsxs(im,{className:Ae("flex items-center gap-2 px-4 py-2.5","text-sm text-gray-700 dark:text-gray-200","hover:bg-blue-50 dark:hover:bg-blue-900/10","hover:text-blue-500 dark:hover:text-blue-400","cursor-pointer transition-all duration-200","outline-none","group"),onClick:()=>t("task-manager"),children:[p.jsx("div",{className:"i-ph:activity w-4 h-4 text-gray-400 group-hover:text-blue-500 dark:group-hover:text-blue-400 transition-colors"})," ","Task Manager",p.jsx(s8,{})]}),p.jsxs(im,{className:Ae("flex items-center gap-2 px-4 py-2.5","text-sm text-gray-700 dark:text-gray-200","hover:bg-blue-50 dark:hover:bg-blue-900/10","hover:text-blue-500 dark:hover:text-blue-400","cursor-pointer transition-all duration-200","outline-none","group"),onClick:()=>t("service-status"),children:[p.jsx("div",{className:"i-ph:heartbeat w-4 h-4 text-gray-400 group-hover:text-blue-500 dark:group-hover:text-blue-400 transition-colors"})," ","Service Status",p.jsx(s8,{})]})]})})]})},nye="_",rye="b",iye="c",sye="e",oye="g",aye="i",lye="k",cye="m",uye="o",hye="q",Ai={rayContainer:nye,lightRay:rye,ray1:iye,ray2:sye,ray3:oye,ray4:aye,ray5:lye,ray6:cye,ray7:uye,ray8:hye},dye=()=>p.jsxs("div",{className:`${Ai.rayContainer} `,children:[p.jsx("div",{className:`${Ai.lightRay} ${Ai.ray1}`}),p.jsx("div",{className:`${Ai.lightRay} ${Ai.ray2}`}),p.jsx("div",{className:`${Ai.lightRay} ${Ai.ray3}`}),p.jsx("div",{className:`${Ai.lightRay} ${Ai.ray4}`}),p.jsx("div",{className:`${Ai.lightRay} ${Ai.ray5}`}),p.jsx("div",{className:`${Ai.lightRay} ${Ai.ray6}`}),p.jsx("div",{className:`${Ai.lightRay} ${Ai.ray7}`}),p.jsx("div",{className:`${Ai.lightRay} ${Ai.ray8}`})]});function pv(t,e){let n;return function(...i){const s=()=>{clearTimeout(n),t(...i)};clearTimeout(n),n=setTimeout(s,e)}}function fye(){const t=Ot(nv),[e,n]=A.useState(!1),r=A.useCallback(pv((o,a)=>{Bw({[o]:a}),He.success(`${o.charAt(0).toUpperCase()+o.slice(1)} updated`)},1e3),[]),i=async o=>{const a=o.target.files?.[0];if(a)try{n(!0);const l=new FileReader;l.onloadend=()=>{const c=l.result;Bw({avatar:c}),n(!1),He.success("Profile picture updated")},l.onerror=()=>{console.error("Error reading file:",l.error),n(!1),He.error("Failed to update profile picture")},l.readAsDataURL(a)}catch(l){console.error("Error uploading avatar:",l),n(!1),He.error("Failed to update profile picture")}},s=(o,a)=>{Bw({[o]:a}),r(o,a)};return p.jsx("div",{className:"max-w-2xl mx-auto",children:p.jsx("div",{className:"space-y-6",children:p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-start gap-6 mb-8",children:[p.jsxs("div",{className:Ae("w-24 h-24 rounded-full overflow-hidden","bg-gray-100 dark:bg-gray-800/50","flex items-center justify-center","ring-1 ring-gray-200 dark:ring-gray-700","relative group","transition-all duration-300 ease-out","hover:ring-blue-500/30 dark:hover:ring-blue-500/30","hover:shadow-lg hover:shadow-blue-500/10"),children:[t.avatar?p.jsx("img",{src:t.avatar,alt:"Profile",className:Ae("w-full h-full object-cover","transition-all duration-300 ease-out","group-hover:scale-105 group-hover:brightness-90")}):p.jsx("div",{className:"i-ph:robot-fill w-16 h-16 text-gray-400 dark:text-gray-500 transition-colors group-hover:text-blue-500/70 transform -translate-y-1"}),p.jsxs("label",{className:Ae("absolute inset-0","flex items-center justify-center","bg-black/0 group-hover:bg-black/40","cursor-pointer transition-all duration-300 ease-out",e?"cursor-wait":""),children:[p.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:i,disabled:e}),e?p.jsx("div",{className:"i-ph:spinner-gap w-6 h-6 text-white animate-spin"}):p.jsx("div",{className:"i-ph:camera-plus w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-all duration-300 ease-out transform group-hover:scale-110"})]})]}),p.jsxs("div",{className:"flex-1 pt-1",children:[p.jsx("label",{className:"block text-base font-medium text-gray-900 dark:text-gray-100 mb-1",children:"Profile Picture"}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Upload a profile picture or avatar"})]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Username"}),p.jsxs("div",{className:"relative group",children:[p.jsx("div",{className:"absolute left-3.5 top-1/2 -translate-y-1/2",children:p.jsx("div",{className:"i-ph:user-circle-fill w-5 h-5 text-gray-400 dark:text-gray-500 transition-colors group-focus-within:text-blue-500"})}),p.jsx("input",{type:"text",value:t.username,onChange:o=>s("username",o.target.value),className:Ae("w-full pl-11 pr-4 py-2.5 rounded-xl","bg-white dark:bg-gray-800/50","border border-gray-200 dark:border-gray-700/50","text-gray-900 dark:text-white","placeholder-gray-400 dark:placeholder-gray-500","focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50","transition-all duration-300 ease-out"),placeholder:"Enter your username"})]})]}),p.jsxs("div",{className:"mb-8",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Bio"}),p.jsxs("div",{className:"relative group",children:[p.jsx("div",{className:"absolute left-3.5 top-3",children:p.jsx("div",{className:"i-ph:text-aa w-5 h-5 text-gray-400 dark:text-gray-500 transition-colors group-focus-within:text-blue-500"})}),p.jsx("textarea",{value:t.bio,onChange:o=>s("bio",o.target.value),className:Ae("w-full pl-11 pr-4 py-2.5 rounded-xl","bg-white dark:bg-gray-800/50","border border-gray-200 dark:border-gray-700/50","text-gray-900 dark:text-white","placeholder-gray-400 dark:placeholder-gray-500","focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50","transition-all duration-300 ease-out","resize-none","h-32"),placeholder:"Tell us about yourself"})]})]})]})})})}const rS=typeof navigator<"u"?navigator.platform.toLowerCase().includes("mac"):!1;typeof navigator<"u"&&navigator.platform.toLowerCase().includes("win");typeof navigator<"u"&&navigator.platform.toLowerCase().includes("linux");const DC=t=>{switch(t){case"meta":return rS?"":"Win";case"alt":return rS?"":"Alt";case"shift":return"";default:return t}};function pye(){const[t,e]=A.useState(""),[n,r]=A.useState(()=>{const i=localStorage.getItem("bolt_user_profile");return i?JSON.parse(i):{notifications:!0,language:"en",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}});return A.useEffect(()=>{e(Intl.DateTimeFormat().resolvedOptions().timeZone)},[]),A.useEffect(()=>{try{const s={...JSON.parse(localStorage.getItem("bolt_user_profile")||"{}"),notifications:n.notifications,language:n.language,timezone:n.timezone};localStorage.setItem("bolt_user_profile",JSON.stringify(s)),He.success("Settings updated")}catch(i){console.error("Error saving settings:",i),He.error("Failed to update settings")}},[n]),p.jsxs("div",{className:"space-y-4",children:[p.jsxs(at.div,{className:"bg-white dark:bg-[#0A0A0A] rounded-lg shadow-sm dark:shadow-none p-4 space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[p.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[p.jsx("div",{className:"i-ph:palette-fill w-4 h-4 text-blue-500"})," ",p.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Preferences"})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("div",{className:"i-ph:translate-fill w-4 h-4 text-bolt-elements-textSecondary"}),p.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary",children:"Language"})]}),p.jsxs("select",{value:n.language,onChange:i=>r(s=>({...s,language:i.target.value})),className:Ae("w-full px-3 py-2 rounded-lg text-sm","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","text-bolt-elements-textPrimary","focus:outline-none focus:ring-2 focus:ring-blue-500/30","transition-all duration-200"),children:[p.jsx("option",{value:"en",children:"English"}),p.jsx("option",{value:"es",children:"Espaol"}),p.jsx("option",{value:"fr",children:"Franais"}),p.jsx("option",{value:"de",children:"Deutsch"}),p.jsx("option",{value:"it",children:"Italiano"}),p.jsx("option",{value:"pt",children:"Portugus"}),p.jsx("option",{value:"ru",children:""}),p.jsx("option",{value:"zh",children:""}),p.jsx("option",{value:"ja",children:""}),p.jsx("option",{value:"ko",children:""})]})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("div",{className:"i-ph:bell-fill w-4 h-4 text-bolt-elements-textSecondary"}),p.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary",children:"Notifications"})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:n.notifications?"Notifications are enabled":"Notifications are disabled"}),p.jsx(Zo,{checked:n.notifications,onCheckedChange:i=>{r(a=>({...a,notifications:i}));const o={...JSON.parse(localStorage.getItem("bolt_user_profile")||"{}"),notifications:i};localStorage.setItem("bolt_user_profile",JSON.stringify(o)),window.dispatchEvent(new StorageEvent("storage",{key:"bolt_user_profile",newValue:JSON.stringify(o)})),He.success(`Notifications ${i?"enabled":"disabled"}`)}})]})]})]}),p.jsxs(at.div,{className:"bg-white dark:bg-[#0A0A0A] rounded-lg shadow-sm dark:shadow-none p-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[p.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[p.jsx("div",{className:"i-ph:clock-fill w-4 h-4 text-blue-500"})," ",p.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Time Settings"})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("div",{className:"i-ph:globe-fill w-4 h-4 text-bolt-elements-textSecondary"}),p.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary",children:"Timezone"})]}),p.jsx("select",{value:n.timezone,onChange:i=>r(s=>({...s,timezone:i.target.value})),className:Ae("w-full px-3 py-2 rounded-lg text-sm","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","text-bolt-elements-textPrimary","focus:outline-none focus:ring-2 focus:ring-blue-500/30","transition-all duration-200"),children:p.jsx("option",{value:t,children:t})})]})]}),p.jsxs(at.div,{className:"bg-white dark:bg-[#0A0A0A] rounded-lg shadow-sm dark:shadow-none p-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[p.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[p.jsx("div",{className:"i-ph:keyboard-fill w-4 h-4 text-blue-500"})," ",p.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Keyboard Shortcuts"})]}),p.jsx("div",{className:"space-y-2",children:p.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-[#FAFAFA] dark:bg-[#1A1A1A]",children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-sm text-bolt-elements-textPrimary",children:"Toggle Theme"}),p.jsx("span",{className:"text-xs text-bolt-elements-textSecondary",children:"Switch between light and dark mode"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("kbd",{className:"px-2 py-1 text-xs font-semibold text-bolt-elements-textSecondary bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] rounded shadow-sm",children:DC("meta")}),p.jsx("kbd",{className:"px-2 py-1 text-xs font-semibold text-bolt-elements-textSecondary bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] rounded shadow-sm",children:DC("alt")}),p.jsx("kbd",{className:"px-2 py-1 text-xs font-semibold text-bolt-elements-textSecondary bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] rounded shadow-sm",children:DC("shift")}),p.jsx("kbd",{className:"px-2 py-1 text-xs font-semibold text-bolt-elements-textSecondary bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] rounded shadow-sm",children:"D"})]})]})})]})]})}function In(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function eu(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function mye(t,e){const n=In(t);return isNaN(e)?eu(t,NaN):(e&&n.setDate(n.getDate()+e),n)}const $q=6048e5,gye=864e5,b_=43200,o8=1440;let bye={};function mv(){return bye}function pf(t,e){const n=mv(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=In(t),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function iS(t){return pf(t,{weekStartsOn:1})}function Hq(t){const e=In(t),n=e.getFullYear(),r=eu(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=iS(r),s=eu(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=iS(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function sS(t){const e=In(t);return e.setHours(0,0,0,0),e}function oS(t){const e=In(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function yye(t,e){const n=sS(t),r=sS(e),i=+n-oS(n),s=+r-oS(r);return Math.round((i-s)/gye)}function vye(t){const e=Hq(t),n=eu(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),iS(n)}function qw(t,e){const n=In(t),r=In(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function gv(t){return eu(t,Date.now())}function zq(t,e){const n=sS(t),r=sS(e);return+n==+r}function xye(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function _ye(t){if(!xye(t)&&typeof t!="number")return!1;const e=In(t);return!isNaN(Number(e))}function wye(t,e){const n=In(t),r=In(e),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function Sye(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function Eye(t,e){return+In(t)-+In(e)}function kye(t){const e=In(t);return e.setHours(23,59,59,999),e}function Cye(t){const e=In(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function Tye(t){const e=In(t);return+kye(e)==+Cye(e)}function Aye(t,e){const n=In(t),r=In(e),i=qw(n,r),s=Math.abs(wye(n,r));let o;if(s<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*s);let a=qw(n,r)===-i;Tye(In(t))&&s===1&&qw(t,r)===1&&(a=!1),o=i*(s-Number(a))}return o===0?0:o}function Pye(t,e,n){const r=Eye(t,e)/1e3;return Sye(n?.roundingMethod)(r)}function Nye(t){const e=In(t),n=eu(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Lye={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Rye=(t,e,n)=>{let r;const i=Lye[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function MC(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Iye={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Oye={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Dye={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Mye={date:MC({formats:Iye,defaultWidth:"full"}),time:MC({formats:Oye,defaultWidth:"full"}),dateTime:MC({formats:Dye,defaultWidth:"full"})},jye={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Fye=(t,e,n,r)=>jye[t];function W0(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n?.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n?.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const Bye={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Uye={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},$ye={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Hye={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},zye={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Vye={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Wye=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Gye={ordinalNumber:Wye,era:W0({values:Bye,defaultWidth:"wide"}),quarter:W0({values:Uye,defaultWidth:"wide",argumentCallback:t=>t-1}),month:W0({values:$ye,defaultWidth:"wide"}),day:W0({values:Hye,defaultWidth:"wide"}),dayPeriod:W0({values:zye,defaultWidth:"wide",formattingValues:Vye,defaultFormattingWidth:"wide"})};function G0(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Kye(a,h=>h.test(o)):qye(a,h=>h.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function qye(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Kye(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Yye(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const Xye=/^(\d+)(th|st|nd|rd)?/i,Zye=/\d+/i,Jye={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Qye={any:[/^b/i,/^(a|c)/i]},eve={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},tve={any:[/1/i,/2/i,/3/i,/4/i]},nve={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},rve={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ive={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},sve={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ove={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ave={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},lve={ordinalNumber:Yye({matchPattern:Xye,parsePattern:Zye,valueCallback:t=>parseInt(t,10)}),era:G0({matchPatterns:Jye,defaultMatchWidth:"wide",parsePatterns:Qye,defaultParseWidth:"any"}),quarter:G0({matchPatterns:eve,defaultMatchWidth:"wide",parsePatterns:tve,defaultParseWidth:"any",valueCallback:t=>t+1}),month:G0({matchPatterns:nve,defaultMatchWidth:"wide",parsePatterns:rve,defaultParseWidth:"any"}),day:G0({matchPatterns:ive,defaultMatchWidth:"wide",parsePatterns:sve,defaultParseWidth:"any"}),dayPeriod:G0({matchPatterns:ove,defaultMatchWidth:"any",parsePatterns:ave,defaultParseWidth:"any"})},Vq={code:"en-US",formatDistance:Rye,formatLong:Mye,formatRelative:Fye,localize:Gye,match:lve,options:{weekStartsOn:0,firstWeekContainsDate:1}};function cve(t){const e=In(t);return yye(e,Nye(e))+1}function uve(t){const e=In(t),n=+iS(e)-+vye(e);return Math.round(n/$q)+1}function Wq(t,e){const n=In(t),r=n.getFullYear(),i=mv(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=eu(t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=pf(o,e),l=eu(t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=pf(l,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function hve(t,e){const n=mv(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=Wq(t,e),s=eu(t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),pf(s,e)}function dve(t,e){const n=In(t),r=+pf(n,e)-+hve(n,e);return Math.round(r/$q)+1}function $n(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Eu={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return $n(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):$n(n+1,2)},d(t,e){return $n(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return $n(t.getHours()%12||12,e.length)},H(t,e){return $n(t.getHours(),e.length)},m(t,e){return $n(t.getMinutes(),e.length)},s(t,e){return $n(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return $n(i,e.length)}},Lp={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},a8={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Eu.y(t,e)},Y:function(t,e,n,r){const i=Wq(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return $n(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):$n(s,e.length)},R:function(t,e){const n=Hq(t);return $n(n,e.length)},u:function(t,e){const n=t.getFullYear();return $n(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return $n(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return $n(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Eu.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return $n(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=dve(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):$n(i,e.length)},I:function(t,e,n){const r=uve(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):$n(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Eu.d(t,e)},D:function(t,e,n){const r=cve(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):$n(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return $n(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return $n(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return $n(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Lp.noon:r===0?i=Lp.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Lp.evening:r>=12?i=Lp.afternoon:r>=4?i=Lp.morning:i=Lp.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Eu.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Eu.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):$n(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):$n(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Eu.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Eu.s(t,e)},S:function(t,e){return Eu.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return c8(r);case"XXXX":case"XX":return hd(r);case"XXXXX":case"XXX":default:return hd(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return c8(r);case"xxxx":case"xx":return hd(r);case"xxxxx":case"xxx":default:return hd(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+l8(r,":");case"OOOO":default:return"GMT"+hd(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+l8(r,":");case"zzzz":default:return"GMT"+hd(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return $n(r,e.length)},T:function(t,e,n){const r=t.getTime();return $n(r,e.length)}};function l8(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+$n(s,2)}function c8(t,e){return t%60===0?(t>0?"-":"+")+$n(Math.abs(t)/60,2):hd(t,e)}function hd(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=$n(Math.trunc(r/60),2),s=$n(r%60,2);return n+i+e+s}const u8=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Gq=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},fve=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return u8(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",u8(r,e)).replace("{{time}}",Gq(i,e))},pve={p:Gq,P:fve},mve=/^D+$/,gve=/^Y+$/,bve=["D","DD","YY","YYYY"];function yve(t){return mve.test(t)}function vve(t){return gve.test(t)}function xve(t,e,n){const r=_ve(t,e,n);if(console.warn(r),bve.includes(t))throw new RangeError(r)}function _ve(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const wve=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Sve=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Eve=/^'([^]*?)'?$/,kve=/''/g,Cve=/[a-zA-Z]/;function jC(t,e,n){const r=mv(),i=r.locale??Vq,s=r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=In(t);if(!_ye(a))throw new RangeError("Invalid time value");let l=e.match(Sve).map(u=>{const h=u[0];if(h==="p"||h==="P"){const d=pve[h];return d(u,i.formatLong)}return u}).join("").match(wve).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const h=u[0];if(h==="'")return{isToken:!1,value:Tve(u)};if(a8[h])return{isToken:!0,value:u};if(h.match(Cve))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:u}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(u=>{if(!u.isToken)return u.value;const h=u.value;(vve(h)||yve(h))&&xve(h,e,String(t));const d=a8[h[0]];return d(a,h,i.localize,c)}).join("")}function Tve(t){const e=t.match(Eve);return e?e[1].replace(kve,"'"):t}function Ave(t,e,n){const r=mv(),i=n?.locale??r.locale??Vq,s=2520,o=qw(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:o});let l,c;o>0?(l=In(e),c=In(t)):(l=In(t),c=In(e));const u=Pye(c,l),h=(oS(c)-oS(l))/1e3,d=Math.round((u-h)/60);let f;if(d<2)return n?.includeSeconds?u<5?i.formatDistance("lessThanXSeconds",5,a):u<10?i.formatDistance("lessThanXSeconds",10,a):u<20?i.formatDistance("lessThanXSeconds",20,a):u<40?i.formatDistance("halfAMinute",0,a):u<60?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",1,a):d===0?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",d,a);if(d<45)return i.formatDistance("xMinutes",d,a);if(d<90)return i.formatDistance("aboutXHours",1,a);if(d<o8){const m=Math.round(d/60);return i.formatDistance("aboutXHours",m,a)}else{if(d<s)return i.formatDistance("xDays",1,a);if(d<b_){const m=Math.round(d/o8);return i.formatDistance("xDays",m,a)}else if(d<b_*2)return f=Math.round(d/b_),i.formatDistance("aboutXMonths",f,a)}if(f=Aye(c,l),f<12){const m=Math.round(d/b_);return i.formatDistance("xMonths",m,a)}else{const m=f%12,g=Math.trunc(f/12);return m<3?i.formatDistance("aboutXYears",g,a):m<9?i.formatDistance("overXYears",g,a):i.formatDistance("almostXYears",g+1,a)}}function Pve(t,e){return Ave(t,gv(t),e)}function Nve(t,e){const n=In(t),r=In(e);return n.getTime()>r.getTime()}function Lve(t,e,n){const r=pf(t,n),i=pf(e,n);return+r==+i}function Rve(t,e){const n=In(t),r=In(e);return n.getFullYear()===r.getFullYear()}function Ive(t,e){return Lve(t,gv(t),e)}function Ove(t){return Rve(t,gv(t))}function Dve(t){return zq(t,gv(t))}function qq(t,e){return mye(t,-e)}function Mve(t){return zq(t,qq(gv(t),1))}const jve=()=>{const[t,e]=A.useState("all"),n=Ot(Ut.logs);A.useEffect(()=>{const u=performance.now();return()=>{const h=performance.now()-u;Ut.logPerformanceMetric("NotificationsTab","mount-duration",h)}},[]);const r=()=>{const u=Object.keys(n).length;Ut.logInfo("Cleared notifications",{type:"notification_clear",message:`Cleared ${u} notifications`,clearedCount:u,component:"notifications"}),Ut.clearLogs()},i=u=>{Ut.logInfo("Update link clicked",{type:"update_click",message:"User clicked update link",updateUrl:u,component:"notifications"}),window.open(u,"_blank")},s=u=>{Ut.logInfo("Notification filter changed",{type:"filter_change",message:`Filter changed to ${u}`,previousFilter:t,newFilter:u,component:"notifications"}),e(u)},o=Object.values(n).filter(u=>t==="all"?!0:t==="update"?u.details?.type==="update":t==="system"?u.category==="system":t==="provider"?u.category==="provider":t==="network"?u.category==="network":u.level===t).sort((u,h)=>new Date(h.timestamp).getTime()-new Date(u.timestamp).getTime()),a=(u,h)=>{if(h==="update")return{icon:"i-ph:arrow-circle-up",color:"text-purple-500 dark:text-purple-400",bg:"hover:bg-purple-500/10 dark:hover:bg-purple-500/20"};switch(u){case"error":return{icon:"i-ph:warning-circle",color:"text-red-500 dark:text-red-400",bg:"hover:bg-red-500/10 dark:hover:bg-red-500/20"};case"warning":return{icon:"i-ph:warning",color:"text-yellow-500 dark:text-yellow-400",bg:"hover:bg-yellow-500/10 dark:hover:bg-yellow-500/20"};case"info":return{icon:"i-ph:info",color:"text-blue-500 dark:text-blue-400",bg:"hover:bg-blue-500/10 dark:hover:bg-blue-500/20"};default:return{icon:"i-ph:bell",color:"text-gray-500 dark:text-gray-400",bg:"hover:bg-gray-500/10 dark:hover:bg-gray-500/20"}}},l=u=>u.type==="update"?p.jsxs("div",{className:"flex flex-col gap-2",children:[p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:u.message}),p.jsxs("div",{className:"flex flex-col gap-1 text-xs text-gray-500 dark:text-gray-500",children:[p.jsxs("p",{children:["Current Version: ",u.currentVersion]}),p.jsxs("p",{children:["Latest Version: ",u.latestVersion]}),p.jsxs("p",{children:["Branch: ",u.branch]})]}),p.jsxs("button",{onClick:()=>u.updateUrl&&i(u.updateUrl),className:Ae("mt-2 inline-flex items-center gap-2","rounded-lg px-3 py-1.5","text-sm font-medium","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","text-gray-900 dark:text-white","hover:bg-purple-500/10 dark:hover:bg-purple-500/20","transition-all duration-200"),children:[p.jsx("span",{className:"i-ph:git-branch text-lg"}),"View Changes"]})]}):u.message?p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:u.message}):null,c=[{id:"all",label:"All Notifications",icon:"i-ph:bell",color:"#9333ea"},{id:"system",label:"System",icon:"i-ph:gear",color:"#6b7280"},{id:"update",label:"Updates",icon:"i-ph:arrow-circle-up",color:"#9333ea"},{id:"error",label:"Errors",icon:"i-ph:warning-circle",color:"#ef4444"},{id:"warning",label:"Warnings",icon:"i-ph:warning",color:"#f59e0b"},{id:"info",label:"Information",icon:"i-ph:info",color:"#3b82f6"},{id:"provider",label:"Providers",icon:"i-ph:robot",color:"#10b981"},{id:"network",label:"Network",icon:"i-ph:wifi-high",color:"#6366f1"}];return p.jsxs("div",{className:"flex h-full flex-col gap-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(sk,{children:[p.jsx(ok,{asChild:!0,children:p.jsxs("button",{className:Ae("flex items-center gap-2","rounded-lg px-3 py-1.5","text-sm text-gray-900 dark:text-white","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-500/10 dark:hover:bg-purple-500/20","transition-all duration-200"),children:[p.jsx("span",{className:Ae("text-lg",c.find(u=>u.id===t)?.icon||"i-ph:funnel"),style:{color:c.find(u=>u.id===t)?.color}}),c.find(u=>u.id===t)?.label||"Filter Notifications",p.jsx("span",{className:"i-ph:caret-down text-lg text-gray-500 dark:text-gray-400"})]})}),p.jsx(ak,{children:p.jsx(lk,{className:"min-w-[200px] bg-white dark:bg-[#0A0A0A] rounded-lg shadow-lg py-1 z-[250] animate-in fade-in-0 zoom-in-95 border border-[#E5E5E5] dark:border-[#1A1A1A]",sideOffset:5,align:"start",side:"bottom",children:c.map(u=>p.jsxs(im,{className:"group flex items-center px-4 py-2.5 text-sm text-gray-700 dark:text-gray-200 hover:bg-purple-500/10 dark:hover:bg-purple-500/20 cursor-pointer transition-colors",onClick:()=>s(u.id),children:[p.jsx("div",{className:"mr-3 flex h-5 w-5 items-center justify-center",children:p.jsx("div",{className:Ae(u.icon,"text-lg group-hover:text-purple-500 transition-colors"),style:{color:u.color}})}),p.jsx("span",{className:"group-hover:text-purple-500 transition-colors",children:u.label})]},u.id))})})]}),p.jsxs("button",{onClick:r,className:Ae("group flex items-center gap-2","rounded-lg px-3 py-1.5","text-sm text-gray-900 dark:text-white","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-500/10 dark:hover:bg-purple-500/20","transition-all duration-200"),children:[p.jsx("span",{className:"i-ph:trash text-lg text-gray-500 dark:text-gray-400 group-hover:text-purple-500 transition-colors"}),"Clear All"]})]}),p.jsx("div",{className:"flex flex-col gap-4",children:o.length===0?p.jsxs(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:Ae("flex flex-col items-center justify-center gap-4","rounded-lg p-8 text-center","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]"),children:[p.jsx("span",{className:"i-ph:bell-slash text-4xl text-gray-400 dark:text-gray-600"}),p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"No Notifications"}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"You're all caught up!"})]})]}):o.map(u=>{const h=a(u.level,u.details?.type);return p.jsx(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:Ae("flex flex-col gap-2","rounded-lg p-4","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]",h.bg,"transition-all duration-200"),children:p.jsxs("div",{className:"flex items-start justify-between gap-4",children:[p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("span",{className:Ae("text-lg",h.icon,h.color)}),p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:u.message}),u.details&&l(u.details),p.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Category: ",u.category,u.subCategory?` > ${u.subCategory}`:""]})]})]}),p.jsx("time",{className:"shrink-0 text-xs text-gray-500 dark:text-gray-400",children:Pve(new Date(u.timestamp),{addSuffix:!0})})]})},u.id)})})]})},Kq=typeof window<"u"&&typeof localStorage<"u";function Xd(t){if(!Kq)return null;try{const e=localStorage.getItem(t);return e?JSON.parse(e):null}catch(e){return console.error(`Error reading from localStorage key "${t}":`,e),null}}function Fve(t,e){if(Kq)try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.error(`Error writing to localStorage key "${t}":`,n)}}const Bve=Ws("ChatHistory");async function Uve(){if(typeof indexedDB>"u"){console.error("indexedDB is not available in this environment.");return}return new Promise(t=>{const e=indexedDB.open("boltHistory",1);e.onupgradeneeded=n=>{const r=n.target.result;if(!r.objectStoreNames.contains("chats")){const i=r.createObjectStore("chats",{keyPath:"id"});i.createIndex("id","id",{unique:!0}),i.createIndex("urlId","urlId",{unique:!0})}},e.onsuccess=n=>{t(n.target.result)},e.onerror=n=>{t(void 0),Bve.error(n.target.error)}})}async function Kw(t){return new Promise((e,n)=>{const s=t.transaction("chats","readonly").objectStore("chats").getAll();s.onsuccess=()=>e(s.result),s.onerror=()=>n(s.error)})}async function aS(t,e,n,r,i,s,o){return new Promise((a,l)=>{const u=t.transaction("chats","readwrite").objectStore("chats");if(s&&isNaN(Date.parse(s))){l(new Error("Invalid timestamp"));return}const h=u.put({id:e,messages:n,urlId:r,description:i,timestamp:s??new Date().toISOString(),metadata:o});h.onsuccess=()=>a(),h.onerror=()=>l(h.error)})}async function tg(t,e){return await Hve(t,e)||await $ve(t,e)}async function $ve(t,e){return new Promise((n,r)=>{const a=t.transaction("chats","readonly").objectStore("chats").index("urlId").get(e);a.onsuccess=()=>n(a.result),a.onerror=()=>r(a.error)})}async function Hve(t,e){return new Promise((n,r)=>{const o=t.transaction("chats","readonly").objectStore("chats").get(e);o.onsuccess=()=>n(o.result),o.onerror=()=>r(o.error)})}async function J3(t,e){return new Promise((n,r)=>{const o=t.transaction("chats","readwrite").objectStore("chats").delete(e);o.onsuccess=()=>n(void 0),o.onerror=()=>r(o.error)})}async function Yq(t){return new Promise((e,n)=>{const s=t.transaction("chats","readonly").objectStore("chats").getAllKeys();s.onsuccess=()=>{const o=s.result.reduce((a,l)=>Math.max(+a,+l),0);e(String(+o+1))},s.onerror=()=>n(s.error)})}async function Xq(t,e){const n=await zve(t);if(n.includes(e)){let r=2;for(;n.includes(`${e}-${r}`);)r++;return`${e}-${r}`}else return e}async function zve(t){return new Promise((e,n)=>{const i=t.transaction("chats","readonly").objectStore("chats"),s=[],o=i.openCursor();o.onsuccess=a=>{const l=a.target.result;l?(s.push(l.value.urlId),l.continue()):e(s)},o.onerror=()=>{n(o.error)}})}async function Vve(t,e,n){const r=await tg(t,e);if(!r)throw new Error("Chat not found");const i=r.messages.findIndex(o=>o.id===n);if(i===-1)throw new Error("Message not found");const s=r.messages.slice(0,i+1);return ER(t,r.description?`${r.description} (fork)`:"Forked chat",s)}async function Wve(t,e){const n=await tg(t,e);if(!n)throw new Error("Chat not found");return ER(t,`${n.description||"Chat"} (copy)`,n.messages)}async function ER(t,e,n,r){const i=await Yq(t),s=await Xq(t,i);return await aS(t,i,n,s,e,void 0,r),s}async function Gve(t,e,n){const r=await tg(t,e);if(!r)throw new Error("Chat not found");if(!n.trim())throw new Error("Description cannot be empty");await aS(t,e,r.messages,r.urlId,n,r.timestamp,r.metadata)}function cl(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function h8(t,e){for(var n="",r=0,i=-1,s=0,o,a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(n.length===2||n.length===1){n="",r=0,i=a,s=0;continue}}e&&(n.length>0?n+="/..":n="..",r=2)}else n.length>0?n+="/"+t.slice(i+1,a):n=t.slice(i+1,a),r=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return n}function qve(t,e){var n=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+r:n+t+r:r}var ym={resolve:function(){for(var e="",n=!1,r,i=arguments.length-1;i>=-1&&!n;i--){var s;i>=0?s=arguments[i]:(r===void 0&&(r=Qn.cwd()),s=r),cl(s),s.length!==0&&(e=s+"/"+e,n=s.charCodeAt(0)===47)}return e=h8(e,!n),n?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(cl(e),e.length===0)return".";var n=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=h8(e,!n),e.length===0&&!n&&(e="."),e.length>0&&r&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return cl(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,n=0;n<arguments.length;++n){var r=arguments[n];cl(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":ym.normalize(e)},relative:function(e,n){if(cl(e),cl(n),e===n||(e=ym.resolve(e),n=ym.resolve(n),e===n))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var i=e.length,s=i-r,o=1;o<n.length&&n.charCodeAt(o)===47;++o);for(var a=n.length,l=a-o,c=s<l?s:l,u=-1,h=0;h<=c;++h){if(h===c){if(l>c){if(n.charCodeAt(o+h)===47)return n.slice(o+h+1);if(h===0)return n.slice(o+h)}else s>c&&(e.charCodeAt(r+h)===47?u=h:h===0&&(u=0));break}var d=e.charCodeAt(r+h),f=n.charCodeAt(o+h);if(d!==f)break;d===47&&(u=h)}var m="";for(h=r+u+1;h<=i;++h)(h===i||e.charCodeAt(h)===47)&&(m.length===0?m+="..":m+="/..");return m.length>0?m+n.slice(o+u):(o+=u,n.charCodeAt(o)===47&&++o,n.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(cl(e),e.length===0)return".";for(var n=e.charCodeAt(0),r=n===47,i=-1,s=!0,o=e.length-1;o>=1;--o)if(n=e.charCodeAt(o),n===47){if(!s){i=o;break}}else s=!1;return i===-1?r?"/":".":r&&i===1?"//":e.slice(0,i)},basename:function(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');cl(e);var r=0,i=-1,s=!0,o;if(n!==void 0&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var a=n.length-1,l=-1;for(o=e.length-1;o>=0;--o){var c=e.charCodeAt(o);if(c===47){if(!s){r=o+1;break}}else l===-1&&(s=!1,l=o+1),a>=0&&(c===n.charCodeAt(a)?--a===-1&&(i=o):(a=-1,i=l))}return r===i?i=l:i===-1&&(i=e.length),e.slice(r,i)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!s){r=o+1;break}}else i===-1&&(s=!1,i=o+1);return i===-1?"":e.slice(r,i)}},extname:function(e){cl(e);for(var n=-1,r=0,i=-1,s=!0,o=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(l===47){if(!s){r=a+1;break}continue}i===-1&&(s=!1,i=a+1),l===46?n===-1?n=a:o!==1&&(o=1):n!==-1&&(o=-1)}return n===-1||i===-1||o===0||o===1&&n===i-1&&n===r+1?"":e.slice(n,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return qve("/",e)},parse:function(e){cl(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;var r=e.charCodeAt(0),i=r===47,s;i?(n.root="/",s=1):s=0;for(var o=-1,a=0,l=-1,c=!0,u=e.length-1,h=0;u>=s;--u){if(r=e.charCodeAt(u),r===47){if(!c){a=u+1;break}continue}l===-1&&(c=!1,l=u+1),r===46?o===-1?o=u:h!==1&&(h=1):o!==-1&&(h=-1)}return o===-1||l===-1||h===0||h===1&&o===l-1&&o===a+1?l!==-1&&(a===0&&i?n.base=n.name=e.slice(1,l):n.base=n.name=e.slice(a,l)):(a===0&&i?(n.name=e.slice(1,o),n.base=e.slice(1,l)):(n.name=e.slice(a,o),n.base=e.slice(a,l)),n.ext=e.slice(o,l)),a>0?n.dir=e.slice(0,a-1):i&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};ym.posix=ym;var it=ym;const xc=_s(it),Cd={join:(...t)=>xc.join(...t),dirname:t=>xc.dirname(t),basename:(t,e)=>xc.basename(t,e),extname:t=>xc.extname(t),relative:(t,e)=>xc.relative(t,e),isAbsolute:t=>xc.isAbsolute(t),normalize:t=>xc.normalize(t),parse:t=>xc.parse(t),format:t=>xc.format(t)};function Fo(t){throw new Error(`Unreachable: ${t}`)}const wa=Ws("ActionRunner");class bd extends Error{_output;_header;constructor(e,n){const r=`Failed To Execute Shell Command: ${e}

Output:
${n}`;super(r),this._header=e,this._output=n,Object.setPrototypeOf(this,bd.prototype),this.name="ActionCommandError"}get output(){return this._output}get header(){return this._header}}class Kve{#t;#n=Promise.resolve();#e;runnerId=qn(`${Date.now()}`);actions=Rh({});onAlert;buildOutput;constructor(e,n,r){this.#t=e,this.#e=n,this.onAlert=r}addAction(e){const{actionId:n}=e;if(this.actions.get()[n])return;const s=new AbortController;this.actions.setKey(n,{...e.action,status:"pending",executed:!1,abort:()=>{s.abort(),this.#o(n,{status:"aborted"})},abortSignal:s.signal}),this.#n.then(()=>{this.#o(n,{status:"running"})})}async runAction(e,n=!1){const{actionId:r}=e,i=this.actions.get()[r];i||Fo(`Action ${r} not found`),!i.executed&&(n&&i.type!=="file"||(this.#o(r,{...i,...e.action,executed:!n}),this.#n=this.#n.then(()=>this.#r(r,n)).catch(s=>{console.error("Action failed:",s)}),await this.#n))}async#r(e,n=!1){const r=this.actions.get()[e];this.#o(e,{status:"running"});try{switch(r.type){case"shell":{await this.#a(r);break}case"file":{await this.#s(r);break}case"build":{const i=await this.#c(r);this.buildOutput=i;break}case"start":{this.#i(r).then(()=>this.#o(e,{status:"complete"})).catch(i=>{r.abortSignal.aborted||(this.#o(e,{status:"failed",error:"Action failed"}),wa.error(`[${r.type}]:Action failed

`,i),i instanceof bd&&this.onAlert?.({type:"error",title:"Dev Server Failed",description:i.header,content:i.output}))}),await new Promise(i=>setTimeout(i,2e3));return}}this.#o(e,{status:n?"running":r.abortSignal.aborted?"aborted":"complete"})}catch(i){if(r.abortSignal.aborted||(this.#o(e,{status:"failed",error:"Action failed"}),wa.error(`[${r.type}]:Action failed

`,i),!(i instanceof bd)))return;throw this.onAlert?.({type:"error",title:"Dev Server Failed",description:i.header,content:i.output}),i}}async#a(e){e.type!=="shell"&&Fo("Expected shell action");const n=this.#e();await n.ready(),(!n||!n.terminal||!n.process)&&Fo("Shell terminal not found");const r=await n.executeCommand(this.runnerId.get(),e.content,()=>{wa.debug(`[${e.type}]:Aborting Action

`,e),e.abort()});if(wa.debug(`${e.type} Shell Response: [exit code:${r?.exitCode}]`),r?.exitCode!=0)throw new bd("Failed To Execute Shell Command",r?.output||"No Output Available")}async#i(e){e.type!=="start"&&Fo("Expected shell action"),this.#e||Fo("Shell terminal not found");const n=this.#e();await n.ready(),(!n||!n.terminal||!n.process)&&Fo("Shell terminal not found");const r=await n.executeCommand(this.runnerId.get(),e.content,()=>{wa.debug(`[${e.type}]:Aborting Action

`,e),e.abort()});if(wa.debug(`${e.type} Shell Response: [exit code:${r?.exitCode}]`),r?.exitCode!=0)throw new bd("Failed To Start Application",r?.output||"No Output Available");return r}async#s(e){e.type!=="file"&&Fo("Expected file action");const n=await this.#t,r=Cd.relative(n.workdir,e.filePath);let i=Cd.dirname(r);if(i=i.replace(/\/+$/g,""),i!==".")try{await n.fs.mkdir(i,{recursive:!0}),wa.debug("Created folder",i)}catch(s){wa.error(`Failed to create folder

`,s)}try{await n.fs.writeFile(r,e.content),wa.debug(`File written ${r}`)}catch(s){wa.error(`Failed to write file

`,s)}}#o(e,n){const r=this.actions.get();this.actions.setKey(e,{...r[e],...n})}async getFileHistory(e){try{const n=await this.#t,r=this.#l(e),i=await n.fs.readFile(r,"utf-8");return JSON.parse(i)}catch(n){return wa.error("Failed to get file history:",n),null}}async saveFileHistory(e,n){const r=this.#l(e);await this.#s({type:"file",filePath:r,content:JSON.stringify(n),changeSource:"auto-save"})}#l(e){return Cd.join(".history",e)}async#c(e){e.type!=="build"&&Fo("Expected build action");const n=await this.#t,r=await n.spawn("npm",["run","build"]);let i="";r.output.pipeTo(new WritableStream({write(a){i+=a}}));const s=await r.exit;if(s!==0)throw new bd("Build Failed",i||"No Output Available");return{path:Cd.join(n.workdir,"dist"),exitCode:s,output:i}}}const Yve="modulepreload",Xve=function(t){return"/"+t},d8={},ye=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");i=Promise.allSettled(n.map(l=>{if(l=Xve(l),l in d8)return;d8[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":Yve,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((d,f)=>{h.addEventListener("load",d),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},Zve="https://stackblitz.com",Jve=new Error;Jve.stack="";function Qve(){let t,e;function n(){e=new Promise(r=>t=r)}return n(),{get promise(){return e},resolve(r){return t(r)},reset:n}}let y_;const exe={authComplete:Qve(),get editorOrigin(){return y_==null&&(y_=new URL(globalThis.WEBCONTAINER_API_IFRAME_URL??Zve).origin),y_},set editorOrigin(t){y_=t}};function Zq(t){const e={d:{}};for(const n of Object.keys(t)){const r=t[n];if("file"in r){const s=r.file.contents,o=typeof s=="string"?s:txe(s),a=typeof s=="string"?{}:{b:!0};e.d[n]={f:{c:o,...a}};continue}const i=Zq(r.directory);e.d[n]=i}return e}function txe(t){let e="";for(const n of t)e+=String.fromCharCode(n);return e}var t1;(function(t){t.UncaughtException="PREVIEW_UNCAUGHT_EXCEPTION",t.UnhandledRejection="PREVIEW_UNHANDLED_REJECTION",t.ConsoleError="PREVIEW_CONSOLE_ERROR"})(t1||(t1={}));var nxe=Object.defineProperty,rxe=(t,e)=>{for(var n in e)nxe(t,n,{get:e[n],enumerable:!0})},Qo={};rxe(Qo,{createEndpoint:()=>Jq,expose:()=>TR,proxy:()=>sK,proxyMarker:()=>kR,releaseProxy:()=>Qq,transfer:()=>iK,transferHandlers:()=>CR,windowEndpoint:()=>lxe,wrap:()=>nK});var kR=Symbol("Comlink.proxy"),Jq=Symbol("Comlink.endpoint"),Qq=Symbol("Comlink.releaseProxy"),Q3=Symbol("Comlink.thrown"),eK=t=>typeof t=="object"&&t!==null||typeof t=="function",ixe={canHandle:t=>eK(t)&&t[kR],serialize(t){const{port1:e,port2:n}=new MessageChannel;return TR(t,e),[n,[n]]},deserialize(t){return t.start(),nK(t)}},sxe={canHandle:t=>eK(t)&&Q3 in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},CR=new Map([["proxy",ixe],["throw",sxe]]);function TR(t,e=self){e.addEventListener("message",function n(r){if(!r||!r.data)return;const{id:i,type:s,path:o}=Object.assign({path:[]},r.data),a=(r.data.argumentList||[]).map(yd);let l;try{const c=o.slice(0,-1).reduce((h,d)=>h[d],t),u=o.reduce((h,d)=>h[d],t);switch(s){case 0:l=u;break;case 1:c[o.slice(-1)[0]]=yd(r.data.value),l=!0;break;case 2:l=u.apply(c,a);break;case 3:{const h=new u(...a);l=sK(h)}break;case 4:{const{port1:h,port2:d}=new MessageChannel;TR(t,d),l=iK(h,[h])}break;case 5:l=void 0;break}}catch(c){l={value:c,[Q3]:0}}Promise.resolve(l).catch(c=>({value:c,[Q3]:0})).then(c=>{const[u,h]=AR(c);e.postMessage(Object.assign(Object.assign({},u),{id:i}),h),s===5&&(e.removeEventListener("message",n),tK(e))})}),e.start&&e.start()}function oxe(t){return t.constructor.name==="MessagePort"}function tK(t){oxe(t)&&t.close()}function nK(t,e){return eP(t,[],e)}function v_(t){if(t)throw new Error("Proxy has been released and is not useable")}function eP(t,e=[],n=function(){}){let r=!1;const i=new Proxy(n,{get(s,o){if(v_(r),o===Qq)return()=>Rp(t,{type:5,path:e.map(a=>a.toString())}).then(()=>{tK(t),r=!0});if(o==="then"){if(e.length===0)return{then:()=>i};const a=Rp(t,{type:0,path:e.map(l=>l.toString())}).then(yd);return a.then.bind(a)}return eP(t,[...e,o])},set(s,o,a){v_(r);const[l,c]=AR(a);return Rp(t,{type:1,path:[...e,o].map(u=>u.toString()),value:l},c).then(yd)},apply(s,o,a){v_(r);const l=e[e.length-1];if(l===Jq)return Rp(t,{type:4}).then(yd);if(l==="bind")return eP(t,e.slice(0,-1));const[c,u]=f8(a);return Rp(t,{type:2,path:e.map(h=>h.toString()),argumentList:c},u).then(yd)},construct(s,o){v_(r);const[a,l]=f8(o);return Rp(t,{type:3,path:e.map(c=>c.toString()),argumentList:a},l).then(yd)}});return i}function axe(t){return Array.prototype.concat.apply([],t)}function f8(t){const e=t.map(AR);return[e.map(n=>n[0]),axe(e.map(n=>n[1]))]}var rK=new WeakMap;function iK(t,e){return rK.set(t,e),t}function sK(t){return Object.assign(t,{[kR]:!0})}function lxe(t,e=self,n="*"){return{postMessage:(r,i)=>t.postMessage(r,n,i),addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e)}}function AR(t){for(const[e,n]of CR)if(n.canHandle(t)){const[r,i]=n.serialize(t);return[{type:3,name:e,value:r},i]}return[{type:0,value:t},rK.get(t)||[]]}function yd(t){switch(t.type){case 3:return CR.get(t.name).deserialize(t.value);case 0:return t.value}}function Rp(t,e,n){return new Promise(r=>{const i=cxe();t.addEventListener("message",function s(o){!o.data||!o.data.id||o.data.id!==i||(t.removeEventListener("message",s),r(o.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:i},e),n)})}function cxe(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const uxe=[t1.ConsoleError,t1.UncaughtException,t1.UnhandledRejection];function hxe(t){return!(t==null||typeof t!="object"||!("type"in t)||!uxe.includes(t.type))}let x_=null,__=null,FC={};const dxe=new TextDecoder,fxe=new TextEncoder;class Td{_instance;_runtimeInfo;fs;internal;static _instance=null;_tornDown=!1;_unsubscribeFromTokenChangedListener=()=>{};constructor(e,n,r){this._instance=e,this._runtimeInfo=r,this.fs=new xxe(n),this.internal=new pxe(e)}async spawn(e,n,r){let i=[];Array.isArray(n)?i=n:r=n;let s,o=new ReadableStream;if(r?.output!==!1){const g=UC();s=g.push,o=g.stream}let a,l,c,u;if(l=new ReadableStream,u=new ReadableStream,r?.stdout){const g=UC();a=g.push,l=g.stream}if(r?.stderr){const g=UC();c=g.push,u=g.stream}const h=Yw(BC(s)),d=Yw(BC(a)),f=Yw(BC(c)),m=await this._instance.run({command:e,args:i,cwd:r?.cwd,env:r?.env,terminal:r?.terminal},d,f,h);return new vxe(m,o,l,u)}on(e,n){if(e==="preview-message"){const s=n;n=o=>{hxe(o)&&s(o)}}const{listener:r,subscribe:i}=tP(n);return i(this._instance.on(e,Qo.proxy(r)))}mount(e,n){const r=e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):fxe.encode(JSON.stringify(Zq(e)));return this._instance.loadFiles(Qo.transfer(r,[r.buffer]),{mountPoints:n?.mountPoint})}get path(){return this._runtimeInfo.path}get workdir(){return this._runtimeInfo.cwd}teardown(){if(this._tornDown)throw new Error("WebContainer already torn down");this._tornDown=!0,this._unsubscribeFromTokenChangedListener(),this.fs._teardown(),this._instance.teardown(),this._instance[Qo.releaseProxy](),Td._instance===this&&(Td._instance=null)}static async boot(e={}){const{workdirName:n}=e;if(window.crossOriginIsolated&&e.coep==="none"&&console.warn(`A Cross-Origin-Embedder-Policy header is required in cross origin isolated environments.
Set the 'coep' option to 'require-corp'.`),n?.includes("/")||n===".."||n===".")throw new Error("workdirName should be a valid folder name");for(;x_;)await x_;if(Td._instance)throw new Error("Only a single WebContainer instance can be booted");const r=_xe(e);x_=r.catch(()=>{});try{const i=await r;return Td._instance=i,i}finally{x_=null}}}class pxe{_instance;constructor(e){this._instance=e}watchPaths(e,n){const{listener:r,subscribe:i}=tP(n);return i(this._instance.watchPaths(e,Qo.proxy(r)))}getProcesses(){return this._instance.getProcesses()}onProcessesRemove(e){const{listener:n,subscribe:r}=tP(e);return r(this._instance.onProcessesRemove(Qo.proxy(n)))}serialize(e,n){return this._instance.serialize(e,n)}}const mxe=1,gxe=2;class bxe{name;_type;constructor(e,n){this.name=e,this._type=n}isFile(){return this._type===mxe}isDirectory(){return this._type===gxe}}class yxe{_apiClient;_path;_options;_listener;_wrappedListener;_watcher;_closed=!1;constructor(e,n,r,i){this._apiClient=e,this._path=n,this._options=r,this._listener=i,this._apiClient._watchers.add(this),this._wrappedListener=(s,o)=>{this._listener&&!this._closed&&this._listener(s,o)},this._apiClient._fs.watch(this._path,this._options,Yw(this._wrappedListener)).then(s=>{this._watcher=s,this._closed&&this._teardown()}).catch(console.error)}close(){this._closed||(this._closed=!0,this._apiClient._watchers.delete(this),this._teardown())}_teardown(){this._watcher?.close().finally(()=>{this._watcher?.[Qo.releaseProxy]()})}}class vxe{output;input;exit;_process;stdout;stderr;constructor(e,n,r,i){this.output=n,this._process=e,this.input=new WritableStream({write:s=>{this._getProcess()?.write(s).catch(()=>{})}}),this.exit=this._onExit(),this.stdout=r,this.stderr=i}kill(){this._getProcess()?.kill()}resize(e){this._getProcess()?.resize(e)}async _onExit(){try{return await this._process.onExit}finally{this._process?.[Qo.releaseProxy](),this._process=null}}_getProcess(){return this._process==null&&console.warn("This process already exited"),this._process}}class xxe{_fs;_watchers=new Set([]);constructor(e){this._fs=e}rm(...e){return this._fs.rm(...e)}async readFile(e,n){return await this._fs.readFile(e,n)}async rename(e,n){return await this._fs.rename(e,n)}async writeFile(e,n,r){if(n instanceof Uint8Array){const i=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);n=Qo.transfer(new Uint8Array(i),[i])}await this._fs.writeFile(e,n,r)}async readdir(e,n){const r=await this._fs.readdir(e,n);return Sxe(r)||Exe(r)?r:r.map(s=>new bxe(s.name,s["Symbol(type)"]))}async mkdir(e,n){return await this._fs.mkdir(e,n)}watch(e,n,r){return typeof n=="function"&&(r=n,n=null),new yxe(this,e,n,r)}_teardown(){this._fs[Qo.releaseProxy]();for(const e of this._watchers)e.close()}}async function _xe(t){const{serverPromise:e}=wxe(t),r=await(await e).build({host:window.location.host,version:"1.3.0-internal.10",workdirName:t.workdirName,forwardPreviewErrors:t.forwardPreviewErrors}),i=await r.fs(),s=await r.runtimeInfo();return new Td(r,i,s)}function BC(t){if(t!=null)return e=>{e instanceof Uint8Array?t(dxe.decode(e)):e==null&&t(null)}}function Yw(t){if(t!=null)return Qo.proxy(t)}function wxe(t){if(__!=null)return t.coep!==FC.coep&&(console.warn(`Attempting to boot WebContainer with 'coep: ${t.coep}'`),console.warn(`First boot had 'coep: ${FC.coep}', new settings will not take effect!`)),{serverPromise:__};const e=document.createElement("iframe");e.style.display="none",e.setAttribute("allow","cross-origin-isolated");const n=kxe();t.coep&&n.searchParams.set("coep",t.coep),e.src=n.toString();const{origin:r}=n;return FC={...t},__=new Promise(i=>{const s=o=>{if(o.origin!==r)return;const{data:a}=o;if(a.type==="init"){i(Qo.wrap(o.ports[0]));return}if(a.type==="warning"){console[a.level].call(console,a.message);return}};window.addEventListener("message",s)}),document.body.insertBefore(e,null),{serverPromise:__}}function Sxe(t){return typeof t[0]=="string"}function Exe(t){return t[0]instanceof Uint8Array}function kxe(){const t=new URL(exe.editorOrigin);return t.pathname="/headless",t.searchParams.set("version","1.3.0-internal.10"),t}function UC(){let t=null;return{stream:new ReadableStream({start(r){t=r}}),push:r=>{r!=null?t?.enqueue(r):(t?.close(),t=null)}}}function tP(t){let e=!1,n=()=>{};return{subscribe(i){return i.then(s=>{n=s,e&&n()}),()=>{e=!0,n()}},listener:(...i)=>{e||t(...i)}}}function Cxe(t){const e=n=>{if(!/^https?:\/\/[^\/]+\.webcontainer-api\.io(\/.*)?$/.test(n))return n;const i=/^https?:\/\/[^\/]+\.webcontainer-api\.io\/(.*?)$/;return n.match(i)?.[1]||""};return t.split(`
`).map(n=>n.replace(/(https?:\/\/[^\/]+\.webcontainer-api\.io\/[^\s\)]+)/g,r=>e(r))).join(`
`)}let Gu=new Promise(()=>{});Gu=Promise.resolve().then(()=>Td.boot({coep:"credentialless",workdirName:gz,forwardPreviewErrors:!0})).then(async t=>{const{workbenchStore:e}=await ye(async()=>{const{workbenchStore:n}=await Promise.resolve().then(()=>owe);return{workbenchStore:n}},void 0);return t.on("preview-message",n=>{if(console.log("WebContainer preview message:",n),n.type==="PREVIEW_UNCAUGHT_EXCEPTION"||n.type==="PREVIEW_UNHANDLED_REJECTION"){const r=n.type==="PREVIEW_UNHANDLED_REJECTION";e.actionAlert.set({type:"preview",title:r?"Unhandled Promise Rejection":"Uncaught Exception",description:n.message,content:`Error occurred at ${n.pathname}${n.search}${n.hash}
Port: ${n.port}

Stack trace:
${Cxe(n.stack||"")}`,source:"preview"})}}),t});class Txe{#t;selectedFile=qn();documents=Rh({});currentDocument=XN([this.documents,this.selectedFile],(e,n)=>{if(n)return e[n]});constructor(e){this.#t=e}setDocuments(e){const n=this.documents.value;this.documents.set(Object.fromEntries(Object.entries(e).map(([r,i])=>{if(i===void 0||i.type==="folder")return;const s=n?.[r];return[r,{value:i.content,filePath:r,scroll:s?.scroll}]}).filter(Boolean)))}setSelectedFile(e){this.selectedFile.set(e)}updateScrollPosition(e,n){const i=this.documents.get()[e];i&&this.documents.setKey(e,{...i,scroll:n})}updateFile(e,n){const i=this.documents.get()[e];if(!i)return;i.value!==n&&this.documents.setKey(e,{...i,value:n})}}function Xw(t,e){if(!t)return null;const n="utf8",r="binary",i=e?.chunkLength??24;let s=e?.chunkBegin??0;if(e?.chunkBegin==null){let o=Xw(t,{chunkLength:i,chunkBegin:s});return o===n&&(s=Math.max(0,Math.floor(t.length/2)-i),o=Xw(t,{chunkLength:i,chunkBegin:s}),o===n&&(s=Math.max(0,t.length-i),o=Xw(t,{chunkLength:i,chunkBegin:s}))),o}else{if(s=Axe(t,s),s===-1)return r;const o=Pxe(t,Math.min(t.length,s+i));if(o>t.length)return r;const a=t.toString(n,s,o);for(let l=0;l<a.length;++l){const c=a.charCodeAt(l);if(c===65533||c<=8)return r}return n}}function Axe(t,e){if(e===0)return 0;if(!Nxe(t[e]))return e;let n=e-3;return n>=0&&vm(t[n])||(n=e-2,n>=0&&(vm(t[n])||lS(t[n])))||(n=e-1,n>=0&&(vm(t[n])||lS(t[n])||oK(t[n])))?n:-1}function Pxe(t,e){if(e===t.length)return e;let n=e-3;if(n>=0&&vm(t[n]))return e+1;if(n=e-2,n>=0){if(vm(t[n]))return e+2;if(lS(t[n]))return e+1}if(n=e-1,n>=0){if(vm(t[n]))return e+3;if(lS(t[n]))return e+2;if(oK(t[n]))return e+1}return e}function vm(t){return t>>3===30}function lS(t){return t>>4===14}function oK(t){return t>>5===6}function Nxe(t){return t>>6===2}function Lxe(t,e){let n,r=[],i=Promise.resolve();const s=()=>{n=self.setTimeout(async()=>{await i,r.length>0&&(i=Promise.resolve(e(r))),n=void 0,r=[]},t)};return(...o)=>{r.push(o),n||s()}}function Oh(){}Oh.prototype={diff:function(e,n){var r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.callback;typeof i=="function"&&(s=i,i={}),this.options=i;var o=this;function a(w){return s?(setTimeout(function(){s(void 0,w)},0),!0):w}e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e)),n=this.removeEmpty(this.tokenize(n));var l=n.length,c=e.length,u=1,h=l+c;i.maxEditLength&&(h=Math.min(h,i.maxEditLength));var d=(r=i.timeout)!==null&&r!==void 0?r:1/0,f=Date.now()+d,m=[{oldPos:-1,lastComponent:void 0}],g=this.extractCommon(m[0],n,e,0);if(m[0].oldPos+1>=c&&g+1>=l)return a([{value:this.join(n),count:n.length}]);var b=-1/0,y=1/0;function v(){for(var w=Math.max(b,-u);w<=Math.min(y,u);w+=2){var S=void 0,E=m[w-1],k=m[w+1];E&&(m[w-1]=void 0);var _=!1;if(k){var L=k.oldPos-w;_=k&&0<=L&&L<l}var R=E&&E.oldPos+1<c;if(!_&&!R){m[w]=void 0;continue}if(!R||_&&E.oldPos+1<k.oldPos?S=o.addToPath(k,!0,void 0,0):S=o.addToPath(E,void 0,!0,1),g=o.extractCommon(S,n,e,w),S.oldPos+1>=c&&g+1>=l)return a(Rxe(o,S.lastComponent,n,e,o.useLongestToken));m[w]=S,S.oldPos+1>=c&&(y=Math.min(y,w-1)),g+1>=l&&(b=Math.max(b,w+1))}u++}if(s)(function w(){setTimeout(function(){if(u>h||Date.now()>f)return s();v()||w()},0)})();else for(;u<=h&&Date.now()<=f;){var x=v();if(x)return x}},addToPath:function(e,n,r,i){var s=e.lastComponent;return s&&s.added===n&&s.removed===r?{oldPos:e.oldPos+i,lastComponent:{count:s.count+1,added:n,removed:r,previousComponent:s.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:n,removed:r,previousComponent:s}}},extractCommon:function(e,n,r,i){for(var s=n.length,o=r.length,a=e.oldPos,l=a-i,c=0;l+1<s&&a+1<o&&this.equals(n[l+1],r[a+1]);)l++,a++,c++;return c&&(e.lastComponent={count:c,previousComponent:e.lastComponent}),e.oldPos=a,l},equals:function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},removeEmpty:function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function Rxe(t,e,n,r,i){for(var s=[],o;e;)s.push(e),o=e.previousComponent,delete e.previousComponent,e=o;s.reverse();for(var a=0,l=s.length,c=0,u=0;a<l;a++){var h=s[a];if(h.removed){if(h.value=t.join(r.slice(u,u+h.count)),u+=h.count,a&&s[a-1].added){var f=s[a-1];s[a-1]=s[a],s[a]=f}}else{if(!h.added&&i){var d=n.slice(c,c+h.count);d=d.map(function(g,b){var y=r[u+b];return y.length>g.length?y:g}),h.value=t.join(d)}else h.value=t.join(n.slice(c,c+h.count));c+=h.count,h.added||(u+=h.count)}}var m=s[l-1];return l>1&&typeof m.value=="string"&&(m.added||m.removed)&&t.equals("",m.value)&&(s[l-2].value+=m.value,s.pop()),s}var p8=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,m8=/\S/,aK=new Oh;aK.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!m8.test(t)&&!m8.test(e)};aK.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&p8.test(e[n])&&p8.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};var PR=new Oh;PR.tokenize=function(t){this.options.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),e.push(i))}return e};function ng(t,e,n){return PR.diff(t,e,n)}var Ixe=new Oh;Ixe.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var Oxe=new Oh;Oxe.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function Zw(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Zw=function(e){return typeof e}:Zw=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zw(t)}function $C(t){return Dxe(t)||Mxe(t)||jxe(t)||Fxe()}function Dxe(t){if(Array.isArray(t))return nP(t)}function Mxe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function jxe(t,e){if(t){if(typeof t=="string")return nP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nP(t,e)}}function nP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Bxe=Object.prototype.toString,sy=new Oh;sy.useLongestToken=!0;sy.tokenize=PR.tokenize;sy.castInput=function(t){var e=this.options,n=e.undefinedReplacement,r=e.stringifyReplacer,i=r===void 0?function(s,o){return typeof o>"u"?n:o}:r;return typeof t=="string"?t:JSON.stringify(rP(t,null,null,i),i,"  ")};sy.equals=function(t,e){return Oh.prototype.equals.call(sy,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function rP(t,e,n,r,i){e=e||[],n=n||[],r&&(t=r(i,t));var s;for(s=0;s<e.length;s+=1)if(e[s]===t)return n[s];var o;if(Bxe.call(t)==="[object Array]"){for(e.push(t),o=new Array(t.length),n.push(o),s=0;s<t.length;s+=1)o[s]=rP(t[s],e,n,r,i);return e.pop(),n.pop(),o}if(t&&t.toJSON&&(t=t.toJSON()),Zw(t)==="object"&&t!==null){e.push(t),o={},n.push(o);var a=[],l;for(l in t)t.hasOwnProperty(l)&&a.push(l);for(a.sort(),s=0;s<a.length;s+=1)l=a[s],o[l]=rP(t[l],e,n,r,l);e.pop(),n.pop()}else o=t;return o}var iP=new Oh;iP.tokenize=function(t){return t.slice()};iP.join=iP.removeEmpty=function(t){return t};function Uxe(t,e,n,r,i,s,o){o||(o={}),typeof o.context>"u"&&(o.context=4);var a=ng(n,r,o);if(!a)return;a.push({value:"",lines:[]});function l(y){return y.map(function(v){return" "+v})}for(var c=[],u=0,h=0,d=[],f=1,m=1,g=function(v){var x=a[v],w=x.lines||x.value.replace(/\n$/,"").split(`
`);if(x.lines=w,x.added||x.removed){var S;if(!u){var E=a[v-1];u=f,h=m,E&&(d=o.context>0?l(E.lines.slice(-o.context)):[],u-=d.length,h-=d.length)}(S=d).push.apply(S,$C(w.map(function(N){return(x.added?"+":"-")+N}))),x.added?m+=w.length:f+=w.length}else{if(u)if(w.length<=o.context*2&&v<a.length-2){var k;(k=d).push.apply(k,$C(l(w)))}else{var _,L=Math.min(w.length,o.context);(_=d).push.apply(_,$C(l(w.slice(0,L))));var R={oldStart:u,oldLines:f-u+L,newStart:h,newLines:m-h+L,lines:d};if(v>=a.length-2&&w.length<=o.context){var C=/\n$/.test(n),P=/\n$/.test(r),O=w.length==0&&d.length>R.oldLines;!C&&O&&n.length>0&&d.splice(R.oldLines,0,"\\ No newline at end of file"),(!C&&!O||!P)&&d.push("\\ No newline at end of file")}c.push(R),u=0,h=0,d=[]}f+=w.length,m+=w.length}},b=0;b<a.length;b++)g(b);return{oldFileName:t,newFileName:e,oldHeader:i,newHeader:s,hunks:c}}function lK(t){if(Array.isArray(t))return t.map(lK).join(`
`);var e=[];t.oldFileName==t.newFileName&&e.push("Index: "+t.oldFileName),e.push("==================================================================="),e.push("--- "+t.oldFileName+(typeof t.oldHeader>"u"?"":"	"+t.oldHeader)),e.push("+++ "+t.newFileName+(typeof t.newHeader>"u"?"":"	"+t.newHeader));for(var n=0;n<t.hunks.length;n++){var r=t.hunks[n];r.oldLines===0&&(r.oldStart-=1),r.newLines===0&&(r.newStart-=1),e.push("@@ -"+r.oldStart+","+r.oldLines+" +"+r.newStart+","+r.newLines+" @@"),e.push.apply(e,r.lines)}return e.join(`
`)+`
`}function $xe(t,e,n,r,i,s,o){return lK(Uxe(t,e,n,r,i,s,o))}function Hxe(t,e){const n={};let r=!1;for(const[i,s]of e){const o=t[i];if(o?.type!=="file")continue;const a=cK(i,s,o.content);a&&(r=!0,a.length>o.content.length?n[i]={type:"file",content:o.content}:n[i]={type:"diff",content:a})}if(r)return n}function cK(t,e,n){let r=$xe(t,t,e,n);const i=`--- ${t}
+++ ${t}
`,s=r.indexOf(i);if(s>=0&&(r=r.slice(s+i.length)),r!=="")return r}const zxe=new RegExp(`^${Kc}/`);function n1(t){return t.replace(zxe,"")}const g8=Ws("FilesStore"),Vxe=new TextDecoder("utf8",{fatal:!0});class Wxe{#t;#n=0;#e=new Map;files=Rh({});get filesCount(){return this.#n}constructor(e){this.#t=e,this.#r()}getFile(e){const n=this.files.get()[e];if(n?.type==="file")return n}getFileModifications(){return Hxe(this.files.get(),this.#e)}getModifiedFiles(){let e;for(const[n,r]of this.#e){const i=this.files.get()[n];i?.type==="file"&&i.content!==r&&(e||(e={}),e[n]=i)}return e}resetFileModifications(){this.#e.clear()}async saveFile(e,n){const r=await this.#t;try{const i=Cd.relative(r.workdir,e);if(!i)throw new Error(`EINVAL: invalid file path, write '${i}'`);const s=this.getFile(e)?.content;!s&&s!==""&&Fo("Expected content to be defined"),await r.fs.writeFile(i,n),this.#e.has(e)||this.#e.set(e,s),this.files.setKey(e,{type:"file",content:n,isBinary:!1}),g8.info("File updated")}catch(i){throw g8.error(`Failed to update file content

`,i),i}}async#r(){(await this.#t).internal.watchPaths({include:[`${Kc}/**`],exclude:["**/node_modules",".git"],includeContent:!0},Lxe(100,this.#a.bind(this)))}#a(e){const n=e.flat(2);for(const{type:r,path:i,buffer:s}of n){const o=i.replace(/\/+$/g,"");switch(r){case"add_dir":{this.files.setKey(o,{type:"folder"});break}case"remove_dir":{this.files.setKey(o,void 0);for(const[a]of Object.entries(this.files))a.startsWith(o)&&this.files.setKey(a,void 0);break}case"add_file":case"change":{r==="add_file"&&this.#n++;let a="";const l=Gxe(s);l||(a=this.#i(s)),this.files.setKey(o,{type:"file",content:a,isBinary:l});break}case"remove_file":{this.#n--,this.files.setKey(o,void 0);break}}}}#i(e){if(!e||e.byteLength===0)return"";try{return Vxe.decode(e)}catch(n){return console.log(n),""}}}function Gxe(t){return t===void 0?!1:Xw(qxe(t),{chunkLength:100})==="binary"}function qxe(t){return MH.from(t.buffer,t.byteOffset,t.byteLength)}const Kxe="preview-updates";class Yxe{#t=new Map;#n;#e;#r=new Map;#a=new Set;#i=new Map;#s=300;#o;previews=qn([]);constructor(e){if(this.#n=e,this.#e=new BroadcastChannel(Kxe),this.#o=new BroadcastChannel("storage-sync-channel"),this.#e.onmessage=n=>{const{type:r,previewId:i}=n.data;if(r==="file-change"){const s=n.data.timestamp,o=this.#r.get(i)||0;s>o&&(this.#r.set(i,s),this.refreshPreview(i))}},this.#o.onmessage=n=>{const{storage:r,source:i}=n.data;r&&i!==this._getTabId()&&this._syncStorage(r)},typeof window<"u"){const n=localStorage.setItem;localStorage.setItem=(...r)=>{n.apply(localStorage,r),this._broadcastStorageSync()}}this.#l()}_getTabId(){return typeof window<"u"?(window._tabId||(window._tabId=Math.random().toString(36).substring(2,15)),window._tabId):""}_syncStorage(e){if(typeof window<"u"&&(Object.entries(e).forEach(([r,i])=>{try{Object.getPrototypeOf(localStorage).setItem.call(localStorage,r,i)}catch(s){console.error("[Preview] Error syncing storage:",s)}}),this.previews.get().forEach(r=>{const i=this.getPreviewId(r.baseUrl);i&&this.refreshPreview(i)}),typeof window<"u"&&window.location)){const r=document.querySelector("iframe");r&&(r.src=r.src)}}_broadcastStorageSync(){if(typeof window<"u"){const e={};for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);r&&(e[r]=localStorage.getItem(r)||"")}this.#o.postMessage({type:"storage-sync",storage:e,source:this._getTabId(),timestamp:Date.now()})}}async#l(){const e=await this.#n;e.on("server-ready",(n,r)=>{console.log("[Preview] Server ready on port:",n,r),this.broadcastUpdate(r),this._broadcastStorageSync()});try{(await e.fs.watch("**/*",{persistent:!0})).addEventListener("change",async()=>{const r=this.previews.get();for(const i of r){const s=this.getPreviewId(i.baseUrl);s&&this.broadcastFileChange(s)}}),typeof window<"u"&&new MutationObserver(i=>{this._broadcastStorageSync()}).observe(document.body,{childList:!0,subtree:!0,characterData:!0,attributes:!0})}catch(n){console.error("[Preview] Error setting up watchers:",n)}e.on("port",(n,r,i)=>{let s=this.#t.get(n);if(r==="close"&&s){this.#t.delete(n),this.previews.set(this.previews.get().filter(a=>a.port!==n));return}const o=this.previews.get();s||(s={port:n,ready:r==="open",baseUrl:i},this.#t.set(n,s),o.push(s)),s.ready=r==="open",s.baseUrl=i,this.previews.set([...o]),r==="open"&&this.broadcastUpdate(i)})}getPreviewId(e){const n=e.match(/^https?:\/\/([^.]+)\.local-credentialless\.webcontainer-api\.io/);return n?n[1]:null}broadcastStateChange(e){const n=Date.now();this.#r.set(e,n),this.#e.postMessage({type:"state-change",previewId:e,timestamp:n})}broadcastFileChange(e){const n=Date.now();this.#r.set(e,n),this.#e.postMessage({type:"file-change",previewId:e,timestamp:n})}broadcastUpdate(e){const n=this.getPreviewId(e);if(n){const r=Date.now();this.#r.set(n,r),this.#e.postMessage({type:"file-change",previewId:n,timestamp:r})}}refreshPreview(e){const n=this.#i.get(e);n&&clearTimeout(n);const r=setTimeout(()=>{const i=this.previews.get(),s=i.find(o=>this.getPreviewId(o.baseUrl)===e);s&&(s.ready=!1,this.previews.set([...i]),requestAnimationFrame(()=>{s.ready=!0,this.previews.set([...i])})),this.#i.delete(e)},this.#s);this.#i.set(e,r)}}function uK(){if(typeof Promise.withResolvers=="function")return Promise.withResolvers();let t,e;const n=new Promise((r,i)=>{t=r,e=i});return{resolve:t,reject:e,promise:n}}async function Xxe(t,e){const n=[],r=await t.spawn("/bin/jsh",["--osc",...n],{terminal:{cols:e.cols??80,rows:e.rows??15}}),i=r.input.getWriter(),s=r.output,o=uK();let a=!1;return s.pipeTo(new WritableStream({write(l){if(!a){const[,c]=l.match(/\x1b\]654;([^\x07]+)\x07/)||[];c==="interactive"&&(a=!0,o.resolve())}e.write(l)}})),e.onData(l=>{a&&i.write(l)}),await o.promise,r}class Zxe{#t;#n;#e;#r;#a;executionState=qn();#i;#s;constructor(){this.#n=new Promise(e=>{this.#t=e})}ready(){return this.#n}async init(e,n){this.#e=e,this.#r=n;const{process:r,output:i}=await this.newBoltShellProcess(e,n);this.#a=r,this.#i=i.getReader(),await this.waitTillOscCode("interactive"),this.#t?.()}get terminal(){return this.#r}get process(){return this.#a}async executeCommand(e,n,r){if(!this.process||!this.terminal)return;const i=this.executionState.get();i?.active&&i.abort&&i.abort(),this.terminal.input(""),await this.waitTillOscCode("prompt"),i&&i.executionPrms&&await i.executionPrms,this.terminal.input(n.trim()+`
`);const s=this.getCurrentExecutionResult();this.executionState.set({sessionId:e,active:!0,executionPrms:s,abort:r});const o=await s;if(this.executionState.set({sessionId:e,active:!1}),o)try{o.output=Jxe(o.output)}catch(a){console.log("failed to format terminal output",a)}return o}async newBoltShellProcess(e,n){const r=[],i=await e.spawn("/bin/jsh",["--osc",...r],{terminal:{cols:n.cols??80,rows:n.rows??15}}),s=i.input.getWriter();this.#s=s;const[o,a]=i.output.tee(),l=uK();let c=!1;return a.pipeTo(new WritableStream({write(u){if(!c){const[,h]=u.match(/\x1b\]654;([^\x07]+)\x07/)||[];h==="interactive"&&(c=!0,l.resolve())}n.write(u)}})),n.onData(u=>{c&&s.write(u)}),await l.promise,{process:i,output:o}}async getCurrentExecutionResult(){const{output:e,exitCode:n}=await this.waitTillOscCode("exit");return{output:e,exitCode:n}}async waitTillOscCode(e){let n="",r=0;if(!this.#i)return{output:n,exitCode:r};const i=this.#i;for(;;){const{value:s,done:o}=await i.read();if(o)break;const a=s||"";n+=a;const[,l,,,c]=a.match(/\x1b\]654;([^\x07=]+)=?((-?\d+):(\d+))?\x07/)||[];if(l==="exit"&&(r=parseInt(c,10)),l===e)break}return{output:n,exitCode:r}}}function Jxe(t){return t.replace(/\x1b\](\d+;[^\x07\x1b]*|\d+[^\x07\x1b]*)\x07/g,"").replace(/\](\d+;[^\n]*|\d+[^\n]*)/g,"").replace(/\u001b\[[\?]?[0-9;]*[a-zA-Z]/g,"").replace(/\x1b\[[\?]?[0-9;]*[a-zA-Z]/g,"").replace(/\u001b\[[0-9;]*m/g,"").replace(/\x1b\[[0-9;]*m/g,"").replace(/\u001b/g,"").replace(/\x1b/g,"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).replace(/\n{3,}/g,`

`).replace(/^([~\/][^\n]+)/m,`$1
`).replace(/(?<!^|\n)>/g,`
>`).replace(/(?<!^|\n|\w)(error|failed|warning|Error|Failed|Warning):/g,`
$1:`).replace(/(?<!^|\n|\/)(at\s+(?!async|sync))/g,`
at `).replace(/\bat\s+async/g,"at async").replace(/(?<!^|\n)(npm ERR!)/g,`
$1`).split(`
`).map(o=>o.trim()).filter(o=>o.length>0).join(`
`).replace(/\n{3,}/g,`

`).replace(/:\s+/g,": ").replace(/\s{2,}/g," ").replace(/^\s+|\s+$/g,"").replace(/\u0000/g,"")}function Qxe(){return new Zxe}const e_e="\x1B[0m",t_e={red:"\x1B[1;31m"},b8={red:t=>`${t_e.red}${t}${e_e}`};class n_e{#t;#n=[];#e=Qxe();showTerminal=qn(!0);constructor(e){this.#t=e}get boltTerminal(){return this.#e}toggleTerminal(e){this.showTerminal.set(e!==void 0?e:!this.showTerminal.get())}async attachBoltTerminal(e){try{const n=await this.#t;await this.#e.init(n,e)}catch(n){e.write(b8.red(`Failed to spawn bolt shell

`)+n.message);return}}async attachTerminal(e){try{const n=await Xxe(await this.#t,e);this.#n.push({terminal:e,process:n})}catch(n){e.write(b8.red(`Failed to spawn shell

`)+n.message);return}}onTerminalResize(e,n){for(const{process:r}of this.#n)r.resize({cols:e,rows:n})}}function w_(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var hK={exports:{}};(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,s){function o(c,u){if(!i[c]){if(!r[c]){var h=typeof w_=="function"&&w_;if(!u&&h)return h(c,!0);if(a)return a(c,!0);var d=new Error("Cannot find module '"+c+"'");throw d.code="MODULE_NOT_FOUND",d}var f=i[c]={exports:{}};r[c][0].call(f.exports,function(m){var g=r[c][1][m];return o(g||m)},f,f.exports,n,r,i,s)}return i[c].exports}for(var a=typeof w_=="function"&&w_,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(n,r,i){var s=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var c,u,h,d,f,m,g,b=[],y=0,v=l.length,x=v,w=s.getTypeOf(l)!=="string";y<l.length;)x=v-y,h=w?(c=l[y++],u=y<v?l[y++]:0,y<v?l[y++]:0):(c=l.charCodeAt(y++),u=y<v?l.charCodeAt(y++):0,y<v?l.charCodeAt(y++):0),d=c>>2,f=(3&c)<<4|u>>4,m=1<x?(15&u)<<2|h>>6:64,g=2<x?63&h:64,b.push(a.charAt(d)+a.charAt(f)+a.charAt(m)+a.charAt(g));return b.join("")},i.decode=function(l){var c,u,h,d,f,m,g=0,b=0,y="data:";if(l.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var v,x=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&x--,l.charAt(l.length-2)===a.charAt(64)&&x--,x%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=o.uint8array?new Uint8Array(0|x):new Array(0|x);g<l.length;)c=a.indexOf(l.charAt(g++))<<2|(d=a.indexOf(l.charAt(g++)))>>4,u=(15&d)<<4|(f=a.indexOf(l.charAt(g++)))>>2,h=(3&f)<<6|(m=a.indexOf(l.charAt(g++))),v[b++]=c,f!==64&&(v[b++]=u),m!==64&&(v[b++]=h);return v}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function c(u,h,d,f,m){this.compressedSize=u,this.uncompressedSize=h,this.crc32=d,this.compression=f,this.compressedContent=m}c.prototype={getContentWorker:function(){var u=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return u.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(u,h,d){return u.pipe(new a).pipe(new l("uncompressedSize")).pipe(h.compressWorker(d)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),o=function(){for(var a,l=[],c=0;c<256;c++){a=c;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;l[c]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(c,u,h,d){var f=o,m=d+h;c^=-1;for(var g=d;g<m;g++)c=c>>>8^f[255&(c^u[g])];return-1^c}(0|l,a,a.length,0):function(c,u,h,d){var f=o,m=d+h;c^=-1;for(var g=d;g<m;g++)c=c>>>8^f[255&(c^u.charCodeAt(g))];return-1^c}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),c=s?"uint8array":"array";function u(h,d){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=d,this.meta={}}i.magic="\b\0",a.inherits(u,l),u.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,h.data),!1)},u.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(d){h.push({data:d,meta:h.meta})}},i.compressWorker=function(h){return new u("Deflate",h)},i.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(f,m){var g,b="";for(g=0;g<m;g++)b+=String.fromCharCode(255&f),f>>>=8;return b}function o(f,m,g,b,y,v){var x,w,S=f.file,E=f.compression,k=v!==c.utf8encode,_=a.transformTo("string",v(S.name)),L=a.transformTo("string",c.utf8encode(S.name)),R=S.comment,C=a.transformTo("string",v(R)),P=a.transformTo("string",c.utf8encode(R)),O=L.length!==S.name.length,N=P.length!==R.length,H="",Q="",X="",J=S.dir,j=S.date,F={crc32:0,compressedSize:0,uncompressedSize:0};m&&!g||(F.crc32=f.crc32,F.compressedSize=f.compressedSize,F.uncompressedSize=f.uncompressedSize);var Y=0;m&&(Y|=8),k||!O&&!N||(Y|=2048);var M=0,D=0;J&&(M|=16),y==="UNIX"?(D=798,M|=function(W,te){var ee=W;return W||(ee=te?16893:33204),(65535&ee)<<16}(S.unixPermissions,J)):(D=20,M|=function(W){return 63&(W||0)}(S.dosPermissions)),x=j.getUTCHours(),x<<=6,x|=j.getUTCMinutes(),x<<=5,x|=j.getUTCSeconds()/2,w=j.getUTCFullYear()-1980,w<<=4,w|=j.getUTCMonth()+1,w<<=5,w|=j.getUTCDate(),O&&(Q=s(1,1)+s(u(_),4)+L,H+="up"+s(Q.length,2)+Q),N&&(X=s(1,1)+s(u(C),4)+P,H+="uc"+s(X.length,2)+X);var V="";return V+=`
\0`,V+=s(Y,2),V+=E.magic,V+=s(x,2),V+=s(w,2),V+=s(F.crc32,4),V+=s(F.compressedSize,4),V+=s(F.uncompressedSize,4),V+=s(_.length,2),V+=s(H.length,2),{fileRecord:h.LOCAL_FILE_HEADER+V+_+H,dirRecord:h.CENTRAL_FILE_HEADER+s(D,2)+V+s(C.length,2)+"\0\0\0\0"+s(M,4)+s(b,4)+_+H+C}}var a=n("../utils"),l=n("../stream/GenericWorker"),c=n("../utf8"),u=n("../crc32"),h=n("../signature");function d(f,m,g,b){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=g,this.encodeFileName=b,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(d,l),d.prototype.push=function(f){var m=f.meta.percent||0,g=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,l.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:g?(m+100*(g-b-1))/g:100}}))},d.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var m=this.streamFiles&&!f.file.dir;if(m){var g=o(f,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(f){this.accumulate=!1;var m=this.streamFiles&&!f.file.dir,g=o(f,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),m)this.push({data:function(b){return h.DATA_DESCRIPTOR+s(b.crc32,4)+s(b.compressedSize,4)+s(b.uncompressedSize,4)}(f),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var f=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var g=this.bytesWritten-f,b=function(y,v,x,w,S){var E=a.transformTo("string",S(w));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(y,2)+s(y,2)+s(v,4)+s(x,4)+s(E.length,2)+E}(this.dirRecords.length,g,f,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(f){this._sources.push(f);var m=this;return f.on("data",function(g){m.processChunk(g)}),f.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),f.on("error",function(g){m.error(g)}),this},d.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(f){var m=this._sources;if(!l.prototype.error.call(this,f))return!1;for(var g=0;g<m.length;g++)try{m[g].error(f)}catch{}return!0},d.prototype.lock=function(){l.prototype.lock.call(this);for(var f=this._sources,m=0;m<f.length;m++)f[m].lock()},r.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),o=n("./ZipFileWorker");i.generateWorker=function(a,l,c){var u=new o(l.streamFiles,c,l.platform,l.encodeFileName),h=0;try{a.forEach(function(d,f){h++;var m=function(v,x){var w=v||x,S=s[w];if(!S)throw new Error(w+" is not a valid compression method !");return S}(f.options.compression,l.compression),g=f.options.compressionOptions||l.compressionOptions||{},b=f.dir,y=f.date;f._compressWorker(m,g).withStreamInfo("file",{name:d,dir:b,date:y,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(u)}),u.entriesCount=h}catch(d){u.error(d)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),c=n("./stream/Crc32Probe"),u=n("./nodejsUtils");function h(d){return new o.Promise(function(f,m){var g=d.decompressed.getContentWorker().pipe(new c);g.on("error",function(b){m(b)}).on("end",function(){g.streamInfo.crc32!==d.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}r.exports=function(d,f){var m=this;return f=s.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),u.isNode&&u.isStream(d)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",d,!0,f.optimizedBinaryString,f.base64).then(function(g){var b=new l(f);return b.load(g),b}).then(function(g){var b=[o.Promise.resolve(g)],y=g.files;if(f.checkCRC32)for(var v=0;v<y.length;v++)b.push(h(y[v]));return o.Promise.all(b)}).then(function(g){for(var b=g.shift(),y=b.files,v=0;v<y.length;v++){var x=y[v],w=x.fileNameStr,S=s.resolve(x.fileNameStr);m.file(S,x.decompressed,{binary:!0,optimizedBinaryString:!0,date:x.date,dir:x.dir,comment:x.fileCommentStr.length?x.fileCommentStr:null,unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions,createFolders:f.createFolders}),x.dir||(m.file(S).unsafeOriginalName=w)}return b.zipComment.length&&(m.comment=b.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),o=n("../stream/GenericWorker");function a(l,c){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(a,o),a.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(u){c.push({data:u,meta:{percent:0}})}).on("error",function(u){c.isPaused?this.generatedError=u:c.error(u)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function o(a,l,c){s.call(this,l),this._helper=a;var u=this;a.on("data",function(h,d){u.push(h)||u._helper.pause(),c&&c(d)}).on("error",function(h){u.emit("error",h)}).on("end",function(){u.push(null)})}n("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof xt<"u",newBufferFrom:function(s,o){if(xt.from&&xt.from!==Uint8Array.from)return xt.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new xt(s,o)},allocBuffer:function(s){if(xt.alloc)return xt.alloc(s);var o=new xt(s);return o.fill(0),o},isBuffer:function(s){return xt.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(S,E,k){var _,L=a.getTypeOf(E),R=a.extend(k||{},u);R.date=R.date||new Date,R.compression!==null&&(R.compression=R.compression.toUpperCase()),typeof R.unixPermissions=="string"&&(R.unixPermissions=parseInt(R.unixPermissions,8)),R.unixPermissions&&16384&R.unixPermissions&&(R.dir=!0),R.dosPermissions&&16&R.dosPermissions&&(R.dir=!0),R.dir&&(S=y(S)),R.createFolders&&(_=b(S))&&v.call(this,_,!0);var C=L==="string"&&R.binary===!1&&R.base64===!1;k&&k.binary!==void 0||(R.binary=!C),(E instanceof h&&E.uncompressedSize===0||R.dir||!E||E.length===0)&&(R.base64=!1,R.binary=!0,E="",R.compression="STORE",L="string");var P=null;P=E instanceof h||E instanceof l?E:m.isNode&&m.isStream(E)?new g(S,E):a.prepareContent(S,E,R.binary,R.optimizedBinaryString,R.base64);var O=new d(S,P,R);this.files[S]=O}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),u=n("./defaults"),h=n("./compressedObject"),d=n("./zipObject"),f=n("./generate"),m=n("./nodejsUtils"),g=n("./nodejs/NodejsStreamInputAdapter"),b=function(S){S.slice(-1)==="/"&&(S=S.substring(0,S.length-1));var E=S.lastIndexOf("/");return 0<E?S.substring(0,E):""},y=function(S){return S.slice(-1)!=="/"&&(S+="/"),S},v=function(S,E){return E=E!==void 0?E:u.createFolders,S=y(S),this.files[S]||s.call(this,S,null,{dir:!0,createFolders:E}),this.files[S]};function x(S){return Object.prototype.toString.call(S)==="[object RegExp]"}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(S){var E,k,_;for(E in this.files)_=this.files[E],(k=E.slice(this.root.length,E.length))&&E.slice(0,this.root.length)===this.root&&S(k,_)},filter:function(S){var E=[];return this.forEach(function(k,_){S(k,_)&&E.push(_)}),E},file:function(S,E,k){if(arguments.length!==1)return S=this.root+S,s.call(this,S,E,k),this;if(x(S)){var _=S;return this.filter(function(R,C){return!C.dir&&_.test(R)})}var L=this.files[this.root+S];return L&&!L.dir?L:null},folder:function(S){if(!S)return this;if(x(S))return this.filter(function(L,R){return R.dir&&S.test(L)});var E=this.root+S,k=v.call(this,E),_=this.clone();return _.root=k.name,_},remove:function(S){S=this.root+S;var E=this.files[S];if(E||(S.slice(-1)!=="/"&&(S+="/"),E=this.files[S]),E&&!E.dir)delete this.files[S];else for(var k=this.filter(function(L,R){return R.name.slice(0,S.length)===S}),_=0;_<k.length;_++)delete this.files[k[_].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(S){var E,k={};try{if((k=a.extend(S||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");a.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var _=k.comment||this.comment||"";E=f.generateWorker(this,k,_)}catch(L){(E=new l("error")).error(L)}return new c(E,k.type||"string",k.mimeType)},generateAsync:function(S,E){return this.generateInternalStream(S).accumulate(E)},generateNodeStream:function(S,E){return(S=S||{}).type||(S.type="nodebuffer"),this.generateInternalStream(S).toNodejsStream(E)}};r.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),c=a.charCodeAt(1),u=a.charCodeAt(2),h=a.charCodeAt(3),d=this.length-4;0<=d;--d)if(this.data[d]===l&&this.data[d+1]===c&&this.data[d+2]===u&&this.data[d+3]===h)return d-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),c=a.charCodeAt(1),u=a.charCodeAt(2),h=a.charCodeAt(3),d=this.readData(4);return l===d[0]&&c===d[1]&&u===d[2]&&h===d[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,c=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=a,c},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),c=n("./NodeBufferReader"),u=n("./Uint8ArrayReader");r.exports=function(h){var d=s.getTypeOf(h);return s.checkSupport(d),d!=="string"||o.uint8array?d==="nodebuffer"?new c(h):o.uint8array?new u(s.transformTo("uint8array",h)):new a(s.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),o=n("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),o=n("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,s),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,o),a.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(u){c.dataIsReady=!0,c.data=u,c.max=u&&u.length||0,c.type=s.getTypeOf(u),c.isPaused||c._tickAndRepeat()},function(u){c.error(u)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),c=n("../support"),u=n("../external"),h=null;if(c.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function d(m,g){return new u.Promise(function(b,y){var v=[],x=m._internalType,w=m._outputType,S=m._mimeType;m.on("data",function(E,k){v.push(E),g&&g(k)}).on("error",function(E){v=[],y(E)}).on("end",function(){try{var E=function(k,_,L){switch(k){case"blob":return s.newBlob(s.transformTo("arraybuffer",_),L);case"base64":return l.encode(_);default:return s.transformTo(k,_)}}(w,function(k,_){var L,R=0,C=null,P=0;for(L=0;L<_.length;L++)P+=_[L].length;switch(k){case"string":return _.join("");case"array":return Array.prototype.concat.apply([],_);case"uint8array":for(C=new Uint8Array(P),L=0;L<_.length;L++)C.set(_[L],R),R+=_[L].length;return C;case"nodebuffer":return xt.concat(_);default:throw new Error("concat : unsupported type '"+k+"'")}}(x,v),S);b(E)}catch(k){y(k)}v=[]}).resume()})}function f(m,g,b){var y=g;switch(g){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=g,this._mimeType=b,s.checkSupport(y),this._worker=m.pipe(new o(y)),m.lock()}catch(v){this._worker=new a("error"),this._worker.error(v)}}f.prototype={accumulate:function(m){return d(this,m)},on:function(m,g){var b=this;return m==="data"?this._worker.on(m,function(y){g.call(b,y.data,y.meta)}):this._worker.on(m,function(){s.delay(g,arguments,b)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},m)}},r.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof xt<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),c=new Array(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;c[254]=c[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function d(){l.call(this,"utf-8 encode")}i.utf8encode=function(f){return o.nodebuffer?a.newBufferFrom(f,"utf-8"):function(m){var g,b,y,v,x,w=m.length,S=0;for(v=0;v<w;v++)(64512&(b=m.charCodeAt(v)))==55296&&v+1<w&&(64512&(y=m.charCodeAt(v+1)))==56320&&(b=65536+(b-55296<<10)+(y-56320),v++),S+=b<128?1:b<2048?2:b<65536?3:4;for(g=o.uint8array?new Uint8Array(S):new Array(S),v=x=0;x<S;v++)(64512&(b=m.charCodeAt(v)))==55296&&v+1<w&&(64512&(y=m.charCodeAt(v+1)))==56320&&(b=65536+(b-55296<<10)+(y-56320),v++),b<128?g[x++]=b:(b<2048?g[x++]=192|b>>>6:(b<65536?g[x++]=224|b>>>12:(g[x++]=240|b>>>18,g[x++]=128|b>>>12&63),g[x++]=128|b>>>6&63),g[x++]=128|63&b);return g}(f)},i.utf8decode=function(f){return o.nodebuffer?s.transformTo("nodebuffer",f).toString("utf-8"):function(m){var g,b,y,v,x=m.length,w=new Array(2*x);for(g=b=0;g<x;)if((y=m[g++])<128)w[b++]=y;else if(4<(v=c[y]))w[b++]=65533,g+=v-1;else{for(y&=v===2?31:v===3?15:7;1<v&&g<x;)y=y<<6|63&m[g++],v--;1<v?w[b++]=65533:y<65536?w[b++]=y:(y-=65536,w[b++]=55296|y>>10&1023,w[b++]=56320|1023&y)}return w.length!==b&&(w.subarray?w=w.subarray(0,b):w.length=b),s.applyFromCharCode(w)}(f=s.transformTo(o.uint8array?"uint8array":"array",f))},s.inherits(h,l),h.prototype.processChunk=function(f){var m=s.transformTo(o.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var g=m;(m=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),m.set(g,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var b=function(v,x){var w;for((x=x||v.length)>v.length&&(x=v.length),w=x-1;0<=w&&(192&v[w])==128;)w--;return w<0||w===0?x:w+c[v[w]]>x?w:x}(m),y=m;b!==m.length&&(o.uint8array?(y=m.subarray(0,b),this.leftOver=m.subarray(b,m.length)):(y=m.slice(0,b),this.leftOver=m.slice(b,m.length))),this.push({data:i.utf8decode(y),meta:f.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=h,s.inherits(d,l),d.prototype.processChunk=function(f){this.push({data:i.utf8encode(f.data),meta:f.meta})},i.Utf8EncodeWorker=d},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function c(g){return g}function u(g,b){for(var y=0;y<g.length;++y)b[y]=255&g.charCodeAt(y);return b}n("setimmediate"),i.newBlob=function(g,b){i.checkSupport("blob");try{return new Blob([g],{type:b})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(g),y.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(g,b,y){var v=[],x=0,w=g.length;if(w<=y)return String.fromCharCode.apply(null,g);for(;x<w;)b==="array"||b==="nodebuffer"?v.push(String.fromCharCode.apply(null,g.slice(x,Math.min(x+y,w)))):v.push(String.fromCharCode.apply(null,g.subarray(x,Math.min(x+y,w)))),x+=y;return v.join("")},stringifyByChar:function(g){for(var b="",y=0;y<g.length;y++)b+=String.fromCharCode(g[y]);return b},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function d(g){var b=65536,y=i.getTypeOf(g),v=!0;if(y==="uint8array"?v=h.applyCanBeUsed.uint8array:y==="nodebuffer"&&(v=h.applyCanBeUsed.nodebuffer),v)for(;1<b;)try{return h.stringifyByChunk(g,y,b)}catch{b=Math.floor(b/2)}return h.stringifyByChar(g)}function f(g,b){for(var y=0;y<g.length;y++)b[y]=g[y];return b}i.applyFromCharCode=d;var m={};m.string={string:c,array:function(g){return u(g,new Array(g.length))},arraybuffer:function(g){return m.string.uint8array(g).buffer},uint8array:function(g){return u(g,new Uint8Array(g.length))},nodebuffer:function(g){return u(g,a.allocBuffer(g.length))}},m.array={string:d,array:c,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(g)}},m.arraybuffer={string:function(g){return d(new Uint8Array(g))},array:function(g){return f(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:c,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(new Uint8Array(g))}},m.uint8array={string:d,array:function(g){return f(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:c,nodebuffer:function(g){return a.newBufferFrom(g)}},m.nodebuffer={string:d,array:function(g){return f(g,new Array(g.length))},arraybuffer:function(g){return m.nodebuffer.uint8array(g).buffer},uint8array:function(g){return f(g,new Uint8Array(g.length))},nodebuffer:c},i.transformTo=function(g,b){if(b=b||"",!g)return b;i.checkSupport(g);var y=i.getTypeOf(b);return m[y][g](b)},i.resolve=function(g){for(var b=g.split("/"),y=[],v=0;v<b.length;v++){var x=b[v];x==="."||x===""&&v!==0&&v!==b.length-1||(x===".."?y.pop():y.push(x))}return y.join("/")},i.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(g)?"nodebuffer":s.uint8array&&g instanceof Uint8Array?"uint8array":s.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(g){if(!s[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(g){var b,y,v="";for(y=0;y<(g||"").length;y++)v+="\\x"+((b=g.charCodeAt(y))<16?"0":"")+b.toString(16).toUpperCase();return v},i.delay=function(g,b,y){setImmediate(function(){g.apply(y||null,b||[])})},i.inherits=function(g,b){function y(){}y.prototype=b.prototype,g.prototype=new y},i.extend=function(){var g,b,y={};for(g=0;g<arguments.length;g++)for(b in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],b)&&y[b]===void 0&&(y[b]=arguments[g][b]);return y},i.prepareContent=function(g,b,y,v,x){return l.Promise.resolve(b).then(function(w){return s.blob&&(w instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(w))!==-1)&&typeof FileReader<"u"?new l.Promise(function(S,E){var k=new FileReader;k.onload=function(_){S(_.target.result)},k.onerror=function(_){E(_.target.error)},k.readAsArrayBuffer(w)}):w}).then(function(w){var S=i.getTypeOf(w);return S?(S==="arraybuffer"?w=i.transformTo("uint8array",w):S==="string"&&(x?w=o.decode(w):y&&v!==!0&&(w=function(E){return u(E,s.uint8array?new Uint8Array(E.length):new Array(E.length))}(w))),w):l.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),c=n("./support");function u(h){this.files=[],this.loadOptions=h}u.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var d=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(d)+", expected "+o.pretty(h)+")")}},isSignature:function(h,d){var f=this.reader.index;this.reader.setIndex(h);var m=this.reader.readString(4)===d;return this.reader.setIndex(f),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),d=c.uint8array?"uint8array":"array",f=o.transformTo(d,h);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,d,f,m=this.zip64EndOfCentralSize-44;0<m;)h=this.reader.readInt(2),d=this.reader.readInt(4),f=this.reader.readData(d),this.zip64ExtensibleData[h]={id:h,length:d,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,d;for(h=0;h<this.files.length;h++)d=this.files[h],this.reader.setIndex(d.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),d.readLocalPart(this.reader),d.handleUTF8(),d.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var d=h;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var m=d-f;if(0<m)this.isSignature(d,a.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(h){this.reader=s(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),c=n("./utf8"),u=n("./compressions"),h=n("./support");function d(f,m){this.options=f,this.loadOptions=m}d.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var m,g;if(f.skip(22),this.fileNameLength=f.readInt(2),g=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=function(b){for(var y in u)if(Object.prototype.hasOwnProperty.call(u,y)&&u[y].magic===b)return u[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,m,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var m=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(m),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var m,g,b,y=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<y;)m=f.readInt(2),g=f.readInt(2),b=f.readData(g),this.extraFields[m]={id:m,length:g,value:b};f.setIndex(y)},handleUTF8:function(){var f=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var g=o.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var y=o.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var m=s(f.value);return m.readInt(1)!==1||l(this.fileName)!==m.readInt(4)?null:c.utf8decode(m.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var m=s(f.value);return m.readInt(1)!==1||l(this.fileComment)!==m.readInt(4)?null:c.utf8decode(m.readData(f.length-5))}return null}},r.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(m,g,b){this.name=m,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=g,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),c=n("./compressedObject"),u=n("./stream/GenericWorker");s.prototype={internalStream:function(m){var g=null,b="string";try{if(!m)throw new Error("No output type specified.");var y=(b=m.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),g=this._decompressWorker();var v=!this._dataBinary;v&&!y&&(g=g.pipe(new l.Utf8EncodeWorker)),!v&&y&&(g=g.pipe(new l.Utf8DecodeWorker))}catch(x){(g=new u("error")).error(x)}return new o(g,b,"")},async:function(m,g){return this.internalStream(m).accumulate(g)},nodeStream:function(m,g){return this.internalStream(m||"nodebuffer").toNodejsStream(g)},_compressWorker:function(m,g){if(this._data instanceof c&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(b,m,g)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof u?this._data:new a(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<h.length;f++)s.prototype[h[f]]=d;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var o,a,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var c=0,u=new l(m),h=s.document.createTextNode("");u.observe(h,{characterData:!0}),o=function(){h.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var g=s.document.createElement("script");g.onreadystatechange=function(){m(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:function(){setTimeout(m,0)};else{var d=new s.MessageChannel;d.port1.onmessage=m,o=function(){d.port2.postMessage(0)}}var f=[];function m(){var g,b;a=!0;for(var y=f.length;y;){for(b=f,f=[],g=-1;++g<y;)b[g]();y=f.length}a=!1}r.exports=function(g){f.push(g)!==1||a||o()}}).call(this,typeof Na<"u"?Na:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function o(){}var a={},l=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function h(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,y!==o&&g(this,y)}function d(y,v,x){this.promise=y,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}function f(y,v,x){s(function(){var w;try{w=v(x)}catch(S){return a.reject(y,S)}w===y?a.reject(y,new TypeError("Cannot resolve promise with itself")):a.resolve(y,w)})}function m(y){var v=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof v=="function")return function(){v.apply(y,arguments)}}function g(y,v){var x=!1;function w(k){x||(x=!0,a.reject(y,k))}function S(k){x||(x=!0,a.resolve(y,k))}var E=b(function(){v(S,w)});E.status==="error"&&w(E.value)}function b(y,v){var x={};try{x.value=y(v),x.status="success"}catch(w){x.status="error",x.value=w}return x}(r.exports=h).prototype.finally=function(y){if(typeof y!="function")return this;var v=this.constructor;return this.then(function(x){return v.resolve(y()).then(function(){return x})},function(x){return v.resolve(y()).then(function(){throw x})})},h.prototype.catch=function(y){return this.then(null,y)},h.prototype.then=function(y,v){if(typeof y!="function"&&this.state===c||typeof v!="function"&&this.state===l)return this;var x=new this.constructor(o);return this.state!==u?f(x,this.state===c?y:v,this.outcome):this.queue.push(new d(x,y,v)),x},d.prototype.callFulfilled=function(y){a.resolve(this.promise,y)},d.prototype.otherCallFulfilled=function(y){f(this.promise,this.onFulfilled,y)},d.prototype.callRejected=function(y){a.reject(this.promise,y)},d.prototype.otherCallRejected=function(y){f(this.promise,this.onRejected,y)},a.resolve=function(y,v){var x=b(m,v);if(x.status==="error")return a.reject(y,x.value);var w=x.value;if(w)g(y,w);else{y.state=c,y.outcome=v;for(var S=-1,E=y.queue.length;++S<E;)y.queue[S].callFulfilled(v)}return y},a.reject=function(y,v){y.state=l,y.outcome=v;for(var x=-1,w=y.queue.length;++x<w;)y.queue[x].callRejected(v);return y},h.resolve=function(y){return y instanceof this?y:a.resolve(new this(o),y)},h.reject=function(y){var v=new this(o);return a.reject(v,y)},h.all=function(y){var v=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=y.length,w=!1;if(!x)return this.resolve([]);for(var S=new Array(x),E=0,k=-1,_=new this(o);++k<x;)L(y[k],k);return _;function L(R,C){v.resolve(R).then(function(P){S[C]=P,++E!==x||w||(w=!0,a.resolve(_,S))},function(P){w||(w=!0,a.reject(_,P))})}},h.race=function(y){var v=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=y.length,w=!1;if(!x)return this.resolve([]);for(var S=-1,E=new this(o);++S<x;)k=y[S],v.resolve(k).then(function(_){w||(w=!0,a.resolve(E,_))},function(_){w||(w=!0,a.reject(E,_))});var k;return E}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),c=n("./zlib/zstream"),u=Object.prototype.toString,h=0,d=-1,f=0,m=8;function g(y){if(!(this instanceof g))return new g(y);this.options=o.assign({level:d,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},y||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var x=s.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(x!==h)throw new Error(l[x]);if(v.header&&s.deflateSetHeader(this.strm,v.header),v.dictionary){var w;if(w=typeof v.dictionary=="string"?a.string2buf(v.dictionary):u.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(x=s.deflateSetDictionary(this.strm,w))!==h)throw new Error(l[x]);this._dict_set=!0}}function b(y,v){var x=new g(v);if(x.push(y,!0),x.err)throw x.msg||l[x.err];return x.result}g.prototype.push=function(y,v){var x,w,S=this.strm,E=this.options.chunkSize;if(this.ended)return!1;w=v===~~v?v:v===!0?4:0,typeof y=="string"?S.input=a.string2buf(y):u.call(y)==="[object ArrayBuffer]"?S.input=new Uint8Array(y):S.input=y,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new o.Buf8(E),S.next_out=0,S.avail_out=E),(x=s.deflate(S,w))!==1&&x!==h)return this.onEnd(x),!(this.ended=!0);S.avail_out!==0&&(S.avail_in!==0||w!==4&&w!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(S.output,S.next_out))):this.onData(o.shrinkBuf(S.output,S.next_out)))}while((0<S.avail_in||S.avail_out===0)&&x!==1);return w===4?(x=s.deflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===h):w!==2||(this.onEnd(h),!(S.avail_out=0))},g.prototype.onData=function(y){this.chunks.push(y)},g.prototype.onEnd=function(y){y===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},i.Deflate=g,i.deflate=b,i.deflateRaw=function(y,v){return(v=v||{}).raw=!0,b(y,v)},i.gzip=function(y,v){return(v=v||{}).gzip=!0,b(y,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),c=n("./zlib/messages"),u=n("./zlib/zstream"),h=n("./zlib/gzheader"),d=Object.prototype.toString;function f(g){if(!(this instanceof f))return new f(g);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},g||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||g&&g.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var y=s.inflateInit2(this.strm,b.windowBits);if(y!==l.Z_OK)throw new Error(c[y]);this.header=new h,s.inflateGetHeader(this.strm,this.header)}function m(g,b){var y=new f(b);if(y.push(g,!0),y.err)throw y.msg||c[y.err];return y.result}f.prototype.push=function(g,b){var y,v,x,w,S,E,k=this.strm,_=this.options.chunkSize,L=this.options.dictionary,R=!1;if(this.ended)return!1;v=b===~~b?b:b===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof g=="string"?k.input=a.binstring2buf(g):d.call(g)==="[object ArrayBuffer]"?k.input=new Uint8Array(g):k.input=g,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new o.Buf8(_),k.next_out=0,k.avail_out=_),(y=s.inflate(k,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&L&&(E=typeof L=="string"?a.string2buf(L):d.call(L)==="[object ArrayBuffer]"?new Uint8Array(L):L,y=s.inflateSetDictionary(this.strm,E)),y===l.Z_BUF_ERROR&&R===!0&&(y=l.Z_OK,R=!1),y!==l.Z_STREAM_END&&y!==l.Z_OK)return this.onEnd(y),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&y!==l.Z_STREAM_END&&(k.avail_in!==0||v!==l.Z_FINISH&&v!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(x=a.utf8border(k.output,k.next_out),w=k.next_out-x,S=a.buf2string(k.output,x),k.next_out=w,k.avail_out=_-w,w&&o.arraySet(k.output,k.output,x,w,0),this.onData(S)):this.onData(o.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(R=!0)}while((0<k.avail_in||k.avail_out===0)&&y!==l.Z_STREAM_END);return y===l.Z_STREAM_END&&(v=l.Z_FINISH),v===l.Z_FINISH?(y=s.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===l.Z_OK):v!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(k.avail_out=0))},f.prototype.onData=function(g){this.chunks.push(g)},f.prototype.onEnd=function(g){g===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},i.Inflate=f,i.inflate=m,i.inflateRaw=function(g,b){return(b=b||{}).raw=!0,m(g,b)},i.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var u=c.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])}}return l},i.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var o={arraySet:function(l,c,u,h,d){if(c.subarray&&l.subarray)l.set(c.subarray(u,u+h),d);else for(var f=0;f<h;f++)l[d+f]=c[u+f]},flattenChunks:function(l){var c,u,h,d,f,m;for(c=h=0,u=l.length;c<u;c++)h+=l[c].length;for(m=new Uint8Array(h),c=d=0,u=l.length;c<u;c++)f=l[c],m.set(f,d),d+=f.length;return m}},a={arraySet:function(l,c,u,h,d){for(var f=0;f<h;f++)l[d+f]=c[u+f]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(h,d){if(d<65537&&(h.subarray&&a||!h.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(h,d));for(var f="",m=0;m<d;m++)f+=String.fromCharCode(h[m]);return f}l[254]=l[254]=1,i.string2buf=function(h){var d,f,m,g,b,y=h.length,v=0;for(g=0;g<y;g++)(64512&(f=h.charCodeAt(g)))==55296&&g+1<y&&(64512&(m=h.charCodeAt(g+1)))==56320&&(f=65536+(f-55296<<10)+(m-56320),g++),v+=f<128?1:f<2048?2:f<65536?3:4;for(d=new s.Buf8(v),g=b=0;b<v;g++)(64512&(f=h.charCodeAt(g)))==55296&&g+1<y&&(64512&(m=h.charCodeAt(g+1)))==56320&&(f=65536+(f-55296<<10)+(m-56320),g++),f<128?d[b++]=f:(f<2048?d[b++]=192|f>>>6:(f<65536?d[b++]=224|f>>>12:(d[b++]=240|f>>>18,d[b++]=128|f>>>12&63),d[b++]=128|f>>>6&63),d[b++]=128|63&f);return d},i.buf2binstring=function(h){return u(h,h.length)},i.binstring2buf=function(h){for(var d=new s.Buf8(h.length),f=0,m=d.length;f<m;f++)d[f]=h.charCodeAt(f);return d},i.buf2string=function(h,d){var f,m,g,b,y=d||h.length,v=new Array(2*y);for(f=m=0;f<y;)if((g=h[f++])<128)v[m++]=g;else if(4<(b=l[g]))v[m++]=65533,f+=b-1;else{for(g&=b===2?31:b===3?15:7;1<b&&f<y;)g=g<<6|63&h[f++],b--;1<b?v[m++]=65533:g<65536?v[m++]=g:(g-=65536,v[m++]=55296|g>>10&1023,v[m++]=56320|1023&g)}return u(v,m)},i.utf8border=function(h,d){var f;for((d=d||h.length)>h.length&&(d=h.length),f=d-1;0<=f&&(192&h[f])==128;)f--;return f<0||f===0?d:f+l[h[f]]>d?f:d}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,o,a,l){for(var c=65535&s|0,u=s>>>16&65535|0,h=0;a!==0;){for(a-=h=2e3<a?2e3:a;u=u+(c=c+o[l++]|0)|0,--h;);c%=65521,u%=65521}return c|u<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,c){var u=s,h=c+l;o^=-1;for(var d=c;d<h;d++)o=o>>>8^u[255&(o^a[d])];return-1^o}},{}],46:[function(n,r,i){var s,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),c=n("./crc32"),u=n("./messages"),h=0,d=4,f=0,m=-2,g=-1,b=4,y=2,v=8,x=9,w=286,S=30,E=19,k=2*w+1,_=15,L=3,R=258,C=R+L+1,P=42,O=113,N=1,H=2,Q=3,X=4;function J(q,pe){return q.msg=u[pe],pe}function j(q){return(q<<1)-(4<q?9:0)}function F(q){for(var pe=q.length;0<=--pe;)q[pe]=0}function Y(q){var pe=q.state,ne=pe.pending;ne>q.avail_out&&(ne=q.avail_out),ne!==0&&(o.arraySet(q.output,pe.pending_buf,pe.pending_out,ne,q.next_out),q.next_out+=ne,pe.pending_out+=ne,q.total_out+=ne,q.avail_out-=ne,pe.pending-=ne,pe.pending===0&&(pe.pending_out=0))}function M(q,pe){a._tr_flush_block(q,0<=q.block_start?q.block_start:-1,q.strstart-q.block_start,pe),q.block_start=q.strstart,Y(q.strm)}function D(q,pe){q.pending_buf[q.pending++]=pe}function V(q,pe){q.pending_buf[q.pending++]=pe>>>8&255,q.pending_buf[q.pending++]=255&pe}function W(q,pe){var ne,oe,ae=q.max_chain_length,me=q.strstart,Pe=q.prev_length,Re=q.nice_match,we=q.strstart>q.w_size-C?q.strstart-(q.w_size-C):0,$e=q.window,Fe=q.w_mask,Be=q.prev,Ee=q.strstart+R,qe=$e[me+Pe-1],Xe=$e[me+Pe];q.prev_length>=q.good_match&&(ae>>=2),Re>q.lookahead&&(Re=q.lookahead);do if($e[(ne=pe)+Pe]===Xe&&$e[ne+Pe-1]===qe&&$e[ne]===$e[me]&&$e[++ne]===$e[me+1]){me+=2,ne++;do;while($e[++me]===$e[++ne]&&$e[++me]===$e[++ne]&&$e[++me]===$e[++ne]&&$e[++me]===$e[++ne]&&$e[++me]===$e[++ne]&&$e[++me]===$e[++ne]&&$e[++me]===$e[++ne]&&$e[++me]===$e[++ne]&&me<Ee);if(oe=R-(Ee-me),me=Ee-R,Pe<oe){if(q.match_start=pe,Re<=(Pe=oe))break;qe=$e[me+Pe-1],Xe=$e[me+Pe]}}while((pe=Be[pe&Fe])>we&&--ae!=0);return Pe<=q.lookahead?Pe:q.lookahead}function te(q){var pe,ne,oe,ae,me,Pe,Re,we,$e,Fe,Be=q.w_size;do{if(ae=q.window_size-q.lookahead-q.strstart,q.strstart>=Be+(Be-C)){for(o.arraySet(q.window,q.window,Be,Be,0),q.match_start-=Be,q.strstart-=Be,q.block_start-=Be,pe=ne=q.hash_size;oe=q.head[--pe],q.head[pe]=Be<=oe?oe-Be:0,--ne;);for(pe=ne=Be;oe=q.prev[--pe],q.prev[pe]=Be<=oe?oe-Be:0,--ne;);ae+=Be}if(q.strm.avail_in===0)break;if(Pe=q.strm,Re=q.window,we=q.strstart+q.lookahead,$e=ae,Fe=void 0,Fe=Pe.avail_in,$e<Fe&&(Fe=$e),ne=Fe===0?0:(Pe.avail_in-=Fe,o.arraySet(Re,Pe.input,Pe.next_in,Fe,we),Pe.state.wrap===1?Pe.adler=l(Pe.adler,Re,Fe,we):Pe.state.wrap===2&&(Pe.adler=c(Pe.adler,Re,Fe,we)),Pe.next_in+=Fe,Pe.total_in+=Fe,Fe),q.lookahead+=ne,q.lookahead+q.insert>=L)for(me=q.strstart-q.insert,q.ins_h=q.window[me],q.ins_h=(q.ins_h<<q.hash_shift^q.window[me+1])&q.hash_mask;q.insert&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[me+L-1])&q.hash_mask,q.prev[me&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=me,me++,q.insert--,!(q.lookahead+q.insert<L)););}while(q.lookahead<C&&q.strm.avail_in!==0)}function ee(q,pe){for(var ne,oe;;){if(q.lookahead<C){if(te(q),q.lookahead<C&&pe===h)return N;if(q.lookahead===0)break}if(ne=0,q.lookahead>=L&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+L-1])&q.hash_mask,ne=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),ne!==0&&q.strstart-ne<=q.w_size-C&&(q.match_length=W(q,ne)),q.match_length>=L)if(oe=a._tr_tally(q,q.strstart-q.match_start,q.match_length-L),q.lookahead-=q.match_length,q.match_length<=q.max_lazy_match&&q.lookahead>=L){for(q.match_length--;q.strstart++,q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+L-1])&q.hash_mask,ne=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart,--q.match_length!=0;);q.strstart++}else q.strstart+=q.match_length,q.match_length=0,q.ins_h=q.window[q.strstart],q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+1])&q.hash_mask;else oe=a._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++;if(oe&&(M(q,!1),q.strm.avail_out===0))return N}return q.insert=q.strstart<L-1?q.strstart:L-1,pe===d?(M(q,!0),q.strm.avail_out===0?Q:X):q.last_lit&&(M(q,!1),q.strm.avail_out===0)?N:H}function K(q,pe){for(var ne,oe,ae;;){if(q.lookahead<C){if(te(q),q.lookahead<C&&pe===h)return N;if(q.lookahead===0)break}if(ne=0,q.lookahead>=L&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+L-1])&q.hash_mask,ne=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),q.prev_length=q.match_length,q.prev_match=q.match_start,q.match_length=L-1,ne!==0&&q.prev_length<q.max_lazy_match&&q.strstart-ne<=q.w_size-C&&(q.match_length=W(q,ne),q.match_length<=5&&(q.strategy===1||q.match_length===L&&4096<q.strstart-q.match_start)&&(q.match_length=L-1)),q.prev_length>=L&&q.match_length<=q.prev_length){for(ae=q.strstart+q.lookahead-L,oe=a._tr_tally(q,q.strstart-1-q.prev_match,q.prev_length-L),q.lookahead-=q.prev_length-1,q.prev_length-=2;++q.strstart<=ae&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+L-1])&q.hash_mask,ne=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),--q.prev_length!=0;);if(q.match_available=0,q.match_length=L-1,q.strstart++,oe&&(M(q,!1),q.strm.avail_out===0))return N}else if(q.match_available){if((oe=a._tr_tally(q,0,q.window[q.strstart-1]))&&M(q,!1),q.strstart++,q.lookahead--,q.strm.avail_out===0)return N}else q.match_available=1,q.strstart++,q.lookahead--}return q.match_available&&(oe=a._tr_tally(q,0,q.window[q.strstart-1]),q.match_available=0),q.insert=q.strstart<L-1?q.strstart:L-1,pe===d?(M(q,!0),q.strm.avail_out===0?Q:X):q.last_lit&&(M(q,!1),q.strm.avail_out===0)?N:H}function he(q,pe,ne,oe,ae){this.good_length=q,this.max_lazy=pe,this.nice_length=ne,this.max_chain=oe,this.func=ae}function be(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*k),this.dyn_dtree=new o.Buf16(2*(2*S+1)),this.bl_tree=new o.Buf16(2*(2*E+1)),F(this.dyn_ltree),F(this.dyn_dtree),F(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(_+1),this.heap=new o.Buf16(2*w+1),F(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*w+1),F(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Se(q){var pe;return q&&q.state?(q.total_in=q.total_out=0,q.data_type=y,(pe=q.state).pending=0,pe.pending_out=0,pe.wrap<0&&(pe.wrap=-pe.wrap),pe.status=pe.wrap?P:O,q.adler=pe.wrap===2?0:1,pe.last_flush=h,a._tr_init(pe),f):J(q,m)}function Ce(q){var pe=Se(q);return pe===f&&function(ne){ne.window_size=2*ne.w_size,F(ne.head),ne.max_lazy_match=s[ne.level].max_lazy,ne.good_match=s[ne.level].good_length,ne.nice_match=s[ne.level].nice_length,ne.max_chain_length=s[ne.level].max_chain,ne.strstart=0,ne.block_start=0,ne.lookahead=0,ne.insert=0,ne.match_length=ne.prev_length=L-1,ne.match_available=0,ne.ins_h=0}(q.state),pe}function ke(q,pe,ne,oe,ae,me){if(!q)return m;var Pe=1;if(pe===g&&(pe=6),oe<0?(Pe=0,oe=-oe):15<oe&&(Pe=2,oe-=16),ae<1||x<ae||ne!==v||oe<8||15<oe||pe<0||9<pe||me<0||b<me)return J(q,m);oe===8&&(oe=9);var Re=new be;return(q.state=Re).strm=q,Re.wrap=Pe,Re.gzhead=null,Re.w_bits=oe,Re.w_size=1<<Re.w_bits,Re.w_mask=Re.w_size-1,Re.hash_bits=ae+7,Re.hash_size=1<<Re.hash_bits,Re.hash_mask=Re.hash_size-1,Re.hash_shift=~~((Re.hash_bits+L-1)/L),Re.window=new o.Buf8(2*Re.w_size),Re.head=new o.Buf16(Re.hash_size),Re.prev=new o.Buf16(Re.w_size),Re.lit_bufsize=1<<ae+6,Re.pending_buf_size=4*Re.lit_bufsize,Re.pending_buf=new o.Buf8(Re.pending_buf_size),Re.d_buf=1*Re.lit_bufsize,Re.l_buf=3*Re.lit_bufsize,Re.level=pe,Re.strategy=me,Re.method=ne,Ce(q)}s=[new he(0,0,0,0,function(q,pe){var ne=65535;for(ne>q.pending_buf_size-5&&(ne=q.pending_buf_size-5);;){if(q.lookahead<=1){if(te(q),q.lookahead===0&&pe===h)return N;if(q.lookahead===0)break}q.strstart+=q.lookahead,q.lookahead=0;var oe=q.block_start+ne;if((q.strstart===0||q.strstart>=oe)&&(q.lookahead=q.strstart-oe,q.strstart=oe,M(q,!1),q.strm.avail_out===0)||q.strstart-q.block_start>=q.w_size-C&&(M(q,!1),q.strm.avail_out===0))return N}return q.insert=0,pe===d?(M(q,!0),q.strm.avail_out===0?Q:X):(q.strstart>q.block_start&&(M(q,!1),q.strm.avail_out),N)}),new he(4,4,8,4,ee),new he(4,5,16,8,ee),new he(4,6,32,32,ee),new he(4,4,16,16,K),new he(8,16,32,32,K),new he(8,16,128,128,K),new he(8,32,128,256,K),new he(32,128,258,1024,K),new he(32,258,258,4096,K)],i.deflateInit=function(q,pe){return ke(q,pe,v,15,8,0)},i.deflateInit2=ke,i.deflateReset=Ce,i.deflateResetKeep=Se,i.deflateSetHeader=function(q,pe){return q&&q.state?q.state.wrap!==2?m:(q.state.gzhead=pe,f):m},i.deflate=function(q,pe){var ne,oe,ae,me;if(!q||!q.state||5<pe||pe<0)return q?J(q,m):m;if(oe=q.state,!q.output||!q.input&&q.avail_in!==0||oe.status===666&&pe!==d)return J(q,q.avail_out===0?-5:m);if(oe.strm=q,ne=oe.last_flush,oe.last_flush=pe,oe.status===P)if(oe.wrap===2)q.adler=0,D(oe,31),D(oe,139),D(oe,8),oe.gzhead?(D(oe,(oe.gzhead.text?1:0)+(oe.gzhead.hcrc?2:0)+(oe.gzhead.extra?4:0)+(oe.gzhead.name?8:0)+(oe.gzhead.comment?16:0)),D(oe,255&oe.gzhead.time),D(oe,oe.gzhead.time>>8&255),D(oe,oe.gzhead.time>>16&255),D(oe,oe.gzhead.time>>24&255),D(oe,oe.level===9?2:2<=oe.strategy||oe.level<2?4:0),D(oe,255&oe.gzhead.os),oe.gzhead.extra&&oe.gzhead.extra.length&&(D(oe,255&oe.gzhead.extra.length),D(oe,oe.gzhead.extra.length>>8&255)),oe.gzhead.hcrc&&(q.adler=c(q.adler,oe.pending_buf,oe.pending,0)),oe.gzindex=0,oe.status=69):(D(oe,0),D(oe,0),D(oe,0),D(oe,0),D(oe,0),D(oe,oe.level===9?2:2<=oe.strategy||oe.level<2?4:0),D(oe,3),oe.status=O);else{var Pe=v+(oe.w_bits-8<<4)<<8;Pe|=(2<=oe.strategy||oe.level<2?0:oe.level<6?1:oe.level===6?2:3)<<6,oe.strstart!==0&&(Pe|=32),Pe+=31-Pe%31,oe.status=O,V(oe,Pe),oe.strstart!==0&&(V(oe,q.adler>>>16),V(oe,65535&q.adler)),q.adler=1}if(oe.status===69)if(oe.gzhead.extra){for(ae=oe.pending;oe.gzindex<(65535&oe.gzhead.extra.length)&&(oe.pending!==oe.pending_buf_size||(oe.gzhead.hcrc&&oe.pending>ae&&(q.adler=c(q.adler,oe.pending_buf,oe.pending-ae,ae)),Y(q),ae=oe.pending,oe.pending!==oe.pending_buf_size));)D(oe,255&oe.gzhead.extra[oe.gzindex]),oe.gzindex++;oe.gzhead.hcrc&&oe.pending>ae&&(q.adler=c(q.adler,oe.pending_buf,oe.pending-ae,ae)),oe.gzindex===oe.gzhead.extra.length&&(oe.gzindex=0,oe.status=73)}else oe.status=73;if(oe.status===73)if(oe.gzhead.name){ae=oe.pending;do{if(oe.pending===oe.pending_buf_size&&(oe.gzhead.hcrc&&oe.pending>ae&&(q.adler=c(q.adler,oe.pending_buf,oe.pending-ae,ae)),Y(q),ae=oe.pending,oe.pending===oe.pending_buf_size)){me=1;break}me=oe.gzindex<oe.gzhead.name.length?255&oe.gzhead.name.charCodeAt(oe.gzindex++):0,D(oe,me)}while(me!==0);oe.gzhead.hcrc&&oe.pending>ae&&(q.adler=c(q.adler,oe.pending_buf,oe.pending-ae,ae)),me===0&&(oe.gzindex=0,oe.status=91)}else oe.status=91;if(oe.status===91)if(oe.gzhead.comment){ae=oe.pending;do{if(oe.pending===oe.pending_buf_size&&(oe.gzhead.hcrc&&oe.pending>ae&&(q.adler=c(q.adler,oe.pending_buf,oe.pending-ae,ae)),Y(q),ae=oe.pending,oe.pending===oe.pending_buf_size)){me=1;break}me=oe.gzindex<oe.gzhead.comment.length?255&oe.gzhead.comment.charCodeAt(oe.gzindex++):0,D(oe,me)}while(me!==0);oe.gzhead.hcrc&&oe.pending>ae&&(q.adler=c(q.adler,oe.pending_buf,oe.pending-ae,ae)),me===0&&(oe.status=103)}else oe.status=103;if(oe.status===103&&(oe.gzhead.hcrc?(oe.pending+2>oe.pending_buf_size&&Y(q),oe.pending+2<=oe.pending_buf_size&&(D(oe,255&q.adler),D(oe,q.adler>>8&255),q.adler=0,oe.status=O)):oe.status=O),oe.pending!==0){if(Y(q),q.avail_out===0)return oe.last_flush=-1,f}else if(q.avail_in===0&&j(pe)<=j(ne)&&pe!==d)return J(q,-5);if(oe.status===666&&q.avail_in!==0)return J(q,-5);if(q.avail_in!==0||oe.lookahead!==0||pe!==h&&oe.status!==666){var Re=oe.strategy===2?function(we,$e){for(var Fe;;){if(we.lookahead===0&&(te(we),we.lookahead===0)){if($e===h)return N;break}if(we.match_length=0,Fe=a._tr_tally(we,0,we.window[we.strstart]),we.lookahead--,we.strstart++,Fe&&(M(we,!1),we.strm.avail_out===0))return N}return we.insert=0,$e===d?(M(we,!0),we.strm.avail_out===0?Q:X):we.last_lit&&(M(we,!1),we.strm.avail_out===0)?N:H}(oe,pe):oe.strategy===3?function(we,$e){for(var Fe,Be,Ee,qe,Xe=we.window;;){if(we.lookahead<=R){if(te(we),we.lookahead<=R&&$e===h)return N;if(we.lookahead===0)break}if(we.match_length=0,we.lookahead>=L&&0<we.strstart&&(Be=Xe[Ee=we.strstart-1])===Xe[++Ee]&&Be===Xe[++Ee]&&Be===Xe[++Ee]){qe=we.strstart+R;do;while(Be===Xe[++Ee]&&Be===Xe[++Ee]&&Be===Xe[++Ee]&&Be===Xe[++Ee]&&Be===Xe[++Ee]&&Be===Xe[++Ee]&&Be===Xe[++Ee]&&Be===Xe[++Ee]&&Ee<qe);we.match_length=R-(qe-Ee),we.match_length>we.lookahead&&(we.match_length=we.lookahead)}if(we.match_length>=L?(Fe=a._tr_tally(we,1,we.match_length-L),we.lookahead-=we.match_length,we.strstart+=we.match_length,we.match_length=0):(Fe=a._tr_tally(we,0,we.window[we.strstart]),we.lookahead--,we.strstart++),Fe&&(M(we,!1),we.strm.avail_out===0))return N}return we.insert=0,$e===d?(M(we,!0),we.strm.avail_out===0?Q:X):we.last_lit&&(M(we,!1),we.strm.avail_out===0)?N:H}(oe,pe):s[oe.level].func(oe,pe);if(Re!==Q&&Re!==X||(oe.status=666),Re===N||Re===Q)return q.avail_out===0&&(oe.last_flush=-1),f;if(Re===H&&(pe===1?a._tr_align(oe):pe!==5&&(a._tr_stored_block(oe,0,0,!1),pe===3&&(F(oe.head),oe.lookahead===0&&(oe.strstart=0,oe.block_start=0,oe.insert=0))),Y(q),q.avail_out===0))return oe.last_flush=-1,f}return pe!==d?f:oe.wrap<=0?1:(oe.wrap===2?(D(oe,255&q.adler),D(oe,q.adler>>8&255),D(oe,q.adler>>16&255),D(oe,q.adler>>24&255),D(oe,255&q.total_in),D(oe,q.total_in>>8&255),D(oe,q.total_in>>16&255),D(oe,q.total_in>>24&255)):(V(oe,q.adler>>>16),V(oe,65535&q.adler)),Y(q),0<oe.wrap&&(oe.wrap=-oe.wrap),oe.pending!==0?f:1)},i.deflateEnd=function(q){var pe;return q&&q.state?(pe=q.state.status)!==P&&pe!==69&&pe!==73&&pe!==91&&pe!==103&&pe!==O&&pe!==666?J(q,m):(q.state=null,pe===O?J(q,-3):f):m},i.deflateSetDictionary=function(q,pe){var ne,oe,ae,me,Pe,Re,we,$e,Fe=pe.length;if(!q||!q.state||(me=(ne=q.state).wrap)===2||me===1&&ne.status!==P||ne.lookahead)return m;for(me===1&&(q.adler=l(q.adler,pe,Fe,0)),ne.wrap=0,Fe>=ne.w_size&&(me===0&&(F(ne.head),ne.strstart=0,ne.block_start=0,ne.insert=0),$e=new o.Buf8(ne.w_size),o.arraySet($e,pe,Fe-ne.w_size,ne.w_size,0),pe=$e,Fe=ne.w_size),Pe=q.avail_in,Re=q.next_in,we=q.input,q.avail_in=Fe,q.next_in=0,q.input=pe,te(ne);ne.lookahead>=L;){for(oe=ne.strstart,ae=ne.lookahead-(L-1);ne.ins_h=(ne.ins_h<<ne.hash_shift^ne.window[oe+L-1])&ne.hash_mask,ne.prev[oe&ne.w_mask]=ne.head[ne.ins_h],ne.head[ne.ins_h]=oe,oe++,--ae;);ne.strstart=oe,ne.lookahead=L-1,te(ne)}return ne.strstart+=ne.lookahead,ne.block_start=ne.strstart,ne.insert=ne.lookahead,ne.lookahead=0,ne.match_length=ne.prev_length=L-1,ne.match_available=0,q.next_in=Re,q.input=we,q.avail_in=Pe,ne.wrap=me,f},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,o){var a,l,c,u,h,d,f,m,g,b,y,v,x,w,S,E,k,_,L,R,C,P,O,N,H;a=s.state,l=s.next_in,N=s.input,c=l+(s.avail_in-5),u=s.next_out,H=s.output,h=u-(o-s.avail_out),d=u+(s.avail_out-257),f=a.dmax,m=a.wsize,g=a.whave,b=a.wnext,y=a.window,v=a.hold,x=a.bits,w=a.lencode,S=a.distcode,E=(1<<a.lenbits)-1,k=(1<<a.distbits)-1;e:do{x<15&&(v+=N[l++]<<x,x+=8,v+=N[l++]<<x,x+=8),_=w[v&E];t:for(;;){if(v>>>=L=_>>>24,x-=L,(L=_>>>16&255)===0)H[u++]=65535&_;else{if(!(16&L)){if(!(64&L)){_=w[(65535&_)+(v&(1<<L)-1)];continue t}if(32&L){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}R=65535&_,(L&=15)&&(x<L&&(v+=N[l++]<<x,x+=8),R+=v&(1<<L)-1,v>>>=L,x-=L),x<15&&(v+=N[l++]<<x,x+=8,v+=N[l++]<<x,x+=8),_=S[v&k];n:for(;;){if(v>>>=L=_>>>24,x-=L,!(16&(L=_>>>16&255))){if(!(64&L)){_=S[(65535&_)+(v&(1<<L)-1)];continue n}s.msg="invalid distance code",a.mode=30;break e}if(C=65535&_,x<(L&=15)&&(v+=N[l++]<<x,(x+=8)<L&&(v+=N[l++]<<x,x+=8)),f<(C+=v&(1<<L)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(v>>>=L,x-=L,(L=u-h)<C){if(g<(L=C-L)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(O=y,(P=0)===b){if(P+=m-L,L<R){for(R-=L;H[u++]=y[P++],--L;);P=u-C,O=H}}else if(b<L){if(P+=m+b-L,(L-=b)<R){for(R-=L;H[u++]=y[P++],--L;);if(P=0,b<R){for(R-=L=b;H[u++]=y[P++],--L;);P=u-C,O=H}}}else if(P+=b-L,L<R){for(R-=L;H[u++]=y[P++],--L;);P=u-C,O=H}for(;2<R;)H[u++]=O[P++],H[u++]=O[P++],H[u++]=O[P++],R-=3;R&&(H[u++]=O[P++],1<R&&(H[u++]=O[P++]))}else{for(P=u-C;H[u++]=H[P++],H[u++]=H[P++],H[u++]=H[P++],2<(R-=3););R&&(H[u++]=H[P++],1<R&&(H[u++]=H[P++]))}break}}break}}while(l<c&&u<d);l-=R=x>>3,v&=(1<<(x-=R<<3))-1,s.next_in=l,s.next_out=u,s.avail_in=l<c?c-l+5:5-(l-c),s.avail_out=u<d?d-u+257:257-(u-d),a.hold=v,a.bits=x}},{}],49:[function(n,r,i){var s=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),c=n("./inftrees"),u=1,h=2,d=0,f=-2,m=1,g=852,b=592;function y(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function x(P){var O;return P&&P.state?(O=P.state,P.total_in=P.total_out=O.total=0,P.msg="",O.wrap&&(P.adler=1&O.wrap),O.mode=m,O.last=0,O.havedict=0,O.dmax=32768,O.head=null,O.hold=0,O.bits=0,O.lencode=O.lendyn=new s.Buf32(g),O.distcode=O.distdyn=new s.Buf32(b),O.sane=1,O.back=-1,d):f}function w(P){var O;return P&&P.state?((O=P.state).wsize=0,O.whave=0,O.wnext=0,x(P)):f}function S(P,O){var N,H;return P&&P.state?(H=P.state,O<0?(N=0,O=-O):(N=1+(O>>4),O<48&&(O&=15)),O&&(O<8||15<O)?f:(H.window!==null&&H.wbits!==O&&(H.window=null),H.wrap=N,H.wbits=O,w(P))):f}function E(P,O){var N,H;return P?(H=new v,(P.state=H).window=null,(N=S(P,O))!==d&&(P.state=null),N):f}var k,_,L=!0;function R(P){if(L){var O;for(k=new s.Buf32(512),_=new s.Buf32(32),O=0;O<144;)P.lens[O++]=8;for(;O<256;)P.lens[O++]=9;for(;O<280;)P.lens[O++]=7;for(;O<288;)P.lens[O++]=8;for(c(u,P.lens,0,288,k,0,P.work,{bits:9}),O=0;O<32;)P.lens[O++]=5;c(h,P.lens,0,32,_,0,P.work,{bits:5}),L=!1}P.lencode=k,P.lenbits=9,P.distcode=_,P.distbits=5}function C(P,O,N,H){var Q,X=P.state;return X.window===null&&(X.wsize=1<<X.wbits,X.wnext=0,X.whave=0,X.window=new s.Buf8(X.wsize)),H>=X.wsize?(s.arraySet(X.window,O,N-X.wsize,X.wsize,0),X.wnext=0,X.whave=X.wsize):(H<(Q=X.wsize-X.wnext)&&(Q=H),s.arraySet(X.window,O,N-H,Q,X.wnext),(H-=Q)?(s.arraySet(X.window,O,N-H,H,0),X.wnext=H,X.whave=X.wsize):(X.wnext+=Q,X.wnext===X.wsize&&(X.wnext=0),X.whave<X.wsize&&(X.whave+=Q))),0}i.inflateReset=w,i.inflateReset2=S,i.inflateResetKeep=x,i.inflateInit=function(P){return E(P,15)},i.inflateInit2=E,i.inflate=function(P,O){var N,H,Q,X,J,j,F,Y,M,D,V,W,te,ee,K,he,be,Se,Ce,ke,q,pe,ne,oe,ae=0,me=new s.Buf8(4),Pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return f;(N=P.state).mode===12&&(N.mode=13),J=P.next_out,Q=P.output,F=P.avail_out,X=P.next_in,H=P.input,j=P.avail_in,Y=N.hold,M=N.bits,D=j,V=F,pe=d;e:for(;;)switch(N.mode){case m:if(N.wrap===0){N.mode=13;break}for(;M<16;){if(j===0)break e;j--,Y+=H[X++]<<M,M+=8}if(2&N.wrap&&Y===35615){me[N.check=0]=255&Y,me[1]=Y>>>8&255,N.check=a(N.check,me,2,0),M=Y=0,N.mode=2;break}if(N.flags=0,N.head&&(N.head.done=!1),!(1&N.wrap)||(((255&Y)<<8)+(Y>>8))%31){P.msg="incorrect header check",N.mode=30;break}if((15&Y)!=8){P.msg="unknown compression method",N.mode=30;break}if(M-=4,q=8+(15&(Y>>>=4)),N.wbits===0)N.wbits=q;else if(q>N.wbits){P.msg="invalid window size",N.mode=30;break}N.dmax=1<<q,P.adler=N.check=1,N.mode=512&Y?10:12,M=Y=0;break;case 2:for(;M<16;){if(j===0)break e;j--,Y+=H[X++]<<M,M+=8}if(N.flags=Y,(255&N.flags)!=8){P.msg="unknown compression method",N.mode=30;break}if(57344&N.flags){P.msg="unknown header flags set",N.mode=30;break}N.head&&(N.head.text=Y>>8&1),512&N.flags&&(me[0]=255&Y,me[1]=Y>>>8&255,N.check=a(N.check,me,2,0)),M=Y=0,N.mode=3;case 3:for(;M<32;){if(j===0)break e;j--,Y+=H[X++]<<M,M+=8}N.head&&(N.head.time=Y),512&N.flags&&(me[0]=255&Y,me[1]=Y>>>8&255,me[2]=Y>>>16&255,me[3]=Y>>>24&255,N.check=a(N.check,me,4,0)),M=Y=0,N.mode=4;case 4:for(;M<16;){if(j===0)break e;j--,Y+=H[X++]<<M,M+=8}N.head&&(N.head.xflags=255&Y,N.head.os=Y>>8),512&N.flags&&(me[0]=255&Y,me[1]=Y>>>8&255,N.check=a(N.check,me,2,0)),M=Y=0,N.mode=5;case 5:if(1024&N.flags){for(;M<16;){if(j===0)break e;j--,Y+=H[X++]<<M,M+=8}N.length=Y,N.head&&(N.head.extra_len=Y),512&N.flags&&(me[0]=255&Y,me[1]=Y>>>8&255,N.check=a(N.check,me,2,0)),M=Y=0}else N.head&&(N.head.extra=null);N.mode=6;case 6:if(1024&N.flags&&(j<(W=N.length)&&(W=j),W&&(N.head&&(q=N.head.extra_len-N.length,N.head.extra||(N.head.extra=new Array(N.head.extra_len)),s.arraySet(N.head.extra,H,X,W,q)),512&N.flags&&(N.check=a(N.check,H,W,X)),j-=W,X+=W,N.length-=W),N.length))break e;N.length=0,N.mode=7;case 7:if(2048&N.flags){if(j===0)break e;for(W=0;q=H[X+W++],N.head&&q&&N.length<65536&&(N.head.name+=String.fromCharCode(q)),q&&W<j;);if(512&N.flags&&(N.check=a(N.check,H,W,X)),j-=W,X+=W,q)break e}else N.head&&(N.head.name=null);N.length=0,N.mode=8;case 8:if(4096&N.flags){if(j===0)break e;for(W=0;q=H[X+W++],N.head&&q&&N.length<65536&&(N.head.comment+=String.fromCharCode(q)),q&&W<j;);if(512&N.flags&&(N.check=a(N.check,H,W,X)),j-=W,X+=W,q)break e}else N.head&&(N.head.comment=null);N.mode=9;case 9:if(512&N.flags){for(;M<16;){if(j===0)break e;j--,Y+=H[X++]<<M,M+=8}if(Y!==(65535&N.check)){P.msg="header crc mismatch",N.mode=30;break}M=Y=0}N.head&&(N.head.hcrc=N.flags>>9&1,N.head.done=!0),P.adler=N.check=0,N.mode=12;break;case 10:for(;M<32;){if(j===0)break e;j--,Y+=H[X++]<<M,M+=8}P.adler=N.check=y(Y),M=Y=0,N.mode=11;case 11:if(N.havedict===0)return P.next_out=J,P.avail_out=F,P.next_in=X,P.avail_in=j,N.hold=Y,N.bits=M,2;P.adler=N.check=1,N.mode=12;case 12:if(O===5||O===6)break e;case 13:if(N.last){Y>>>=7&M,M-=7&M,N.mode=27;break}for(;M<3;){if(j===0)break e;j--,Y+=H[X++]<<M,M+=8}switch(N.last=1&Y,M-=1,3&(Y>>>=1)){case 0:N.mode=14;break;case 1:if(R(N),N.mode=20,O!==6)break;Y>>>=2,M-=2;break e;case 2:N.mode=17;break;case 3:P.msg="invalid block type",N.mode=30}Y>>>=2,M-=2;break;case 14:for(Y>>>=7&M,M-=7&M;M<32;){if(j===0)break e;j--,Y+=H[X++]<<M,M+=8}if((65535&Y)!=(Y>>>16^65535)){P.msg="invalid stored block lengths",N.mode=30;break}if(N.length=65535&Y,M=Y=0,N.mode=15,O===6)break e;case 15:N.mode=16;case 16:if(W=N.length){if(j<W&&(W=j),F<W&&(W=F),W===0)break e;s.arraySet(Q,H,X,W,J),j-=W,X+=W,F-=W,J+=W,N.length-=W;break}N.mode=12;break;case 17:for(;M<14;){if(j===0)break e;j--,Y+=H[X++]<<M,M+=8}if(N.nlen=257+(31&Y),Y>>>=5,M-=5,N.ndist=1+(31&Y),Y>>>=5,M-=5,N.ncode=4+(15&Y),Y>>>=4,M-=4,286<N.nlen||30<N.ndist){P.msg="too many length or distance symbols",N.mode=30;break}N.have=0,N.mode=18;case 18:for(;N.have<N.ncode;){for(;M<3;){if(j===0)break e;j--,Y+=H[X++]<<M,M+=8}N.lens[Pe[N.have++]]=7&Y,Y>>>=3,M-=3}for(;N.have<19;)N.lens[Pe[N.have++]]=0;if(N.lencode=N.lendyn,N.lenbits=7,ne={bits:N.lenbits},pe=c(0,N.lens,0,19,N.lencode,0,N.work,ne),N.lenbits=ne.bits,pe){P.msg="invalid code lengths set",N.mode=30;break}N.have=0,N.mode=19;case 19:for(;N.have<N.nlen+N.ndist;){for(;he=(ae=N.lencode[Y&(1<<N.lenbits)-1])>>>16&255,be=65535&ae,!((K=ae>>>24)<=M);){if(j===0)break e;j--,Y+=H[X++]<<M,M+=8}if(be<16)Y>>>=K,M-=K,N.lens[N.have++]=be;else{if(be===16){for(oe=K+2;M<oe;){if(j===0)break e;j--,Y+=H[X++]<<M,M+=8}if(Y>>>=K,M-=K,N.have===0){P.msg="invalid bit length repeat",N.mode=30;break}q=N.lens[N.have-1],W=3+(3&Y),Y>>>=2,M-=2}else if(be===17){for(oe=K+3;M<oe;){if(j===0)break e;j--,Y+=H[X++]<<M,M+=8}M-=K,q=0,W=3+(7&(Y>>>=K)),Y>>>=3,M-=3}else{for(oe=K+7;M<oe;){if(j===0)break e;j--,Y+=H[X++]<<M,M+=8}M-=K,q=0,W=11+(127&(Y>>>=K)),Y>>>=7,M-=7}if(N.have+W>N.nlen+N.ndist){P.msg="invalid bit length repeat",N.mode=30;break}for(;W--;)N.lens[N.have++]=q}}if(N.mode===30)break;if(N.lens[256]===0){P.msg="invalid code -- missing end-of-block",N.mode=30;break}if(N.lenbits=9,ne={bits:N.lenbits},pe=c(u,N.lens,0,N.nlen,N.lencode,0,N.work,ne),N.lenbits=ne.bits,pe){P.msg="invalid literal/lengths set",N.mode=30;break}if(N.distbits=6,N.distcode=N.distdyn,ne={bits:N.distbits},pe=c(h,N.lens,N.nlen,N.ndist,N.distcode,0,N.work,ne),N.distbits=ne.bits,pe){P.msg="invalid distances set",N.mode=30;break}if(N.mode=20,O===6)break e;case 20:N.mode=21;case 21:if(6<=j&&258<=F){P.next_out=J,P.avail_out=F,P.next_in=X,P.avail_in=j,N.hold=Y,N.bits=M,l(P,V),J=P.next_out,Q=P.output,F=P.avail_out,X=P.next_in,H=P.input,j=P.avail_in,Y=N.hold,M=N.bits,N.mode===12&&(N.back=-1);break}for(N.back=0;he=(ae=N.lencode[Y&(1<<N.lenbits)-1])>>>16&255,be=65535&ae,!((K=ae>>>24)<=M);){if(j===0)break e;j--,Y+=H[X++]<<M,M+=8}if(he&&!(240&he)){for(Se=K,Ce=he,ke=be;he=(ae=N.lencode[ke+((Y&(1<<Se+Ce)-1)>>Se)])>>>16&255,be=65535&ae,!(Se+(K=ae>>>24)<=M);){if(j===0)break e;j--,Y+=H[X++]<<M,M+=8}Y>>>=Se,M-=Se,N.back+=Se}if(Y>>>=K,M-=K,N.back+=K,N.length=be,he===0){N.mode=26;break}if(32&he){N.back=-1,N.mode=12;break}if(64&he){P.msg="invalid literal/length code",N.mode=30;break}N.extra=15&he,N.mode=22;case 22:if(N.extra){for(oe=N.extra;M<oe;){if(j===0)break e;j--,Y+=H[X++]<<M,M+=8}N.length+=Y&(1<<N.extra)-1,Y>>>=N.extra,M-=N.extra,N.back+=N.extra}N.was=N.length,N.mode=23;case 23:for(;he=(ae=N.distcode[Y&(1<<N.distbits)-1])>>>16&255,be=65535&ae,!((K=ae>>>24)<=M);){if(j===0)break e;j--,Y+=H[X++]<<M,M+=8}if(!(240&he)){for(Se=K,Ce=he,ke=be;he=(ae=N.distcode[ke+((Y&(1<<Se+Ce)-1)>>Se)])>>>16&255,be=65535&ae,!(Se+(K=ae>>>24)<=M);){if(j===0)break e;j--,Y+=H[X++]<<M,M+=8}Y>>>=Se,M-=Se,N.back+=Se}if(Y>>>=K,M-=K,N.back+=K,64&he){P.msg="invalid distance code",N.mode=30;break}N.offset=be,N.extra=15&he,N.mode=24;case 24:if(N.extra){for(oe=N.extra;M<oe;){if(j===0)break e;j--,Y+=H[X++]<<M,M+=8}N.offset+=Y&(1<<N.extra)-1,Y>>>=N.extra,M-=N.extra,N.back+=N.extra}if(N.offset>N.dmax){P.msg="invalid distance too far back",N.mode=30;break}N.mode=25;case 25:if(F===0)break e;if(W=V-F,N.offset>W){if((W=N.offset-W)>N.whave&&N.sane){P.msg="invalid distance too far back",N.mode=30;break}te=W>N.wnext?(W-=N.wnext,N.wsize-W):N.wnext-W,W>N.length&&(W=N.length),ee=N.window}else ee=Q,te=J-N.offset,W=N.length;for(F<W&&(W=F),F-=W,N.length-=W;Q[J++]=ee[te++],--W;);N.length===0&&(N.mode=21);break;case 26:if(F===0)break e;Q[J++]=N.length,F--,N.mode=21;break;case 27:if(N.wrap){for(;M<32;){if(j===0)break e;j--,Y|=H[X++]<<M,M+=8}if(V-=F,P.total_out+=V,N.total+=V,V&&(P.adler=N.check=N.flags?a(N.check,Q,V,J-V):o(N.check,Q,V,J-V)),V=F,(N.flags?Y:y(Y))!==N.check){P.msg="incorrect data check",N.mode=30;break}M=Y=0}N.mode=28;case 28:if(N.wrap&&N.flags){for(;M<32;){if(j===0)break e;j--,Y+=H[X++]<<M,M+=8}if(Y!==(4294967295&N.total)){P.msg="incorrect length check",N.mode=30;break}M=Y=0}N.mode=29;case 29:pe=1;break e;case 30:pe=-3;break e;case 31:return-4;case 32:default:return f}return P.next_out=J,P.avail_out=F,P.next_in=X,P.avail_in=j,N.hold=Y,N.bits=M,(N.wsize||V!==P.avail_out&&N.mode<30&&(N.mode<27||O!==4))&&C(P,P.output,P.next_out,V-P.avail_out)?(N.mode=31,-4):(D-=P.avail_in,V-=P.avail_out,P.total_in+=D,P.total_out+=V,N.total+=V,N.wrap&&V&&(P.adler=N.check=N.flags?a(N.check,Q,V,P.next_out-V):o(N.check,Q,V,P.next_out-V)),P.data_type=N.bits+(N.last?64:0)+(N.mode===12?128:0)+(N.mode===20||N.mode===15?256:0),(D==0&&V===0||O===4)&&pe===d&&(pe=-5),pe)},i.inflateEnd=function(P){if(!P||!P.state)return f;var O=P.state;return O.window&&(O.window=null),P.state=null,d},i.inflateGetHeader=function(P,O){var N;return P&&P.state&&2&(N=P.state).wrap?((N.head=O).done=!1,d):f},i.inflateSetDictionary=function(P,O){var N,H=O.length;return P&&P.state?(N=P.state).wrap!==0&&N.mode!==11?f:N.mode===11&&o(1,O,H,0)!==N.check?-3:C(P,O,H,H)?(N.mode=31,-4):(N.havedict=1,d):f},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(u,h,d,f,m,g,b,y){var v,x,w,S,E,k,_,L,R,C=y.bits,P=0,O=0,N=0,H=0,Q=0,X=0,J=0,j=0,F=0,Y=0,M=null,D=0,V=new s.Buf16(16),W=new s.Buf16(16),te=null,ee=0;for(P=0;P<=15;P++)V[P]=0;for(O=0;O<f;O++)V[h[d+O]]++;for(Q=C,H=15;1<=H&&V[H]===0;H--);if(H<Q&&(Q=H),H===0)return m[g++]=20971520,m[g++]=20971520,y.bits=1,0;for(N=1;N<H&&V[N]===0;N++);for(Q<N&&(Q=N),P=j=1;P<=15;P++)if(j<<=1,(j-=V[P])<0)return-1;if(0<j&&(u===0||H!==1))return-1;for(W[1]=0,P=1;P<15;P++)W[P+1]=W[P]+V[P];for(O=0;O<f;O++)h[d+O]!==0&&(b[W[h[d+O]]++]=O);if(k=u===0?(M=te=b,19):u===1?(M=o,D-=257,te=a,ee-=257,256):(M=l,te=c,-1),P=N,E=g,J=O=Y=0,w=-1,S=(F=1<<(X=Q))-1,u===1&&852<F||u===2&&592<F)return 1;for(;;){for(_=P-J,R=b[O]<k?(L=0,b[O]):b[O]>k?(L=te[ee+b[O]],M[D+b[O]]):(L=96,0),v=1<<P-J,N=x=1<<X;m[E+(Y>>J)+(x-=v)]=_<<24|L<<16|R|0,x!==0;);for(v=1<<P-1;Y&v;)v>>=1;if(v!==0?(Y&=v-1,Y+=v):Y=0,O++,--V[P]==0){if(P===H)break;P=h[d+b[O]]}if(Q<P&&(Y&S)!==w){for(J===0&&(J=Q),E+=N,j=1<<(X=P-J);X+J<H&&!((j-=V[X+J])<=0);)X++,j<<=1;if(F+=1<<X,u===1&&852<F||u===2&&592<F)return 1;m[w=Y&S]=Q<<24|X<<16|E-g|0}}return Y!==0&&(m[E+Y]=P-J<<24|64<<16|0),y.bits=Q,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),o=0,a=1;function l(ae){for(var me=ae.length;0<=--me;)ae[me]=0}var c=0,u=29,h=256,d=h+1+u,f=30,m=19,g=2*d+1,b=15,y=16,v=7,x=256,w=16,S=17,E=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],_=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=new Array(2*(d+2));l(C);var P=new Array(2*f);l(P);var O=new Array(512);l(O);var N=new Array(256);l(N);var H=new Array(u);l(H);var Q,X,J,j=new Array(f);function F(ae,me,Pe,Re,we){this.static_tree=ae,this.extra_bits=me,this.extra_base=Pe,this.elems=Re,this.max_length=we,this.has_stree=ae&&ae.length}function Y(ae,me){this.dyn_tree=ae,this.max_code=0,this.stat_desc=me}function M(ae){return ae<256?O[ae]:O[256+(ae>>>7)]}function D(ae,me){ae.pending_buf[ae.pending++]=255&me,ae.pending_buf[ae.pending++]=me>>>8&255}function V(ae,me,Pe){ae.bi_valid>y-Pe?(ae.bi_buf|=me<<ae.bi_valid&65535,D(ae,ae.bi_buf),ae.bi_buf=me>>y-ae.bi_valid,ae.bi_valid+=Pe-y):(ae.bi_buf|=me<<ae.bi_valid&65535,ae.bi_valid+=Pe)}function W(ae,me,Pe){V(ae,Pe[2*me],Pe[2*me+1])}function te(ae,me){for(var Pe=0;Pe|=1&ae,ae>>>=1,Pe<<=1,0<--me;);return Pe>>>1}function ee(ae,me,Pe){var Re,we,$e=new Array(b+1),Fe=0;for(Re=1;Re<=b;Re++)$e[Re]=Fe=Fe+Pe[Re-1]<<1;for(we=0;we<=me;we++){var Be=ae[2*we+1];Be!==0&&(ae[2*we]=te($e[Be]++,Be))}}function K(ae){var me;for(me=0;me<d;me++)ae.dyn_ltree[2*me]=0;for(me=0;me<f;me++)ae.dyn_dtree[2*me]=0;for(me=0;me<m;me++)ae.bl_tree[2*me]=0;ae.dyn_ltree[2*x]=1,ae.opt_len=ae.static_len=0,ae.last_lit=ae.matches=0}function he(ae){8<ae.bi_valid?D(ae,ae.bi_buf):0<ae.bi_valid&&(ae.pending_buf[ae.pending++]=ae.bi_buf),ae.bi_buf=0,ae.bi_valid=0}function be(ae,me,Pe,Re){var we=2*me,$e=2*Pe;return ae[we]<ae[$e]||ae[we]===ae[$e]&&Re[me]<=Re[Pe]}function Se(ae,me,Pe){for(var Re=ae.heap[Pe],we=Pe<<1;we<=ae.heap_len&&(we<ae.heap_len&&be(me,ae.heap[we+1],ae.heap[we],ae.depth)&&we++,!be(me,Re,ae.heap[we],ae.depth));)ae.heap[Pe]=ae.heap[we],Pe=we,we<<=1;ae.heap[Pe]=Re}function Ce(ae,me,Pe){var Re,we,$e,Fe,Be=0;if(ae.last_lit!==0)for(;Re=ae.pending_buf[ae.d_buf+2*Be]<<8|ae.pending_buf[ae.d_buf+2*Be+1],we=ae.pending_buf[ae.l_buf+Be],Be++,Re===0?W(ae,we,me):(W(ae,($e=N[we])+h+1,me),(Fe=k[$e])!==0&&V(ae,we-=H[$e],Fe),W(ae,$e=M(--Re),Pe),(Fe=_[$e])!==0&&V(ae,Re-=j[$e],Fe)),Be<ae.last_lit;);W(ae,x,me)}function ke(ae,me){var Pe,Re,we,$e=me.dyn_tree,Fe=me.stat_desc.static_tree,Be=me.stat_desc.has_stree,Ee=me.stat_desc.elems,qe=-1;for(ae.heap_len=0,ae.heap_max=g,Pe=0;Pe<Ee;Pe++)$e[2*Pe]!==0?(ae.heap[++ae.heap_len]=qe=Pe,ae.depth[Pe]=0):$e[2*Pe+1]=0;for(;ae.heap_len<2;)$e[2*(we=ae.heap[++ae.heap_len]=qe<2?++qe:0)]=1,ae.depth[we]=0,ae.opt_len--,Be&&(ae.static_len-=Fe[2*we+1]);for(me.max_code=qe,Pe=ae.heap_len>>1;1<=Pe;Pe--)Se(ae,$e,Pe);for(we=Ee;Pe=ae.heap[1],ae.heap[1]=ae.heap[ae.heap_len--],Se(ae,$e,1),Re=ae.heap[1],ae.heap[--ae.heap_max]=Pe,ae.heap[--ae.heap_max]=Re,$e[2*we]=$e[2*Pe]+$e[2*Re],ae.depth[we]=(ae.depth[Pe]>=ae.depth[Re]?ae.depth[Pe]:ae.depth[Re])+1,$e[2*Pe+1]=$e[2*Re+1]=we,ae.heap[1]=we++,Se(ae,$e,1),2<=ae.heap_len;);ae.heap[--ae.heap_max]=ae.heap[1],function(Xe,et){var re,$,G,ue,Ne,De,Ve=et.dyn_tree,Ft=et.max_code,It=et.stat_desc.static_tree,xn=et.stat_desc.has_stree,Kt=et.stat_desc.extra_bits,nn=et.stat_desc.extra_base,os=et.stat_desc.max_length,Yn=0;for(ue=0;ue<=b;ue++)Xe.bl_count[ue]=0;for(Ve[2*Xe.heap[Xe.heap_max]+1]=0,re=Xe.heap_max+1;re<g;re++)os<(ue=Ve[2*Ve[2*($=Xe.heap[re])+1]+1]+1)&&(ue=os,Yn++),Ve[2*$+1]=ue,Ft<$||(Xe.bl_count[ue]++,Ne=0,nn<=$&&(Ne=Kt[$-nn]),De=Ve[2*$],Xe.opt_len+=De*(ue+Ne),xn&&(Xe.static_len+=De*(It[2*$+1]+Ne)));if(Yn!==0){do{for(ue=os-1;Xe.bl_count[ue]===0;)ue--;Xe.bl_count[ue]--,Xe.bl_count[ue+1]+=2,Xe.bl_count[os]--,Yn-=2}while(0<Yn);for(ue=os;ue!==0;ue--)for($=Xe.bl_count[ue];$!==0;)Ft<(G=Xe.heap[--re])||(Ve[2*G+1]!==ue&&(Xe.opt_len+=(ue-Ve[2*G+1])*Ve[2*G],Ve[2*G+1]=ue),$--)}}(ae,me),ee($e,qe,ae.bl_count)}function q(ae,me,Pe){var Re,we,$e=-1,Fe=me[1],Be=0,Ee=7,qe=4;for(Fe===0&&(Ee=138,qe=3),me[2*(Pe+1)+1]=65535,Re=0;Re<=Pe;Re++)we=Fe,Fe=me[2*(Re+1)+1],++Be<Ee&&we===Fe||(Be<qe?ae.bl_tree[2*we]+=Be:we!==0?(we!==$e&&ae.bl_tree[2*we]++,ae.bl_tree[2*w]++):Be<=10?ae.bl_tree[2*S]++:ae.bl_tree[2*E]++,$e=we,qe=(Be=0)===Fe?(Ee=138,3):we===Fe?(Ee=6,3):(Ee=7,4))}function pe(ae,me,Pe){var Re,we,$e=-1,Fe=me[1],Be=0,Ee=7,qe=4;for(Fe===0&&(Ee=138,qe=3),Re=0;Re<=Pe;Re++)if(we=Fe,Fe=me[2*(Re+1)+1],!(++Be<Ee&&we===Fe)){if(Be<qe)for(;W(ae,we,ae.bl_tree),--Be!=0;);else we!==0?(we!==$e&&(W(ae,we,ae.bl_tree),Be--),W(ae,w,ae.bl_tree),V(ae,Be-3,2)):Be<=10?(W(ae,S,ae.bl_tree),V(ae,Be-3,3)):(W(ae,E,ae.bl_tree),V(ae,Be-11,7));$e=we,qe=(Be=0)===Fe?(Ee=138,3):we===Fe?(Ee=6,3):(Ee=7,4)}}l(j);var ne=!1;function oe(ae,me,Pe,Re){V(ae,(c<<1)+(Re?1:0),3),function(we,$e,Fe,Be){he(we),D(we,Fe),D(we,~Fe),s.arraySet(we.pending_buf,we.window,$e,Fe,we.pending),we.pending+=Fe}(ae,me,Pe)}i._tr_init=function(ae){ne||(function(){var me,Pe,Re,we,$e,Fe=new Array(b+1);for(we=Re=0;we<u-1;we++)for(H[we]=Re,me=0;me<1<<k[we];me++)N[Re++]=we;for(N[Re-1]=we,we=$e=0;we<16;we++)for(j[we]=$e,me=0;me<1<<_[we];me++)O[$e++]=we;for($e>>=7;we<f;we++)for(j[we]=$e<<7,me=0;me<1<<_[we]-7;me++)O[256+$e++]=we;for(Pe=0;Pe<=b;Pe++)Fe[Pe]=0;for(me=0;me<=143;)C[2*me+1]=8,me++,Fe[8]++;for(;me<=255;)C[2*me+1]=9,me++,Fe[9]++;for(;me<=279;)C[2*me+1]=7,me++,Fe[7]++;for(;me<=287;)C[2*me+1]=8,me++,Fe[8]++;for(ee(C,d+1,Fe),me=0;me<f;me++)P[2*me+1]=5,P[2*me]=te(me,5);Q=new F(C,k,h+1,d,b),X=new F(P,_,0,f,b),J=new F(new Array(0),L,0,m,v)}(),ne=!0),ae.l_desc=new Y(ae.dyn_ltree,Q),ae.d_desc=new Y(ae.dyn_dtree,X),ae.bl_desc=new Y(ae.bl_tree,J),ae.bi_buf=0,ae.bi_valid=0,K(ae)},i._tr_stored_block=oe,i._tr_flush_block=function(ae,me,Pe,Re){var we,$e,Fe=0;0<ae.level?(ae.strm.data_type===2&&(ae.strm.data_type=function(Be){var Ee,qe=4093624447;for(Ee=0;Ee<=31;Ee++,qe>>>=1)if(1&qe&&Be.dyn_ltree[2*Ee]!==0)return o;if(Be.dyn_ltree[18]!==0||Be.dyn_ltree[20]!==0||Be.dyn_ltree[26]!==0)return a;for(Ee=32;Ee<h;Ee++)if(Be.dyn_ltree[2*Ee]!==0)return a;return o}(ae)),ke(ae,ae.l_desc),ke(ae,ae.d_desc),Fe=function(Be){var Ee;for(q(Be,Be.dyn_ltree,Be.l_desc.max_code),q(Be,Be.dyn_dtree,Be.d_desc.max_code),ke(Be,Be.bl_desc),Ee=m-1;3<=Ee&&Be.bl_tree[2*R[Ee]+1]===0;Ee--);return Be.opt_len+=3*(Ee+1)+5+5+4,Ee}(ae),we=ae.opt_len+3+7>>>3,($e=ae.static_len+3+7>>>3)<=we&&(we=$e)):we=$e=Pe+5,Pe+4<=we&&me!==-1?oe(ae,me,Pe,Re):ae.strategy===4||$e===we?(V(ae,2+(Re?1:0),3),Ce(ae,C,P)):(V(ae,4+(Re?1:0),3),function(Be,Ee,qe,Xe){var et;for(V(Be,Ee-257,5),V(Be,qe-1,5),V(Be,Xe-4,4),et=0;et<Xe;et++)V(Be,Be.bl_tree[2*R[et]+1],3);pe(Be,Be.dyn_ltree,Ee-1),pe(Be,Be.dyn_dtree,qe-1)}(ae,ae.l_desc.max_code+1,ae.d_desc.max_code+1,Fe+1),Ce(ae,ae.dyn_ltree,ae.dyn_dtree)),K(ae),Re&&he(ae)},i._tr_tally=function(ae,me,Pe){return ae.pending_buf[ae.d_buf+2*ae.last_lit]=me>>>8&255,ae.pending_buf[ae.d_buf+2*ae.last_lit+1]=255&me,ae.pending_buf[ae.l_buf+ae.last_lit]=255&Pe,ae.last_lit++,me===0?ae.dyn_ltree[2*Pe]++:(ae.matches++,me--,ae.dyn_ltree[2*(N[Pe]+h+1)]++,ae.dyn_dtree[2*M(me)]++),ae.last_lit===ae.lit_bufsize-1},i._tr_align=function(ae){V(ae,2,3),W(ae,x,C),function(me){me.bi_valid===16?(D(me,me.bi_buf),me.bi_buf=0,me.bi_valid=0):8<=me.bi_valid&&(me.pending_buf[me.pending++]=255&me.bi_buf,me.bi_buf>>=8,me.bi_valid-=8)}(ae)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(o,a){if(!o.setImmediate){var l,c,u,h,d=1,f={},m=!1,g=o.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(o);b=b&&b.setTimeout?b:o,l={}.toString.call(o.process)==="[object process]"?function(w){Qn.nextTick(function(){v(w)})}:function(){if(o.postMessage&&!o.importScripts){var w=!0,S=o.onmessage;return o.onmessage=function(){w=!1},o.postMessage("","*"),o.onmessage=S,w}}()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",x,!1):o.attachEvent("onmessage",x),function(w){o.postMessage(h+w,"*")}):o.MessageChannel?((u=new MessageChannel).port1.onmessage=function(w){v(w.data)},function(w){u.port2.postMessage(w)}):g&&"onreadystatechange"in g.createElement("script")?(c=g.documentElement,function(w){var S=g.createElement("script");S.onreadystatechange=function(){v(w),S.onreadystatechange=null,c.removeChild(S),S=null},c.appendChild(S)}):function(w){setTimeout(v,0,w)},b.setImmediate=function(w){typeof w!="function"&&(w=new Function(""+w));for(var S=new Array(arguments.length-1),E=0;E<S.length;E++)S[E]=arguments[E+1];var k={callback:w,args:S};return f[d]=k,l(d),d++},b.clearImmediate=y}function y(w){delete f[w]}function v(w){if(m)setTimeout(v,0,w);else{var S=f[w];if(S){m=!0;try{(function(E){var k=E.callback,_=E.args;switch(_.length){case 0:k();break;case 1:k(_[0]);break;case 2:k(_[0],_[1]);break;case 3:k(_[0],_[1],_[2]);break;default:k.apply(a,_)}})(S)}finally{y(w),m=!1}}}}function x(w){w.source===o&&typeof w.data=="string"&&w.data.indexOf(h)===0&&v(+w.data.slice(h.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Na<"u"?Na:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(hK);var r_e=hK.exports;const i_e=_s(r_e);var dK={exports:{}};(function(t,e){(function(n,r){r()})(Na,function(){function n(c,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,u,h){var d=new XMLHttpRequest;d.open("GET",c),d.responseType="blob",d.onload=function(){l(d.response,u,h)},d.onerror=function(){console.error("could not download file")},d.send()}function i(c){var u=new XMLHttpRequest;u.open("HEAD",c,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function s(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(u)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Na=="object"&&Na.global===Na?Na:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(c,u,h){var d=o.URL||o.webkitURL,f=document.createElement("a");u=u||c.name||"download",f.download=u,f.rel="noopener",typeof c=="string"?(f.href=c,f.origin===location.origin?s(f):i(f.href)?r(c,u,h):s(f,f.target="_blank")):(f.href=d.createObjectURL(c),setTimeout(function(){d.revokeObjectURL(f.href)},4e4),setTimeout(function(){s(f)},0))}:"msSaveOrOpenBlob"in navigator?function(c,u,h){if(u=u||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,h),u);else if(i(c))r(c,u,h);else{var d=document.createElement("a");d.href=c,d.target="_blank",setTimeout(function(){s(d)})}}:function(c,u,h,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof c=="string")return r(c,u,h);var f=c.type==="application/octet-stream",m=/constructor/i.test(o.HTMLElement)||o.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||f&&m||a)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var x=b.result;x=g?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=x:location=x,d=null},b.readAsDataURL(c)}else{var y=o.URL||o.webkitURL,v=y.createObjectURL(c);d?d.location=v:location.href=v,d=null,setTimeout(function(){y.revokeObjectURL(v)},4e4)}});o.saveAs=l.saveAs=l,t.exports=l})})(dK);var s_e=dK.exports;const o_e=_s(s_e);function ck(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof Qn=="object"&&Qn.version!==void 0?`Node.js/${Qn.version.substr(1)} (${Qn.platform}; ${Qn.arch})`:"<environment undetectable>"}function fK(t,e,n,r){if(typeof n!="function")throw new Error("method for before hook must be a function");return r||(r={}),Array.isArray(e)?e.reverse().reduce((i,s)=>fK.bind(null,t,s,i,r),n)():Promise.resolve().then(()=>t.registry[e]?t.registry[e].reduce((i,s)=>s.hook.bind(null,i,r),n)():n(r))}function a_e(t,e,n,r){const i=r;t.registry[n]||(t.registry[n]=[]),e==="before"&&(r=(s,o)=>Promise.resolve().then(i.bind(null,o)).then(s.bind(null,o))),e==="after"&&(r=(s,o)=>{let a;return Promise.resolve().then(s.bind(null,o)).then(l=>(a=l,i(a,o))).then(()=>a)}),e==="error"&&(r=(s,o)=>Promise.resolve().then(s.bind(null,o)).catch(a=>i(a,o))),t.registry[n].push({hook:r,orig:i})}function l_e(t,e,n){if(!t.registry[e])return;const r=t.registry[e].map(i=>i.orig).indexOf(n);r!==-1&&t.registry[e].splice(r,1)}const y8=Function.bind,v8=y8.bind(y8);function c_e(t,e,n){const r=v8(l_e,null).apply(null,[e]);t.api={remove:r},t.remove=r,["before","error","after","wrap"].forEach(i=>{const s=[e,i];t[i]=t.api[i]=v8(a_e,null).apply(null,s)})}function u_e(){const t={registry:{}},e=fK.bind(null,t);return c_e(e,t),e}const h_e={Collection:u_e};var d_e="0.0.0-development",f_e=`octokit-endpoint.js/${d_e} ${ck()}`,p_e={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":f_e},mediaType:{format:""}};function m_e(t){return t?Object.keys(t).reduce((e,n)=>(e[n.toLowerCase()]=t[n],e),{}):{}}function g_e(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);if(e===null)return!0;const n=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Function.prototype.call(n)===Function.prototype.call(t)}function pK(t,e){const n=Object.assign({},t);return Object.keys(e).forEach(r=>{g_e(e[r])?r in t?n[r]=pK(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}function x8(t){for(const e in t)t[e]===void 0&&delete t[e];return t}function sP(t,e,n){if(typeof e=="string"){let[i,s]=e.split(" ");n=Object.assign(s?{method:i,url:s}:{url:i},n)}else n=Object.assign({},e);n.headers=m_e(n.headers),x8(n),x8(n.headers);const r=pK(t||{},n);return n.url==="/graphql"&&(t&&t.mediaType.previews?.length&&(r.mediaType.previews=t.mediaType.previews.filter(i=>!r.mediaType.previews.includes(i)).concat(r.mediaType.previews)),r.mediaType.previews=(r.mediaType.previews||[]).map(i=>i.replace(/-preview/,""))),r}function b_e(t,e){const n=/\?/.test(t)?"&":"?",r=Object.keys(e);return r.length===0?t:t+n+r.map(i=>i==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${i}=${encodeURIComponent(e[i])}`).join("&")}var y_e=/\{[^{}}]+\}/g;function v_e(t){return t.replace(/(?:^\W+)|(?:(?<!\W)\W+$)/g,"").split(/,/)}function x_e(t){const e=t.match(y_e);return e?e.map(v_e).reduce((n,r)=>n.concat(r),[]):[]}function _8(t,e){const n={__proto__:null};for(const r of Object.keys(t))e.indexOf(r)===-1&&(n[r]=t[r]);return n}function mK(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function sm(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function q0(t,e,n){return e=t==="+"||t==="#"?mK(e):sm(e),n?sm(n)+"="+e:e}function Ip(t){return t!=null}function HC(t){return t===";"||t==="&"||t==="?"}function __e(t,e,n,r){var i=t[n],s=[];if(Ip(i)&&i!=="")if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")i=i.toString(),r&&r!=="*"&&(i=i.substring(0,parseInt(r,10))),s.push(q0(e,i,HC(e)?n:""));else if(r==="*")Array.isArray(i)?i.filter(Ip).forEach(function(o){s.push(q0(e,o,HC(e)?n:""))}):Object.keys(i).forEach(function(o){Ip(i[o])&&s.push(q0(e,i[o],o))});else{const o=[];Array.isArray(i)?i.filter(Ip).forEach(function(a){o.push(q0(e,a))}):Object.keys(i).forEach(function(a){Ip(i[a])&&(o.push(sm(a)),o.push(q0(e,i[a].toString())))}),HC(e)?s.push(sm(n)+"="+o.join(",")):o.length!==0&&s.push(o.join(","))}else e===";"?Ip(i)&&s.push(sm(n)):i===""&&(e==="&"||e==="?")?s.push(sm(n)+"="):i===""&&s.push("");return s}function w_e(t){return{expand:S_e.bind(null,t)}}function S_e(t,e){var n=["+","#",".","/",";","?","&"];return t=t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(r,i,s){if(i){let a="";const l=[];if(n.indexOf(i.charAt(0))!==-1&&(a=i.charAt(0),i=i.substr(1)),i.split(/,/g).forEach(function(c){var u=/([^:\*]*)(?::(\d+)|(\*))?/.exec(c);l.push(__e(e,a,u[1],u[2]||u[3]))}),a&&a!=="+"){var o=",";return a==="?"?o="&":a!=="#"&&(o=a),(l.length!==0?a:"")+l.join(o)}else return l.join(",")}else return mK(s)}),t==="/"?t:t.replace(/\/$/,"")}function gK(t){let e=t.method.toUpperCase(),n=(t.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),r=Object.assign({},t.headers),i,s=_8(t,["method","baseUrl","url","headers","request","mediaType"]);const o=x_e(n);n=w_e(n).expand(s),/^http/.test(n)||(n=t.baseUrl+n);const a=Object.keys(t).filter(u=>o.includes(u)).concat("baseUrl"),l=_8(s,a);if(!/application\/octet-stream/i.test(r.accept)&&(t.mediaType.format&&(r.accept=r.accept.split(/,/).map(u=>u.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${t.mediaType.format}`)).join(",")),n.endsWith("/graphql")&&t.mediaType.previews?.length)){const u=r.accept.match(/(?<![\w-])[\w-]+(?=-preview)/g)||[];r.accept=u.concat(t.mediaType.previews).map(h=>{const d=t.mediaType.format?`.${t.mediaType.format}`:"+json";return`application/vnd.github.${h}-preview${d}`}).join(",")}return["GET","HEAD"].includes(e)?n=b_e(n,l):"data"in l?i=l.data:Object.keys(l).length&&(i=l),!r["content-type"]&&typeof i<"u"&&(r["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof i>"u"&&(i=""),Object.assign({method:e,url:n,headers:r},typeof i<"u"?{body:i}:null,t.request?{request:t.request}:null)}function E_e(t,e,n){return gK(sP(t,e,n))}function bK(t,e){const n=sP(t,e),r=E_e.bind(null,n);return Object.assign(r,{DEFAULTS:n,defaults:bK.bind(null,n),merge:sP.bind(null,n),parse:gK})}var k_e=bK(null,p_e);const NR=function(){};NR.prototype=Object.create(null);const w8=/; *([!#$%&'*+.^\w`|~-]+)=("(?:[\v\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\v\u0020-\u00ff])*"|[!#$%&'*+.^\w`|~-]+) */gu,S8=/\\([\v\u0020-\u00ff])/gu,C_e=/^[!#$%&'*+.^\w|~-]+\/[!#$%&'*+.^\w|~-]+$/u,om={type:"",parameters:new NR};Object.freeze(om.parameters);Object.freeze(om);function T_e(t){if(typeof t!="string")return om;let e=t.indexOf(";");const n=e!==-1?t.slice(0,e).trim():t.trim();if(C_e.test(n)===!1)return om;const r={type:n.toLowerCase(),parameters:new NR};if(e===-1)return r;let i,s,o;for(w8.lastIndex=e;s=w8.exec(t);){if(s.index!==e)return om;e+=s[0].length,i=s[1].toLowerCase(),o=s[2],o[0]==='"'&&(o=o.slice(1,o.length-1),S8.test(o)&&(o=o.replace(S8,"$1"))),r.parameters[i]=o}return e!==t.length?om:r}var A_e=T_e;class S_ extends Error{name;status;request;response;constructor(e,n,r){super(e),this.name="HttpError",this.status=Number.parseInt(n),Number.isNaN(this.status)&&(this.status=0),"response"in r&&(this.response=r.response);const i=Object.assign({},r.request);r.request.headers.authorization&&(i.headers=Object.assign({},r.request.headers,{authorization:r.request.headers.authorization.replace(/(?<! ) .*$/," [REDACTED]")})),i.url=i.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=i}}var P_e="0.0.0-development",N_e={headers:{"user-agent":`octokit-request.js/${P_e} ${ck()}`}};function L_e(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);if(e===null)return!0;const n=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Function.prototype.call(n)===Function.prototype.call(t)}async function E8(t){const e=t.request?.fetch||globalThis.fetch;if(!e)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");const n=t.request?.log||console,r=t.request?.parseSuccessResponseBody!==!1,i=L_e(t.body)||Array.isArray(t.body)?JSON.stringify(t.body):t.body,s=Object.fromEntries(Object.entries(t.headers).map(([h,d])=>[h,String(d)]));let o;try{o=await e(t.url,{method:t.method,body:i,redirect:t.request?.redirect,headers:s,signal:t.request?.signal,...t.body&&{duplex:"half"}})}catch(h){let d="Unknown Error";if(h instanceof Error){if(h.name==="AbortError")throw h.status=500,h;d=h.message,h.name==="TypeError"&&"cause"in h&&(h.cause instanceof Error?d=h.cause.message:typeof h.cause=="string"&&(d=h.cause))}const f=new S_(d,500,{request:t});throw f.cause=h,f}const a=o.status,l=o.url,c={};for(const[h,d]of o.headers)c[h]=d;const u={url:l,status:a,headers:c,data:""};if("deprecation"in c){const h=c.link&&c.link.match(/<([^<>]+)>; rel="deprecation"/),d=h&&h.pop();n.warn(`[@octokit/request] "${t.method} ${t.url}" is deprecated. It is scheduled to be removed on ${c.sunset}${d?`. See ${d}`:""}`)}if(a===204||a===205)return u;if(t.method==="HEAD"){if(a<400)return u;throw new S_(o.statusText,a,{response:u,request:t})}if(a===304)throw u.data=await zC(o),new S_("Not modified",a,{response:u,request:t});if(a>=400)throw u.data=await zC(o),new S_(I_e(u.data),a,{response:u,request:t});return u.data=r?await zC(o):o.body,u}async function zC(t){const e=t.headers.get("content-type");if(!e)return t.text().catch(()=>"");const n=A_e(e);if(R_e(n)){let r="";try{return r=await t.text(),JSON.parse(r)}catch{return r}}else return n.type.startsWith("text/")||n.parameters.charset?.toLowerCase()==="utf-8"?t.text().catch(()=>""):t.arrayBuffer().catch(()=>new ArrayBuffer(0))}function R_e(t){return t.type==="application/json"||t.type==="application/scim+json"}function I_e(t){if(typeof t=="string")return t;if(t instanceof ArrayBuffer)return"Unknown error";if("message"in t){const e="documentation_url"in t?` - ${t.documentation_url}`:"";return Array.isArray(t.errors)?`${t.message}: ${t.errors.map(n=>JSON.stringify(n)).join(", ")}${e}`:`${t.message}${e}`}return`Unknown error: ${JSON.stringify(t)}`}function oP(t,e){const n=t.defaults(e);return Object.assign(function(i,s){const o=n.merge(i,s);if(!o.request||!o.request.hook)return E8(n.parse(o));const a=(l,c)=>E8(n.parse(n.merge(l,c)));return Object.assign(a,{endpoint:n,defaults:oP.bind(null,n)}),o.request.hook(a,o)},{endpoint:n,defaults:oP.bind(null,n)})}var aP=oP(k_e,N_e),O_e="0.0.0-development";function D_e(t){return`Request failed due to following response errors:
`+t.errors.map(e=>` - ${e.message}`).join(`
`)}var M_e=class extends Error{constructor(t,e,n){super(D_e(n)),this.request=t,this.headers=e,this.response=n,this.errors=n.errors,this.data=n.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name="GraphqlResponseError";errors;data},j_e=["method","baseUrl","url","headers","request","query","mediaType","operationName"],F_e=["query","method","url"],k8=/\/api\/v3\/?$/;function B_e(t,e,n){if(n){if(typeof e=="string"&&"query"in n)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const o in n)if(F_e.includes(o))return Promise.reject(new Error(`[@octokit/graphql] "${o}" cannot be used as variable name`))}const r=typeof e=="string"?Object.assign({query:e},n):e,i=Object.keys(r).reduce((o,a)=>j_e.includes(a)?(o[a]=r[a],o):(o.variables||(o.variables={}),o.variables[a]=r[a],o),{}),s=r.baseUrl||t.endpoint.DEFAULTS.baseUrl;return k8.test(s)&&(i.url=s.replace(k8,"/api/graphql")),t(i).then(o=>{if(o.data.errors){const a={};for(const l of Object.keys(o.headers))a[l]=o.headers[l];throw new M_e(i,a,o.data)}return o.data.data})}function LR(t,e){const n=t.defaults(e);return Object.assign((i,s)=>B_e(n,i,s),{defaults:LR.bind(null,n),endpoint:n.endpoint})}LR(aP,{headers:{"user-agent":`octokit-graphql.js/${O_e} ${ck()}`},method:"POST",url:"/graphql"});function U_e(t){return LR(t,{method:"POST",url:"/graphql"})}var VC="(?:[a-zA-Z0-9_-]+)",C8="\\.",T8=new RegExp(`^${VC}${C8}${VC}${C8}${VC}$`),$_e=T8.test.bind(T8);async function H_e(t){const e=$_e(t),n=t.startsWith("v1.")||t.startsWith("ghs_"),r=t.startsWith("ghu_");return{type:"token",token:t,tokenType:e?"app":n?"installation":r?"user-to-server":"oauth"}}function z_e(t){return t.split(/\./).length===3?`bearer ${t}`:`token ${t}`}async function V_e(t,e,n,r){const i=e.endpoint.merge(n,r);return i.headers.authorization=z_e(t),e(i)}var W_e=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(H_e.bind(null,e),{hook:V_e.bind(null,e)})};const yK="6.1.4",A8=()=>{},G_e=console.warn.bind(console),q_e=console.error.bind(console),P8=`octokit-core.js/${yK} ${ck()}`;let K_e=class{static VERSION=yK;static defaults(e){return class extends this{constructor(...r){const i=r[0]||{};if(typeof e=="function"){super(e(i));return}super(Object.assign({},e,i,i.userAgent&&e.userAgent?{userAgent:`${i.userAgent} ${e.userAgent}`}:null))}}}static plugins=[];static plugin(...e){const n=this.plugins;return class extends this{static plugins=n.concat(e.filter(i=>!n.includes(i)))}}constructor(e={}){const n=new h_e.Collection,r={baseUrl:aP.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:n.bind(null,"request")}),mediaType:{previews:[],format:""}};if(r.headers["user-agent"]=e.userAgent?`${e.userAgent} ${P8}`:P8,e.baseUrl&&(r.baseUrl=e.baseUrl),e.previews&&(r.mediaType.previews=e.previews),e.timeZone&&(r.headers["time-zone"]=e.timeZone),this.request=aP.defaults(r),this.graphql=U_e(this.request).defaults(r),this.log=Object.assign({debug:A8,info:A8,warn:G_e,error:q_e},e.log),this.hook=n,e.authStrategy){const{authStrategy:s,...o}=e,a=s(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:o},e.auth));n.wrap("request",a.hook),this.auth=a}else if(!e.auth)this.auth=async()=>({type:"unauthenticated"});else{const s=W_e(e.auth);n.wrap("request",s.hook),this.auth=s}const i=this.constructor;for(let s=0;s<i.plugins.length;++s)Object.assign(this,i.plugins[s](this,e))}request;graphql;log;hook;auth};const Y_e="5.3.1";function vK(t){t.hook.wrap("request",(e,n)=>{t.log.debug("request",n);const r=Date.now(),i=t.request.endpoint.parse(n),s=i.url.replace(n.baseUrl,"");return e(n).then(o=>{const a=o.headers["x-github-request-id"];return t.log.info(`${i.method} ${s} - ${o.status} with id ${a} in ${Date.now()-r}ms`),o}).catch(o=>{const a=o.response?.headers["x-github-request-id"]||"UNKNOWN";throw t.log.error(`${i.method} ${s} - ${o.status} with id ${a} in ${Date.now()-r}ms`),o})})}vK.VERSION=Y_e;var X_e="0.0.0-development";function Z_e(t){if(!t.data)return{...t,data:[]};if(!("total_count"in t.data&&!("url"in t.data)))return t;const n=t.data.incomplete_results,r=t.data.repository_selection,i=t.data.total_count;delete t.data.incomplete_results,delete t.data.repository_selection,delete t.data.total_count;const s=Object.keys(t.data)[0],o=t.data[s];return t.data=o,typeof n<"u"&&(t.data.incomplete_results=n),typeof r<"u"&&(t.data.repository_selection=r),t.data.total_count=i,t}function RR(t,e,n){const r=typeof e=="function"?e.endpoint(n):t.request.endpoint(e,n),i=typeof e=="function"?e:t.request,s=r.method,o=r.headers;let a=r.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!a)return{done:!0};try{const l=await i({method:s,url:a,headers:o}),c=Z_e(l);return a=((c.headers.link||"").match(/<([^<>]+)>;\s*rel="next"/)||[])[1],{value:c}}catch(l){if(l.status!==409)throw l;return a="",{value:{status:200,headers:{},data:[]}}}}})}}function xK(t,e,n,r){return typeof n=="function"&&(r=n,n=void 0),_K(t,[],RR(t,e,n)[Symbol.asyncIterator](),r)}function _K(t,e,n,r){return n.next().then(i=>{if(i.done)return e;let s=!1;function o(){s=!0}return e=e.concat(r?r(i.value,o):i.value.data),s?e:_K(t,e,n,r)})}Object.assign(xK,{iterator:RR});function wK(t){return{paginate:Object.assign(xK.bind(null,t),{iterator:RR.bind(null,t)})}}wK.VERSION=X_e;const J_e="13.3.1",Q_e={actions:{addCustomLabelsToSelfHostedRunnerForOrg:["POST /orgs/{org}/actions/runners/{runner_id}/labels"],addCustomLabelsToSelfHostedRunnerForRepo:["POST /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],addRepoAccessToSelfHostedRunnerGroupInOrg:["PUT /orgs/{org}/actions/runner-groups/{runner_group_id}/repositories/{repository_id}"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],approveWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/approve"],cancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel"],createEnvironmentVariable:["POST /repos/{owner}/{repo}/environments/{environment_name}/variables"],createOrUpdateEnvironmentSecret:["PUT /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}"],createOrgVariable:["POST /orgs/{org}/actions/variables"],createRegistrationTokenForOrg:["POST /orgs/{org}/actions/runners/registration-token"],createRegistrationTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/registration-token"],createRemoveTokenForOrg:["POST /orgs/{org}/actions/runners/remove-token"],createRemoveTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/remove-token"],createRepoVariable:["POST /repos/{owner}/{repo}/actions/variables"],createWorkflowDispatch:["POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches"],deleteActionsCacheById:["DELETE /repos/{owner}/{repo}/actions/caches/{cache_id}"],deleteActionsCacheByKey:["DELETE /repos/{owner}/{repo}/actions/caches{?key,ref}"],deleteArtifact:["DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],deleteEnvironmentSecret:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],deleteEnvironmentVariable:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],deleteOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}"],deleteOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}"],deleteRepoVariable:["DELETE /repos/{owner}/{repo}/actions/variables/{name}"],deleteSelfHostedRunnerFromOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}"],deleteSelfHostedRunnerFromRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}"],deleteWorkflowRun:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}"],deleteWorkflowRunLogs:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],disableSelectedRepositoryGithubActionsOrganization:["DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}"],disableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable"],downloadArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}"],downloadJobLogsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs"],downloadWorkflowRunAttemptLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/logs"],downloadWorkflowRunLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],enableSelectedRepositoryGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories/{repository_id}"],enableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable"],forceCancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/force-cancel"],generateRunnerJitconfigForOrg:["POST /orgs/{org}/actions/runners/generate-jitconfig"],generateRunnerJitconfigForRepo:["POST /repos/{owner}/{repo}/actions/runners/generate-jitconfig"],getActionsCacheList:["GET /repos/{owner}/{repo}/actions/caches"],getActionsCacheUsage:["GET /repos/{owner}/{repo}/actions/cache/usage"],getActionsCacheUsageByRepoForOrg:["GET /orgs/{org}/actions/cache/usage-by-repository"],getActionsCacheUsageForOrg:["GET /orgs/{org}/actions/cache/usage"],getAllowedActionsOrganization:["GET /orgs/{org}/actions/permissions/selected-actions"],getAllowedActionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/selected-actions"],getArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],getCustomOidcSubClaimForRepo:["GET /repos/{owner}/{repo}/actions/oidc/customization/sub"],getEnvironmentPublicKey:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/public-key"],getEnvironmentSecret:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],getEnvironmentVariable:["GET /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],getGithubActionsDefaultWorkflowPermissionsOrganization:["GET /orgs/{org}/actions/permissions/workflow"],getGithubActionsDefaultWorkflowPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/workflow"],getGithubActionsPermissionsOrganization:["GET /orgs/{org}/actions/permissions"],getGithubActionsPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions"],getJobForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}"],getOrgPublicKey:["GET /orgs/{org}/actions/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}"],getOrgVariable:["GET /orgs/{org}/actions/variables/{name}"],getPendingDeploymentsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],getRepoPermissions:["GET /repos/{owner}/{repo}/actions/permissions",{},{renamed:["actions","getGithubActionsPermissionsRepository"]}],getRepoPublicKey:["GET /repos/{owner}/{repo}/actions/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/actions/secrets/{secret_name}"],getRepoVariable:["GET /repos/{owner}/{repo}/actions/variables/{name}"],getReviewsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/approvals"],getSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}"],getSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}"],getWorkflow:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}"],getWorkflowAccessToRepository:["GET /repos/{owner}/{repo}/actions/permissions/access"],getWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}"],getWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}"],getWorkflowRunUsage:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing"],getWorkflowUsage:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing"],listArtifactsForRepo:["GET /repos/{owner}/{repo}/actions/artifacts"],listEnvironmentSecrets:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets"],listEnvironmentVariables:["GET /repos/{owner}/{repo}/environments/{environment_name}/variables"],listJobsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs"],listJobsForWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/jobs"],listLabelsForSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}/labels"],listLabelsForSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],listOrgSecrets:["GET /orgs/{org}/actions/secrets"],listOrgVariables:["GET /orgs/{org}/actions/variables"],listRepoOrganizationSecrets:["GET /repos/{owner}/{repo}/actions/organization-secrets"],listRepoOrganizationVariables:["GET /repos/{owner}/{repo}/actions/organization-variables"],listRepoSecrets:["GET /repos/{owner}/{repo}/actions/secrets"],listRepoVariables:["GET /repos/{owner}/{repo}/actions/variables"],listRepoWorkflows:["GET /repos/{owner}/{repo}/actions/workflows"],listRunnerApplicationsForOrg:["GET /orgs/{org}/actions/runners/downloads"],listRunnerApplicationsForRepo:["GET /repos/{owner}/{repo}/actions/runners/downloads"],listSelectedReposForOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}/repositories"],listSelectedReposForOrgVariable:["GET /orgs/{org}/actions/variables/{name}/repositories"],listSelectedRepositoriesEnabledGithubActionsOrganization:["GET /orgs/{org}/actions/permissions/repositories"],listSelfHostedRunnersForOrg:["GET /orgs/{org}/actions/runners"],listSelfHostedRunnersForRepo:["GET /repos/{owner}/{repo}/actions/runners"],listWorkflowRunArtifacts:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts"],listWorkflowRuns:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs"],listWorkflowRunsForRepo:["GET /repos/{owner}/{repo}/actions/runs"],reRunJobForWorkflowRun:["POST /repos/{owner}/{repo}/actions/jobs/{job_id}/rerun"],reRunWorkflow:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun"],reRunWorkflowFailedJobs:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun-failed-jobs"],removeAllCustomLabelsFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels"],removeAllCustomLabelsFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],removeCustomLabelFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels/{name}"],removeCustomLabelFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels/{name}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],reviewCustomGatesForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/deployment_protection_rule"],reviewPendingDeploymentsForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],setAllowedActionsOrganization:["PUT /orgs/{org}/actions/permissions/selected-actions"],setAllowedActionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/selected-actions"],setCustomLabelsForSelfHostedRunnerForOrg:["PUT /orgs/{org}/actions/runners/{runner_id}/labels"],setCustomLabelsForSelfHostedRunnerForRepo:["PUT /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],setCustomOidcSubClaimForRepo:["PUT /repos/{owner}/{repo}/actions/oidc/customization/sub"],setGithubActionsDefaultWorkflowPermissionsOrganization:["PUT /orgs/{org}/actions/permissions/workflow"],setGithubActionsDefaultWorkflowPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/workflow"],setGithubActionsPermissionsOrganization:["PUT /orgs/{org}/actions/permissions"],setGithubActionsPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories"],setSelectedReposForOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories"],setSelectedRepositoriesEnabledGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories"],setWorkflowAccessToRepository:["PUT /repos/{owner}/{repo}/actions/permissions/access"],updateEnvironmentVariable:["PATCH /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],updateOrgVariable:["PATCH /orgs/{org}/actions/variables/{name}"],updateRepoVariable:["PATCH /repos/{owner}/{repo}/actions/variables/{name}"]},activity:{checkRepoIsStarredByAuthenticatedUser:["GET /user/starred/{owner}/{repo}"],deleteRepoSubscription:["DELETE /repos/{owner}/{repo}/subscription"],deleteThreadSubscription:["DELETE /notifications/threads/{thread_id}/subscription"],getFeeds:["GET /feeds"],getRepoSubscription:["GET /repos/{owner}/{repo}/subscription"],getThread:["GET /notifications/threads/{thread_id}"],getThreadSubscriptionForAuthenticatedUser:["GET /notifications/threads/{thread_id}/subscription"],listEventsForAuthenticatedUser:["GET /users/{username}/events"],listNotificationsForAuthenticatedUser:["GET /notifications"],listOrgEventsForAuthenticatedUser:["GET /users/{username}/events/orgs/{org}"],listPublicEvents:["GET /events"],listPublicEventsForRepoNetwork:["GET /networks/{owner}/{repo}/events"],listPublicEventsForUser:["GET /users/{username}/events/public"],listPublicOrgEvents:["GET /orgs/{org}/events"],listReceivedEventsForUser:["GET /users/{username}/received_events"],listReceivedPublicEventsForUser:["GET /users/{username}/received_events/public"],listRepoEvents:["GET /repos/{owner}/{repo}/events"],listRepoNotificationsForAuthenticatedUser:["GET /repos/{owner}/{repo}/notifications"],listReposStarredByAuthenticatedUser:["GET /user/starred"],listReposStarredByUser:["GET /users/{username}/starred"],listReposWatchedByUser:["GET /users/{username}/subscriptions"],listStargazersForRepo:["GET /repos/{owner}/{repo}/stargazers"],listWatchedReposForAuthenticatedUser:["GET /user/subscriptions"],listWatchersForRepo:["GET /repos/{owner}/{repo}/subscribers"],markNotificationsAsRead:["PUT /notifications"],markRepoNotificationsAsRead:["PUT /repos/{owner}/{repo}/notifications"],markThreadAsDone:["DELETE /notifications/threads/{thread_id}"],markThreadAsRead:["PATCH /notifications/threads/{thread_id}"],setRepoSubscription:["PUT /repos/{owner}/{repo}/subscription"],setThreadSubscription:["PUT /notifications/threads/{thread_id}/subscription"],starRepoForAuthenticatedUser:["PUT /user/starred/{owner}/{repo}"],unstarRepoForAuthenticatedUser:["DELETE /user/starred/{owner}/{repo}"]},apps:{addRepoToInstallation:["PUT /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","addRepoToInstallationForAuthenticatedUser"]}],addRepoToInstallationForAuthenticatedUser:["PUT /user/installations/{installation_id}/repositories/{repository_id}"],checkToken:["POST /applications/{client_id}/token"],createFromManifest:["POST /app-manifests/{code}/conversions"],createInstallationAccessToken:["POST /app/installations/{installation_id}/access_tokens"],deleteAuthorization:["DELETE /applications/{client_id}/grant"],deleteInstallation:["DELETE /app/installations/{installation_id}"],deleteToken:["DELETE /applications/{client_id}/token"],getAuthenticated:["GET /app"],getBySlug:["GET /apps/{app_slug}"],getInstallation:["GET /app/installations/{installation_id}"],getOrgInstallation:["GET /orgs/{org}/installation"],getRepoInstallation:["GET /repos/{owner}/{repo}/installation"],getSubscriptionPlanForAccount:["GET /marketplace_listing/accounts/{account_id}"],getSubscriptionPlanForAccountStubbed:["GET /marketplace_listing/stubbed/accounts/{account_id}"],getUserInstallation:["GET /users/{username}/installation"],getWebhookConfigForApp:["GET /app/hook/config"],getWebhookDelivery:["GET /app/hook/deliveries/{delivery_id}"],listAccountsForPlan:["GET /marketplace_listing/plans/{plan_id}/accounts"],listAccountsForPlanStubbed:["GET /marketplace_listing/stubbed/plans/{plan_id}/accounts"],listInstallationReposForAuthenticatedUser:["GET /user/installations/{installation_id}/repositories"],listInstallationRequestsForAuthenticatedApp:["GET /app/installation-requests"],listInstallations:["GET /app/installations"],listInstallationsForAuthenticatedUser:["GET /user/installations"],listPlans:["GET /marketplace_listing/plans"],listPlansStubbed:["GET /marketplace_listing/stubbed/plans"],listReposAccessibleToInstallation:["GET /installation/repositories"],listSubscriptionsForAuthenticatedUser:["GET /user/marketplace_purchases"],listSubscriptionsForAuthenticatedUserStubbed:["GET /user/marketplace_purchases/stubbed"],listWebhookDeliveries:["GET /app/hook/deliveries"],redeliverWebhookDelivery:["POST /app/hook/deliveries/{delivery_id}/attempts"],removeRepoFromInstallation:["DELETE /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","removeRepoFromInstallationForAuthenticatedUser"]}],removeRepoFromInstallationForAuthenticatedUser:["DELETE /user/installations/{installation_id}/repositories/{repository_id}"],resetToken:["PATCH /applications/{client_id}/token"],revokeInstallationAccessToken:["DELETE /installation/token"],scopeToken:["POST /applications/{client_id}/token/scoped"],suspendInstallation:["PUT /app/installations/{installation_id}/suspended"],unsuspendInstallation:["DELETE /app/installations/{installation_id}/suspended"],updateWebhookConfigForApp:["PATCH /app/hook/config"]},billing:{getGithubActionsBillingOrg:["GET /orgs/{org}/settings/billing/actions"],getGithubActionsBillingUser:["GET /users/{username}/settings/billing/actions"],getGithubBillingUsageReportOrg:["GET /organizations/{org}/settings/billing/usage"],getGithubPackagesBillingOrg:["GET /orgs/{org}/settings/billing/packages"],getGithubPackagesBillingUser:["GET /users/{username}/settings/billing/packages"],getSharedStorageBillingOrg:["GET /orgs/{org}/settings/billing/shared-storage"],getSharedStorageBillingUser:["GET /users/{username}/settings/billing/shared-storage"]},checks:{create:["POST /repos/{owner}/{repo}/check-runs"],createSuite:["POST /repos/{owner}/{repo}/check-suites"],get:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}"],getSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}"],listAnnotations:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations"],listForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-runs"],listForSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs"],listSuitesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-suites"],rerequestRun:["POST /repos/{owner}/{repo}/check-runs/{check_run_id}/rerequest"],rerequestSuite:["POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest"],setSuitesPreferences:["PATCH /repos/{owner}/{repo}/check-suites/preferences"],update:["PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}"]},codeScanning:{commitAutofix:["POST /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix/commits"],createAutofix:["POST /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix"],createVariantAnalysis:["POST /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses"],deleteAnalysis:["DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}"],deleteCodeqlDatabase:["DELETE /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}"],getAlert:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}",{},{renamedParameters:{alert_id:"alert_number"}}],getAnalysis:["GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}"],getAutofix:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix"],getCodeqlDatabase:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}"],getDefaultSetup:["GET /repos/{owner}/{repo}/code-scanning/default-setup"],getSarif:["GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}"],getVariantAnalysis:["GET /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses/{codeql_variant_analysis_id}"],getVariantAnalysisRepoTask:["GET /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses/{codeql_variant_analysis_id}/repos/{repo_owner}/{repo_name}"],listAlertInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances"],listAlertsForOrg:["GET /orgs/{org}/code-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/code-scanning/alerts"],listAlertsInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances",{},{renamed:["codeScanning","listAlertInstances"]}],listCodeqlDatabases:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases"],listRecentAnalyses:["GET /repos/{owner}/{repo}/code-scanning/analyses"],updateAlert:["PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}"],updateDefaultSetup:["PATCH /repos/{owner}/{repo}/code-scanning/default-setup"],uploadSarif:["POST /repos/{owner}/{repo}/code-scanning/sarifs"]},codeSecurity:{attachConfiguration:["POST /orgs/{org}/code-security/configurations/{configuration_id}/attach"],attachEnterpriseConfiguration:["POST /enterprises/{enterprise}/code-security/configurations/{configuration_id}/attach"],createConfiguration:["POST /orgs/{org}/code-security/configurations"],createConfigurationForEnterprise:["POST /enterprises/{enterprise}/code-security/configurations"],deleteConfiguration:["DELETE /orgs/{org}/code-security/configurations/{configuration_id}"],deleteConfigurationForEnterprise:["DELETE /enterprises/{enterprise}/code-security/configurations/{configuration_id}"],detachConfiguration:["DELETE /orgs/{org}/code-security/configurations/detach"],getConfiguration:["GET /orgs/{org}/code-security/configurations/{configuration_id}"],getConfigurationForRepository:["GET /repos/{owner}/{repo}/code-security-configuration"],getConfigurationsForEnterprise:["GET /enterprises/{enterprise}/code-security/configurations"],getConfigurationsForOrg:["GET /orgs/{org}/code-security/configurations"],getDefaultConfigurations:["GET /orgs/{org}/code-security/configurations/defaults"],getDefaultConfigurationsForEnterprise:["GET /enterprises/{enterprise}/code-security/configurations/defaults"],getRepositoriesForConfiguration:["GET /orgs/{org}/code-security/configurations/{configuration_id}/repositories"],getRepositoriesForEnterpriseConfiguration:["GET /enterprises/{enterprise}/code-security/configurations/{configuration_id}/repositories"],getSingleConfigurationForEnterprise:["GET /enterprises/{enterprise}/code-security/configurations/{configuration_id}"],setConfigurationAsDefault:["PUT /orgs/{org}/code-security/configurations/{configuration_id}/defaults"],setConfigurationAsDefaultForEnterprise:["PUT /enterprises/{enterprise}/code-security/configurations/{configuration_id}/defaults"],updateConfiguration:["PATCH /orgs/{org}/code-security/configurations/{configuration_id}"],updateEnterpriseConfiguration:["PATCH /enterprises/{enterprise}/code-security/configurations/{configuration_id}"]},codesOfConduct:{getAllCodesOfConduct:["GET /codes_of_conduct"],getConductCode:["GET /codes_of_conduct/{key}"]},codespaces:{addRepositoryForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],checkPermissionsForDevcontainer:["GET /repos/{owner}/{repo}/codespaces/permissions_check"],codespaceMachinesForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/machines"],createForAuthenticatedUser:["POST /user/codespaces"],createOrUpdateOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],createOrUpdateSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}"],createWithPrForAuthenticatedUser:["POST /repos/{owner}/{repo}/pulls/{pull_number}/codespaces"],createWithRepoForAuthenticatedUser:["POST /repos/{owner}/{repo}/codespaces"],deleteForAuthenticatedUser:["DELETE /user/codespaces/{codespace_name}"],deleteFromOrganization:["DELETE /orgs/{org}/members/{username}/codespaces/{codespace_name}"],deleteOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],deleteSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}"],exportForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/exports"],getCodespacesForUserInOrg:["GET /orgs/{org}/members/{username}/codespaces"],getExportDetailsForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/exports/{export_id}"],getForAuthenticatedUser:["GET /user/codespaces/{codespace_name}"],getOrgPublicKey:["GET /orgs/{org}/codespaces/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}"],getPublicKeyForAuthenticatedUser:["GET /user/codespaces/secrets/public-key"],getRepoPublicKey:["GET /repos/{owner}/{repo}/codespaces/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],getSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}"],listDevcontainersInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/devcontainers"],listForAuthenticatedUser:["GET /user/codespaces"],listInOrganization:["GET /orgs/{org}/codespaces",{},{renamedParameters:{org_id:"org"}}],listInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces"],listOrgSecrets:["GET /orgs/{org}/codespaces/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/codespaces/secrets"],listRepositoriesForSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}/repositories"],listSecretsForAuthenticatedUser:["GET /user/codespaces/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],preFlightWithRepoForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/new"],publishForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/publish"],removeRepositoryForSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],repoMachinesForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/machines"],setRepositoriesForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],startForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/start"],stopForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/stop"],stopInOrganization:["POST /orgs/{org}/members/{username}/codespaces/{codespace_name}/stop"],updateForAuthenticatedUser:["PATCH /user/codespaces/{codespace_name}"]},copilot:{addCopilotSeatsForTeams:["POST /orgs/{org}/copilot/billing/selected_teams"],addCopilotSeatsForUsers:["POST /orgs/{org}/copilot/billing/selected_users"],cancelCopilotSeatAssignmentForTeams:["DELETE /orgs/{org}/copilot/billing/selected_teams"],cancelCopilotSeatAssignmentForUsers:["DELETE /orgs/{org}/copilot/billing/selected_users"],copilotMetricsForOrganization:["GET /orgs/{org}/copilot/metrics"],copilotMetricsForTeam:["GET /orgs/{org}/team/{team_slug}/copilot/metrics"],getCopilotOrganizationDetails:["GET /orgs/{org}/copilot/billing"],getCopilotSeatDetailsForUser:["GET /orgs/{org}/members/{username}/copilot"],listCopilotSeats:["GET /orgs/{org}/copilot/billing/seats"],usageMetricsForOrg:["GET /orgs/{org}/copilot/usage"],usageMetricsForTeam:["GET /orgs/{org}/team/{team_slug}/copilot/usage"]},dependabot:{addSelectedRepoToOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],deleteOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],getAlert:["GET /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"],getOrgPublicKey:["GET /orgs/{org}/dependabot/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}"],getRepoPublicKey:["GET /repos/{owner}/{repo}/dependabot/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/dependabot/alerts"],listAlertsForOrg:["GET /orgs/{org}/dependabot/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/dependabot/alerts"],listOrgSecrets:["GET /orgs/{org}/dependabot/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/dependabot/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],updateAlert:["PATCH /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"]},dependencyGraph:{createRepositorySnapshot:["POST /repos/{owner}/{repo}/dependency-graph/snapshots"],diffRange:["GET /repos/{owner}/{repo}/dependency-graph/compare/{basehead}"],exportSbom:["GET /repos/{owner}/{repo}/dependency-graph/sbom"]},emojis:{get:["GET /emojis"]},gists:{checkIsStarred:["GET /gists/{gist_id}/star"],create:["POST /gists"],createComment:["POST /gists/{gist_id}/comments"],delete:["DELETE /gists/{gist_id}"],deleteComment:["DELETE /gists/{gist_id}/comments/{comment_id}"],fork:["POST /gists/{gist_id}/forks"],get:["GET /gists/{gist_id}"],getComment:["GET /gists/{gist_id}/comments/{comment_id}"],getRevision:["GET /gists/{gist_id}/{sha}"],list:["GET /gists"],listComments:["GET /gists/{gist_id}/comments"],listCommits:["GET /gists/{gist_id}/commits"],listForUser:["GET /users/{username}/gists"],listForks:["GET /gists/{gist_id}/forks"],listPublic:["GET /gists/public"],listStarred:["GET /gists/starred"],star:["PUT /gists/{gist_id}/star"],unstar:["DELETE /gists/{gist_id}/star"],update:["PATCH /gists/{gist_id}"],updateComment:["PATCH /gists/{gist_id}/comments/{comment_id}"]},git:{createBlob:["POST /repos/{owner}/{repo}/git/blobs"],createCommit:["POST /repos/{owner}/{repo}/git/commits"],createRef:["POST /repos/{owner}/{repo}/git/refs"],createTag:["POST /repos/{owner}/{repo}/git/tags"],createTree:["POST /repos/{owner}/{repo}/git/trees"],deleteRef:["DELETE /repos/{owner}/{repo}/git/refs/{ref}"],getBlob:["GET /repos/{owner}/{repo}/git/blobs/{file_sha}"],getCommit:["GET /repos/{owner}/{repo}/git/commits/{commit_sha}"],getRef:["GET /repos/{owner}/{repo}/git/ref/{ref}"],getTag:["GET /repos/{owner}/{repo}/git/tags/{tag_sha}"],getTree:["GET /repos/{owner}/{repo}/git/trees/{tree_sha}"],listMatchingRefs:["GET /repos/{owner}/{repo}/git/matching-refs/{ref}"],updateRef:["PATCH /repos/{owner}/{repo}/git/refs/{ref}"]},gitignore:{getAllTemplates:["GET /gitignore/templates"],getTemplate:["GET /gitignore/templates/{name}"]},interactions:{getRestrictionsForAuthenticatedUser:["GET /user/interaction-limits"],getRestrictionsForOrg:["GET /orgs/{org}/interaction-limits"],getRestrictionsForRepo:["GET /repos/{owner}/{repo}/interaction-limits"],getRestrictionsForYourPublicRepos:["GET /user/interaction-limits",{},{renamed:["interactions","getRestrictionsForAuthenticatedUser"]}],removeRestrictionsForAuthenticatedUser:["DELETE /user/interaction-limits"],removeRestrictionsForOrg:["DELETE /orgs/{org}/interaction-limits"],removeRestrictionsForRepo:["DELETE /repos/{owner}/{repo}/interaction-limits"],removeRestrictionsForYourPublicRepos:["DELETE /user/interaction-limits",{},{renamed:["interactions","removeRestrictionsForAuthenticatedUser"]}],setRestrictionsForAuthenticatedUser:["PUT /user/interaction-limits"],setRestrictionsForOrg:["PUT /orgs/{org}/interaction-limits"],setRestrictionsForRepo:["PUT /repos/{owner}/{repo}/interaction-limits"],setRestrictionsForYourPublicRepos:["PUT /user/interaction-limits",{},{renamed:["interactions","setRestrictionsForAuthenticatedUser"]}]},issues:{addAssignees:["POST /repos/{owner}/{repo}/issues/{issue_number}/assignees"],addLabels:["POST /repos/{owner}/{repo}/issues/{issue_number}/labels"],addSubIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/sub_issues"],checkUserCanBeAssigned:["GET /repos/{owner}/{repo}/assignees/{assignee}"],checkUserCanBeAssignedToIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/assignees/{assignee}"],create:["POST /repos/{owner}/{repo}/issues"],createComment:["POST /repos/{owner}/{repo}/issues/{issue_number}/comments"],createLabel:["POST /repos/{owner}/{repo}/labels"],createMilestone:["POST /repos/{owner}/{repo}/milestones"],deleteComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}"],deleteLabel:["DELETE /repos/{owner}/{repo}/labels/{name}"],deleteMilestone:["DELETE /repos/{owner}/{repo}/milestones/{milestone_number}"],get:["GET /repos/{owner}/{repo}/issues/{issue_number}"],getComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}"],getEvent:["GET /repos/{owner}/{repo}/issues/events/{event_id}"],getLabel:["GET /repos/{owner}/{repo}/labels/{name}"],getMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}"],list:["GET /issues"],listAssignees:["GET /repos/{owner}/{repo}/assignees"],listComments:["GET /repos/{owner}/{repo}/issues/{issue_number}/comments"],listCommentsForRepo:["GET /repos/{owner}/{repo}/issues/comments"],listEvents:["GET /repos/{owner}/{repo}/issues/{issue_number}/events"],listEventsForRepo:["GET /repos/{owner}/{repo}/issues/events"],listEventsForTimeline:["GET /repos/{owner}/{repo}/issues/{issue_number}/timeline"],listForAuthenticatedUser:["GET /user/issues"],listForOrg:["GET /orgs/{org}/issues"],listForRepo:["GET /repos/{owner}/{repo}/issues"],listLabelsForMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels"],listLabelsForRepo:["GET /repos/{owner}/{repo}/labels"],listLabelsOnIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/labels"],listMilestones:["GET /repos/{owner}/{repo}/milestones"],listSubIssues:["GET /repos/{owner}/{repo}/issues/{issue_number}/sub_issues"],lock:["PUT /repos/{owner}/{repo}/issues/{issue_number}/lock"],removeAllLabels:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels"],removeAssignees:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees"],removeLabel:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}"],removeSubIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/sub_issue"],reprioritizeSubIssue:["PATCH /repos/{owner}/{repo}/issues/{issue_number}/sub_issues/priority"],setLabels:["PUT /repos/{owner}/{repo}/issues/{issue_number}/labels"],unlock:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock"],update:["PATCH /repos/{owner}/{repo}/issues/{issue_number}"],updateComment:["PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}"],updateLabel:["PATCH /repos/{owner}/{repo}/labels/{name}"],updateMilestone:["PATCH /repos/{owner}/{repo}/milestones/{milestone_number}"]},licenses:{get:["GET /licenses/{license}"],getAllCommonlyUsed:["GET /licenses"],getForRepo:["GET /repos/{owner}/{repo}/license"]},markdown:{render:["POST /markdown"],renderRaw:["POST /markdown/raw",{headers:{"content-type":"text/plain; charset=utf-8"}}]},meta:{get:["GET /meta"],getAllVersions:["GET /versions"],getOctocat:["GET /octocat"],getZen:["GET /zen"],root:["GET /"]},migrations:{deleteArchiveForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/archive"],deleteArchiveForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/archive"],downloadArchiveForOrg:["GET /orgs/{org}/migrations/{migration_id}/archive"],getArchiveForAuthenticatedUser:["GET /user/migrations/{migration_id}/archive"],getStatusForAuthenticatedUser:["GET /user/migrations/{migration_id}"],getStatusForOrg:["GET /orgs/{org}/migrations/{migration_id}"],listForAuthenticatedUser:["GET /user/migrations"],listForOrg:["GET /orgs/{org}/migrations"],listReposForAuthenticatedUser:["GET /user/migrations/{migration_id}/repositories"],listReposForOrg:["GET /orgs/{org}/migrations/{migration_id}/repositories"],listReposForUser:["GET /user/migrations/{migration_id}/repositories",{},{renamed:["migrations","listReposForAuthenticatedUser"]}],startForAuthenticatedUser:["POST /user/migrations"],startForOrg:["POST /orgs/{org}/migrations"],unlockRepoForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock"],unlockRepoForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock"]},oidc:{getOidcCustomSubTemplateForOrg:["GET /orgs/{org}/actions/oidc/customization/sub"],updateOidcCustomSubTemplateForOrg:["PUT /orgs/{org}/actions/oidc/customization/sub"]},orgs:{addSecurityManagerTeam:["PUT /orgs/{org}/security-managers/teams/{team_slug}",{},{deprecated:"octokit.rest.orgs.addSecurityManagerTeam() is deprecated, see https://docs.github.com/rest/orgs/security-managers#add-a-security-manager-team"}],assignTeamToOrgRole:["PUT /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],assignUserToOrgRole:["PUT /orgs/{org}/organization-roles/users/{username}/{role_id}"],blockUser:["PUT /orgs/{org}/blocks/{username}"],cancelInvitation:["DELETE /orgs/{org}/invitations/{invitation_id}"],checkBlockedUser:["GET /orgs/{org}/blocks/{username}"],checkMembershipForUser:["GET /orgs/{org}/members/{username}"],checkPublicMembershipForUser:["GET /orgs/{org}/public_members/{username}"],convertMemberToOutsideCollaborator:["PUT /orgs/{org}/outside_collaborators/{username}"],createInvitation:["POST /orgs/{org}/invitations"],createOrUpdateCustomProperties:["PATCH /orgs/{org}/properties/schema"],createOrUpdateCustomPropertiesValuesForRepos:["PATCH /orgs/{org}/properties/values"],createOrUpdateCustomProperty:["PUT /orgs/{org}/properties/schema/{custom_property_name}"],createWebhook:["POST /orgs/{org}/hooks"],delete:["DELETE /orgs/{org}"],deleteWebhook:["DELETE /orgs/{org}/hooks/{hook_id}"],enableOrDisableSecurityProductOnAllOrgRepos:["POST /orgs/{org}/{security_product}/{enablement}",{},{deprecated:"octokit.rest.orgs.enableOrDisableSecurityProductOnAllOrgRepos() is deprecated, see https://docs.github.com/rest/orgs/orgs#enable-or-disable-a-security-feature-for-an-organization"}],get:["GET /orgs/{org}"],getAllCustomProperties:["GET /orgs/{org}/properties/schema"],getCustomProperty:["GET /orgs/{org}/properties/schema/{custom_property_name}"],getMembershipForAuthenticatedUser:["GET /user/memberships/orgs/{org}"],getMembershipForUser:["GET /orgs/{org}/memberships/{username}"],getOrgRole:["GET /orgs/{org}/organization-roles/{role_id}"],getWebhook:["GET /orgs/{org}/hooks/{hook_id}"],getWebhookConfigForOrg:["GET /orgs/{org}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}"],list:["GET /organizations"],listAppInstallations:["GET /orgs/{org}/installations"],listAttestations:["GET /orgs/{org}/attestations/{subject_digest}"],listBlockedUsers:["GET /orgs/{org}/blocks"],listCustomPropertiesValuesForRepos:["GET /orgs/{org}/properties/values"],listFailedInvitations:["GET /orgs/{org}/failed_invitations"],listForAuthenticatedUser:["GET /user/orgs"],listForUser:["GET /users/{username}/orgs"],listInvitationTeams:["GET /orgs/{org}/invitations/{invitation_id}/teams"],listMembers:["GET /orgs/{org}/members"],listMembershipsForAuthenticatedUser:["GET /user/memberships/orgs"],listOrgRoleTeams:["GET /orgs/{org}/organization-roles/{role_id}/teams"],listOrgRoleUsers:["GET /orgs/{org}/organization-roles/{role_id}/users"],listOrgRoles:["GET /orgs/{org}/organization-roles"],listOrganizationFineGrainedPermissions:["GET /orgs/{org}/organization-fine-grained-permissions"],listOutsideCollaborators:["GET /orgs/{org}/outside_collaborators"],listPatGrantRepositories:["GET /orgs/{org}/personal-access-tokens/{pat_id}/repositories"],listPatGrantRequestRepositories:["GET /orgs/{org}/personal-access-token-requests/{pat_request_id}/repositories"],listPatGrantRequests:["GET /orgs/{org}/personal-access-token-requests"],listPatGrants:["GET /orgs/{org}/personal-access-tokens"],listPendingInvitations:["GET /orgs/{org}/invitations"],listPublicMembers:["GET /orgs/{org}/public_members"],listSecurityManagerTeams:["GET /orgs/{org}/security-managers",{},{deprecated:"octokit.rest.orgs.listSecurityManagerTeams() is deprecated, see https://docs.github.com/rest/orgs/security-managers#list-security-manager-teams"}],listWebhookDeliveries:["GET /orgs/{org}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /orgs/{org}/hooks"],pingWebhook:["POST /orgs/{org}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeCustomProperty:["DELETE /orgs/{org}/properties/schema/{custom_property_name}"],removeMember:["DELETE /orgs/{org}/members/{username}"],removeMembershipForUser:["DELETE /orgs/{org}/memberships/{username}"],removeOutsideCollaborator:["DELETE /orgs/{org}/outside_collaborators/{username}"],removePublicMembershipForAuthenticatedUser:["DELETE /orgs/{org}/public_members/{username}"],removeSecurityManagerTeam:["DELETE /orgs/{org}/security-managers/teams/{team_slug}",{},{deprecated:"octokit.rest.orgs.removeSecurityManagerTeam() is deprecated, see https://docs.github.com/rest/orgs/security-managers#remove-a-security-manager-team"}],reviewPatGrantRequest:["POST /orgs/{org}/personal-access-token-requests/{pat_request_id}"],reviewPatGrantRequestsInBulk:["POST /orgs/{org}/personal-access-token-requests"],revokeAllOrgRolesTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}"],revokeAllOrgRolesUser:["DELETE /orgs/{org}/organization-roles/users/{username}"],revokeOrgRoleTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],revokeOrgRoleUser:["DELETE /orgs/{org}/organization-roles/users/{username}/{role_id}"],setMembershipForUser:["PUT /orgs/{org}/memberships/{username}"],setPublicMembershipForAuthenticatedUser:["PUT /orgs/{org}/public_members/{username}"],unblockUser:["DELETE /orgs/{org}/blocks/{username}"],update:["PATCH /orgs/{org}"],updateMembershipForAuthenticatedUser:["PATCH /user/memberships/orgs/{org}"],updatePatAccess:["POST /orgs/{org}/personal-access-tokens/{pat_id}"],updatePatAccesses:["POST /orgs/{org}/personal-access-tokens"],updateWebhook:["PATCH /orgs/{org}/hooks/{hook_id}"],updateWebhookConfigForOrg:["PATCH /orgs/{org}/hooks/{hook_id}/config"]},packages:{deletePackageForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}"],deletePackageForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}"],deletePackageForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}"],deletePackageVersionForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getAllPackageVersionsForAPackageOwnedByAnOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByOrg"]}],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByAuthenticatedUser"]}],getAllPackageVersionsForPackageOwnedByAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions"],getPackageForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}"],getPackageForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}"],getPackageForUser:["GET /users/{username}/packages/{package_type}/{package_name}"],getPackageVersionForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],listDockerMigrationConflictingPackagesForAuthenticatedUser:["GET /user/docker/conflicts"],listDockerMigrationConflictingPackagesForOrganization:["GET /orgs/{org}/docker/conflicts"],listDockerMigrationConflictingPackagesForUser:["GET /users/{username}/docker/conflicts"],listPackagesForAuthenticatedUser:["GET /user/packages"],listPackagesForOrganization:["GET /orgs/{org}/packages"],listPackagesForUser:["GET /users/{username}/packages"],restorePackageForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForUser:["POST /users/{username}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageVersionForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForUser:["POST /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"]},privateRegistries:{createOrgPrivateRegistry:["POST /orgs/{org}/private-registries"],deleteOrgPrivateRegistry:["DELETE /orgs/{org}/private-registries/{secret_name}"],getOrgPrivateRegistry:["GET /orgs/{org}/private-registries/{secret_name}"],getOrgPublicKey:["GET /orgs/{org}/private-registries/public-key"],listOrgPrivateRegistries:["GET /orgs/{org}/private-registries"],updateOrgPrivateRegistry:["PATCH /orgs/{org}/private-registries/{secret_name}"]},projects:{addCollaborator:["PUT /projects/{project_id}/collaborators/{username}"],createCard:["POST /projects/columns/{column_id}/cards"],createColumn:["POST /projects/{project_id}/columns"],createForAuthenticatedUser:["POST /user/projects"],createForOrg:["POST /orgs/{org}/projects"],createForRepo:["POST /repos/{owner}/{repo}/projects"],delete:["DELETE /projects/{project_id}"],deleteCard:["DELETE /projects/columns/cards/{card_id}"],deleteColumn:["DELETE /projects/columns/{column_id}"],get:["GET /projects/{project_id}"],getCard:["GET /projects/columns/cards/{card_id}"],getColumn:["GET /projects/columns/{column_id}"],getPermissionForUser:["GET /projects/{project_id}/collaborators/{username}/permission"],listCards:["GET /projects/columns/{column_id}/cards"],listCollaborators:["GET /projects/{project_id}/collaborators"],listColumns:["GET /projects/{project_id}/columns"],listForOrg:["GET /orgs/{org}/projects"],listForRepo:["GET /repos/{owner}/{repo}/projects"],listForUser:["GET /users/{username}/projects"],moveCard:["POST /projects/columns/cards/{card_id}/moves"],moveColumn:["POST /projects/columns/{column_id}/moves"],removeCollaborator:["DELETE /projects/{project_id}/collaborators/{username}"],update:["PATCH /projects/{project_id}"],updateCard:["PATCH /projects/columns/cards/{card_id}"],updateColumn:["PATCH /projects/columns/{column_id}"]},pulls:{checkIfMerged:["GET /repos/{owner}/{repo}/pulls/{pull_number}/merge"],create:["POST /repos/{owner}/{repo}/pulls"],createReplyForReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies"],createReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],createReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments"],deletePendingReview:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],deleteReviewComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}"],dismissReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals"],get:["GET /repos/{owner}/{repo}/pulls/{pull_number}"],getReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],getReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}"],list:["GET /repos/{owner}/{repo}/pulls"],listCommentsForReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments"],listCommits:["GET /repos/{owner}/{repo}/pulls/{pull_number}/commits"],listFiles:["GET /repos/{owner}/{repo}/pulls/{pull_number}/files"],listRequestedReviewers:["GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],listReviewComments:["GET /repos/{owner}/{repo}/pulls/{pull_number}/comments"],listReviewCommentsForRepo:["GET /repos/{owner}/{repo}/pulls/comments"],listReviews:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],merge:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge"],removeRequestedReviewers:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],requestReviewers:["POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],submitReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events"],update:["PATCH /repos/{owner}/{repo}/pulls/{pull_number}"],updateBranch:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch"],updateReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],updateReviewComment:["PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}"]},rateLimit:{get:["GET /rate_limit"]},reactions:{createForCommitComment:["POST /repos/{owner}/{repo}/comments/{comment_id}/reactions"],createForIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/reactions"],createForIssueComment:["POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],createForPullRequestReviewComment:["POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],createForRelease:["POST /repos/{owner}/{repo}/releases/{release_id}/reactions"],createForTeamDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],createForTeamDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"],deleteForCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}"],deleteForIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}"],deleteForIssueComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}"],deleteForPullRequestComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}"],deleteForRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}/reactions/{reaction_id}"],deleteForTeamDiscussion:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}"],deleteForTeamDiscussionComment:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}"],listForCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}/reactions"],listForIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/reactions"],listForIssueComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],listForPullRequestReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],listForRelease:["GET /repos/{owner}/{repo}/releases/{release_id}/reactions"],listForTeamDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],listForTeamDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"]},repos:{acceptInvitation:["PATCH /user/repository_invitations/{invitation_id}",{},{renamed:["repos","acceptInvitationForAuthenticatedUser"]}],acceptInvitationForAuthenticatedUser:["PATCH /user/repository_invitations/{invitation_id}"],addAppAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],addCollaborator:["PUT /repos/{owner}/{repo}/collaborators/{username}"],addStatusCheckContexts:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],addTeamAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],addUserAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],cancelPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}/cancel"],checkAutomatedSecurityFixes:["GET /repos/{owner}/{repo}/automated-security-fixes"],checkCollaborator:["GET /repos/{owner}/{repo}/collaborators/{username}"],checkPrivateVulnerabilityReporting:["GET /repos/{owner}/{repo}/private-vulnerability-reporting"],checkVulnerabilityAlerts:["GET /repos/{owner}/{repo}/vulnerability-alerts"],codeownersErrors:["GET /repos/{owner}/{repo}/codeowners/errors"],compareCommits:["GET /repos/{owner}/{repo}/compare/{base}...{head}"],compareCommitsWithBasehead:["GET /repos/{owner}/{repo}/compare/{basehead}"],createAttestation:["POST /repos/{owner}/{repo}/attestations"],createAutolink:["POST /repos/{owner}/{repo}/autolinks"],createCommitComment:["POST /repos/{owner}/{repo}/commits/{commit_sha}/comments"],createCommitSignatureProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],createCommitStatus:["POST /repos/{owner}/{repo}/statuses/{sha}"],createDeployKey:["POST /repos/{owner}/{repo}/keys"],createDeployment:["POST /repos/{owner}/{repo}/deployments"],createDeploymentBranchPolicy:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],createDeploymentProtectionRule:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],createDeploymentStatus:["POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],createDispatchEvent:["POST /repos/{owner}/{repo}/dispatches"],createForAuthenticatedUser:["POST /user/repos"],createFork:["POST /repos/{owner}/{repo}/forks"],createInOrg:["POST /orgs/{org}/repos"],createOrUpdateCustomPropertiesValues:["PATCH /repos/{owner}/{repo}/properties/values"],createOrUpdateEnvironment:["PUT /repos/{owner}/{repo}/environments/{environment_name}"],createOrUpdateFileContents:["PUT /repos/{owner}/{repo}/contents/{path}"],createOrgRuleset:["POST /orgs/{org}/rulesets"],createPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments"],createPagesSite:["POST /repos/{owner}/{repo}/pages"],createRelease:["POST /repos/{owner}/{repo}/releases"],createRepoRuleset:["POST /repos/{owner}/{repo}/rulesets"],createUsingTemplate:["POST /repos/{template_owner}/{template_repo}/generate"],createWebhook:["POST /repos/{owner}/{repo}/hooks"],declineInvitation:["DELETE /user/repository_invitations/{invitation_id}",{},{renamed:["repos","declineInvitationForAuthenticatedUser"]}],declineInvitationForAuthenticatedUser:["DELETE /user/repository_invitations/{invitation_id}"],delete:["DELETE /repos/{owner}/{repo}"],deleteAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],deleteAdminBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],deleteAnEnvironment:["DELETE /repos/{owner}/{repo}/environments/{environment_name}"],deleteAutolink:["DELETE /repos/{owner}/{repo}/autolinks/{autolink_id}"],deleteBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection"],deleteCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}"],deleteCommitSignatureProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],deleteDeployKey:["DELETE /repos/{owner}/{repo}/keys/{key_id}"],deleteDeployment:["DELETE /repos/{owner}/{repo}/deployments/{deployment_id}"],deleteDeploymentBranchPolicy:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],deleteFile:["DELETE /repos/{owner}/{repo}/contents/{path}"],deleteInvitation:["DELETE /repos/{owner}/{repo}/invitations/{invitation_id}"],deleteOrgRuleset:["DELETE /orgs/{org}/rulesets/{ruleset_id}"],deletePagesSite:["DELETE /repos/{owner}/{repo}/pages"],deletePullRequestReviewProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],deleteRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}"],deleteReleaseAsset:["DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}"],deleteRepoRuleset:["DELETE /repos/{owner}/{repo}/rulesets/{ruleset_id}"],deleteWebhook:["DELETE /repos/{owner}/{repo}/hooks/{hook_id}"],disableAutomatedSecurityFixes:["DELETE /repos/{owner}/{repo}/automated-security-fixes"],disableDeploymentProtectionRule:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],disablePrivateVulnerabilityReporting:["DELETE /repos/{owner}/{repo}/private-vulnerability-reporting"],disableVulnerabilityAlerts:["DELETE /repos/{owner}/{repo}/vulnerability-alerts"],downloadArchive:["GET /repos/{owner}/{repo}/zipball/{ref}",{},{renamed:["repos","downloadZipballArchive"]}],downloadTarballArchive:["GET /repos/{owner}/{repo}/tarball/{ref}"],downloadZipballArchive:["GET /repos/{owner}/{repo}/zipball/{ref}"],enableAutomatedSecurityFixes:["PUT /repos/{owner}/{repo}/automated-security-fixes"],enablePrivateVulnerabilityReporting:["PUT /repos/{owner}/{repo}/private-vulnerability-reporting"],enableVulnerabilityAlerts:["PUT /repos/{owner}/{repo}/vulnerability-alerts"],generateReleaseNotes:["POST /repos/{owner}/{repo}/releases/generate-notes"],get:["GET /repos/{owner}/{repo}"],getAccessRestrictions:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],getAdminBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],getAllDeploymentProtectionRules:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],getAllEnvironments:["GET /repos/{owner}/{repo}/environments"],getAllStatusCheckContexts:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts"],getAllTopics:["GET /repos/{owner}/{repo}/topics"],getAppsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps"],getAutolink:["GET /repos/{owner}/{repo}/autolinks/{autolink_id}"],getBranch:["GET /repos/{owner}/{repo}/branches/{branch}"],getBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection"],getBranchRules:["GET /repos/{owner}/{repo}/rules/branches/{branch}"],getClones:["GET /repos/{owner}/{repo}/traffic/clones"],getCodeFrequencyStats:["GET /repos/{owner}/{repo}/stats/code_frequency"],getCollaboratorPermissionLevel:["GET /repos/{owner}/{repo}/collaborators/{username}/permission"],getCombinedStatusForRef:["GET /repos/{owner}/{repo}/commits/{ref}/status"],getCommit:["GET /repos/{owner}/{repo}/commits/{ref}"],getCommitActivityStats:["GET /repos/{owner}/{repo}/stats/commit_activity"],getCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}"],getCommitSignatureProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],getCommunityProfileMetrics:["GET /repos/{owner}/{repo}/community/profile"],getContent:["GET /repos/{owner}/{repo}/contents/{path}"],getContributorsStats:["GET /repos/{owner}/{repo}/stats/contributors"],getCustomDeploymentProtectionRule:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],getCustomPropertiesValues:["GET /repos/{owner}/{repo}/properties/values"],getDeployKey:["GET /repos/{owner}/{repo}/keys/{key_id}"],getDeployment:["GET /repos/{owner}/{repo}/deployments/{deployment_id}"],getDeploymentBranchPolicy:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],getDeploymentStatus:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}"],getEnvironment:["GET /repos/{owner}/{repo}/environments/{environment_name}"],getLatestPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/latest"],getLatestRelease:["GET /repos/{owner}/{repo}/releases/latest"],getOrgRuleSuite:["GET /orgs/{org}/rulesets/rule-suites/{rule_suite_id}"],getOrgRuleSuites:["GET /orgs/{org}/rulesets/rule-suites"],getOrgRuleset:["GET /orgs/{org}/rulesets/{ruleset_id}"],getOrgRulesets:["GET /orgs/{org}/rulesets"],getPages:["GET /repos/{owner}/{repo}/pages"],getPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/{build_id}"],getPagesDeployment:["GET /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}"],getPagesHealthCheck:["GET /repos/{owner}/{repo}/pages/health"],getParticipationStats:["GET /repos/{owner}/{repo}/stats/participation"],getPullRequestReviewProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],getPunchCardStats:["GET /repos/{owner}/{repo}/stats/punch_card"],getReadme:["GET /repos/{owner}/{repo}/readme"],getReadmeInDirectory:["GET /repos/{owner}/{repo}/readme/{dir}"],getRelease:["GET /repos/{owner}/{repo}/releases/{release_id}"],getReleaseAsset:["GET /repos/{owner}/{repo}/releases/assets/{asset_id}"],getReleaseByTag:["GET /repos/{owner}/{repo}/releases/tags/{tag}"],getRepoRuleSuite:["GET /repos/{owner}/{repo}/rulesets/rule-suites/{rule_suite_id}"],getRepoRuleSuites:["GET /repos/{owner}/{repo}/rulesets/rule-suites"],getRepoRuleset:["GET /repos/{owner}/{repo}/rulesets/{ruleset_id}"],getRepoRulesets:["GET /repos/{owner}/{repo}/rulesets"],getStatusChecksProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],getTeamsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams"],getTopPaths:["GET /repos/{owner}/{repo}/traffic/popular/paths"],getTopReferrers:["GET /repos/{owner}/{repo}/traffic/popular/referrers"],getUsersWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users"],getViews:["GET /repos/{owner}/{repo}/traffic/views"],getWebhook:["GET /repos/{owner}/{repo}/hooks/{hook_id}"],getWebhookConfigForRepo:["GET /repos/{owner}/{repo}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}"],listActivities:["GET /repos/{owner}/{repo}/activity"],listAttestations:["GET /repos/{owner}/{repo}/attestations/{subject_digest}"],listAutolinks:["GET /repos/{owner}/{repo}/autolinks"],listBranches:["GET /repos/{owner}/{repo}/branches"],listBranchesForHeadCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head"],listCollaborators:["GET /repos/{owner}/{repo}/collaborators"],listCommentsForCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/comments"],listCommitCommentsForRepo:["GET /repos/{owner}/{repo}/comments"],listCommitStatusesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/statuses"],listCommits:["GET /repos/{owner}/{repo}/commits"],listContributors:["GET /repos/{owner}/{repo}/contributors"],listCustomDeploymentRuleIntegrations:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/apps"],listDeployKeys:["GET /repos/{owner}/{repo}/keys"],listDeploymentBranchPolicies:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],listDeploymentStatuses:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],listDeployments:["GET /repos/{owner}/{repo}/deployments"],listForAuthenticatedUser:["GET /user/repos"],listForOrg:["GET /orgs/{org}/repos"],listForUser:["GET /users/{username}/repos"],listForks:["GET /repos/{owner}/{repo}/forks"],listInvitations:["GET /repos/{owner}/{repo}/invitations"],listInvitationsForAuthenticatedUser:["GET /user/repository_invitations"],listLanguages:["GET /repos/{owner}/{repo}/languages"],listPagesBuilds:["GET /repos/{owner}/{repo}/pages/builds"],listPublic:["GET /repositories"],listPullRequestsAssociatedWithCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls"],listReleaseAssets:["GET /repos/{owner}/{repo}/releases/{release_id}/assets"],listReleases:["GET /repos/{owner}/{repo}/releases"],listTags:["GET /repos/{owner}/{repo}/tags"],listTeams:["GET /repos/{owner}/{repo}/teams"],listWebhookDeliveries:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /repos/{owner}/{repo}/hooks"],merge:["POST /repos/{owner}/{repo}/merges"],mergeUpstream:["POST /repos/{owner}/{repo}/merge-upstream"],pingWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeAppAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],removeCollaborator:["DELETE /repos/{owner}/{repo}/collaborators/{username}"],removeStatusCheckContexts:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],removeStatusCheckProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],removeTeamAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],removeUserAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],renameBranch:["POST /repos/{owner}/{repo}/branches/{branch}/rename"],replaceAllTopics:["PUT /repos/{owner}/{repo}/topics"],requestPagesBuild:["POST /repos/{owner}/{repo}/pages/builds"],setAdminBranchProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],setAppAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],setStatusCheckContexts:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],setTeamAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],setUserAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],testPushWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/tests"],transfer:["POST /repos/{owner}/{repo}/transfer"],update:["PATCH /repos/{owner}/{repo}"],updateBranchProtection:["PUT /repos/{owner}/{repo}/branches/{branch}/protection"],updateCommitComment:["PATCH /repos/{owner}/{repo}/comments/{comment_id}"],updateDeploymentBranchPolicy:["PUT /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],updateInformationAboutPagesSite:["PUT /repos/{owner}/{repo}/pages"],updateInvitation:["PATCH /repos/{owner}/{repo}/invitations/{invitation_id}"],updateOrgRuleset:["PUT /orgs/{org}/rulesets/{ruleset_id}"],updatePullRequestReviewProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],updateRelease:["PATCH /repos/{owner}/{repo}/releases/{release_id}"],updateReleaseAsset:["PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}"],updateRepoRuleset:["PUT /repos/{owner}/{repo}/rulesets/{ruleset_id}"],updateStatusCheckPotection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks",{},{renamed:["repos","updateStatusCheckProtection"]}],updateStatusCheckProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],updateWebhook:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}"],updateWebhookConfigForRepo:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config"],uploadReleaseAsset:["POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}",{baseUrl:"https://uploads.github.com"}]},search:{code:["GET /search/code"],commits:["GET /search/commits"],issuesAndPullRequests:["GET /search/issues"],labels:["GET /search/labels"],repos:["GET /search/repositories"],topics:["GET /search/topics"],users:["GET /search/users"]},secretScanning:{createPushProtectionBypass:["POST /repos/{owner}/{repo}/secret-scanning/push-protection-bypasses"],getAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"],getScanHistory:["GET /repos/{owner}/{repo}/secret-scanning/scan-history"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/secret-scanning/alerts"],listAlertsForOrg:["GET /orgs/{org}/secret-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/secret-scanning/alerts"],listLocationsForAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}/locations"],updateAlert:["PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"]},securityAdvisories:{createFork:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/forks"],createPrivateVulnerabilityReport:["POST /repos/{owner}/{repo}/security-advisories/reports"],createRepositoryAdvisory:["POST /repos/{owner}/{repo}/security-advisories"],createRepositoryAdvisoryCveRequest:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/cve"],getGlobalAdvisory:["GET /advisories/{ghsa_id}"],getRepositoryAdvisory:["GET /repos/{owner}/{repo}/security-advisories/{ghsa_id}"],listGlobalAdvisories:["GET /advisories"],listOrgRepositoryAdvisories:["GET /orgs/{org}/security-advisories"],listRepositoryAdvisories:["GET /repos/{owner}/{repo}/security-advisories"],updateRepositoryAdvisory:["PATCH /repos/{owner}/{repo}/security-advisories/{ghsa_id}"]},teams:{addOrUpdateMembershipForUserInOrg:["PUT /orgs/{org}/teams/{team_slug}/memberships/{username}"],addOrUpdateProjectPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}"],addOrUpdateRepoPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],checkPermissionsForProjectInOrg:["GET /orgs/{org}/teams/{team_slug}/projects/{project_id}"],checkPermissionsForRepoInOrg:["GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],create:["POST /orgs/{org}/teams"],createDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],createDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions"],deleteDiscussionCommentInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],deleteDiscussionInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],deleteInOrg:["DELETE /orgs/{org}/teams/{team_slug}"],getByName:["GET /orgs/{org}/teams/{team_slug}"],getDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],getDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],getMembershipForUserInOrg:["GET /orgs/{org}/teams/{team_slug}/memberships/{username}"],list:["GET /orgs/{org}/teams"],listChildInOrg:["GET /orgs/{org}/teams/{team_slug}/teams"],listDiscussionCommentsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],listDiscussionsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions"],listForAuthenticatedUser:["GET /user/teams"],listMembersInOrg:["GET /orgs/{org}/teams/{team_slug}/members"],listPendingInvitationsInOrg:["GET /orgs/{org}/teams/{team_slug}/invitations"],listProjectsInOrg:["GET /orgs/{org}/teams/{team_slug}/projects"],listReposInOrg:["GET /orgs/{org}/teams/{team_slug}/repos"],removeMembershipForUserInOrg:["DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}"],removeProjectInOrg:["DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}"],removeRepoInOrg:["DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],updateDiscussionCommentInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],updateDiscussionInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],updateInOrg:["PATCH /orgs/{org}/teams/{team_slug}"]},users:{addEmailForAuthenticated:["POST /user/emails",{},{renamed:["users","addEmailForAuthenticatedUser"]}],addEmailForAuthenticatedUser:["POST /user/emails"],addSocialAccountForAuthenticatedUser:["POST /user/social_accounts"],block:["PUT /user/blocks/{username}"],checkBlocked:["GET /user/blocks/{username}"],checkFollowingForUser:["GET /users/{username}/following/{target_user}"],checkPersonIsFollowedByAuthenticated:["GET /user/following/{username}"],createGpgKeyForAuthenticated:["POST /user/gpg_keys",{},{renamed:["users","createGpgKeyForAuthenticatedUser"]}],createGpgKeyForAuthenticatedUser:["POST /user/gpg_keys"],createPublicSshKeyForAuthenticated:["POST /user/keys",{},{renamed:["users","createPublicSshKeyForAuthenticatedUser"]}],createPublicSshKeyForAuthenticatedUser:["POST /user/keys"],createSshSigningKeyForAuthenticatedUser:["POST /user/ssh_signing_keys"],deleteEmailForAuthenticated:["DELETE /user/emails",{},{renamed:["users","deleteEmailForAuthenticatedUser"]}],deleteEmailForAuthenticatedUser:["DELETE /user/emails"],deleteGpgKeyForAuthenticated:["DELETE /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","deleteGpgKeyForAuthenticatedUser"]}],deleteGpgKeyForAuthenticatedUser:["DELETE /user/gpg_keys/{gpg_key_id}"],deletePublicSshKeyForAuthenticated:["DELETE /user/keys/{key_id}",{},{renamed:["users","deletePublicSshKeyForAuthenticatedUser"]}],deletePublicSshKeyForAuthenticatedUser:["DELETE /user/keys/{key_id}"],deleteSocialAccountForAuthenticatedUser:["DELETE /user/social_accounts"],deleteSshSigningKeyForAuthenticatedUser:["DELETE /user/ssh_signing_keys/{ssh_signing_key_id}"],follow:["PUT /user/following/{username}"],getAuthenticated:["GET /user"],getById:["GET /user/{account_id}"],getByUsername:["GET /users/{username}"],getContextForUser:["GET /users/{username}/hovercard"],getGpgKeyForAuthenticated:["GET /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","getGpgKeyForAuthenticatedUser"]}],getGpgKeyForAuthenticatedUser:["GET /user/gpg_keys/{gpg_key_id}"],getPublicSshKeyForAuthenticated:["GET /user/keys/{key_id}",{},{renamed:["users","getPublicSshKeyForAuthenticatedUser"]}],getPublicSshKeyForAuthenticatedUser:["GET /user/keys/{key_id}"],getSshSigningKeyForAuthenticatedUser:["GET /user/ssh_signing_keys/{ssh_signing_key_id}"],list:["GET /users"],listAttestations:["GET /users/{username}/attestations/{subject_digest}"],listBlockedByAuthenticated:["GET /user/blocks",{},{renamed:["users","listBlockedByAuthenticatedUser"]}],listBlockedByAuthenticatedUser:["GET /user/blocks"],listEmailsForAuthenticated:["GET /user/emails",{},{renamed:["users","listEmailsForAuthenticatedUser"]}],listEmailsForAuthenticatedUser:["GET /user/emails"],listFollowedByAuthenticated:["GET /user/following",{},{renamed:["users","listFollowedByAuthenticatedUser"]}],listFollowedByAuthenticatedUser:["GET /user/following"],listFollowersForAuthenticatedUser:["GET /user/followers"],listFollowersForUser:["GET /users/{username}/followers"],listFollowingForUser:["GET /users/{username}/following"],listGpgKeysForAuthenticated:["GET /user/gpg_keys",{},{renamed:["users","listGpgKeysForAuthenticatedUser"]}],listGpgKeysForAuthenticatedUser:["GET /user/gpg_keys"],listGpgKeysForUser:["GET /users/{username}/gpg_keys"],listPublicEmailsForAuthenticated:["GET /user/public_emails",{},{renamed:["users","listPublicEmailsForAuthenticatedUser"]}],listPublicEmailsForAuthenticatedUser:["GET /user/public_emails"],listPublicKeysForUser:["GET /users/{username}/keys"],listPublicSshKeysForAuthenticated:["GET /user/keys",{},{renamed:["users","listPublicSshKeysForAuthenticatedUser"]}],listPublicSshKeysForAuthenticatedUser:["GET /user/keys"],listSocialAccountsForAuthenticatedUser:["GET /user/social_accounts"],listSocialAccountsForUser:["GET /users/{username}/social_accounts"],listSshSigningKeysForAuthenticatedUser:["GET /user/ssh_signing_keys"],listSshSigningKeysForUser:["GET /users/{username}/ssh_signing_keys"],setPrimaryEmailVisibilityForAuthenticated:["PATCH /user/email/visibility",{},{renamed:["users","setPrimaryEmailVisibilityForAuthenticatedUser"]}],setPrimaryEmailVisibilityForAuthenticatedUser:["PATCH /user/email/visibility"],unblock:["DELETE /user/blocks/{username}"],unfollow:["DELETE /user/following/{username}"],updateAuthenticated:["PATCH /user"]}};var ewe=Q_e;const Zd=new Map;for(const[t,e]of Object.entries(ewe))for(const[n,r]of Object.entries(e)){const[i,s,o]=r,[a,l]=i.split(/ /),c=Object.assign({method:a,url:l},s);Zd.has(t)||Zd.set(t,new Map),Zd.get(t).set(n,{scope:t,methodName:n,endpointDefaults:c,decorations:o})}const twe={has({scope:t},e){return Zd.get(t).has(e)},getOwnPropertyDescriptor(t,e){return{value:this.get(t,e),configurable:!0,writable:!0,enumerable:!0}},defineProperty(t,e,n){return Object.defineProperty(t.cache,e,n),!0},deleteProperty(t,e){return delete t.cache[e],!0},ownKeys({scope:t}){return[...Zd.get(t).keys()]},set(t,e,n){return t.cache[e]=n},get({octokit:t,scope:e,cache:n},r){if(n[r])return n[r];const i=Zd.get(e).get(r);if(!i)return;const{endpointDefaults:s,decorations:o}=i;return o?n[r]=rwe(t,e,r,s,o):n[r]=t.request.defaults(s),n[r]}};function nwe(t){const e={};for(const n of Zd.keys())e[n]=new Proxy({octokit:t,scope:n,cache:{}},twe);return e}function rwe(t,e,n,r,i){const s=t.request.defaults(r);function o(...a){let l=s.endpoint.merge(...a);if(i.mapToData)return l=Object.assign({},l,{data:l[i.mapToData],[i.mapToData]:void 0}),s(l);if(i.renamed){const[c,u]=i.renamed;t.log.warn(`octokit.${e}.${n}() has been renamed to octokit.${c}.${u}()`)}if(i.deprecated&&t.log.warn(i.deprecated),i.renamedParameters){const c=s.endpoint.merge(...a);for(const[u,h]of Object.entries(i.renamedParameters))u in c&&(t.log.warn(`"${u}" parameter is deprecated for "octokit.${e}.${n}()". Use "${h}" instead`),h in c||(c[h]=c[u]),delete c[u]);return s(c)}return s(...a)}return Object.assign(o,s)}function SK(t){const e=nwe(t);return{...e,rest:e}}SK.VERSION=J_e;const iwe="21.1.1",EK=K_e.plugin(vK,SK,wK).defaults({userAgent:`octokit-rest.js/${iwe}`});function kK(t,e){let n=null,r=0,i=null;return function(...o){const a=Date.now();if(n=o,a-r<e){i||(i=setTimeout(()=>{i=null,r=Date.now(),n&&(t.apply(this,n),n=null)},e-(a-r)));return}r=a,t.apply(this,o),n=null}}const{saveAs:swe}=o_e;class CK{#t=new Yxe(Gu);#n=new Wxe(Gu);#e=new Txe(this.#n);#r=new n_e(Gu);#a=new Set;artifacts=Rh({});showWorkbench=qn(!1);currentView=qn("code");unsavedFiles=qn(new Set);actionAlert=qn(void 0);modifiedFiles=new Set;artifactIdList=[];#i=Promise.resolve();constructor(){}addToExecutionQueue(e){this.#i=this.#i.then(()=>e())}get previews(){return this.#t.previews}get files(){return this.#n.files}get currentDocument(){return this.#e.currentDocument}get selectedFile(){return this.#e.selectedFile}get firstArtifact(){return this.#s(this.artifactIdList[0])}get filesCount(){return this.#n.filesCount}get showTerminal(){return this.#r.showTerminal}get boltTerminal(){return this.#r.boltTerminal}get alert(){return this.actionAlert}clearAlert(){this.actionAlert.set(void 0)}toggleTerminal(e){this.#r.toggleTerminal(e)}attachTerminal(e){this.#r.attachTerminal(e)}attachBoltTerminal(e){this.#r.attachBoltTerminal(e)}onTerminalResize(e,n){this.#r.onTerminalResize(e,n)}setDocuments(e){if(this.#e.setDocuments(e),this.#n.filesCount>0&&this.currentDocument.get()===void 0){for(const[n,r]of Object.entries(e))if(r?.type==="file"){this.setSelectedFile(n);break}}}setShowWorkbench(e){this.showWorkbench.set(e)}setCurrentDocumentContent(e){const n=this.currentDocument.get()?.filePath;if(!n)return;const r=this.#n.getFile(n)?.content,i=r!==void 0&&r!==e;this.#e.updateFile(n,e);const s=this.currentDocument.get();if(s){const o=this.unsavedFiles.get();if(i&&o.has(s.filePath))return;const a=new Set(o);i?a.add(s.filePath):a.delete(s.filePath),this.unsavedFiles.set(a)}}setCurrentDocumentScrollPosition(e){const n=this.currentDocument.get();if(!n)return;const{filePath:r}=n;this.#e.updateScrollPosition(r,e)}setSelectedFile(e){this.#e.setSelectedFile(e)}async saveFile(e){const r=this.#e.documents.get()[e];if(r===void 0)return;await this.#n.saveFile(e,r.value);const i=new Set(this.unsavedFiles.get());i.delete(e),this.unsavedFiles.set(i)}async saveCurrentDocument(){const e=this.currentDocument.get();e!==void 0&&await this.saveFile(e.filePath)}resetCurrentDocument(){const e=this.currentDocument.get();if(e===void 0)return;const{filePath:n}=e,r=this.#n.getFile(n);r&&this.setCurrentDocumentContent(r.content)}async saveAllFiles(){for(const e of this.unsavedFiles.get())await this.saveFile(e)}getFileModifcations(){return this.#n.getFileModifications()}getModifiedFiles(){return this.#n.getModifiedFiles()}resetAllFileModifications(){this.#n.resetFileModifications()}abortAllActions(){}setReloadedMessages(e){this.#a=new Set(e)}addArtifact({messageId:e,title:n,id:r,type:i}){this.#s(e)||(this.artifactIdList.includes(e)||this.artifactIdList.push(e),this.artifacts.setKey(e,{id:r,title:n,closed:!1,type:i,runner:new Kve(Gu,()=>this.boltTerminal,o=>{this.#a.has(e)||this.actionAlert.set(o)})}))}updateArtifact({messageId:e},n){const r=this.#s(e);r&&this.artifacts.setKey(e,{...r,...n})}addAction(e){this.addToExecutionQueue(()=>this._addAction(e))}async _addAction(e){const{messageId:n}=e,r=this.#s(n);return r||Fo("Artifact not found"),r.runner.addAction(e)}runAction(e,n=!1){n?this.actionStreamSampler(e,n):this.addToExecutionQueue(()=>this._runAction(e,n))}async _runAction(e,n=!1){const{messageId:r}=e,i=this.#s(r);i||Fo("Artifact not found");const s=i.runner.actions.get()[e.actionId];if(!(!s||s.executed))if(e.action.type==="file"){const o=await Gu,a=Cd.join(o.workdir,e.action.filePath);this.selectedFile.value!==a&&this.setSelectedFile(a),this.currentView.value!=="code"&&this.currentView.set("code"),this.#e.documents.get()[a]||await i.runner.runAction(e,n),this.#e.updateFile(a,e.action.content),n||(await i.runner.runAction(e),this.resetAllFileModifications())}else await i.runner.runAction(e)}actionStreamSampler=kK(async(e,n=!1)=>await this._runAction(e,n),100);#s(e){return this.artifacts.get()[e]}async downloadZip(){const e=new i_e,n=this.files.get(),r=(Nl.value??"project").toLocaleLowerCase().split(" ").join("_"),i=Date.now().toString(36).slice(-6),s=`${r}_${i}`;for(const[a,l]of Object.entries(n))if(l?.type==="file"&&!l.isBinary){const c=n1(a),u=c.split("/");if(u.length>1){let h=e;for(let d=0;d<u.length-1;d++)h=h.folder(u[d]);h.file(u[u.length-1],l.content)}else e.file(c,l.content)}const o=await e.generateAsync({type:"blob"});swe(o,`${s}.zip`)}async syncFiles(e){const n=this.files.get(),r=[];for(const[i,s]of Object.entries(n))if(s?.type==="file"&&!s.isBinary){const o=n1(i),a=o.split("/");let l=e;for(let h=0;h<a.length-1;h++)l=await l.getDirectoryHandle(a[h],{create:!0});const u=await(await l.getFileHandle(a[a.length-1],{create:!0})).createWritable();await u.write(s.content),await u.close(),r.push(o)}return r}async pushToGitHub(e,n,r,i){try{const s=i||Zr.get("githubToken"),o=r||Zr.get("githubUsername");if(!s||!o)throw new Error("GitHub token or username is not set in cookies or provided.");const a=new EK({auth:s});let l;try{l=(await a.repos.get({owner:o,repo:e})).data}catch(b){if(b instanceof Error&&"status"in b&&b.status===404){const{data:y}=await a.repos.createForAuthenticatedUser({name:e,private:!1,auto_init:!0});l=y}else throw console.log("cannot create repo!"),b}const c=this.files.get();if(!c||Object.keys(c).length===0)throw new Error("No files found to push");const h=(await Promise.all(Object.entries(c).map(async([b,y])=>{if(y?.type==="file"&&y.content){const{data:v}=await a.git.createBlob({owner:l.owner.login,repo:l.name,content:xt.from(y.content).toString("base64"),encoding:"base64"});return{path:n1(b),sha:v.sha}}return null}))).filter(Boolean);if(h.length===0)throw new Error("No valid files to push");const{data:d}=await a.git.getRef({owner:l.owner.login,repo:l.name,ref:`heads/${l.default_branch||"main"}`}),f=d.object.sha,{data:m}=await a.git.createTree({owner:l.owner.login,repo:l.name,base_tree:f,tree:h.map(b=>({path:b.path,mode:"100644",type:"blob",sha:b.sha}))}),{data:g}=await a.git.createCommit({owner:l.owner.login,repo:l.name,message:n||"Initial commit from your app",tree:m.sha,parents:[f]});await a.git.updateRef({owner:l.owner.login,repo:l.name,ref:`heads/${l.default_branch||"main"}`,sha:g.sha}),alert(`Repository created and code pushed: ${l.html_url}`)}catch(s){throw console.error("Error pushing to GitHub:",s),s}}}const Nt=new CK,owe=Object.freeze(Object.defineProperty({__proto__:null,WorkbenchStore:CK,workbenchStore:Nt},Symbol.toStringTag,{value:"Module"})),wn=await Uve(),Vo=qn(void 0),Nl=qn(void 0),WC=qn(void 0);function TK(){const t=Cae(),{id:e}=Rae(),[n]=IH(),[r,i]=A.useState([]),[s,o]=A.useState(!1),[a,l]=A.useState();return A.useEffect(()=>{if(!wn){o(!0);{const c=new Error("Chat persistence is unavailable");Ut.logError("Chat persistence initialization failed",c),He.error("Chat persistence is unavailable")}return}e&&tg(wn,e).then(c=>{if(c&&c.messages.length>0){const u=n.get("rewindTo"),h=u?c.messages.slice(0,c.messages.findIndex(d=>d.id===u)+1):c.messages;i(h),l(c.urlId),Nl.set(c.description),Vo.set(c.id),WC.set(c.metadata)}else t("/",{replace:!0});o(!0)}).catch(c=>{Ut.logError("Failed to load chat messages",c),He.error(c.message)})},[]),{ready:!e||s,initialMessages:r,updateChatMestaData:async c=>{const u=Vo.get();if(!(!wn||!u))try{await aS(wn,u,r,a,Nl.get(),void 0,c),WC.set(c)}catch(h){He.error("Failed to update chat metadata"),console.error(h)}},storeMessageHistory:async c=>{if(!wn||c.length===0)return;const{firstArtifact:u}=Nt;if(!a&&u?.id){const h=await Xq(wn,u.id);N8(h),l(h)}if(!Nl.get()&&u?.title&&Nl.set(u?.title),r.length===0&&!Vo.get()){const h=await Yq(wn);Vo.set(h),a||N8(h)}await aS(wn,Vo.get(),c,a,Nl.get(),void 0,WC.get())},duplicateCurrentChat:async c=>{if(!(!wn||!e&&!c))try{const u=await Wve(wn,e||c);t(`/chat/${u}`),He.success("Chat duplicated successfully")}catch(u){He.error("Failed to duplicate chat"),console.log(u)}},importChat:async(c,u,h)=>{if(wn)try{const d=await ER(wn,c,u,h);window.location.href=`/chat/${d}`,He.success("Chat imported successfully")}catch(d){d instanceof Error?He.error("Failed to import chat: "+d.message):He.error("Failed to import chat")}},exportChat:async(c=a)=>{if(!wn||!c)return;const u=await tg(wn,c),h={messages:u.messages,description:u.description,exportDate:new Date().toISOString()},d=new Blob([JSON.stringify(h,null,2)],{type:"application/json"}),f=URL.createObjectURL(d),m=document.createElement("a");m.href=f,m.download=`chat-${new Date().toISOString()}.json`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(f)}}}function N8(t){const e=new URL(window.location.href);e.pathname=`/chat/${t}`,window.history.replaceState({},"",e)}function Dh(){const t=Ot(e1),e=Ot(OM),n=Ot(ZW),r=Ot(JW),i=Ot(KW),s=Ot(YW),[o,a]=A.useState([]),l=Ot(XW),c=Ot(oh),[u,h]=A.useState(()=>{const _=Xd("settings");return{theme:_?.theme||"system",language:_?.language||"en",notifications:_?.notifications??!0,eventLogs:_?.eventLogs??!0,timezone:_?.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone,tabConfiguration:c}});A.useEffect(()=>{const _=Object.entries(t).filter(([L,R])=>R.settings.enabled).map(([L,R])=>R);a(_)},[t]);const d=A.useCallback(_=>{h(L=>{const R={...L,..._};return Fve("settings",R),R})},[]),f=A.useCallback((_,L)=>{Kge(_,L)},[]),m=A.useCallback(_=>{OM.set(_),Ut.logSystem(`Debug mode ${_?"enabled":"disabled"}`),Zr.set("isDebugEnabled",String(_))},[]),g=A.useCallback(_=>{Qge(_),Ut.logSystem(`Event logs ${_?"enabled":"disabled"}`)},[]),b=A.useCallback(_=>{e0e(_),Ut.logSystem(`Prompt template updated to ${_}`)},[]),y=A.useCallback(_=>{Xge(_),Ut.logSystem(`Main branch updates ${_?"enabled":"disabled"}`)},[]),v=A.useCallback(_=>{Zge(_),Ut.logSystem(`Auto select template ${_?"enabled":"disabled"}`)},[]),x=A.useCallback(_=>{Jge(_),Ut.logSystem(`Context optimization ${_?"enabled":"disabled"}`)},[]),w=A.useCallback(_=>{d({theme:_})},[d]),S=A.useCallback(_=>{d({language:_})},[d]),E=A.useCallback(_=>{d({notifications:_})},[d]),k=A.useCallback(_=>{d({timezone:_})},[d]);return A.useEffect(()=>{const _=e1.get(),L={};Object.keys(_).forEach(R=>{L[R]=_[R].settings}),Zr.set("providers",JSON.stringify(L))},[t]),{...u,providers:t,activeProviders:o,updateProviderSettings:f,debug:e,enableDebugMode:m,eventLogs:n,setEventLogs:g,promptId:r,setPromptId:b,isLatestBranch:i,enableLatestBranch:y,autoSelectTemplate:s,setAutoSelectTemplate:v,contextOptimizationEnabled:l,enableContextOptimization:x,setTheme:w,setLanguage:S,setNotifications:E,setTimezone:k,settings:u,tabConfiguration:c,updateTabConfiguration:n0e,resetTabConfiguration:QW}}const AK=-1,uk=0,r1=1,cS=2,IR=3,OR=4,DR=5,MR=6,PK=7,NK=8,L8=typeof self=="object"?self:globalThis,awe=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case uk:case AK:return n(o,i);case r1:{const a=n([],i);for(const l of o)a.push(r(l));return a}case cS:{const a=n({},i);for(const[l,c]of o)a[r(l)]=r(c);return a}case IR:return n(new Date(o),i);case OR:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case DR:{const a=n(new Map,i);for(const[l,c]of o)a.set(r(l),r(c));return a}case MR:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case PK:{const{name:a,message:l}=o;return n(new L8[a](l),i)}case NK:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new L8[s](o),i)};return r},R8=t=>awe(new Map,t)(0),Op="",{toString:lwe}={},{keys:cwe}=Object,K0=t=>{const e=typeof t;if(e!=="object"||!t)return[uk,e];const n=lwe.call(t).slice(8,-1);switch(n){case"Array":return[r1,Op];case"Object":return[cS,Op];case"Date":return[IR,Op];case"RegExp":return[OR,Op];case"Map":return[DR,Op];case"Set":return[MR,Op];case"DataView":return[r1,n]}return n.includes("Array")?[r1,n]:n.includes("Error")?[PK,n]:[cS,n]},E_=([t,e])=>t===uk&&(e==="function"||e==="symbol"),uwe=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=K0(o);switch(a){case uk:{let u=o;switch(l){case"bigint":a=NK,u=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([AK],o)}return i([a,u],o)}case r1:{if(l){let d=o;return l==="DataView"?d=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(d=new Uint8Array(o)),i([l,[...d]],o)}const u=[],h=i([a,u],o);for(const d of o)u.push(s(d));return h}case cS:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const u=[],h=i([a,u],o);for(const d of cwe(o))(t||!E_(K0(o[d])))&&u.push([s(d),s(o[d])]);return h}case IR:return i([a,o.toISOString()],o);case OR:{const{source:u,flags:h}=o;return i([a,{source:u,flags:h}],o)}case DR:{const u=[],h=i([a,u],o);for(const[d,f]of o)(t||!(E_(K0(d))||E_(K0(f))))&&u.push([s(d),s(f)]);return h}case MR:{const u=[],h=i([a,u],o);for(const d of o)(t||!E_(K0(d)))&&u.push(s(d));return h}}const{message:c}=o;return i([a,{name:l,message:c}],o)};return s},I8=(t,{json:e,lossy:n}={})=>{const r=[];return uwe(!(e||n),!!e,new Map,r)(t),r},mf=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?R8(I8(t,e)):structuredClone(t):(t,e)=>R8(I8(t,e));let bv=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};bv.prototype.normal={};bv.prototype.property={};bv.prototype.space=void 0;function LK(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new bv(n,r,e)}function oy(t){return t.toLowerCase()}let Gs=class{constructor(e,n){this.attribute=n,this.property=e}};Gs.prototype.attribute="";Gs.prototype.booleanish=!1;Gs.prototype.boolean=!1;Gs.prototype.commaOrSpaceSeparated=!1;Gs.prototype.commaSeparated=!1;Gs.prototype.defined=!1;Gs.prototype.mustUseProperty=!1;Gs.prototype.number=!1;Gs.prototype.overloadedBoolean=!1;Gs.prototype.property="";Gs.prototype.spaceSeparated=!1;Gs.prototype.space=void 0;let hwe=0;const sn=Mf(),Wr=Mf(),RK=Mf(),pt=Mf(),rr=Mf(),xm=Mf(),io=Mf();function Mf(){return 2**++hwe}const lP=Object.freeze(Object.defineProperty({__proto__:null,boolean:sn,booleanish:Wr,commaOrSpaceSeparated:io,commaSeparated:xm,number:pt,overloadedBoolean:RK,spaceSeparated:rr},Symbol.toStringTag,{value:"Module"})),GC=Object.keys(lP);let jR=class extends Gs{constructor(e,n,r,i){let s=-1;if(super(e,n),O8(this,"space",i),typeof r=="number")for(;++s<GC.length;){const o=GC[s];O8(this,GC[s],(r&lP[o])===lP[o])}}};jR.prototype.defined=!0;function O8(t,e,n){n&&(t[e]=n)}function Bg(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new jR(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[oy(r)]=r,n[oy(s.attribute)]=r}return new bv(e,n,t.space)}const IK=Bg({properties:{ariaActiveDescendant:null,ariaAtomic:Wr,ariaAutoComplete:null,ariaBusy:Wr,ariaChecked:Wr,ariaColCount:pt,ariaColIndex:pt,ariaColSpan:pt,ariaControls:rr,ariaCurrent:null,ariaDescribedBy:rr,ariaDetails:null,ariaDisabled:Wr,ariaDropEffect:rr,ariaErrorMessage:null,ariaExpanded:Wr,ariaFlowTo:rr,ariaGrabbed:Wr,ariaHasPopup:null,ariaHidden:Wr,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:rr,ariaLevel:pt,ariaLive:null,ariaModal:Wr,ariaMultiLine:Wr,ariaMultiSelectable:Wr,ariaOrientation:null,ariaOwns:rr,ariaPlaceholder:null,ariaPosInSet:pt,ariaPressed:Wr,ariaReadOnly:Wr,ariaRelevant:null,ariaRequired:Wr,ariaRoleDescription:rr,ariaRowCount:pt,ariaRowIndex:pt,ariaRowSpan:pt,ariaSelected:Wr,ariaSetSize:pt,ariaSort:null,ariaValueMax:pt,ariaValueMin:pt,ariaValueNow:pt,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function OK(t,e){return e in t?t[e]:e}function DK(t,e){return OK(t,e.toLowerCase())}const dwe=Bg({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:xm,acceptCharset:rr,accessKey:rr,action:null,allow:null,allowFullScreen:sn,allowPaymentRequest:sn,allowUserMedia:sn,alt:null,as:null,async:sn,autoCapitalize:null,autoComplete:rr,autoFocus:sn,autoPlay:sn,blocking:rr,capture:null,charSet:null,checked:sn,cite:null,className:rr,cols:pt,colSpan:null,content:null,contentEditable:Wr,controls:sn,controlsList:rr,coords:pt|xm,crossOrigin:null,data:null,dateTime:null,decoding:null,default:sn,defer:sn,dir:null,dirName:null,disabled:sn,download:RK,draggable:Wr,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:sn,formTarget:null,headers:rr,height:pt,hidden:sn,high:pt,href:null,hrefLang:null,htmlFor:rr,httpEquiv:rr,id:null,imageSizes:null,imageSrcSet:null,inert:sn,inputMode:null,integrity:null,is:null,isMap:sn,itemId:null,itemProp:rr,itemRef:rr,itemScope:sn,itemType:rr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:sn,low:pt,manifest:null,max:null,maxLength:pt,media:null,method:null,min:null,minLength:pt,multiple:sn,muted:sn,name:null,nonce:null,noModule:sn,noValidate:sn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:sn,optimum:pt,pattern:null,ping:rr,placeholder:null,playsInline:sn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:sn,referrerPolicy:null,rel:rr,required:sn,reversed:sn,rows:pt,rowSpan:pt,sandbox:rr,scope:null,scoped:sn,seamless:sn,selected:sn,shadowRootClonable:sn,shadowRootDelegatesFocus:sn,shadowRootMode:null,shape:null,size:pt,sizes:null,slot:null,span:pt,spellCheck:Wr,src:null,srcDoc:null,srcLang:null,srcSet:null,start:pt,step:null,style:null,tabIndex:pt,target:null,title:null,translate:null,type:null,typeMustMatch:sn,useMap:null,value:Wr,width:pt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:rr,axis:null,background:null,bgColor:null,border:pt,borderColor:null,bottomMargin:pt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:sn,declare:sn,event:null,face:null,frame:null,frameBorder:null,hSpace:pt,leftMargin:pt,link:null,longDesc:null,lowSrc:null,marginHeight:pt,marginWidth:pt,noResize:sn,noHref:sn,noShade:sn,noWrap:sn,object:null,profile:null,prompt:null,rev:null,rightMargin:pt,rules:null,scheme:null,scrolling:Wr,standby:null,summary:null,text:null,topMargin:pt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:pt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:sn,disableRemotePlayback:sn,prefix:null,property:null,results:pt,security:null,unselectable:null},space:"html",transform:DK}),fwe=Bg({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:io,accentHeight:pt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:pt,amplitude:pt,arabicForm:null,ascent:pt,attributeName:null,attributeType:null,azimuth:pt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:pt,by:null,calcMode:null,capHeight:pt,className:rr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:pt,diffuseConstant:pt,direction:null,display:null,dur:null,divisor:pt,dominantBaseline:null,download:sn,dx:null,dy:null,edgeMode:null,editable:null,elevation:pt,enableBackground:null,end:null,event:null,exponent:pt,externalResourcesRequired:null,fill:null,fillOpacity:pt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:xm,g2:xm,glyphName:xm,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:pt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:pt,horizOriginX:pt,horizOriginY:pt,id:null,ideographic:pt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:pt,k:pt,k1:pt,k2:pt,k3:pt,k4:pt,kernelMatrix:io,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:pt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:pt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:pt,overlineThickness:pt,paintOrder:null,panose1:null,path:null,pathLength:pt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:rr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:pt,pointsAtY:pt,pointsAtZ:pt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:io,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:io,rev:io,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:io,requiredFeatures:io,requiredFonts:io,requiredFormats:io,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:pt,specularExponent:pt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:pt,strikethroughThickness:pt,string:null,stroke:null,strokeDashArray:io,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:pt,strokeOpacity:pt,strokeWidth:null,style:null,surfaceScale:pt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:io,tabIndex:pt,tableValues:null,target:null,targetX:pt,targetY:pt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:io,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:pt,underlineThickness:pt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:pt,values:null,vAlphabetic:pt,vMathematical:pt,vectorEffect:null,vHanging:pt,vIdeographic:pt,version:null,vertAdvY:pt,vertOriginX:pt,vertOriginY:pt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:pt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:OK}),MK=Bg({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),jK=Bg({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:DK}),FK=Bg({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),pwe=/[A-Z]/g,D8=/-[a-z]/g,mwe=/^data[-\w.:]+$/i;function gwe(t,e){const n=oy(e);let r=e,i=Gs;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&mwe.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(D8,ywe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!D8.test(s)){let o=s.replace(pwe,bwe);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=jR}return new i(r,e)}function bwe(t){return"-"+t.toLowerCase()}function ywe(t){return t.charAt(1).toUpperCase()}const vwe=LK([IK,dwe,MK,jK,FK],"html"),xwe=LK([IK,fwe,MK,jK,FK],"svg");function M8(t){const e=[],n=String(t||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&e.push(o),i=r+1,r=n.indexOf(",",i)}return e}function FR(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const j8=/[#.]/g;function _we(t,e){const n=t||"",r={};let i=0,s,o;for(;i<n.length;){j8.lastIndex=i;const a=j8.exec(n),l=n.slice(i,a?a.index:n.length);l&&(s?s==="#"?r.id=l:Array.isArray(r.className)?r.className.push(l):r.className=[l]:o=l,i+=l.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||e||"div",properties:r,children:[]}}function F8(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function BR(t){return t.join(" ").trim()}function BK(t,e,n){const r=n?kwe(n):void 0;function i(s,o,...a){let l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else{l=_we(s,e);const c=l.tagName.toLowerCase(),u=r?r.get(c):void 0;if(l.tagName=u||c,wwe(o))a.unshift(o);else for(const[h,d]of Object.entries(o))Swe(t,l.properties,h,d)}for(const c of a)cP(l.children,c);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function wwe(t){if(t===null||typeof t!="object"||Array.isArray(t))return!0;if(typeof t.type!="string")return!1;const e=t,n=Object.keys(t);for(const r of n){const i=e[r];if(i&&typeof i=="object"){if(!Array.isArray(i))return!0;const s=i;for(const o of s)if(typeof o!="number"&&typeof o!="string")return!0}}return!!("children"in t&&Array.isArray(t.children))}function Swe(t,e,n,r){const i=gwe(t,n);let s;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;s=r}else typeof r=="boolean"?s=r:typeof r=="string"?i.spaceSeparated?s=F8(r):i.commaSeparated?s=M8(r):i.commaOrSpaceSeparated?s=F8(M8(r).join(" ")):s=B8(i,i.property,r):Array.isArray(r)?s=[...r]:s=i.property==="style"?Ewe(r):String(r);if(Array.isArray(s)){const o=[];for(const a of s)o.push(B8(i,i.property,a));s=o}i.property==="className"&&Array.isArray(e.className)&&(s=e.className.concat(s)),e[i.property]=s}}function cP(t,e){if(e!=null)if(typeof e=="number"||typeof e=="string")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(const n of e)cP(t,n);else if(typeof e=="object"&&"type"in e)e.type==="root"?cP(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function B8(t,e,n){if(typeof n=="string"){if(t.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((t.boolean||t.overloadedBoolean)&&(n===""||oy(n)===oy(e)))return!0}return n}function Ewe(t){const e=[];for(const[n,r]of Object.entries(t))e.push([n,r].join(": "));return e.join("; ")}function kwe(t){const e=new Map;for(const n of t)e.set(n.toLowerCase(),n);return e}const Cwe=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Twe=BK(vwe,"div"),Awe=BK(xwe,"g",Cwe);let yv=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};yv.prototype.normal={};yv.prototype.property={};yv.prototype.space=void 0;function UK(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new yv(n,r,e)}function uP(t){return t.toLowerCase()}let qs=class{constructor(e,n){this.attribute=n,this.property=e}};qs.prototype.attribute="";qs.prototype.booleanish=!1;qs.prototype.boolean=!1;qs.prototype.commaOrSpaceSeparated=!1;qs.prototype.commaSeparated=!1;qs.prototype.defined=!1;qs.prototype.mustUseProperty=!1;qs.prototype.number=!1;qs.prototype.overloadedBoolean=!1;qs.prototype.property="";qs.prototype.spaceSeparated=!1;qs.prototype.space=void 0;let Pwe=0;const on=jf(),Gr=jf(),$K=jf(),mt=jf(),ir=jf(),_m=jf(),so=jf();function jf(){return 2**++Pwe}const hP=Object.freeze(Object.defineProperty({__proto__:null,boolean:on,booleanish:Gr,commaOrSpaceSeparated:so,commaSeparated:_m,number:mt,overloadedBoolean:$K,spaceSeparated:ir},Symbol.toStringTag,{value:"Module"})),qC=Object.keys(hP);let UR=class extends qs{constructor(e,n,r,i){let s=-1;if(super(e,n),U8(this,"space",i),typeof r=="number")for(;++s<qC.length;){const o=qC[s];U8(this,qC[s],(r&hP[o])===hP[o])}}};UR.prototype.defined=!0;function U8(t,e,n){n&&(t[e]=n)}function Ug(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new UR(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[uP(r)]=r,n[uP(s.attribute)]=r}return new yv(e,n,t.space)}const HK=Ug({properties:{ariaActiveDescendant:null,ariaAtomic:Gr,ariaAutoComplete:null,ariaBusy:Gr,ariaChecked:Gr,ariaColCount:mt,ariaColIndex:mt,ariaColSpan:mt,ariaControls:ir,ariaCurrent:null,ariaDescribedBy:ir,ariaDetails:null,ariaDisabled:Gr,ariaDropEffect:ir,ariaErrorMessage:null,ariaExpanded:Gr,ariaFlowTo:ir,ariaGrabbed:Gr,ariaHasPopup:null,ariaHidden:Gr,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ir,ariaLevel:mt,ariaLive:null,ariaModal:Gr,ariaMultiLine:Gr,ariaMultiSelectable:Gr,ariaOrientation:null,ariaOwns:ir,ariaPlaceholder:null,ariaPosInSet:mt,ariaPressed:Gr,ariaReadOnly:Gr,ariaRelevant:null,ariaRequired:Gr,ariaRoleDescription:ir,ariaRowCount:mt,ariaRowIndex:mt,ariaRowSpan:mt,ariaSelected:Gr,ariaSetSize:mt,ariaSort:null,ariaValueMax:mt,ariaValueMin:mt,ariaValueNow:mt,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function zK(t,e){return e in t?t[e]:e}function VK(t,e){return zK(t,e.toLowerCase())}const Nwe=Ug({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:_m,acceptCharset:ir,accessKey:ir,action:null,allow:null,allowFullScreen:on,allowPaymentRequest:on,allowUserMedia:on,alt:null,as:null,async:on,autoCapitalize:null,autoComplete:ir,autoFocus:on,autoPlay:on,blocking:ir,capture:null,charSet:null,checked:on,cite:null,className:ir,cols:mt,colSpan:null,content:null,contentEditable:Gr,controls:on,controlsList:ir,coords:mt|_m,crossOrigin:null,data:null,dateTime:null,decoding:null,default:on,defer:on,dir:null,dirName:null,disabled:on,download:$K,draggable:Gr,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:on,formTarget:null,headers:ir,height:mt,hidden:on,high:mt,href:null,hrefLang:null,htmlFor:ir,httpEquiv:ir,id:null,imageSizes:null,imageSrcSet:null,inert:on,inputMode:null,integrity:null,is:null,isMap:on,itemId:null,itemProp:ir,itemRef:ir,itemScope:on,itemType:ir,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:on,low:mt,manifest:null,max:null,maxLength:mt,media:null,method:null,min:null,minLength:mt,multiple:on,muted:on,name:null,nonce:null,noModule:on,noValidate:on,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:on,optimum:mt,pattern:null,ping:ir,placeholder:null,playsInline:on,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:on,referrerPolicy:null,rel:ir,required:on,reversed:on,rows:mt,rowSpan:mt,sandbox:ir,scope:null,scoped:on,seamless:on,selected:on,shadowRootClonable:on,shadowRootDelegatesFocus:on,shadowRootMode:null,shape:null,size:mt,sizes:null,slot:null,span:mt,spellCheck:Gr,src:null,srcDoc:null,srcLang:null,srcSet:null,start:mt,step:null,style:null,tabIndex:mt,target:null,title:null,translate:null,type:null,typeMustMatch:on,useMap:null,value:Gr,width:mt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ir,axis:null,background:null,bgColor:null,border:mt,borderColor:null,bottomMargin:mt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:on,declare:on,event:null,face:null,frame:null,frameBorder:null,hSpace:mt,leftMargin:mt,link:null,longDesc:null,lowSrc:null,marginHeight:mt,marginWidth:mt,noResize:on,noHref:on,noShade:on,noWrap:on,object:null,profile:null,prompt:null,rev:null,rightMargin:mt,rules:null,scheme:null,scrolling:Gr,standby:null,summary:null,text:null,topMargin:mt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:mt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:on,disableRemotePlayback:on,prefix:null,property:null,results:mt,security:null,unselectable:null},space:"html",transform:VK}),Lwe=Ug({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:so,accentHeight:mt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:mt,amplitude:mt,arabicForm:null,ascent:mt,attributeName:null,attributeType:null,azimuth:mt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:mt,by:null,calcMode:null,capHeight:mt,className:ir,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:mt,diffuseConstant:mt,direction:null,display:null,dur:null,divisor:mt,dominantBaseline:null,download:on,dx:null,dy:null,edgeMode:null,editable:null,elevation:mt,enableBackground:null,end:null,event:null,exponent:mt,externalResourcesRequired:null,fill:null,fillOpacity:mt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:_m,g2:_m,glyphName:_m,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:mt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:mt,horizOriginX:mt,horizOriginY:mt,id:null,ideographic:mt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:mt,k:mt,k1:mt,k2:mt,k3:mt,k4:mt,kernelMatrix:so,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:mt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:mt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:mt,overlineThickness:mt,paintOrder:null,panose1:null,path:null,pathLength:mt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ir,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:mt,pointsAtY:mt,pointsAtZ:mt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:so,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:so,rev:so,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:so,requiredFeatures:so,requiredFonts:so,requiredFormats:so,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:mt,specularExponent:mt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:mt,strikethroughThickness:mt,string:null,stroke:null,strokeDashArray:so,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:mt,strokeOpacity:mt,strokeWidth:null,style:null,surfaceScale:mt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:so,tabIndex:mt,tableValues:null,target:null,targetX:mt,targetY:mt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:so,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:mt,underlineThickness:mt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:mt,values:null,vAlphabetic:mt,vMathematical:mt,vectorEffect:null,vHanging:mt,vIdeographic:mt,version:null,vertAdvY:mt,vertOriginX:mt,vertOriginY:mt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:mt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:zK}),WK=Ug({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),GK=Ug({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:VK}),qK=Ug({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),Rwe=/[A-Z]/g,$8=/-[a-z]/g,Iwe=/^data[-\w.:]+$/i;function Owe(t,e){const n=uP(e);let r=e,i=qs;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Iwe.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace($8,Mwe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!$8.test(s)){let o=s.replace(Rwe,Dwe);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=UR}return new i(r,e)}function Dwe(t){return"-"+t.toLowerCase()}function Mwe(t){return t.charAt(1).toUpperCase()}const KK=UK([HK,Nwe,WK,GK,qK],"html"),YK=UK([HK,Lwe,WK,GK,qK],"svg");function jwe(t){const e=String(t),n=[];return{toOffset:i,toPoint:r};function r(s){if(typeof s=="number"&&s>-1&&s<=e.length){let o=0;for(;;){let a=n[o];if(a===void 0){const l=H8(e,n[o-1]);a=l===-1?e.length+1:l+1,n[o]=a}if(a>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s};o++}}}function i(s){if(s&&typeof s.line=="number"&&typeof s.column=="number"&&!Number.isNaN(s.line)&&!Number.isNaN(s.column)){for(;n.length<s.line;){const a=n[n.length-1],l=H8(e,a),c=l===-1?e.length+1:l+1;if(a===c)break;n.push(c)}const o=(s.line>1?n[s.line-2]:0)+s.column-1;if(o<n[s.line-1])return o}}}function H8(t,e){const n=t.indexOf("\r",e),r=t.indexOf(`
`,e);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const Ad={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},XK={}.hasOwnProperty,Fwe=Object.prototype;function Bwe(t,e){const n=e||{};return $R({file:n.file||void 0,location:!1,schema:n.space==="svg"?YK:KK,verbose:n.verbose||!1},t)}function $R(t,e){let n;switch(e.nodeName){case"#comment":{const r=e;return n={type:"comment",value:r.data},Jw(t,r,n),n}case"#document":case"#document-fragment":{const r=e,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:ZK(t,e.childNodes),data:{quirksMode:i}},t.file&&t.location){const s=String(t.file),o=jwe(s),a=o.toPoint(0),l=o.toPoint(s.length);n.position={start:a,end:l}}return n}case"#documentType":{const r=e;return n={type:"doctype"},Jw(t,r,n),n}case"#text":{const r=e;return n={type:"text",value:r.value},Jw(t,r,n),n}default:return n=Uwe(t,e),n}}function ZK(t,e){let n=-1;const r=[];for(;++n<e.length;){const i=$R(t,e[n]);r.push(i)}return r}function Uwe(t,e){const n=t.schema;t.schema=e.namespaceURI===Ad.svg?YK:KK;let r=-1;const i={};for(;++r<e.attrs.length;){const a=e.attrs[r],l=(a.prefix?a.prefix+":":"")+a.name;XK.call(Fwe,l)||(i[l]=a.value)}const o=(t.schema.space==="svg"?Awe:Twe)(e.tagName,i,ZK(t,e.childNodes));if(Jw(t,e,o),o.tagName==="template"){const a=e,l=a.sourceCodeLocation,c=l&&l.startTag&&am(l.startTag),u=l&&l.endTag&&am(l.endTag),h=$R(t,a.content);c&&u&&t.file&&(h.position={start:c.end,end:u.start}),o.content=h}return t.schema=n,o}function Jw(t,e,n){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&t.file){const r=$we(t,n,e.sourceCodeLocation);r&&(t.location=!0,n.position=r)}}function $we(t,e,n){const r=am(n);if(e.type==="element"){const i=e.children[e.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),t.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)XK.call(n.attrs,o)&&(s[Owe(t.schema,o).property]=am(n.attrs[o]));n.startTag;const a=am(n.startTag),l=n.endTag?am(n.endTag):void 0,c={opening:a};l&&(c.closing=l),c.properties=s,e.data={position:c}}}return r}function am(t){const e=z8({line:t.startLine,column:t.startCol,offset:t.startOffset}),n=z8({line:t.endLine,column:t.endCol,offset:t.endOffset});return e||n?{start:e,end:n}:void 0}function z8(t){return t.line&&t.column?t:void 0}let vv=class{constructor(e,n,r){this.property=e,this.normal=n,r&&(this.space=r)}};vv.prototype.property={};vv.prototype.normal={};vv.prototype.space=null;function JK(t,e){const n={},r={};let i=-1;for(;++i<t.length;)Object.assign(n,t[i].property),Object.assign(r,t[i].normal);return new vv(n,r,e)}function dP(t){return t.toLowerCase()}let ua=class{constructor(e,n){this.property=e,this.attribute=n}};ua.prototype.space=null;ua.prototype.boolean=!1;ua.prototype.booleanish=!1;ua.prototype.overloadedBoolean=!1;ua.prototype.number=!1;ua.prototype.commaSeparated=!1;ua.prototype.spaceSeparated=!1;ua.prototype.commaOrSpaceSeparated=!1;ua.prototype.mustUseProperty=!1;ua.prototype.defined=!1;let Hwe=0;const an=Ff(),qr=Ff(),QK=Ff(),gt=Ff(),sr=Ff(),wm=Ff(),oo=Ff();function Ff(){return 2**++Hwe}const fP=Object.freeze(Object.defineProperty({__proto__:null,boolean:an,booleanish:qr,commaOrSpaceSeparated:oo,commaSeparated:wm,number:gt,overloadedBoolean:QK,spaceSeparated:sr},Symbol.toStringTag,{value:"Module"})),KC=Object.keys(fP);let HR=class extends ua{constructor(e,n,r,i){let s=-1;if(super(e,n),V8(this,"space",i),typeof r=="number")for(;++s<KC.length;){const o=KC[s];V8(this,KC[s],(r&fP[o])===fP[o])}}};HR.prototype.defined=!0;function V8(t,e,n){n&&(t[e]=n)}const zwe={}.hasOwnProperty;function $g(t){const e={},n={};let r;for(r in t.properties)if(zwe.call(t.properties,r)){const i=t.properties[r],s=new HR(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[dP(r)]=r,n[dP(s.attribute)]=r}return new vv(e,n,t.space)}const eY=$g({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),tY=$g({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function nY(t,e){return e in t?t[e]:e}function rY(t,e){return nY(t,e.toLowerCase())}const iY=$g({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:rY,properties:{xmlns:null,xmlnsXLink:null}}),sY=$g({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:qr,ariaAutoComplete:null,ariaBusy:qr,ariaChecked:qr,ariaColCount:gt,ariaColIndex:gt,ariaColSpan:gt,ariaControls:sr,ariaCurrent:null,ariaDescribedBy:sr,ariaDetails:null,ariaDisabled:qr,ariaDropEffect:sr,ariaErrorMessage:null,ariaExpanded:qr,ariaFlowTo:sr,ariaGrabbed:qr,ariaHasPopup:null,ariaHidden:qr,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:sr,ariaLevel:gt,ariaLive:null,ariaModal:qr,ariaMultiLine:qr,ariaMultiSelectable:qr,ariaOrientation:null,ariaOwns:sr,ariaPlaceholder:null,ariaPosInSet:gt,ariaPressed:qr,ariaReadOnly:qr,ariaRelevant:null,ariaRequired:qr,ariaRoleDescription:sr,ariaRowCount:gt,ariaRowIndex:gt,ariaRowSpan:gt,ariaSelected:qr,ariaSetSize:gt,ariaSort:null,ariaValueMax:gt,ariaValueMin:gt,ariaValueNow:gt,ariaValueText:null,role:null}}),Vwe=$g({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:rY,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:wm,acceptCharset:sr,accessKey:sr,action:null,allow:null,allowFullScreen:an,allowPaymentRequest:an,allowUserMedia:an,alt:null,as:null,async:an,autoCapitalize:null,autoComplete:sr,autoFocus:an,autoPlay:an,blocking:sr,capture:null,charSet:null,checked:an,cite:null,className:sr,cols:gt,colSpan:null,content:null,contentEditable:qr,controls:an,controlsList:sr,coords:gt|wm,crossOrigin:null,data:null,dateTime:null,decoding:null,default:an,defer:an,dir:null,dirName:null,disabled:an,download:QK,draggable:qr,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:an,formTarget:null,headers:sr,height:gt,hidden:an,high:gt,href:null,hrefLang:null,htmlFor:sr,httpEquiv:sr,id:null,imageSizes:null,imageSrcSet:null,inert:an,inputMode:null,integrity:null,is:null,isMap:an,itemId:null,itemProp:sr,itemRef:sr,itemScope:an,itemType:sr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:an,low:gt,manifest:null,max:null,maxLength:gt,media:null,method:null,min:null,minLength:gt,multiple:an,muted:an,name:null,nonce:null,noModule:an,noValidate:an,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:an,optimum:gt,pattern:null,ping:sr,placeholder:null,playsInline:an,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:an,referrerPolicy:null,rel:sr,required:an,reversed:an,rows:gt,rowSpan:gt,sandbox:sr,scope:null,scoped:an,seamless:an,selected:an,shadowRootClonable:an,shadowRootDelegatesFocus:an,shadowRootMode:null,shape:null,size:gt,sizes:null,slot:null,span:gt,spellCheck:qr,src:null,srcDoc:null,srcLang:null,srcSet:null,start:gt,step:null,style:null,tabIndex:gt,target:null,title:null,translate:null,type:null,typeMustMatch:an,useMap:null,value:qr,width:gt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:sr,axis:null,background:null,bgColor:null,border:gt,borderColor:null,bottomMargin:gt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:an,declare:an,event:null,face:null,frame:null,frameBorder:null,hSpace:gt,leftMargin:gt,link:null,longDesc:null,lowSrc:null,marginHeight:gt,marginWidth:gt,noResize:an,noHref:an,noShade:an,noWrap:an,object:null,profile:null,prompt:null,rev:null,rightMargin:gt,rules:null,scheme:null,scrolling:qr,standby:null,summary:null,text:null,topMargin:gt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:gt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:an,disableRemotePlayback:an,prefix:null,property:null,results:gt,security:null,unselectable:null}}),Wwe=$g({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:nY,properties:{about:oo,accentHeight:gt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:gt,amplitude:gt,arabicForm:null,ascent:gt,attributeName:null,attributeType:null,azimuth:gt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:gt,by:null,calcMode:null,capHeight:gt,className:sr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:gt,diffuseConstant:gt,direction:null,display:null,dur:null,divisor:gt,dominantBaseline:null,download:an,dx:null,dy:null,edgeMode:null,editable:null,elevation:gt,enableBackground:null,end:null,event:null,exponent:gt,externalResourcesRequired:null,fill:null,fillOpacity:gt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:wm,g2:wm,glyphName:wm,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:gt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:gt,horizOriginX:gt,horizOriginY:gt,id:null,ideographic:gt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:gt,k:gt,k1:gt,k2:gt,k3:gt,k4:gt,kernelMatrix:oo,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:gt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:gt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:gt,overlineThickness:gt,paintOrder:null,panose1:null,path:null,pathLength:gt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:sr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:gt,pointsAtY:gt,pointsAtZ:gt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:oo,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:oo,rev:oo,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:oo,requiredFeatures:oo,requiredFonts:oo,requiredFormats:oo,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:gt,specularExponent:gt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:gt,strikethroughThickness:gt,string:null,stroke:null,strokeDashArray:oo,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:gt,strokeOpacity:gt,strokeWidth:null,style:null,surfaceScale:gt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:oo,tabIndex:gt,tableValues:null,target:null,targetX:gt,targetY:gt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:oo,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:gt,underlineThickness:gt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:gt,values:null,vAlphabetic:gt,vMathematical:gt,vectorEffect:null,vHanging:gt,vIdeographic:gt,version:null,vertAdvY:gt,vertOriginX:gt,vertOriginY:gt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:gt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Gwe=/^data[-\w.:]+$/i,W8=/-[a-z]/g,qwe=/[A-Z]/g;function Kwe(t,e){const n=dP(e);let r=e,i=ua;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Gwe.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(W8,Xwe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!W8.test(s)){let o=s.replace(qwe,Ywe);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=HR}return new i(r,e)}function Ywe(t){return"-"+t.toLowerCase()}function Xwe(t){return t.charAt(1).toUpperCase()}const Zwe=JK([tY,eY,iY,sY,Vwe],"html"),oY=JK([tY,eY,iY,sY,Wwe],"svg"),G8={}.hasOwnProperty;function zR(t,e){const n=e||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&G8.call(i,t)){const l=String(i[t]);o=G8.call(a,l)?a[l]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Jwe={},Qwe={}.hasOwnProperty,aY=zR("type",{handlers:{root:t2e,element:o2e,text:i2e,comment:s2e,doctype:r2e}});function e2e(t,e){const r=(e||Jwe).space;return aY(t,r==="svg"?oY:Zwe)}function t2e(t,e){const n={nodeName:"#document",mode:(t.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=VR(t.children,n,e),Hg(t,n),n}function n2e(t,e){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=VR(t.children,n,e),Hg(t,n),n}function r2e(t){const e={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Hg(t,e),e}function i2e(t){const e={nodeName:"#text",value:t.value,parentNode:null};return Hg(t,e),e}function s2e(t){const e={nodeName:"#comment",data:t.value,parentNode:null};return Hg(t,e),e}function o2e(t,e){const n=e;let r=n;t.type==="element"&&t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=oY);const i=[];let s;if(t.properties){for(s in t.properties)if(s!=="children"&&Qwe.call(t.properties,s)){const l=a2e(r,s,t.properties[s]);l&&i.push(l)}}const o=r.space,a={nodeName:t.tagName,tagName:t.tagName,attrs:i,namespaceURI:Ad[o],childNodes:[],parentNode:null};return a.childNodes=VR(t.children,a,r),Hg(t,a),t.tagName==="template"&&t.content&&(a.content=n2e(t.content,r)),a}function a2e(t,e,n){const r=Kwe(t,e);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?FR(n):BR(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=Ad[r.space]}return i}function VR(t,e,n){let r=-1;const i=[];if(t)for(;++r<t.length;){const s=aY(t[r],n);s.parentNode=e,i.push(s)}return i}function Hg(t,e){const n=t.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,e.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const lY=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],l2e=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),mr="";var ge;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(ge||(ge={}));const Ls={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function cY(t){return t>=55296&&t<=57343}function c2e(t){return t>=56320&&t<=57343}function u2e(t,e){return(t-55296)*1024+9216+e}function uY(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function hY(t){return t>=64976&&t<=65007||l2e.has(t)}var Je;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Je||(Je={}));const h2e=65536;class d2e{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=h2e,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,n){const{line:r,col:i,offset:s}=this,o=i+n,a=s+n;return{code:e,startLine:r,endLine:r,startCol:o,endCol:o,startOffset:a,endOffset:a}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(c2e(n))return this.pos++,this._addGap(),u2e(e,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,ge.EOF;return this._err(Je.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,n){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,n){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(e,this.pos);for(let r=0;r<e.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==e.charCodeAt(r))return!1;return!0}peek(e){const n=this.pos+e;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ge.EOF;const r=this.html.charCodeAt(n);return r===ge.CARRIAGE_RETURN?ge.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ge.EOF;let e=this.html.charCodeAt(this.pos);return e===ge.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,ge.LINE_FEED):e===ge.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,cY(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===ge.LINE_FEED||e===ge.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){uY(e)?this._err(Je.controlCharacterInInputStream):hY(e)&&this._err(Je.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var pn;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(pn||(pn={}));function dY(t,e){for(let n=t.attrs.length-1;n>=0;n--)if(t.attrs[n].name===e)return t.attrs[n].value;return null}const fY=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),f2e=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(t=>t.charCodeAt(0)));var YC;const p2e=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),m2e=(YC=String.fromCodePoint)!==null&&YC!==void 0?YC:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function g2e(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=p2e.get(t))!==null&&e!==void 0?e:t}var bi;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(bi||(bi={}));const b2e=32;var Xu;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Xu||(Xu={}));function pP(t){return t>=bi.ZERO&&t<=bi.NINE}function y2e(t){return t>=bi.UPPER_A&&t<=bi.UPPER_F||t>=bi.LOWER_A&&t<=bi.LOWER_F}function v2e(t){return t>=bi.UPPER_A&&t<=bi.UPPER_Z||t>=bi.LOWER_A&&t<=bi.LOWER_Z||pP(t)}function x2e(t){return t===bi.EQUALS||v2e(t)}var fi;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(fi||(fi={}));var Rc;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Rc||(Rc={}));class pY{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=fi.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Rc.Strict}startEntity(e){this.decodeMode=e,this.state=fi.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case fi.EntityStart:return e.charCodeAt(n)===bi.NUM?(this.state=fi.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=fi.NamedEntity,this.stateNamedEntity(e,n));case fi.NumericStart:return this.stateNumericStart(e,n);case fi.NumericDecimal:return this.stateNumericDecimal(e,n);case fi.NumericHex:return this.stateNumericHex(e,n);case fi.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|b2e)===bi.LOWER_X?(this.state=fi.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=fi.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(e.substr(n,s),i),this.consumed+=s}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(pP(i)||y2e(i))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(pP(i))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===bi.SEMI)this.consumed+=1;else if(this.decodeMode===Rc.Strict)return 0;return this.emitCodePoint(g2e(this.result),this.consumed),this.errors&&(e!==bi.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Xu.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const o=e.charCodeAt(n);if(this.treeIndex=_2e(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Rc.Attribute&&(s===0||x2e(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Xu.VALUE_LENGTH)>>14,s!==0){if(o===bi.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Rc.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,i=(r[n]&Xu.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[e]&~Xu.VALUE_LENGTH:i[e+1],r),n===3&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case fi.NamedEntity:return this.result!==0&&(this.decodeMode!==Rc.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case fi.NumericDecimal:return this.emitNumericEntity(0,2);case fi.NumericHex:return this.emitNumericEntity(0,3);case fi.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case fi.EntityStart:return 0}}}function mY(t){let e="";const n=new pY(t,r=>e+=m2e(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){e+=i.slice(o,a),n.startEntity(s);const c=n.write(i,a+1);if(c<0){o=a+n.end();break}o=a+c,a=c===0?o+1:o}const l=e+i.slice(o);return e="",l}}function _2e(t,e,n,r){const i=(e&Xu.BRANCH_LENGTH)>>7,s=e&Xu.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const l=r-s;return l<0||l>=i?-1:t[n+l]-1}let o=n,a=o+i-1;for(;o<=a;){const l=o+a>>>1,c=t[l];if(c<r)o=l+1;else if(c>r)a=l-1;else return t[l+i]}return-1}mY(fY);mY(f2e);var lt;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(lt||(lt={}));var Jd;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(Jd||(Jd={}));var Uo;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(Uo||(Uo={}));var We;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(We||(We={}));var U;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})(U||(U={}));const w2e=new Map([[We.A,U.A],[We.ADDRESS,U.ADDRESS],[We.ANNOTATION_XML,U.ANNOTATION_XML],[We.APPLET,U.APPLET],[We.AREA,U.AREA],[We.ARTICLE,U.ARTICLE],[We.ASIDE,U.ASIDE],[We.B,U.B],[We.BASE,U.BASE],[We.BASEFONT,U.BASEFONT],[We.BGSOUND,U.BGSOUND],[We.BIG,U.BIG],[We.BLOCKQUOTE,U.BLOCKQUOTE],[We.BODY,U.BODY],[We.BR,U.BR],[We.BUTTON,U.BUTTON],[We.CAPTION,U.CAPTION],[We.CENTER,U.CENTER],[We.CODE,U.CODE],[We.COL,U.COL],[We.COLGROUP,U.COLGROUP],[We.DD,U.DD],[We.DESC,U.DESC],[We.DETAILS,U.DETAILS],[We.DIALOG,U.DIALOG],[We.DIR,U.DIR],[We.DIV,U.DIV],[We.DL,U.DL],[We.DT,U.DT],[We.EM,U.EM],[We.EMBED,U.EMBED],[We.FIELDSET,U.FIELDSET],[We.FIGCAPTION,U.FIGCAPTION],[We.FIGURE,U.FIGURE],[We.FONT,U.FONT],[We.FOOTER,U.FOOTER],[We.FOREIGN_OBJECT,U.FOREIGN_OBJECT],[We.FORM,U.FORM],[We.FRAME,U.FRAME],[We.FRAMESET,U.FRAMESET],[We.H1,U.H1],[We.H2,U.H2],[We.H3,U.H3],[We.H4,U.H4],[We.H5,U.H5],[We.H6,U.H6],[We.HEAD,U.HEAD],[We.HEADER,U.HEADER],[We.HGROUP,U.HGROUP],[We.HR,U.HR],[We.HTML,U.HTML],[We.I,U.I],[We.IMG,U.IMG],[We.IMAGE,U.IMAGE],[We.INPUT,U.INPUT],[We.IFRAME,U.IFRAME],[We.KEYGEN,U.KEYGEN],[We.LABEL,U.LABEL],[We.LI,U.LI],[We.LINK,U.LINK],[We.LISTING,U.LISTING],[We.MAIN,U.MAIN],[We.MALIGNMARK,U.MALIGNMARK],[We.MARQUEE,U.MARQUEE],[We.MATH,U.MATH],[We.MENU,U.MENU],[We.META,U.META],[We.MGLYPH,U.MGLYPH],[We.MI,U.MI],[We.MO,U.MO],[We.MN,U.MN],[We.MS,U.MS],[We.MTEXT,U.MTEXT],[We.NAV,U.NAV],[We.NOBR,U.NOBR],[We.NOFRAMES,U.NOFRAMES],[We.NOEMBED,U.NOEMBED],[We.NOSCRIPT,U.NOSCRIPT],[We.OBJECT,U.OBJECT],[We.OL,U.OL],[We.OPTGROUP,U.OPTGROUP],[We.OPTION,U.OPTION],[We.P,U.P],[We.PARAM,U.PARAM],[We.PLAINTEXT,U.PLAINTEXT],[We.PRE,U.PRE],[We.RB,U.RB],[We.RP,U.RP],[We.RT,U.RT],[We.RTC,U.RTC],[We.RUBY,U.RUBY],[We.S,U.S],[We.SCRIPT,U.SCRIPT],[We.SEARCH,U.SEARCH],[We.SECTION,U.SECTION],[We.SELECT,U.SELECT],[We.SOURCE,U.SOURCE],[We.SMALL,U.SMALL],[We.SPAN,U.SPAN],[We.STRIKE,U.STRIKE],[We.STRONG,U.STRONG],[We.STYLE,U.STYLE],[We.SUB,U.SUB],[We.SUMMARY,U.SUMMARY],[We.SUP,U.SUP],[We.TABLE,U.TABLE],[We.TBODY,U.TBODY],[We.TEMPLATE,U.TEMPLATE],[We.TEXTAREA,U.TEXTAREA],[We.TFOOT,U.TFOOT],[We.TD,U.TD],[We.TH,U.TH],[We.THEAD,U.THEAD],[We.TITLE,U.TITLE],[We.TR,U.TR],[We.TRACK,U.TRACK],[We.TT,U.TT],[We.U,U.U],[We.UL,U.UL],[We.SVG,U.SVG],[We.VAR,U.VAR],[We.WBR,U.WBR],[We.XMP,U.XMP]]);function zg(t){var e;return(e=w2e.get(t))!==null&&e!==void 0?e:U.UNKNOWN}const ht=U,S2e={[lt.HTML]:new Set([ht.ADDRESS,ht.APPLET,ht.AREA,ht.ARTICLE,ht.ASIDE,ht.BASE,ht.BASEFONT,ht.BGSOUND,ht.BLOCKQUOTE,ht.BODY,ht.BR,ht.BUTTON,ht.CAPTION,ht.CENTER,ht.COL,ht.COLGROUP,ht.DD,ht.DETAILS,ht.DIR,ht.DIV,ht.DL,ht.DT,ht.EMBED,ht.FIELDSET,ht.FIGCAPTION,ht.FIGURE,ht.FOOTER,ht.FORM,ht.FRAME,ht.FRAMESET,ht.H1,ht.H2,ht.H3,ht.H4,ht.H5,ht.H6,ht.HEAD,ht.HEADER,ht.HGROUP,ht.HR,ht.HTML,ht.IFRAME,ht.IMG,ht.INPUT,ht.LI,ht.LINK,ht.LISTING,ht.MAIN,ht.MARQUEE,ht.MENU,ht.META,ht.NAV,ht.NOEMBED,ht.NOFRAMES,ht.NOSCRIPT,ht.OBJECT,ht.OL,ht.P,ht.PARAM,ht.PLAINTEXT,ht.PRE,ht.SCRIPT,ht.SECTION,ht.SELECT,ht.SOURCE,ht.STYLE,ht.SUMMARY,ht.TABLE,ht.TBODY,ht.TD,ht.TEMPLATE,ht.TEXTAREA,ht.TFOOT,ht.TH,ht.THEAD,ht.TITLE,ht.TR,ht.TRACK,ht.UL,ht.WBR,ht.XMP]),[lt.MATHML]:new Set([ht.MI,ht.MO,ht.MN,ht.MS,ht.MTEXT,ht.ANNOTATION_XML]),[lt.SVG]:new Set([ht.TITLE,ht.FOREIGN_OBJECT,ht.DESC]),[lt.XLINK]:new Set,[lt.XML]:new Set,[lt.XMLNS]:new Set},mP=new Set([ht.H1,ht.H2,ht.H3,ht.H4,ht.H5,ht.H6]);We.STYLE,We.SCRIPT,We.XMP,We.IFRAME,We.NOEMBED,We.NOFRAMES,We.PLAINTEXT;var xe;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(xe||(xe={}));const Fr={DATA:xe.DATA,RCDATA:xe.RCDATA,RAWTEXT:xe.RAWTEXT,SCRIPT_DATA:xe.SCRIPT_DATA,PLAINTEXT:xe.PLAINTEXT,CDATA_SECTION:xe.CDATA_SECTION};function E2e(t){return t>=ge.DIGIT_0&&t<=ge.DIGIT_9}function Tb(t){return t>=ge.LATIN_CAPITAL_A&&t<=ge.LATIN_CAPITAL_Z}function k2e(t){return t>=ge.LATIN_SMALL_A&&t<=ge.LATIN_SMALL_Z}function Ou(t){return k2e(t)||Tb(t)}function q8(t){return Ou(t)||E2e(t)}function k_(t){return t+32}function gY(t){return t===ge.SPACE||t===ge.LINE_FEED||t===ge.TABULATION||t===ge.FORM_FEED}function K8(t){return gY(t)||t===ge.SOLIDUS||t===ge.GREATER_THAN_SIGN}function C2e(t){return t===ge.NULL?Je.nullCharacterReference:t>1114111?Je.characterReferenceOutsideUnicodeRange:cY(t)?Je.surrogateCharacterReference:hY(t)?Je.noncharacterCharacterReference:uY(t)||t===ge.CARRIAGE_RETURN?Je.controlCharacterReference:null}class T2e{constructor(e,n){this.options=e,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=xe.DATA,this.returnState=xe.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new d2e(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new pY(fY,(r,i)=>{this.preprocessor.pos=this.entityStartPos+i-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(Je.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(Je.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const i=C2e(r);i&&this._err(i,1)}}:void 0)}_err(e,n=0){var r,i;(i=(r=this.handler).onParseError)===null||i===void 0||i.call(r,this.preprocessor.getError(e,n))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e?.())}write(e,n,r){this.active=!0,this.preprocessor.write(e,n),this._runParsingLoop(),this.paused||r?.()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let n=0;n<e;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,n){return this.preprocessor.startsWith(e,n)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:pn.START_TAG,tagName:"",tagID:U.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:pn.END_TAG,tagName:"",tagID:U.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:pn.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:pn.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,n){this.currentCharacterToken={type:e,chars:n,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,n;const r=this.currentToken;if(dY(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(e=(n=r.location).attrs)!==null&&e!==void 0?e:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Je.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=zg(e.tagName),e.type===pn.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(Je.endTagWithAttributes),e.selfClosing&&this._err(Je.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case pn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case pn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case pn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:pn.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,n)}_emitCodePoint(e){const n=gY(e)?pn.WHITESPACE_CHARACTER:e===ge.NULL?pn.NULL_CHARACTER:pn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(pn.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=xe.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Rc.Attribute:Rc.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===xe.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===xe.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===xe.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case xe.DATA:{this._stateData(e);break}case xe.RCDATA:{this._stateRcdata(e);break}case xe.RAWTEXT:{this._stateRawtext(e);break}case xe.SCRIPT_DATA:{this._stateScriptData(e);break}case xe.PLAINTEXT:{this._statePlaintext(e);break}case xe.TAG_OPEN:{this._stateTagOpen(e);break}case xe.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case xe.TAG_NAME:{this._stateTagName(e);break}case xe.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case xe.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case xe.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case xe.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case xe.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case xe.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case xe.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case xe.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case xe.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case xe.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case xe.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case xe.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case xe.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case xe.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case xe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case xe.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case xe.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case xe.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case xe.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case xe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case xe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case xe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case xe.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case xe.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case xe.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case xe.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case xe.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case xe.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case xe.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case xe.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case xe.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case xe.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case xe.BOGUS_COMMENT:{this._stateBogusComment(e);break}case xe.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case xe.COMMENT_START:{this._stateCommentStart(e);break}case xe.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case xe.COMMENT:{this._stateComment(e);break}case xe.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case xe.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case xe.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case xe.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case xe.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case xe.COMMENT_END:{this._stateCommentEnd(e);break}case xe.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case xe.DOCTYPE:{this._stateDoctype(e);break}case xe.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case xe.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case xe.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case xe.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case xe.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case xe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case xe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case xe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case xe.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case xe.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case xe.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case xe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case xe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case xe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case xe.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case xe.CDATA_SECTION:{this._stateCdataSection(e);break}case xe.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case xe.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case xe.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case xe.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case ge.LESS_THAN_SIGN:{this.state=xe.TAG_OPEN;break}case ge.AMPERSAND:{this._startCharacterReference();break}case ge.NULL:{this._err(Je.unexpectedNullCharacter),this._emitCodePoint(e);break}case ge.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case ge.AMPERSAND:{this._startCharacterReference();break}case ge.LESS_THAN_SIGN:{this.state=xe.RCDATA_LESS_THAN_SIGN;break}case ge.NULL:{this._err(Je.unexpectedNullCharacter),this._emitChars(mr);break}case ge.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case ge.LESS_THAN_SIGN:{this.state=xe.RAWTEXT_LESS_THAN_SIGN;break}case ge.NULL:{this._err(Je.unexpectedNullCharacter),this._emitChars(mr);break}case ge.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case ge.LESS_THAN_SIGN:{this.state=xe.SCRIPT_DATA_LESS_THAN_SIGN;break}case ge.NULL:{this._err(Je.unexpectedNullCharacter),this._emitChars(mr);break}case ge.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case ge.NULL:{this._err(Je.unexpectedNullCharacter),this._emitChars(mr);break}case ge.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(Ou(e))this._createStartTagToken(),this.state=xe.TAG_NAME,this._stateTagName(e);else switch(e){case ge.EXCLAMATION_MARK:{this.state=xe.MARKUP_DECLARATION_OPEN;break}case ge.SOLIDUS:{this.state=xe.END_TAG_OPEN;break}case ge.QUESTION_MARK:{this._err(Je.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=xe.BOGUS_COMMENT,this._stateBogusComment(e);break}case ge.EOF:{this._err(Je.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Je.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=xe.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(Ou(e))this._createEndTagToken(),this.state=xe.TAG_NAME,this._stateTagName(e);else switch(e){case ge.GREATER_THAN_SIGN:{this._err(Je.missingEndTagName),this.state=xe.DATA;break}case ge.EOF:{this._err(Je.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Je.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=xe.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const n=this.currentToken;switch(e){case ge.SPACE:case ge.LINE_FEED:case ge.TABULATION:case ge.FORM_FEED:{this.state=xe.BEFORE_ATTRIBUTE_NAME;break}case ge.SOLIDUS:{this.state=xe.SELF_CLOSING_START_TAG;break}case ge.GREATER_THAN_SIGN:{this.state=xe.DATA,this.emitCurrentTagToken();break}case ge.NULL:{this._err(Je.unexpectedNullCharacter),n.tagName+=mr;break}case ge.EOF:{this._err(Je.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(Tb(e)?k_(e):e)}}_stateRcdataLessThanSign(e){e===ge.SOLIDUS?this.state=xe.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=xe.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){Ou(e)?(this.state=xe.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=xe.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case ge.SPACE:case ge.LINE_FEED:case ge.TABULATION:case ge.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=xe.BEFORE_ATTRIBUTE_NAME,!1;case ge.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=xe.SELF_CLOSING_START_TAG,!1;case ge.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=xe.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=xe.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===ge.SOLIDUS?this.state=xe.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=xe.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){Ou(e)?(this.state=xe.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=xe.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=xe.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case ge.SOLIDUS:{this.state=xe.SCRIPT_DATA_END_TAG_OPEN;break}case ge.EXCLAMATION_MARK:{this.state=xe.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=xe.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){Ou(e)?(this.state=xe.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=xe.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=xe.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===ge.HYPHEN_MINUS?(this.state=xe.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=xe.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===ge.HYPHEN_MINUS?(this.state=xe.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=xe.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case ge.HYPHEN_MINUS:{this.state=xe.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case ge.LESS_THAN_SIGN:{this.state=xe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ge.NULL:{this._err(Je.unexpectedNullCharacter),this._emitChars(mr);break}case ge.EOF:{this._err(Je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case ge.HYPHEN_MINUS:{this.state=xe.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case ge.LESS_THAN_SIGN:{this.state=xe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ge.NULL:{this._err(Je.unexpectedNullCharacter),this.state=xe.SCRIPT_DATA_ESCAPED,this._emitChars(mr);break}case ge.EOF:{this._err(Je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=xe.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case ge.HYPHEN_MINUS:{this._emitChars("-");break}case ge.LESS_THAN_SIGN:{this.state=xe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ge.GREATER_THAN_SIGN:{this.state=xe.SCRIPT_DATA,this._emitChars(">");break}case ge.NULL:{this._err(Je.unexpectedNullCharacter),this.state=xe.SCRIPT_DATA_ESCAPED,this._emitChars(mr);break}case ge.EOF:{this._err(Je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=xe.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===ge.SOLIDUS?this.state=xe.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Ou(e)?(this._emitChars("<"),this.state=xe.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=xe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){Ou(e)?(this.state=xe.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=xe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=xe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(Ls.SCRIPT,!1)&&K8(this.preprocessor.peek(Ls.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Ls.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=xe.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=xe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case ge.HYPHEN_MINUS:{this.state=xe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case ge.LESS_THAN_SIGN:{this.state=xe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ge.NULL:{this._err(Je.unexpectedNullCharacter),this._emitChars(mr);break}case ge.EOF:{this._err(Je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case ge.HYPHEN_MINUS:{this.state=xe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case ge.LESS_THAN_SIGN:{this.state=xe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ge.NULL:{this._err(Je.unexpectedNullCharacter),this.state=xe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(mr);break}case ge.EOF:{this._err(Je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=xe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case ge.HYPHEN_MINUS:{this._emitChars("-");break}case ge.LESS_THAN_SIGN:{this.state=xe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ge.GREATER_THAN_SIGN:{this.state=xe.SCRIPT_DATA,this._emitChars(">");break}case ge.NULL:{this._err(Je.unexpectedNullCharacter),this.state=xe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(mr);break}case ge.EOF:{this._err(Je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=xe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===ge.SOLIDUS?(this.state=xe.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=xe.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(Ls.SCRIPT,!1)&&K8(this.preprocessor.peek(Ls.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Ls.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=xe.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=xe.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case ge.SPACE:case ge.LINE_FEED:case ge.TABULATION:case ge.FORM_FEED:break;case ge.SOLIDUS:case ge.GREATER_THAN_SIGN:case ge.EOF:{this.state=xe.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case ge.EQUALS_SIGN:{this._err(Je.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=xe.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=xe.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case ge.SPACE:case ge.LINE_FEED:case ge.TABULATION:case ge.FORM_FEED:case ge.SOLIDUS:case ge.GREATER_THAN_SIGN:case ge.EOF:{this._leaveAttrName(),this.state=xe.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case ge.EQUALS_SIGN:{this._leaveAttrName(),this.state=xe.BEFORE_ATTRIBUTE_VALUE;break}case ge.QUOTATION_MARK:case ge.APOSTROPHE:case ge.LESS_THAN_SIGN:{this._err(Je.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case ge.NULL:{this._err(Je.unexpectedNullCharacter),this.currentAttr.name+=mr;break}default:this.currentAttr.name+=String.fromCodePoint(Tb(e)?k_(e):e)}}_stateAfterAttributeName(e){switch(e){case ge.SPACE:case ge.LINE_FEED:case ge.TABULATION:case ge.FORM_FEED:break;case ge.SOLIDUS:{this.state=xe.SELF_CLOSING_START_TAG;break}case ge.EQUALS_SIGN:{this.state=xe.BEFORE_ATTRIBUTE_VALUE;break}case ge.GREATER_THAN_SIGN:{this.state=xe.DATA,this.emitCurrentTagToken();break}case ge.EOF:{this._err(Je.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=xe.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case ge.SPACE:case ge.LINE_FEED:case ge.TABULATION:case ge.FORM_FEED:break;case ge.QUOTATION_MARK:{this.state=xe.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case ge.APOSTROPHE:{this.state=xe.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case ge.GREATER_THAN_SIGN:{this._err(Je.missingAttributeValue),this.state=xe.DATA,this.emitCurrentTagToken();break}default:this.state=xe.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case ge.QUOTATION_MARK:{this.state=xe.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ge.AMPERSAND:{this._startCharacterReference();break}case ge.NULL:{this._err(Je.unexpectedNullCharacter),this.currentAttr.value+=mr;break}case ge.EOF:{this._err(Je.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case ge.APOSTROPHE:{this.state=xe.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ge.AMPERSAND:{this._startCharacterReference();break}case ge.NULL:{this._err(Je.unexpectedNullCharacter),this.currentAttr.value+=mr;break}case ge.EOF:{this._err(Je.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case ge.SPACE:case ge.LINE_FEED:case ge.TABULATION:case ge.FORM_FEED:{this._leaveAttrValue(),this.state=xe.BEFORE_ATTRIBUTE_NAME;break}case ge.AMPERSAND:{this._startCharacterReference();break}case ge.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=xe.DATA,this.emitCurrentTagToken();break}case ge.NULL:{this._err(Je.unexpectedNullCharacter),this.currentAttr.value+=mr;break}case ge.QUOTATION_MARK:case ge.APOSTROPHE:case ge.LESS_THAN_SIGN:case ge.EQUALS_SIGN:case ge.GRAVE_ACCENT:{this._err(Je.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case ge.EOF:{this._err(Je.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case ge.SPACE:case ge.LINE_FEED:case ge.TABULATION:case ge.FORM_FEED:{this._leaveAttrValue(),this.state=xe.BEFORE_ATTRIBUTE_NAME;break}case ge.SOLIDUS:{this._leaveAttrValue(),this.state=xe.SELF_CLOSING_START_TAG;break}case ge.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=xe.DATA,this.emitCurrentTagToken();break}case ge.EOF:{this._err(Je.eofInTag),this._emitEOFToken();break}default:this._err(Je.missingWhitespaceBetweenAttributes),this.state=xe.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case ge.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=xe.DATA,this.emitCurrentTagToken();break}case ge.EOF:{this._err(Je.eofInTag),this._emitEOFToken();break}default:this._err(Je.unexpectedSolidusInTag),this.state=xe.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const n=this.currentToken;switch(e){case ge.GREATER_THAN_SIGN:{this.state=xe.DATA,this.emitCurrentComment(n);break}case ge.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case ge.NULL:{this._err(Je.unexpectedNullCharacter),n.data+=mr;break}default:n.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(Ls.DASH_DASH,!0)?(this._createCommentToken(Ls.DASH_DASH.length+1),this.state=xe.COMMENT_START):this._consumeSequenceIfMatch(Ls.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Ls.DOCTYPE.length+1),this.state=xe.DOCTYPE):this._consumeSequenceIfMatch(Ls.CDATA_START,!0)?this.inForeignNode?this.state=xe.CDATA_SECTION:(this._err(Je.cdataInHtmlContent),this._createCommentToken(Ls.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=xe.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Je.incorrectlyOpenedComment),this._createCommentToken(2),this.state=xe.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case ge.HYPHEN_MINUS:{this.state=xe.COMMENT_START_DASH;break}case ge.GREATER_THAN_SIGN:{this._err(Je.abruptClosingOfEmptyComment),this.state=xe.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=xe.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const n=this.currentToken;switch(e){case ge.HYPHEN_MINUS:{this.state=xe.COMMENT_END;break}case ge.GREATER_THAN_SIGN:{this._err(Je.abruptClosingOfEmptyComment),this.state=xe.DATA,this.emitCurrentComment(n);break}case ge.EOF:{this._err(Je.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=xe.COMMENT,this._stateComment(e)}}_stateComment(e){const n=this.currentToken;switch(e){case ge.HYPHEN_MINUS:{this.state=xe.COMMENT_END_DASH;break}case ge.LESS_THAN_SIGN:{n.data+="<",this.state=xe.COMMENT_LESS_THAN_SIGN;break}case ge.NULL:{this._err(Je.unexpectedNullCharacter),n.data+=mr;break}case ge.EOF:{this._err(Je.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const n=this.currentToken;switch(e){case ge.EXCLAMATION_MARK:{n.data+="!",this.state=xe.COMMENT_LESS_THAN_SIGN_BANG;break}case ge.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=xe.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===ge.HYPHEN_MINUS?this.state=xe.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=xe.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===ge.HYPHEN_MINUS?this.state=xe.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=xe.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==ge.GREATER_THAN_SIGN&&e!==ge.EOF&&this._err(Je.nestedComment),this.state=xe.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const n=this.currentToken;switch(e){case ge.HYPHEN_MINUS:{this.state=xe.COMMENT_END;break}case ge.EOF:{this._err(Je.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=xe.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const n=this.currentToken;switch(e){case ge.GREATER_THAN_SIGN:{this.state=xe.DATA,this.emitCurrentComment(n);break}case ge.EXCLAMATION_MARK:{this.state=xe.COMMENT_END_BANG;break}case ge.HYPHEN_MINUS:{n.data+="-";break}case ge.EOF:{this._err(Je.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=xe.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const n=this.currentToken;switch(e){case ge.HYPHEN_MINUS:{n.data+="--!",this.state=xe.COMMENT_END_DASH;break}case ge.GREATER_THAN_SIGN:{this._err(Je.incorrectlyClosedComment),this.state=xe.DATA,this.emitCurrentComment(n);break}case ge.EOF:{this._err(Je.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=xe.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case ge.SPACE:case ge.LINE_FEED:case ge.TABULATION:case ge.FORM_FEED:{this.state=xe.BEFORE_DOCTYPE_NAME;break}case ge.GREATER_THAN_SIGN:{this.state=xe.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case ge.EOF:{this._err(Je.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.missingWhitespaceBeforeDoctypeName),this.state=xe.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(Tb(e))this._createDoctypeToken(String.fromCharCode(k_(e))),this.state=xe.DOCTYPE_NAME;else switch(e){case ge.SPACE:case ge.LINE_FEED:case ge.TABULATION:case ge.FORM_FEED:break;case ge.NULL:{this._err(Je.unexpectedNullCharacter),this._createDoctypeToken(mr),this.state=xe.DOCTYPE_NAME;break}case ge.GREATER_THAN_SIGN:{this._err(Je.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=xe.DATA;break}case ge.EOF:{this._err(Je.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=xe.DOCTYPE_NAME}}_stateDoctypeName(e){const n=this.currentToken;switch(e){case ge.SPACE:case ge.LINE_FEED:case ge.TABULATION:case ge.FORM_FEED:{this.state=xe.AFTER_DOCTYPE_NAME;break}case ge.GREATER_THAN_SIGN:{this.state=xe.DATA,this.emitCurrentDoctype(n);break}case ge.NULL:{this._err(Je.unexpectedNullCharacter),n.name+=mr;break}case ge.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(Tb(e)?k_(e):e)}}_stateAfterDoctypeName(e){const n=this.currentToken;switch(e){case ge.SPACE:case ge.LINE_FEED:case ge.TABULATION:case ge.FORM_FEED:break;case ge.GREATER_THAN_SIGN:{this.state=xe.DATA,this.emitCurrentDoctype(n);break}case ge.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Ls.PUBLIC,!1)?this.state=xe.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Ls.SYSTEM,!1)?this.state=xe.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Je.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=xe.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const n=this.currentToken;switch(e){case ge.SPACE:case ge.LINE_FEED:case ge.TABULATION:case ge.FORM_FEED:{this.state=xe.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case ge.QUOTATION_MARK:{this._err(Je.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=xe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ge.APOSTROPHE:{this._err(Je.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=xe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ge.GREATER_THAN_SIGN:{this._err(Je.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=xe.DATA,this.emitCurrentDoctype(n);break}case ge.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=xe.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case ge.SPACE:case ge.LINE_FEED:case ge.TABULATION:case ge.FORM_FEED:break;case ge.QUOTATION_MARK:{n.publicId="",this.state=xe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ge.APOSTROPHE:{n.publicId="",this.state=xe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ge.GREATER_THAN_SIGN:{this._err(Je.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=xe.DATA,this.emitCurrentDoctype(n);break}case ge.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=xe.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case ge.QUOTATION_MARK:{this.state=xe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ge.NULL:{this._err(Je.unexpectedNullCharacter),n.publicId+=mr;break}case ge.GREATER_THAN_SIGN:{this._err(Je.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=xe.DATA;break}case ge.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case ge.APOSTROPHE:{this.state=xe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ge.NULL:{this._err(Je.unexpectedNullCharacter),n.publicId+=mr;break}case ge.GREATER_THAN_SIGN:{this._err(Je.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=xe.DATA;break}case ge.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case ge.SPACE:case ge.LINE_FEED:case ge.TABULATION:case ge.FORM_FEED:{this.state=xe.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case ge.GREATER_THAN_SIGN:{this.state=xe.DATA,this.emitCurrentDoctype(n);break}case ge.QUOTATION_MARK:{this._err(Je.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=xe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ge.APOSTROPHE:{this._err(Je.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=xe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ge.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=xe.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const n=this.currentToken;switch(e){case ge.SPACE:case ge.LINE_FEED:case ge.TABULATION:case ge.FORM_FEED:break;case ge.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=xe.DATA;break}case ge.QUOTATION_MARK:{n.systemId="",this.state=xe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ge.APOSTROPHE:{n.systemId="",this.state=xe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ge.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=xe.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const n=this.currentToken;switch(e){case ge.SPACE:case ge.LINE_FEED:case ge.TABULATION:case ge.FORM_FEED:{this.state=xe.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case ge.QUOTATION_MARK:{this._err(Je.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=xe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ge.APOSTROPHE:{this._err(Je.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=xe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ge.GREATER_THAN_SIGN:{this._err(Je.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=xe.DATA,this.emitCurrentDoctype(n);break}case ge.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=xe.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case ge.SPACE:case ge.LINE_FEED:case ge.TABULATION:case ge.FORM_FEED:break;case ge.QUOTATION_MARK:{n.systemId="",this.state=xe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ge.APOSTROPHE:{n.systemId="",this.state=xe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ge.GREATER_THAN_SIGN:{this._err(Je.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=xe.DATA,this.emitCurrentDoctype(n);break}case ge.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=xe.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case ge.QUOTATION_MARK:{this.state=xe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ge.NULL:{this._err(Je.unexpectedNullCharacter),n.systemId+=mr;break}case ge.GREATER_THAN_SIGN:{this._err(Je.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=xe.DATA;break}case ge.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case ge.APOSTROPHE:{this.state=xe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ge.NULL:{this._err(Je.unexpectedNullCharacter),n.systemId+=mr;break}case ge.GREATER_THAN_SIGN:{this._err(Je.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=xe.DATA;break}case ge.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case ge.SPACE:case ge.LINE_FEED:case ge.TABULATION:case ge.FORM_FEED:break;case ge.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=xe.DATA;break}case ge.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=xe.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const n=this.currentToken;switch(e){case ge.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=xe.DATA;break}case ge.NULL:{this._err(Je.unexpectedNullCharacter);break}case ge.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case ge.RIGHT_SQUARE_BRACKET:{this.state=xe.CDATA_SECTION_BRACKET;break}case ge.EOF:{this._err(Je.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===ge.RIGHT_SQUARE_BRACKET?this.state=xe.CDATA_SECTION_END:(this._emitChars("]"),this.state=xe.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case ge.GREATER_THAN_SIGN:{this.state=xe.DATA;break}case ge.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=xe.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(ge.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&q8(this.preprocessor.peek(1))?xe.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){q8(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===ge.SEMICOLON&&this._err(Je.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const bY=new Set([U.DD,U.DT,U.LI,U.OPTGROUP,U.OPTION,U.P,U.RB,U.RP,U.RT,U.RTC]),Y8=new Set([...bY,U.CAPTION,U.COLGROUP,U.TBODY,U.TD,U.TFOOT,U.TH,U.THEAD,U.TR]),uS=new Set([U.APPLET,U.CAPTION,U.HTML,U.MARQUEE,U.OBJECT,U.TABLE,U.TD,U.TEMPLATE,U.TH]),A2e=new Set([...uS,U.OL,U.UL]),P2e=new Set([...uS,U.BUTTON]),X8=new Set([U.ANNOTATION_XML,U.MI,U.MN,U.MO,U.MS,U.MTEXT]),Z8=new Set([U.DESC,U.FOREIGN_OBJECT,U.TITLE]),N2e=new Set([U.TR,U.TEMPLATE,U.HTML]),L2e=new Set([U.TBODY,U.TFOOT,U.THEAD,U.TEMPLATE,U.HTML]),R2e=new Set([U.TABLE,U.TEMPLATE,U.HTML]),I2e=new Set([U.TD,U.TH]);class O2e{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=U.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===U.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===lt.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,n){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,n,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,n){const r=this._indexOf(e);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(e,n,r){const i=this._indexOf(e)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(e){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(e,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==lt.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(e){for(;this.stackTop>=e;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<e)}}popUntilElementPopped(e){const n=this._indexOf(e);this.shortenToLength(n<0?0:n)}popUntilPopped(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(mP,lt.HTML)}popUntilTableCellPopped(){this.popUntilPopped(I2e,lt.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,n){for(let r=this.stackTop;r>=0;r--)if(e.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(R2e,lt.HTML)}clearBackToTableBodyContext(){this.clearBackTo(L2e,lt.HTML)}clearBackToTableRowContext(){this.clearBackTo(N2e,lt.HTML)}remove(e){const n=this._indexOf(e);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===U.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const n=this._indexOf(e)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===U.HTML}hasInDynamicScope(e,n){for(let r=this.stackTop;r>=0;r--){const i=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case lt.HTML:{if(i===e)return!0;if(n.has(i))return!1;break}case lt.SVG:{if(Z8.has(i))return!1;break}case lt.MATHML:{if(X8.has(i))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,uS)}hasInListItemScope(e){return this.hasInDynamicScope(e,A2e)}hasInButtonScope(e){return this.hasInDynamicScope(e,P2e)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case lt.HTML:{if(mP.has(n))return!0;if(uS.has(n))return!1;break}case lt.SVG:{if(Z8.has(n))return!1;break}case lt.MATHML:{if(X8.has(n))return!1;break}}}return!0}hasInTableScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===lt.HTML)switch(this.tagIDs[n]){case e:return!0;case U.TABLE:case U.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===lt.HTML)switch(this.tagIDs[e]){case U.TBODY:case U.THEAD:case U.TFOOT:return!0;case U.TABLE:case U.HTML:return!1}return!0}hasInSelectScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===lt.HTML)switch(this.tagIDs[n]){case e:return!0;case U.OPTION:case U.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;bY.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Y8.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==e&&Y8.has(this.currentTagId);)this.pop()}}const XC=3;var Tl;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(Tl||(Tl={}));const J8={type:Tl.Marker};class D2e{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(e),o=this.treeAdapter.getNamespaceURI(e);for(let a=0;a<this.entries.length;a++){const l=this.entries[a];if(l.type===Tl.Marker)break;const{element:c}=l;if(this.treeAdapter.getTagName(c)===s&&this.treeAdapter.getNamespaceURI(c)===o){const u=this.treeAdapter.getAttrList(c);u.length===i&&r.push({idx:a,attrs:u})}}return r}_ensureNoahArkCondition(e){if(this.entries.length<XC)return;const n=this.treeAdapter.getAttrList(e),r=this._getNoahArkConditionCandidates(e,n);if(r.length<XC)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(l=>i.get(l.name)===l.value)&&(s+=1,s>=XC&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(J8)}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.unshift({type:Tl.Element,element:e,token:n})}insertElementAfterBookmark(e,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Tl.Element,element:e,token:n})}removeEntry(e){const n=this.entries.indexOf(e);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const e=this.entries.indexOf(J8);e>=0?this.entries.splice(0,e+1):this.entries.length=0}getElementEntryInScopeWithTagName(e){const n=this.entries.find(r=>r.type===Tl.Marker||this.treeAdapter.getTagName(r.element)===e);return n&&n.type===Tl.Element?n:null}getElementEntry(e){return this.entries.find(n=>n.type===Tl.Element&&n.element===e)}}const Du={createDocument(){return{nodeName:"#document",mode:Uo.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,n){return{nodeName:t,tagName:t,attrs:n,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},createTextNode(t){return{nodeName:"#text",value:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,n){const r=t.childNodes.indexOf(n);t.childNodes.splice(r,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,n,r){const i=t.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=e,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:e,publicId:n,systemId:r,parentNode:null};Du.appendChild(t,s)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const n=t.childNodes[t.childNodes.length-1];if(Du.isTextNode(n)){n.value+=e;return}}Du.appendChild(t,Du.createTextNode(e))},insertTextBefore(t,e,n){const r=t.childNodes[t.childNodes.indexOf(n)-1];r&&Du.isTextNode(r)?r.value+=e:Du.insertBefore(t,Du.createTextNode(e),n)},adoptAttributes(t,e){const n=new Set(t.attrs.map(r=>r.name));for(let r=0;r<e.length;r++)n.has(e[r].name)||t.attrs.push(e[r])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},yY="html",M2e="about:legacy-compat",j2e="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",vY=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],F2e=[...vY,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],B2e=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),xY=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],U2e=[...xY,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Q8(t,e){return e.some(n=>t.startsWith(n))}function $2e(t){return t.name===yY&&t.publicId===null&&(t.systemId===null||t.systemId===M2e)}function H2e(t){if(t.name!==yY)return Uo.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===j2e)return Uo.QUIRKS;let{publicId:n}=t;if(n!==null){if(n=n.toLowerCase(),B2e.has(n))return Uo.QUIRKS;let r=e===null?F2e:vY;if(Q8(n,r))return Uo.QUIRKS;if(r=e===null?xY:U2e,Q8(n,r))return Uo.LIMITED_QUIRKS}return Uo.NO_QUIRKS}const ej={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},z2e="definitionurl",V2e="definitionURL",W2e=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),G2e=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:lt.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:lt.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:lt.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:lt.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:lt.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:lt.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:lt.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:lt.XML}],["xml:space",{prefix:"xml",name:"space",namespace:lt.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:lt.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:lt.XMLNS}]]),q2e=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),K2e=new Set([U.B,U.BIG,U.BLOCKQUOTE,U.BODY,U.BR,U.CENTER,U.CODE,U.DD,U.DIV,U.DL,U.DT,U.EM,U.EMBED,U.H1,U.H2,U.H3,U.H4,U.H5,U.H6,U.HEAD,U.HR,U.I,U.IMG,U.LI,U.LISTING,U.MENU,U.META,U.NOBR,U.OL,U.P,U.PRE,U.RUBY,U.S,U.SMALL,U.SPAN,U.STRONG,U.STRIKE,U.SUB,U.SUP,U.TABLE,U.TT,U.U,U.UL,U.VAR]);function Y2e(t){const e=t.tagID;return e===U.FONT&&t.attrs.some(({name:r})=>r===Jd.COLOR||r===Jd.SIZE||r===Jd.FACE)||K2e.has(e)}function _Y(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===z2e){t.attrs[e].name=V2e;break}}function wY(t){for(let e=0;e<t.attrs.length;e++){const n=W2e.get(t.attrs[e].name);n!=null&&(t.attrs[e].name=n)}}function WR(t){for(let e=0;e<t.attrs.length;e++){const n=G2e.get(t.attrs[e].name);n&&(t.attrs[e].prefix=n.prefix,t.attrs[e].name=n.name,t.attrs[e].namespace=n.namespace)}}function X2e(t){const e=q2e.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=zg(t.tagName))}function Z2e(t,e){return e===lt.MATHML&&(t===U.MI||t===U.MO||t===U.MN||t===U.MS||t===U.MTEXT)}function J2e(t,e,n){if(e===lt.MATHML&&t===U.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===Jd.ENCODING){const i=n[r].value.toLowerCase();return i===ej.TEXT_HTML||i===ej.APPLICATION_XML}}return e===lt.SVG&&(t===U.FOREIGN_OBJECT||t===U.DESC||t===U.TITLE)}function Q2e(t,e,n,r){return(!r||r===lt.HTML)&&J2e(t,e,n)||(!r||r===lt.MATHML)&&Z2e(t,e)}const eSe="hidden",tSe=8,nSe=3;var Te;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(Te||(Te={}));const rSe={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},SY=new Set([U.TABLE,U.TBODY,U.TFOOT,U.THEAD,U.TR]),tj={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Du,onParseError:null};let nj=class{constructor(e,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=Te.INITIAL,this.originalInsertionMode=Te.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...tj,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new T2e(this.options,this),this.activeFormattingElements=new D2e(this.treeAdapter),this.fragmentContextID=r?zg(this.treeAdapter.getTagName(r)):U.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new O2e(this.document,this.treeAdapter,this)}static parse(e,n){const r=new this(n);return r.tokenizer.write(e,!0),r.document}static getFragmentParser(e,n){const r={...tj,...n};e??(e=r.treeAdapter.createElement(We.TEMPLATE,lt.HTML,[]));const i=r.treeAdapter.createElement("documentmock",lt.HTML,[]),s=new this(r,i,e);return s.fragmentContextID===U.TEMPLATE&&s.tmplInsertionModeStack.unshift(Te.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,n),n}_err(e,n,r){var i;if(!this.onParseError)return;const s=(i=e.location)!==null&&i!==void 0?i:rSe,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(e,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,e),r&&this.openElements.stackTop>0&&this._setContextModes(e,n)}onItemPop(e,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,e,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(e,n){const r=e===this.document||this.treeAdapter.getNamespaceURI(e)===lt.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,e)}_switchToTextParsing(e,n){this._insertElement(e,lt.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=Te.TEXT}switchToPlaintextParsing(){this.insertionMode=Te.TEXT,this.originalInsertionMode=Te.IN_BODY,this.tokenizer.state=Fr.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===We.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==lt.HTML))switch(this.fragmentContextID){case U.TITLE:case U.TEXTAREA:{this.tokenizer.state=Fr.RCDATA;break}case U.STYLE:case U.XMP:case U.IFRAME:case U.NOEMBED:case U.NOFRAMES:case U.NOSCRIPT:{this.tokenizer.state=Fr.RAWTEXT;break}case U.SCRIPT:{this.tokenizer.state=Fr.SCRIPT_DATA;break}case U.PLAINTEXT:{this.tokenizer.state=Fr.PLAINTEXT;break}}}_setDocumentType(e){const n=e.name||"",r=e.publicId||"",i=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),e.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}}_attachElementToTree(e,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(e,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,e)}}_appendElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location)}_insertElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID)}_insertFakeElement(e,n){const r=this.treeAdapter.createElement(e,lt.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(e){const n=this.treeAdapter.createElement(e.tagName,lt.HTML,e.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(We.HTML,lt.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,U.HTML)}_appendCommentNode(e,n){const r=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,e.location)}_insertCharacters(e){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,e.chars,r):this.treeAdapter.insertText(n,e.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,e.chars)),!e.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:l,endCol:c,endOffset:u}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:l,endCol:c,endOffset:u})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}_adoptNodes(e,n){for(let r=this.treeAdapter.getFirstChild(e);r;r=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(e,n){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(e),s=n.type===pn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,s)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,e.tagID===U.SVG&&this.treeAdapter.getTagName(n)===We.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===lt.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===U.MGLYPH||e.tagID===U.MALIGNMARK)&&!this._isIntegrationPoint(r,n,lt.HTML)}_processToken(e){switch(e.type){case pn.CHARACTER:{this.onCharacter(e);break}case pn.NULL_CHARACTER:{this.onNullCharacter(e);break}case pn.COMMENT:{this.onComment(e);break}case pn.DOCTYPE:{this.onDoctype(e);break}case pn.START_TAG:{this._processStartTag(e);break}case pn.END_TAG:{this.onEndTag(e);break}case pn.EOF:{this.onEof(e);break}case pn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Q2e(e,i,s,r)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Tl.Marker||this.openElements.contains(i.element)),r=n<0?e-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=Te.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(U.P),this.openElements.popUntilTagNamePopped(U.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case U.TR:{this.insertionMode=Te.IN_ROW;return}case U.TBODY:case U.THEAD:case U.TFOOT:{this.insertionMode=Te.IN_TABLE_BODY;return}case U.CAPTION:{this.insertionMode=Te.IN_CAPTION;return}case U.COLGROUP:{this.insertionMode=Te.IN_COLUMN_GROUP;return}case U.TABLE:{this.insertionMode=Te.IN_TABLE;return}case U.BODY:{this.insertionMode=Te.IN_BODY;return}case U.FRAMESET:{this.insertionMode=Te.IN_FRAMESET;return}case U.SELECT:{this._resetInsertionModeForSelect(e);return}case U.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case U.HTML:{this.insertionMode=this.headElement?Te.AFTER_HEAD:Te.BEFORE_HEAD;return}case U.TD:case U.TH:{if(e>0){this.insertionMode=Te.IN_CELL;return}break}case U.HEAD:{if(e>0){this.insertionMode=Te.IN_HEAD;return}break}}this.insertionMode=Te.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let n=e-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===U.TEMPLATE)break;if(r===U.TABLE){this.insertionMode=Te.IN_SELECT_IN_TABLE;return}}this.insertionMode=Te.IN_SELECT}_isElementCausesFosterParenting(e){return SY.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const n=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case U.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===lt.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case U.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,e,n.beforeElement):this.treeAdapter.appendChild(n.parent,e)}_isSpecialElement(e,n){const r=this.treeAdapter.getNamespaceURI(e);return S2e[r].has(n)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){IEe(this,e);return}switch(this.insertionMode){case Te.INITIAL:{Y0(this,e);break}case Te.BEFORE_HTML:{i1(this,e);break}case Te.BEFORE_HEAD:{s1(this,e);break}case Te.IN_HEAD:{o1(this,e);break}case Te.IN_HEAD_NO_SCRIPT:{a1(this,e);break}case Te.AFTER_HEAD:{l1(this,e);break}case Te.IN_BODY:case Te.IN_CAPTION:case Te.IN_CELL:case Te.IN_TEMPLATE:{kY(this,e);break}case Te.TEXT:case Te.IN_SELECT:case Te.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case Te.IN_TABLE:case Te.IN_TABLE_BODY:case Te.IN_ROW:{ZC(this,e);break}case Te.IN_TABLE_TEXT:{LY(this,e);break}case Te.IN_COLUMN_GROUP:{hS(this,e);break}case Te.AFTER_BODY:{dS(this,e);break}case Te.AFTER_AFTER_BODY:{Qw(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){REe(this,e);return}switch(this.insertionMode){case Te.INITIAL:{Y0(this,e);break}case Te.BEFORE_HTML:{i1(this,e);break}case Te.BEFORE_HEAD:{s1(this,e);break}case Te.IN_HEAD:{o1(this,e);break}case Te.IN_HEAD_NO_SCRIPT:{a1(this,e);break}case Te.AFTER_HEAD:{l1(this,e);break}case Te.TEXT:{this._insertCharacters(e);break}case Te.IN_TABLE:case Te.IN_TABLE_BODY:case Te.IN_ROW:{ZC(this,e);break}case Te.IN_COLUMN_GROUP:{hS(this,e);break}case Te.AFTER_BODY:{dS(this,e);break}case Te.AFTER_AFTER_BODY:{Qw(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){gP(this,e);return}switch(this.insertionMode){case Te.INITIAL:case Te.BEFORE_HTML:case Te.BEFORE_HEAD:case Te.IN_HEAD:case Te.IN_HEAD_NO_SCRIPT:case Te.AFTER_HEAD:case Te.IN_BODY:case Te.IN_TABLE:case Te.IN_CAPTION:case Te.IN_COLUMN_GROUP:case Te.IN_TABLE_BODY:case Te.IN_ROW:case Te.IN_CELL:case Te.IN_SELECT:case Te.IN_SELECT_IN_TABLE:case Te.IN_TEMPLATE:case Te.IN_FRAMESET:case Te.AFTER_FRAMESET:{gP(this,e);break}case Te.IN_TABLE_TEXT:{X0(this,e);break}case Te.AFTER_BODY:{uSe(this,e);break}case Te.AFTER_AFTER_BODY:case Te.AFTER_AFTER_FRAMESET:{hSe(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case Te.INITIAL:{dSe(this,e);break}case Te.BEFORE_HEAD:case Te.IN_HEAD:case Te.IN_HEAD_NO_SCRIPT:case Te.AFTER_HEAD:{this._err(e,Je.misplacedDoctype);break}case Te.IN_TABLE_TEXT:{X0(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,Je.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?OEe(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case Te.INITIAL:{Y0(this,e);break}case Te.BEFORE_HTML:{fSe(this,e);break}case Te.BEFORE_HEAD:{mSe(this,e);break}case Te.IN_HEAD:{Ga(this,e);break}case Te.IN_HEAD_NO_SCRIPT:{ySe(this,e);break}case Te.AFTER_HEAD:{xSe(this,e);break}case Te.IN_BODY:{is(this,e);break}case Te.IN_TABLE:{rg(this,e);break}case Te.IN_TABLE_TEXT:{X0(this,e);break}case Te.IN_CAPTION:{gEe(this,e);break}case Te.IN_COLUMN_GROUP:{KR(this,e);break}case Te.IN_TABLE_BODY:{fk(this,e);break}case Te.IN_ROW:{pk(this,e);break}case Te.IN_CELL:{vEe(this,e);break}case Te.IN_SELECT:{OY(this,e);break}case Te.IN_SELECT_IN_TABLE:{_Ee(this,e);break}case Te.IN_TEMPLATE:{SEe(this,e);break}case Te.AFTER_BODY:{kEe(this,e);break}case Te.IN_FRAMESET:{CEe(this,e);break}case Te.AFTER_FRAMESET:{AEe(this,e);break}case Te.AFTER_AFTER_BODY:{NEe(this,e);break}case Te.AFTER_AFTER_FRAMESET:{LEe(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?DEe(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case Te.INITIAL:{Y0(this,e);break}case Te.BEFORE_HTML:{pSe(this,e);break}case Te.BEFORE_HEAD:{gSe(this,e);break}case Te.IN_HEAD:{bSe(this,e);break}case Te.IN_HEAD_NO_SCRIPT:{vSe(this,e);break}case Te.AFTER_HEAD:{_Se(this,e);break}case Te.IN_BODY:{dk(this,e);break}case Te.TEXT:{oEe(this,e);break}case Te.IN_TABLE:{ay(this,e);break}case Te.IN_TABLE_TEXT:{X0(this,e);break}case Te.IN_CAPTION:{bEe(this,e);break}case Te.IN_COLUMN_GROUP:{yEe(this,e);break}case Te.IN_TABLE_BODY:{bP(this,e);break}case Te.IN_ROW:{IY(this,e);break}case Te.IN_CELL:{xEe(this,e);break}case Te.IN_SELECT:{DY(this,e);break}case Te.IN_SELECT_IN_TABLE:{wEe(this,e);break}case Te.IN_TEMPLATE:{EEe(this,e);break}case Te.AFTER_BODY:{jY(this,e);break}case Te.IN_FRAMESET:{TEe(this,e);break}case Te.AFTER_FRAMESET:{PEe(this,e);break}case Te.AFTER_AFTER_BODY:{Qw(this,e);break}}}onEof(e){switch(this.insertionMode){case Te.INITIAL:{Y0(this,e);break}case Te.BEFORE_HTML:{i1(this,e);break}case Te.BEFORE_HEAD:{s1(this,e);break}case Te.IN_HEAD:{o1(this,e);break}case Te.IN_HEAD_NO_SCRIPT:{a1(this,e);break}case Te.AFTER_HEAD:{l1(this,e);break}case Te.IN_BODY:case Te.IN_TABLE:case Te.IN_CAPTION:case Te.IN_COLUMN_GROUP:case Te.IN_TABLE_BODY:case Te.IN_ROW:case Te.IN_CELL:case Te.IN_SELECT:case Te.IN_SELECT_IN_TABLE:{PY(this,e);break}case Te.TEXT:{aEe(this,e);break}case Te.IN_TABLE_TEXT:{X0(this,e);break}case Te.IN_TEMPLATE:{MY(this,e);break}case Te.AFTER_BODY:case Te.IN_FRAMESET:case Te.AFTER_FRAMESET:case Te.AFTER_AFTER_BODY:case Te.AFTER_AFTER_FRAMESET:{qR(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===ge.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case Te.IN_HEAD:case Te.IN_HEAD_NO_SCRIPT:case Te.AFTER_HEAD:case Te.TEXT:case Te.IN_COLUMN_GROUP:case Te.IN_SELECT:case Te.IN_SELECT_IN_TABLE:case Te.IN_FRAMESET:case Te.AFTER_FRAMESET:{this._insertCharacters(e);break}case Te.IN_BODY:case Te.IN_CAPTION:case Te.IN_CELL:case Te.IN_TEMPLATE:case Te.AFTER_BODY:case Te.AFTER_AFTER_BODY:case Te.AFTER_AFTER_FRAMESET:{EY(this,e);break}case Te.IN_TABLE:case Te.IN_TABLE_BODY:case Te.IN_ROW:{ZC(this,e);break}case Te.IN_TABLE_TEXT:{NY(this,e);break}}}};function iSe(t,e){let n=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return n?t.openElements.contains(n.element)?t.openElements.hasInScope(e.tagID)||(n=null):(t.activeFormattingElements.removeEntry(n),n=null):AY(t,e),n}function sSe(t,e){let n=null,r=t.openElements.stackTop;for(;r>=0;r--){const i=t.openElements.items[r];if(i===e.element)break;t._isSpecialElement(i,t.openElements.tagIDs[r])&&(n=i)}return n||(t.openElements.shortenToLength(r<0?0:r),t.activeFormattingElements.removeEntry(e)),n}function oSe(t,e,n){let r=e,i=t.openElements.getCommonAncestor(e);for(let s=0,o=i;o!==n;s++,o=i){i=t.openElements.getCommonAncestor(o);const a=t.activeFormattingElements.getElementEntry(o),l=a&&s>=nSe;!a||l?(l&&t.activeFormattingElements.removeEntry(a),t.openElements.remove(o)):(o=aSe(t,a),r===e&&(t.activeFormattingElements.bookmark=a),t.treeAdapter.detachNode(r),t.treeAdapter.appendChild(o,r),r=o)}return r}function aSe(t,e){const n=t.treeAdapter.getNamespaceURI(e.element),r=t.treeAdapter.createElement(e.token.tagName,n,e.token.attrs);return t.openElements.replace(e.element,r),e.element=r,r}function lSe(t,e,n){const r=t.treeAdapter.getTagName(e),i=zg(r);if(t._isElementCausesFosterParenting(i))t._fosterParentElement(n);else{const s=t.treeAdapter.getNamespaceURI(e);i===U.TEMPLATE&&s===lt.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,n)}}function cSe(t,e,n){const r=t.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=t.treeAdapter.createElement(i.tagName,r,i.attrs);t._adoptNodes(e,s),t.treeAdapter.appendChild(e,s),t.activeFormattingElements.insertElementAfterBookmark(s,i),t.activeFormattingElements.removeEntry(n),t.openElements.remove(n.element),t.openElements.insertAfter(e,s,i.tagID)}function GR(t,e){for(let n=0;n<tSe;n++){const r=iSe(t,e);if(!r)break;const i=sSe(t,r);if(!i)break;t.activeFormattingElements.bookmark=r;const s=oSe(t,i,r.element),o=t.openElements.getCommonAncestor(r.element);t.treeAdapter.detachNode(s),o&&lSe(t,o,s),cSe(t,i,r)}}function gP(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function uSe(t,e){t._appendCommentNode(e,t.openElements.items[0])}function hSe(t,e){t._appendCommentNode(e,t.document)}function qR(t,e){if(t.stopped=!0,e.location){const n=t.fragmentContext?0:2;for(let r=t.openElements.stackTop;r>=n;r--)t._setEndLocation(t.openElements.items[r],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const r=t.openElements.items[0],i=t.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(t._setEndLocation(r,e),t.openElements.stackTop>=1)){const s=t.openElements.items[1],o=t.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&t._setEndLocation(s,e)}}}}function dSe(t,e){t._setDocumentType(e);const n=e.forceQuirks?Uo.QUIRKS:H2e(e);$2e(e)||t._err(e,Je.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,n),t.insertionMode=Te.BEFORE_HTML}function Y0(t,e){t._err(e,Je.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,Uo.QUIRKS),t.insertionMode=Te.BEFORE_HTML,t._processToken(e)}function fSe(t,e){e.tagID===U.HTML?(t._insertElement(e,lt.HTML),t.insertionMode=Te.BEFORE_HEAD):i1(t,e)}function pSe(t,e){const n=e.tagID;(n===U.HTML||n===U.HEAD||n===U.BODY||n===U.BR)&&i1(t,e)}function i1(t,e){t._insertFakeRootElement(),t.insertionMode=Te.BEFORE_HEAD,t._processToken(e)}function mSe(t,e){switch(e.tagID){case U.HTML:{is(t,e);break}case U.HEAD:{t._insertElement(e,lt.HTML),t.headElement=t.openElements.current,t.insertionMode=Te.IN_HEAD;break}default:s1(t,e)}}function gSe(t,e){const n=e.tagID;n===U.HEAD||n===U.BODY||n===U.HTML||n===U.BR?s1(t,e):t._err(e,Je.endTagWithoutMatchingOpenElement)}function s1(t,e){t._insertFakeElement(We.HEAD,U.HEAD),t.headElement=t.openElements.current,t.insertionMode=Te.IN_HEAD,t._processToken(e)}function Ga(t,e){switch(e.tagID){case U.HTML:{is(t,e);break}case U.BASE:case U.BASEFONT:case U.BGSOUND:case U.LINK:case U.META:{t._appendElement(e,lt.HTML),e.ackSelfClosing=!0;break}case U.TITLE:{t._switchToTextParsing(e,Fr.RCDATA);break}case U.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,Fr.RAWTEXT):(t._insertElement(e,lt.HTML),t.insertionMode=Te.IN_HEAD_NO_SCRIPT);break}case U.NOFRAMES:case U.STYLE:{t._switchToTextParsing(e,Fr.RAWTEXT);break}case U.SCRIPT:{t._switchToTextParsing(e,Fr.SCRIPT_DATA);break}case U.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=Te.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(Te.IN_TEMPLATE);break}case U.HEAD:{t._err(e,Je.misplacedStartTagForHeadElement);break}default:o1(t,e)}}function bSe(t,e){switch(e.tagID){case U.HEAD:{t.openElements.pop(),t.insertionMode=Te.AFTER_HEAD;break}case U.BODY:case U.BR:case U.HTML:{o1(t,e);break}case U.TEMPLATE:{Bf(t,e);break}default:t._err(e,Je.endTagWithoutMatchingOpenElement)}}function Bf(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==U.TEMPLATE&&t._err(e,Je.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(U.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,Je.endTagWithoutMatchingOpenElement)}function o1(t,e){t.openElements.pop(),t.insertionMode=Te.AFTER_HEAD,t._processToken(e)}function ySe(t,e){switch(e.tagID){case U.HTML:{is(t,e);break}case U.BASEFONT:case U.BGSOUND:case U.HEAD:case U.LINK:case U.META:case U.NOFRAMES:case U.STYLE:{Ga(t,e);break}case U.NOSCRIPT:{t._err(e,Je.nestedNoscriptInHead);break}default:a1(t,e)}}function vSe(t,e){switch(e.tagID){case U.NOSCRIPT:{t.openElements.pop(),t.insertionMode=Te.IN_HEAD;break}case U.BR:{a1(t,e);break}default:t._err(e,Je.endTagWithoutMatchingOpenElement)}}function a1(t,e){const n=e.type===pn.EOF?Je.openElementsLeftAfterEof:Je.disallowedContentInNoscriptInHead;t._err(e,n),t.openElements.pop(),t.insertionMode=Te.IN_HEAD,t._processToken(e)}function xSe(t,e){switch(e.tagID){case U.HTML:{is(t,e);break}case U.BODY:{t._insertElement(e,lt.HTML),t.framesetOk=!1,t.insertionMode=Te.IN_BODY;break}case U.FRAMESET:{t._insertElement(e,lt.HTML),t.insertionMode=Te.IN_FRAMESET;break}case U.BASE:case U.BASEFONT:case U.BGSOUND:case U.LINK:case U.META:case U.NOFRAMES:case U.SCRIPT:case U.STYLE:case U.TEMPLATE:case U.TITLE:{t._err(e,Je.abandonedHeadElementChild),t.openElements.push(t.headElement,U.HEAD),Ga(t,e),t.openElements.remove(t.headElement);break}case U.HEAD:{t._err(e,Je.misplacedStartTagForHeadElement);break}default:l1(t,e)}}function _Se(t,e){switch(e.tagID){case U.BODY:case U.HTML:case U.BR:{l1(t,e);break}case U.TEMPLATE:{Bf(t,e);break}default:t._err(e,Je.endTagWithoutMatchingOpenElement)}}function l1(t,e){t._insertFakeElement(We.BODY,U.BODY),t.insertionMode=Te.IN_BODY,hk(t,e)}function hk(t,e){switch(e.type){case pn.CHARACTER:{kY(t,e);break}case pn.WHITESPACE_CHARACTER:{EY(t,e);break}case pn.COMMENT:{gP(t,e);break}case pn.START_TAG:{is(t,e);break}case pn.END_TAG:{dk(t,e);break}case pn.EOF:{PY(t,e);break}}}function EY(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function kY(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function wSe(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function SSe(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(n,e.attrs))}function ESe(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&n&&(t.treeAdapter.detachNode(n),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,lt.HTML),t.insertionMode=Te.IN_FRAMESET)}function kSe(t,e){t.openElements.hasInButtonScope(U.P)&&t._closePElement(),t._insertElement(e,lt.HTML)}function CSe(t,e){t.openElements.hasInButtonScope(U.P)&&t._closePElement(),mP.has(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,lt.HTML)}function TSe(t,e){t.openElements.hasInButtonScope(U.P)&&t._closePElement(),t._insertElement(e,lt.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function ASe(t,e){const n=t.openElements.tmplCount>0;(!t.formElement||n)&&(t.openElements.hasInButtonScope(U.P)&&t._closePElement(),t._insertElement(e,lt.HTML),n||(t.formElement=t.openElements.current))}function PSe(t,e){t.framesetOk=!1;const n=e.tagID;for(let r=t.openElements.stackTop;r>=0;r--){const i=t.openElements.tagIDs[r];if(n===U.LI&&i===U.LI||(n===U.DD||n===U.DT)&&(i===U.DD||i===U.DT)){t.openElements.generateImpliedEndTagsWithExclusion(i),t.openElements.popUntilTagNamePopped(i);break}if(i!==U.ADDRESS&&i!==U.DIV&&i!==U.P&&t._isSpecialElement(t.openElements.items[r],i))break}t.openElements.hasInButtonScope(U.P)&&t._closePElement(),t._insertElement(e,lt.HTML)}function NSe(t,e){t.openElements.hasInButtonScope(U.P)&&t._closePElement(),t._insertElement(e,lt.HTML),t.tokenizer.state=Fr.PLAINTEXT}function LSe(t,e){t.openElements.hasInScope(U.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(U.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,lt.HTML),t.framesetOk=!1}function RSe(t,e){const n=t.activeFormattingElements.getElementEntryInScopeWithTagName(We.A);n&&(GR(t,e),t.openElements.remove(n.element),t.activeFormattingElements.removeEntry(n)),t._reconstructActiveFormattingElements(),t._insertElement(e,lt.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function ISe(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,lt.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function OSe(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(U.NOBR)&&(GR(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,lt.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function DSe(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,lt.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function MSe(t,e){t.treeAdapter.getDocumentMode(t.document)!==Uo.QUIRKS&&t.openElements.hasInButtonScope(U.P)&&t._closePElement(),t._insertElement(e,lt.HTML),t.framesetOk=!1,t.insertionMode=Te.IN_TABLE}function CY(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,lt.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function TY(t){const e=dY(t,Jd.TYPE);return e!=null&&e.toLowerCase()===eSe}function jSe(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,lt.HTML),TY(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function FSe(t,e){t._appendElement(e,lt.HTML),e.ackSelfClosing=!0}function BSe(t,e){t.openElements.hasInButtonScope(U.P)&&t._closePElement(),t._appendElement(e,lt.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function USe(t,e){e.tagName=We.IMG,e.tagID=U.IMG,CY(t,e)}function $Se(t,e){t._insertElement(e,lt.HTML),t.skipNextNewLine=!0,t.tokenizer.state=Fr.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=Te.TEXT}function HSe(t,e){t.openElements.hasInButtonScope(U.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,Fr.RAWTEXT)}function zSe(t,e){t.framesetOk=!1,t._switchToTextParsing(e,Fr.RAWTEXT)}function rj(t,e){t._switchToTextParsing(e,Fr.RAWTEXT)}function VSe(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,lt.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===Te.IN_TABLE||t.insertionMode===Te.IN_CAPTION||t.insertionMode===Te.IN_TABLE_BODY||t.insertionMode===Te.IN_ROW||t.insertionMode===Te.IN_CELL?Te.IN_SELECT_IN_TABLE:Te.IN_SELECT}function WSe(t,e){t.openElements.currentTagId===U.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,lt.HTML)}function GSe(t,e){t.openElements.hasInScope(U.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,lt.HTML)}function qSe(t,e){t.openElements.hasInScope(U.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(U.RTC),t._insertElement(e,lt.HTML)}function KSe(t,e){t._reconstructActiveFormattingElements(),_Y(e),WR(e),e.selfClosing?t._appendElement(e,lt.MATHML):t._insertElement(e,lt.MATHML),e.ackSelfClosing=!0}function YSe(t,e){t._reconstructActiveFormattingElements(),wY(e),WR(e),e.selfClosing?t._appendElement(e,lt.SVG):t._insertElement(e,lt.SVG),e.ackSelfClosing=!0}function ij(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,lt.HTML)}function is(t,e){switch(e.tagID){case U.I:case U.S:case U.B:case U.U:case U.EM:case U.TT:case U.BIG:case U.CODE:case U.FONT:case U.SMALL:case U.STRIKE:case U.STRONG:{ISe(t,e);break}case U.A:{RSe(t,e);break}case U.H1:case U.H2:case U.H3:case U.H4:case U.H5:case U.H6:{CSe(t,e);break}case U.P:case U.DL:case U.OL:case U.UL:case U.DIV:case U.DIR:case U.NAV:case U.MAIN:case U.MENU:case U.ASIDE:case U.CENTER:case U.FIGURE:case U.FOOTER:case U.HEADER:case U.HGROUP:case U.DIALOG:case U.DETAILS:case U.ADDRESS:case U.ARTICLE:case U.SEARCH:case U.SECTION:case U.SUMMARY:case U.FIELDSET:case U.BLOCKQUOTE:case U.FIGCAPTION:{kSe(t,e);break}case U.LI:case U.DD:case U.DT:{PSe(t,e);break}case U.BR:case U.IMG:case U.WBR:case U.AREA:case U.EMBED:case U.KEYGEN:{CY(t,e);break}case U.HR:{BSe(t,e);break}case U.RB:case U.RTC:{GSe(t,e);break}case U.RT:case U.RP:{qSe(t,e);break}case U.PRE:case U.LISTING:{TSe(t,e);break}case U.XMP:{HSe(t,e);break}case U.SVG:{YSe(t,e);break}case U.HTML:{wSe(t,e);break}case U.BASE:case U.LINK:case U.META:case U.STYLE:case U.TITLE:case U.SCRIPT:case U.BGSOUND:case U.BASEFONT:case U.TEMPLATE:{Ga(t,e);break}case U.BODY:{SSe(t,e);break}case U.FORM:{ASe(t,e);break}case U.NOBR:{OSe(t,e);break}case U.MATH:{KSe(t,e);break}case U.TABLE:{MSe(t,e);break}case U.INPUT:{jSe(t,e);break}case U.PARAM:case U.TRACK:case U.SOURCE:{FSe(t,e);break}case U.IMAGE:{USe(t,e);break}case U.BUTTON:{LSe(t,e);break}case U.APPLET:case U.OBJECT:case U.MARQUEE:{DSe(t,e);break}case U.IFRAME:{zSe(t,e);break}case U.SELECT:{VSe(t,e);break}case U.OPTION:case U.OPTGROUP:{WSe(t,e);break}case U.NOEMBED:case U.NOFRAMES:{rj(t,e);break}case U.FRAMESET:{ESe(t,e);break}case U.TEXTAREA:{$Se(t,e);break}case U.NOSCRIPT:{t.options.scriptingEnabled?rj(t,e):ij(t,e);break}case U.PLAINTEXT:{NSe(t,e);break}case U.COL:case U.TH:case U.TD:case U.TR:case U.HEAD:case U.FRAME:case U.TBODY:case U.TFOOT:case U.THEAD:case U.CAPTION:case U.COLGROUP:break;default:ij(t,e)}}function XSe(t,e){if(t.openElements.hasInScope(U.BODY)&&(t.insertionMode=Te.AFTER_BODY,t.options.sourceCodeLocationInfo)){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t._setEndLocation(n,e)}}function ZSe(t,e){t.openElements.hasInScope(U.BODY)&&(t.insertionMode=Te.AFTER_BODY,jY(t,e))}function JSe(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n))}function QSe(t){const e=t.openElements.tmplCount>0,{formElement:n}=t;e||(t.formElement=null),(n||e)&&t.openElements.hasInScope(U.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(U.FORM):n&&t.openElements.remove(n))}function eEe(t){t.openElements.hasInButtonScope(U.P)||t._insertFakeElement(We.P,U.P),t._closePElement()}function tEe(t){t.openElements.hasInListItemScope(U.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(U.LI),t.openElements.popUntilTagNamePopped(U.LI))}function nEe(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilTagNamePopped(n))}function rEe(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function iEe(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker())}function sEe(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(We.BR,U.BR),t.openElements.pop(),t.framesetOk=!1}function AY(t,e){const n=e.tagName,r=e.tagID;for(let i=t.openElements.stackTop;i>0;i--){const s=t.openElements.items[i],o=t.openElements.tagIDs[i];if(r===o&&(r!==U.UNKNOWN||t.treeAdapter.getTagName(s)===n)){t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.stackTop>=i&&t.openElements.shortenToLength(i);break}if(t._isSpecialElement(s,o))break}}function dk(t,e){switch(e.tagID){case U.A:case U.B:case U.I:case U.S:case U.U:case U.EM:case U.TT:case U.BIG:case U.CODE:case U.FONT:case U.NOBR:case U.SMALL:case U.STRIKE:case U.STRONG:{GR(t,e);break}case U.P:{eEe(t);break}case U.DL:case U.UL:case U.OL:case U.DIR:case U.DIV:case U.NAV:case U.PRE:case U.MAIN:case U.MENU:case U.ASIDE:case U.BUTTON:case U.CENTER:case U.FIGURE:case U.FOOTER:case U.HEADER:case U.HGROUP:case U.DIALOG:case U.ADDRESS:case U.ARTICLE:case U.DETAILS:case U.SEARCH:case U.SECTION:case U.SUMMARY:case U.LISTING:case U.FIELDSET:case U.BLOCKQUOTE:case U.FIGCAPTION:{JSe(t,e);break}case U.LI:{tEe(t);break}case U.DD:case U.DT:{nEe(t,e);break}case U.H1:case U.H2:case U.H3:case U.H4:case U.H5:case U.H6:{rEe(t);break}case U.BR:{sEe(t);break}case U.BODY:{XSe(t,e);break}case U.HTML:{ZSe(t,e);break}case U.FORM:{QSe(t);break}case U.APPLET:case U.OBJECT:case U.MARQUEE:{iEe(t,e);break}case U.TEMPLATE:{Bf(t,e);break}default:AY(t,e)}}function PY(t,e){t.tmplInsertionModeStack.length>0?MY(t,e):qR(t,e)}function oEe(t,e){var n;e.tagID===U.SCRIPT&&((n=t.scriptHandler)===null||n===void 0||n.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function aEe(t,e){t._err(e,Je.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function ZC(t,e){if(SY.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=Te.IN_TABLE_TEXT,e.type){case pn.CHARACTER:{LY(t,e);break}case pn.WHITESPACE_CHARACTER:{NY(t,e);break}}else xv(t,e)}function lEe(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,lt.HTML),t.insertionMode=Te.IN_CAPTION}function cEe(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,lt.HTML),t.insertionMode=Te.IN_COLUMN_GROUP}function uEe(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(We.COLGROUP,U.COLGROUP),t.insertionMode=Te.IN_COLUMN_GROUP,KR(t,e)}function hEe(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,lt.HTML),t.insertionMode=Te.IN_TABLE_BODY}function dEe(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(We.TBODY,U.TBODY),t.insertionMode=Te.IN_TABLE_BODY,fk(t,e)}function fEe(t,e){t.openElements.hasInTableScope(U.TABLE)&&(t.openElements.popUntilTagNamePopped(U.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function pEe(t,e){TY(e)?t._appendElement(e,lt.HTML):xv(t,e),e.ackSelfClosing=!0}function mEe(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,lt.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function rg(t,e){switch(e.tagID){case U.TD:case U.TH:case U.TR:{dEe(t,e);break}case U.STYLE:case U.SCRIPT:case U.TEMPLATE:{Ga(t,e);break}case U.COL:{uEe(t,e);break}case U.FORM:{mEe(t,e);break}case U.TABLE:{fEe(t,e);break}case U.TBODY:case U.TFOOT:case U.THEAD:{hEe(t,e);break}case U.INPUT:{pEe(t,e);break}case U.CAPTION:{lEe(t,e);break}case U.COLGROUP:{cEe(t,e);break}default:xv(t,e)}}function ay(t,e){switch(e.tagID){case U.TABLE:{t.openElements.hasInTableScope(U.TABLE)&&(t.openElements.popUntilTagNamePopped(U.TABLE),t._resetInsertionMode());break}case U.TEMPLATE:{Bf(t,e);break}case U.BODY:case U.CAPTION:case U.COL:case U.COLGROUP:case U.HTML:case U.TBODY:case U.TD:case U.TFOOT:case U.TH:case U.THEAD:case U.TR:break;default:xv(t,e)}}function xv(t,e){const n=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,hk(t,e),t.fosterParentingEnabled=n}function NY(t,e){t.pendingCharacterTokens.push(e)}function LY(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function X0(t,e){let n=0;if(t.hasNonWhitespacePendingCharacterToken)for(;n<t.pendingCharacterTokens.length;n++)xv(t,t.pendingCharacterTokens[n]);else for(;n<t.pendingCharacterTokens.length;n++)t._insertCharacters(t.pendingCharacterTokens[n]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const RY=new Set([U.CAPTION,U.COL,U.COLGROUP,U.TBODY,U.TD,U.TFOOT,U.TH,U.THEAD,U.TR]);function gEe(t,e){const n=e.tagID;RY.has(n)?t.openElements.hasInTableScope(U.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(U.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=Te.IN_TABLE,rg(t,e)):is(t,e)}function bEe(t,e){const n=e.tagID;switch(n){case U.CAPTION:case U.TABLE:{t.openElements.hasInTableScope(U.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(U.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=Te.IN_TABLE,n===U.TABLE&&ay(t,e));break}case U.BODY:case U.COL:case U.COLGROUP:case U.HTML:case U.TBODY:case U.TD:case U.TFOOT:case U.TH:case U.THEAD:case U.TR:break;default:dk(t,e)}}function KR(t,e){switch(e.tagID){case U.HTML:{is(t,e);break}case U.COL:{t._appendElement(e,lt.HTML),e.ackSelfClosing=!0;break}case U.TEMPLATE:{Ga(t,e);break}default:hS(t,e)}}function yEe(t,e){switch(e.tagID){case U.COLGROUP:{t.openElements.currentTagId===U.COLGROUP&&(t.openElements.pop(),t.insertionMode=Te.IN_TABLE);break}case U.TEMPLATE:{Bf(t,e);break}case U.COL:break;default:hS(t,e)}}function hS(t,e){t.openElements.currentTagId===U.COLGROUP&&(t.openElements.pop(),t.insertionMode=Te.IN_TABLE,t._processToken(e))}function fk(t,e){switch(e.tagID){case U.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,lt.HTML),t.insertionMode=Te.IN_ROW;break}case U.TH:case U.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(We.TR,U.TR),t.insertionMode=Te.IN_ROW,pk(t,e);break}case U.CAPTION:case U.COL:case U.COLGROUP:case U.TBODY:case U.TFOOT:case U.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=Te.IN_TABLE,rg(t,e));break}default:rg(t,e)}}function bP(t,e){const n=e.tagID;switch(e.tagID){case U.TBODY:case U.TFOOT:case U.THEAD:{t.openElements.hasInTableScope(n)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=Te.IN_TABLE);break}case U.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=Te.IN_TABLE,ay(t,e));break}case U.BODY:case U.CAPTION:case U.COL:case U.COLGROUP:case U.HTML:case U.TD:case U.TH:case U.TR:break;default:ay(t,e)}}function pk(t,e){switch(e.tagID){case U.TH:case U.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,lt.HTML),t.insertionMode=Te.IN_CELL,t.activeFormattingElements.insertMarker();break}case U.CAPTION:case U.COL:case U.COLGROUP:case U.TBODY:case U.TFOOT:case U.THEAD:case U.TR:{t.openElements.hasInTableScope(U.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=Te.IN_TABLE_BODY,fk(t,e));break}default:rg(t,e)}}function IY(t,e){switch(e.tagID){case U.TR:{t.openElements.hasInTableScope(U.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=Te.IN_TABLE_BODY);break}case U.TABLE:{t.openElements.hasInTableScope(U.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=Te.IN_TABLE_BODY,bP(t,e));break}case U.TBODY:case U.TFOOT:case U.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(U.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=Te.IN_TABLE_BODY,bP(t,e));break}case U.BODY:case U.CAPTION:case U.COL:case U.COLGROUP:case U.HTML:case U.TD:case U.TH:break;default:ay(t,e)}}function vEe(t,e){const n=e.tagID;RY.has(n)?(t.openElements.hasInTableScope(U.TD)||t.openElements.hasInTableScope(U.TH))&&(t._closeTableCell(),pk(t,e)):is(t,e)}function xEe(t,e){const n=e.tagID;switch(n){case U.TD:case U.TH:{t.openElements.hasInTableScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=Te.IN_ROW);break}case U.TABLE:case U.TBODY:case U.TFOOT:case U.THEAD:case U.TR:{t.openElements.hasInTableScope(n)&&(t._closeTableCell(),IY(t,e));break}case U.BODY:case U.CAPTION:case U.COL:case U.COLGROUP:case U.HTML:break;default:dk(t,e)}}function OY(t,e){switch(e.tagID){case U.HTML:{is(t,e);break}case U.OPTION:{t.openElements.currentTagId===U.OPTION&&t.openElements.pop(),t._insertElement(e,lt.HTML);break}case U.OPTGROUP:{t.openElements.currentTagId===U.OPTION&&t.openElements.pop(),t.openElements.currentTagId===U.OPTGROUP&&t.openElements.pop(),t._insertElement(e,lt.HTML);break}case U.HR:{t.openElements.currentTagId===U.OPTION&&t.openElements.pop(),t.openElements.currentTagId===U.OPTGROUP&&t.openElements.pop(),t._appendElement(e,lt.HTML),e.ackSelfClosing=!0;break}case U.INPUT:case U.KEYGEN:case U.TEXTAREA:case U.SELECT:{t.openElements.hasInSelectScope(U.SELECT)&&(t.openElements.popUntilTagNamePopped(U.SELECT),t._resetInsertionMode(),e.tagID!==U.SELECT&&t._processStartTag(e));break}case U.SCRIPT:case U.TEMPLATE:{Ga(t,e);break}}}function DY(t,e){switch(e.tagID){case U.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===U.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===U.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===U.OPTGROUP&&t.openElements.pop();break}case U.OPTION:{t.openElements.currentTagId===U.OPTION&&t.openElements.pop();break}case U.SELECT:{t.openElements.hasInSelectScope(U.SELECT)&&(t.openElements.popUntilTagNamePopped(U.SELECT),t._resetInsertionMode());break}case U.TEMPLATE:{Bf(t,e);break}}}function _Ee(t,e){const n=e.tagID;n===U.CAPTION||n===U.TABLE||n===U.TBODY||n===U.TFOOT||n===U.THEAD||n===U.TR||n===U.TD||n===U.TH?(t.openElements.popUntilTagNamePopped(U.SELECT),t._resetInsertionMode(),t._processStartTag(e)):OY(t,e)}function wEe(t,e){const n=e.tagID;n===U.CAPTION||n===U.TABLE||n===U.TBODY||n===U.TFOOT||n===U.THEAD||n===U.TR||n===U.TD||n===U.TH?t.openElements.hasInTableScope(n)&&(t.openElements.popUntilTagNamePopped(U.SELECT),t._resetInsertionMode(),t.onEndTag(e)):DY(t,e)}function SEe(t,e){switch(e.tagID){case U.BASE:case U.BASEFONT:case U.BGSOUND:case U.LINK:case U.META:case U.NOFRAMES:case U.SCRIPT:case U.STYLE:case U.TEMPLATE:case U.TITLE:{Ga(t,e);break}case U.CAPTION:case U.COLGROUP:case U.TBODY:case U.TFOOT:case U.THEAD:{t.tmplInsertionModeStack[0]=Te.IN_TABLE,t.insertionMode=Te.IN_TABLE,rg(t,e);break}case U.COL:{t.tmplInsertionModeStack[0]=Te.IN_COLUMN_GROUP,t.insertionMode=Te.IN_COLUMN_GROUP,KR(t,e);break}case U.TR:{t.tmplInsertionModeStack[0]=Te.IN_TABLE_BODY,t.insertionMode=Te.IN_TABLE_BODY,fk(t,e);break}case U.TD:case U.TH:{t.tmplInsertionModeStack[0]=Te.IN_ROW,t.insertionMode=Te.IN_ROW,pk(t,e);break}default:t.tmplInsertionModeStack[0]=Te.IN_BODY,t.insertionMode=Te.IN_BODY,is(t,e)}}function EEe(t,e){e.tagID===U.TEMPLATE&&Bf(t,e)}function MY(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(U.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):qR(t,e)}function kEe(t,e){e.tagID===U.HTML?is(t,e):dS(t,e)}function jY(t,e){var n;if(e.tagID===U.HTML){if(t.fragmentContext||(t.insertionMode=Te.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===U.HTML){t._setEndLocation(t.openElements.items[0],e);const r=t.openElements.items[1];r&&!(!((n=t.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&t._setEndLocation(r,e)}}else dS(t,e)}function dS(t,e){t.insertionMode=Te.IN_BODY,hk(t,e)}function CEe(t,e){switch(e.tagID){case U.HTML:{is(t,e);break}case U.FRAMESET:{t._insertElement(e,lt.HTML);break}case U.FRAME:{t._appendElement(e,lt.HTML),e.ackSelfClosing=!0;break}case U.NOFRAMES:{Ga(t,e);break}}}function TEe(t,e){e.tagID===U.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==U.FRAMESET&&(t.insertionMode=Te.AFTER_FRAMESET))}function AEe(t,e){switch(e.tagID){case U.HTML:{is(t,e);break}case U.NOFRAMES:{Ga(t,e);break}}}function PEe(t,e){e.tagID===U.HTML&&(t.insertionMode=Te.AFTER_AFTER_FRAMESET)}function NEe(t,e){e.tagID===U.HTML?is(t,e):Qw(t,e)}function Qw(t,e){t.insertionMode=Te.IN_BODY,hk(t,e)}function LEe(t,e){switch(e.tagID){case U.HTML:{is(t,e);break}case U.NOFRAMES:{Ga(t,e);break}}}function REe(t,e){e.chars=mr,t._insertCharacters(e)}function IEe(t,e){t._insertCharacters(e),t.framesetOk=!1}function FY(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==lt.HTML&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function OEe(t,e){if(Y2e(e))FY(t),t._startTagOutsideForeignContent(e);else{const n=t._getAdjustedCurrentElement(),r=t.treeAdapter.getNamespaceURI(n);r===lt.MATHML?_Y(e):r===lt.SVG&&(X2e(e),wY(e)),WR(e),e.selfClosing?t._appendElement(e,r):t._insertElement(e,r),e.ackSelfClosing=!0}}function DEe(t,e){if(e.tagID===U.P||e.tagID===U.BR){FY(t),t._endTagOutsideForeignContent(e);return}for(let n=t.openElements.stackTop;n>0;n--){const r=t.openElements.items[n];if(t.treeAdapter.getNamespaceURI(r)===lt.HTML){t._endTagOutsideForeignContent(e);break}const i=t.treeAdapter.getTagName(r);if(i.toLowerCase()===e.tagName){e.tagName=i,t.openElements.shortenToLength(n);break}}}We.AREA,We.BASE,We.BASEFONT,We.BGSOUND,We.BR,We.COL,We.EMBED,We.FRAME,We.HR,We.IMG,We.INPUT,We.KEYGEN,We.LINK,We.META,We.PARAM,We.SOURCE,We.TRACK,We.WBR;const BY=UY("end"),Uf=UY("start");function UY(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}const $Y=function(t){if(t==null)return BEe;if(typeof t=="function")return mk(t);if(typeof t=="object")return Array.isArray(t)?MEe(t):jEe(t);if(typeof t=="string")return FEe(t);throw new Error("Expected function, string, or object as test")};function MEe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=$Y(t[n]);return mk(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function jEe(t){const e=t;return mk(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function FEe(t){return mk(e);function e(n){return n&&n.type===t}}function mk(t){return e;function e(n,r,i){return!!(UEe(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function BEe(){return!0}function UEe(t){return t!==null&&typeof t=="object"&&"type"in t}const HY=[],$Ee=!0,fS=!1,zY="skip";function VY(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=$Y(i),o=r?-1:1;a(t,void 0,[])();function a(l,c,u){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const f=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(l.type+(f?"<"+f+">":""))+")"})}return d;function d(){let f=HY,m,g,b;if((!e||s(l,c,u[u.length-1]||void 0))&&(f=HEe(n(l,u)),f[0]===fS))return f;if("children"in l&&l.children){const y=l;if(y.children&&f[0]!==zY)for(g=(r?y.children.length:-1)+o,b=u.concat(y);g>-1&&g<y.children.length;){const v=y.children[g];if(m=a(v,g,b)(),m[0]===fS)return m;g=typeof m[1]=="number"?m[1]:g+o}}return f}}}function HEe(t){return Array.isArray(t)?t:typeof t=="number"?[$Ee,t]:t==null?HY:[t]}function $f(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),VY(t,s,a,i);function a(l,c){const u=c[c.length-1],h=u?u.children.indexOf(l):void 0;return o(l,h,u)}}const zEe=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,VEe=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),sj={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function WY(t,e){const n=eke(t),r=zR("type",{handlers:{root:WEe,element:GEe,text:qEe,comment:qY,doctype:KEe,raw:XEe},unknown:ZEe}),i={parser:n?new nj(sj):nj.getFragmentParser(void 0,sj),handle(a){r(a,i)},stitches:!1,options:e||{}};r(t,i),Vg(i,Uf());const s=n?i.parser.document:i.parser.getFragment(),o=Bwe(s,{file:i.options.file});return i.stitches&&$f(o,"comment",function(a,l,c){const u=a;if(u.value.stitch&&c&&l!==void 0){const h=c.children;return h[l]=u.value.stitch,l}}),o.type==="root"&&o.children.length===1&&o.children[0].type===t.type?o.children[0]:o}function GY(t,e){let n=-1;if(t)for(;++n<t.length;)e.handle(t[n])}function WEe(t,e){GY(t.children,e)}function GEe(t,e){JEe(t,e),GY(t.children,e),QEe(t,e)}function qEe(t,e){e.parser.tokenizer.state>4&&(e.parser.tokenizer.state=0);const n={type:pn.CHARACTER,chars:t.value,location:_v(t)};Vg(e,Uf(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function KEe(t,e){const n={type:pn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:_v(t)};Vg(e,Uf(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function YEe(t,e){e.stitches=!0;const n=tke(t);if("children"in t&&"children"in n){const r=WY({type:"root",children:t.children},e.options);n.children=r.children}qY({type:"comment",value:{stitch:n}},e)}function qY(t,e){const n=t.value,r={type:pn.COMMENT,data:n,location:_v(t)};Vg(e,Uf(t)),e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)}function XEe(t,e){if(e.parser.tokenizer.preprocessor.html="",e.parser.tokenizer.preprocessor.pos=-1,e.parser.tokenizer.preprocessor.lastGapPos=-2,e.parser.tokenizer.preprocessor.gapStack=[],e.parser.tokenizer.preprocessor.skipNextNewLine=!1,e.parser.tokenizer.preprocessor.lastChunkWritten=!1,e.parser.tokenizer.preprocessor.endOfChunkHit=!1,e.parser.tokenizer.preprocessor.isEol=!1,KY(e,Uf(t)),e.parser.tokenizer.write(e.options.tagfilter?t.value.replace(zEe,"&lt;$1$2"):t.value,!1),e.parser.tokenizer._runParsingLoop(),e.parser.tokenizer.state===72||e.parser.tokenizer.state===78){e.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=e.parser.tokenizer._consume();e.parser.tokenizer._callState(n)}}function ZEe(t,e){const n=t;if(e.options.passThrough&&e.options.passThrough.includes(n.type))YEe(n,e);else{let r="";throw VEe.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function Vg(t,e){KY(t,e);const n=t.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=t.parser.tokenizer.preprocessor.line,n.location.endCol=t.parser.tokenizer.preprocessor.col+1,n.location.endOffset=t.parser.tokenizer.preprocessor.offset+1,t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)),t.parser.tokenizer.paused=!1,t.parser.tokenizer.inLoop=!1,t.parser.tokenizer.active=!1,t.parser.tokenizer.returnState=Fr.DATA,t.parser.tokenizer.charRefCode=-1,t.parser.tokenizer.consumedAfterSnapshot=-1,t.parser.tokenizer.currentLocation=null,t.parser.tokenizer.currentCharacterToken=null,t.parser.tokenizer.currentToken=null,t.parser.tokenizer.currentAttr={name:"",value:""}}function KY(t,e){if(e&&e.offset!==void 0){const n={startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:-1,endCol:-1,endOffset:-1};t.parser.tokenizer.preprocessor.lineStartPos=-e.column+1,t.parser.tokenizer.preprocessor.droppedBufferSize=e.offset,t.parser.tokenizer.preprocessor.line=e.line,t.parser.tokenizer.currentLocation=n}}function JEe(t,e){const n=t.tagName.toLowerCase();if(e.parser.tokenizer.state===Fr.PLAINTEXT)return;Vg(e,Uf(t));const r=e.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:Ad.html;i===Ad.html&&n==="svg"&&(i=Ad.svg);const s=e2e({...t,children:[]},{space:i===Ad.svg?"svg":"html"}),o={type:pn.START_TAG,tagName:n,tagID:zg(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:_v(t)};e.parser.currentToken=o,e.parser._processToken(e.parser.currentToken),e.parser.tokenizer.lastStartTagName=n}function QEe(t,e){const n=t.tagName.toLowerCase();if(!e.parser.tokenizer.inForeignNode&&lY.includes(n)||e.parser.tokenizer.state===Fr.PLAINTEXT)return;Vg(e,BY(t));const r={type:pn.END_TAG,tagName:n,tagID:zg(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:_v(t)};e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken),n===e.parser.tokenizer.lastStartTagName&&(e.parser.tokenizer.state===Fr.RCDATA||e.parser.tokenizer.state===Fr.RAWTEXT||e.parser.tokenizer.state===Fr.SCRIPT_DATA)&&(e.parser.tokenizer.state=Fr.DATA)}function eke(t){const e=t.type==="root"?t.children[0]:t;return!!(e&&(e.type==="doctype"||e.type==="element"&&e.tagName.toLowerCase()==="html"))}function _v(t){const e=Uf(t)||{line:void 0,column:void 0,offset:void 0},n=BY(t)||{line:void 0,column:void 0,offset:void 0};return{startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function tke(t){return"children"in t?mf({...t,children:[]}):mf(t)}function nke(t){return function(e,n){return WY(e,{...t,file:n})}}function pS(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}const rke=YY(/\p{P}|\p{S}/u),ike=YY(/\s/);function YY(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function ske(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const XY=function(t){if(t==null)return cke;if(typeof t=="function")return gk(t);if(typeof t=="object")return Array.isArray(t)?oke(t):ake(t);if(typeof t=="string")return lke(t);throw new Error("Expected function, string, or object as test")};function oke(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=XY(t[n]);return gk(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function ake(t){const e=t;return gk(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function lke(t){return gk(e);function e(n){return n&&n.type===t}}function gk(t){return e;function e(n,r,i){return!!(uke(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function cke(){return!0}function uke(t){return t!==null&&typeof t=="object"&&"type"in t}function hke(t,e,n){const i=XY((n||{}).ignore||[]),s=dke(e);let o=-1;for(;++o<s.length;)VY(t,"text",a);function a(c,u){let h=-1,d;for(;++h<u.length;){const f=u[h],m=d?d.children:void 0;if(i(f,m?m.indexOf(f):void 0,d))return;d=f}if(d)return l(c,u)}function l(c,u){const h=u[u.length-1],d=s[o][0],f=s[o][1];let m=0;const b=h.children.indexOf(c);let y=!1,v=[];d.lastIndex=0;let x=d.exec(c.value);for(;x;){const w=x.index,S={index:x.index,input:x.input,stack:[...u,c]};let E=f(...x,S);if(typeof E=="string"&&(E=E.length>0?{type:"text",value:E}:void 0),E===!1?d.lastIndex=w+1:(m!==w&&v.push({type:"text",value:c.value.slice(m,w)}),Array.isArray(E)?v.push(...E):E&&v.push(E),m=w+x[0].length,y=!0),!d.global)break;x=d.exec(c.value)}return y?(m<c.value.length&&v.push({type:"text",value:c.value.slice(m)}),h.children.splice(b,1,...v)):v=[c],b+v.length}}function dke(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([fke(i[0]),pke(i[1])])}return e}function fke(t){return typeof t=="string"?new RegExp(ske(t),"g"):t}function pke(t){return typeof t=="function"?t:function(){return t}}const JC="phrasing",QC=["autolink","link","image","label"];function mke(){return{transforms:[wke],enter:{literalAutolink:bke,literalAutolinkEmail:eT,literalAutolinkHttp:eT,literalAutolinkWww:eT},exit:{literalAutolink:_ke,literalAutolinkEmail:xke,literalAutolinkHttp:yke,literalAutolinkWww:vke}}}function gke(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:JC,notInConstruct:QC},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:JC,notInConstruct:QC},{character:":",before:"[ps]",after:"\\/",inConstruct:JC,notInConstruct:QC}]}}function bke(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function eT(t){this.config.enter.autolinkProtocol.call(this,t)}function yke(t){this.config.exit.autolinkProtocol.call(this,t)}function vke(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function xke(t){this.config.exit.autolinkEmail.call(this,t)}function _ke(t){this.exit(t)}function wke(t){hke(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Ske],[/(?<=^|\s|\p{P}|\p{S})([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/gu,Eke]],{ignore:["link","linkReference"]})}function Ske(t,e,n,r,i){let s="";if(!ZY(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!kke(n)))return!1;const o=Cke(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function Eke(t,e,n,r){return!ZY(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function kke(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function Cke(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=pS(t,"(");let s=pS(t,")");for(;r!==-1&&i>s;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[t,n]}function ZY(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||ike(n)||rke(n))&&(!e||n!==47)}function JY(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}QY.peek=Dke;function Tke(){this.buffer()}function Ake(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function Pke(){this.buffer()}function Nke(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Lke(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=JY(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Rke(t){this.exit(t)}function Ike(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=JY(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Oke(t){this.exit(t)}function Dke(){return"["}function QY(t,e,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),a(),o(),s+=i.move("]"),s}function Mke(){return{enter:{gfmFootnoteCallString:Tke,gfmFootnoteCall:Ake,gfmFootnoteDefinitionLabelString:Pke,gfmFootnoteDefinition:Nke},exit:{gfmFootnoteCallString:Lke,gfmFootnoteCall:Rke,gfmFootnoteDefinitionLabelString:Ike,gfmFootnoteDefinition:Oke}}}function jke(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:QY},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,o){const a=s.createTracker(o);let l=a.move("[^");const c=s.enter("footnoteDefinition"),u=s.enter("label");return l+=a.move(s.safe(s.associationId(r),{before:l,after:"]"})),u(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),e?eX:Fke))),c(),l}}function Fke(t,e,n){return e===0?t:eX(t,e,n)}function eX(t,e,n){return(n?"":"    ")+t}const Bke=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];tX.peek=Vke;function Uke(){return{canContainEols:["delete"],enter:{strikethrough:Hke},exit:{strikethrough:zke}}}function $ke(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Bke}],handlers:{delete:tX}}}function Hke(t){this.enter({type:"delete",children:[]},t)}function zke(t){this.exit(t)}function tX(t,e,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function Vke(){return"~"}function Wke(t){return t.length}function Gke(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||Wke,s=[],o=[],a=[],l=[];let c=0,u=-1;for(;++u<t.length;){const g=[],b=[];let y=-1;for(t[u].length>c&&(c=t[u].length);++y<t[u].length;){const v=qke(t[u][y]);if(n.alignDelimiters!==!1){const x=i(v);b[y]=x,(l[y]===void 0||x>l[y])&&(l[y]=x)}g.push(v)}o[u]=g,a[u]=b}let h=-1;if(typeof r=="object"&&"length"in r)for(;++h<c;)s[h]=oj(r[h]);else{const g=oj(r);for(;++h<c;)s[h]=g}h=-1;const d=[],f=[];for(;++h<c;){const g=s[h];let b="",y="";g===99?(b=":",y=":"):g===108?b=":":g===114&&(y=":");let v=n.alignDelimiters===!1?1:Math.max(1,l[h]-b.length-y.length);const x=b+"-".repeat(v)+y;n.alignDelimiters!==!1&&(v=b.length+v+y.length,v>l[h]&&(l[h]=v),f[h]=v),d[h]=x}o.splice(1,0,d),a.splice(1,0,f),u=-1;const m=[];for(;++u<o.length;){const g=o[u],b=a[u];h=-1;const y=[];for(;++h<c;){const v=g[h]||"";let x="",w="";if(n.alignDelimiters!==!1){const S=l[h]-(b[h]||0),E=s[h];E===114?x=" ".repeat(S):E===99?S%2?(x=" ".repeat(S/2+.5),w=" ".repeat(S/2-.5)):(x=" ".repeat(S/2),w=x):w=" ".repeat(S)}n.delimiterStart!==!1&&!h&&y.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&v==="")&&(n.delimiterStart!==!1||h)&&y.push(" "),n.alignDelimiters!==!1&&y.push(x),y.push(v),n.alignDelimiters!==!1&&y.push(w),n.padding!==!1&&y.push(" "),(n.delimiterEnd!==!1||h!==c-1)&&y.push("|")}m.push(n.delimiterEnd===!1?y.join("").replace(/ +$/,""):y.join(""))}return m.join(`
`)}function qke(t){return t==null?"":String(t)}function oj(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function Kke(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),Yke);return i(),o}function Yke(t,e,n){return">"+(n?"":" ")+t}function Xke(t,e){return aj(t,e.inConstruct,!0)&&!aj(t,e.notInConstruct,!1)}function aj(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function lj(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&Xke(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function nX(t,e){const n=String(t);let r=n.indexOf(e),i=r,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+e.length,r=n.indexOf(e,i);return o}function Zke(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function Jke(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function Qke(t,e,n,r){const i=Jke(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(Zke(t,n)){const h=n.enter("codeIndented"),d=n.indentLines(s,e5e);return h(),d}const a=n.createTracker(r),l=i.repeat(Math.max(nX(s,i)+1,3)),c=n.enter("codeFenced");let u=a.move(l);if(t.lang){const h=n.enter(`codeFencedLang${o}`);u+=a.move(n.safe(t.lang,{before:u,after:" ",encode:["`"],...a.current()})),h()}if(t.lang&&t.meta){const h=n.enter(`codeFencedMeta${o}`);u+=a.move(" "),u+=a.move(n.safe(t.meta,{before:u,after:`
`,encode:["`"],...a.current()})),h()}return u+=a.move(`
`),s&&(u+=a.move(s+`
`)),u+=a.move(l),c(),u}function e5e(t,e,n){return(n?"":"    ")+t}function YR(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function t5e(t,e,n,r){const i=YR(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),o(),c}function n5e(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function ly(t){return"&#x"+t.toString(16).toUpperCase()+";"}function r5e(t){return t!==null&&(t<0||t===32)}const i5e=rX(/\p{P}|\p{S}/u),s5e=rX(/\s/);function rX(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function cj(t){if(t===null||r5e(t)||s5e(t))return 1;if(i5e(t))return 2}function mS(t,e,n){const r=cj(t),i=cj(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}iX.peek=o5e;function iX(t,e,n,r){const i=n5e(n),s=n.enter("emphasis"),o=n.createTracker(r),a=o.move(i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),u=mS(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=ly(c)+l.slice(1));const h=l.charCodeAt(l.length-1),d=mS(r.after.charCodeAt(0),h,i);d.inside&&(l=l.slice(0,-1)+ly(h));const f=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:d.outside,before:u.outside},a+l+f}function o5e(t,e,n){return n.options.emphasis||"*"}const a5e={};function sX(t,e){const n=a5e,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return oX(t,r,i)}function oX(t,e,n){if(l5e(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return uj(t.children,e,n)}return Array.isArray(t)?uj(t,e,n):""}function uj(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=oX(t[i],e,n);return r.join("")}function l5e(t){return!!(t&&typeof t=="object")}function c5e(t,e){let n=!1;return $f(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,fS}),!!((!t.depth||t.depth<3)&&sX(t)&&(e.options.setext||n))}function u5e(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(c5e(t,n)){const u=n.enter("headingSetext"),h=n.enter("phrasing"),d=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return h(),u(),d+`
`+(i===1?"=":"-").repeat(d.length-(Math.max(d.lastIndexOf("\r"),d.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=n.enter("headingAtx"),l=n.enter("phrasing");s.move(o+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c=ly(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),l(),a(),c}aX.peek=h5e;function aX(t){return t.value||""}function h5e(){return"<"}lX.peek=d5e;function lX(t,e,n,r){const i=YR(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),c+=l.move(")"),o(),c}function d5e(){return"!"}cX.peek=f5e;function cX(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function f5e(){return"!"}uX.peek=p5e;function uX(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return i+r+i}function p5e(){return"`"}function hX(t,e){const n=sX(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}dX.peek=m5e;function dX(t,e,n,r){const i=YR(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if(hX(t,n)){const u=n.stack;n.stack=[],a=n.enter("autolink");let h=o.move("<");return h+=o.move(n.containerPhrasing(t,{before:h,after:">",...o.current()})),h+=o.move(">"),a(),n.stack=u,h}a=n.enter("link"),l=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=n.enter("destinationRaw"),c+=o.move(n.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${s}`),c+=o.move(" "+i),c+=o.move(n.safe(t.title,{before:c,after:i,...o.current()})),c+=o.move(i),l()),c+=o.move(")"),a(),c}function m5e(t,e,n){return hX(t,n)?"<":"["}fX.peek=g5e;function fX(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function g5e(){return"["}function XR(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function b5e(t){const e=XR(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function y5e(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function pX(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function v5e(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?y5e(n):XR(n);const a=t.ordered?o==="."?")":".":b5e(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const u=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),pX(n)===o&&u){let h=-1;for(;++h<t.children.length;){const d=t.children[h];if(d&&d.type==="listItem"&&d.children&&d.children[0]&&d.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const c=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),c}function x5e(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function _5e(t,e,n,r){const i=x5e(n);let s=n.bulletCurrent||XR(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,a.current()),u);return l(),c;function u(h,d,f){return d?(f?"":" ".repeat(o))+h:(f?s:s+" ".repeat(o-s.length))+h}}function w5e(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,r);return s(),i(),o}const mX=function(t){if(t==null)return C5e;if(typeof t=="function")return bk(t);if(typeof t=="object")return Array.isArray(t)?S5e(t):E5e(t);if(typeof t=="string")return k5e(t);throw new Error("Expected function, string, or object as test")};function S5e(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=mX(t[n]);return bk(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function E5e(t){const e=t;return bk(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function k5e(t){return bk(e);function e(n){return n&&n.type===t}}function bk(t){return e;function e(n,r,i){return!!(T5e(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function C5e(){return!0}function T5e(t){return t!==null&&typeof t=="object"&&"type"in t}const A5e=mX(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function P5e(t,e,n,r){return(t.children.some(function(o){return A5e(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function N5e(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}gX.peek=L5e;function gX(t,e,n,r){const i=N5e(n),s=n.enter("strong"),o=n.createTracker(r),a=o.move(i+i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),u=mS(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=ly(c)+l.slice(1));const h=l.charCodeAt(l.length-1),d=mS(r.after.charCodeAt(0),h,i);d.inside&&(l=l.slice(0,-1)+ly(h));const f=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:d.outside,before:u.outside},a+l+f}function L5e(t,e,n){return n.options.strong||"*"}function R5e(t,e,n,r){return n.safe(t.value,r)}function I5e(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function O5e(t,e,n){const r=(pX(n)+(n.options.ruleSpaces?" ":"")).repeat(I5e(n));return n.options.ruleSpaces?r.slice(0,-1):r}const D5e={blockquote:Kke,break:lj,code:Qke,definition:t5e,emphasis:iX,hardBreak:lj,heading:u5e,html:aX,image:lX,imageReference:cX,inlineCode:uX,link:dX,linkReference:fX,list:v5e,listItem:_5e,paragraph:w5e,root:P5e,strong:gX,text:R5e,thematicBreak:O5e},hj=document.createElement("i");function ZR(t){const e="&"+t+";";hj.innerHTML=e;const n=hj.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function M5e(){return{enter:{table:j5e,tableData:dj,tableHeader:dj,tableRow:B5e},exit:{codeText:U5e,table:F5e,tableData:tT,tableHeader:tT,tableRow:tT}}}function j5e(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function F5e(t){this.exit(t),this.data.inTable=void 0}function B5e(t){this.enter({type:"tableRow",children:[]},t)}function tT(t){this.exit(t)}function dj(t){this.enter({type:"tableCell",children:[]},t)}function U5e(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,$5e));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function $5e(t,e){return e==="|"?e:t}function H5e(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:d,table:o,tableCell:l,tableRow:a}};function o(f,m,g,b){return c(u(f,g,b),f.align)}function a(f,m,g,b){const y=h(f,g,b),v=c([y]);return v.slice(0,v.indexOf(`
`))}function l(f,m,g,b){const y=g.enter("tableCell"),v=g.enter("phrasing"),x=g.containerPhrasing(f,{...b,before:s,after:s});return v(),y(),x}function c(f,m){return Gke(f,{align:m,alignDelimiters:r,padding:n,stringLength:i})}function u(f,m,g){const b=f.children;let y=-1;const v=[],x=m.enter("table");for(;++y<b.length;)v[y]=h(b[y],m,g);return x(),v}function h(f,m,g){const b=f.children;let y=-1;const v=[],x=m.enter("tableRow");for(;++y<b.length;)v[y]=l(b[y],f,m,g);return x(),v}function d(f,m,g){let b=D5e.inlineCode(f,m,g);return g.stack.includes("tableCell")&&(b=b.replace(/\|/g,"\\$&")),b}}function z5e(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),V5e);return i(),o}function V5e(t,e,n){return">"+(n?"":" ")+t}function W5e(t,e){return fj(t,e.inConstruct,!0)&&!fj(t,e.notInConstruct,!1)}function fj(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function pj(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&W5e(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function G5e(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function q5e(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function K5e(t,e,n,r){const i=q5e(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(G5e(t,n)){const h=n.enter("codeIndented"),d=n.indentLines(s,Y5e);return h(),d}const a=n.createTracker(r),l=i.repeat(Math.max(nX(s,i)+1,3)),c=n.enter("codeFenced");let u=a.move(l);if(t.lang){const h=n.enter(`codeFencedLang${o}`);u+=a.move(n.safe(t.lang,{before:u,after:" ",encode:["`"],...a.current()})),h()}if(t.lang&&t.meta){const h=n.enter(`codeFencedMeta${o}`);u+=a.move(" "),u+=a.move(n.safe(t.meta,{before:u,after:`
`,encode:["`"],...a.current()})),h()}return u+=a.move(`
`),s&&(u+=a.move(s+`
`)),u+=a.move(l),c(),u}function Y5e(t,e,n){return(n?"":"    ")+t}function JR(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function X5e(t,e,n,r){const i=JR(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),o(),c}function Z5e(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function cy(t){return"&#x"+t.toString(16).toUpperCase()+";"}function J5e(t){return t!==null&&(t<0||t===32)}const Q5e=bX(/\p{P}|\p{S}/u),eCe=bX(/\s/);function bX(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function mj(t){if(t===null||J5e(t)||eCe(t))return 1;if(Q5e(t))return 2}function gS(t,e,n){const r=mj(t),i=mj(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}yX.peek=tCe;function yX(t,e,n,r){const i=Z5e(n),s=n.enter("emphasis"),o=n.createTracker(r),a=o.move(i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),u=gS(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=cy(c)+l.slice(1));const h=l.charCodeAt(l.length-1),d=gS(r.after.charCodeAt(0),h,i);d.inside&&(l=l.slice(0,-1)+cy(h));const f=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:d.outside,before:u.outside},a+l+f}function tCe(t,e,n){return n.options.emphasis||"*"}const nCe={};function vX(t,e){const n=nCe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return xX(t,r,i)}function xX(t,e,n){if(rCe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return gj(t.children,e,n)}return Array.isArray(t)?gj(t,e,n):""}function gj(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=xX(t[i],e,n);return r.join("")}function rCe(t){return!!(t&&typeof t=="object")}function iCe(t,e){let n=!1;return $f(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,fS}),!!((!t.depth||t.depth<3)&&vX(t)&&(e.options.setext||n))}function sCe(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(iCe(t,n)){const u=n.enter("headingSetext"),h=n.enter("phrasing"),d=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return h(),u(),d+`
`+(i===1?"=":"-").repeat(d.length-(Math.max(d.lastIndexOf("\r"),d.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=n.enter("headingAtx"),l=n.enter("phrasing");s.move(o+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c=cy(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),l(),a(),c}_X.peek=oCe;function _X(t){return t.value||""}function oCe(){return"<"}wX.peek=aCe;function wX(t,e,n,r){const i=JR(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),c+=l.move(")"),o(),c}function aCe(){return"!"}SX.peek=lCe;function SX(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function lCe(){return"!"}EX.peek=cCe;function EX(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return i+r+i}function cCe(){return"`"}function kX(t,e){const n=vX(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}CX.peek=uCe;function CX(t,e,n,r){const i=JR(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if(kX(t,n)){const u=n.stack;n.stack=[],a=n.enter("autolink");let h=o.move("<");return h+=o.move(n.containerPhrasing(t,{before:h,after:">",...o.current()})),h+=o.move(">"),a(),n.stack=u,h}a=n.enter("link"),l=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=n.enter("destinationRaw"),c+=o.move(n.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${s}`),c+=o.move(" "+i),c+=o.move(n.safe(t.title,{before:c,after:i,...o.current()})),c+=o.move(i),l()),c+=o.move(")"),a(),c}function uCe(t,e,n){return kX(t,n)?"<":"["}TX.peek=hCe;function TX(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function hCe(){return"["}function QR(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function dCe(t){const e=QR(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function fCe(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function AX(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function pCe(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?fCe(n):QR(n);const a=t.ordered?o==="."?")":".":dCe(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const u=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),AX(n)===o&&u){let h=-1;for(;++h<t.children.length;){const d=t.children[h];if(d&&d.type==="listItem"&&d.children&&d.children[0]&&d.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const c=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),c}function mCe(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function gCe(t,e,n,r){const i=mCe(n);let s=n.bulletCurrent||QR(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,a.current()),u);return l(),c;function u(h,d,f){return d?(f?"":" ".repeat(o))+h:(f?s:s+" ".repeat(o-s.length))+h}}function bCe(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,r);return s(),i(),o}const PX=function(t){if(t==null)return _Ce;if(typeof t=="function")return yk(t);if(typeof t=="object")return Array.isArray(t)?yCe(t):vCe(t);if(typeof t=="string")return xCe(t);throw new Error("Expected function, string, or object as test")};function yCe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=PX(t[n]);return yk(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function vCe(t){const e=t;return yk(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function xCe(t){return yk(e);function e(n){return n&&n.type===t}}function yk(t){return e;function e(n,r,i){return!!(wCe(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function _Ce(){return!0}function wCe(t){return t!==null&&typeof t=="object"&&"type"in t}const SCe=PX(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function ECe(t,e,n,r){return(t.children.some(function(o){return SCe(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function kCe(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}NX.peek=CCe;function NX(t,e,n,r){const i=kCe(n),s=n.enter("strong"),o=n.createTracker(r),a=o.move(i+i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),u=gS(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=cy(c)+l.slice(1));const h=l.charCodeAt(l.length-1),d=gS(r.after.charCodeAt(0),h,i);d.inside&&(l=l.slice(0,-1)+cy(h));const f=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:d.outside,before:u.outside},a+l+f}function CCe(t,e,n){return n.options.strong||"*"}function TCe(t,e,n,r){return n.safe(t.value,r)}function ACe(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function PCe(t,e,n){const r=(AX(n)+(n.options.ruleSpaces?" ":"")).repeat(ACe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const NCe={blockquote:z5e,break:pj,code:K5e,definition:X5e,emphasis:yX,hardBreak:pj,heading:sCe,html:_X,image:wX,imageReference:SX,inlineCode:EX,link:CX,linkReference:TX,list:pCe,listItem:gCe,paragraph:bCe,root:ECe,strong:NX,text:TCe,thematicBreak:PCe};function LCe(){return{exit:{taskListCheckValueChecked:bj,taskListCheckValueUnchecked:bj,paragraph:ICe}}}function RCe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:OCe}}}function bj(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function ICe(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function OCe(t,e,n,r){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(o);let l=NCe.listItem(t,e,n,{...r,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+o}}function DCe(){return[mke(),Mke(),Uke(),M5e(),LCe()]}function MCe(t){return{extensions:[gke(),jke(t),$ke(),H5e(t),RCe()]}}function jCe(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}const yj={}.hasOwnProperty;function FCe(t){const e={};let n=-1;for(;++n<t.length;)BCe(e,t[n]);return e}function BCe(t,e){let n;for(n in e){const i=(yj.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){yj.call(i,o)||(i[o]=[]);const a=s[o];UCe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function UCe(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);jCe(t,0,0,r)}const uy=vk(/[A-Za-z]/),eI=vk(/[\dA-Za-z]/);function $Ce(t){return t!==null&&(t<32||t===127)}function ig(t){return t!==null&&(t<0||t===32)}const LX=vk(/\p{P}|\p{S}/u),hy=vk(/\s/);function vk(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}const HCe={tokenize:KCe,partial:!0},RX={tokenize:YCe,partial:!0},IX={tokenize:XCe,partial:!0},OX={tokenize:ZCe,partial:!0},zCe={tokenize:JCe,partial:!0},DX={name:"wwwAutolink",tokenize:GCe,previous:jX},MX={name:"protocolAutolink",tokenize:qCe,previous:FX},au={name:"emailAutolink",tokenize:WCe,previous:BX},sc={};function VCe(){return{text:sc}}let ed=48;for(;ed<123;)sc[ed]=au,ed++,ed===58?ed=65:ed===91&&(ed=97);sc[43]=au;sc[45]=au;sc[46]=au;sc[95]=au;sc[72]=[au,MX];sc[104]=[au,MX];sc[87]=[au,DX];sc[119]=[au,DX];function WCe(t,e,n){const r=this;let i,s;return o;function o(h){return!yP(h)||!BX.call(r,r.previous)||tI(r.events)?n(h):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(h))}function a(h){return yP(h)?(t.consume(h),a):h===64?(t.consume(h),l):n(h)}function l(h){return h===46?t.check(zCe,u,c)(h):h===45||h===95||eI(h)?(s=!0,t.consume(h),l):u(h)}function c(h){return t.consume(h),i=!0,l}function u(h){return s&&i&&uy(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(h)):n(h)}}function GCe(t,e,n){const r=this;return i;function i(o){return o!==87&&o!==119||!jX.call(r,r.previous)||tI(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(HCe,t.attempt(RX,t.attempt(IX,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function qCe(t,e,n){const r=this;let i="",s=!1;return o;function o(h){return(h===72||h===104)&&FX.call(r,r.previous)&&!tI(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(h),t.consume(h),a):n(h)}function a(h){if(uy(h)&&i.length<5)return i+=String.fromCodePoint(h),t.consume(h),a;if(h===58){const d=i.toLowerCase();if(d==="http"||d==="https")return t.consume(h),l}return n(h)}function l(h){return h===47?(t.consume(h),s?c:(s=!0,l)):n(h)}function c(h){return h===null||$Ce(h)||ig(h)||hy(h)||LX(h)?n(h):t.attempt(RX,t.attempt(IX,u),n)(h)}function u(h){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(h)}}function KCe(t,e,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),i):o===46&&r===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function YCe(t,e,n){let r,i,s;return o;function o(c){return c===46||c===95?t.check(OX,l,a)(c):c===null||ig(c)||hy(c)||c!==45&&LX(c)?l(c):(s=!0,t.consume(c),o)}function a(c){return c===95?r=!0:(i=r,r=void 0),t.consume(c),o}function l(c){return i||r||!s?n(c):e(c)}}function XCe(t,e){let n=0,r=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(OX,e,s)(o):o===null||ig(o)||hy(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&r++,t.consume(o),i}}function ZCe(t,e,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),r):a===38?(t.consume(a),s):a===93?(t.consume(a),i):a===60||a===null||ig(a)||hy(a)?e(a):n(a)}function i(a){return a===null||a===40||a===91||ig(a)||hy(a)?e(a):r(a)}function s(a){return uy(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),r):uy(a)?(t.consume(a),o):n(a)}}function JCe(t,e,n){return r;function r(s){return t.consume(s),i}function i(s){return eI(s)?n(s):e(s)}}function jX(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||ig(t)}function FX(t){return!uy(t)}function BX(t){return!(t===47||yP(t))}function yP(t){return t===43||t===45||t===46||t===95||eI(t)}function tI(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}function QCe(t){return t!==null&&t<-2}function bS(t){return t!==null&&(t<0||t===32)}function vP(t){return t===-2||t===-1||t===32}function nI(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return vP(l)?(t.enter(n),a(l)):e(l)}function a(l){return vP(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const eTe={partial:!0,tokenize:tTe};function tTe(t,e,n){return r;function r(s){return vP(s)?nI(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||QCe(s)?e(s):n(s)}}function rI(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const nTe={tokenize:uTe,partial:!0};function rTe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:aTe,continuation:{tokenize:lTe},exit:cTe}},text:{91:{name:"gfmFootnoteCall",tokenize:oTe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:iTe,resolveTo:sTe}}}}function iTe(t,e,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return n(l);const c=rI(r.sliceSerialize({start:o.end,end:r.now()}));return c.codePointAt(0)!==94||!s.includes(c.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function sTe(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...a),t}function oTe(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return a;function a(h){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),l}function l(h){return h!==94?n(h):(t.enter("gfmFootnoteCallMarker"),t.consume(h),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(h){if(s>999||h===93&&!o||h===null||h===91||bS(h))return n(h);if(h===93){t.exit("chunkString");const d=t.exit("gfmFootnoteCallString");return i.includes(rI(r.sliceSerialize(d)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(h)}return bS(h)||(o=!0),s++,t.consume(h),h===92?u:c}function u(h){return h===91||h===92||h===93?(t.consume(h),s++,c):c(h)}}function aTe(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,a;return l;function l(m){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(m){return m===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",u):n(m)}function u(m){if(o>999||m===93&&!a||m===null||m===91||bS(m))return n(m);if(m===93){t.exit("chunkString");const g=t.exit("gfmFootnoteDefinitionLabelString");return s=rI(r.sliceSerialize(g)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),d}return bS(m)||(a=!0),o++,t.consume(m),m===92?h:u}function h(m){return m===91||m===92||m===93?(t.consume(m),o++,u):u(m)}function d(m){return m===58?(t.enter("definitionMarker"),t.consume(m),t.exit("definitionMarker"),i.includes(s)||i.push(s),nI(t,f,"gfmFootnoteDefinitionWhitespace")):n(m)}function f(m){return e(m)}}function lTe(t,e,n){return t.check(eTe,e,t.attempt(nTe,e,n))}function cTe(t){t.exit("gfmFootnoteDefinition")}function uTe(t,e,n){const r=this;return nI(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function nT(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function hTe(t){return t!==null&&(t<0||t===32)}const dTe=UX(/\p{P}|\p{S}/u),fTe=UX(/\s/);function UX(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function vj(t){if(t===null||hTe(t)||fTe(t))return 1;if(dTe(t))return 2}function pTe(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}function mTe(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let c=l;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[l][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[l][1].end)},h={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[l][1].start)},d=[["enter",u,a],["enter",o[c][1],a],["exit",o[c][1],a],["enter",h,a]],f=a.parser.constructs.insideSpan.null;f&&nT(d,d.length,0,pTe(f,o.slice(c+1,l),a)),nT(d,d.length,0,[["exit",h,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",u,a]]),nT(o,c-1,l-c+3,d),l=c+d.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function s(o,a,l){const c=this.previous,u=this.events;let h=0;return d;function d(m){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(m):(o.enter("strikethroughSequenceTemporary"),f(m))}function f(m){const g=vj(c);if(m===126)return h>1?l(m):(o.consume(m),h++,f);if(h<2&&!n)return l(m);const b=o.exit("strikethroughSequenceTemporary"),y=vj(m);return b._open=!y||y===2&&!!g,b._close=!g||g===2&&!!y,a(m)}}}function C_(t){return t!==null&&t<-2}function xj(t){return t!==null&&(t<0||t===32)}function vd(t){return t===-2||t===-1||t===32}function Z0(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return vd(l)?(t.enter(n),a(l)):e(l)}function a(l){return vd(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}class gTe{constructor(){this.map=[]}add(e,n,r){bTe(this,e,n,r)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const s of i)e.push(s);i=r.pop()}this.map.length=0}}function bTe(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function yTe(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function vTe(){return{flow:{null:{name:"table",tokenize:xTe,resolveAll:_Te}}}}function xTe(t,e,n){const r=this;let i=0,s=0,o;return a;function a(R){let C=r.events.length-1;for(;C>-1;){const N=r.events[C][1].type;if(N==="lineEnding"||N==="linePrefix")C--;else break}const P=C>-1?r.events[C][1].type:null,O=P==="tableHead"||P==="tableRow"?E:l;return O===E&&r.parser.lazy[r.now().line]?n(R):O(R)}function l(R){return t.enter("tableHead"),t.enter("tableRow"),c(R)}function c(R){return R===124||(o=!0,s+=1),u(R)}function u(R){return R===null?n(R):C_(R)?s>1?(s=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(R),t.exit("lineEnding"),f):n(R):vd(R)?Z0(t,u,"whitespace")(R):(s+=1,o&&(o=!1,i+=1),R===124?(t.enter("tableCellDivider"),t.consume(R),t.exit("tableCellDivider"),o=!0,u):(t.enter("data"),h(R)))}function h(R){return R===null||R===124||xj(R)?(t.exit("data"),u(R)):(t.consume(R),R===92?d:h)}function d(R){return R===92||R===124?(t.consume(R),h):h(R)}function f(R){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(R):(t.enter("tableDelimiterRow"),o=!1,vd(R)?Z0(t,m,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(R):m(R))}function m(R){return R===45||R===58?b(R):R===124?(o=!0,t.enter("tableCellDivider"),t.consume(R),t.exit("tableCellDivider"),g):S(R)}function g(R){return vd(R)?Z0(t,b,"whitespace")(R):b(R)}function b(R){return R===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(R),t.exit("tableDelimiterMarker"),y):R===45?(s+=1,y(R)):R===null||C_(R)?w(R):S(R)}function y(R){return R===45?(t.enter("tableDelimiterFiller"),v(R)):S(R)}function v(R){return R===45?(t.consume(R),v):R===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(R),t.exit("tableDelimiterMarker"),x):(t.exit("tableDelimiterFiller"),x(R))}function x(R){return vd(R)?Z0(t,w,"whitespace")(R):w(R)}function w(R){return R===124?m(R):R===null||C_(R)?!o||i!==s?S(R):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(R)):S(R)}function S(R){return n(R)}function E(R){return t.enter("tableRow"),k(R)}function k(R){return R===124?(t.enter("tableCellDivider"),t.consume(R),t.exit("tableCellDivider"),k):R===null||C_(R)?(t.exit("tableRow"),e(R)):vd(R)?Z0(t,k,"whitespace")(R):(t.enter("data"),_(R))}function _(R){return R===null||R===124||xj(R)?(t.exit("data"),k(R)):(t.consume(R),R===92?L:_)}function L(R){return R===92||R===124?(t.consume(R),_):_(R)}}function _Te(t,e){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,c,u,h;const d=new gTe;for(;++n<t.length;){const f=t[n],m=f[1];f[0]==="enter"?m.type==="tableHead"?(a=!1,l!==0&&(_j(d,e,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},m.start),end:Object.assign({},m.end)},d.add(n,0,[["enter",c,e]])):m.type==="tableRow"||m.type==="tableDelimiterRow"?(r=!0,h=void 0,s=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,u={type:"tableBody",start:Object.assign({},m.start),end:Object.assign({},m.end)},d.add(n,0,[["enter",u,e]])),i=m.type==="tableDelimiterRow"?2:u?3:1):i&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],h=T_(d,e,s,i,void 0,h),s=[0,0,0,0]),o[2]=n)):m.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],h=T_(d,e,s,i,void 0,h)),s=o,o=[s[1],n,0,0])):m.type==="tableHead"?(a=!0,l=n):m.type==="tableRow"||m.type==="tableDelimiterRow"?(l=n,s[1]!==0?(o[0]=o[1],h=T_(d,e,s,i,n,h)):o[1]!==0&&(h=T_(d,e,o,i,n,h)),i=0):i&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&_j(d,e,l,c,u),d.consume(e.events),n=-1;++n<e.events.length;){const f=e.events[n];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=yTe(e.events,n))}return t}function T_(t,e,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},Gp(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const l=Gp(e.events,n[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const c=Gp(e.events,n[2]),u=Gp(e.events,n[3]),h={type:a,start:Object.assign({},c),end:Object.assign({},u)};if(t.add(n[2],0,[["enter",h,e]]),r!==2){const d=e.events[n[2]],f=e.events[n[3]];if(d[1].end=Object.assign({},f[1].end),d[1].type="chunkText",d[1].contentType="text",n[3]>n[2]+1){const m=n[2]+1,g=n[3]-n[2]-1;t.add(m,g,[])}}t.add(n[3]+1,0,[["exit",h,e]])}return i!==void 0&&(s.end=Object.assign({},Gp(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function _j(t,e,n,r,i){const s=[],o=Gp(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),r.end=Object.assign({},o),s.push(["exit",r,e]),t.add(n+1,0,s)}function Gp(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}function wTe(t){return t!==null&&t<-2}function STe(t){return t!==null&&(t<0||t===32)}function xP(t){return t===-2||t===-1||t===32}function ETe(t,e,n,r){const i=Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return xP(l)?(t.enter(n),a(l)):e(l)}function a(l){return xP(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const kTe={name:"tasklistCheck",tokenize:TTe};function CTe(){return{text:{91:kTe}}}function TTe(t,e,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),s)}function s(l){return STe(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(l)}function a(l){return wTe(l)?e(l):xP(l)?t.check({tokenize:ATe},e,n)(l):n(l)}}function ATe(t,e,n){return ETe(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function PTe(t){return FCe([VCe(),rTe(),mTe(t),vTe(),CTe()])}const NTe={};function LTe(t){const e=this,n=t||NTe,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(PTe(n)),s.push(DCe()),o.push(MCe(n))}const RTe=$X("end"),ITe=$X("start");function $X(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function OTe(t){const e=ITe(t),n=RTe(t);if(e&&n)return{start:e,end:n}}const td=["ariaDescribedBy","ariaLabel","ariaLabelledBy"],c1={ancestors:{tbody:["table"],td:["table"],th:["table"],thead:["table"],tfoot:["table"],tr:["table"]},attributes:{a:[...td,"dataFootnoteBackref","dataFootnoteRef",["className","data-footnote-backref"],"href"],blockquote:["cite"],code:[["className",/^language-./]],del:["cite"],div:["itemScope","itemType"],dl:[...td],h2:[["className","sr-only"]],img:[...td,"longDesc","src"],input:[["disabled",!0],["type","checkbox"]],ins:["cite"],li:[["className","task-list-item"]],ol:[...td,["className","contains-task-list"]],q:["cite"],section:["dataFootnotes",["className","footnotes"]],source:["srcSet"],summary:[...td],table:[...td],ul:[...td,["className","contains-task-list"]],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","colSpan","color","cols","compact","coords","dateTime","dir","encType","frame","hSpace","headers","height","hrefLang","htmlFor","id","isMap","itemProp","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rev","rowSpan","rows","rules","scope","selected","shape","size","span","start","summary","tabIndex","title","useMap","vAlign","value","width"]},clobber:["ariaDescribedBy","ariaLabelledBy","id","name"],clobberPrefix:"user-content-",protocols:{cite:["http","https"],href:["http","https","irc","ircs","mailto","xmpp"],longDesc:["http","https"],src:["http","https"]},required:{input:{disabled:!0,type:"checkbox"}},strip:["script"],tagNames:["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","li","ol","p","picture","pre","q","rp","rt","ruby","s","samp","section","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","tt","ul","var"]},Uu={}.hasOwnProperty;function DTe(t,e){let n={type:"root",children:[]};const r={schema:e?{...c1,...e}:c1,stack:[]},i=HX(r,t);return i&&(Array.isArray(i)?i.length===1?n=i[0]:n.children=i:n=i),n}function HX(t,e){if(e&&typeof e=="object"){const n=e;switch(typeof n.type=="string"?n.type:""){case"comment":return MTe(t,n);case"doctype":return jTe(t,n);case"element":return FTe(t,n);case"root":return BTe(t,n);case"text":return UTe(t,n)}}}function MTe(t,e){if(t.schema.allowComments){const n=typeof e.value=="string"?e.value:"",r=n.indexOf("-->"),s={type:"comment",value:r<0?n:n.slice(0,r)};return wv(s,e),s}}function jTe(t,e){if(t.schema.allowDoctypes){const n={type:"doctype"};return wv(n,e),n}}function FTe(t,e){const n=typeof e.tagName=="string"?e.tagName:"";t.stack.push(n);const r=zX(t,e.children),i=$Te(t,e.properties);t.stack.pop();let s=!1;if(n&&n!=="*"&&(!t.schema.tagNames||t.schema.tagNames.includes(n))&&(s=!0,t.schema.ancestors&&Uu.call(t.schema.ancestors,n))){const a=t.schema.ancestors[n];let l=-1;for(s=!1;++l<a.length;)t.stack.includes(a[l])&&(s=!0)}if(!s)return t.schema.strip&&!t.schema.strip.includes(n)?r:void 0;const o={type:"element",tagName:n,properties:i,children:r};return wv(o,e),o}function BTe(t,e){const r={type:"root",children:zX(t,e.children)};return wv(r,e),r}function UTe(t,e){const r={type:"text",value:typeof e.value=="string"?e.value:""};return wv(r,e),r}function zX(t,e){const n=[];if(Array.isArray(e)){const r=e;let i=-1;for(;++i<r.length;){const s=HX(t,r[i]);s&&(Array.isArray(s)?n.push(...s):n.push(s))}}return n}function $Te(t,e){const n=t.stack[t.stack.length-1],r=t.schema.attributes,i=t.schema.required,s=r&&Uu.call(r,n)?r[n]:void 0,o=r&&Uu.call(r,"*")?r["*"]:void 0,a=e&&typeof e=="object"?e:{},l={};let c;for(c in a)if(Uu.call(a,c)){const u=a[c];let h=wj(t,Sj(s,c),c,u);h==null&&(h=wj(t,Sj(o,c),c,u)),h!=null&&(l[c]=h)}if(i&&Uu.call(i,n)){const u=i[n];for(c in u)Uu.call(u,c)&&!Uu.call(l,c)&&(l[c]=u[c])}return l}function wj(t,e,n,r){return e?Array.isArray(r)?HTe(t,e,n,r):VX(t,e,n,r):void 0}function HTe(t,e,n,r){let i=-1;const s=[];for(;++i<r.length;){const o=VX(t,e,n,r[i]);(typeof o=="number"||typeof o=="string")&&s.push(o)}return s}function VX(t,e,n,r){if(!(typeof r!="boolean"&&typeof r!="number"&&typeof r!="string")&&zTe(t,n,r)){if(typeof e=="object"&&e.length>1){let i=!1,s=0;for(;++s<e.length;){const o=e[s];if(o&&typeof o=="object"&&"flags"in o){if(o.test(String(r))){i=!0;break}}else if(o===r){i=!0;break}}if(!i)return}return t.schema.clobber&&t.schema.clobberPrefix&&t.schema.clobber.includes(n)?t.schema.clobberPrefix+r:r}}function zTe(t,e,n){const r=t.schema.protocols&&Uu.call(t.schema.protocols,e)?t.schema.protocols[e]:void 0;if(!r||r.length===0)return!0;const i=String(n),s=i.indexOf(":"),o=i.indexOf("?"),a=i.indexOf("#"),l=i.indexOf("/");if(s<0||l>-1&&s>l||o>-1&&s>o||a>-1&&s>a)return!0;let c=-1;for(;++c<r.length;){const u=r[c];if(s===u.length&&i.slice(0,u.length)===u)return!0}return!1}function wv(t,e){const n=OTe(e);e.data&&(t.data=mf(e.data)),n&&(t.position=n)}function Sj(t,e){let n,r=-1;if(t)for(;++r<t.length;){const i=t[r],s=typeof i=="string"?i:i[0];if(s===e)return i;s==="data*"&&(n=i)}if(e.length>4&&e.slice(0,4).toLowerCase()==="data")return n}function VTe(t){return function(e){return DTe(e,t)}}const iI=["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","ins","kbd","li","ol","p","pre","q","rp","rt","ruby","s","samp","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","ul","var","think"];function WTe(){return t=>{$f(t,e=>{if(e.type==="html"&&e.value&&e.value.startsWith("<think>")){const n=e.value.slice(7);e.value=`<div class="__boltThought__">${n}`;return}if(e.type==="html"&&e.value&&e.value.startsWith("</think>")){const n=e.value.slice(8);e.value=`</div>${n}`}})}}const GTe={...c1,tagNames:iI,attributes:{...c1.attributes,div:[...c1.attributes?.div??[],"data*",["className","__boltArtifact__","__boltThought__"]]},strip:[]};function qTe(t){const e=[LTe];return t&&e.unshift(YTe),e.unshift(WTe),e}function KTe(t){const e=[];return t&&e.push(nke,[VTe,GTe]),e}const YTe=()=>(t,e)=>{const n=e.toString();$f(t,(r,i,s)=>{if(i==null||["paragraph","text","inlineCode","code","strong","emphasis"].includes(r.type)||!r.position)return!0;let o=n.slice(r.position.start.offset,r.position.end.offset);return r.type==="heading"&&(o=`
${o}`),s.children[i]={type:"text",value:o},[zY,i]})},XTe=(t=Kc)=>`
You are Ada, an expert AI assistant and exceptional senior software developer with vast knowledge across multiple programming languages, frameworks, and best practices.

<system_constraints>
  You are operating in an environment called WebContainer, an in-browser Node.js runtime that emulates a Linux system to some degree. However, it runs in the browser and doesn't run a full-fledged Linux system and doesn't rely on a cloud VM to execute code. All code is executed in the browser. It does come with a shell that emulates zsh. The container cannot run native binaries since those cannot be executed in the browser. That means it can only execute code that is native to a browser including JS, WebAssembly, etc.

  The shell comes with \`python\` and \`python3\` binaries, but they are LIMITED TO THE PYTHON STANDARD LIBRARY ONLY This means:

    - There is NO \`pip\` support! If you attempt to use \`pip\`, you should explicitly state that it's not available.
    - CRITICAL: Third-party libraries cannot be installed or imported.
    - Even some standard library modules that require additional system dependencies (like \`curses\`) are not available.
    - Only modules from the core Python standard library can be used.

  Additionally, there is no \`g++\` or any C/C++ compiler available. WebContainer CANNOT run native binaries or compile C/C++ code!

  Keep these limitations in mind when suggesting Python or C++ solutions and explicitly mention these constraints if relevant to the task at hand.

  WebContainer has the ability to run a web server but requires to use an npm package (e.g., Vite, servor, serve, http-server) or use the Node.js APIs to implement a web server.

  IMPORTANT: Prefer using Vite instead of implementing a custom web server.

  IMPORTANT: Git is NOT available.

  IMPORTANT: ALWAYS thoroughly review React or Vite projects before running them to ensure all required files are present and properly configured.

  IMPORTANT: WebContainer CANNOT execute diff or patch editing so always write your code in full no partial/diff update

  IMPORTANT: Prefer writing Node.js scripts instead of shell scripts. The environment doesn't fully support shell scripts, so use Node.js for scripting tasks whenever possible!

  IMPORTANT: When choosing databases or npm packages, prefer options that don't rely on native binaries. For databases, prefer libsql, sqlite, or other solutions that don't involve native code. WebContainer CANNOT execute arbitrary native binaries.

  Available shell commands:
    File Operations:
      - cat: Display file contents
      - cp: Copy files/directories
      - ls: List directory contents
      - mkdir: Create directory
      - mv: Move/rename files
      - rm: Remove files
      - rmdir: Remove empty directories
      - touch: Create empty file/update timestamp
    
    System Information:
      - hostname: Show system name
      - ps: Display running processes
      - pwd: Print working directory
      - uptime: Show system uptime
      - env: Environment variables
    
    Development Tools:
      - node: Execute Node.js code
      - python3: Run Python scripts
      - code: VSCode operations
      - jq: Process JSON
    
    Other Utilities:
      - curl, head, sort, tail, clear, which, export, chmod, scho, hostname, kill, ln, xxd, alias, false,  getconf, true, loadenv, wasm, xdg-open, command, exit, source
</system_constraints>

<code_formatting_info>
  Use 2 spaces for code indentation
</code_formatting_info>

<message_formatting_info>
  You can make the output pretty by using only the following available HTML elements: ${iI.map(e=>`<${e}>`).join(", ")}
</message_formatting_info>

<chain_of_thought_instructions>
  Before providing a solution, BRIEFLY outline your implementation steps. This helps ensure systematic thinking and clear communication. Your planning should:
  - List concrete steps you'll take
  - Identify key components needed
  - Note potential challenges
  - Be concise (2-4 lines maximum)

  Example responses:

  User: "Create a todo list app with local storage"
  Assistant: "Sure. I'll start by:
  1. Set up Vite + React
  2. Create TodoList and TodoItem components
  3. Implement localStorage for persistence
  4. Add CRUD operations
  
  Let's start now.

  [Rest of response...]"

  User: "Help debug why my API calls aren't working"
  Assistant: "Great. My first steps will be:
  1. Check network requests
  2. Verify API endpoint format
  3. Examine error handling
  
  [Rest of response...]"

</chain_of_thought_instructions>

<code_review_instructions>
  ALWAYS review code before execution. For any code that will be executed (whether in shell commands, file creation, or other contexts), perform these checks:
  
  1. Syntax Check:
     - Verify correct syntax for the language/framework
     - Check for missing brackets, semicolons, or other syntax elements
     - Ensure proper indentation and formatting
  
  2. Logic Review:
     - Identify potential logical errors or bugs
     - Check for edge cases that might cause issues
     - Verify that the code will accomplish its intended purpose
  
  3. Security Analysis:
     - Look for potential security vulnerabilities
     - Check for unsafe practices (e.g., unsanitized inputs)
     - Identify any permissions or access issues
  
  4. Best Practices:
     - Ensure code follows language/framework best practices
     - Check for inefficient patterns or anti-patterns
     - Verify proper error handling
  
  5. React and Vite Projects:
     - Verify all required configuration files are present (vite.config.js, index.html)
     - Check that all necessary dependencies are included in package.json
     - Ensure proper component structure and file organization
     - Verify entry points and imports are correctly configured
  
  Only after completing this review should you proceed with executing or suggesting the execution of code. If issues are found, fix them before proceeding.
</code_review_instructions>

<artifact_info>
  Ada creates a SINGLE, comprehensive artifact for each project. The artifact contains all necessary steps and components, including:

  - Shell commands to run including dependencies to install using a package manager (NPM)
  - Files to create and their contents
  - Folders to create if necessary

  <artifact_instructions>
    1. CRITICAL: Think HOLISTICALLY and COMPREHENSIVELY BEFORE creating an artifact. This means:

      - Consider ALL relevant files in the project
      - Review ALL previous file changes and user modifications (as shown in diffs, see diff_spec)
      - Analyze the entire project context and dependencies
      - Anticipate potential impacts on other parts of the system

      This holistic approach is ABSOLUTELY ESSENTIAL for creating coherent and effective solutions.

    2. IMPORTANT: When receiving file modifications, ALWAYS use the latest file modifications and make any edits to the latest content of a file. This ensures that all changes are applied to the most up-to-date version of the file.

    3. The current working directory is \`${t}\`.

    4. Wrap the content in opening and closing \`<boltArtifact>\` tags. These tags contain more specific \`<boltAction>\` elements.

    5. Add a title for the artifact to the \`title\` attribute of the opening \`<boltArtifact>\`.

    6. Add a unique identifier to the \`id\` attribute of the of the opening \`<boltArtifact>\`. For updates, reuse the prior identifier. The identifier should be descriptive and relevant to the content, using kebab-case (e.g., "example-code-snippet"). This identifier will be used consistently throughout the artifact's lifecycle, even when updating or iterating on the artifact.

    7. Use \`<boltAction>\` tags to define specific actions to perform.

    8. For each \`<boltAction>\`, add a type to the \`type\` attribute of the opening \`<boltAction>\` tag to specify the type of the action. Assign one of the following values to the \`type\` attribute:

      - shell: For running shell commands.

        - When Using \`npx\`, ALWAYS provide the \`--yes\` flag.
        - When running multiple shell commands, use \`&&\` to run them sequentially.
        - ULTRA IMPORTANT: Do NOT run a dev command with shell action use start action to run dev commands

      - file: For writing new files or updating existing files. For each file add a \`filePath\` attribute to the opening \`<boltAction>\` tag to specify the file path. The content of the file artifact is the file contents. All file paths MUST BE relative to the current working directory.

      - start: For starting a development server.
        - Use to start application if it hasn't been started yet or when NEW dependencies have been added.
        - Only use this action when you need to run a dev server or start the application
        - ULTRA IMPORTANT: For React or Vite projects, ALWAYS thoroughly review the project structure and files before starting the server to ensure all required files are present and properly configured
        - ULTRA IMPORTANT: do NOT re-run a dev server if files are updated. The existing dev server can automatically detect changes and executes the file changes


    9. The order of the actions is VERY IMPORTANT. For example, if you decide to run a file it's important that the file exists in the first place and you need to create it before running a shell command that would execute the file.

    10. ALWAYS install necessary dependencies FIRST before generating any other artifact. If that requires a \`package.json\` then you should create that first!

      IMPORTANT: Add all required dependencies to the \`package.json\` already and try to avoid \`npm i <pkg>\` if possible!

    11. CRITICAL: Always provide the FULL, updated content of the artifact. This means:

      - Include ALL code, even if parts are unchanged
      - NEVER use placeholders like "// rest of the code remains the same..." or "<- leave original code here ->"
      - ALWAYS show the complete, up-to-date file contents when updating files
      - Avoid any form of truncation or summarization

    12. When running a dev server NEVER say something like "You can now view X by opening the provided local server URL in your browser. The preview will be opened automatically or by the user manually!

    13. If a dev server has already been started, do not re-run the dev command when new dependencies are installed or files were updated. Assume that installing new dependencies will be executed in a different process and changes will be picked up by the dev server.

    14. IMPORTANT: Use coding best practices and split functionality into smaller modules instead of putting everything in a single gigantic file. Files should be as small as possible, and functionality should be extracted into separate modules when possible.

      - Ensure code is clean, readable, and maintainable.
      - Adhere to proper naming conventions and consistent formatting.
      - Split functionality into smaller, reusable modules instead of placing everything in a single large file.
      - Keep files as small as possible by extracting related functionalities into separate modules.
      - Use imports to connect these modules together effectively.
  </artifact_instructions>
</artifact_info>

NEVER use the word "artifact". For example:
  - DO NOT SAY: "This artifact sets up a simple Snake game using HTML, CSS, and JavaScript."
  - INSTEAD SAY: "We set up a simple Snake game using HTML, CSS, and JavaScript."

IMPORTANT: Use valid markdown only for all your responses and DO NOT use HTML tags except for artifacts!

ULTRA IMPORTANT: Do NOT be verbose and DO NOT explain anything unless the user is asking for more information. That is VERY important.

ULTRA IMPORTANT: Think first and reply with the artifact that contains all necessary steps to set up the project, files, shell commands to run. It is SUPER IMPORTANT to respond with this first.

Here are some examples of correct usage of artifacts:

<examples>
  <example>
    <user_query>Can you help me create a JavaScript function to calculate the factorial of a number?</user_query>

    <assistant_response>
      Certainly, I can help you create a JavaScript function to calculate the factorial of a number.

      <boltArtifact id="factorial-function" title="JavaScript Factorial Function">
        <boltAction type="file" filePath="index.js">function factorial(n) {
  ...
}
...</boltAction>

        <boltAction type="shell">node index.js</boltAction>
      </boltArtifact>
    </assistant_response>
  </example>

  <example>
    <user_query>Build a snake game</user_query>

    <assistant_response>
      Certainly! I'd be happy to help you build a snake game using JavaScript and HTML5 Canvas. This will be a basic implementation that you can later expand upon. Let's create the game step by step.

      <boltArtifact id="snake-game" title="Snake Game in HTML and JavaScript">
        <boltAction type="file" filePath="package.json">{
  "name": "snake",
  "scripts": {
    "dev": "vite"
  }
  ...
}</boltAction>

        <boltAction type="shell">npm install --save-dev vite</boltAction>

        <boltAction type="file" filePath="index.html">...</boltAction>

        <boltAction type="start">npm run dev</boltAction>
      </boltArtifact>

      Now you can play the Snake game by opening the provided local server URL in your browser. Use the arrow keys to control the snake. Eat the red food to grow and increase your score. The game ends if you hit the wall or your own tail.
    </assistant_response>
  </example>

  <example>
    <user_query>Make a bouncing ball with real gravity using React</user_query>

    <assistant_response>
      Certainly! I'll create a bouncing ball with real gravity using React. We'll use the react-spring library for physics-based animations.

      <boltArtifact id="bouncing-ball-react" title="Bouncing Ball with Gravity in React">
        <boltAction type="file" filePath="package.json">{
  "name": "bouncing-ball",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-spring": "^9.7.1"
  },
  "devDependencies": {
    "@types/react": "^18.0.28",
    "@types/react-dom": "^18.0.11",
    "@vitejs/plugin-react": "^3.1.0",
    "vite": "^4.2.0"
  }
}</boltAction>

        <boltAction type="file" filePath="index.html">...</boltAction>

        <boltAction type="file" filePath="src/main.jsx">...</boltAction>

        <boltAction type="file" filePath="src/index.css">...</boltAction>

        <boltAction type="file" filePath="src/App.jsx">...</boltAction>

        <boltAction type="start">npm run dev</boltAction>
      </boltArtifact>

      You can now view the bouncing ball animation in the preview. The ball will start falling from the top of the screen and bounce realistically when it hits the bottom.
    </assistant_response>
  </example>
</examples>
`;Nae`
  Continue your prior response. IMPORTANT: Immediately begin from where you left off without any interruptions.
  Do not repeat any content, including artifact and action tags.
`;const ZTe=t=>{const{cwd:e,allowedHtmlElements:n}=t;return`
You are Ada, an expert AI assistant and exceptional senior software developer with vast knowledge across multiple programming languages, frameworks, and best practices.

<system_constraints>
  - Operating in WebContainer, an in-browser Node.js runtime
  - Limited Python support: standard library only, no pip
  - No C/C++ compiler, native binaries, or Git
  - Prefer Node.js scripts over shell scripts
  - Use Vite for web servers
  - Databases: prefer libsql, sqlite, or non-native solutions
  - When for react dont forget to write vite config and index.html to the project
  - ALWAYS thoroughly review React or Vite projects before running them to ensure all required files are present and properly configured
  - WebContainer CANNOT execute diff or patch editing so always write your code in full no partial/diff update

  Available shell commands: cat, cp, ls, mkdir, mv, rm, rmdir, touch, hostname, ps, pwd, uptime, env, node, python3, code, jq, curl, head, sort, tail, clear, which, export, chmod, scho, kill, ln, xxd, alias, getconf, loadenv, wasm, xdg-open, command, exit, source
</system_constraints>

<code_formatting_info>
  Use 2 spaces for indentation
</code_formatting_info>

<message_formatting_info>
  Available HTML elements: ${n.join(", ")}
</message_formatting_info>

<chain_of_thought_instructions>
  do not mention the phrase "chain of thought"
  Before solutions, briefly outline implementation steps (2-4 lines max):
  - List concrete steps
  - Identify key components
  - Note potential challenges
  - Do not write the actual code just the plan and structure if needed 
  - Once completed planning start writing the artifacts
</chain_of_thought_instructions>

<artifact_info>
  Create a single, comprehensive artifact for each project:
  - Use \`<boltArtifact>\` tags with \`title\` and \`id\` attributes
  - Use \`<boltAction>\` tags with \`type\` attribute:
    - shell: Run commands
    - file: Write/update files (use \`filePath\` attribute)
    - start: Start dev server (only when necessary)
  - Order actions logically
  - Install dependencies first
  - Provide full, updated content for all files
  - Use coding best practices: modular, clean, readable code
</artifact_info>


# CRITICAL RULES - NEVER IGNORE

## File and Command Handling
1. ALWAYS use artifacts for file contents and commands - NO EXCEPTIONS
2. When writing a file, INCLUDE THE ENTIRE FILE CONTENT - NO PARTIAL UPDATES
3. For modifications, ONLY alter files that require changes - DO NOT touch unaffected files

## Response Format
4. Use markdown EXCLUSIVELY - HTML tags are ONLY allowed within artifacts
5. Be concise - Explain ONLY when explicitly requested
6. NEVER use the word "artifact" in responses

## Development Process
7. ALWAYS think and plan comprehensively before providing a solution
8. Current working directory: \`${e} \` - Use this for all file paths
9. Don't use cli scaffolding to steup the project, use cwd as Root of the project
11. For nodejs projects ALWAYS install dependencies after writing package.json file

## Coding Standards
10. ALWAYS create smaller, atomic components and modules
11. Modularity is PARAMOUNT - Break down functionality into logical, reusable parts
12. IMMEDIATELY refactor any file exceeding 250 lines
13. ALWAYS plan refactoring before implementation - Consider impacts on the entire system

## Artifact Usage
22. Use \`<boltArtifact>\` tags with \`title\` and \`id\` attributes for each project
23. Use \`<boltAction>\` tags with appropriate \`type\` attribute:
    - \`shell\`: For running commands
    - \`file\`: For writing/updating files (include \`filePath\` attribute)
    - \`start\`: For starting dev servers (use only when necessary/ or new dependencies are installed)
24. Order actions logically - dependencies MUST be installed first
25. For Vite project must include vite config and index.html for entry point
26. Provide COMPLETE, up-to-date content for all files - NO placeholders or partial updates
27. WebContainer CANNOT execute diff or patch editing so always write your code in full no partial/diff update

CRITICAL: These rules are ABSOLUTE and MUST be followed WITHOUT EXCEPTION in EVERY response.

Examples:
<examples>
  <example>
    <user_query>Can you help me create a JavaScript function to calculate the factorial of a number?</user_query>
    <assistant_response>
      Certainly, I can help you create a JavaScript function to calculate the factorial of a number.

      <boltArtifact id="factorial-function" title="JavaScript Factorial Function">
        <boltAction type="file" filePath="index.js">function factorial(n) {
  ...
}

...</boltAction>
        <boltAction type="shell">node index.js</boltAction>
      </boltArtifact>
    </assistant_response>
  </example>

  <example>
    <user_query>Build a snake game</user_query>
    <assistant_response>
      Certainly! I'd be happy to help you build a snake game using JavaScript and HTML5 Canvas. This will be a basic implementation that you can later expand upon. Let's create the game step by step.

      <boltArtifact id="snake-game" title="Snake Game in HTML and JavaScript">
        <boltAction type="file" filePath="package.json">{
  "name": "snake",
  "scripts": {
    "dev": "vite"
  }
  ...
}</boltAction>
        <boltAction type="shell">npm install --save-dev vite</boltAction>
        <boltAction type="file" filePath="index.html">...</boltAction>
        <boltAction type="start">npm run dev</boltAction>
      </boltArtifact>

      Now you can play the Snake game by opening the provided local server URL in your browser. Use the arrow keys to control the snake. Eat the red food to grow and increase your score. The game ends if you hit the wall or your own tail.
    </assistant_response>
  </example>

  <example>
    <user_query>Make a bouncing ball with real gravity using React</user_query>
    <assistant_response>
      Certainly! I'll create a bouncing ball with real gravity using React. We'll use the react-spring library for physics-based animations.

      <boltArtifact id="bouncing-ball-react" title="Bouncing Ball with Gravity in React">
        <boltAction type="file" filePath="package.json">{
  "name": "bouncing-ball",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-spring": "^9.7.1"
  },
  "devDependencies": {
    "@types/react": "^18.0.28",
    "@types/react-dom": "^18.0.11",
    "@vitejs/plugin-react": "^3.1.0",
    "vite": "^4.2.0"
  }
}</boltAction>
        <boltAction type="file" filePath="index.html">...</boltAction>
        <boltAction type="file" filePath="src/main.jsx">...</boltAction>
        <boltAction type="file" filePath="src/index.css">...</boltAction>
        <boltAction type="file" filePath="src/App.jsx">...</boltAction>
        <boltAction type="start">npm run dev</boltAction>
      </boltArtifact>

      You can now view the bouncing ball animation in the preview. The ball will start falling from the top of the screen and bounce realistically when it hits the bottom.
    </assistant_response>
  </example>
</examples>
Always use artifacts for file contents and commands, following the format shown in these examples.
`};class JTe{static library={default:{label:"Default Prompt",description:"This is the battle tested default system Prompt",get:e=>XTe(e.cwd)},optimized:{label:"Optimized Prompt (experimental)",description:"an Experimental version of the prompt for lower token usage",get:e=>ZTe(e)}};static getList(){return Object.entries(this.library).map(([e,n])=>{const{label:r,description:i}=n;return{id:e,label:r,description:i}})}static getPropmtFromLibrary(e,n){if(!this.library[e])throw"Prompt Now Found";return this.library[e]?.get(n)}}const QTe=A.memo(({feature:t,index:e,onToggle:n})=>p.jsx(at.div,{layoutId:t.id,className:Ae("relative group cursor-pointer","bg-bolt-elements-background-depth-2","hover:bg-bolt-elements-background-depth-3","transition-colors duration-200","rounded-lg overflow-hidden"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:e*.1},children:p.jsxs("div",{className:"p-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:Ae(t.icon,"w-5 h-5 text-bolt-elements-textSecondary")}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("h4",{className:"font-medium text-bolt-elements-textPrimary",children:t.title}),t.beta&&p.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-blue-500/10 text-blue-500 font-medium",children:"Beta"}),t.experimental&&p.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-orange-500/10 text-orange-500 font-medium",children:"Experimental"})]})]}),p.jsx(Zo,{checked:t.enabled,onCheckedChange:r=>n(t.id,r)})]}),p.jsx("p",{className:"mt-2 text-sm text-bolt-elements-textSecondary",children:t.description}),t.tooltip&&p.jsx("p",{className:"mt-1 text-xs text-bolt-elements-textTertiary",children:t.tooltip})]})},t.id)),Ej=A.memo(({title:t,features:e,icon:n,description:r,onToggleFeature:i})=>p.jsxs(at.div,{layout:!0,className:"flex flex-col gap-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:Ae(n,"text-xl text-purple-500")}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:t}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:r})]})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map((s,o)=>p.jsx(QTe,{feature:s,index:o,onToggle:i},s.id))})]}));function eAe(){const{autoSelectTemplate:t,isLatestBranch:e,contextOptimizationEnabled:n,eventLogs:r,setAutoSelectTemplate:i,enableLatestBranch:s,enableContextOptimization:o,setEventLogs:a,setPromptId:l,promptId:c}=Dh();ut.useEffect(()=>{e===void 0&&s(!1),n===void 0&&o(!0),t===void 0&&i(!0),c===void 0&&l("default"),r===void 0&&a(!0)},[]);const u=A.useCallback((d,f)=>{switch(d){case"latestBranch":{s(f),He.success(`Main branch updates ${f?"enabled":"disabled"}`);break}case"autoSelectTemplate":{i(f),He.success(`Auto select template ${f?"enabled":"disabled"}`);break}case"contextOptimization":{o(f),He.success(`Context optimization ${f?"enabled":"disabled"}`);break}case"eventLogs":{a(f),He.success(`Event logging ${f?"enabled":"disabled"}`);break}}},[s,i,o,a]),h={stable:[{id:"latestBranch",title:"Main Branch Updates",description:"Get the latest updates from the main branch",icon:"i-ph:git-branch",enabled:e,tooltip:"Enabled by default to receive updates from the main development branch"},{id:"autoSelectTemplate",title:"Auto Select Template",description:"Automatically select starter template",icon:"i-ph:selection",enabled:t,tooltip:"Enabled by default to automatically select the most appropriate starter template"},{id:"contextOptimization",title:"Context Optimization",description:"Optimize context for better responses",icon:"i-ph:brain",enabled:n,tooltip:"Enabled by default for improved AI responses"},{id:"eventLogs",title:"Event Logging",description:"Enable detailed event logging and history",icon:"i-ph:list-bullets",enabled:r,tooltip:"Enabled by default to record detailed logs of system events and user actions"}],beta:[]};return p.jsxs("div",{className:"flex flex-col gap-8",children:[p.jsx(Ej,{title:"Core Features",features:h.stable,icon:"i-ph:check-circle",description:"Essential features that are enabled by default for optimal performance",onToggleFeature:u}),h.beta.length>0&&p.jsx(Ej,{title:"Beta Features",features:h.beta,icon:"i-ph:test-tube",description:"New features that are ready for testing but may have some rough edges",onToggleFeature:u}),p.jsx(at.div,{layout:!0,className:Ae("bg-bolt-elements-background-depth-2","hover:bg-bolt-elements-background-depth-3","transition-all duration-200","rounded-lg p-4","group"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:Ae("p-2 rounded-lg text-xl","bg-bolt-elements-background-depth-3 group-hover:bg-bolt-elements-background-depth-4","transition-colors duration-200","text-purple-500"),children:p.jsx("div",{className:"i-ph:book"})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary group-hover:text-purple-500 transition-colors",children:"Prompt Library"}),p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:"Choose a prompt from the library to use as the system prompt"})]}),p.jsx("select",{value:c,onChange:d=>{l(d.target.value),He.success("Prompt template updated")},className:Ae("p-2 rounded-lg text-sm min-w-[200px]","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","text-bolt-elements-textPrimary","focus:outline-none focus:ring-2 focus:ring-purple-500/30","group-hover:border-purple-500/30","transition-all duration-200"),children:JTe.getList().map(d=>p.jsx("option",{value:d.id,children:d.label},d.id))})]})})]})}function tAe(){const[t,e]=A.useState(!1),[n,r]=A.useState(!1),[i,s]=A.useState(!1),[o,a]=A.useState(!1),[l,c]=A.useState(!1),u=A.useRef(null),h=async()=>{try{if(!wn)throw new Error("Database not initialized");const y={chats:await Kw(wn),exportDate:new Date().toISOString()},v=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),x=URL.createObjectURL(v),w=document.createElement("a");w.href=x,w.download=`bolt-chats-${new Date().toISOString()}.json`,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(x),He.success("Chats exported successfully")}catch(b){console.error("Export error:",b),He.error("Failed to export chats")}},d=()=>{try{const b={userProfile:localStorage.getItem("bolt_user_profile"),settings:localStorage.getItem("bolt_settings"),exportDate:new Date().toISOString()},y=new Blob([JSON.stringify(b,null,2)],{type:"application/json"}),v=URL.createObjectURL(y),x=document.createElement("a");x.href=v,x.download=`bolt-settings-${new Date().toISOString()}.json`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(v),He.success("Settings exported successfully")}catch(b){console.error("Export error:",b),He.error("Failed to export settings")}},f=async b=>{const y=b.target.files?.[0];if(y)try{const v=await y.text(),x=JSON.parse(v);x.userProfile&&localStorage.setItem("bolt_user_profile",x.userProfile),x.settings&&localStorage.setItem("bolt_settings",x.settings),window.location.reload(),He.success("Settings imported successfully")}catch(v){console.error("Import error:",v),He.error("Failed to import settings")}},m=async()=>{r(!0);try{if(localStorage.removeItem("bolt_user_profile"),localStorage.removeItem("bolt_settings"),localStorage.removeItem("bolt_chat_history"),!wn)throw new Error("Database not initialized");const y=(await Kw(wn)).map(v=>J3(wn,v.id));await Promise.all(y),a(!1),window.location.reload(),He.success("Settings reset successfully")}catch(b){console.error("Reset error:",b),a(!1),He.error("Failed to reset settings")}finally{r(!1)}},g=async()=>{s(!0);try{if(localStorage.removeItem("bolt_chat_history"),!wn)throw new Error("Database not initialized");const y=(await Kw(wn)).map(v=>J3(wn,v.id));await Promise.all(y),c(!1),He.success("Chat history deleted successfully")}catch(b){console.error("Delete error:",b),c(!1),He.error("Failed to delete chat history")}finally{s(!1)}};return p.jsxs("div",{className:"space-y-6",children:[p.jsx("input",{ref:u,type:"file",accept:".json",onChange:f,className:"hidden"}),p.jsx(xo,{open:o,onOpenChange:a,children:p.jsx(df,{showCloseButton:!1,className:"z-[1000]",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"i-ph:warning-circle-fill w-5 h-5 text-yellow-500"}),p.jsx(Zc,{children:"Reset All Settings?"})]}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mt-2",children:"This will reset all your settings to their default values. This action cannot be undone."}),p.jsxs("div",{className:"flex justify-end items-center gap-3 mt-6",children:[p.jsx(gh,{asChild:!0,children:p.jsx("button",{className:"px-4 py-2 rounded-lg text-sm bg-[#F5F5F5] dark:bg-[#1A1A1A] text-[#666666] dark:text-[#999999] hover:text-[#333333] dark:hover:text-white",children:"Cancel"})}),p.jsxs(at.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm bg-white dark:bg-[#1A1A1A] text-yellow-600 dark:text-yellow-500 hover:bg-yellow-50 dark:hover:bg-yellow-500/10 border border-transparent hover:border-yellow-500/10 dark:hover:border-yellow-500/20",onClick:m,disabled:n,whileHover:{scale:1.02},whileTap:{scale:.98},children:[n?p.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}):p.jsx("div",{className:"i-ph:arrow-counter-clockwise w-4 h-4"}),"Reset Settings"]})]})]})})}),p.jsx(xo,{open:l,onOpenChange:c,children:p.jsx(df,{showCloseButton:!1,className:"z-[1000]",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"i-ph:warning-circle-fill w-5 h-5 text-red-500"}),p.jsx(Zc,{children:"Delete All Chats?"})]}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mt-2",children:"This will permanently delete all your chat history. This action cannot be undone."}),p.jsxs("div",{className:"flex justify-end items-center gap-3 mt-6",children:[p.jsx(gh,{asChild:!0,children:p.jsx("button",{className:"px-4 py-2 rounded-lg text-sm bg-[#F5F5F5] dark:bg-[#1A1A1A] text-[#666666] dark:text-[#999999] hover:text-[#333333] dark:hover:text-white",children:"Cancel"})}),p.jsxs(at.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm bg-white dark:bg-[#1A1A1A] text-red-500 dark:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 border border-transparent hover:border-red-500/10 dark:hover:border-red-500/20",onClick:g,disabled:i,whileHover:{scale:1.02},whileTap:{scale:.98},children:[i?p.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}):p.jsx("div",{className:"i-ph:trash w-4 h-4"}),"Delete All"]})]})]})})}),p.jsxs(at.div,{className:"bg-white dark:bg-[#0A0A0A] rounded-lg p-6 border border-[#E5E5E5] dark:border-[#1A1A1A]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("div",{className:"i-ph:chat-circle-duotone w-5 h-5 text-purple-500"}),p.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Chat History"})]}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Export or delete all your chat history."}),p.jsxs("div",{className:"flex gap-4",children:[p.jsxs(at.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-purple-500 text-white text-sm hover:bg-purple-600",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:h,children:[p.jsx("div",{className:"i-ph:download-simple w-4 h-4"}),"Export All Chats"]}),p.jsxs(at.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-red-50 text-red-500 text-sm hover:bg-red-100 dark:bg-red-500/10 dark:hover:bg-red-500/20",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>c(!0),children:[p.jsx("div",{className:"i-ph:trash w-4 h-4"}),"Delete All Chats"]})]})]}),p.jsxs(at.div,{className:"bg-white dark:bg-[#0A0A0A] rounded-lg p-6 border border-[#E5E5E5] dark:border-[#1A1A1A]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("div",{className:"i-ph:gear-duotone w-5 h-5 text-purple-500"}),p.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Settings Backup"})]}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Export your settings to a JSON file or import settings from a previously exported file."}),p.jsxs("div",{className:"flex gap-4",children:[p.jsxs(at.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-purple-500 text-white text-sm hover:bg-purple-600",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:d,children:[p.jsx("div",{className:"i-ph:download-simple w-4 h-4"}),"Export Settings"]}),p.jsxs(at.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-purple-500 text-white text-sm hover:bg-purple-600",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>u.current?.click(),children:[p.jsx("div",{className:"i-ph:upload-simple w-4 h-4"}),"Import Settings"]}),p.jsxs(at.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-yellow-50 text-yellow-600 text-sm hover:bg-yellow-100 dark:bg-yellow-500/10 dark:hover:bg-yellow-500/20 dark:text-yellow-500",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a(!0),children:[p.jsx("div",{className:"i-ph:arrow-counter-clockwise w-4 h-4"}),"Reset Settings"]})]})]})]})}var sI="Collapsible",[nAe,_it]=ca(sI),[rAe,oI]=nAe(sI),WX=A.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:s,onOpenChange:o,...a}=t,[l=!1,c]=If({prop:r,defaultProp:i,onChange:o});return p.jsx(rAe,{scope:n,disabled:s,contentId:Hc(),open:l,onOpenToggle:A.useCallback(()=>c(u=>!u),[c]),children:p.jsx(vn.div,{"data-state":lI(l),"data-disabled":s?"":void 0,...a,ref:e})})});WX.displayName=sI;var GX="CollapsibleTrigger",qX=A.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=oI(GX,n);return p.jsx(vn.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":lI(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:Mt(t.onClick,i.onOpenToggle)})});qX.displayName=GX;var aI="CollapsibleContent",KX=A.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=oI(aI,t.__scopeCollapsible);return p.jsx(Fi,{present:n||i.open,children:({present:s})=>p.jsx(iAe,{...r,ref:e,present:s})})});KX.displayName=aI;var iAe=A.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...s}=t,o=oI(aI,n),[a,l]=A.useState(r),c=A.useRef(null),u=Wn(e,c),h=A.useRef(0),d=h.current,f=A.useRef(0),m=f.current,g=o.open||a,b=A.useRef(g),y=A.useRef(void 0);return A.useEffect(()=>{const v=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(v)},[]),Xc(()=>{const v=c.current;if(v){y.current=y.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const x=v.getBoundingClientRect();h.current=x.height,f.current=x.width,b.current||(v.style.transitionDuration=y.current.transitionDuration,v.style.animationName=y.current.animationName),l(r)}},[o.open,r]),p.jsx(vn.div,{"data-state":lI(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...s,ref:u,style:{"--radix-collapsible-content-height":d?`${d}px`:void 0,"--radix-collapsible-content-width":m?`${m}px`:void 0,...t.style},children:g&&i})});function lI(t){return t?"open":"closed"}var sAe=WX,oAe=qX,aAe=KX;const Ab=sAe,Pb=oAe,Nb=aAe,xk=A.forwardRef(({className:t,value:e,...n},r)=>p.jsx("div",{ref:r,className:Ae("relative h-2 w-full overflow-hidden rounded-full bg-bolt-elements-background",t),...n,children:p.jsx("div",{className:"h-full w-full flex-1 bg-bolt-elements-textPrimary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));xk.displayName="Progress";function lAe(t,[e,n]){return Math.min(n,Math.max(e,t))}function cAe(t,e){return A.useReducer((n,r)=>e[n][r]??n,t)}var cI="ScrollArea",[YX,wit]=ca(cI),[uAe,ha]=YX(cI),XX=A.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=t,[a,l]=A.useState(null),[c,u]=A.useState(null),[h,d]=A.useState(null),[f,m]=A.useState(null),[g,b]=A.useState(null),[y,v]=A.useState(0),[x,w]=A.useState(0),[S,E]=A.useState(!1),[k,_]=A.useState(!1),L=Wn(e,C=>l(C)),R=mR(i);return p.jsx(uAe,{scope:n,type:r,dir:R,scrollHideDelay:s,scrollArea:a,viewport:c,onViewportChange:u,content:h,onContentChange:d,scrollbarX:f,onScrollbarXChange:m,scrollbarXEnabled:S,onScrollbarXEnabledChange:E,scrollbarY:g,onScrollbarYChange:b,scrollbarYEnabled:k,onScrollbarYEnabledChange:_,onCornerWidthChange:v,onCornerHeightChange:w,children:p.jsx(vn.div,{dir:R,...o,ref:L,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":x+"px",...t.style}})})});XX.displayName=cI;var ZX="ScrollAreaViewport",JX=A.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:i,...s}=t,o=ha(ZX,n),a=A.useRef(null),l=Wn(e,a,o.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),p.jsx(vn.div,{"data-radix-scroll-area-viewport":"",...s,ref:l,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:p.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});JX.displayName=ZX;var oc="ScrollAreaScrollbar",uI=A.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ha(oc,t.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=t.orientation==="horizontal";return A.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?p.jsx(hAe,{...r,ref:e,forceMount:n}):i.type==="scroll"?p.jsx(dAe,{...r,ref:e,forceMount:n}):i.type==="auto"?p.jsx(QX,{...r,ref:e,forceMount:n}):i.type==="always"?p.jsx(hI,{...r,ref:e}):null});uI.displayName=oc;var hAe=A.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ha(oc,t.__scopeScrollArea),[s,o]=A.useState(!1);return A.useEffect(()=>{const a=i.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),o(!0)},u=()=>{l=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),p.jsx(Fi,{present:n||s,children:p.jsx(QX,{"data-state":s?"visible":"hidden",...r,ref:e})})}),dAe=A.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ha(oc,t.__scopeScrollArea),s=t.orientation==="horizontal",o=wk(()=>l("SCROLL_END"),100),[a,l]=cAe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return A.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,i.scrollHideDelay,l]),A.useEffect(()=>{const c=i.viewport,u=s?"scrollLeft":"scrollTop";if(c){let h=c[u];const d=()=>{const f=c[u];h!==f&&(l("SCROLL"),o()),h=f};return c.addEventListener("scroll",d),()=>c.removeEventListener("scroll",d)}},[i.viewport,s,l,o]),p.jsx(Fi,{present:n||a!=="hidden",children:p.jsx(hI,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Mt(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Mt(t.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),QX=A.forwardRef((t,e)=>{const n=ha(oc,t.__scopeScrollArea),{forceMount:r,...i}=t,[s,o]=A.useState(!1),a=t.orientation==="horizontal",l=wk(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?c:u)}},10);return sg(n.viewport,l),sg(n.content,l),p.jsx(Fi,{present:r||s,children:p.jsx(hI,{"data-state":s?"visible":"hidden",...i,ref:e})})}),hI=A.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=ha(oc,t.__scopeScrollArea),s=A.useRef(null),o=A.useRef(0),[a,l]=A.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=iZ(a.viewport,a.content),u={...r,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:d=>s.current=d,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:d=>o.current=d};function h(d,f){return yAe(d,o.current,a,f)}return n==="horizontal"?p.jsx(fAe,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const d=i.viewport.scrollLeft,f=kj(d,a,i.dir);s.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:d=>{i.viewport&&(i.viewport.scrollLeft=d)},onDragScroll:d=>{i.viewport&&(i.viewport.scrollLeft=h(d,i.dir))}}):n==="vertical"?p.jsx(pAe,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const d=i.viewport.scrollTop,f=kj(d,a);s.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:d=>{i.viewport&&(i.viewport.scrollTop=d)},onDragScroll:d=>{i.viewport&&(i.viewport.scrollTop=h(d))}}):null}),fAe=A.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=ha(oc,t.__scopeScrollArea),[o,a]=A.useState(),l=A.useRef(null),c=Wn(e,l,s.onScrollbarXChange);return A.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),p.jsx(tZ,{"data-orientation":"horizontal",...i,ref:c,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":_k(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(s.viewport){const d=s.viewport.scrollLeft+u.deltaX;t.onWheelScroll(d),oZ(d,h)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:vS(o.paddingLeft),paddingEnd:vS(o.paddingRight)}})}})}),pAe=A.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=ha(oc,t.__scopeScrollArea),[o,a]=A.useState(),l=A.useRef(null),c=Wn(e,l,s.onScrollbarYChange);return A.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),p.jsx(tZ,{"data-orientation":"vertical",...i,ref:c,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":_k(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(s.viewport){const d=s.viewport.scrollTop+u.deltaY;t.onWheelScroll(d),oZ(d,h)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:vS(o.paddingTop),paddingEnd:vS(o.paddingBottom)}})}})}),[mAe,eZ]=YX(oc),tZ=A.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:h,...d}=t,f=ha(oc,n),[m,g]=A.useState(null),b=Wn(e,L=>g(L)),y=A.useRef(null),v=A.useRef(""),x=f.viewport,w=r.content-r.viewport,S=ii(u),E=ii(l),k=wk(h,10);function _(L){if(y.current){const R=L.clientX-y.current.left,C=L.clientY-y.current.top;c({x:R,y:C})}}return A.useEffect(()=>{const L=R=>{const C=R.target;m?.contains(C)&&S(R,w)};return document.addEventListener("wheel",L,{passive:!1}),()=>document.removeEventListener("wheel",L,{passive:!1})},[x,m,w,S]),A.useEffect(E,[r,E]),sg(m,k),sg(f.content,k),p.jsx(mAe,{scope:n,scrollbar:m,hasThumb:i,onThumbChange:ii(s),onThumbPointerUp:ii(o),onThumbPositionChange:E,onThumbPointerDown:ii(a),children:p.jsx(vn.div,{...d,ref:b,style:{position:"absolute",...d.style},onPointerDown:Mt(t.onPointerDown,L=>{L.button===0&&(L.target.setPointerCapture(L.pointerId),y.current=m.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),_(L))}),onPointerMove:Mt(t.onPointerMove,_),onPointerUp:Mt(t.onPointerUp,L=>{const R=L.target;R.hasPointerCapture(L.pointerId)&&R.releasePointerCapture(L.pointerId),document.body.style.webkitUserSelect=v.current,f.viewport&&(f.viewport.style.scrollBehavior=""),y.current=null})})})}),yS="ScrollAreaThumb",nZ=A.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=eZ(yS,t.__scopeScrollArea);return p.jsx(Fi,{present:n||i.hasThumb,children:p.jsx(gAe,{ref:e,...r})})}),gAe=A.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,s=ha(yS,n),o=eZ(yS,n),{onThumbPositionChange:a}=o,l=Wn(e,h=>o.onThumbChange(h)),c=A.useRef(void 0),u=wk(()=>{c.current&&(c.current(),c.current=void 0)},100);return A.useEffect(()=>{const h=s.viewport;if(h){const d=()=>{if(u(),!c.current){const f=vAe(h,a);c.current=f,a()}};return a(),h.addEventListener("scroll",d),()=>h.removeEventListener("scroll",d)}},[s.viewport,u,a]),p.jsx(vn.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Mt(t.onPointerDownCapture,h=>{const f=h.target.getBoundingClientRect(),m=h.clientX-f.left,g=h.clientY-f.top;o.onThumbPointerDown({x:m,y:g})}),onPointerUp:Mt(t.onPointerUp,o.onThumbPointerUp)})});nZ.displayName=yS;var dI="ScrollAreaCorner",rZ=A.forwardRef((t,e)=>{const n=ha(dI,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?p.jsx(bAe,{...t,ref:e}):null});rZ.displayName=dI;var bAe=A.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=ha(dI,n),[s,o]=A.useState(0),[a,l]=A.useState(0),c=!!(s&&a);return sg(i.scrollbarX,()=>{const u=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(u),l(u)}),sg(i.scrollbarY,()=>{const u=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(u),o(u)}),c?p.jsx(vn.div,{...r,ref:e,style:{width:s,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function vS(t){return t?parseInt(t,10):0}function iZ(t,e){const n=t/e;return isNaN(n)?0:n}function _k(t){const e=iZ(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function yAe(t,e,n,r="ltr"){const i=_k(n),s=i/2,o=e||s,a=i-o,l=n.scrollbar.paddingStart+o,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,u=n.content-n.viewport,h=r==="ltr"?[0,u]:[u*-1,0];return sZ([l,c],h)(t)}function kj(t,e,n="ltr"){const r=_k(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-i,o=e.content-e.viewport,a=s-r,l=n==="ltr"?[0,o]:[o*-1,0],c=lAe(t,l);return sZ([0,o],[0,a])(c)}function sZ(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function oZ(t,e){return t>0&&t<e}var vAe=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){const s={left:t.scrollLeft,top:t.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&e(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function wk(t,e){const n=ii(t),r=A.useRef(0);return A.useEffect(()=>()=>window.clearTimeout(r.current),[]),A.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function sg(t,e){const n=ii(e);Xc(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}var aZ=XX,xAe=JX,_Ae=rZ;const fI=A.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(aZ,{ref:r,className:Ae("relative overflow-hidden",t),...n,children:[p.jsx(xAe,{className:"h-full w-full rounded-[inherit]",children:e}),p.jsx(lZ,{}),p.jsx(_Ae,{})]}));fI.displayName=aZ.displayName;const lZ=A.forwardRef(({className:t,orientation:e="vertical",...n},r)=>p.jsx(uI,{ref:r,orientation:e,className:Ae("flex touch-none select-none transition-colors",{"h-full w-2.5 border-l border-l-transparent p-[1px]":e==="vertical","h-2.5 flex-col border-t border-t-transparent p-[1px]":e==="horizontal"},t),...n,children:p.jsx(nZ,{className:"relative flex-1 rounded-full bg-bolt-elements-border"})}));lZ.displayName=uI.displayName;const Cj=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Tj=Fc,cZ=(t,e)=>n=>{var r;if(e?.variants==null)return Tj(t,n?.class,n?.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=n?.[c],h=s?.[c];if(u===null)return null;const d=Cj(u)||Cj(h);return i[c][d]}),a=n&&Object.entries(n).reduce((c,u)=>{let[h,d]=u;return d===void 0||(c[h]=d),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:h,className:d,...f}=u;return Object.entries(f).every(m=>{let[g,b]=m;return Array.isArray(b)?b.includes({...s,...a}[g]):{...s,...a}[g]===b})?[...c,h,d]:c},[]);return Tj(t,o,l,n?.class,n?.className)},wAe=cZ("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-bolt-elements-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-bolt-elements-background text-bolt-elements-textPrimary hover:bg-bolt-elements-background/80",secondary:"border-transparent bg-bolt-elements-background text-bolt-elements-textSecondary hover:bg-bolt-elements-background/80",destructive:"border-transparent bg-red-500/10 text-red-500 hover:bg-red-500/20",outline:"text-bolt-elements-textPrimary"}},defaultVariants:{variant:"default"}});function rT({className:t,variant:e,...n}){return p.jsx("div",{className:Ae(wAe({variant:e}),t),...n})}var Zi=Uint8Array,fo=Uint16Array,pI=Int32Array,Sk=new Zi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ek=new Zi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_P=new Zi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),uZ=function(t,e){for(var n=new fo(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new pI(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},hZ=uZ(Sk,2),dZ=hZ.b,wP=hZ.r;dZ[28]=258,wP[258]=28;var fZ=uZ(Ek,0),SAe=fZ.b,Aj=fZ.r,SP=new fo(32768);for(var dr=0;dr<32768;++dr){var ku=(dr&43690)>>1|(dr&21845)<<1;ku=(ku&52428)>>2|(ku&13107)<<2,ku=(ku&61680)>>4|(ku&3855)<<4,SP[dr]=((ku&65280)>>8|(ku&255)<<8)>>1}var Kl=function(t,e,n){for(var r=t.length,i=0,s=new fo(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new fo(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new fo(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],u=e-t[i],h=o[t[i]-1]++<<u,d=h|(1<<u)-1;h<=d;++h)a[SP[h]>>l]=c}else for(a=new fo(r),i=0;i<r;++i)t[i]&&(a[i]=SP[o[t[i]-1]++]>>15-t[i]);return a},vh=new Zi(288);for(var dr=0;dr<144;++dr)vh[dr]=8;for(var dr=144;dr<256;++dr)vh[dr]=9;for(var dr=256;dr<280;++dr)vh[dr]=7;for(var dr=280;dr<288;++dr)vh[dr]=8;var dy=new Zi(32);for(var dr=0;dr<32;++dr)dy[dr]=5;var EAe=Kl(vh,9,0),kAe=Kl(vh,9,1),CAe=Kl(dy,5,0),TAe=Kl(dy,5,1),iT=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Sa=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},sT=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},mI=function(t){return(t+7)/8|0},pZ=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Zi(t.subarray(e,n))},AAe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Aa=function(t,e,n){var r=new Error(e||AAe[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Aa),!n)throw r;return r},PAe=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new Zi(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new Zi(i*3));var c=function(Se){var Ce=n.length;if(Se>Ce){var ke=new Zi(Math.max(Ce*2,Se));ke.set(n),n=ke}},u=e.f||0,h=e.p||0,d=e.b||0,f=e.l,m=e.d,g=e.m,b=e.n,y=i*8;do{if(!f){u=Sa(t,h,1);var v=Sa(t,h+1,3);if(h+=3,v)if(v==1)f=kAe,m=TAe,g=9,b=5;else if(v==2){var E=Sa(t,h,31)+257,k=Sa(t,h+10,15)+4,_=E+Sa(t,h+5,31)+1;h+=14;for(var L=new Zi(_),R=new Zi(19),C=0;C<k;++C)R[_P[C]]=Sa(t,h+C*3,7);h+=k*3;for(var P=iT(R),O=(1<<P)-1,N=Kl(R,P,1),C=0;C<_;){var H=N[Sa(t,h,O)];h+=H&15;var x=H>>4;if(x<16)L[C++]=x;else{var Q=0,X=0;for(x==16?(X=3+Sa(t,h,3),h+=2,Q=L[C-1]):x==17?(X=3+Sa(t,h,7),h+=3):x==18&&(X=11+Sa(t,h,127),h+=7);X--;)L[C++]=Q}}var J=L.subarray(0,E),j=L.subarray(E);g=iT(J),b=iT(j),f=Kl(J,g,1),m=Kl(j,b,1)}else Aa(1);else{var x=mI(h)+4,w=t[x-4]|t[x-3]<<8,S=x+w;if(S>i){l&&Aa(0);break}a&&c(d+w),n.set(t.subarray(x,S),d),e.b=d+=w,e.p=h=S*8,e.f=u;continue}if(h>y){l&&Aa(0);break}}a&&c(d+131072);for(var F=(1<<g)-1,Y=(1<<b)-1,M=h;;M=h){var Q=f[sT(t,h)&F],D=Q>>4;if(h+=Q&15,h>y){l&&Aa(0);break}if(Q||Aa(2),D<256)n[d++]=D;else if(D==256){M=h,f=null;break}else{var V=D-254;if(D>264){var C=D-257,W=Sk[C];V=Sa(t,h,(1<<W)-1)+dZ[C],h+=W}var te=m[sT(t,h)&Y],ee=te>>4;te||Aa(3),h+=te&15;var j=SAe[ee];if(ee>3){var W=Ek[ee];j+=sT(t,h)&(1<<W)-1,h+=W}if(h>y){l&&Aa(0);break}a&&c(d+131072);var K=d+V;if(d<j){var he=s-j,be=Math.min(j,K);for(he+d<0&&Aa(3);d<be;++d)n[d]=r[he+d]}for(;d<K;++d)n[d]=n[d-j]}}e.l=f,e.p=M,e.b=d,e.f=u,f&&(u=1,e.m=g,e.d=m,e.n=b)}while(!u);return d!=n.length&&o?pZ(n,0,d):n.subarray(0,d)},_c=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},J0=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},oT=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:gZ,l:0};if(i==1){var o=new Zi(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(S,E){return S.f-E.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,h=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=i-1;)a=n[n[c].f<n[h].f?c++:h++],l=n[c!=u&&n[c].f<n[h].f?c++:h++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var d=s[0].s,r=1;r<i;++r)s[r].s>d&&(d=s[r].s);var f=new fo(d+1),m=EP(n[u-1],f,0);if(m>e){var r=0,g=0,b=m-e,y=1<<b;for(s.sort(function(E,k){return f[k.s]-f[E.s]||E.f-k.f});r<i;++r){var v=s[r].s;if(f[v]>e)g+=y-(1<<m-f[v]),f[v]=e;else break}for(g>>=b;g>0;){var x=s[r].s;f[x]<e?g-=1<<e-f[x]++-1:++r}for(;r>=0&&g;--r){var w=s[r].s;f[w]==e&&(--f[w],++g)}m=e}return{t:new Zi(f),l:m}},EP=function(t,e,n){return t.s==-1?Math.max(EP(t.l,e,n+1),EP(t.r,e,n+1)):e[t.s]=n},Pj=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new fo(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},Q0=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},mZ=function(t,e,n){var r=n.length,i=mI(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},Nj=function(t,e,n,r,i,s,o,a,l,c,u){_c(e,u++,n),++i[256];for(var h=oT(i,15),d=h.t,f=h.l,m=oT(s,15),g=m.t,b=m.l,y=Pj(d),v=y.c,x=y.n,w=Pj(g),S=w.c,E=w.n,k=new fo(19),_=0;_<v.length;++_)++k[v[_]&31];for(var _=0;_<S.length;++_)++k[S[_]&31];for(var L=oT(k,7),R=L.t,C=L.l,P=19;P>4&&!R[_P[P-1]];--P);var O=c+5<<3,N=Q0(i,vh)+Q0(s,dy)+o,H=Q0(i,d)+Q0(s,g)+o+14+3*P+Q0(k,R)+2*k[16]+3*k[17]+7*k[18];if(l>=0&&O<=N&&O<=H)return mZ(e,u,t.subarray(l,l+c));var Q,X,J,j;if(_c(e,u,1+(H<N)),u+=2,H<N){Q=Kl(d,f,0),X=d,J=Kl(g,b,0),j=g;var F=Kl(R,C,0);_c(e,u,x-257),_c(e,u+5,E-1),_c(e,u+10,P-4),u+=14;for(var _=0;_<P;++_)_c(e,u+3*_,R[_P[_]]);u+=3*P;for(var Y=[v,S],M=0;M<2;++M)for(var D=Y[M],_=0;_<D.length;++_){var V=D[_]&31;_c(e,u,F[V]),u+=R[V],V>15&&(_c(e,u,D[_]>>5&127),u+=D[_]>>12)}}else Q=EAe,X=vh,J=CAe,j=dy;for(var _=0;_<a;++_){var W=r[_];if(W>255){var V=W>>18&31;J0(e,u,Q[V+257]),u+=X[V+257],V>7&&(_c(e,u,W>>23&31),u+=Sk[V]);var te=W&31;J0(e,u,J[te]),u+=j[te],te>3&&(J0(e,u,W>>5&8191),u+=Ek[te])}else J0(e,u,Q[W]),u+=X[W]}return J0(e,u,Q[256]),u+X[256]},NAe=new pI([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),gZ=new Zi(0),LAe=function(t,e,n,r,i,s){var o=s.z||t.length,a=new Zi(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,u=(s.r||0)&7;if(e){u&&(l[0]=s.r>>3);for(var h=NAe[e-1],d=h>>13,f=h&8191,m=(1<<n)-1,g=s.p||new fo(32768),b=s.h||new fo(m+1),y=Math.ceil(n/3),v=2*y,x=function(q){return(t[q]^t[q+1]<<y^t[q+2]<<v)&m},w=new pI(25e3),S=new fo(288),E=new fo(32),k=0,_=0,L=s.i||0,R=0,C=s.w||0,P=0;L+2<o;++L){var O=x(L),N=L&32767,H=b[O];if(g[N]=H,b[O]=N,C<=L){var Q=o-L;if((k>7e3||R>24576)&&(Q>423||!c)){u=Nj(t,l,0,w,S,E,_,R,P,L-P,u),R=k=_=0,P=L;for(var X=0;X<286;++X)S[X]=0;for(var X=0;X<30;++X)E[X]=0}var J=2,j=0,F=f,Y=N-H&32767;if(Q>2&&O==x(L-Y))for(var M=Math.min(d,Q)-1,D=Math.min(32767,L),V=Math.min(258,Q);Y<=D&&--F&&N!=H;){if(t[L+J]==t[L+J-Y]){for(var W=0;W<V&&t[L+W]==t[L+W-Y];++W);if(W>J){if(J=W,j=Y,W>M)break;for(var te=Math.min(Y,W-2),ee=0,X=0;X<te;++X){var K=L-Y+X&32767,he=g[K],be=K-he&32767;be>ee&&(ee=be,H=K)}}}N=H,H=g[N],Y+=N-H&32767}if(j){w[R++]=268435456|wP[J]<<18|Aj[j];var Se=wP[J]&31,Ce=Aj[j]&31;_+=Sk[Se]+Ek[Ce],++S[257+Se],++E[Ce],C=L+J,++k}else w[R++]=t[L],++S[t[L]]}}for(L=Math.max(L,C);L<o;++L)w[R++]=t[L],++S[t[L]];u=Nj(t,l,c,w,S,E,_,R,P,L-P,u),c||(s.r=u&7|l[u/8|0]<<3,u-=7,s.h=b,s.p=g,s.i=L,s.w=C)}else{for(var L=s.w||0;L<o+c;L+=65535){var ke=L+65535;ke>=o&&(l[u/8|0]=c,ke=o),u=mZ(l,u+1,t.subarray(L,ke))}s.i=o}return pZ(a,0,r+mI(u)+i)},bZ=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},RAe=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new Zi(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return LAe(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},yZ=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},IAe=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=bZ();i.p(e.dictionary),yZ(t,2,i.d())}},OAe=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Aa(6,"invalid zlib data"),(t[1]>>5&1)==1&&Aa(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function kP(t,e){e||(e={});var n=bZ();n.p(t);var r=RAe(t,e,e.dictionary?6:2,4);return IAe(r,e),yZ(r,r.length-4,n.d()),r}function DAe(t,e){return PAe(t.subarray(OAe(t),-4),{i:2},e,e)}var MAe=typeof TextDecoder<"u"&&new TextDecoder,jAe=0;try{MAe.decode(gZ,{stream:!0}),jAe=1}catch{}var Gt=function(){return typeof window<"u"?window:typeof zD<"u"?zD:typeof self<"u"?self:this}();function aT(){Gt.console&&typeof Gt.console.log=="function"&&Gt.console.log.apply(Gt.console,arguments)}var Zn={log:aT,warn:function(t){Gt.console&&(typeof Gt.console.warn=="function"?Gt.console.warn.apply(Gt.console,arguments):aT.call(null,arguments))},error:function(t){Gt.console&&(typeof Gt.console.error=="function"?Gt.console.error.apply(Gt.console,arguments):aT(t))}};function lT(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){dd(r.response,e,n)},r.onerror=function(){Zn.error("could not download file")},r.send()}function Lj(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function A_(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var u1,CP,dd=Gt.saveAs||((typeof window>"u"?"undefined":Vn(window))!=="object"||window!==Gt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Gt.URL||Gt.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?Lj(i.href)?lT(t,e,n):A_(i,i.target="_blank"):A_(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){A_(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(Lj(t))lT(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){A_(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Vn(s)!=="object"&&(Zn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return lT(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(Gt.HTMLElement)||Gt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Vn(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var u=a.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},a.readAsDataURL(t)}else{var l=Gt.URL||Gt.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function vZ(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function cT(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=Hi(n,r,i,s,e[0],7,-680876936),s=Hi(s,n,r,i,e[1],12,-389564586),i=Hi(i,s,n,r,e[2],17,606105819),r=Hi(r,i,s,n,e[3],22,-1044525330),n=Hi(n,r,i,s,e[4],7,-176418897),s=Hi(s,n,r,i,e[5],12,1200080426),i=Hi(i,s,n,r,e[6],17,-1473231341),r=Hi(r,i,s,n,e[7],22,-45705983),n=Hi(n,r,i,s,e[8],7,1770035416),s=Hi(s,n,r,i,e[9],12,-1958414417),i=Hi(i,s,n,r,e[10],17,-42063),r=Hi(r,i,s,n,e[11],22,-1990404162),n=Hi(n,r,i,s,e[12],7,1804603682),s=Hi(s,n,r,i,e[13],12,-40341101),i=Hi(i,s,n,r,e[14],17,-1502002290),n=zi(n,r=Hi(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=zi(s,n,r,i,e[6],9,-1069501632),i=zi(i,s,n,r,e[11],14,643717713),r=zi(r,i,s,n,e[0],20,-373897302),n=zi(n,r,i,s,e[5],5,-701558691),s=zi(s,n,r,i,e[10],9,38016083),i=zi(i,s,n,r,e[15],14,-660478335),r=zi(r,i,s,n,e[4],20,-405537848),n=zi(n,r,i,s,e[9],5,568446438),s=zi(s,n,r,i,e[14],9,-1019803690),i=zi(i,s,n,r,e[3],14,-187363961),r=zi(r,i,s,n,e[8],20,1163531501),n=zi(n,r,i,s,e[13],5,-1444681467),s=zi(s,n,r,i,e[2],9,-51403784),i=zi(i,s,n,r,e[7],14,1735328473),n=Vi(n,r=zi(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Vi(s,n,r,i,e[8],11,-2022574463),i=Vi(i,s,n,r,e[11],16,1839030562),r=Vi(r,i,s,n,e[14],23,-35309556),n=Vi(n,r,i,s,e[1],4,-1530992060),s=Vi(s,n,r,i,e[4],11,1272893353),i=Vi(i,s,n,r,e[7],16,-155497632),r=Vi(r,i,s,n,e[10],23,-1094730640),n=Vi(n,r,i,s,e[13],4,681279174),s=Vi(s,n,r,i,e[0],11,-358537222),i=Vi(i,s,n,r,e[3],16,-722521979),r=Vi(r,i,s,n,e[6],23,76029189),n=Vi(n,r,i,s,e[9],4,-640364487),s=Vi(s,n,r,i,e[12],11,-421815835),i=Vi(i,s,n,r,e[15],16,530742520),n=Wi(n,r=Vi(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Wi(s,n,r,i,e[7],10,1126891415),i=Wi(i,s,n,r,e[14],15,-1416354905),r=Wi(r,i,s,n,e[5],21,-57434055),n=Wi(n,r,i,s,e[12],6,1700485571),s=Wi(s,n,r,i,e[3],10,-1894986606),i=Wi(i,s,n,r,e[10],15,-1051523),r=Wi(r,i,s,n,e[1],21,-2054922799),n=Wi(n,r,i,s,e[8],6,1873313359),s=Wi(s,n,r,i,e[15],10,-30611744),i=Wi(i,s,n,r,e[6],15,-1560198380),r=Wi(r,i,s,n,e[13],21,1309151649),n=Wi(n,r,i,s,e[4],6,-145523070),s=Wi(s,n,r,i,e[11],10,-1120210379),i=Wi(i,s,n,r,e[2],15,718787259),r=Wi(r,i,s,n,e[9],21,-343485551),t[0]=Zu(n,t[0]),t[1]=Zu(r,t[1]),t[2]=Zu(i,t[2]),t[3]=Zu(s,t[3])}function kk(t,e,n,r,i,s){return e=Zu(Zu(e,t),Zu(r,s)),Zu(e<<i|e>>>32-i,n)}function Hi(t,e,n,r,i,s,o){return kk(e&n|~e&r,t,e,i,s,o)}function zi(t,e,n,r,i,s,o){return kk(e&r|n&~r,t,e,i,s,o)}function Vi(t,e,n,r,i,s,o){return kk(e^n^r,t,e,i,s,o)}function Wi(t,e,n,r,i,s,o){return kk(n^(e|~r),t,e,i,s,o)}function xZ(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)cT(r,FAe(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(cT(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,cT(r,i),r}function FAe(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}u1=Gt.atob.bind(Gt),CP=Gt.btoa.bind(Gt);var Rj="0123456789abcdef".split("");function BAe(t){for(var e="",n=0;n<4;n++)e+=Rj[t>>8*n+4&15]+Rj[t>>8*n&15];return e}function UAe(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function TP(t){return xZ(t).map(UAe).join("")}var $Ae=function(t){for(var e=0;e<t.length;e++)t[e]=BAe(t[e]);return t.join("")}(xZ("hello"))!="5d41402abc4b2a76b9719d911017c592";function Zu(t,e){if($Ae){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function AP(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var u=a[l];c=(c+u+o.charCodeAt(l))%256,a[l]=a[c],a[c]=u}n=t,r=a}else a=r;var h=e.length,d=0,f=0,m="";for(l=0;l<h;l++)f=(f+(u=a[d=(d+1)%256]))%256,a[d]=a[f],a[f]=u,o=a[(a[d]+a[f])%256],m+=String.fromCharCode(e.charCodeAt(l)^o);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Ij={print:4,modify:8,copy:16,"annot-forms":32};function qp(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(Ij.perm!==void 0)throw new Error("Invalid permission: "+a);i+=Ij[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=TP(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=AP(this.encryptionKey,this.padding)}function Kp(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function Oj(t){if(Vn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){Gt.console&&Zn.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function xS(t){if(!(this instanceof xS))return new xS(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function _Z(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function xd(t,e,n,r,i){if(!(this instanceof xd))return new xd(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,_Z.call(this,r,i)}function lm(t,e,n,r,i){if(!(this instanceof lm))return new lm(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,_Z.call(this,r,i)}function zt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",u=null;Vn(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,d={},f={internal:{},__private__:{}};f.__private__.PubSub=Oj;var m="1.3",g=f.__private__.getPdfVersion=function(){return m};f.__private__.setPdfVersion=function(B){m=B};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return b};var y=f.__private__.getPageFormat=function(B){return b[B]};i=i||"a4";var v={COMPAT:"compat",ADVANCED:"advanced"},x=v.COMPAT;function w(){this.saveGraphicsState(),ne(new Vt($,0,0,-$,0,du()*$).toString()+" cm"),this.setFontSize(this.getFontSize()/$),c="n",x=v.ADVANCED}function S(){this.restoreGraphicsState(),c="S",x=v.COMPAT}var E=f.__private__.combineFontStyleAndFontWeight=function(B,se){if(B=="bold"&&se=="normal"||B=="bold"&&se==400||B=="normal"&&se=="italic"||B=="bold"&&se=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return se&&(B=se==400||se==="normal"?B==="italic"?"italic":"normal":se!=700&&se!=="bold"||B!=="normal"?(se==700?"bold":se)+""+B:"bold"),B};f.advancedAPI=function(B){var se=x===v.COMPAT;return se&&w.call(this),typeof B!="function"||(B(this),se&&S.call(this)),this},f.compatAPI=function(B){var se=x===v.ADVANCED;return se&&S.call(this),typeof B!="function"||(B(this),se&&w.call(this)),this},f.isAdvancedAPI=function(){return x===v.ADVANCED};var k,_=function(B){if(x!==v.ADVANCED)throw new Error(B+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},L=f.roundToPrecision=f.__private__.roundToPrecision=function(B,se){var _e=e||se;if(isNaN(B)||isNaN(_e))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return B.toFixed(_e).replace(/0+$/,"")};k=f.hpf=f.__private__.hpf=typeof l=="number"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return L(B,l)}:l==="smart"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return L(B,B>-1&&B<1?16:5)}:function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return L(B,16)};var R=f.f2=f.__private__.f2=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f2");return L(B,2)},C=f.__private__.f3=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f3");return L(B,3)},P=f.scale=f.__private__.scale=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.scale");return x===v.COMPAT?B*$:x===v.ADVANCED?B:void 0},O=function(B){return x===v.COMPAT?du()-B:x===v.ADVANCED?B:void 0},N=function(B){return P(O(B))};f.__private__.setPrecision=f.setPrecision=function(B){typeof parseInt(B,10)=="number"&&(e=parseInt(B,10))};var H,Q="00000000000000000000000000000000",X=f.__private__.getFileId=function(){return Q},J=f.__private__.setFileId=function(B){return Q=B!==void 0&&/^[a-fA-F0-9]{32}$/.test(B)?B.toUpperCase():Q.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Ui=new qp(u.userPermissions,u.userPassword,u.ownerPassword,Q)),Q};f.setFileId=function(B){return J(B),this},f.getFileId=function(){return X()};var j=f.__private__.convertDateToPDFDate=function(B){var se=B.getTimezoneOffset(),_e=se<0?"+":"-",Le=Math.floor(Math.abs(se/60)),ze=Math.abs(se%60),Qe=[_e,V(Le),"'",V(ze),"'"].join("");return["D:",B.getFullYear(),V(B.getMonth()+1),V(B.getDate()),V(B.getHours()),V(B.getMinutes()),V(B.getSeconds()),Qe].join("")},F=f.__private__.convertPDFDateToDate=function(B){var se=parseInt(B.substr(2,4),10),_e=parseInt(B.substr(6,2),10)-1,Le=parseInt(B.substr(8,2),10),ze=parseInt(B.substr(10,2),10),Qe=parseInt(B.substr(12,2),10),ct=parseInt(B.substr(14,2),10);return new Date(se,_e,Le,ze,Qe,ct,0)},Y=f.__private__.setCreationDate=function(B){var se;if(B===void 0&&(B=new Date),B instanceof Date)se=j(B);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(B))throw new Error("Invalid argument passed to jsPDF.setCreationDate");se=B}return H=se},M=f.__private__.getCreationDate=function(B){var se=H;return B==="jsDate"&&(se=F(H)),se};f.setCreationDate=function(B){return Y(B),this},f.getCreationDate=function(B){return M(B)};var D,V=f.__private__.padd2=function(B){return("0"+parseInt(B)).slice(-2)},W=f.__private__.padd2Hex=function(B){return("00"+(B=B.toString())).substr(B.length)},te=0,ee=[],K=[],he=0,be=[],Se=[],Ce=!1,ke=K,q=function(){te=0,he=0,K=[],ee=[],be=[],uc=$r(),pa=$r()};f.__private__.setCustomOutputDestination=function(B){Ce=!0,ke=B};var pe=function(B){Ce||(ke=B)};f.__private__.resetCustomOutputDestination=function(){Ce=!1,ke=K};var ne=f.__private__.out=function(B){return B=B.toString(),he+=B.length+1,ke.push(B),ke},oe=f.__private__.write=function(B){return ne(arguments.length===1?B.toString():Array.prototype.join.call(arguments," "))},ae=f.__private__.getArrayBuffer=function(B){for(var se=B.length,_e=new ArrayBuffer(se),Le=new Uint8Array(_e);se--;)Le[se]=B.charCodeAt(se);return _e},me=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return me};var Pe=t.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(B){return Pe=x===v.ADVANCED?B/$:B,this};var Re,we=f.__private__.getFontSize=f.getFontSize=function(){return x===v.COMPAT?Pe:Pe*$},$e=t.R2L||!1;f.__private__.setR2L=f.setR2L=function(B){return $e=B,this},f.__private__.getR2L=f.getR2L=function(){return $e};var Fe,Be=f.__private__.setZoomMode=function(B){var se=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(B))Re=B;else if(isNaN(B)){if(se.indexOf(B)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+B+'" is not recognized.');Re=B}else Re=parseInt(B,10)};f.__private__.getZoomMode=function(){return Re};var Ee,qe=f.__private__.setPageMode=function(B){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(B)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+B+'" is not recognized.');Fe=B};f.__private__.getPageMode=function(){return Fe};var Xe=f.__private__.setLayoutMode=function(B){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(B)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+B+'" is not recognized.');Ee=B};f.__private__.getLayoutMode=function(){return Ee},f.__private__.setDisplayMode=f.setDisplayMode=function(B,se,_e){return Be(B),Xe(se),qe(_e),this};var et={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(B){if(Object.keys(et).indexOf(B)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return et[B]},f.__private__.getDocumentProperties=function(){return et},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(B){for(var se in et)et.hasOwnProperty(se)&&B[se]&&(et[se]=B[se]);return this},f.__private__.setDocumentProperty=function(B,se){if(Object.keys(et).indexOf(B)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return et[B]=se};var re,$,G,ue,Ne,De={},Ve={},Ft=[],It={},xn={},Kt={},nn={},os=null,Yn=0,Zt=[],Fn=new Oj(f),$h=t.hotfixes||[],ki={},Qa={},el=[],Vt=function B(se,_e,Le,ze,Qe,ct){if(!(this instanceof B))return new B(se,_e,Le,ze,Qe,ct);isNaN(se)&&(se=1),isNaN(_e)&&(_e=0),isNaN(Le)&&(Le=0),isNaN(ze)&&(ze=1),isNaN(Qe)&&(Qe=0),isNaN(ct)&&(ct=0),this._matrix=[se,_e,Le,ze,Qe,ct]};Object.defineProperty(Vt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(Vt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(Vt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(Vt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(Vt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(Vt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(Vt.prototype,"a",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(Vt.prototype,"b",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(Vt.prototype,"c",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(Vt.prototype,"d",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(Vt.prototype,"e",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(Vt.prototype,"f",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(Vt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Vt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Vt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Vt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Vt.prototype.join=function(B){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(k).join(B)},Vt.prototype.multiply=function(B){var se=B.sx*this.sx+B.shy*this.shx,_e=B.sx*this.shy+B.shy*this.sy,Le=B.shx*this.sx+B.sy*this.shx,ze=B.shx*this.shy+B.sy*this.sy,Qe=B.tx*this.sx+B.ty*this.shx+this.tx,ct=B.tx*this.shy+B.ty*this.sy+this.ty;return new Vt(se,_e,Le,ze,Qe,ct)},Vt.prototype.decompose=function(){var B=this.sx,se=this.shy,_e=this.shx,Le=this.sy,ze=this.tx,Qe=this.ty,ct=Math.sqrt(B*B+se*se),kt=(B/=ct)*_e+(se/=ct)*Le;_e-=B*kt,Le-=se*kt;var $t=Math.sqrt(_e*_e+Le*Le);return kt/=$t,B*(Le/=$t)<se*(_e/=$t)&&(B=-B,se=-se,kt=-kt,ct=-ct),{scale:new Vt(ct,0,0,$t,0,0),translate:new Vt(1,0,0,1,ze,Qe),rotate:new Vt(B,se,-se,B,0,0),skew:new Vt(1,0,kt,1,0,0)}},Vt.prototype.toString=function(B){return this.join(" ")},Vt.prototype.inversed=function(){var B=this.sx,se=this.shy,_e=this.shx,Le=this.sy,ze=this.tx,Qe=this.ty,ct=1/(B*Le-se*_e),kt=Le*ct,$t=-se*ct,en=-_e*ct,Jt=B*ct;return new Vt(kt,$t,en,Jt,-kt*ze-en*Qe,-$t*ze-Jt*Qe)},Vt.prototype.applyToPoint=function(B){var se=B.x*this.sx+B.y*this.shx+this.tx,_e=B.x*this.shy+B.y*this.sy+this.ty;return new hp(se,_e)},Vt.prototype.applyToRectangle=function(B){var se=this.applyToPoint(B),_e=this.applyToPoint(new hp(B.x+B.w,B.y+B.h));return new E0(se.x,se.y,_e.x-se.x,_e.y-se.y)},Vt.prototype.clone=function(){var B=this.sx,se=this.shy,_e=this.shx,Le=this.sy,ze=this.tx,Qe=this.ty;return new Vt(B,se,_e,Le,ze,Qe)},f.Matrix=Vt;var fa=f.matrixMult=function(B,se){return se.multiply(B)},tl=new Vt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=tl;var ks=function(B,se){if(!xn[B]){var _e=(se instanceof xd?"Sh":"P")+(Object.keys(It).length+1).toString(10);se.id=_e,xn[B]=_e,It[_e]=se,Fn.publish("addPattern",se)}};f.ShadingPattern=xd,f.TilingPattern=lm,f.addShadingPattern=function(B,se){return _("addShadingPattern()"),ks(B,se),this},f.beginTilingPattern=function(B){_("beginTilingPattern()"),Nx(B.boundingBox[0],B.boundingBox[1],B.boundingBox[2]-B.boundingBox[0],B.boundingBox[3]-B.boundingBox[1],B.matrix)},f.endTilingPattern=function(B,se){_("endTilingPattern()"),se.stream=Se[D].join(`
`),ks(B,se),Fn.publish("endTilingPattern",se),el.pop().restore()};var ei=f.__private__.newObject=function(){var B=$r();return Js(B,!0),B},$r=f.__private__.newObjectDeferred=function(){return te++,ee[te]=function(){return he},te},Js=function(B,se){return se=typeof se=="boolean"&&se,ee[B]=he,se&&ne(B+" 0 obj"),B},Jf=f.__private__.newAdditionalObject=function(){var B={objId:$r(),content:""};return be.push(B),B},uc=$r(),pa=$r(),ma=f.__private__.decodeColorString=function(B){var se=B.split(" ");if(se.length!==2||se[1]!=="g"&&se[1]!=="G")se.length===5&&(se[4]==="k"||se[4]==="K")&&(se=[(1-se[0])*(1-se[3]),(1-se[1])*(1-se[3]),(1-se[2])*(1-se[3]),"r"]);else{var _e=parseFloat(se[0]);se=[_e,_e,_e,"r"]}for(var Le="#",ze=0;ze<3;ze++)Le+=("0"+Math.floor(255*parseFloat(se[ze])).toString(16)).slice(-2);return Le},ga=f.__private__.encodeColorString=function(B){var se;typeof B=="string"&&(B={ch1:B});var _e=B.ch1,Le=B.ch2,ze=B.ch3,Qe=B.ch4,ct=B.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof _e=="string"&&_e.charAt(0)!=="#"){var kt=new vZ(_e);if(kt.ok)_e=kt.toHex();else if(!/^\d*\.?\d*$/.test(_e))throw new Error('Invalid color "'+_e+'" passed to jsPDF.encodeColorString.')}if(typeof _e=="string"&&/^#[0-9A-Fa-f]{3}$/.test(_e)&&(_e="#"+_e[1]+_e[1]+_e[2]+_e[2]+_e[3]+_e[3]),typeof _e=="string"&&/^#[0-9A-Fa-f]{6}$/.test(_e)){var $t=parseInt(_e.substr(1),16);_e=$t>>16&255,Le=$t>>8&255,ze=255&$t}if(Le===void 0||Qe===void 0&&_e===Le&&Le===ze)if(typeof _e=="string")se=_e+" "+ct[0];else switch(B.precision){case 2:se=R(_e/255)+" "+ct[0];break;case 3:default:se=C(_e/255)+" "+ct[0]}else if(Qe===void 0||Vn(Qe)==="object"){if(Qe&&!isNaN(Qe.a)&&Qe.a===0)return se=["1.","1.","1.",ct[1]].join(" ");if(typeof _e=="string")se=[_e,Le,ze,ct[1]].join(" ");else switch(B.precision){case 2:se=[R(_e/255),R(Le/255),R(ze/255),ct[1]].join(" ");break;default:case 3:se=[C(_e/255),C(Le/255),C(ze/255),ct[1]].join(" ")}}else if(typeof _e=="string")se=[_e,Le,ze,Qe,ct[2]].join(" ");else switch(B.precision){case 2:se=[R(_e),R(Le),R(ze),R(Qe),ct[2]].join(" ");break;case 3:default:se=[C(_e),C(Le),C(ze),C(Qe),ct[2]].join(" ")}return se},nl=f.__private__.getFilters=function(){return o},ko=f.__private__.putStream=function(B){var se=(B=B||{}).data||"",_e=B.filters||nl(),Le=B.alreadyAppliedFilters||[],ze=B.addLength1||!1,Qe=se.length,ct=B.objectId,kt=function($i){return $i};if(u!==null&&ct===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(kt=Ui.encryptor(ct,0));var $t={};_e===!0&&(_e=["FlateEncode"]);var en=B.additionalKeyValues||[],Jt=($t=zt.API.processDataByFilters!==void 0?zt.API.processDataByFilters(se,_e):{data:se,reverseChain:[]}).reverseChain+(Array.isArray(Le)?Le.join(" "):Le.toString());if($t.data.length!==0&&(en.push({key:"Length",value:$t.data.length}),ze===!0&&en.push({key:"Length1",value:Qe})),Jt.length!=0)if(Jt.split("/").length-1==1)en.push({key:"Filter",value:Jt});else{en.push({key:"Filter",value:"["+Jt+"]"});for(var _n=0;_n<en.length;_n+=1)if(en[_n].key==="DecodeParms"){for(var xr=[],Er=0;Er<$t.reverseChain.split("/").length-1;Er+=1)xr.push("null");xr.push(en[_n].value),en[_n].value="["+xr.join(" ")+"]"}}ne("<<");for(var Hr=0;Hr<en.length;Hr++)ne("/"+en[Hr].key+" "+en[Hr].value);ne(">>"),$t.data.length!==0&&(ne("stream"),ne(kt($t.data)),ne("endstream"))},rl=f.__private__.putPage=function(B){var se=B.number,_e=B.data,Le=B.objId,ze=B.contentsObjId;Js(Le,!0),ne("<</Type /Page"),ne("/Parent "+B.rootDictionaryObjId+" 0 R"),ne("/Resources "+B.resourceDictionaryObjId+" 0 R"),ne("/MediaBox ["+parseFloat(k(B.mediaBox.bottomLeftX))+" "+parseFloat(k(B.mediaBox.bottomLeftY))+" "+k(B.mediaBox.topRightX)+" "+k(B.mediaBox.topRightY)+"]"),B.cropBox!==null&&ne("/CropBox ["+k(B.cropBox.bottomLeftX)+" "+k(B.cropBox.bottomLeftY)+" "+k(B.cropBox.topRightX)+" "+k(B.cropBox.topRightY)+"]"),B.bleedBox!==null&&ne("/BleedBox ["+k(B.bleedBox.bottomLeftX)+" "+k(B.bleedBox.bottomLeftY)+" "+k(B.bleedBox.topRightX)+" "+k(B.bleedBox.topRightY)+"]"),B.trimBox!==null&&ne("/TrimBox ["+k(B.trimBox.bottomLeftX)+" "+k(B.trimBox.bottomLeftY)+" "+k(B.trimBox.topRightX)+" "+k(B.trimBox.topRightY)+"]"),B.artBox!==null&&ne("/ArtBox ["+k(B.artBox.bottomLeftX)+" "+k(B.artBox.bottomLeftY)+" "+k(B.artBox.topRightX)+" "+k(B.artBox.topRightY)+"]"),typeof B.userUnit=="number"&&B.userUnit!==1&&ne("/UserUnit "+B.userUnit),Fn.publish("putPage",{objId:Le,pageContext:Zt[se],pageNumber:se,page:_e}),ne("/Contents "+ze+" 0 R"),ne(">>"),ne("endobj");var Qe=_e.join(`
`);return x===v.ADVANCED&&(Qe+=`
Q`),Js(ze,!0),ko({data:Qe,filters:nl(),objectId:ze}),ne("endobj"),Le},Hh=f.__private__.putPages=function(){var B,se,_e=[];for(B=1;B<=Yn;B++)Zt[B].objId=$r(),Zt[B].contentsObjId=$r();for(B=1;B<=Yn;B++)_e.push(rl({number:B,data:Se[B],objId:Zt[B].objId,contentsObjId:Zt[B].contentsObjId,mediaBox:Zt[B].mediaBox,cropBox:Zt[B].cropBox,bleedBox:Zt[B].bleedBox,trimBox:Zt[B].trimBox,artBox:Zt[B].artBox,userUnit:Zt[B].userUnit,rootDictionaryObjId:uc,resourceDictionaryObjId:pa}));Js(uc,!0),ne("<</Type /Pages");var Le="/Kids [";for(se=0;se<Yn;se++)Le+=_e[se]+" 0 R ";ne(Le+"]"),ne("/Count "+Yn),ne(">>"),ne("endobj"),Fn.publish("postPutPages")},Qf=function(B){Fn.publish("putFont",{font:B,out:ne,newObject:ei,putStream:ko}),B.isAlreadyPutted!==!0&&(B.objectNumber=ei(),ne("<<"),ne("/Type /Font"),ne("/BaseFont /"+Kp(B.postScriptName)),ne("/Subtype /Type1"),typeof B.encoding=="string"&&ne("/Encoding /"+B.encoding),ne("/FirstChar 32"),ne("/LastChar 255"),ne(">>"),ne("endobj"))},ep=function(){for(var B in De)De.hasOwnProperty(B)&&(h===!1||h===!0&&d.hasOwnProperty(B))&&Qf(De[B])},tp=function(B){B.objectNumber=ei();var se=[];se.push({key:"Type",value:"/XObject"}),se.push({key:"Subtype",value:"/Form"}),se.push({key:"BBox",value:"["+[k(B.x),k(B.y),k(B.x+B.width),k(B.y+B.height)].join(" ")+"]"}),se.push({key:"Matrix",value:"["+B.matrix.toString()+"]"});var _e=B.pages[1].join(`
`);ko({data:_e,additionalKeyValues:se,objectId:B.objectNumber}),ne("endobj")},np=function(){for(var B in ki)ki.hasOwnProperty(B)&&tp(ki[B])},dx=function(B,se){var _e,Le=[],ze=1/(se-1);for(_e=0;_e<1;_e+=ze)Le.push(_e);if(Le.push(1),B[0].offset!=0){var Qe={offset:0,color:B[0].color};B.unshift(Qe)}if(B[B.length-1].offset!=1){var ct={offset:1,color:B[B.length-1].color};B.push(ct)}for(var kt="",$t=0,en=0;en<Le.length;en++){for(_e=Le[en];_e>B[$t+1].offset;)$t++;var Jt=B[$t].offset,_n=(_e-Jt)/(B[$t+1].offset-Jt),xr=B[$t].color,Er=B[$t+1].color;kt+=W(Math.round((1-_n)*xr[0]+_n*Er[0]).toString(16))+W(Math.round((1-_n)*xr[1]+_n*Er[1]).toString(16))+W(Math.round((1-_n)*xr[2]+_n*Er[2]).toString(16))}return kt.trim()},b5=function(B,se){se||(se=21);var _e=ei(),Le=dx(B.colors,se),ze=[];ze.push({key:"FunctionType",value:"0"}),ze.push({key:"Domain",value:"[0.0 1.0]"}),ze.push({key:"Size",value:"["+se+"]"}),ze.push({key:"BitsPerSample",value:"8"}),ze.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ze.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ko({data:Le,additionalKeyValues:ze,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:_e}),ne("endobj"),B.objectNumber=ei(),ne("<< /ShadingType "+B.type),ne("/ColorSpace /DeviceRGB");var Qe="/Coords ["+k(parseFloat(B.coords[0]))+" "+k(parseFloat(B.coords[1]))+" ";B.type===2?Qe+=k(parseFloat(B.coords[2]))+" "+k(parseFloat(B.coords[3])):Qe+=k(parseFloat(B.coords[2]))+" "+k(parseFloat(B.coords[3]))+" "+k(parseFloat(B.coords[4]))+" "+k(parseFloat(B.coords[5])),ne(Qe+="]"),B.matrix&&ne("/Matrix ["+B.matrix.toString()+"]"),ne("/Function "+_e+" 0 R"),ne("/Extend [true true]"),ne(">>"),ne("endobj")},y5=function(B,se){var _e=$r(),Le=ei();se.push({resourcesOid:_e,objectOid:Le}),B.objectNumber=Le;var ze=[];ze.push({key:"Type",value:"/Pattern"}),ze.push({key:"PatternType",value:"1"}),ze.push({key:"PaintType",value:"1"}),ze.push({key:"TilingType",value:"1"}),ze.push({key:"BBox",value:"["+B.boundingBox.map(k).join(" ")+"]"}),ze.push({key:"XStep",value:k(B.xStep)}),ze.push({key:"YStep",value:k(B.yStep)}),ze.push({key:"Resources",value:_e+" 0 R"}),B.matrix&&ze.push({key:"Matrix",value:"["+B.matrix.toString()+"]"}),ko({data:B.stream,additionalKeyValues:ze,objectId:B.objectNumber}),ne("endobj")},rp=function(B){var se;for(se in It)It.hasOwnProperty(se)&&(It[se]instanceof xd?b5(It[se]):It[se]instanceof lm&&y5(It[se],B))},fx=function(B){for(var se in B.objectNumber=ei(),ne("<<"),B)switch(se){case"opacity":ne("/ca "+R(B[se]));break;case"stroke-opacity":ne("/CA "+R(B[se]))}ne(">>"),ne("endobj")},v5=function(){var B;for(B in Kt)Kt.hasOwnProperty(B)&&fx(Kt[B])},p0=function(){for(var B in ne("/XObject <<"),ki)ki.hasOwnProperty(B)&&ki[B].objectNumber>=0&&ne("/"+B+" "+ki[B].objectNumber+" 0 R");Fn.publish("putXobjectDict"),ne(">>")},x5=function(){Ui.oid=ei(),ne("<<"),ne("/Filter /Standard"),ne("/V "+Ui.v),ne("/R "+Ui.r),ne("/U <"+Ui.toHexString(Ui.U)+">"),ne("/O <"+Ui.toHexString(Ui.O)+">"),ne("/P "+Ui.P),ne(">>"),ne("endobj")},px=function(){for(var B in ne("/Font <<"),De)De.hasOwnProperty(B)&&(h===!1||h===!0&&d.hasOwnProperty(B))&&ne("/"+B+" "+De[B].objectNumber+" 0 R");ne(">>")},_5=function(){if(Object.keys(It).length>0){for(var B in ne("/Shading <<"),It)It.hasOwnProperty(B)&&It[B]instanceof xd&&It[B].objectNumber>=0&&ne("/"+B+" "+It[B].objectNumber+" 0 R");Fn.publish("putShadingPatternDict"),ne(">>")}},ip=function(B){if(Object.keys(It).length>0){for(var se in ne("/Pattern <<"),It)It.hasOwnProperty(se)&&It[se]instanceof f.TilingPattern&&It[se].objectNumber>=0&&It[se].objectNumber<B&&ne("/"+se+" "+It[se].objectNumber+" 0 R");Fn.publish("putTilingPatternDict"),ne(">>")}},w5=function(){if(Object.keys(Kt).length>0){var B;for(B in ne("/ExtGState <<"),Kt)Kt.hasOwnProperty(B)&&Kt[B].objectNumber>=0&&ne("/"+B+" "+Kt[B].objectNumber+" 0 R");Fn.publish("putGStateDict"),ne(">>")}},Pr=function(B){Js(B.resourcesOid,!0),ne("<<"),ne("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),px(),_5(),ip(B.objectOid),w5(),p0(),ne(">>"),ne("endobj")},mx=function(){var B=[];ep(),v5(),np(),rp(B),Fn.publish("putResources"),B.forEach(Pr),Pr({resourcesOid:pa,objectOid:Number.MAX_SAFE_INTEGER}),Fn.publish("postPutResources")},gx=function(){Fn.publish("putAdditionalObjects");for(var B=0;B<be.length;B++){var se=be[B];Js(se.objId,!0),ne(se.content),ne("endobj")}Fn.publish("postPutAdditionalObjects")},bx=function(B){Ve[B.fontName]=Ve[B.fontName]||{},Ve[B.fontName][B.fontStyle]=B.id},m0=function(B,se,_e,Le,ze){var Qe={id:"F"+(Object.keys(De).length+1).toString(10),postScriptName:B,fontName:se,fontStyle:_e,encoding:Le,isStandardFont:ze||!1,metadata:{}};return Fn.publish("addFont",{font:Qe,instance:this}),De[Qe.id]=Qe,bx(Qe),Qe.id},S5=function(B){for(var se=0,_e=me.length;se<_e;se++){var Le=m0.call(this,B[se][0],B[se][1],B[se][2],me[se][3],!0);h===!1&&(d[Le]=!0);var ze=B[se][0].split("-");bx({id:Le,fontName:ze[0],fontStyle:ze[1]||""})}Fn.publish("addFonts",{fonts:De,dictionary:Ve})},ba=function(B){return B.foo=function(){try{return B.apply(this,arguments)}catch(Le){var se=Le.stack||"";~se.indexOf(" at ")&&(se=se.split(" at ")[1]);var _e="Error in function "+se.split(`
`)[0].split("<")[0]+": "+Le.message;if(!Gt.console)throw new Error(_e);Gt.console.error(_e,Le),Gt.alert&&alert(_e)}},B.foo.bar=B,B.foo},sp=function(B,se){var _e,Le,ze,Qe,ct,kt,$t,en,Jt;if(ze=(se=se||{}).sourceEncoding||"Unicode",ct=se.outputEncoding,(se.autoencode||ct)&&De[re].metadata&&De[re].metadata[ze]&&De[re].metadata[ze].encoding&&(Qe=De[re].metadata[ze].encoding,!ct&&De[re].encoding&&(ct=De[re].encoding),!ct&&Qe.codePages&&(ct=Qe.codePages[0]),typeof ct=="string"&&(ct=Qe[ct]),ct)){for($t=!1,kt=[],_e=0,Le=B.length;_e<Le;_e++)(en=ct[B.charCodeAt(_e)])?kt.push(String.fromCharCode(en)):kt.push(B[_e]),kt[_e].charCodeAt(0)>>8&&($t=!0);B=kt.join("")}for(_e=B.length;$t===void 0&&_e!==0;)B.charCodeAt(_e-1)>>8&&($t=!0),_e--;if(!$t)return B;for(kt=se.noBOM?[]:[254,255],_e=0,Le=B.length;_e<Le;_e++){if((Jt=(en=B.charCodeAt(_e))>>8)>>8)throw new Error("Character at position "+_e+" of string '"+B+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");kt.push(Jt),kt.push(en-(Jt<<8))}return String.fromCharCode.apply(void 0,kt)},Cs=f.__private__.pdfEscape=f.pdfEscape=function(B,se){return sp(B,se).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},g0=f.__private__.beginPage=function(B){Se[++Yn]=[],Zt[Yn]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(B[0]),topRightY:Number(B[1])}},vx(Yn),pe(Se[D])},yx=function(B,se){var _e,Le,ze;switch(n=se||n,typeof B=="string"&&(_e=y(B.toLowerCase()),Array.isArray(_e)&&(Le=_e[0],ze=_e[1])),Array.isArray(B)&&(Le=B[0]*$,ze=B[1]*$),isNaN(Le)&&(Le=i[0],ze=i[1]),(Le>14400||ze>14400)&&(Zn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Le=Math.min(14400,Le),ze=Math.min(14400,ze)),i=[Le,ze],n.substr(0,1)){case"l":ze>Le&&(i=[ze,Le]);break;case"p":Le>ze&&(i=[ze,Le])}g0(i),kx(x0),ne(ya),w0!==0&&ne(w0+" J"),S0!==0&&ne(S0+" j"),Fn.publish("addPage",{pageNumber:Yn})},E5=function(B){B>0&&B<=Yn&&(Se.splice(B,1),Zt.splice(B,1),Yn--,D>Yn&&(D=Yn),this.setPage(D))},vx=function(B){B>0&&B<=Yn&&(D=B)},k5=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Se.length-1},xx=function(B,se,_e){var Le,ze=void 0;return _e=_e||{},B=B!==void 0?B:De[re].fontName,se=se!==void 0?se:De[re].fontStyle,Le=B.toLowerCase(),Ve[Le]!==void 0&&Ve[Le][se]!==void 0?ze=Ve[Le][se]:Ve[B]!==void 0&&Ve[B][se]!==void 0?ze=Ve[B][se]:_e.disableWarning===!1&&Zn.warn("Unable to look up font label for font '"+B+"', '"+se+"'. Refer to getFontList() for available fonts."),ze||_e.noFallback||(ze=Ve.times[se])==null&&(ze=Ve.times.normal),ze},C5=f.__private__.putInfo=function(){var B=ei(),se=function(Le){return Le};for(var _e in u!==null&&(se=Ui.encryptor(B,0)),ne("<<"),ne("/Producer ("+Cs(se("jsPDF "+zt.version))+")"),et)et.hasOwnProperty(_e)&&et[_e]&&ne("/"+_e.substr(0,1).toUpperCase()+_e.substr(1)+" ("+Cs(se(et[_e]))+")");ne("/CreationDate ("+Cs(se(H))+")"),ne(">>"),ne("endobj")},b0=f.__private__.putCatalog=function(B){var se=(B=B||{}).rootDictionaryObjId||uc;switch(ei(),ne("<<"),ne("/Type /Catalog"),ne("/Pages "+se+" 0 R"),Re||(Re="fullwidth"),Re){case"fullwidth":ne("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ne("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ne("/OpenAction [3 0 R /Fit]");break;case"original":ne("/OpenAction [3 0 R /XYZ null null 1]");break;default:var _e=""+Re;_e.substr(_e.length-1)==="%"&&(Re=parseInt(Re)/100),typeof Re=="number"&&ne("/OpenAction [3 0 R /XYZ null null "+R(Re)+"]")}switch(Ee||(Ee="continuous"),Ee){case"continuous":ne("/PageLayout /OneColumn");break;case"single":ne("/PageLayout /SinglePage");break;case"two":case"twoleft":ne("/PageLayout /TwoColumnLeft");break;case"tworight":ne("/PageLayout /TwoColumnRight")}Fe&&ne("/PageMode /"+Fe),Fn.publish("putCatalog"),ne(">>"),ne("endobj")},T5=f.__private__.putTrailer=function(){ne("trailer"),ne("<<"),ne("/Size "+(te+1)),ne("/Root "+te+" 0 R"),ne("/Info "+(te-1)+" 0 R"),u!==null&&ne("/Encrypt "+Ui.oid+" 0 R"),ne("/ID [ <"+Q+"> <"+Q+"> ]"),ne(">>")},A5=f.__private__.putHeader=function(){ne("%PDF-"+m),ne("%")},P5=f.__private__.putXRef=function(){var B="0000000000";ne("xref"),ne("0 "+(te+1)),ne("0000000000 65535 f ");for(var se=1;se<=te;se++)typeof ee[se]=="function"?ne((B+ee[se]()).slice(-10)+" 00000 n "):ee[se]!==void 0?ne((B+ee[se]).slice(-10)+" 00000 n "):ne("0000000000 00000 n ")},hc=f.__private__.buildDocument=function(){q(),pe(K),Fn.publish("buildDocument"),A5(),Hh(),gx(),mx(),u!==null&&x5(),C5(),b0();var B=he;return P5(),T5(),ne("startxref"),ne(""+B),ne("%%EOF"),pe(Se[D]),K.join(`
`)},op=f.__private__.getBlob=function(B){return new Blob([ae(B)],{type:"application/pdf"})},ap=f.output=f.__private__.output=ba(function(B,se){switch(typeof(se=se||{})=="string"?se={filename:se}:se.filename=se.filename||"generated.pdf",B){case void 0:return hc();case"save":f.save(se.filename);break;case"arraybuffer":return ae(hc());case"blob":return op(hc());case"bloburi":case"bloburl":if(Gt.URL!==void 0&&typeof Gt.URL.createObjectURL=="function")return Gt.URL&&Gt.URL.createObjectURL(op(hc()))||void 0;Zn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var _e="",Le=hc();try{_e=CP(Le)}catch{_e=CP(unescape(encodeURIComponent(Le)))}return"data:application/pdf;filename="+se.filename+";base64,"+_e;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Gt)==="[object Window]"){var ze="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Qe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';se.pdfObjectUrl&&(ze=se.pdfObjectUrl,Qe="");var ct='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ze+'"'+Qe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(se)+");<\/script></body></html>",kt=Gt.open();return kt!==null&&kt.document.write(ct),kt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Gt)==="[object Window]"){var $t='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(se.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+se.filename+'" width="500px" height="400px" /></body></html>',en=Gt.open();if(en!==null){en.document.write($t);var Jt=this;en.document.documentElement.querySelector("#pdfViewer").onload=function(){en.document.title=se.filename,en.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Jt.output("bloburl"))}}return en}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Gt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var _n='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",se)+'"></iframe></body></html>',xr=Gt.open();if(xr!==null&&(xr.document.write(_n),xr.document.title=se.filename),xr||typeof safari>"u")return xr;break;case"datauri":case"dataurl":return Gt.document.location.href=this.output("datauristring",se);default:return null}}),_x=function(B){return Array.isArray($h)===!0&&$h.indexOf(B)>-1};switch(r){case"pt":$=1;break;case"mm":$=72/25.4;break;case"cm":$=72/2.54;break;case"in":$=72;break;case"px":$=_x("px_scaling")==1?.75:96/72;break;case"pc":case"em":$=12;break;case"ex":$=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);$=r}var Ui=null;Y(),J();var N5=function(B){return u!==null?Ui.encryptor(B,0):function(se){return se}},wx=f.__private__.getPageInfo=f.getPageInfo=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Zt[B].objId,pageNumber:B,pageContext:Zt[B]}},Xt=f.__private__.getPageInfoByObjId=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var se in Zt)if(Zt[se].objId===B)break;return wx(se)},L5=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Zt[D].objId,pageNumber:D,pageContext:Zt[D]}};f.addPage=function(){return yx.apply(this,arguments),this},f.setPage=function(){return vx.apply(this,arguments),pe.call(this,Se[D]),this},f.insertPage=function(B){return this.addPage(),this.movePage(D,B),this},f.movePage=function(B,se){var _e,Le;if(B>se){_e=Se[B],Le=Zt[B];for(var ze=B;ze>se;ze--)Se[ze]=Se[ze-1],Zt[ze]=Zt[ze-1];Se[se]=_e,Zt[se]=Le,this.setPage(se)}else if(B<se){_e=Se[B],Le=Zt[B];for(var Qe=B;Qe<se;Qe++)Se[Qe]=Se[Qe+1],Zt[Qe]=Zt[Qe+1];Se[se]=_e,Zt[se]=Le,this.setPage(se)}return this},f.deletePage=function(){return E5.apply(this,arguments),this},f.__private__.text=f.text=function(B,se,_e,Le,ze){var Qe,ct,kt,$t,en,Jt,_n,xr,Er,Hr=(Le=Le||{}).scope||this;if(typeof B=="number"&&typeof se=="number"&&(typeof _e=="string"||Array.isArray(_e))){var $i=_e;_e=se,se=B,B=$i}if(arguments[3]instanceof Vt?(_("The transform parameter of text() with a Matrix value"),Er=ze):(kt=arguments[4],$t=arguments[5],Vn(_n=arguments[3])==="object"&&_n!==null||(typeof kt=="string"&&($t=kt,kt=null),typeof _n=="string"&&($t=_n,_n=null),typeof _n=="number"&&(kt=_n,_n=null),Le={flags:_n,angle:kt,align:$t})),isNaN(se)||isNaN(_e)||B==null)throw new Error("Invalid arguments passed to jsPDF.text");if(B.length===0)return Hr;var ui="",va=!1,Qs=typeof Le.lineHeightFactor=="number"?Le.lineHeightFactor:Vh,ol=Hr.internal.scaleFactor;function Lx(tr){return tr=tr.split("	").join(Array(Le.TabLen||9).join(" ")),Cs(tr,_n)}function A0(tr){for(var nr,Lr=tr.concat(),ti=[],gc=Lr.length;gc--;)typeof(nr=Lr.shift())=="string"?ti.push(nr):Array.isArray(tr)&&(nr.length===1||nr[1]===void 0&&nr[2]===void 0)?ti.push(nr[0]):ti.push([nr[0],nr[1],nr[2]]);return ti}function P0(tr,nr){var Lr;if(typeof tr=="string")Lr=nr(tr)[0];else if(Array.isArray(tr)){for(var ti,gc,j0=tr.concat(),wp=[],Mx=j0.length;Mx--;)typeof(ti=j0.shift())=="string"?wp.push(nr(ti)[0]):Array.isArray(ti)&&typeof ti[0]=="string"&&(gc=nr(ti[0],ti[1],ti[2]),wp.push([gc[0],gc[1],gc[2]]));Lr=wp}return Lr}var fp=!1,N0=!0;if(typeof B=="string")fp=!0;else if(Array.isArray(B)){var L0=B.concat();ct=[];for(var pp,Ci=L0.length;Ci--;)(typeof(pp=L0.shift())!="string"||Array.isArray(pp)&&typeof pp[0]!="string")&&(N0=!1);fp=N0}if(fp===!1)throw new Error('Type of text must be string or Array. "'+B+'" is not recognized.');typeof B=="string"&&(B=B.match(/[\r?\n]/)?B.split(/\r\n|\r|\n/g):[B]);var mp=Pe/Hr.internal.scaleFactor,gp=mp*(Qs-1);switch(Le.baseline){case"bottom":_e-=gp;break;case"top":_e+=mp-gp;break;case"hanging":_e+=mp-2*gp;break;case"middle":_e+=mp/2-gp}if((Jt=Le.maxWidth||0)>0&&(typeof B=="string"?B=Hr.splitTextToSize(B,Jt):Object.prototype.toString.call(B)==="[object Array]"&&(B=B.reduce(function(tr,nr){return tr.concat(Hr.splitTextToSize(nr,Jt))},[]))),Qe={text:B,x:se,y:_e,options:Le,mutex:{pdfEscape:Cs,activeFontKey:re,fonts:De,activeFontSize:Pe}},Fn.publish("preProcessText",Qe),B=Qe.text,kt=(Le=Qe.options).angle,!(Er instanceof Vt)&&kt&&typeof kt=="number"){kt*=Math.PI/180,Le.rotationDirection===0&&(kt=-kt),x===v.ADVANCED&&(kt=-kt);var bp=Math.cos(kt),R0=Math.sin(kt);Er=new Vt(bp,R0,-R0,bp,0,0)}else kt&&kt instanceof Vt&&(Er=kt);x!==v.ADVANCED||Er||(Er=tl),(en=Le.charSpace||up)!==void 0&&(ui+=k(P(en))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(xr=Le.horizontalScale)!==void 0&&(ui+=k(100*xr)+` Tz
`),Le.lang;var Ts=-1,$5=Le.renderingMode!==void 0?Le.renderingMode:Le.stroke,I0=Hr.internal.getCurrentPageInfo().pageContext;switch($5){case 0:case!1:case"fill":Ts=0;break;case 1:case!0:case"stroke":Ts=1;break;case 2:case"fillThenStroke":Ts=2;break;case 3:case"invisible":Ts=3;break;case 4:case"fillAndAddForClipping":Ts=4;break;case 5:case"strokeAndAddPathForClipping":Ts=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ts=6;break;case 7:case"addToPathForClipping":Ts=7}var Rx=I0.usedRenderingMode!==void 0?I0.usedRenderingMode:-1;Ts!==-1?ui+=Ts+` Tr
`:Rx!==-1&&(ui+=`0 Tr
`),Ts!==-1&&(I0.usedRenderingMode=Ts),$t=Le.align||"left";var Co,yp=Pe*Qs,Ix=Hr.internal.pageSize.getWidth(),Ox=De[re];en=Le.charSpace||up,Jt=Le.maxWidth||0,_n=Object.assign({autoencode:!0,noBOM:!0},Le.flags);var fu=[],qh=function(tr){return Hr.getStringUnitWidth(tr,{font:Ox,charSpace:en,fontSize:Pe,doKerning:!1})*Pe/ol};if(Object.prototype.toString.call(B)==="[object Array]"){var As;ct=A0(B),$t!=="left"&&(Co=ct.map(qh));var as,pu=0;if($t==="right"){se-=Co[0],B=[],Ci=ct.length;for(var fc=0;fc<Ci;fc++)fc===0?(as=sl(se),As=dc(_e)):(as=P(pu-Co[fc]),As=-yp),B.push([ct[fc],as,As]),pu=Co[fc]}else if($t==="center"){se-=Co[0]/2,B=[],Ci=ct.length;for(var pc=0;pc<Ci;pc++)pc===0?(as=sl(se),As=dc(_e)):(as=P((pu-Co[pc])/2),As=-yp),B.push([ct[pc],as,As]),pu=Co[pc]}else if($t==="left"){B=[],Ci=ct.length;for(var vp=0;vp<Ci;vp++)B.push(ct[vp])}else if($t==="justify"&&Ox.encoding==="Identity-H"){B=[],Ci=ct.length,Jt=Jt!==0?Jt:Ix;for(var mc=0,Nr=0;Nr<Ci;Nr++)if(As=Nr===0?dc(_e):-yp,as=Nr===0?sl(se):mc,Nr<Ci-1){var O0=P((Jt-Co[Nr])/(ct[Nr].split(" ").length-1)),ls=ct[Nr].split(" ");B.push([ls[0]+" ",as,As]),mc=0;for(var To=1;To<ls.length;To++){var xp=(qh(ls[To-1]+" "+ls[To])-qh(ls[To]))*ol+O0;To==ls.length-1?B.push([ls[To],xp,0]):B.push([ls[To]+" ",xp,0]),mc-=xp}}else B.push([ct[Nr],as,As]);B.push(["",mc,0])}else{if($t!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(B=[],Ci=ct.length,Jt=Jt!==0?Jt:Ix,Nr=0;Nr<Ci;Nr++)As=Nr===0?dc(_e):-yp,as=Nr===0?sl(se):0,Nr<Ci-1?fu.push(k(P((Jt-Co[Nr])/(ct[Nr].split(" ").length-1)))):fu.push(0),B.push([ct[Nr],as,As])}}var Dx=typeof Le.R2L=="boolean"?Le.R2L:$e;Dx===!0&&(B=P0(B,function(tr,nr,Lr){return[tr.split("").reverse().join(""),nr,Lr]})),Qe={text:B,x:se,y:_e,options:Le,mutex:{pdfEscape:Cs,activeFontKey:re,fonts:De,activeFontSize:Pe}},Fn.publish("postProcessText",Qe),B=Qe.text,va=Qe.mutex.isHex||!1;var D0=De[re].encoding;D0!=="WinAnsiEncoding"&&D0!=="StandardEncoding"||(B=P0(B,function(tr,nr,Lr){return[Lx(tr),nr,Lr]})),ct=A0(B),B=[];for(var Kh,Yh,mu,Xh=0,_p=1,Zh=Array.isArray(ct[0])?_p:Xh,gu="",M0=function(tr,nr,Lr){var ti="";return Lr instanceof Vt?(Lr=typeof Le.angle=="number"?fa(Lr,new Vt(1,0,0,1,tr,nr)):fa(new Vt(1,0,0,1,tr,nr),Lr),x===v.ADVANCED&&(Lr=fa(new Vt(1,0,0,-1,0,0),Lr)),ti=Lr.join(" ")+` Tm
`):ti=k(tr)+" "+k(nr)+` Td
`,ti},Ao=0;Ao<ct.length;Ao++){switch(gu="",Zh){case _p:mu=(va?"<":"(")+ct[Ao][0]+(va?">":")"),Kh=parseFloat(ct[Ao][1]),Yh=parseFloat(ct[Ao][2]);break;case Xh:mu=(va?"<":"(")+ct[Ao]+(va?">":")"),Kh=sl(se),Yh=dc(_e)}fu!==void 0&&fu[Ao]!==void 0&&(gu=fu[Ao]+` Tw
`),Ao===0?B.push(gu+M0(Kh,Yh,Er)+mu):Zh===Xh?B.push(gu+mu):Zh===_p&&B.push(gu+M0(Kh,Yh,Er)+mu)}B=Zh===Xh?B.join(` Tj
T* `):B.join(` Tj
`),B+=` Tj
`;var Po=`BT
/`;return Po+=re+" "+Pe+` Tf
`,Po+=k(Pe*Qs)+` TL
`,Po+=Wh+`
`,Po+=ui,Po+=B,ne(Po+="ET"),d[re]=!0,Hr};var R5=f.__private__.clip=f.clip=function(B){return ne(B==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return R5("evenodd")},f.__private__.discardPath=f.discardPath=function(){return ne("n"),this};var il=f.__private__.isValidStyle=function(B){var se=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(B)!==-1&&(se=!0),se};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(B){return il(B)&&(c=B),this};var Sx=f.__private__.getStyle=f.getStyle=function(B){var se=c;switch(B){case"D":case"S":se="S";break;case"F":se="f";break;case"FD":case"DF":se="B";break;case"f":case"f*":case"B":case"B*":se=B}return se},Ex=f.close=function(){return ne("h"),this};f.stroke=function(){return ne("S"),this},f.fill=function(B){return lp("f",B),this},f.fillEvenOdd=function(B){return lp("f*",B),this},f.fillStroke=function(B){return lp("B",B),this},f.fillStrokeEvenOdd=function(B){return lp("B*",B),this};var lp=function(B,se){Vn(se)==="object"?O5(se,B):ne(B)},y0=function(B){B===null||x===v.ADVANCED&&B===void 0||(B=Sx(B),ne(B))};function I5(B,se,_e,Le,ze){var Qe=new lm(se||this.boundingBox,_e||this.xStep,Le||this.yStep,this.gState,ze||this.matrix);Qe.stream=this.stream;var ct=B+"$$"+this.cloneIndex+++"$$";return ks(ct,Qe),Qe}var O5=function(B,se){var _e=xn[B.key],Le=It[_e];if(Le instanceof xd)ne("q"),ne(D5(se)),Le.gState&&f.setGState(Le.gState),ne(B.matrix.toString()+" cm"),ne("/"+_e+" sh"),ne("Q");else if(Le instanceof lm){var ze=new Vt(1,0,0,-1,0,du());B.matrix&&(ze=ze.multiply(B.matrix||tl),_e=I5.call(Le,B.key,B.boundingBox,B.xStep,B.yStep,ze).id),ne("q"),ne("/Pattern cs"),ne("/"+_e+" scn"),Le.gState&&f.setGState(Le.gState),ne(se),ne("Q")}},D5=function(B){switch(B){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},v0=f.moveTo=function(B,se){return ne(k(P(B))+" "+k(N(se))+" m"),this},zh=f.lineTo=function(B,se){return ne(k(P(B))+" "+k(N(se))+" l"),this},uu=f.curveTo=function(B,se,_e,Le,ze,Qe){return ne([k(P(B)),k(N(se)),k(P(_e)),k(N(Le)),k(P(ze)),k(N(Qe)),"c"].join(" ")),this};f.__private__.line=f.line=function(B,se,_e,Le,ze){if(isNaN(B)||isNaN(se)||isNaN(_e)||isNaN(Le)||!il(ze))throw new Error("Invalid arguments passed to jsPDF.line");return x===v.COMPAT?this.lines([[_e-B,Le-se]],B,se,[1,1],ze||"S"):this.lines([[_e-B,Le-se]],B,se,[1,1]).stroke()},f.__private__.lines=f.lines=function(B,se,_e,Le,ze,Qe){var ct,kt,$t,en,Jt,_n,xr,Er,Hr,$i,ui,va;if(typeof B=="number"&&(va=_e,_e=se,se=B,B=va),Le=Le||[1,1],Qe=Qe||!1,isNaN(se)||isNaN(_e)||!Array.isArray(B)||!Array.isArray(Le)||!il(ze)||typeof Qe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(v0(se,_e),ct=Le[0],kt=Le[1],en=B.length,$i=se,ui=_e,$t=0;$t<en;$t++)(Jt=B[$t]).length===2?($i=Jt[0]*ct+$i,ui=Jt[1]*kt+ui,zh($i,ui)):(_n=Jt[0]*ct+$i,xr=Jt[1]*kt+ui,Er=Jt[2]*ct+$i,Hr=Jt[3]*kt+ui,$i=Jt[4]*ct+$i,ui=Jt[5]*kt+ui,uu(_n,xr,Er,Hr,$i,ui));return Qe&&Ex(),y0(ze),this},f.path=function(B){for(var se=0;se<B.length;se++){var _e=B[se],Le=_e.c;switch(_e.op){case"m":v0(Le[0],Le[1]);break;case"l":zh(Le[0],Le[1]);break;case"c":uu.apply(this,Le);break;case"h":Ex()}}return this},f.__private__.rect=f.rect=function(B,se,_e,Le,ze){if(isNaN(B)||isNaN(se)||isNaN(_e)||isNaN(Le)||!il(ze))throw new Error("Invalid arguments passed to jsPDF.rect");return x===v.COMPAT&&(Le=-Le),ne([k(P(B)),k(N(se)),k(P(_e)),k(P(Le)),"re"].join(" ")),y0(ze),this},f.__private__.triangle=f.triangle=function(B,se,_e,Le,ze,Qe,ct){if(isNaN(B)||isNaN(se)||isNaN(_e)||isNaN(Le)||isNaN(ze)||isNaN(Qe)||!il(ct))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[_e-B,Le-se],[ze-_e,Qe-Le],[B-ze,se-Qe]],B,se,[1,1],ct,!0),this},f.__private__.roundedRect=f.roundedRect=function(B,se,_e,Le,ze,Qe,ct){if(isNaN(B)||isNaN(se)||isNaN(_e)||isNaN(Le)||isNaN(ze)||isNaN(Qe)||!il(ct))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var kt=4/3*(Math.SQRT2-1);return ze=Math.min(ze,.5*_e),Qe=Math.min(Qe,.5*Le),this.lines([[_e-2*ze,0],[ze*kt,0,ze,Qe-Qe*kt,ze,Qe],[0,Le-2*Qe],[0,Qe*kt,-ze*kt,Qe,-ze,Qe],[2*ze-_e,0],[-ze*kt,0,-ze,-Qe*kt,-ze,-Qe],[0,2*Qe-Le],[0,-Qe*kt,ze*kt,-Qe,ze,-Qe]],B+ze,se,[1,1],ct,!0),this},f.__private__.ellipse=f.ellipse=function(B,se,_e,Le,ze){if(isNaN(B)||isNaN(se)||isNaN(_e)||isNaN(Le)||!il(ze))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Qe=4/3*(Math.SQRT2-1)*_e,ct=4/3*(Math.SQRT2-1)*Le;return v0(B+_e,se),uu(B+_e,se-ct,B+Qe,se-Le,B,se-Le),uu(B-Qe,se-Le,B-_e,se-ct,B-_e,se),uu(B-_e,se+ct,B-Qe,se+Le,B,se+Le),uu(B+Qe,se+Le,B+_e,se+ct,B+_e,se),y0(ze),this},f.__private__.circle=f.circle=function(B,se,_e,Le){if(isNaN(B)||isNaN(se)||isNaN(_e)||!il(Le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(B,se,_e,_e,Le)},f.setFont=function(B,se,_e){return _e&&(se=E(se,_e)),re=xx(B,se,{disableWarning:!1}),this};var M5=f.__private__.getFont=f.getFont=function(){return De[xx.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var B,se,_e={};for(B in Ve)if(Ve.hasOwnProperty(B))for(se in _e[B]=[],Ve[B])Ve[B].hasOwnProperty(se)&&_e[B].push(se);return _e},f.addFont=function(B,se,_e,Le,ze){var Qe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Qe.indexOf(arguments[3])!==-1?ze=arguments[3]:arguments[3]&&Qe.indexOf(arguments[3])==-1&&(_e=E(_e,Le)),ze=ze||"Identity-H",m0.call(this,B,se,_e,ze)};var Vh,x0=t.lineWidth||.200025,cp=f.__private__.getLineWidth=f.getLineWidth=function(){return x0},kx=f.__private__.setLineWidth=f.setLineWidth=function(B){return x0=B,ne(k(P(B))+" w"),this};f.__private__.setLineDash=zt.API.setLineDash=zt.API.setLineDashPattern=function(B,se){if(B=B||[],se=se||0,isNaN(se)||!Array.isArray(B))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return B=B.map(function(_e){return k(P(_e))}).join(" "),se=k(P(se)),ne("["+B+"] "+se+" d"),this};var Cx=f.__private__.getLineHeight=f.getLineHeight=function(){return Pe*Vh};f.__private__.getLineHeight=f.getLineHeight=function(){return Pe*Vh};var Tx=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(B){return typeof(B=B||1.15)=="number"&&(Vh=B),this},Ax=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Vh};Tx(t.lineHeight);var sl=f.__private__.getHorizontalCoordinate=function(B){return P(B)},dc=f.__private__.getVerticalCoordinate=function(B){return x===v.ADVANCED?B:Zt[D].mediaBox.topRightY-Zt[D].mediaBox.bottomLeftY-P(B)},j5=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(B){return k(sl(B))},hu=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(B){return k(dc(B))},ya=t.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return ma(ya)},f.__private__.setStrokeColor=f.setDrawColor=function(B,se,_e,Le){return ya=ga({ch1:B,ch2:se,ch3:_e,ch4:Le,pdfColorType:"draw",precision:2}),ne(ya),this};var _0=t.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return ma(_0)},f.__private__.setFillColor=f.setFillColor=function(B,se,_e,Le){return _0=ga({ch1:B,ch2:se,ch3:_e,ch4:Le,pdfColorType:"fill",precision:2}),ne(_0),this};var Wh=t.textColor||"0 g",F5=f.__private__.getTextColor=f.getTextColor=function(){return ma(Wh)};f.__private__.setTextColor=f.setTextColor=function(B,se,_e,Le){return Wh=ga({ch1:B,ch2:se,ch3:_e,ch4:Le,pdfColorType:"text",precision:3}),this};var up=t.charSpace,B5=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(up||0)};f.__private__.setCharSpace=f.setCharSpace=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return up=B,this};var w0=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(B){var se=f.CapJoinStyles[B];if(se===void 0)throw new Error("Line cap style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return w0=se,ne(se+" J"),this};var S0=0;f.__private__.setLineJoin=f.setLineJoin=function(B){var se=f.CapJoinStyles[B];if(se===void 0)throw new Error("Line join style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return S0=se,ne(se+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(B){if(B=B||0,isNaN(B))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ne(k(P(B))+" M"),this},f.GState=xS,f.setGState=function(B){(B=typeof B=="string"?Kt[nn[B]]:Px(null,B)).equals(os)||(ne("/"+B.id+" gs"),os=B)};var Px=function(B,se){if(!B||!nn[B]){var _e=!1;for(var Le in Kt)if(Kt.hasOwnProperty(Le)&&Kt[Le].equals(se)){_e=!0;break}if(_e)se=Kt[Le];else{var ze="GS"+(Object.keys(Kt).length+1).toString(10);Kt[ze]=se,se.id=ze}return B&&(nn[B]=se.id),Fn.publish("addGState",se),se}};f.addGState=function(B,se){return Px(B,se),this},f.saveGraphicsState=function(){return ne("q"),Ft.push({key:re,size:Pe,color:Wh}),this},f.restoreGraphicsState=function(){ne("Q");var B=Ft.pop();return re=B.key,Pe=B.size,Wh=B.color,os=null,this},f.setCurrentTransformationMatrix=function(B){return ne(B.toString()+" cm"),this},f.comment=function(B){return ne("#"+B),this};var hp=function(B,se){var _e=B||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return _e},set:function(Qe){isNaN(Qe)||(_e=parseFloat(Qe))}});var Le=se||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Le},set:function(Qe){isNaN(Qe)||(Le=parseFloat(Qe))}});var ze="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ze},set:function(Qe){ze=Qe.toString()}}),this},E0=function(B,se,_e,Le){hp.call(this,B,se),this.type="rect";var ze=_e||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ze},set:function(ct){isNaN(ct)||(ze=parseFloat(ct))}});var Qe=Le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Qe},set:function(ct){isNaN(ct)||(Qe=parseFloat(ct))}}),this},k0=function(){this.page=Yn,this.currentPage=D,this.pages=Se.slice(0),this.pagesContext=Zt.slice(0),this.x=G,this.y=ue,this.matrix=Ne,this.width=Gh(D),this.height=du(D),this.outputDestination=ke,this.id="",this.objectNumber=-1};k0.prototype.restore=function(){Yn=this.page,D=this.currentPage,Zt=this.pagesContext,Se=this.pages,G=this.x,ue=this.y,Ne=this.matrix,C0(D,this.width),T0(D,this.height),ke=this.outputDestination};var Nx=function(B,se,_e,Le,ze){el.push(new k0),Yn=D=0,Se=[],G=B,ue=se,Ne=ze,g0([_e,Le])},U5=function(B){if(Qa[B])el.pop().restore();else{var se=new k0,_e="Xo"+(Object.keys(ki).length+1).toString(10);se.id=_e,Qa[B]=_e,ki[_e]=se,Fn.publish("addFormObject",se),el.pop().restore()}};for(var dp in f.beginFormObject=function(B,se,_e,Le,ze){return Nx(B,se,_e,Le,ze),this},f.endFormObject=function(B){return U5(B),this},f.doFormObject=function(B,se){var _e=ki[Qa[B]];return ne("q"),ne(se.toString()+" cm"),ne("/"+_e.id+" Do"),ne("Q"),this},f.getFormObject=function(B){var se=ki[Qa[B]];return{x:se.x,y:se.y,width:se.width,height:se.height,matrix:se.matrix}},f.save=function(B,se){return B=B||"generated.pdf",(se=se||{}).returnPromise=se.returnPromise||!1,se.returnPromise===!1?(dd(op(hc()),B),typeof dd.unload=="function"&&Gt.setTimeout&&setTimeout(dd.unload,911),this):new Promise(function(_e,Le){try{var ze=dd(op(hc()),B);typeof dd.unload=="function"&&Gt.setTimeout&&setTimeout(dd.unload,911),_e(ze)}catch(Qe){Le(Qe.message)}})},zt.API)zt.API.hasOwnProperty(dp)&&(dp==="events"&&zt.API.events.length?function(B,se){var _e,Le,ze;for(ze=se.length-1;ze!==-1;ze--)_e=se[ze][0],Le=se[ze][1],B.subscribe.apply(B,[_e].concat(typeof Le=="function"?[Le]:Le))}(Fn,zt.API.events):f[dp]=zt.API[dp]);var Gh=f.getPageWidth=function(B){return(Zt[B=B||D].mediaBox.topRightX-Zt[B].mediaBox.bottomLeftX)/$},C0=f.setPageWidth=function(B,se){Zt[B].mediaBox.topRightX=se*$+Zt[B].mediaBox.bottomLeftX},du=f.getPageHeight=function(B){return(Zt[B=B||D].mediaBox.topRightY-Zt[B].mediaBox.bottomLeftY)/$},T0=f.setPageHeight=function(B,se){Zt[B].mediaBox.topRightY=se*$+Zt[B].mediaBox.bottomLeftY};return f.internal={pdfEscape:Cs,getStyle:Sx,getFont:M5,getFontSize:we,getCharSpace:B5,getTextColor:F5,getLineHeight:Cx,getLineHeightFactor:Ax,getLineWidth:cp,write:oe,getHorizontalCoordinate:sl,getVerticalCoordinate:dc,getCoordinateString:j5,getVerticalCoordinateString:hu,collections:{},newObject:ei,newAdditionalObject:Jf,newObjectDeferred:$r,newObjectDeferredBegin:Js,getFilters:nl,putStream:ko,events:Fn,scaleFactor:$,pageSize:{getWidth:function(){return Gh(D)},setWidth:function(B){C0(D,B)},getHeight:function(){return du(D)},setHeight:function(B){T0(D,B)}},encryptionOptions:u,encryption:Ui,getEncryptor:N5,output:ap,getNumberOfPages:k5,pages:Se,out:ne,f2:R,f3:C,getPageInfo:wx,getPageInfoByObjId:Xt,getCurrentPageInfo:L5,getPDFVersion:g,Point:hp,Rectangle:E0,Matrix:Vt,hasHotfix:_x},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Gh(D)},set:function(B){C0(D,B)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return du(D)},set:function(B){T0(D,B)},enumerable:!0,configurable:!0}),S5.call(f,me),re="F1",yx(i,n),Fn.publish("initialized"),f}qp.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},qp.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},qp.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},qp.prototype.processOwnerPassword=function(t,e){return AP(TP(e).substr(0,5),t)},qp.prototype.encryptor=function(t,e){var n=TP(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return AP(n,r)}},xS.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Vn(t)!==Vn(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},zt.API={events:[]},zt.version="2.5.2";var Tr=zt.API,gI=1,Hf=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Dp=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Qt=function(t){return t.toFixed(2)},Cu=function(t){return t.toFixed(5)};Tr.__acroform__={};var Ks=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Dj=function(t){return t*gI},vl=function(t){var e=new SZ,n=Dt.internal.getHeight(t)||0,r=Dt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Qt(r)),Number(Qt(n))],e},HAe=Tr.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},zAe=Tr.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},VAe=Tr.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Dr=Tr.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return VAe(t,e-1)},Mr=Tr.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return HAe(t,e-1)},jr=Tr.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return zAe(t,e-1)},WAe=Tr.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(Qt(l.lowerLeft_X)),Number(Qt(l.lowerLeft_Y)),Number(Qt(l.upperRight_X)),Number(Qt(l.upperRight_Y))]},GAe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=PP(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Qt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=vl(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},PP=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(C){return C.split(`
`)}):i.map(function(C){return[C]});var s=n,o=Dt.internal.getHeight(t)||0;o=o<0?-o:o;var a=Dt.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(C,P,O){if(C+1<i.length){var N=P+" "+i[C+1][0];return P_(N,t,O).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,u,h=P_("3",t,s).height,d=t.multiline?o-s:(o-h)/2,f=d+=2,m=0,g=0,b=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+P_(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var y="",v=0,x=0;x<i.length;x++)if(i.hasOwnProperty(x)){var w=!1;if(i[x].length!==1&&b!==i[x].length-1){if((h+2)*(v+2)+2>o)continue e;y+=i[x][b],w=!0,g=x,x--}else{y=(y+=i[x][b]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var S=parseInt(x),E=l(S,y,s),k=x>=i.length-1;if(E&&!k){y+=" ",b=0;continue}if(E||k){if(k)g=S;else if(t.multiline&&(h+2)*(v+2)+2>o)continue e}else{if(!t.multiline||(h+2)*(v+2)+2>o)continue e;g=S}}for(var _="",L=m;L<=g;L++){var R=i[L];if(t.multiline){if(L===g){_+=R[b]+" ",b=(b+1)%R.length;continue}if(L===m){_+=R[R.length-1]+" ";continue}}_+=R[0]+" "}switch(_=_.substr(_.length-1)==" "?_.substr(0,_.length-1):_,u=P_(_,t,s).width,t.textAlign){case"right":c=a-u-2;break;case"center":c=(a-u)/2;break;case"left":default:c=2}e+=Qt(c)+" "+Qt(f)+` Td
`,e+="("+Hf(_)+`) Tj
`,e+=-Qt(c)+` 0 Td
`,f=-(s+2),u=0,m=w?g:g+1,v++,y=""}break}return r.text=e,r.fontSize=s,r},P_=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},qAe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},KAe=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},YAe=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Vn(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},XAe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(qa.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(qAe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");gI=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new EZ,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&KAe(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=WAe(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Dt.createDefaultAppearanceStream(a),Vn(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var u=GAe(a);l.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(a.appearanceStreamContent){var h="";for(var d in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(d)){var f=a.appearanceStreamContent[d];if(h+="/"+d+" ",h+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var m=f[o];typeof m=="function"&&(m=m.call(i,a)),h+="/"+o+" "+m+" ",i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m)}}else typeof(m=f)=="function"&&(m=m.call(i,a)),h+="/"+o+" "+m,i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&YAe(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},wZ=Tr.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Vn(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Hf(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},uT=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Hf(r(t))+")"},Fl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Fl.prototype.toString=function(){return this.objId+" 0 R"},Fl.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Fl.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:wZ(i,this.objId,this.scope)}):i instanceof Fl?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var SZ=function(){Fl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Ks(SZ,Fl);var EZ=function(){Fl.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Hf(n(t))+")"}},set:function(n){t=n}})};Ks(EZ,Fl);var qa=function t(){Fl.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');e=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Dr(e,3)},set:function(y){y?this.F=Mr(e,3):this.F=jr(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');n=y}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(y){r=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(y){r[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(y){r[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(y){r[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(y){r[3]=y}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof _S)return;s="FieldObject"+t.FieldNum++}var y=function(v){return v};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Hf(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(y){a=y}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/gI:c},set:function(y){c=y}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(y){u=y}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof _S||this instanceof Qd))return uT(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=y}});var d=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof mi?d:uT(d,this.objId,this.scope)},set:function(y){y=y.toString(),d=this instanceof mi?y:y.substr(0,1)==="("?Dp(y.substr(1,y.length-2)):Dp(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mi?Dp(d.substr(1,d.length-1)):d},set:function(y){y=y.toString(),d=this instanceof mi?"/"+y:y}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof mi?f:uT(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=this instanceof mi?y:y.substr(0,1)==="("?Dp(y.substr(1,y.length-2)):Dp(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mi?Dp(f.substr(1,f.length-1)):f},set:function(y){y=y.toString(),f=this instanceof mi?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(y){y=!!y,g=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(y){m=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Dr(this.Ff,1)},set:function(y){y?this.Ff=Mr(this.Ff,1):this.Ff=jr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Dr(this.Ff,2)},set:function(y){y?this.Ff=Mr(this.Ff,2):this.Ff=jr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Dr(this.Ff,3)},set:function(y){y?this.Ff=Mr(this.Ff,3):this.Ff=jr(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');b=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(b){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};Ks(qa,Fl);var Sm=function(){qa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return wZ(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Dr(this.Ff,18)},set:function(n){n?this.Ff=Mr(this.Ff,18):this.Ff=jr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Dr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Mr(this.Ff,19):this.Ff=jr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Dr(this.Ff,20)},set:function(n){n?(this.Ff=Mr(this.Ff,20),e.sort()):this.Ff=jr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Dr(this.Ff,22)},set:function(n){n?this.Ff=Mr(this.Ff,22):this.Ff=jr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Dr(this.Ff,23)},set:function(n){n?this.Ff=Mr(this.Ff,23):this.Ff=jr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Dr(this.Ff,27)},set:function(n){n?this.Ff=Mr(this.Ff,27):this.Ff=jr(this.Ff,27)}}),this.hasAppearanceStream=!1};Ks(Sm,qa);var Em=function(){Sm.call(this),this.fontName="helvetica",this.combo=!1};Ks(Em,Sm);var km=function(){Em.call(this),this.combo=!0};Ks(km,Em);var e2=function(){km.call(this),this.edit=!0};Ks(e2,km);var mi=function(){qa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Dr(this.Ff,15)},set:function(n){n?this.Ff=Mr(this.Ff,15):this.Ff=jr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Dr(this.Ff,16)},set:function(n){n?this.Ff=Mr(this.Ff,16):this.Ff=jr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Dr(this.Ff,17)},set:function(n){n?this.Ff=Mr(this.Ff,17):this.Ff=jr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Dr(this.Ff,26)},set:function(n){n?this.Ff=Mr(this.Ff,26):this.Ff=jr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Hf(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Vn(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Ks(mi,qa);var t2=function(){mi.call(this),this.pushButton=!0};Ks(t2,mi);var Cm=function(){mi.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Ks(Cm,mi);var _S=function(){var t,e;qa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Hf(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Vn(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Dt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ks(_S,qa),Cm.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Cm.prototype.createOption=function(t){var e=new _S;return e.Parent=this,e.optionName=t,this.Kids.push(e),ZAe.call(this.scope,e),e};var n2=function(){mi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Dt.CheckBox.createAppearanceStream()};Ks(n2,mi);var Qd=function(){qa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Dr(this.Ff,13)},set:function(e){e?this.Ff=Mr(this.Ff,13):this.Ff=jr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Dr(this.Ff,21)},set:function(e){e?this.Ff=Mr(this.Ff,21):this.Ff=jr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Dr(this.Ff,23)},set:function(e){e?this.Ff=Mr(this.Ff,23):this.Ff=jr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Dr(this.Ff,24)},set:function(e){e?this.Ff=Mr(this.Ff,24):this.Ff=jr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Dr(this.Ff,25)},set:function(e){e?this.Ff=Mr(this.Ff,25):this.Ff=jr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Dr(this.Ff,26)},set:function(e){e?this.Ff=Mr(this.Ff,26):this.Ff=jr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ks(Qd,qa);var r2=function(){Qd.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Dr(this.Ff,14)},set:function(t){t?this.Ff=Mr(this.Ff,14):this.Ff=jr(this.Ff,14)}}),this.password=!0};Ks(r2,Qd);var Dt={CheckBox:{createAppearanceStream:function(){return{N:{On:Dt.CheckBox.YesNormal},D:{On:Dt.CheckBox.YesPushDown,Off:Dt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=vl(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=PP(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Qt(Dt.internal.getWidth(t))+" "+Qt(Dt.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Qt(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=vl(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=Dt.internal.getHeight(t),o=Dt.internal.getWidth(t),a=PP(t,t.caption);return i.push("1 g"),i.push("0 0 "+Qt(o)+" "+Qt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Qt(o-1)+" "+Qt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Qt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=vl(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Qt(Dt.internal.getWidth(t))+" "+Qt(Dt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Dt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Dt.RadioButton.Circle.YesNormal,e.D[t]=Dt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=vl(t);e.scope=t.scope;var n=[],r=Dt.internal.getWidth(t)<=Dt.internal.getHeight(t)?Dt.internal.getWidth(t)/4:Dt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Dt.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Cu(Dt.internal.getWidth(t)/2)+" "+Cu(Dt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=vl(t);e.scope=t.scope;var n=[],r=Dt.internal.getWidth(t)<=Dt.internal.getHeight(t)?Dt.internal.getWidth(t)/4:Dt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Dt.internal.Bezier_C).toFixed(5)),o=Number((r*Dt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Cu(Dt.internal.getWidth(t)/2)+" "+Cu(Dt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Cu(Dt.internal.getWidth(t)/2)+" "+Cu(Dt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=vl(t);e.scope=t.scope;var n=[],r=Dt.internal.getWidth(t)<=Dt.internal.getHeight(t)?Dt.internal.getWidth(t)/4:Dt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Dt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Cu(Dt.internal.getWidth(t)/2)+" "+Cu(Dt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Dt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Dt.RadioButton.Cross.YesNormal,e.D[t]=Dt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=vl(t);e.scope=t.scope;var n=[],r=Dt.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Qt(Dt.internal.getWidth(t)-2)+" "+Qt(Dt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Qt(r.x1.x)+" "+Qt(r.x1.y)+" m"),n.push(Qt(r.x2.x)+" "+Qt(r.x2.y)+" l"),n.push(Qt(r.x4.x)+" "+Qt(r.x4.y)+" m"),n.push(Qt(r.x3.x)+" "+Qt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=vl(t);e.scope=t.scope;var n=Dt.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Qt(Dt.internal.getWidth(t))+" "+Qt(Dt.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Qt(Dt.internal.getWidth(t)-2)+" "+Qt(Dt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Qt(n.x1.x)+" "+Qt(n.x1.y)+" m"),r.push(Qt(n.x2.x)+" "+Qt(n.x2.y)+" l"),r.push(Qt(n.x4.x)+" "+Qt(n.x4.y)+" m"),r.push(Qt(n.x3.x)+" "+Qt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=vl(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Qt(Dt.internal.getWidth(t))+" "+Qt(Dt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Dt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Dt.internal.getWidth(t),n=Dt.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Dt.internal.getWidth=function(t){var e=0;return Vn(t)==="object"&&(e=Dj(t.Rect[2])),e},Dt.internal.getHeight=function(t){var e=0;return Vn(t)==="object"&&(e=Dj(t.Rect[3])),e};var ZAe=Tr.addField=function(t){if(XAe(this,t),!(t instanceof qa))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Tr.AcroFormChoiceField=Sm,Tr.AcroFormListBox=Em,Tr.AcroFormComboBox=km,Tr.AcroFormEditBox=e2,Tr.AcroFormButton=mi,Tr.AcroFormPushButton=t2,Tr.AcroFormRadioButton=Cm,Tr.AcroFormCheckBox=n2,Tr.AcroFormTextField=Qd,Tr.AcroFormPasswordField=r2,Tr.AcroFormAppearance=Dt,Tr.AcroForm={ChoiceField:Sm,ListBox:Em,ComboBox:km,EditBox:e2,Button:mi,PushButton:t2,RadioButton:Cm,CheckBox:n2,TextField:Qd,PasswordField:r2,Appearance:Dt},zt.AcroForm={ChoiceField:Sm,ListBox:Em,ComboBox:km,EditBox:e2,Button:mi,PushButton:t2,RadioButton:Cm,CheckBox:n2,TextField:Qd,PasswordField:r2,Appearance:Dt};zt.AcroForm;function kZ(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(C,P){var O,N,H,Q,X,J=e;if((P=P||e)==="RGBA"||C.data!==void 0&&C.data instanceof Uint8ClampedArray&&"height"in C&&"width"in C)return"RGBA";if(E(C))for(X in n)for(H=n[X],O=0;O<H.length;O+=1){for(Q=!0,N=0;N<H[O].length;N+=1)if(H[O][N]!==void 0&&H[O][N]!==C[N]){Q=!1;break}if(Q===!0){J=X;break}}else for(X in n)for(H=n[X],O=0;O<H.length;O+=1){for(Q=!0,N=0;N<H[O].length;N+=1)if(H[O][N]!==void 0&&H[O][N]!==C.charCodeAt(N)){Q=!1;break}if(Q===!0){J=X;break}}return J===e&&P!==e&&(J=P),J},i=function C(P){for(var O=this.internal.write,N=this.internal.putStream,H=(0,this.internal.getFilters)();H.indexOf("FlateEncode")!==-1;)H.splice(H.indexOf("FlateEncode"),1);P.objectId=this.internal.newObject();var Q=[];if(Q.push({key:"Type",value:"/XObject"}),Q.push({key:"Subtype",value:"/Image"}),Q.push({key:"Width",value:P.width}),Q.push({key:"Height",value:P.height}),P.colorSpace===b.INDEXED?Q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(P.palette.length/3-1)+" "+("sMask"in P&&P.sMask!==void 0?P.objectId+2:P.objectId+1)+" 0 R]"}):(Q.push({key:"ColorSpace",value:"/"+P.colorSpace}),P.colorSpace===b.DEVICE_CMYK&&Q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Q.push({key:"BitsPerComponent",value:P.bitsPerComponent}),"decodeParameters"in P&&P.decodeParameters!==void 0&&Q.push({key:"DecodeParms",value:"<<"+P.decodeParameters+">>"}),"transparency"in P&&Array.isArray(P.transparency)){for(var X="",J=0,j=P.transparency.length;J<j;J++)X+=P.transparency[J]+" "+P.transparency[J]+" ";Q.push({key:"Mask",value:"["+X+"]"})}P.sMask!==void 0&&Q.push({key:"SMask",value:P.objectId+1+" 0 R"});var F=P.filter!==void 0?["/"+P.filter]:void 0;if(N({data:P.data,additionalKeyValues:Q,alreadyAppliedFilters:F,objectId:P.objectId}),O("endobj"),"sMask"in P&&P.sMask!==void 0){var Y="/Predictor "+P.predictor+" /Colors 1 /BitsPerComponent "+P.bitsPerComponent+" /Columns "+P.width,M={width:P.width,height:P.height,colorSpace:"DeviceGray",bitsPerComponent:P.bitsPerComponent,decodeParameters:Y,data:P.sMask};"filter"in P&&(M.filter=P.filter),C.call(this,M)}if(P.colorSpace===b.INDEXED){var D=this.internal.newObject();N({data:_(new Uint8Array(P.palette)),objectId:D}),O("endobj")}},s=function(){var C=this.internal.collections.addImage_images;for(var P in C)i.call(this,C[P])},o=function(){var C,P=this.internal.collections.addImage_images,O=this.internal.write;for(var N in P)O("/I"+(C=P[N]).index,C.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var C=this.internal.collections.addImage_images;return a.call(this),C},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(C){return typeof t["process"+C.toUpperCase()]=="function"},h=function(C){return Vn(C)==="object"&&C.nodeType===1},d=function(C,P){if(C.nodeName==="IMG"&&C.hasAttribute("src")){var O=""+C.getAttribute("src");if(O.indexOf("data:image/")===0)return u1(unescape(O).split("base64,").pop());var N=t.loadFile(O,!0);if(N!==void 0)return N}if(C.nodeName==="CANVAS"){if(C.width===0||C.height===0)throw new Error("Given canvas must have data. Canvas width: "+C.width+", height: "+C.height);var H;switch(P){case"PNG":H="image/png";break;case"WEBP":H="image/webp";break;case"JPEG":case"JPG":default:H="image/jpeg"}return u1(C.toDataURL(H,1).split("base64,").pop())}},f=function(C){var P=this.internal.collections.addImage_images;if(P){for(var O in P)if(C===P[O].alias)return P[O]}},m=function(C,P,O){return C||P||(C=-96,P=-96),C<0&&(C=-1*O.width*72/C/this.internal.scaleFactor),P<0&&(P=-1*O.height*72/P/this.internal.scaleFactor),C===0&&(C=P*O.width/O.height),P===0&&(P=C*O.height/O.width),[C,P]},g=function(C,P,O,N,H,Q){var X=m.call(this,O,N,H),J=this.internal.getCoordinateString,j=this.internal.getVerticalCoordinateString,F=l.call(this);if(O=X[0],N=X[1],F[H.index]=H,Q){Q*=Math.PI/180;var Y=Math.cos(Q),M=Math.sin(Q),D=function(W){return W.toFixed(4)},V=[D(Y),D(M),D(-1*M),D(Y),0,0,"cm"]}this.internal.write("q"),Q?(this.internal.write([1,"0","0",1,J(C),j(P+N),"cm"].join(" ")),this.internal.write(V.join(" ")),this.internal.write([J(O),"0","0",J(N),"0","0","cm"].join(" "))):this.internal.write([J(O),"0","0",J(N),J(C),j(P+N),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+H.index+" Do"),this.internal.write("Q")},b=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=t.__addimage__.sHashCode=function(C){var P,O,N=0;if(typeof C=="string")for(O=C.length,P=0;P<O;P++)N=(N<<5)-N+C.charCodeAt(P),N|=0;else if(E(C))for(O=C.byteLength/2,P=0;P<O;P++)N=(N<<5)-N+C[P],N|=0;return N},x=t.__addimage__.validateStringAsBase64=function(C){(C=C||"").toString().trim();var P=!0;return C.length===0&&(P=!1),C.length%4!=0&&(P=!1),/^[A-Za-z0-9+/]+$/.test(C.substr(0,C.length-2))===!1&&(P=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(C.substr(-2))===!1&&(P=!1),P},w=t.__addimage__.extractImageFromDataUrl=function(C){var P=(C=C||"").split("base64,"),O=null;if(P.length===2){var N=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(P[0]);Array.isArray(N)&&(O={mimeType:N[1],charset:N[2],data:P[1]})}return O},S=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(C){return S()&&C instanceof ArrayBuffer};var E=t.__addimage__.isArrayBufferView=function(C){return S()&&typeof Uint32Array<"u"&&(C instanceof Int8Array||C instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&C instanceof Uint8ClampedArray||C instanceof Int16Array||C instanceof Uint16Array||C instanceof Int32Array||C instanceof Uint32Array||C instanceof Float32Array||C instanceof Float64Array)},k=t.__addimage__.binaryStringToUint8Array=function(C){for(var P=C.length,O=new Uint8Array(P),N=0;N<P;N++)O[N]=C.charCodeAt(N);return O},_=t.__addimage__.arrayBufferToBinaryString=function(C){for(var P="",O=E(C)?C:new Uint8Array(C),N=0;N<O.length;N+=8192)P+=String.fromCharCode.apply(null,O.subarray(N,N+8192));return P};t.addImage=function(){var C,P,O,N,H,Q,X,J,j;if(typeof arguments[1]=="number"?(P=e,O=arguments[1],N=arguments[2],H=arguments[3],Q=arguments[4],X=arguments[5],J=arguments[6],j=arguments[7]):(P=arguments[1],O=arguments[2],N=arguments[3],H=arguments[4],Q=arguments[5],X=arguments[6],J=arguments[7],j=arguments[8]),Vn(C=arguments[0])==="object"&&!h(C)&&"imageData"in C){var F=C;C=F.imageData,P=F.format||P||e,O=F.x||O||0,N=F.y||N||0,H=F.w||F.width||H,Q=F.h||F.height||Q,X=F.alias||X,J=F.compression||J,j=F.rotation||F.angle||j}var Y=this.internal.getFilters();if(J===void 0&&Y.indexOf("FlateEncode")!==-1&&(J="SLOW"),isNaN(O)||isNaN(N))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var M=L.call(this,C,P,X,J);return g.call(this,O,N,H,Q,M,j),this};var L=function(C,P,O,N){var H,Q,X;if(typeof C=="string"&&r(C)===e){C=unescape(C);var J=R(C,!1);(J!==""||(J=t.loadFile(C,!0))!==void 0)&&(C=J)}if(h(C)&&(C=d(C,P)),P=r(C,P),!u(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(((X=O)==null||X.length===0)&&(O=function(j){return typeof j=="string"||E(j)?v(j):E(j.data)?v(j.data):null}(C)),(H=f.call(this,O))||(S()&&(C instanceof Uint8Array||P==="RGBA"||(Q=C,C=k(C))),H=this["process"+P.toUpperCase()](C,c.call(this),O,function(j){return j&&typeof j=="string"&&(j=j.toUpperCase()),j in t.image_compression?j:y.NONE}(N),Q)),!H)throw new Error("An unknown error occurred whilst processing the image.");return H},R=t.__addimage__.convertBase64ToBinaryString=function(C,P){var O;P=typeof P!="boolean"||P;var N,H="";if(typeof C=="string"){N=(O=w(C))!==null?O.data:C;try{H=u1(N)}catch(Q){if(P)throw x(N)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return H};t.getImageProperties=function(C){var P,O,N="";if(h(C)&&(C=d(C)),typeof C=="string"&&r(C)===e&&((N=R(C,!1))===""&&(N=t.loadFile(C)||""),C=N),O=r(C),!u(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(!S()||C instanceof Uint8Array||(C=k(C)),!(P=this["process"+O.toUpperCase()](C)))throw new Error("An unknown error occurred whilst processing the image");return P.fileType=O,P}})(zt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};zt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,u=!1,h=0;h<c.length&&!u;h++)switch((r=c[h]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var d=0;d<c.length;d++){r=c[d];var f=this.internal.pdfEscape,m=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(g.objId),v=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+f(y(r.contents))+")",s+=" /Popup "+b.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+f(y(v))+") >>",g.content=s;var x=g.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+x,r.open&&(s+=" /Open true"),s+=" >>",b.content=s,this.internal.write(g.objId,"0 R",b.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var w=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+f(m(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+w+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var S=this.annotations._nameMap[r.options.name];r.options.pageNumber=S.page,r.options.top=S.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+f(m(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var E=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+E+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var u=this.splitTextToSize(n,a).length;o=Math.ceil(c*u)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(zt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(g){return e[g.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},a=t.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&i.indexOf(g.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(g){var b=0,y=n,v="",x=0;for(b=0;b<g.length;b+=1)y[g.charCodeAt(b)]!==void 0?(x++,typeof(y=y[g.charCodeAt(b)])=="number"&&(v+=String.fromCharCode(y),y=n,x=0),b===g.length-1&&(y=n,v+=g.charAt(b-(x-1)),b-=x-1,x=0)):(y=n,v+=g.charAt(b-x),b-=x,x=0);return v};t.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&r[g.charCodeAt(0)]!==void 0};var d=t.__arabicParser__.getCorrectForm=function(g,b,y){return o(g)?s(g)===!1?-1:!c(g)||!o(b)&&!o(y)||!o(y)&&a(b)||a(g)&&!o(b)||a(g)&&l(b)||a(g)&&a(b)?0:u(g)&&o(b)&&!a(b)&&o(y)&&c(y)?3:a(g)||!o(y)?1:2:-1},f=function(g){var b=0,y=0,v=0,x="",w="",S="",E=(g=g||"").split("\\s+"),k=[];for(b=0;b<E.length;b+=1){for(k.push(""),y=0;y<E[b].length;y+=1)x=E[b][y],w=E[b][y-1],S=E[b][y+1],o(x)?(v=d(x,w,S),k[b]+=v!==-1?String.fromCharCode(e[x.charCodeAt(0)][v]):x):k[b]+=x;k[b]=h(k[b])}return k.join(" ")},m=t.__arabicParser__.processArabic=t.processArabic=function(){var g,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(b)){var v=0;for(y=[],v=0;v<b.length;v+=1)Array.isArray(b[v])?y.push([f(b[v][0]),b[v][1],b[v][2]]):y.push([f(b[v])]);g=y}else g=f(b);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};t.events.push(["preProcessText",m])}(zt.API),zt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(zt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(g){l=g}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var d=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(g){m=g}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),h=c.font||this.getFont(),d=c.scaleFactor||this.internal.scaleFactor,f=0,m=0,g=0,b=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var y=c.maxWidth;y>0?typeof l=="string"?l=this.splitTextToSize(l,y):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(x,w){return x.concat(b.splitTextToSize(w,y))},[])):l=Array.isArray(l)?l:[l];for(var v=0;v<l.length;v++)f<(g=this.getStringUnitWidth(l[v],{font:h})*u)&&(f=g);return f!==0&&(m=l.length),{w:f/=d,h:Math.max((m*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/d,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,d=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,f&&d&&(this.printHeaderRow(l.lineNumber,!0),l.y+=d[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,u,h,d){if(r.call(this),!u)throw new Error("No data for PDF table.");var f,m,g,b,y=[],v=[],x=[],w={},S={},E=[],k=[],_=(d=d||{}).autoSize||!1,L=d.printHeaders!==!1,R=d.css&&d.css["font-size"]!==void 0?16*d.css["font-size"]:d.fontSize||12,C=d.margins||Object.assign({width:this.getPageWidth()},e),P=typeof d.padding=="number"?d.padding:3,O=d.headerBackgroundColor||"#c8c8c8",N=d.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=L,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=P,this.internal.__cell__.headerBackgroundColor=O,this.internal.__cell__.headerTextColor=N,this.setFontSize(R),h==null)v=y=Object.keys(u[0]),x=y.map(function(){return"left"});else if(Array.isArray(h)&&Vn(h[0])==="object")for(y=h.map(function(F){return F.name}),v=h.map(function(F){return F.prompt||F.name||""}),x=h.map(function(F){return F.align||"left"}),f=0;f<h.length;f+=1)S[h[f].name]=h[f].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(v=y=h,x=y.map(function(){return"left"}));if(_||Array.isArray(h)&&typeof h[0]=="string")for(f=0;f<y.length;f+=1){for(w[b=y[f]]=u.map(function(F){return F[b]}),this.setFont(void 0,"bold"),E.push(this.getTextDimensions(v[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=w[b],this.setFont(void 0,"normal"),g=0;g<m.length;g+=1)E.push(this.getTextDimensions(m[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[b]=Math.max.apply(null,E)+P+P,E=[]}if(L){var H={};for(f=0;f<y.length;f+=1)H[y[f]]={},H[y[f]].text=v[f],H[y[f]].align=x[f];var Q=a.call(this,H,S);k=y.map(function(F){return new s(l,c,S[F],Q,H[F].text,void 0,H[F].align)}),this.setTableHeaderRow(k),this.printHeaderRow(1,!1)}var X=h.reduce(function(F,Y){return F[Y.name]=Y.align,F},{});for(f=0;f<u.length;f+=1){"rowStart"in d&&d.rowStart instanceof Function&&d.rowStart({row:f,data:u[f]},this);var J=a.call(this,u[f],S);for(g=0;g<y.length;g+=1){var j=u[f][y[g]];"cellStart"in d&&d.cellStart instanceof Function&&d.cellStart({row:f,col:g,data:j},this),o.call(this,new s(l,c,S[y[g]],J,j,f+2,X[y[g]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,d=this.internal.scaleFactor;return Object.keys(l).map(function(f){var m=l[f];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,c[f]-u-u)},this).map(function(f){return this.getLineHeightFactor()*f.length*h/d+u+u},this).reduce(function(f,m){return Math.max(f,m)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var d=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){u=this.internal.__cell__.tableHeaderRow[f].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,d.push(u)),u.lineNumber=l;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(m)}d.length>0&&this.setTableHeaderRow(d),this.setFont(void 0,"normal"),n=!1}}(zt.API);var CZ={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},TZ=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],NP=kZ(TZ),AZ=[100,200,300,400,500,600,700,800,900],JAe=kZ(AZ);function LP(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return CZ[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof NP[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function Mj(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var QAe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},jj={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Fj(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function e3e(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},QAe,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=LP(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+Fj(s)+"' and default family '"+r+"'.");if(o=function(l,c){if(c[l])return c[l];var u=NP[l],h=u<=NP.normal?-1:1,d=Mj(c,TZ,u,h);if(!d)throw new Error("Could not find a matching font-stretch value for "+l);return d}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var u=CZ[l],h=0;h<u.length;++h)if(c[u[h]])return c[u[h]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var u=JAe[l],h=Mj(c,AZ,u,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Fj(s)+"'.");return o}function Bj(t){return t.trimLeft()}function t3e(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function n3e(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var N_,Uj,$j,hT=["times"];(function(t){var e,n,r,i,s,o,a,l,c,u=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new l,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new o,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new o,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var h=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var D=M;Object.defineProperty(this,"pdf",{get:function(){return D}});var V=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return V},set:function(pe){V=!!pe}});var W=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return W},set:function(pe){W=!!pe}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(pe){isNaN(pe)||(te=pe)}});var ee=0;Object.defineProperty(this,"posY",{get:function(){return ee},set:function(pe){isNaN(pe)||(ee=pe)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(pe){var ne;typeof pe=="number"?ne=[pe,pe,pe,pe]:((ne=new Array(4))[0]=pe[0],ne[1]=pe.length>=2?pe[1]:ne[0],ne[2]=pe.length>=3?pe[2]:ne[0],ne[3]=pe.length>=4?pe[3]:ne[1]),c.margin=ne}});var K=!1;Object.defineProperty(this,"autoPaging",{get:function(){return K},set:function(pe){K=pe}});var he=0;Object.defineProperty(this,"lastBreak",{get:function(){return he},set:function(pe){he=pe}});var be=[];Object.defineProperty(this,"pageBreaks",{get:function(){return be},set:function(pe){be=pe}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(pe){pe instanceof u&&(c=pe)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(pe){c.path=pe}});var Se=[];Object.defineProperty(this,"ctxStack",{get:function(){return Se},set:function(pe){Se=pe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(pe){var ne;ne=d(pe),this.ctx.fillStyle=ne.style,this.ctx.isFillTransparent=ne.a===0,this.ctx.fillOpacity=ne.a,this.pdf.setFillColor(ne.r,ne.g,ne.b,{a:ne.a}),this.pdf.setTextColor(ne.r,ne.g,ne.b,{a:ne.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(pe){var ne=d(pe);this.ctx.strokeStyle=ne.style,this.ctx.isStrokeTransparent=ne.a===0,this.ctx.strokeOpacity=ne.a,ne.a===0?this.pdf.setDrawColor(255,255,255):(ne.a,this.pdf.setDrawColor(ne.r,ne.g,ne.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(pe){["butt","round","square"].indexOf(pe)!==-1&&(this.ctx.lineCap=pe,this.pdf.setLineCap(pe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(pe){isNaN(pe)||(this.ctx.lineWidth=pe,this.pdf.setLineWidth(pe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(pe){["bevel","round","miter"].indexOf(pe)!==-1&&(this.ctx.lineJoin=pe,this.pdf.setLineJoin(pe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(pe){isNaN(pe)||(this.ctx.miterLimit=pe,this.pdf.setMiterLimit(pe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(pe){this.ctx.textBaseline=pe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(pe){["right","end","center","left","start"].indexOf(pe)!==-1&&(this.ctx.textAlign=pe)}});var Ce=null;function ke(pe,ne){if(Ce===null){var oe=function(ae){var me=[];return Object.keys(ae).forEach(function(Pe){ae[Pe].forEach(function(Re){var we=null;switch(Re){case"bold":we={family:Pe,weight:"bold"};break;case"italic":we={family:Pe,style:"italic"};break;case"bolditalic":we={family:Pe,weight:"bold",style:"italic"};break;case"":case"normal":we={family:Pe}}we!==null&&(we.ref={name:Pe,style:Re},me.push(we))})}),me}(pe.getFontList());Ce=function(ae){for(var me={},Pe=0;Pe<ae.length;++Pe){var Re=LP(ae[Pe]),we=Re.family,$e=Re.stretch,Fe=Re.style,Be=Re.weight;me[we]=me[we]||{},me[we][$e]=me[we][$e]||{},me[we][$e][Fe]=me[we][$e][Fe]||{},me[we][$e][Fe][Be]=Re}return me}(oe.concat(ne))}return Ce}var q=null;Object.defineProperty(this,"fontFaces",{get:function(){return q},set:function(pe){Ce=null,q=pe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(pe){var ne;if(this.ctx.font=pe,(ne=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(pe))!==null){var oe=ne[1],ae=(ne[2],ne[3]),me=ne[4],Pe=(ne[5],ne[6]),Re=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(me)[2];me=Math.floor(Re==="px"?parseFloat(me)*this.pdf.internal.scaleFactor:Re==="em"?parseFloat(me)*this.pdf.getFontSize():parseFloat(me)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(me);var we=function(et){var re,$,G=[],ue=et.trim();if(ue==="")return hT;if(ue in jj)return[jj[ue]];for(;ue!=="";){switch($=null,re=(ue=Bj(ue)).charAt(0)){case'"':case"'":$=t3e(ue.substring(1),re);break;default:$=n3e(ue)}if($===null||(G.push($[0]),(ue=Bj($[1]))!==""&&ue.charAt(0)!==","))return hT;ue=ue.replace(/^,/,"")}return G}(Pe);if(this.fontFaces){var $e=e3e(ke(this.pdf,this.fontFaces),we.map(function(et){return{family:et,stretch:"normal",weight:ae,style:oe}}));this.pdf.setFont($e.ref.name,$e.ref.style)}else{var Fe="";(ae==="bold"||parseInt(ae,10)>=700||oe==="bold")&&(Fe="bold"),oe==="italic"&&(Fe+="italic"),Fe.length===0&&(Fe="normal");for(var Be="",Ee={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},qe=0;qe<we.length;qe++){if(this.pdf.internal.getFont(we[qe],Fe,{noFallback:!0,disableWarning:!0})!==void 0){Be=we[qe];break}if(Fe==="bolditalic"&&this.pdf.internal.getFont(we[qe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Be=we[qe],Fe="bold";else if(this.pdf.internal.getFont(we[qe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Be=we[qe],Fe="normal";break}}if(Be===""){for(var Xe=0;Xe<we.length;Xe++)if(Ee[we[Xe]]){Be=Ee[we[Xe]];break}}Be=Be===""?"Times":Be,this.pdf.setFont(Be,Fe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(pe){this.ctx.globalCompositeOperation=pe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(pe){this.ctx.globalAlpha=pe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(pe){this.ctx.lineDashOffset=pe,Y.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(pe){this.ctx.lineDash=pe,Y.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(pe){this.ctx.ignoreClearRect=!!pe}})};h.prototype.setLineDash=function(M){this.lineDash=M},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){w.call(this,"fill",!1)},h.prototype.stroke=function(){w.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(M,D){if(isNaN(M)||isNaN(D))throw Zn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var V=this.ctx.transform.applyToPoint(new o(M,D));this.path.push({type:"mt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(M,D)},h.prototype.closePath=function(){var M=new o(0,0),D=0;for(D=this.path.length-1;D!==-1;D--)if(this.path[D].type==="begin"&&Vn(this.path[D+1])==="object"&&typeof this.path[D+1].x=="number"){M=new o(this.path[D+1].x,this.path[D+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(M.x,M.y)},h.prototype.lineTo=function(M,D){if(isNaN(M)||isNaN(D))throw Zn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var V=this.ctx.transform.applyToPoint(new o(M,D));this.path.push({type:"lt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(V.x,V.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},h.prototype.quadraticCurveTo=function(M,D,V,W){if(isNaN(V)||isNaN(W)||isNaN(M)||isNaN(D))throw Zn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new o(V,W)),ee=this.ctx.transform.applyToPoint(new o(M,D));this.path.push({type:"qct",x1:ee.x,y1:ee.y,x:te.x,y:te.y}),this.ctx.lastPoint=new o(te.x,te.y)},h.prototype.bezierCurveTo=function(M,D,V,W,te,ee){if(isNaN(te)||isNaN(ee)||isNaN(M)||isNaN(D)||isNaN(V)||isNaN(W))throw Zn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var K=this.ctx.transform.applyToPoint(new o(te,ee)),he=this.ctx.transform.applyToPoint(new o(M,D)),be=this.ctx.transform.applyToPoint(new o(V,W));this.path.push({type:"bct",x1:he.x,y1:he.y,x2:be.x,y2:be.y,x:K.x,y:K.y}),this.ctx.lastPoint=new o(K.x,K.y)},h.prototype.arc=function(M,D,V,W,te,ee){if(isNaN(M)||isNaN(D)||isNaN(V)||isNaN(W)||isNaN(te))throw Zn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ee=!!ee,!this.ctx.transform.isIdentity){var K=this.ctx.transform.applyToPoint(new o(M,D));M=K.x,D=K.y;var he=this.ctx.transform.applyToPoint(new o(0,V)),be=this.ctx.transform.applyToPoint(new o(0,0));V=Math.sqrt(Math.pow(he.x-be.x,2)+Math.pow(he.y-be.y,2))}Math.abs(te-W)>=2*Math.PI&&(W=0,te=2*Math.PI),this.path.push({type:"arc",x:M,y:D,radius:V,startAngle:W,endAngle:te,counterclockwise:ee})},h.prototype.arcTo=function(M,D,V,W,te){throw new Error("arcTo not implemented.")},h.prototype.rect=function(M,D,V,W){if(isNaN(M)||isNaN(D)||isNaN(V)||isNaN(W))throw Zn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,D),this.lineTo(M+V,D),this.lineTo(M+V,D+W),this.lineTo(M,D+W),this.lineTo(M,D),this.lineTo(M+V,D),this.lineTo(M,D)},h.prototype.fillRect=function(M,D,V,W){if(isNaN(M)||isNaN(D)||isNaN(V)||isNaN(W))throw Zn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,D,V,W),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},h.prototype.strokeRect=function(M,D,V,W){if(isNaN(M)||isNaN(D)||isNaN(V)||isNaN(W))throw Zn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(M,D,V,W),this.stroke())},h.prototype.clearRect=function(M,D,V,W){if(isNaN(M)||isNaN(D)||isNaN(V)||isNaN(W))throw Zn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,D,V,W))},h.prototype.save=function(M){M=typeof M!="boolean"||M;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("q");if(this.pdf.setPage(D),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var W=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=W}},h.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("Q");this.pdf.setPage(D),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var d=function(M){var D,V,W,te;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))D=0,V=0,W=0,te=0;else{var ee=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(ee!==null)D=parseInt(ee[1]),V=parseInt(ee[2]),W=parseInt(ee[3]),te=1;else if((ee=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)D=parseInt(ee[1]),V=parseInt(ee[2]),W=parseInt(ee[3]),te=parseFloat(ee[4]);else{if(te=1,typeof M=="string"&&M.charAt(0)!=="#"){var K=new vZ(M);M=K.ok?K.toHex():"#000000"}M.length===4?(D=M.substring(1,2),D+=D,V=M.substring(2,3),V+=V,W=M.substring(3,4),W+=W):(D=M.substring(1,3),V=M.substring(3,5),W=M.substring(5,7)),D=parseInt(D,16),V=parseInt(V,16),W=parseInt(W,16)}}return{r:D,g:V,b:W,a:te,style:M}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(M,D,V,W){if(isNaN(D)||isNaN(V)||typeof M!="string")throw Zn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(W=isNaN(W)?void 0:W,!f.call(this)){var te=J(this.ctx.transform.rotation),ee=this.ctx.transform.scaleX;P.call(this,{text:M,x:D,y:V,scale:ee,angle:te,align:this.textAlign,maxWidth:W})}},h.prototype.strokeText=function(M,D,V,W){if(isNaN(D)||isNaN(V)||typeof M!="string")throw Zn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){W=isNaN(W)?void 0:W;var te=J(this.ctx.transform.rotation),ee=this.ctx.transform.scaleX;P.call(this,{text:M,x:D,y:V,scale:ee,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:W})}},h.prototype.measureText=function(M){if(typeof M!="string")throw Zn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var D=this.pdf,V=this.pdf.internal.scaleFactor,W=D.internal.getFontSize(),te=D.getStringUnitWidth(M)*W/D.internal.scaleFactor,ee=function(K){var he=(K=K||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return he}}),this};return new ee({width:te*=Math.round(96*V/72*1e4)/1e4})},h.prototype.scale=function(M,D){if(isNaN(M)||isNaN(D))throw Zn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var V=new l(M,0,0,D,0,0);this.ctx.transform=this.ctx.transform.multiply(V)},h.prototype.rotate=function(M){if(isNaN(M))throw Zn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var D=new l(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(D)},h.prototype.translate=function(M,D){if(isNaN(M)||isNaN(D))throw Zn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var V=new l(1,0,0,1,M,D);this.ctx.transform=this.ctx.transform.multiply(V)},h.prototype.transform=function(M,D,V,W,te,ee){if(isNaN(M)||isNaN(D)||isNaN(V)||isNaN(W)||isNaN(te)||isNaN(ee))throw Zn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var K=new l(M,D,V,W,te,ee);this.ctx.transform=this.ctx.transform.multiply(K)},h.prototype.setTransform=function(M,D,V,W,te,ee){M=isNaN(M)?1:M,D=isNaN(D)?0:D,V=isNaN(V)?0:V,W=isNaN(W)?1:W,te=isNaN(te)?0:te,ee=isNaN(ee)?0:ee,this.ctx.transform=new l(M,D,V,W,te,ee)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(M,D,V,W,te,ee,K,he,be){var Se=this.pdf.getImageProperties(M),Ce=1,ke=1,q=1,pe=1;W!==void 0&&he!==void 0&&(q=he/W,pe=be/te,Ce=Se.width/W*he/W,ke=Se.height/te*be/te),ee===void 0&&(ee=D,K=V,D=0,V=0),W!==void 0&&he===void 0&&(he=W,be=te),W===void 0&&he===void 0&&(he=Se.width,be=Se.height);for(var ne,oe=this.ctx.transform.decompose(),ae=J(oe.rotate.shx),me=new l,Pe=(me=(me=(me=me.multiply(oe.translate)).multiply(oe.skew)).multiply(oe.scale)).applyToRectangle(new a(ee-D*q,K-V*pe,W*Ce,te*ke)),Re=b.call(this,Pe),we=[],$e=0;$e<Re.length;$e+=1)we.indexOf(Re[$e])===-1&&we.push(Re[$e]);if(x(we),this.autoPaging)for(var Fe=we[0],Be=we[we.length-1],Ee=Fe;Ee<Be+1;Ee++){this.pdf.setPage(Ee);var qe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Xe=Ee===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],re=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$=Ee===1?0:et+(Ee-2)*re;if(this.ctx.clip_path.length!==0){var G=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(ne,this.posX+this.margin[3],-$+Xe+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=G}var ue=JSON.parse(JSON.stringify(Pe));ue=v([ue],this.posX+this.margin[3],-$+Xe+this.ctx.prevPageLastElemOffset)[0];var Ne=(Ee>Fe||Ee<Be)&&g.call(this);Ne&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qe,re,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",ue.x,ue.y,ue.w,ue.h,null,null,ae),Ne&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",Pe.x,Pe.y,Pe.w,Pe.h,null,null,ae)};var b=function(M,D,V){var W=[];D=D||this.pdf.internal.pageSize.width,V=V||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":W.push(Math.floor((M.y+te)/V)+1);break;case"arc":W.push(Math.floor((M.y+te-M.radius)/V)+1),W.push(Math.floor((M.y+te+M.radius)/V)+1);break;case"qct":var ee=j(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);W.push(Math.floor((ee.y+te)/V)+1),W.push(Math.floor((ee.y+ee.h+te)/V)+1);break;case"bct":var K=F(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);W.push(Math.floor((K.y+te)/V)+1),W.push(Math.floor((K.y+K.h+te)/V)+1);break;case"rect":W.push(Math.floor((M.y+te)/V)+1),W.push(Math.floor((M.y+M.h+te)/V)+1)}for(var he=0;he<W.length;he+=1)for(;this.pdf.internal.getNumberOfPages()<W[he];)y.call(this);return W},y=function(){var M=this.fillStyle,D=this.strokeStyle,V=this.font,W=this.lineCap,te=this.lineWidth,ee=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=D,this.font=V,this.lineCap=W,this.lineWidth=te,this.lineJoin=ee},v=function(M,D,V){for(var W=0;W<M.length;W++)switch(M[W].type){case"bct":M[W].x2+=D,M[W].y2+=V;case"qct":M[W].x1+=D,M[W].y1+=V;case"mt":case"lt":case"arc":default:M[W].x+=D,M[W].y+=V}return M},x=function(M){return M.sort(function(D,V){return D-V})},w=function(M,D){for(var V,W,te=this.fillStyle,ee=this.strokeStyle,K=this.lineCap,he=this.lineWidth,be=Math.abs(he*this.ctx.transform.scaleX),Se=this.lineJoin,Ce=JSON.parse(JSON.stringify(this.path)),ke=JSON.parse(JSON.stringify(this.path)),q=[],pe=0;pe<ke.length;pe++)if(ke[pe].x!==void 0)for(var ne=b.call(this,ke[pe]),oe=0;oe<ne.length;oe+=1)q.indexOf(ne[oe])===-1&&q.push(ne[oe]);for(var ae=0;ae<q.length;ae++)for(;this.pdf.internal.getNumberOfPages()<q[ae];)y.call(this);if(x(q),this.autoPaging)for(var me=q[0],Pe=q[q.length-1],Re=me;Re<Pe+1;Re++){this.pdf.setPage(Re),this.fillStyle=te,this.strokeStyle=ee,this.lineCap=K,this.lineWidth=be,this.lineJoin=Se;var we=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],$e=Re===1?this.posY+this.margin[0]:this.margin[0],Fe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Be=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ee=Re===1?0:Fe+(Re-2)*Be;if(this.ctx.clip_path.length!==0){var qe=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(V,this.posX+this.margin[3],-Ee+$e+this.ctx.prevPageLastElemOffset),S.call(this,M,!0),this.path=qe}if(W=JSON.parse(JSON.stringify(Ce)),this.path=v(W,this.posX+this.margin[3],-Ee+$e+this.ctx.prevPageLastElemOffset),D===!1||Re===0){var Xe=(Re>me||Re<Pe)&&g.call(this);Xe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],we,Be,null).clip().discardPath()),S.call(this,M,D),Xe&&this.pdf.restoreGraphicsState()}this.lineWidth=he}else this.lineWidth=be,S.call(this,M,D),this.lineWidth=he;this.path=Ce},S=function(M,D){if((M!=="stroke"||D||!m.call(this))&&(M==="stroke"||D||!f.call(this))){for(var V,W,te=[],ee=this.path,K=0;K<ee.length;K++){var he=ee[K];switch(he.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:he,deltas:[],abs:[]});break;case"lt":var be=te.length;if(ee[K-1]&&!isNaN(ee[K-1].x)&&(V=[he.x-ee[K-1].x,he.y-ee[K-1].y],be>0)){for(;be>=0;be--)if(te[be-1].close!==!0&&te[be-1].begin!==!0){te[be-1].deltas.push(V),te[be-1].abs.push(he);break}}break;case"bct":V=[he.x1-ee[K-1].x,he.y1-ee[K-1].y,he.x2-ee[K-1].x,he.y2-ee[K-1].y,he.x-ee[K-1].x,he.y-ee[K-1].y],te[te.length-1].deltas.push(V);break;case"qct":var Se=ee[K-1].x+2/3*(he.x1-ee[K-1].x),Ce=ee[K-1].y+2/3*(he.y1-ee[K-1].y),ke=he.x+2/3*(he.x1-he.x),q=he.y+2/3*(he.y1-he.y),pe=he.x,ne=he.y;V=[Se-ee[K-1].x,Ce-ee[K-1].y,ke-ee[K-1].x,q-ee[K-1].y,pe-ee[K-1].x,ne-ee[K-1].y],te[te.length-1].deltas.push(V);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(he)}}W=D?null:M==="stroke"?"stroke":"fill";for(var oe=!1,ae=0;ae<te.length;ae++)if(te[ae].arc)for(var me=te[ae].abs,Pe=0;Pe<me.length;Pe++){var Re=me[Pe];Re.type==="arc"?_.call(this,Re.x,Re.y,Re.radius,Re.startAngle,Re.endAngle,Re.counterclockwise,void 0,D,!oe):O.call(this,Re.x,Re.y),oe=!0}else if(te[ae].close===!0)this.pdf.internal.out("h"),oe=!1;else if(te[ae].begin!==!0){var we=te[ae].start.x,$e=te[ae].start.y;N.call(this,te[ae].deltas,we,$e),oe=!0}W&&L.call(this,W),D&&R.call(this)}},E=function(M){var D=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,V=D*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-V;case"top":return M+D-V;case"hanging":return M+D-2*V;case"middle":return M+D/2-V;case"ideographic":return M;case"alphabetic":default:return M}},k=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(D,V){this.colorStops.push([D,V])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var _=function(M,D,V,W,te,ee,K,he,be){for(var Se=Q.call(this,V,W,te,ee),Ce=0;Ce<Se.length;Ce++){var ke=Se[Ce];Ce===0&&(be?C.call(this,ke.x1+M,ke.y1+D):O.call(this,ke.x1+M,ke.y1+D)),H.call(this,M,D,ke.x2,ke.y2,ke.x3,ke.y3,ke.x4,ke.y4)}he?R.call(this):L.call(this,K)},L=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},C=function(M,D){this.pdf.internal.out(n(M)+" "+r(D)+" m")},P=function(M){var D;switch(M.align){case"right":case"end":D="right";break;case"center":D="center";break;case"left":case"start":default:D="left"}var V=this.pdf.getTextDimensions(M.text),W=E.call(this,M.y),te=k.call(this,W)-V.h,ee=this.ctx.transform.applyToPoint(new o(M.x,W)),K=this.ctx.transform.decompose(),he=new l;he=(he=(he=he.multiply(K.translate)).multiply(K.skew)).multiply(K.scale);for(var be,Se,Ce,ke=this.ctx.transform.applyToRectangle(new a(M.x,W,V.w,V.h)),q=he.applyToRectangle(new a(M.x,te,V.w,V.h)),pe=b.call(this,q),ne=[],oe=0;oe<pe.length;oe+=1)ne.indexOf(pe[oe])===-1&&ne.push(pe[oe]);if(x(ne),this.autoPaging)for(var ae=ne[0],me=ne[ne.length-1],Pe=ae;Pe<me+1;Pe++){this.pdf.setPage(Pe);var Re=Pe===1?this.posY+this.margin[0]:this.margin[0],we=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$e=this.pdf.internal.pageSize.height-this.margin[2],Fe=$e-this.margin[0],Be=this.pdf.internal.pageSize.width-this.margin[1],Ee=Be-this.margin[3],qe=Pe===1?0:we+(Pe-2)*Fe;if(this.ctx.clip_path.length!==0){var Xe=this.path;be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(be,this.posX+this.margin[3],-1*qe+Re),S.call(this,"fill",!0),this.path=Xe}var et=v([JSON.parse(JSON.stringify(q))],this.posX+this.margin[3],-qe+Re+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(Se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Se*M.scale),Ce=this.lineWidth,this.lineWidth=Ce*M.scale);var re=this.autoPaging!=="text";if(re||et.y+et.h<=$e){if(re||et.y>=Re&&et.x<=Be){var $=re?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||Be-et.x)[0],G=v([JSON.parse(JSON.stringify(ke))],this.posX+this.margin[3],-qe+Re+this.ctx.prevPageLastElemOffset)[0],ue=re&&(Pe>ae||Pe<me)&&g.call(this);ue&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ee,Fe,null).clip().discardPath()),this.pdf.text($,G.x,G.y,{angle:M.angle,align:D,renderingMode:M.renderingMode}),ue&&this.pdf.restoreGraphicsState()}}else et.y<$e&&(this.ctx.prevPageLastElemOffset+=$e-et.y);M.scale>=.01&&(this.pdf.setFontSize(Se),this.lineWidth=Ce)}else M.scale>=.01&&(Se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Se*M.scale),Ce=this.lineWidth,this.lineWidth=Ce*M.scale),this.pdf.text(M.text,ee.x+this.posX,ee.y+this.posY,{angle:M.angle,align:D,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(Se),this.lineWidth=Ce)},O=function(M,D,V,W){V=V||0,W=W||0,this.pdf.internal.out(n(M+V)+" "+r(D+W)+" l")},N=function(M,D,V){return this.pdf.lines(M,D,V,null,null)},H=function(M,D,V,W,te,ee,K,he){this.pdf.internal.out([e(i(V+M)),e(s(W+D)),e(i(te+M)),e(s(ee+D)),e(i(K+M)),e(s(he+D)),"c"].join(" "))},Q=function(M,D,V,W){for(var te=2*Math.PI,ee=Math.PI/2;D>V;)D-=te;var K=Math.abs(V-D);K<te&&W&&(K=te-K);for(var he=[],be=W?-1:1,Se=D;K>1e-5;){var Ce=Se+be*Math.min(K,ee);he.push(X.call(this,M,Se,Ce)),K-=Math.abs(Ce-Se),Se=Ce}return he},X=function(M,D,V){var W=(V-D)/2,te=M*Math.cos(W),ee=M*Math.sin(W),K=te,he=-ee,be=K*K+he*he,Se=be+K*te+he*ee,Ce=4/3*(Math.sqrt(2*be*Se)-Se)/(K*ee-he*te),ke=K-Ce*he,q=he+Ce*K,pe=ke,ne=-q,oe=W+D,ae=Math.cos(oe),me=Math.sin(oe);return{x1:M*Math.cos(D),y1:M*Math.sin(D),x2:ke*ae-q*me,y2:ke*me+q*ae,x3:pe*ae-ne*me,y3:pe*me+ne*ae,x4:M*Math.cos(V),y4:M*Math.sin(V)}},J=function(M){return 180*M/Math.PI},j=function(M,D,V,W,te,ee){var K=M+.5*(V-M),he=D+.5*(W-D),be=te+.5*(V-te),Se=ee+.5*(W-ee),Ce=Math.min(M,te,K,be),ke=Math.max(M,te,K,be),q=Math.min(D,ee,he,Se),pe=Math.max(D,ee,he,Se);return new a(Ce,q,ke-Ce,pe-q)},F=function(M,D,V,W,te,ee,K,he){var be,Se,Ce,ke,q,pe,ne,oe,ae,me,Pe,Re,we,$e,Fe=V-M,Be=W-D,Ee=te-V,qe=ee-W,Xe=K-te,et=he-ee;for(Se=0;Se<41;Se++)ae=(ne=(Ce=M+(be=Se/40)*Fe)+be*((q=V+be*Ee)-Ce))+be*(q+be*(te+be*Xe-q)-ne),me=(oe=(ke=D+be*Be)+be*((pe=W+be*qe)-ke))+be*(pe+be*(ee+be*et-pe)-oe),Se==0?(Pe=ae,Re=me,we=ae,$e=me):(Pe=Math.min(Pe,ae),Re=Math.min(Re,me),we=Math.max(we,ae),$e=Math.max($e,me));return new a(Math.round(Pe),Math.round(Re),Math.round(we-Pe),Math.round($e-Re))},Y=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,D,V=(M=this.ctx.lineDash,D=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:D}));this.prevLineDash!==V&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=V)}}})(zt.API),function(t){var e=function(s){var o,a,l,c,u,h,d,f,m,g;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(u=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(h=(u=((u=((u=((u=(u-(g=u%85))/85)-(m=u%85))/85)-(f=u%85))/85)-(d=u%85))/85)%85,a.push(h+33,d+33,f+33,m+33,g+33)):a.push(122);return function(b,y){for(var v=y;v>0;v--)b.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,c,u,h=String,d="length",f=255,m="charCodeAt",g="slice",b="replace";for(s[g](-2),s=s[g](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),l=[],c=0,u=(s+=o="uuuuu"[g](s[d]%5||5))[d];u>c;c+=5)a=52200625*(s[m](c)-33)+614125*(s[m](c+1)-33)+7225*(s[m](c+2)-33)+85*(s[m](c+3)-33)+(s[m](c+4)-33),l.push(f&a>>24,f&a>>16,f&a>>8,f&a);return function(y,v){for(var x=v;x>0;x--)y.pop()}(l,o[d]),h.fromCharCode.apply(h,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=kP(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(zt.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,u){var h=new XMLHttpRequest,d=0,f=function(m){var g=m.length,b=[],y=String.fromCharCode;for(d=0;d<g;d+=1)b.push(y(255&m.charCodeAt(d)));return b.join("")};if(h.open("GET",l,!c),h.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(h.onload=function(){h.status===200?u(f(this.responseText)):u(void 0)}),h.send(null),c&&h.status===200)return f(h.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(zt.API),function(t){function e(){return(Gt.html2canvas?Promise.resolve(Gt.html2canvas):ye(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Gt.DOMPurify?Promise.resolve(Gt.DOMPurify):ye(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Vn(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,u){for(var h=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),d=c.firstChild;d;d=d.nextSibling)u!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||h.appendChild(l(d,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(h.width=c.width,h.height=c.height,h.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(h.value=c.value),h.addEventListener("load",function(){h.scrollTop=c.scrollTop,h.scrollLeft=c.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var d=0;d<c.length;++d){var f=c[d],m=f.src.find(function(g){return g.format==="truetype"});m&&l.addFont(m.url,f.ref.name,f.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),a(this.prop.container,h)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||zt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,c),h}).then(c,u).then(function(h){return l.updateProgress(1),h})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),u=l.call(c,o,a);return s.convert(u,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,zt.getPageSize=function(o,a,l){if(Vn(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var u,h=(""+l).toLowerCase(),d={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+a}var f,m=0,g=0;if(d.hasOwnProperty(h))m=d[h][1]/u,g=d[h][0]/u;else try{m=l[1],g=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",g>m&&(f=g,g=m,m=f);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",m>g&&(f=g,g=m,m=f)}return{width:g,height:m,unit:a,k:u,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(LP):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(zt.API),zt.API.addJS=function(t){return $j=t,this.internal.events.subscribe("postPutResources",function(){N_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(N_+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Uj=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+$j+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){N_!==void 0&&Uj!==void 0&&this.internal.out("/Names <</JavaScript "+N_+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(s=0;s<c;s++){var h=n.internal.newObject();u.push(h);var d=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+d.objId+" 0 R /XYZ null null null]>> endobj")}var f=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<u.length;s++)n.internal.write("(page_"+(s+1)+")"+u[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+f+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(zt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(h){for(var d,f=256*h.charCodeAt(4)+h.charCodeAt(5),m=h.length,g={width:0,height:0,numcomponents:1},b=4;b<m;b+=2){if(b+=f,e.indexOf(h.charCodeAt(b+1))!==-1){d=256*h.charCodeAt(b+5)+h.charCodeAt(b+6),g={width:256*h.charCodeAt(b+7)+h.charCodeAt(b+8),height:d,numcomponents:h.charCodeAt(b+9)};break}f=256*h.charCodeAt(b+2)+h.charCodeAt(b+3)}return g}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return u}}(zt.API);var Mp,L_,Hj,zj,Vj,r3e=function(){var t,e,n;function r(s){var o,a,l,c,u,h,d,f,m,g,b,y,v,x;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),m=function(){var w,S;for(S=[],w=0;w<4;++w)S.push(String.fromCharCode(this.data[this.pos++]));return S}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,h.delay=1e3*u/c,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(m==="fdAT"&&(this.pos+=4,o-=4),s=h?.data||this.imgData,y=0;0<=o?y<o:y>o;0<=o?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((g=l-this.transparency.indexed.length)>0)for(v=0;0<=g?v<g:v>g;0<=g?++v:--v)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":d=(b=this.read(o)).indexOf(0),f=String.fromCharCode.apply(String,b.slice(0,d)),this.text[f]=String.fromCharCode.apply(String,b.slice(d+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(x=this.colorType)===4||x===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function u(h,d,f,m){var g,b,y,v,x,w,S,E,k,_,L,R,C,P,O,N,H,Q,X,J,j,F=Math.ceil((c.width-h)/f),Y=Math.ceil((c.height-d)/m),M=c.width==F&&c.height==Y;for(P=o*F,R=M?a:new Uint8Array(P*Y),w=s.length,C=0,b=0;C<Y&&l<w;){switch(s[l++]){case 0:for(v=H=0;H<P;v=H+=1)R[b++]=s[l++];break;case 1:for(v=Q=0;Q<P;v=Q+=1)g=s[l++],x=v<o?0:R[b-o],R[b++]=(g+x)%256;break;case 2:for(v=X=0;X<P;v=X+=1)g=s[l++],y=(v-v%o)/o,O=C&&R[(C-1)*P+y*o+v%o],R[b++]=(O+g)%256;break;case 3:for(v=J=0;J<P;v=J+=1)g=s[l++],y=(v-v%o)/o,x=v<o?0:R[b-o],O=C&&R[(C-1)*P+y*o+v%o],R[b++]=(g+Math.floor((x+O)/2))%256;break;case 4:for(v=j=0;j<P;v=j+=1)g=s[l++],y=(v-v%o)/o,x=v<o?0:R[b-o],C===0?O=N=0:(O=R[(C-1)*P+y*o+v%o],N=y&&R[(C-1)*P+(y-1)*o+v%o]),S=x+O-N,E=Math.abs(S-x),_=Math.abs(S-O),L=Math.abs(S-N),k=E<=_&&E<=L?x:_<=L?O:N,R[b++]=(g+k)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!M){var D=((d+C*m)*c.width+h)*o,V=C*P;for(v=0;v<F;v+=1){for(var W=0;W<o;W+=1)a[D++]=R[V++];D+=(f-1)*o}}C++}}return s=DAe(s),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,c,u,h,d,f;for(a=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+a.length),l=0,s=0,o=h=0,d=a.length;h<d;o=h+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(f=u[s++])!=null?f:255;return c},r.prototype.copyToImageData=function(s,o){var a,l,c,u,h,d,f,m,g,b,y;if(l=this.colors,g=null,a=this.hasAlphaChannel,this.palette.length&&(g=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),l=4,a=!0),m=(c=s.data||s).length,h=g||o,u=d=0,l===1)for(;u<m;)f=g?4*o[u/4]:d,b=h[f++],c[u++]=b,c[u++]=b,c[u++]=b,c[u++]=a?h[f++]:255,d=f;else for(;u<m;)f=g?4*o[u/4]:d,c[u++]=h[f++],c[u++]=h[f++],c[u++]=h[f++],c[u++]=a?h[f++]:255,d=f},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Gt)==="[object Window]"){try{e=Gt.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,c,u,h,d,f;if(this.animation){for(f=[],a=u=0,h=(d=this.animation.frames).length;u<h;a=++u)o=d[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,f.push(o.image=t(l));return f}},r.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),c?.disposeOp===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):c?.disposeOp===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,c,u,h,d=this;return a=0,h=this.animation,c=h.numFrames,l=h.frames,u=h.numPlays,(o=function(){var f,m;if(f=a++%c,m=l[f],d.renderFrame(s,f),c>1&&a/c<u)return d.animation._timeout=setTimeout(o,m.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function i3e(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,u=[],h=0,d=null,f=0,m=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,m=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((C=t[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var g=t[e++];h=t[e++]|t[e++]<<8,d=t[e++],!(1&g)&&(d=null),f=g>>2&7,e++;break;case 254:for(;;){if(!((C=t[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var b=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,w=t[e++],S=w>>6&1,E=1<<(7&w)+1,k=a,_=l,L=!1;w>>7&&(L=!0,k=e,_=E,e+=3*E);var R=e;for(e++;;){var C;if(!((C=t[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}u.push({x:b,y,width:v,height:x,has_local_palette:L,palette_offset:k,palette_size:_,data_offset:R,data_length:e-R,transparent_index:d,interlaced:!!S,delay:h,disposal:f});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return m},this.frameInfo=function(P){if(P<0||P>=u.length)throw new Error("Frame index out of range.");return u[P]},this.decodeAndBlitFrameBGRA=function(P,O){var N=this.frameInfo(P),H=N.width*N.height,Q=new Uint8Array(H);Wj(t,N.data_offset,Q,H);var X=N.palette_offset,J=N.transparent_index;J===null&&(J=256);var j=N.width,F=n-j,Y=j,M=4*(N.y*n+N.x),D=4*((N.y+N.height)*n+N.x),V=M,W=4*F;N.interlaced===!0&&(W+=4*n*7);for(var te=8,ee=0,K=Q.length;ee<K;++ee){var he=Q[ee];if(Y===0&&(Y=j,(V+=W)>=D&&(W=4*F+4*n*(te-1),V=M+(j+F)*(te<<1),te>>=1)),he===J)V+=4;else{var be=t[X+3*he],Se=t[X+3*he+1],Ce=t[X+3*he+2];O[V++]=Ce,O[V++]=Se,O[V++]=be,O[V++]=255}--Y}},this.decodeAndBlitFrameRGBA=function(P,O){var N=this.frameInfo(P),H=N.width*N.height,Q=new Uint8Array(H);Wj(t,N.data_offset,Q,H);var X=N.palette_offset,J=N.transparent_index;J===null&&(J=256);var j=N.width,F=n-j,Y=j,M=4*(N.y*n+N.x),D=4*((N.y+N.height)*n+N.x),V=M,W=4*F;N.interlaced===!0&&(W+=4*n*7);for(var te=8,ee=0,K=Q.length;ee<K;++ee){var he=Q[ee];if(Y===0&&(Y=j,(V+=W)>=D&&(W=4*F+4*n*(te-1),V=M+(j+F)*(te<<1),te>>=1)),he===J)V+=4;else{var be=t[X+3*he],Se=t[X+3*he+1],Ce=t[X+3*he+2];O[V++]=be,O[V++]=Se,O[V++]=Ce,O[V++]=255}--Y}}}function Wj(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,u=0,h=0,d=0,f=t[e++],m=new Int32Array(4096),g=null;;){for(;u<16&&f!==0;)h|=t[e++]<<u,u+=8,f===1?f=t[e++]:--f;if(u<l)break;var b=h&c;if(h>>=l,u-=l,b!==s){if(b===o)break;for(var y=b<a?b:g,v=0,x=y;x>s;)x=m[x]>>8,++v;var w=x;if(d+v+(y!==b?1:0)>r)return void Zn.log("Warning, gif stream longer than expected.");n[d++]=w;var S=d+=v;for(y!==b&&(n[d++]=w),x=y;v--;)x=m[x],n[--S]=255&x,x>>=8;g!==null&&a<4096&&(m[a++]=g<<8|w,a>=c+1&&l<12&&(++l,c=c<<1|1)),g=b}else a=o+1,c=(1<<(l=i+1))-1,g=null}return d!==r&&Zn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function dT(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),h=new Array(65535),d=new Array(65535),f=new Array(64),m=new Array(64),g=[],b=0,y=7,v=new Array(64),x=new Array(64),w=new Array(64),S=new Array(256),E=new Array(2048),k=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],N=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],H=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Q(M,D){for(var V=0,W=0,te=new Array,ee=1;ee<=16;ee++){for(var K=1;K<=M[ee];K++)te[D[W]]=[],te[D[W]][0]=V,te[D[W]][1]=ee,W++,V++;V*=2}return te}function X(M){for(var D=M[0],V=M[1]-1;V>=0;)D&1<<V&&(b|=1<<y),V--,--y<0&&(b==255?(J(255),J(0)):J(b),y=7,b=0)}function J(M){g.push(M)}function j(M){J(M>>8&255),J(255&M)}function F(M,D,V,W,te){for(var ee,K=te[0],he=te[240],be=function(me,Pe){var Re,we,$e,Fe,Be,Ee,qe,Xe,et,re,$=0;for(et=0;et<8;++et){Re=me[$],we=me[$+1],$e=me[$+2],Fe=me[$+3],Be=me[$+4],Ee=me[$+5],qe=me[$+6];var G=Re+(Xe=me[$+7]),ue=Re-Xe,Ne=we+qe,De=we-qe,Ve=$e+Ee,Ft=$e-Ee,It=Fe+Be,xn=Fe-Be,Kt=G+It,nn=G-It,os=Ne+Ve,Yn=Ne-Ve;me[$]=Kt+os,me[$+4]=Kt-os;var Zt=.707106781*(Yn+nn);me[$+2]=nn+Zt,me[$+6]=nn-Zt;var Fn=.382683433*((Kt=xn+Ft)-(Yn=De+ue)),$h=.5411961*Kt+Fn,ki=1.306562965*Yn+Fn,Qa=.707106781*(os=Ft+De),el=ue+Qa,Vt=ue-Qa;me[$+5]=Vt+$h,me[$+3]=Vt-$h,me[$+1]=el+ki,me[$+7]=el-ki,$+=8}for($=0,et=0;et<8;++et){Re=me[$],we=me[$+8],$e=me[$+16],Fe=me[$+24],Be=me[$+32],Ee=me[$+40],qe=me[$+48];var fa=Re+(Xe=me[$+56]),tl=Re-Xe,ks=we+qe,ei=we-qe,$r=$e+Ee,Js=$e-Ee,Jf=Fe+Be,uc=Fe-Be,pa=fa+Jf,ma=fa-Jf,ga=ks+$r,nl=ks-$r;me[$]=pa+ga,me[$+32]=pa-ga;var ko=.707106781*(nl+ma);me[$+16]=ma+ko,me[$+48]=ma-ko;var rl=.382683433*((pa=uc+Js)-(nl=ei+tl)),Hh=.5411961*pa+rl,Qf=1.306562965*nl+rl,ep=.707106781*(ga=Js+ei),tp=tl+ep,np=tl-ep;me[$+40]=np+Hh,me[$+24]=np-Hh,me[$+8]=tp+Qf,me[$+56]=tp-Qf,$++}for(et=0;et<64;++et)re=me[et]*Pe[et],f[et]=re>0?re+.5|0:re-.5|0;return f}(M,D),Se=0;Se<64;++Se)m[k[Se]]=be[Se];var Ce=m[0]-V;V=m[0],Ce==0?X(W[0]):(X(W[d[ee=32767+Ce]]),X(h[ee]));for(var ke=63;ke>0&&m[ke]==0;)ke--;if(ke==0)return X(K),V;for(var q,pe=1;pe<=ke;){for(var ne=pe;m[pe]==0&&pe<=ke;)++pe;var oe=pe-ne;if(oe>=16){q=oe>>4;for(var ae=1;ae<=q;++ae)X(he);oe&=15}ee=32767+m[pe],X(te[(oe<<4)+d[ee]]),X(h[ee]),pe++}return ke!=63&&X(K),V}function Y(M){M=Math.min(Math.max(M,1),100),s!=M&&(function(D){for(var V=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],W=0;W<64;W++){var te=o((V[W]*D+50)/100);te=Math.min(Math.max(te,1),255),a[k[W]]=te}for(var ee=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],K=0;K<64;K++){var he=o((ee[K]*D+50)/100);he=Math.min(Math.max(he,1),255),l[k[K]]=he}for(var be=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Se=0,Ce=0;Ce<8;Ce++)for(var ke=0;ke<8;ke++)c[Se]=1/(a[k[Se]]*be[Ce]*be[ke]*8),u[Se]=1/(l[k[Se]]*be[Ce]*be[ke]*8),Se++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),s=M)}this.encode=function(M,D){D&&Y(D),g=new Array,b=0,y=7,j(65496),j(65504),j(16),J(74),J(70),J(73),J(70),J(0),J(1),J(1),J(0),j(1),j(1),J(0),J(0),function(){j(65499),j(132),J(0);for(var we=0;we<64;we++)J(a[we]);J(1);for(var $e=0;$e<64;$e++)J(l[$e])}(),function(we,$e){j(65472),j(17),J(8),j($e),j(we),J(3),J(1),J(17),J(0),J(2),J(17),J(1),J(3),J(17),J(1)}(M.width,M.height),function(){j(65476),j(418),J(0);for(var we=0;we<16;we++)J(_[we+1]);for(var $e=0;$e<=11;$e++)J(L[$e]);J(16);for(var Fe=0;Fe<16;Fe++)J(R[Fe+1]);for(var Be=0;Be<=161;Be++)J(C[Be]);J(1);for(var Ee=0;Ee<16;Ee++)J(P[Ee+1]);for(var qe=0;qe<=11;qe++)J(O[qe]);J(17);for(var Xe=0;Xe<16;Xe++)J(N[Xe+1]);for(var et=0;et<=161;et++)J(H[et])}(),j(65498),j(12),J(3),J(1),J(0),J(2),J(17),J(3),J(17),J(0),J(63),J(0);var V=0,W=0,te=0;b=0,y=7,this.encode.displayName="_encode_";for(var ee,K,he,be,Se,Ce,ke,q,pe,ne=M.data,oe=M.width,ae=M.height,me=4*oe,Pe=0;Pe<ae;){for(ee=0;ee<me;){for(Se=me*Pe+ee,ke=-1,q=0,pe=0;pe<64;pe++)Ce=Se+(q=pe>>3)*me+(ke=4*(7&pe)),Pe+q>=ae&&(Ce-=me*(Pe+1+q-ae)),ee+ke>=me&&(Ce-=ee+ke-me+4),K=ne[Ce++],he=ne[Ce++],be=ne[Ce++],v[pe]=(E[K]+E[he+256>>0]+E[be+512>>0]>>16)-128,x[pe]=(E[K+768>>0]+E[he+1024>>0]+E[be+1280>>0]>>16)-128,w[pe]=(E[K+1280>>0]+E[he+1536>>0]+E[be+1792>>0]>>16)-128;V=F(v,c,V,e,r),W=F(x,u,W,n,i),te=F(w,u,te,n,i),ee+=32}Pe+=8}if(y>=0){var Re=[];Re[1]=y+1,Re[0]=(1<<y+1)-1,X(Re)}return j(65497),new Uint8Array(g)},t=t||50,function(){for(var M=String.fromCharCode,D=0;D<256;D++)S[D]=M(D)}(),e=Q(_,L),n=Q(P,O),r=Q(R,C),i=Q(N,H),function(){for(var M=1,D=2,V=1;V<=15;V++){for(var W=M;W<D;W++)d[32767+W]=V,h[32767+W]=[],h[32767+W][1]=V,h[32767+W][0]=W;for(var te=-(D-1);te<=-M;te++)d[32767+te]=V,h[32767+te]=[],h[32767+te][1]=V,h[32767+te][0]=D-1+te;M<<=1,D<<=1}}(),function(){for(var M=0;M<256;M++)E[M]=19595*M,E[M+256>>0]=38470*M,E[M+512>>0]=7471*M+32768,E[M+768>>0]=-11059*M,E[M+1024>>0]=-21709*M,E[M+1280>>0]=32768*M+8421375,E[M+1536>>0]=-27439*M,E[M+1792>>0]=-5329*M}(),Y(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ea(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Gj(t){function e(_){if(!_)throw Error("assert :P")}function n(_,L,R){for(var C=0;4>C;C++)if(_[L+C]!=R.charCodeAt(C))return!0;return!1}function r(_,L,R,C,P){for(var O=0;O<P;O++)_[L+O]=R[C+O]}function i(_,L,R,C){for(var P=0;P<C;P++)_[L+P]=R}function s(_){return new Int32Array(_)}function o(_,L){for(var R=[],C=0;C<_;C++)R.push(new L);return R}function a(_,L){var R=[];return function C(P,O,N){for(var H=N[O],Q=0;Q<H&&(P.push(N.length>O+1?[]:new L),!(N.length<O+1));Q++)C(P[Q],O+1,N)}(R,0,_),R}var l=function(){var _=this;function L(T,I){for(var z=1<<I-1>>>0;T&z;)z>>>=1;return z?(T&z-1)+z:T}function R(T,I,z,Z,ie){e(!(Z%z));do T[I+(Z-=z)]=ie;while(0<Z)}function C(T,I,z,Z,ie){if(e(2328>=ie),512>=ie)var le=s(512);else if((le=s(ie))==null)return 0;return function(ce,de,fe,ve,Ie,Ke){var Ye,Ue,rt=de,Ze=1<<fe,Oe=s(16),Me=s(16);for(e(Ie!=0),e(ve!=null),e(ce!=null),e(0<fe),Ue=0;Ue<Ie;++Ue){if(15<ve[Ue])return 0;++Oe[ve[Ue]]}if(Oe[0]==Ie)return 0;for(Me[1]=0,Ye=1;15>Ye;++Ye){if(Oe[Ye]>1<<Ye)return 0;Me[Ye+1]=Me[Ye]+Oe[Ye]}for(Ue=0;Ue<Ie;++Ue)Ye=ve[Ue],0<ve[Ue]&&(Ke[Me[Ye]++]=Ue);if(Me[15]==1)return(ve=new P).g=0,ve.value=Ke[0],R(ce,rt,1,Ze,ve),Ze;var tt,ot=-1,nt=Ze-1,Tt=0,_t=1,Ht=1,St=1<<fe;for(Ue=0,Ye=1,Ie=2;Ye<=fe;++Ye,Ie<<=1){if(_t+=Ht<<=1,0>(Ht-=Oe[Ye]))return 0;for(;0<Oe[Ye];--Oe[Ye])(ve=new P).g=Ye,ve.value=Ke[Ue++],R(ce,rt+Tt,Ie,St,ve),Tt=L(Tt,Ye)}for(Ye=fe+1,Ie=2;15>=Ye;++Ye,Ie<<=1){if(_t+=Ht<<=1,0>(Ht-=Oe[Ye]))return 0;for(;0<Oe[Ye];--Oe[Ye]){if(ve=new P,(Tt&nt)!=ot){for(rt+=St,tt=1<<(ot=Ye)-fe;15>ot&&!(0>=(tt-=Oe[ot]));)++ot,tt<<=1;Ze+=St=1<<(tt=ot-fe),ce[de+(ot=Tt&nt)].g=tt+fe,ce[de+ot].value=rt-de-ot}ve.g=Ye-fe,ve.value=Ke[Ue++],R(ce,rt+(Tt>>fe),Ie,St,ve),Tt=L(Tt,Ye)}}return _t!=2*Me[15]-1?0:Ze}(T,I,z,Z,ie,le)}function P(){this.value=this.g=0}function O(){this.value=this.g=0}function N(){this.G=o(5,P),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ci,O)}function H(T,I,z,Z){e(T!=null),e(I!=null),e(2147483648>Z),T.Ca=254,T.I=0,T.b=-8,T.Ka=0,T.oa=I,T.pa=z,T.Jd=I,T.Yc=z+Z,T.Zc=4<=Z?z+Z-4+1:z,ee(T)}function Q(T,I){for(var z=0;0<I--;)z|=he(T,128)<<I;return z}function X(T,I){var z=Q(T,I);return K(T)?-z:z}function J(T,I,z,Z){var ie,le=0;for(e(T!=null),e(I!=null),e(4294967288>Z),T.Sb=Z,T.Ra=0,T.u=0,T.h=0,4<Z&&(Z=4),ie=0;ie<Z;++ie)le+=I[z+ie]<<8*ie;T.Ra=le,T.bb=Z,T.oa=I,T.pa=z}function j(T){for(;8<=T.u&&T.bb<T.Sb;)T.Ra>>>=8,T.Ra+=T.oa[T.pa+T.bb]<<bp-8>>>0,++T.bb,T.u-=8;V(T)&&(T.h=1,T.u=0)}function F(T,I){if(e(0<=I),!T.h&&I<=gp){var z=D(T)&mp[I];return T.u+=I,j(T),z}return T.h=1,T.u=0}function Y(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function D(T){return T.Ra>>>(T.u&bp-1)>>>0}function V(T){return e(T.bb<=T.Sb),T.h||T.bb==T.Sb&&T.u>bp}function W(T,I){T.u=I,T.h=V(T)}function te(T){T.u>=R0&&(e(T.u>=R0),j(T))}function ee(T){e(T!=null&&T.oa!=null),T.pa<T.Zc?(T.I=(T.oa[T.pa++]|T.I<<8)>>>0,T.b+=8):(e(T!=null&&T.oa!=null),T.pa<T.Yc?(T.b+=8,T.I=T.oa[T.pa++]|T.I<<8):T.Ka?T.b=0:(T.I<<=8,T.b+=8,T.Ka=1))}function K(T){return Q(T,1)}function he(T,I){var z=T.Ca;0>T.b&&ee(T);var Z=T.b,ie=z*I>>>8,le=(T.I>>>Z>ie)+0;for(le?(z-=ie,T.I-=ie+1<<Z>>>0):z=ie+1,Z=z,ie=0;256<=Z;)ie+=8,Z>>=8;return Z=7^ie+Ts[Z],T.b-=Z,T.Ca=(z<<Z)-1,le}function be(T,I,z){T[I+0]=z>>24&255,T[I+1]=z>>16&255,T[I+2]=z>>8&255,T[I+3]=z>>0&255}function Se(T,I){return T[I+0]<<0|T[I+1]<<8}function Ce(T,I){return Se(T,I)|T[I+2]<<16}function ke(T,I){return Se(T,I)|Se(T,I+2)<<16}function q(T,I){var z=1<<I;return e(T!=null),e(0<I),T.X=s(z),T.X==null?0:(T.Mb=32-I,T.Xa=I,1)}function pe(T,I){e(T!=null),e(I!=null),e(T.Xa==I.Xa),r(I.X,0,T.X,0,1<<I.Xa)}function ne(){this.X=[],this.Xa=this.Mb=0}function oe(T,I,z,Z){e(z!=null),e(Z!=null);var ie=z[0],le=Z[0];return ie==0&&(ie=(T*le+I/2)/I),le==0&&(le=(I*ie+T/2)/T),0>=ie||0>=le?0:(z[0]=ie,Z[0]=le,1)}function ae(T,I){return T+(1<<I)-1>>>I}function me(T,I){return((4278255360&T)+(4278255360&I)>>>0&4278255360)+((16711935&T)+(16711935&I)>>>0&16711935)>>>0}function Pe(T,I){_[I]=function(z,Z,ie,le,ce,de,fe){var ve;for(ve=0;ve<ce;++ve){var Ie=_[T](de[fe+ve-1],ie,le+ve);de[fe+ve]=me(z[Z+ve],Ie)}}}function Re(){this.ud=this.hd=this.jd=0}function we(T,I){return((4278124286&(T^I))>>>1)+(T&I)>>>0}function $e(T){return 0<=T&&256>T?T:0>T?0:255<T?255:void 0}function Fe(T,I){return $e(T+(T-I+.5>>1))}function Be(T,I,z){return Math.abs(I-z)-Math.abs(T-z)}function Ee(T,I,z,Z,ie,le,ce){for(Z=le[ce-1],z=0;z<ie;++z)le[ce+z]=Z=me(T[I+z],Z)}function qe(T,I,z,Z,ie){var le;for(le=0;le<z;++le){var ce=T[I+le],de=ce>>8&255,fe=16711935&(fe=(fe=16711935&ce)+((de<<16)+de));Z[ie+le]=(4278255360&ce)+fe>>>0}}function Xe(T,I){I.jd=T>>0&255,I.hd=T>>8&255,I.ud=T>>16&255}function et(T,I,z,Z,ie,le){var ce;for(ce=0;ce<Z;++ce){var de=I[z+ce],fe=de>>>8,ve=de,Ie=255&(Ie=(Ie=de>>>16)+((T.jd<<24>>24)*(fe<<24>>24)>>>5));ve=255&(ve=(ve=ve+((T.hd<<24>>24)*(fe<<24>>24)>>>5))+((T.ud<<24>>24)*(Ie<<24>>24)>>>5)),ie[le+ce]=(4278255360&de)+(Ie<<16)+ve}}function re(T,I,z,Z,ie){_[I]=function(le,ce,de,fe,ve,Ie,Ke,Ye,Ue){for(fe=Ke;fe<Ye;++fe)for(Ke=0;Ke<Ue;++Ke)ve[Ie++]=ie(de[Z(le[ce++])])},_[T]=function(le,ce,de,fe,ve,Ie,Ke){var Ye=8>>le.b,Ue=le.Ea,rt=le.K[0],Ze=le.w;if(8>Ye)for(le=(1<<le.b)-1,Ze=(1<<Ye)-1;ce<de;++ce){var Oe,Me=0;for(Oe=0;Oe<Ue;++Oe)Oe&le||(Me=Z(fe[ve++])),Ie[Ke++]=ie(rt[Me&Ze]),Me>>=Ye}else _["VP8LMapColor"+z](fe,ve,rt,Ze,Ie,Ke,ce,de,Ue)}}function $(T,I,z,Z,ie){for(z=I+z;I<z;){var le=T[I++];Z[ie++]=le>>16&255,Z[ie++]=le>>8&255,Z[ie++]=le>>0&255}}function G(T,I,z,Z,ie){for(z=I+z;I<z;){var le=T[I++];Z[ie++]=le>>16&255,Z[ie++]=le>>8&255,Z[ie++]=le>>0&255,Z[ie++]=le>>24&255}}function ue(T,I,z,Z,ie){for(z=I+z;I<z;){var le=(ce=T[I++])>>16&240|ce>>12&15,ce=ce>>0&240|ce>>28&15;Z[ie++]=le,Z[ie++]=ce}}function Ne(T,I,z,Z,ie){for(z=I+z;I<z;){var le=(ce=T[I++])>>16&248|ce>>13&7,ce=ce>>5&224|ce>>3&31;Z[ie++]=le,Z[ie++]=ce}}function De(T,I,z,Z,ie){for(z=I+z;I<z;){var le=T[I++];Z[ie++]=le>>0&255,Z[ie++]=le>>8&255,Z[ie++]=le>>16&255}}function Ve(T,I,z,Z,ie,le){if(le==0)for(z=I+z;I<z;)be(Z,((le=T[I++])[0]>>24|le[1]>>8&65280|le[2]<<8&16711680|le[3]<<24)>>>0),ie+=32;else r(Z,ie,T,I,z)}function Ft(T,I){_[I][0]=_[T+"0"],_[I][1]=_[T+"1"],_[I][2]=_[T+"2"],_[I][3]=_[T+"3"],_[I][4]=_[T+"4"],_[I][5]=_[T+"5"],_[I][6]=_[T+"6"],_[I][7]=_[T+"7"],_[I][8]=_[T+"8"],_[I][9]=_[T+"9"],_[I][10]=_[T+"10"],_[I][11]=_[T+"11"],_[I][12]=_[T+"12"],_[I][13]=_[T+"13"],_[I][14]=_[T+"0"],_[I][15]=_[T+"0"]}function It(T){return T==V5||T==W5||T==Hx||T==G5}function xn(){this.eb=[],this.size=this.A=this.fb=0}function Kt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function nn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new xn,this.f.kb=new Kt,this.sd=null}function os(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Yn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Zt(T){return alert("todo:WebPSamplerProcessPlane"),T.T}function Fn(T,I){var z=T.T,Z=I.ba.f.RGBA,ie=Z.eb,le=Z.fb+T.ka*Z.A,ce=Lo[I.ba.S],de=T.y,fe=T.O,ve=T.f,Ie=T.N,Ke=T.ea,Ye=T.W,Ue=I.cc,rt=I.dc,Ze=I.Mc,Oe=I.Nc,Me=T.ka,tt=T.ka+T.T,ot=T.U,nt=ot+1>>1;for(Me==0?ce(de,fe,null,null,ve,Ie,Ke,Ye,ve,Ie,Ke,Ye,ie,le,null,null,ot):(ce(I.ec,I.fc,de,fe,Ue,rt,Ze,Oe,ve,Ie,Ke,Ye,ie,le-Z.A,ie,le,ot),++z);Me+2<tt;Me+=2)Ue=ve,rt=Ie,Ze=Ke,Oe=Ye,Ie+=T.Rc,Ye+=T.Rc,le+=2*Z.A,ce(de,(fe+=2*T.fa)-T.fa,de,fe,Ue,rt,Ze,Oe,ve,Ie,Ke,Ye,ie,le-Z.A,ie,le,ot);return fe+=T.fa,T.j+tt<T.o?(r(I.ec,I.fc,de,fe,ot),r(I.cc,I.dc,ve,Ie,nt),r(I.Mc,I.Nc,Ke,Ye,nt),z--):1&tt||ce(de,fe,null,null,ve,Ie,Ke,Ye,ve,Ie,Ke,Ye,ie,le+Z.A,null,null,ot),z}function $h(T,I,z){var Z=T.F,ie=[T.J];if(Z!=null){var le=T.U,ce=I.ba.S,de=ce==$x||ce==Hx;I=I.ba.f.RGBA;var fe=[0],ve=T.ka;fe[0]=T.T,T.Kb&&(ve==0?--fe[0]:(--ve,ie[0]-=T.width),T.j+T.ka+T.T==T.o&&(fe[0]=T.o-T.j-ve));var Ie=I.eb;ve=I.fb+ve*I.A,T=nr(Z,ie[0],T.width,le,fe,Ie,ve+(de?0:3),I.A),e(z==fe),T&&It(ce)&&Po(Ie,ve,de,le,fe,I.A)}return 0}function ki(T){var I=T.ma,z=I.ba.S,Z=11>z,ie=z==Bx||z==Ux||z==$x||z==z5||z==12||It(z);if(I.memory=null,I.Ib=null,I.Jb=null,I.Nd=null,!N0(I.Oa,T,ie?11:12))return 0;if(ie&&It(z)&&ct(),T.da)alert("todo:use_scaling");else{if(Z){if(I.Ib=Zt,T.Kb){if(z=T.U+1>>1,I.memory=s(T.U+2*z),I.memory==null)return 0;I.ec=I.memory,I.fc=0,I.cc=I.ec,I.dc=I.fc+T.U,I.Mc=I.cc,I.Nc=I.dc+z,I.Ib=Fn,ct()}}else alert("todo:EmitYUV");ie&&(I.Jb=$h,Z&&ze())}if(Z&&!kD){for(T=0;256>T;++T)oae[T]=89858*(T-128)+Vx>>zx,cae[T]=-22014*(T-128)+Vx,lae[T]=-45773*(T-128),aae[T]=113618*(T-128)+Vx>>zx;for(T=B0;T<Y5;++T)I=76283*(T-16)+Vx>>zx,uae[T-B0]=Qs(I,255),hae[T-B0]=Qs(I+8>>4,15);kD=1}return 1}function Qa(T){var I=T.ma,z=T.U,Z=T.T;return e(!(1&T.ka)),0>=z||0>=Z?0:(z=I.Ib(T,I),I.Jb!=null&&I.Jb(T,I,z),I.Dc+=z,1)}function el(T){T.ma.memory=null}function Vt(T,I,z,Z){return F(T,8)!=47?0:(I[0]=F(T,14)+1,z[0]=F(T,14)+1,Z[0]=F(T,1),F(T,3)!=0?0:!T.h)}function fa(T,I){if(4>T)return T+1;var z=T-2>>1;return(2+(1&T)<<z)+F(I,z)+1}function tl(T,I){return 120<I?I-120:1<=(z=((z=Goe[I-1])>>4)*T+(8-(15&z)))?z:1;var z}function ks(T,I,z){var Z=D(z),ie=T[I+=255&Z].g-8;return 0<ie&&(W(z,z.u+8),Z=D(z),I+=T[I].value,I+=Z&(1<<ie)-1),W(z,z.u+T[I].g),T[I].value}function ei(T,I,z){return z.g+=T.g,z.value+=T.value<<I>>>0,e(8>=z.g),T.g}function $r(T,I,z){var Z=T.xc;return e((I=Z==0?0:T.vc[T.md*(z>>Z)+(I>>Z)])<T.Wb),T.Ya[I]}function Js(T,I,z,Z){var ie=T.ab,le=T.c*I,ce=T.C;I=ce+I;var de=z,fe=Z;for(Z=T.Ta,z=T.Ua;0<ie--;){var ve=T.gc[ie],Ie=ce,Ke=I,Ye=de,Ue=fe,rt=(fe=Z,de=z,ve.Ea);switch(e(Ie<Ke),e(Ke<=ve.nc),ve.hc){case 2:Rx(Ye,Ue,(Ke-Ie)*rt,fe,de);break;case 0:var Ze=Ie,Oe=Ke,Me=fe,tt=de,ot=(St=ve).Ea;Ze==0&&($5(Ye,Ue,null,null,1,Me,tt),Ee(Ye,Ue+1,0,0,ot-1,Me,tt+1),Ue+=ot,tt+=ot,++Ze);for(var nt=1<<St.b,Tt=nt-1,_t=ae(ot,St.b),Ht=St.K,St=St.w+(Ze>>St.b)*_t;Ze<Oe;){var Dn=Ht,Bn=St,An=1;for(I0(Ye,Ue,Me,tt-ot,1,Me,tt);An<ot;){var gn=(An&~Tt)+nt;gn>ot&&(gn=ot),(0,fu[Dn[Bn++]>>8&15])(Ye,Ue+ +An,Me,tt+An-ot,gn-An,Me,tt+An),An=gn}Ue+=ot,tt+=ot,++Ze&Tt||(St+=_t)}Ke!=ve.nc&&r(fe,de-rt,fe,de+(Ke-Ie-1)*rt,rt);break;case 1:for(rt=Ye,Oe=Ue,ot=(Ye=ve.Ea)-(tt=Ye&~(Me=(Ue=1<<ve.b)-1)),Ze=ae(Ye,ve.b),nt=ve.K,ve=ve.w+(Ie>>ve.b)*Ze;Ie<Ke;){for(Tt=nt,_t=ve,Ht=new Re,St=Oe+tt,Dn=Oe+Ye;Oe<St;)Xe(Tt[_t++],Ht),qh(Ht,rt,Oe,Ue,fe,de),Oe+=Ue,de+=Ue;Oe<Dn&&(Xe(Tt[_t++],Ht),qh(Ht,rt,Oe,ot,fe,de),Oe+=ot,de+=ot),++Ie&Me||(ve+=Ze)}break;case 3:if(Ye==fe&&Ue==de&&0<ve.b){for(Oe=fe,Ye=rt=de+(Ke-Ie)*rt-(tt=(Ke-Ie)*ae(ve.Ea,ve.b)),Ue=fe,Me=de,Ze=[],tt=(ot=tt)-1;0<=tt;--tt)Ze[tt]=Ue[Me+tt];for(tt=ot-1;0<=tt;--tt)Oe[Ye+tt]=Ze[tt];Co(ve,Ie,Ke,fe,rt,fe,de)}else Co(ve,Ie,Ke,Ye,Ue,fe,de)}de=Z,fe=z}fe!=z&&r(Z,z,de,fe,le)}function Jf(T,I){var z=T.V,Z=T.Ba+T.c*T.C,ie=I-T.C;if(e(I<=T.l.o),e(16>=ie),0<ie){var le=T.l,ce=T.Ta,de=T.Ua,fe=le.width;if(Js(T,ie,z,Z),ie=de=[de],e((z=T.C)<(Z=I)),e(le.v<le.va),Z>le.o&&(Z=le.o),z<le.j){var ve=le.j-z;z=le.j,ie[0]+=ve*fe}if(z>=Z?z=0:(ie[0]+=4*le.v,le.ka=z-le.j,le.U=le.va-le.v,le.T=Z-z,z=1),z){if(de=de[0],11>(z=T.ca).S){var Ie=z.f.RGBA,Ke=(Z=z.S,ie=le.U,le=le.T,ve=Ie.eb,Ie.A),Ye=le;for(Ie=Ie.fb+T.Ma*Ie.A;0<Ye--;){var Ue=ce,rt=de,Ze=ie,Oe=ve,Me=Ie;switch(Z){case Fx:As(Ue,rt,Ze,Oe,Me);break;case Bx:as(Ue,rt,Ze,Oe,Me);break;case V5:as(Ue,rt,Ze,Oe,Me),Po(Oe,Me,0,Ze,1,0);break;case gD:pc(Ue,rt,Ze,Oe,Me);break;case Ux:Ve(Ue,rt,Ze,Oe,Me,1);break;case W5:Ve(Ue,rt,Ze,Oe,Me,1),Po(Oe,Me,0,Ze,1,0);break;case $x:Ve(Ue,rt,Ze,Oe,Me,0);break;case Hx:Ve(Ue,rt,Ze,Oe,Me,0),Po(Oe,Me,1,Ze,1,0);break;case z5:pu(Ue,rt,Ze,Oe,Me);break;case G5:pu(Ue,rt,Ze,Oe,Me),tr(Oe,Me,Ze,1,0);break;case bD:fc(Ue,rt,Ze,Oe,Me);break;default:e(0)}de+=fe,Ie+=Ke}T.Ma+=le}else alert("todo:EmitRescaledRowsYUVA");e(T.Ma<=z.height)}}T.C=I,e(T.C<=T.i)}function uc(T){var I;if(0<T.ua)return 0;for(I=0;I<T.Wb;++I){var z=T.Ya[I].G,Z=T.Ya[I].H;if(0<z[1][Z[1]+0].g||0<z[2][Z[2]+0].g||0<z[3][Z[3]+0].g)return 0}return 1}function pa(T,I,z,Z,ie,le){if(T.Z!=0){var ce=T.qd,de=T.rd;for(e(yu[T.Z]!=null);I<z;++I)yu[T.Z](ce,de,Z,ie,Z,ie,le),ce=Z,de=ie,ie+=le;T.qd=ce,T.rd=de}}function ma(T,I){var z=T.l.ma,Z=z.Z==0||z.Z==1?T.l.j:T.C;if(Z=T.C<Z?Z:T.C,e(I<=T.l.o),I>Z){var ie=T.l.width,le=z.ca,ce=z.tb+ie*Z,de=T.V,fe=T.Ba+T.c*Z,ve=T.gc;e(T.ab==1),e(ve[0].hc==3),Ix(ve[0],Z,I,de,fe,le,ce),pa(z,Z,I,le,ce,ie)}T.C=T.Ma=I}function ga(T,I,z,Z,ie,le,ce){var de=T.$/Z,fe=T.$%Z,ve=T.m,Ie=T.s,Ke=z+T.$,Ye=Ke;ie=z+Z*ie;var Ue=z+Z*le,rt=280+Ie.ua,Ze=T.Pb?de:16777216,Oe=0<Ie.ua?Ie.Wa:null,Me=Ie.wc,tt=Ke<Ue?$r(Ie,fe,de):null;e(T.C<le),e(Ue<=ie);var ot=!1;e:for(;;){for(;ot||Ke<Ue;){var nt=0;if(de>=Ze){var Tt=Ke-z;e((Ze=T).Pb),Ze.wd=Ze.m,Ze.xd=Tt,0<Ze.s.ua&&pe(Ze.s.Wa,Ze.s.vb),Ze=de+Koe}if(fe&Me||(tt=$r(Ie,fe,de)),e(tt!=null),tt.Qb&&(I[Ke]=tt.qb,ot=!0),!ot)if(te(ve),tt.jc){nt=ve,Tt=I;var _t=Ke,Ht=tt.pd[D(nt)&Ci-1];e(tt.jc),256>Ht.g?(W(nt,nt.u+Ht.g),Tt[_t]=Ht.value,nt=0):(W(nt,nt.u+Ht.g-256),e(256<=Ht.value),nt=Ht.value),nt==0&&(ot=!0)}else nt=ks(tt.G[0],tt.H[0],ve);if(ve.h)break;if(ot||256>nt){if(!ot)if(tt.nd)I[Ke]=(tt.qb|nt<<8)>>>0;else{if(te(ve),ot=ks(tt.G[1],tt.H[1],ve),te(ve),Tt=ks(tt.G[2],tt.H[2],ve),_t=ks(tt.G[3],tt.H[3],ve),ve.h)break;I[Ke]=(_t<<24|ot<<16|nt<<8|Tt)>>>0}if(ot=!1,++Ke,++fe>=Z&&(fe=0,++de,ce!=null&&de<=le&&!(de%16)&&ce(T,de),Oe!=null))for(;Ye<Ke;)nt=I[Ye++],Oe.X[(506832829*nt&4294967295)>>>Oe.Mb]=nt}else if(280>nt){if(nt=fa(nt-256,ve),Tt=ks(tt.G[4],tt.H[4],ve),te(ve),Tt=tl(Z,Tt=fa(Tt,ve)),ve.h)break;if(Ke-z<Tt||ie-Ke<nt)break e;for(_t=0;_t<nt;++_t)I[Ke+_t]=I[Ke+_t-Tt];for(Ke+=nt,fe+=nt;fe>=Z;)fe-=Z,++de,ce!=null&&de<=le&&!(de%16)&&ce(T,de);if(e(Ke<=ie),fe&Me&&(tt=$r(Ie,fe,de)),Oe!=null)for(;Ye<Ke;)nt=I[Ye++],Oe.X[(506832829*nt&4294967295)>>>Oe.Mb]=nt}else{if(!(nt<rt))break e;for(ot=nt-280,e(Oe!=null);Ye<Ke;)nt=I[Ye++],Oe.X[(506832829*nt&4294967295)>>>Oe.Mb]=nt;nt=Ke,e(!(ot>>>(Tt=Oe).Xa)),I[nt]=Tt.X[ot],ot=!0}ot||e(ve.h==V(ve))}if(T.Pb&&ve.h&&Ke<ie)e(T.m.h),T.a=5,T.m=T.wd,T.$=T.xd,0<T.s.ua&&pe(T.s.vb,T.s.Wa);else{if(ve.h)break e;ce?.(T,de>le?le:de),T.a=0,T.$=Ke-z}return 1}return T.a=3,0}function nl(T){e(T!=null),T.vc=null,T.yc=null,T.Ya=null;var I=T.Wa;I!=null&&(I.X=null),T.vb=null,e(T!=null)}function ko(){var T=new U5;return T==null?null:(T.a=0,T.xb=xD,Ft("Predictor","VP8LPredictors"),Ft("Predictor","VP8LPredictors_C"),Ft("PredictorAdd","VP8LPredictorsAdd"),Ft("PredictorAdd","VP8LPredictorsAdd_C"),Rx=qe,qh=et,As=$,as=G,pu=ue,fc=Ne,pc=De,_.VP8LMapColor32b=yp,_.VP8LMapColor8b=Ox,T)}function rl(T,I,z,Z,ie){var le=1,ce=[T],de=[I],fe=Z.m,ve=Z.s,Ie=null,Ke=0;e:for(;;){if(z)for(;le&&F(fe,1);){var Ye=ce,Ue=de,rt=Z,Ze=1,Oe=rt.m,Me=rt.gc[rt.ab],tt=F(Oe,2);if(rt.Oc&1<<tt)le=0;else{switch(rt.Oc|=1<<tt,Me.hc=tt,Me.Ea=Ye[0],Me.nc=Ue[0],Me.K=[null],++rt.ab,e(4>=rt.ab),tt){case 0:case 1:Me.b=F(Oe,3)+2,Ze=rl(ae(Me.Ea,Me.b),ae(Me.nc,Me.b),0,rt,Me.K),Me.K=Me.K[0];break;case 3:var ot,nt=F(Oe,8)+1,Tt=16<nt?0:4<nt?1:2<nt?2:3;if(Ye[0]=ae(Me.Ea,Tt),Me.b=Tt,ot=Ze=rl(nt,1,0,rt,Me.K)){var _t,Ht=nt,St=Me,Dn=1<<(8>>St.b),Bn=s(Dn);if(Bn==null)ot=0;else{var An=St.K[0],gn=St.w;for(Bn[0]=St.K[0][0],_t=1;_t<1*Ht;++_t)Bn[_t]=me(An[gn+_t],Bn[_t-1]);for(;_t<4*Dn;++_t)Bn[_t]=0;St.K[0]=null,St.K[0]=Bn,ot=1}}Ze=ot;break;case 2:break;default:e(0)}le=Ze}}if(ce=ce[0],de=de[0],le&&F(fe,1)&&!(le=1<=(Ke=F(fe,4))&&11>=Ke)){Z.a=3;break e}var Xn;if(Xn=le)t:{var Gn,rn,zr,Ps=Z,Vr=ce,Ns=de,Un=Ke,to=z,no=Ps.m,hi=Ps.s,Ti=[null],cs=1,Ro=0,al=qoe[Un];n:for(;;){if(to&&F(no,1)){var di=F(no,3)+2,yc=ae(Vr,di),Jh=ae(Ns,di),Sp=yc*Jh;if(!rl(yc,Jh,0,Ps,Ti))break n;for(Ti=Ti[0],hi.xc=di,Gn=0;Gn<Sp;++Gn){var vu=Ti[Gn]>>8&65535;Ti[Gn]=vu,vu>=cs&&(cs=vu+1)}}if(no.h)break n;for(rn=0;5>rn;++rn){var kr=yD[rn];!rn&&0<Un&&(kr+=1<<Un),Ro<kr&&(Ro=kr)}var X5=o(cs*al,P),AD=cs,PD=o(AD,N);if(PD==null)var Gx=null;else e(65536>=AD),Gx=PD;var U0=s(Ro);if(Gx==null||U0==null||X5==null){Ps.a=1;break n}var qx=X5;for(Gn=zr=0;Gn<cs;++Gn){var _a=Gx[Gn],Ep=_a.G,kp=_a.H,ND=0,Kx=1,LD=0;for(rn=0;5>rn;++rn){kr=yD[rn],Ep[rn]=qx,kp[rn]=zr,!rn&&0<Un&&(kr+=1<<Un);i:{var Yx,Z5=kr,Xx=Ps,$0=U0,pae=qx,mae=zr,J5=0,xu=Xx.m,gae=F(xu,1);if(i($0,0,0,Z5),gae){var bae=F(xu,1)+1,yae=F(xu,1),RD=F(xu,yae==0?1:8);$0[RD]=1,bae==2&&($0[RD=F(xu,8)]=1);var Zx=1}else{var ID=s(19),OD=F(xu,4)+4;if(19<OD){Xx.a=3;var Jx=0;break i}for(Yx=0;Yx<OD;++Yx)ID[Woe[Yx]]=F(xu,3);var Q5=void 0,H0=void 0,DD=Xx,vae=ID,Qx=Z5,MD=$0,eC=0,_u=DD.m,jD=8,FD=o(128,P);r:for(;C(FD,0,7,vae,19);){if(F(_u,1)){var xae=2+2*F(_u,3);if((Q5=2+F(_u,xae))>Qx)break r}else Q5=Qx;for(H0=0;H0<Qx&&Q5--;){te(_u);var BD=FD[0+(127&D(_u))];W(_u,_u.u+BD.g);var Cp=BD.value;if(16>Cp)MD[H0++]=Cp,Cp!=0&&(jD=Cp);else{var _ae=Cp==16,UD=Cp-16,wae=zoe[UD],$D=F(_u,Hoe[UD])+wae;if(H0+$D>Qx)break r;for(var Sae=_ae?jD:0;0<$D--;)MD[H0++]=Sae}}eC=1;break r}eC||(DD.a=3),Zx=eC}(Zx=Zx&&!xu.h)&&(J5=C(pae,mae,8,$0,Z5)),Zx&&J5!=0?Jx=J5:(Xx.a=3,Jx=0)}if(Jx==0)break n;if(Kx&&Voe[rn]==1&&(Kx=qx[zr].g==0),ND+=qx[zr].g,zr+=Jx,3>=rn){var z0,tC=U0[0];for(z0=1;z0<kr;++z0)U0[z0]>tC&&(tC=U0[z0]);LD+=tC}}if(_a.nd=Kx,_a.Qb=0,Kx&&(_a.qb=(Ep[3][kp[3]+0].value<<24|Ep[1][kp[1]+0].value<<16|Ep[2][kp[2]+0].value)>>>0,ND==0&&256>Ep[0][kp[0]+0].value&&(_a.Qb=1,_a.qb+=Ep[0][kp[0]+0].value<<8)),_a.jc=!_a.Qb&&6>LD,_a.jc){var e_,vc=_a;for(e_=0;e_<Ci;++e_){var wu=e_,Su=vc.pd[wu],t_=vc.G[0][vc.H[0]+wu];256<=t_.value?(Su.g=t_.g+256,Su.value=t_.value):(Su.g=0,Su.value=0,wu>>=ei(t_,8,Su),wu>>=ei(vc.G[1][vc.H[1]+wu],16,Su),wu>>=ei(vc.G[2][vc.H[2]+wu],0,Su),ei(vc.G[3][vc.H[3]+wu],24,Su))}}}hi.vc=Ti,hi.Wb=cs,hi.Ya=Gx,hi.yc=X5,Xn=1;break t}Xn=0}if(!(le=Xn)){Z.a=3;break e}if(0<Ke){if(ve.ua=1<<Ke,!q(ve.Wa,Ke)){Z.a=1,le=0;break e}}else ve.ua=0;var nC=Z,HD=ce,Eae=de,rC=nC.s,iC=rC.xc;if(nC.c=HD,nC.i=Eae,rC.md=ae(HD,iC),rC.wc=iC==0?-1:(1<<iC)-1,z){Z.xb=tae;break e}if((Ie=s(ce*de))==null){Z.a=1,le=0;break e}le=(le=ga(Z,Ie,0,ce,de,de,null))&&!fe.h;break e}return le?(ie!=null?ie[0]=Ie:(e(Ie==null),e(z)),Z.$=0,z||nl(ve)):nl(ve),le}function Hh(T,I){var z=T.c*T.i,Z=z+I+16*I;return e(T.c<=I),T.V=s(Z),T.V==null?(T.Ta=null,T.Ua=0,T.a=1,0):(T.Ta=T.V,T.Ua=T.Ba+z+I,1)}function Qf(T,I){var z=T.C,Z=I-z,ie=T.V,le=T.Ba+T.c*z;for(e(I<=T.l.o);0<Z;){var ce=16<Z?16:Z,de=T.l.ma,fe=T.l.width,ve=fe*ce,Ie=de.ca,Ke=de.tb+fe*z,Ye=T.Ta,Ue=T.Ua;Js(T,ce,ie,le),Lr(Ye,Ue,Ie,Ke,ve),pa(de,z,z+ce,Ie,Ke,fe),Z-=ce,ie+=ce*T.c,z+=ce}e(z==I),T.C=T.Ma=I}function ep(){this.ub=this.yd=this.td=this.Rb=0}function tp(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function np(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function dx(){this.Yb=function(){var T=[];return function I(z,Z,ie){for(var le=ie[Z],ce=0;ce<le&&(z.push(ie.length>Z+1?[]:0),!(ie.length<Z+1));ce++)I(z[ce],Z+1,ie)}(T,0,[3,11]),T}()}function b5(){this.jb=s(3),this.Wc=a([4,8],dx),this.Xc=a([4,17],dx)}function y5(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function rp(){this.ld=this.La=this.dd=this.tc=0}function fx(){this.Na=this.la=0}function v5(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function p0(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function x5(){this.uc=this.M=this.Nb=0,this.wa=Array(new rp),this.Y=0,this.ya=Array(new p0),this.aa=0,this.l=new ip}function px(){this.y=s(16),this.f=s(8),this.ea=s(8)}function _5(){this.cb=this.a=0,this.sc="",this.m=new Y,this.Od=new ep,this.Kc=new tp,this.ed=new y5,this.Qa=new np,this.Ic=this.$c=this.Aa=0,this.D=new x5,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Y),this.ia=0,this.pb=o(4,v5),this.Pa=new b5,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new px),this.Hd=0,this.rb=Array(new fx),this.sb=0,this.wa=Array(new rp),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new p0),this.L=this.aa=0,this.gd=a([4,2],rp),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ip(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function w5(){var T=new _5;return T!=null&&(T.a=0,T.sc="OK",T.cb=0,T.Xb=0,F0||(F0=bx)),T}function Pr(T,I,z){return T.a==0&&(T.a=I,T.sc=z,T.cb=0),0}function mx(T,I,z){return 3<=z&&T[I+0]==157&&T[I+1]==1&&T[I+2]==42}function gx(T,I){if(T==null)return 0;if(T.a=0,T.sc="OK",I==null)return Pr(T,2,"null VP8Io passed to VP8GetHeaders()");var z=I.data,Z=I.w,ie=I.ha;if(4>ie)return Pr(T,7,"Truncated header.");var le=z[Z+0]|z[Z+1]<<8|z[Z+2]<<16,ce=T.Od;if(ce.Rb=!(1&le),ce.td=le>>1&7,ce.yd=le>>4&1,ce.ub=le>>5,3<ce.td)return Pr(T,3,"Incorrect keyframe parameters.");if(!ce.yd)return Pr(T,4,"Frame not displayable.");Z+=3,ie-=3;var de=T.Kc;if(ce.Rb){if(7>ie)return Pr(T,7,"cannot parse picture header");if(!mx(z,Z,ie))return Pr(T,3,"Bad code word");de.c=16383&(z[Z+4]<<8|z[Z+3]),de.Td=z[Z+4]>>6,de.i=16383&(z[Z+6]<<8|z[Z+5]),de.Ud=z[Z+6]>>6,Z+=7,ie-=7,T.za=de.c+15>>4,T.Ub=de.i+15>>4,I.width=de.c,I.height=de.i,I.Da=0,I.j=0,I.v=0,I.va=I.width,I.o=I.height,I.da=0,I.ib=I.width,I.hb=I.height,I.U=I.width,I.T=I.height,i((le=T.Pa).jb,0,255,le.jb.length),e((le=T.Qa)!=null),le.Cb=0,le.Bb=0,le.Fb=1,i(le.Zb,0,0,le.Zb.length),i(le.Lb,0,0,le.Lb)}if(ce.ub>ie)return Pr(T,7,"bad partition length");H(le=T.m,z,Z,ce.ub),Z+=ce.ub,ie-=ce.ub,ce.Rb&&(de.Ld=K(le),de.Kd=K(le)),de=T.Qa;var fe,ve=T.Pa;if(e(le!=null),e(de!=null),de.Cb=K(le),de.Cb){if(de.Bb=K(le),K(le)){for(de.Fb=K(le),fe=0;4>fe;++fe)de.Zb[fe]=K(le)?X(le,7):0;for(fe=0;4>fe;++fe)de.Lb[fe]=K(le)?X(le,6):0}if(de.Bb)for(fe=0;3>fe;++fe)ve.jb[fe]=K(le)?Q(le,8):255}else de.Bb=0;if(le.Ka)return Pr(T,3,"cannot parse segment header");if((de=T.ed).zd=K(le),de.Tb=Q(le,6),de.wb=Q(le,3),de.Pc=K(le),de.Pc&&K(le)){for(ve=0;4>ve;++ve)K(le)&&(de.vd[ve]=X(le,6));for(ve=0;4>ve;++ve)K(le)&&(de.od[ve]=X(le,6))}if(T.L=de.Tb==0?0:de.zd?1:2,le.Ka)return Pr(T,3,"cannot parse filter header");var Ie=ie;if(ie=fe=Z,Z=fe+Ie,de=Ie,T.Xb=(1<<Q(T.m,2))-1,Ie<3*(ve=T.Xb))z=7;else{for(fe+=3*ve,de-=3*ve,Ie=0;Ie<ve;++Ie){var Ke=z[ie+0]|z[ie+1]<<8|z[ie+2]<<16;Ke>de&&(Ke=de),H(T.Jc[+Ie],z,fe,Ke),fe+=Ke,de-=Ke,ie+=3}H(T.Jc[+ve],z,fe,de),z=fe<Z?0:5}if(z!=0)return Pr(T,z,"cannot parse partitions");for(z=Q(fe=T.m,7),ie=K(fe)?X(fe,4):0,Z=K(fe)?X(fe,4):0,de=K(fe)?X(fe,4):0,ve=K(fe)?X(fe,4):0,fe=K(fe)?X(fe,4):0,Ie=T.Qa,Ke=0;4>Ke;++Ke){if(Ie.Cb){var Ye=Ie.Zb[Ke];Ie.Fb||(Ye+=z)}else{if(0<Ke){T.pb[Ke]=T.pb[0];continue}Ye=z}var Ue=T.pb[Ke];Ue.Sc[0]=q5[Qs(Ye+ie,127)],Ue.Sc[1]=K5[Qs(Ye+0,127)],Ue.Eb[0]=2*q5[Qs(Ye+Z,127)],Ue.Eb[1]=101581*K5[Qs(Ye+de,127)]>>16,8>Ue.Eb[1]&&(Ue.Eb[1]=8),Ue.Qc[0]=q5[Qs(Ye+ve,117)],Ue.Qc[1]=K5[Qs(Ye+fe,127)],Ue.lc=Ye+fe}if(!ce.Rb)return Pr(T,4,"Not a key frame.");for(K(le),ce=T.Pa,z=0;4>z;++z){for(ie=0;8>ie;++ie)for(Z=0;3>Z;++Z)for(de=0;11>de;++de)ve=he(le,Qoe[z][ie][Z][de])?Q(le,8):Zoe[z][ie][Z][de],ce.Wc[z][ie].Yb[Z][de]=ve;for(ie=0;17>ie;++ie)ce.Xc[z][ie]=ce.Wc[z][eae[ie]]}return T.kc=K(le),T.kc&&(T.Bd=Q(le,8)),T.cb=1}function bx(T,I,z,Z,ie,le,ce){var de=I[ie].Yb[z];for(z=0;16>ie;++ie){if(!he(T,de[z+0]))return ie;for(;!he(T,de[z+1]);)if(de=I[++ie].Yb[0],z=0,ie==16)return 16;var fe=I[ie+1].Yb;if(he(T,de[z+2])){var ve=T,Ie=0;if(he(ve,(Ye=de)[(Ke=z)+3]))if(he(ve,Ye[Ke+6])){for(de=0,Ke=2*(Ie=he(ve,Ye[Ke+8]))+(Ye=he(ve,Ye[Ke+9+Ie])),Ie=0,Ye=Yoe[Ke];Ye[de];++de)Ie+=Ie+he(ve,Ye[de]);Ie+=3+(8<<Ke)}else he(ve,Ye[Ke+7])?(Ie=7+2*he(ve,165),Ie+=he(ve,145)):Ie=5+he(ve,159);else Ie=he(ve,Ye[Ke+4])?3+he(ve,Ye[Ke+5]):2;de=fe[2]}else Ie=1,de=fe[1];fe=ce+Xoe[ie],0>(ve=T).b&&ee(ve);var Ke,Ye=ve.b,Ue=(Ke=ve.Ca>>1)-(ve.I>>Ye)>>31;--ve.b,ve.Ca+=Ue,ve.Ca|=1,ve.I-=(Ke+1&Ue)<<Ye,le[fe]=((Ie^Ue)-Ue)*Z[(0<ie)+0]}return 16}function m0(T){var I=T.rb[T.sb-1];I.la=0,I.Na=0,i(T.zc,0,0,T.zc.length),T.ja=0}function S5(T,I){if(T==null)return 0;if(I==null)return Pr(T,2,"NULL VP8Io parameter in VP8Decode().");if(!T.cb&&!gx(T,I))return 0;if(e(T.cb),I.ac==null||I.ac(I)){I.ob&&(T.L=0);var z=Wx[T.L];if(T.L==2?(T.yb=0,T.zb=0):(T.yb=I.v-z>>4,T.zb=I.j-z>>4,0>T.yb&&(T.yb=0),0>T.zb&&(T.zb=0)),T.Va=I.o+15+z>>4,T.Hb=I.va+15+z>>4,T.Hb>T.za&&(T.Hb=T.za),T.Va>T.Ub&&(T.Va=T.Ub),0<T.L){var Z=T.ed;for(z=0;4>z;++z){var ie;if(T.Qa.Cb){var le=T.Qa.Lb[z];T.Qa.Fb||(le+=Z.Tb)}else le=Z.Tb;for(ie=0;1>=ie;++ie){var ce=T.gd[z][ie],de=le;if(Z.Pc&&(de+=Z.vd[0],ie&&(de+=Z.od[0])),0<(de=0>de?0:63<de?63:de)){var fe=de;0<Z.wb&&(fe=4<Z.wb?fe>>2:fe>>1)>9-Z.wb&&(fe=9-Z.wb),1>fe&&(fe=1),ce.dd=fe,ce.tc=2*de+fe,ce.ld=40<=de?2:15<=de?1:0}else ce.tc=0;ce.La=ie}}}z=0}else Pr(T,6,"Frame setup failed"),z=T.a;if(z=z==0){if(z){T.$c=0,0<T.Aa||(T.Ic=fae);e:{z=T.Ic,Z=4*(fe=T.za);var ve=32*fe,Ie=fe+1,Ke=0<T.L?fe*(0<T.Aa?2:1):0,Ye=(T.Aa==2?2:1)*fe;if((ce=Z+832+(ie=3*(16*z+Wx[T.L])/2*ve)+(le=T.Fa!=null&&0<T.Fa.length?T.Kc.c*T.Kc.i:0))!=ce)z=0;else{if(ce>T.Vb){if(T.Vb=0,T.Ec=s(ce),T.Fc=0,T.Ec==null){z=Pr(T,1,"no memory during frame initialization.");break e}T.Vb=ce}ce=T.Ec,de=T.Fc,T.Ac=ce,T.Bc=de,de+=Z,T.Gd=o(ve,px),T.Hd=0,T.rb=o(Ie+1,fx),T.sb=1,T.wa=Ke?o(Ke,rp):null,T.Y=0,T.D.Nb=0,T.D.wa=T.wa,T.D.Y=T.Y,0<T.Aa&&(T.D.Y+=fe),e(!0),T.oc=ce,T.pc=de,de+=832,T.ya=o(Ye,p0),T.aa=0,T.D.ya=T.ya,T.D.aa=T.aa,T.Aa==2&&(T.D.aa+=fe),T.R=16*fe,T.B=8*fe,fe=(ve=Wx[T.L])*T.R,ve=ve/2*T.B,T.sa=ce,T.ta=de+fe,T.qa=T.sa,T.ra=T.ta+16*z*T.R+ve,T.Ha=T.qa,T.Ia=T.ra+8*z*T.B+ve,T.$c=0,de+=ie,T.mb=le?ce:null,T.nb=le?de:null,e(de+le<=T.Fc+T.Vb),m0(T),i(T.Ac,T.Bc,0,Z),z=1}}if(z){if(I.ka=0,I.y=T.sa,I.O=T.ta,I.f=T.qa,I.N=T.ra,I.ea=T.Ha,I.Vd=T.Ia,I.fa=T.R,I.Rc=T.B,I.F=null,I.J=0,!Mx){for(z=-255;255>=z;++z)ti[255+z]=0>z?-z:z;for(z=-1020;1020>=z;++z)gc[1020+z]=-128>z?-128:127<z?127:z;for(z=-112;112>=z;++z)j0[112+z]=-16>z?-16:15<z?15:z;for(z=-255;510>=z;++z)wp[255+z]=0>z?0:255<z?255:z;Mx=1}vp=C5,mc=E5,O0=vx,ls=k5,To=xx,Nr=yx,xp=_0,Dx=Wh,D0=B5,Kh=w0,Yh=F5,mu=up,Xh=S0,_p=Px,Zh=Ax,gu=sl,M0=dc,Ao=j5,xa[0]=il,xa[1]=T5,xa[2]=L5,xa[3]=R5,xa[4]=Sx,xa[5]=lp,xa[6]=Ex,xa[7]=y0,xa[8]=O5,xa[9]=I5,bu[0]=_x,bu[1]=P5,bu[2]=hc,bu[3]=op,bu[4]=Ui,bu[5]=N5,bu[6]=wx,bc[0]=uu,bc[1]=A5,bc[2]=D5,bc[3]=v0,bc[4]=Vh,bc[5]=M5,bc[6]=x0,z=1}else z=0}z&&(z=function(Ue,rt){for(Ue.M=0;Ue.M<Ue.Va;++Ue.M){var Ze,Oe=Ue.Jc[Ue.M&Ue.Xb],Me=Ue.m,tt=Ue;for(Ze=0;Ze<tt.za;++Ze){var ot=Me,nt=tt,Tt=nt.Ac,_t=nt.Bc+4*Ze,Ht=nt.zc,St=nt.ya[nt.aa+Ze];if(nt.Qa.Bb?St.$b=he(ot,nt.Pa.jb[0])?2+he(ot,nt.Pa.jb[2]):he(ot,nt.Pa.jb[1]):St.$b=0,nt.kc&&(St.Ad=he(ot,nt.Bd)),St.Za=!he(ot,145)+0,St.Za){var Dn=St.Ob,Bn=0;for(nt=0;4>nt;++nt){var An,gn=Ht[0+nt];for(An=0;4>An;++An){gn=Joe[Tt[_t+An]][gn];for(var Xn=vD[he(ot,gn[0])];0<Xn;)Xn=vD[2*Xn+he(ot,gn[Xn])];gn=-Xn,Tt[_t+An]=gn}r(Dn,Bn,Tt,_t,4),Bn+=4,Ht[0+nt]=gn}}else gn=he(ot,156)?he(ot,128)?1:3:he(ot,163)?2:0,St.Ob[0]=gn,i(Tt,_t,gn,4),i(Ht,0,gn,4);St.Dd=he(ot,142)?he(ot,114)?he(ot,183)?1:3:2:0}if(tt.m.Ka)return Pr(Ue,7,"Premature end-of-partition0 encountered.");for(;Ue.ja<Ue.za;++Ue.ja){if(tt=Oe,ot=(Me=Ue).rb[Me.sb-1],Tt=Me.rb[Me.sb+Me.ja],Ze=Me.ya[Me.aa+Me.ja],_t=Me.kc?Ze.Ad:0)ot.la=Tt.la=0,Ze.Za||(ot.Na=Tt.Na=0),Ze.Hc=0,Ze.Gc=0,Ze.ia=0;else{var Gn,rn;if(ot=Tt,Tt=tt,_t=Me.Pa.Xc,Ht=Me.ya[Me.aa+Me.ja],St=Me.pb[Ht.$b],nt=Ht.ad,Dn=0,Bn=Me.rb[Me.sb-1],gn=An=0,i(nt,Dn,0,384),Ht.Za)var zr=0,Ps=_t[3];else{Xn=s(16);var Vr=ot.Na+Bn.Na;if(Vr=F0(Tt,_t[1],Vr,St.Eb,0,Xn,0),ot.Na=Bn.Na=(0<Vr)+0,1<Vr)vp(Xn,0,nt,Dn);else{var Ns=Xn[0]+3>>3;for(Xn=0;256>Xn;Xn+=16)nt[Dn+Xn]=Ns}zr=1,Ps=_t[0]}var Un=15&ot.la,to=15&Bn.la;for(Xn=0;4>Xn;++Xn){var no=1&to;for(Ns=rn=0;4>Ns;++Ns)Un=Un>>1|(no=(Vr=F0(Tt,Ps,Vr=no+(1&Un),St.Sc,zr,nt,Dn))>zr)<<7,rn=rn<<2|(3<Vr?3:1<Vr?2:nt[Dn+0]!=0),Dn+=16;Un>>=4,to=to>>1|no<<7,An=(An<<8|rn)>>>0}for(Ps=Un,zr=to>>4,Gn=0;4>Gn;Gn+=2){for(rn=0,Un=ot.la>>4+Gn,to=Bn.la>>4+Gn,Xn=0;2>Xn;++Xn){for(no=1&to,Ns=0;2>Ns;++Ns)Vr=no+(1&Un),Un=Un>>1|(no=0<(Vr=F0(Tt,_t[2],Vr,St.Qc,0,nt,Dn)))<<3,rn=rn<<2|(3<Vr?3:1<Vr?2:nt[Dn+0]!=0),Dn+=16;Un>>=2,to=to>>1|no<<5}gn|=rn<<4*Gn,Ps|=Un<<4<<Gn,zr|=(240&to)<<Gn}ot.la=Ps,Bn.la=zr,Ht.Hc=An,Ht.Gc=gn,Ht.ia=43690&gn?0:St.ia,_t=!(An|gn)}if(0<Me.L&&(Me.wa[Me.Y+Me.ja]=Me.gd[Ze.$b][Ze.Za],Me.wa[Me.Y+Me.ja].La|=!_t),tt.Ka)return Pr(Ue,7,"Premature end-of-file encountered.")}if(m0(Ue),Me=rt,tt=1,Ze=(Oe=Ue).D,ot=0<Oe.L&&Oe.M>=Oe.zb&&Oe.M<=Oe.Va,Oe.Aa==0)e:{if(Ze.M=Oe.M,Ze.uc=ot,P0(Oe,Ze),tt=1,Ze=(rn=Oe.D).Nb,ot=(gn=Wx[Oe.L])*Oe.R,Tt=gn/2*Oe.B,Xn=16*Ze*Oe.R,Ns=8*Ze*Oe.B,_t=Oe.sa,Ht=Oe.ta-ot+Xn,St=Oe.qa,nt=Oe.ra-Tt+Ns,Dn=Oe.Ha,Bn=Oe.Ia-Tt+Ns,to=(Un=rn.M)==0,An=Un>=Oe.Va-1,Oe.Aa==2&&P0(Oe,rn),rn.uc)for(no=(Vr=Oe).D.M,e(Vr.D.uc),rn=Vr.yb;rn<Vr.Hb;++rn){zr=rn,Ps=no;var hi=(Ti=(kr=Vr).D).Nb;Gn=kr.R;var Ti=Ti.wa[Ti.Y+zr],cs=kr.sa,Ro=kr.ta+16*hi*Gn+16*zr,al=Ti.dd,di=Ti.tc;if(di!=0)if(e(3<=di),kr.L==1)0<zr&&gu(cs,Ro,Gn,di+4),Ti.La&&Ao(cs,Ro,Gn,di),0<Ps&&Zh(cs,Ro,Gn,di+4),Ti.La&&M0(cs,Ro,Gn,di);else{var yc=kr.B,Jh=kr.qa,Sp=kr.ra+8*hi*yc+8*zr,vu=kr.Ha,kr=kr.Ia+8*hi*yc+8*zr;hi=Ti.ld,0<zr&&(Dx(cs,Ro,Gn,di+4,al,hi),Kh(Jh,Sp,vu,kr,yc,di+4,al,hi)),Ti.La&&(mu(cs,Ro,Gn,di,al,hi),_p(Jh,Sp,vu,kr,yc,di,al,hi)),0<Ps&&(xp(cs,Ro,Gn,di+4,al,hi),D0(Jh,Sp,vu,kr,yc,di+4,al,hi)),Ti.La&&(Yh(cs,Ro,Gn,di,al,hi),Xh(Jh,Sp,vu,kr,yc,di,al,hi))}}if(Oe.ia&&alert("todo:DitherRow"),Me.put!=null){if(rn=16*Un,Un=16*(Un+1),to?(Me.y=Oe.sa,Me.O=Oe.ta+Xn,Me.f=Oe.qa,Me.N=Oe.ra+Ns,Me.ea=Oe.Ha,Me.W=Oe.Ia+Ns):(rn-=gn,Me.y=_t,Me.O=Ht,Me.f=St,Me.N=nt,Me.ea=Dn,Me.W=Bn),An||(Un-=gn),Un>Me.o&&(Un=Me.o),Me.F=null,Me.J=null,Oe.Fa!=null&&0<Oe.Fa.length&&rn<Un&&(Me.J=T0(Oe,Me,rn,Un-rn),Me.F=Oe.mb,Me.F==null&&Me.F.length==0)){tt=Pr(Oe,3,"Could not decode alpha data.");break e}rn<Me.j&&(gn=Me.j-rn,rn=Me.j,e(!(1&gn)),Me.O+=Oe.R*gn,Me.N+=Oe.B*(gn>>1),Me.W+=Oe.B*(gn>>1),Me.F!=null&&(Me.J+=Me.width*gn)),rn<Un&&(Me.O+=Me.v,Me.N+=Me.v>>1,Me.W+=Me.v>>1,Me.F!=null&&(Me.J+=Me.v),Me.ka=rn-Me.j,Me.U=Me.va-Me.v,Me.T=Un-rn,tt=Me.put(Me))}Ze+1!=Oe.Ic||An||(r(Oe.sa,Oe.ta-ot,_t,Ht+16*Oe.R,ot),r(Oe.qa,Oe.ra-Tt,St,nt+8*Oe.B,Tt),r(Oe.Ha,Oe.Ia-Tt,Dn,Bn+8*Oe.B,Tt))}if(!tt)return Pr(Ue,6,"Output aborted.")}return 1}(T,I)),I.bc!=null&&I.bc(I),z&=1}return z?(T.cb=0,z):0}function ba(T,I,z,Z,ie){ie=T[I+z+32*Z]+(ie>>3),T[I+z+32*Z]=-256&ie?0>ie?0:255:ie}function sp(T,I,z,Z,ie,le){ba(T,I,0,z,Z+ie),ba(T,I,1,z,Z+le),ba(T,I,2,z,Z-le),ba(T,I,3,z,Z-ie)}function Cs(T){return(20091*T>>16)+T}function g0(T,I,z,Z){var ie,le=0,ce=s(16);for(ie=0;4>ie;++ie){var de=T[I+0]+T[I+8],fe=T[I+0]-T[I+8],ve=(35468*T[I+4]>>16)-Cs(T[I+12]),Ie=Cs(T[I+4])+(35468*T[I+12]>>16);ce[le+0]=de+Ie,ce[le+1]=fe+ve,ce[le+2]=fe-ve,ce[le+3]=de-Ie,le+=4,I++}for(ie=le=0;4>ie;++ie)de=(T=ce[le+0]+4)+ce[le+8],fe=T-ce[le+8],ve=(35468*ce[le+4]>>16)-Cs(ce[le+12]),ba(z,Z,0,0,de+(Ie=Cs(ce[le+4])+(35468*ce[le+12]>>16))),ba(z,Z,1,0,fe+ve),ba(z,Z,2,0,fe-ve),ba(z,Z,3,0,de-Ie),le++,Z+=32}function yx(T,I,z,Z){var ie=T[I+0]+4,le=35468*T[I+4]>>16,ce=Cs(T[I+4]),de=35468*T[I+1]>>16;sp(z,Z,0,ie+ce,T=Cs(T[I+1]),de),sp(z,Z,1,ie+le,T,de),sp(z,Z,2,ie-le,T,de),sp(z,Z,3,ie-ce,T,de)}function E5(T,I,z,Z,ie){g0(T,I,z,Z),ie&&g0(T,I+16,z,Z+4)}function vx(T,I,z,Z){mc(T,I+0,z,Z,1),mc(T,I+32,z,Z+128,1)}function k5(T,I,z,Z){var ie;for(T=T[I+0]+4,ie=0;4>ie;++ie)for(I=0;4>I;++I)ba(z,Z,I,ie,T)}function xx(T,I,z,Z){T[I+0]&&ls(T,I+0,z,Z),T[I+16]&&ls(T,I+16,z,Z+4),T[I+32]&&ls(T,I+32,z,Z+128),T[I+48]&&ls(T,I+48,z,Z+128+4)}function C5(T,I,z,Z){var ie,le=s(16);for(ie=0;4>ie;++ie){var ce=T[I+0+ie]+T[I+12+ie],de=T[I+4+ie]+T[I+8+ie],fe=T[I+4+ie]-T[I+8+ie],ve=T[I+0+ie]-T[I+12+ie];le[0+ie]=ce+de,le[8+ie]=ce-de,le[4+ie]=ve+fe,le[12+ie]=ve-fe}for(ie=0;4>ie;++ie)ce=(T=le[0+4*ie]+3)+le[3+4*ie],de=le[1+4*ie]+le[2+4*ie],fe=le[1+4*ie]-le[2+4*ie],ve=T-le[3+4*ie],z[Z+0]=ce+de>>3,z[Z+16]=ve+fe>>3,z[Z+32]=ce-de>>3,z[Z+48]=ve-fe>>3,Z+=64}function b0(T,I,z){var Z,ie=I-32,le=eo,ce=255-T[ie-1];for(Z=0;Z<z;++Z){var de,fe=le,ve=ce+T[I-1];for(de=0;de<z;++de)T[I+de]=fe[ve+T[ie+de]];I+=32}}function T5(T,I){b0(T,I,4)}function A5(T,I){b0(T,I,8)}function P5(T,I){b0(T,I,16)}function hc(T,I){var z;for(z=0;16>z;++z)r(T,I+32*z,T,I-32,16)}function op(T,I){var z;for(z=16;0<z;--z)i(T,I,T[I-1],16),I+=32}function ap(T,I,z){var Z;for(Z=0;16>Z;++Z)i(I,z+32*Z,T,16)}function _x(T,I){var z,Z=16;for(z=0;16>z;++z)Z+=T[I-1+32*z]+T[I+z-32];ap(Z>>5,T,I)}function Ui(T,I){var z,Z=8;for(z=0;16>z;++z)Z+=T[I-1+32*z];ap(Z>>4,T,I)}function N5(T,I){var z,Z=8;for(z=0;16>z;++z)Z+=T[I+z-32];ap(Z>>4,T,I)}function wx(T,I){ap(128,T,I)}function Xt(T,I,z){return T+2*I+z+2>>2}function L5(T,I){var z,Z=I-32;for(Z=new Uint8Array([Xt(T[Z-1],T[Z+0],T[Z+1]),Xt(T[Z+0],T[Z+1],T[Z+2]),Xt(T[Z+1],T[Z+2],T[Z+3]),Xt(T[Z+2],T[Z+3],T[Z+4])]),z=0;4>z;++z)r(T,I+32*z,Z,0,Z.length)}function R5(T,I){var z=T[I-1],Z=T[I-1+32],ie=T[I-1+64],le=T[I-1+96];be(T,I+0,16843009*Xt(T[I-1-32],z,Z)),be(T,I+32,16843009*Xt(z,Z,ie)),be(T,I+64,16843009*Xt(Z,ie,le)),be(T,I+96,16843009*Xt(ie,le,le))}function il(T,I){var z,Z=4;for(z=0;4>z;++z)Z+=T[I+z-32]+T[I-1+32*z];for(Z>>=3,z=0;4>z;++z)i(T,I+32*z,Z,4)}function Sx(T,I){var z=T[I-1+0],Z=T[I-1+32],ie=T[I-1+64],le=T[I-1-32],ce=T[I+0-32],de=T[I+1-32],fe=T[I+2-32],ve=T[I+3-32];T[I+0+96]=Xt(Z,ie,T[I-1+96]),T[I+1+96]=T[I+0+64]=Xt(z,Z,ie),T[I+2+96]=T[I+1+64]=T[I+0+32]=Xt(le,z,Z),T[I+3+96]=T[I+2+64]=T[I+1+32]=T[I+0+0]=Xt(ce,le,z),T[I+3+64]=T[I+2+32]=T[I+1+0]=Xt(de,ce,le),T[I+3+32]=T[I+2+0]=Xt(fe,de,ce),T[I+3+0]=Xt(ve,fe,de)}function Ex(T,I){var z=T[I+1-32],Z=T[I+2-32],ie=T[I+3-32],le=T[I+4-32],ce=T[I+5-32],de=T[I+6-32],fe=T[I+7-32];T[I+0+0]=Xt(T[I+0-32],z,Z),T[I+1+0]=T[I+0+32]=Xt(z,Z,ie),T[I+2+0]=T[I+1+32]=T[I+0+64]=Xt(Z,ie,le),T[I+3+0]=T[I+2+32]=T[I+1+64]=T[I+0+96]=Xt(ie,le,ce),T[I+3+32]=T[I+2+64]=T[I+1+96]=Xt(le,ce,de),T[I+3+64]=T[I+2+96]=Xt(ce,de,fe),T[I+3+96]=Xt(de,fe,fe)}function lp(T,I){var z=T[I-1+0],Z=T[I-1+32],ie=T[I-1+64],le=T[I-1-32],ce=T[I+0-32],de=T[I+1-32],fe=T[I+2-32],ve=T[I+3-32];T[I+0+0]=T[I+1+64]=le+ce+1>>1,T[I+1+0]=T[I+2+64]=ce+de+1>>1,T[I+2+0]=T[I+3+64]=de+fe+1>>1,T[I+3+0]=fe+ve+1>>1,T[I+0+96]=Xt(ie,Z,z),T[I+0+64]=Xt(Z,z,le),T[I+0+32]=T[I+1+96]=Xt(z,le,ce),T[I+1+32]=T[I+2+96]=Xt(le,ce,de),T[I+2+32]=T[I+3+96]=Xt(ce,de,fe),T[I+3+32]=Xt(de,fe,ve)}function y0(T,I){var z=T[I+0-32],Z=T[I+1-32],ie=T[I+2-32],le=T[I+3-32],ce=T[I+4-32],de=T[I+5-32],fe=T[I+6-32],ve=T[I+7-32];T[I+0+0]=z+Z+1>>1,T[I+1+0]=T[I+0+64]=Z+ie+1>>1,T[I+2+0]=T[I+1+64]=ie+le+1>>1,T[I+3+0]=T[I+2+64]=le+ce+1>>1,T[I+0+32]=Xt(z,Z,ie),T[I+1+32]=T[I+0+96]=Xt(Z,ie,le),T[I+2+32]=T[I+1+96]=Xt(ie,le,ce),T[I+3+32]=T[I+2+96]=Xt(le,ce,de),T[I+3+64]=Xt(ce,de,fe),T[I+3+96]=Xt(de,fe,ve)}function I5(T,I){var z=T[I-1+0],Z=T[I-1+32],ie=T[I-1+64],le=T[I-1+96];T[I+0+0]=z+Z+1>>1,T[I+2+0]=T[I+0+32]=Z+ie+1>>1,T[I+2+32]=T[I+0+64]=ie+le+1>>1,T[I+1+0]=Xt(z,Z,ie),T[I+3+0]=T[I+1+32]=Xt(Z,ie,le),T[I+3+32]=T[I+1+64]=Xt(ie,le,le),T[I+3+64]=T[I+2+64]=T[I+0+96]=T[I+1+96]=T[I+2+96]=T[I+3+96]=le}function O5(T,I){var z=T[I-1+0],Z=T[I-1+32],ie=T[I-1+64],le=T[I-1+96],ce=T[I-1-32],de=T[I+0-32],fe=T[I+1-32],ve=T[I+2-32];T[I+0+0]=T[I+2+32]=z+ce+1>>1,T[I+0+32]=T[I+2+64]=Z+z+1>>1,T[I+0+64]=T[I+2+96]=ie+Z+1>>1,T[I+0+96]=le+ie+1>>1,T[I+3+0]=Xt(de,fe,ve),T[I+2+0]=Xt(ce,de,fe),T[I+1+0]=T[I+3+32]=Xt(z,ce,de),T[I+1+32]=T[I+3+64]=Xt(Z,z,ce),T[I+1+64]=T[I+3+96]=Xt(ie,Z,z),T[I+1+96]=Xt(le,ie,Z)}function D5(T,I){var z;for(z=0;8>z;++z)r(T,I+32*z,T,I-32,8)}function v0(T,I){var z;for(z=0;8>z;++z)i(T,I,T[I-1],8),I+=32}function zh(T,I,z){var Z;for(Z=0;8>Z;++Z)i(I,z+32*Z,T,8)}function uu(T,I){var z,Z=8;for(z=0;8>z;++z)Z+=T[I+z-32]+T[I-1+32*z];zh(Z>>4,T,I)}function M5(T,I){var z,Z=4;for(z=0;8>z;++z)Z+=T[I+z-32];zh(Z>>3,T,I)}function Vh(T,I){var z,Z=4;for(z=0;8>z;++z)Z+=T[I-1+32*z];zh(Z>>3,T,I)}function x0(T,I){zh(128,T,I)}function cp(T,I,z){var Z=T[I-z],ie=T[I+0],le=3*(ie-Z)+H5[1020+T[I-2*z]-T[I+z]],ce=jx[112+(le+4>>3)];T[I-z]=eo[255+Z+jx[112+(le+3>>3)]],T[I+0]=eo[255+ie-ce]}function kx(T,I,z,Z){var ie=T[I+0],le=T[I+z];return No[255+T[I-2*z]-T[I-z]]>Z||No[255+le-ie]>Z}function Cx(T,I,z,Z){return 4*No[255+T[I-z]-T[I+0]]+No[255+T[I-2*z]-T[I+z]]<=Z}function Tx(T,I,z,Z,ie){var le=T[I-3*z],ce=T[I-2*z],de=T[I-z],fe=T[I+0],ve=T[I+z],Ie=T[I+2*z],Ke=T[I+3*z];return 4*No[255+de-fe]+No[255+ce-ve]>Z?0:No[255+T[I-4*z]-le]<=ie&&No[255+le-ce]<=ie&&No[255+ce-de]<=ie&&No[255+Ke-Ie]<=ie&&No[255+Ie-ve]<=ie&&No[255+ve-fe]<=ie}function Ax(T,I,z,Z){var ie=2*Z+1;for(Z=0;16>Z;++Z)Cx(T,I+Z,z,ie)&&cp(T,I+Z,z)}function sl(T,I,z,Z){var ie=2*Z+1;for(Z=0;16>Z;++Z)Cx(T,I+Z*z,1,ie)&&cp(T,I+Z*z,1)}function dc(T,I,z,Z){var ie;for(ie=3;0<ie;--ie)Ax(T,I+=4*z,z,Z)}function j5(T,I,z,Z){var ie;for(ie=3;0<ie;--ie)sl(T,I+=4,z,Z)}function hu(T,I,z,Z,ie,le,ce,de){for(le=2*le+1;0<ie--;){if(Tx(T,I,z,le,ce))if(kx(T,I,z,de))cp(T,I,z);else{var fe=T,ve=I,Ie=z,Ke=fe[ve-2*Ie],Ye=fe[ve-Ie],Ue=fe[ve+0],rt=fe[ve+Ie],Ze=fe[ve+2*Ie],Oe=27*(tt=H5[1020+3*(Ue-Ye)+H5[1020+Ke-rt]])+63>>7,Me=18*tt+63>>7,tt=9*tt+63>>7;fe[ve-3*Ie]=eo[255+fe[ve-3*Ie]+tt],fe[ve-2*Ie]=eo[255+Ke+Me],fe[ve-Ie]=eo[255+Ye+Oe],fe[ve+0]=eo[255+Ue-Oe],fe[ve+Ie]=eo[255+rt-Me],fe[ve+2*Ie]=eo[255+Ze-tt]}I+=Z}}function ya(T,I,z,Z,ie,le,ce,de){for(le=2*le+1;0<ie--;){if(Tx(T,I,z,le,ce))if(kx(T,I,z,de))cp(T,I,z);else{var fe=T,ve=I,Ie=z,Ke=fe[ve-Ie],Ye=fe[ve+0],Ue=fe[ve+Ie],rt=jx[112+((Ze=3*(Ye-Ke))+4>>3)],Ze=jx[112+(Ze+3>>3)],Oe=rt+1>>1;fe[ve-2*Ie]=eo[255+fe[ve-2*Ie]+Oe],fe[ve-Ie]=eo[255+Ke+Ze],fe[ve+0]=eo[255+Ye-rt],fe[ve+Ie]=eo[255+Ue-Oe]}I+=Z}}function _0(T,I,z,Z,ie,le){hu(T,I,z,1,16,Z,ie,le)}function Wh(T,I,z,Z,ie,le){hu(T,I,1,z,16,Z,ie,le)}function F5(T,I,z,Z,ie,le){var ce;for(ce=3;0<ce;--ce)ya(T,I+=4*z,z,1,16,Z,ie,le)}function up(T,I,z,Z,ie,le){var ce;for(ce=3;0<ce;--ce)ya(T,I+=4,1,z,16,Z,ie,le)}function B5(T,I,z,Z,ie,le,ce,de){hu(T,I,ie,1,8,le,ce,de),hu(z,Z,ie,1,8,le,ce,de)}function w0(T,I,z,Z,ie,le,ce,de){hu(T,I,1,ie,8,le,ce,de),hu(z,Z,1,ie,8,le,ce,de)}function S0(T,I,z,Z,ie,le,ce,de){ya(T,I+4*ie,ie,1,8,le,ce,de),ya(z,Z+4*ie,ie,1,8,le,ce,de)}function Px(T,I,z,Z,ie,le,ce,de){ya(T,I+4,1,ie,8,le,ce,de),ya(z,Z+4,1,ie,8,le,ce,de)}function hp(){this.ba=new nn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Yn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function E0(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function k0(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Nx(){this.ua=0,this.Wa=new ne,this.vb=new ne,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new N,this.yc=new P}function U5(){this.xb=this.a=0,this.l=new ip,this.ca=new nn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Nx,this.ab=0,this.gc=o(4,k0),this.Oc=0}function dp(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ip,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Gh(T,I,z,Z,ie,le,ce){for(T=T==null?0:T[I+0],I=0;I<ce;++I)ie[le+I]=T+z[Z+I]&255,T=ie[le+I]}function C0(T,I,z,Z,ie,le,ce){var de;if(T==null)Gh(null,null,z,Z,ie,le,ce);else for(de=0;de<ce;++de)ie[le+de]=T[I+de]+z[Z+de]&255}function du(T,I,z,Z,ie,le,ce){if(T==null)Gh(null,null,z,Z,ie,le,ce);else{var de,fe=T[I+0],ve=fe,Ie=fe;for(de=0;de<ce;++de)ve=Ie+(fe=T[I+de])-ve,Ie=z[Z+de]+(-256&ve?0>ve?0:255:ve)&255,ve=fe,ie[le+de]=Ie}}function T0(T,I,z,Z){var ie=I.width,le=I.o;if(e(T!=null&&I!=null),0>z||0>=Z||z+Z>le)return null;if(!T.Cc){if(T.ga==null){var ce;if(T.ga=new dp,(ce=T.ga==null)||(ce=I.width*I.o,e(T.Gb.length==0),T.Gb=s(ce),T.Uc=0,T.Gb==null?ce=0:(T.mb=T.Gb,T.nb=T.Uc,T.rc=null,ce=1),ce=!ce),!ce){ce=T.ga;var de=T.Fa,fe=T.P,ve=T.qc,Ie=T.mb,Ke=T.nb,Ye=fe+1,Ue=ve-1,rt=ce.l;if(e(de!=null&&Ie!=null&&I!=null),yu[0]=null,yu[1]=Gh,yu[2]=C0,yu[3]=du,ce.ca=Ie,ce.tb=Ke,ce.c=I.width,ce.i=I.height,e(0<ce.c&&0<ce.i),1>=ve)I=0;else if(ce.$a=de[fe+0]>>0&3,ce.Z=de[fe+0]>>2&3,ce.Lc=de[fe+0]>>4&3,fe=de[fe+0]>>6&3,0>ce.$a||1<ce.$a||4<=ce.Z||1<ce.Lc||fe)I=0;else if(rt.put=Qa,rt.ac=ki,rt.bc=el,rt.ma=ce,rt.width=I.width,rt.height=I.height,rt.Da=I.Da,rt.v=I.v,rt.va=I.va,rt.j=I.j,rt.o=I.o,ce.$a)e:{e(ce.$a==1),I=ko();t:for(;;){if(I==null){I=0;break e}if(e(ce!=null),ce.mc=I,I.c=ce.c,I.i=ce.i,I.l=ce.l,I.l.ma=ce,I.l.width=ce.c,I.l.height=ce.i,I.a=0,J(I.m,de,Ye,Ue),!rl(ce.c,ce.i,1,I,null)||(I.ab==1&&I.gc[0].hc==3&&uc(I.s)?(ce.ic=1,de=I.c*I.i,I.Ta=null,I.Ua=0,I.V=s(de),I.Ba=0,I.V==null?(I.a=1,I=0):I=1):(ce.ic=0,I=Hh(I,ce.c)),!I))break t;I=1;break e}ce.mc=null,I=0}else I=Ue>=ce.c*ce.i;ce=!I}if(ce)return null;T.ga.Lc!=1?T.Ga=0:Z=le-z}e(T.ga!=null),e(z+Z<=le);e:{if(I=(de=T.ga).c,le=de.l.o,de.$a==0){if(Ye=T.rc,Ue=T.Vc,rt=T.Fa,fe=T.P+1+z*I,ve=T.mb,Ie=T.nb+z*I,e(fe<=T.P+T.qc),de.Z!=0)for(e(yu[de.Z]!=null),ce=0;ce<Z;++ce)yu[de.Z](Ye,Ue,rt,fe,ve,Ie,I),Ye=ve,Ue=Ie,Ie+=I,fe+=I;else for(ce=0;ce<Z;++ce)r(ve,Ie,rt,fe,I),Ye=ve,Ue=Ie,Ie+=I,fe+=I;T.rc=Ye,T.Vc=Ue}else{if(e(de.mc!=null),I=z+Z,e((ce=de.mc)!=null),e(I<=ce.i),ce.C>=I)I=1;else if(de.ic||ze(),de.ic){de=ce.V,Ye=ce.Ba,Ue=ce.c;var Ze=ce.i,Oe=(rt=1,fe=ce.$/Ue,ve=ce.$%Ue,Ie=ce.m,Ke=ce.s,ce.$),Me=Ue*Ze,tt=Ue*I,ot=Ke.wc,nt=Oe<tt?$r(Ke,ve,fe):null;e(Oe<=Me),e(I<=Ze),e(uc(Ke));t:for(;;){for(;!Ie.h&&Oe<tt;){if(ve&ot||(nt=$r(Ke,ve,fe)),e(nt!=null),te(Ie),256>(Ze=ks(nt.G[0],nt.H[0],Ie)))de[Ye+Oe]=Ze,++Oe,++ve>=Ue&&(ve=0,++fe<=I&&!(fe%16)&&ma(ce,fe));else{if(!(280>Ze)){rt=0;break t}Ze=fa(Ze-256,Ie);var Tt,_t=ks(nt.G[4],nt.H[4],Ie);if(te(Ie),!(Oe>=(_t=tl(Ue,_t=fa(_t,Ie)))&&Me-Oe>=Ze)){rt=0;break t}for(Tt=0;Tt<Ze;++Tt)de[Ye+Oe+Tt]=de[Ye+Oe+Tt-_t];for(Oe+=Ze,ve+=Ze;ve>=Ue;)ve-=Ue,++fe<=I&&!(fe%16)&&ma(ce,fe);Oe<tt&&ve&ot&&(nt=$r(Ke,ve,fe))}e(Ie.h==V(Ie))}ma(ce,fe>I?I:fe);break t}!rt||Ie.h&&Oe<Me?(rt=0,ce.a=Ie.h?5:3):ce.$=Oe,I=rt}else I=ga(ce,ce.V,ce.Ba,ce.c,ce.i,I,Qf);if(!I){Z=0;break e}}z+Z>=le&&(T.Cc=1),Z=1}if(!Z)return null;if(T.Cc&&((Z=T.ga)!=null&&(Z.mc=null),T.ga=null,0<T.Ga))return alert("todo:WebPDequantizeLevels"),null}return T.nb+z*ie}function B(T,I,z,Z,ie,le){for(;0<ie--;){var ce,de=T,fe=I+(z?1:0),ve=T,Ie=I+(z?0:3);for(ce=0;ce<Z;++ce){var Ke=ve[Ie+4*ce];Ke!=255&&(Ke*=32897,de[fe+4*ce+0]=de[fe+4*ce+0]*Ke>>23,de[fe+4*ce+1]=de[fe+4*ce+1]*Ke>>23,de[fe+4*ce+2]=de[fe+4*ce+2]*Ke>>23)}I+=le}}function se(T,I,z,Z,ie){for(;0<Z--;){var le;for(le=0;le<z;++le){var ce=T[I+2*le+0],de=15&(ve=T[I+2*le+1]),fe=4369*de,ve=(240&ve|ve>>4)*fe>>16;T[I+2*le+0]=(240&ce|ce>>4)*fe>>16&240|(15&ce|ce<<4)*fe>>16>>4&15,T[I+2*le+1]=240&ve|de}I+=ie}}function _e(T,I,z,Z,ie,le,ce,de){var fe,ve,Ie=255;for(ve=0;ve<ie;++ve){for(fe=0;fe<Z;++fe){var Ke=T[I+fe];le[ce+4*fe]=Ke,Ie&=Ke}I+=z,ce+=de}return Ie!=255}function Le(T,I,z,Z,ie){var le;for(le=0;le<ie;++le)z[Z+le]=T[I+le]>>8}function ze(){Po=B,tr=se,nr=_e,Lr=Le}function Qe(T,I,z){_[T]=function(Z,ie,le,ce,de,fe,ve,Ie,Ke,Ye,Ue,rt,Ze,Oe,Me,tt,ot){var nt,Tt=ot-1>>1,_t=de[fe+0]|ve[Ie+0]<<16,Ht=Ke[Ye+0]|Ue[rt+0]<<16;e(Z!=null);var St=3*_t+Ht+131074>>2;for(I(Z[ie+0],255&St,St>>16,Ze,Oe),le!=null&&(St=3*Ht+_t+131074>>2,I(le[ce+0],255&St,St>>16,Me,tt)),nt=1;nt<=Tt;++nt){var Dn=de[fe+nt]|ve[Ie+nt]<<16,Bn=Ke[Ye+nt]|Ue[rt+nt]<<16,An=_t+Dn+Ht+Bn+524296,gn=An+2*(Dn+Ht)>>3;St=gn+_t>>1,_t=(An=An+2*(_t+Bn)>>3)+Dn>>1,I(Z[ie+2*nt-1],255&St,St>>16,Ze,Oe+(2*nt-1)*z),I(Z[ie+2*nt-0],255&_t,_t>>16,Ze,Oe+(2*nt-0)*z),le!=null&&(St=An+Ht>>1,_t=gn+Bn>>1,I(le[ce+2*nt-1],255&St,St>>16,Me,tt+(2*nt-1)*z),I(le[ce+2*nt+0],255&_t,_t>>16,Me,tt+(2*nt+0)*z)),_t=Dn,Ht=Bn}1&ot||(St=3*_t+Ht+131074>>2,I(Z[ie+ot-1],255&St,St>>16,Ze,Oe+(ot-1)*z),le!=null&&(St=3*Ht+_t+131074>>2,I(le[ce+ot-1],255&St,St>>16,Me,tt+(ot-1)*z)))}}function ct(){Lo[Fx]=nae,Lo[Bx]=_D,Lo[gD]=rae,Lo[Ux]=wD,Lo[$x]=SD,Lo[z5]=ED,Lo[bD]=iae,Lo[V5]=_D,Lo[W5]=wD,Lo[Hx]=SD,Lo[G5]=ED}function kt(T){return T&-16384?0>T?0:255:T>>sae}function $t(T,I){return kt((19077*T>>8)+(26149*I>>8)-14234)}function en(T,I,z){return kt((19077*T>>8)-(6419*I>>8)-(13320*z>>8)+8708)}function Jt(T,I){return kt((19077*T>>8)+(33050*I>>8)-17685)}function _n(T,I,z,Z,ie){Z[ie+0]=$t(T,z),Z[ie+1]=en(T,I,z),Z[ie+2]=Jt(T,I)}function xr(T,I,z,Z,ie){Z[ie+0]=Jt(T,I),Z[ie+1]=en(T,I,z),Z[ie+2]=$t(T,z)}function Er(T,I,z,Z,ie){var le=en(T,I,z);I=le<<3&224|Jt(T,I)>>3,Z[ie+0]=248&$t(T,z)|le>>5,Z[ie+1]=I}function Hr(T,I,z,Z,ie){var le=240&Jt(T,I)|15;Z[ie+0]=240&$t(T,z)|en(T,I,z)>>4,Z[ie+1]=le}function $i(T,I,z,Z,ie){Z[ie+0]=255,_n(T,I,z,Z,ie+1)}function ui(T,I,z,Z,ie){xr(T,I,z,Z,ie),Z[ie+3]=255}function va(T,I,z,Z,ie){_n(T,I,z,Z,ie),Z[ie+3]=255}function Qs(T,I){return 0>T?0:T>I?I:T}function ol(T,I,z){_[T]=function(Z,ie,le,ce,de,fe,ve,Ie,Ke){for(var Ye=Ie+(-2&Ke)*z;Ie!=Ye;)I(Z[ie+0],le[ce+0],de[fe+0],ve,Ie),I(Z[ie+1],le[ce+0],de[fe+0],ve,Ie+z),ie+=2,++ce,++fe,Ie+=2*z;1&Ke&&I(Z[ie+0],le[ce+0],de[fe+0],ve,Ie)}}function Lx(T,I,z){return z==0?T==0?I==0?6:5:I==0?4:0:z}function A0(T,I,z,Z,ie){switch(T>>>30){case 3:mc(I,z,Z,ie,0);break;case 2:Nr(I,z,Z,ie);break;case 1:ls(I,z,Z,ie)}}function P0(T,I){var z,Z,ie=I.M,le=I.Nb,ce=T.oc,de=T.pc+40,fe=T.oc,ve=T.pc+584,Ie=T.oc,Ke=T.pc+600;for(z=0;16>z;++z)ce[de+32*z-1]=129;for(z=0;8>z;++z)fe[ve+32*z-1]=129,Ie[Ke+32*z-1]=129;for(0<ie?ce[de-1-32]=fe[ve-1-32]=Ie[Ke-1-32]=129:(i(ce,de-32-1,127,21),i(fe,ve-32-1,127,9),i(Ie,Ke-32-1,127,9)),Z=0;Z<T.za;++Z){var Ye=I.ya[I.aa+Z];if(0<Z){for(z=-1;16>z;++z)r(ce,de+32*z-4,ce,de+32*z+12,4);for(z=-1;8>z;++z)r(fe,ve+32*z-4,fe,ve+32*z+4,4),r(Ie,Ke+32*z-4,Ie,Ke+32*z+4,4)}var Ue=T.Gd,rt=T.Hd+Z,Ze=Ye.ad,Oe=Ye.Hc;if(0<ie&&(r(ce,de-32,Ue[rt].y,0,16),r(fe,ve-32,Ue[rt].f,0,8),r(Ie,Ke-32,Ue[rt].ea,0,8)),Ye.Za){var Me=ce,tt=de-32+16;for(0<ie&&(Z>=T.za-1?i(Me,tt,Ue[rt].y[15],4):r(Me,tt,Ue[rt+1].y,0,4)),z=0;4>z;z++)Me[tt+128+z]=Me[tt+256+z]=Me[tt+384+z]=Me[tt+0+z];for(z=0;16>z;++z,Oe<<=2)Me=ce,tt=de+CD[z],xa[Ye.Ob[z]](Me,tt),A0(Oe,Ze,16*+z,Me,tt)}else if(Me=Lx(Z,ie,Ye.Ob[0]),bu[Me](ce,de),Oe!=0)for(z=0;16>z;++z,Oe<<=2)A0(Oe,Ze,16*+z,ce,de+CD[z]);for(z=Ye.Gc,Me=Lx(Z,ie,Ye.Dd),bc[Me](fe,ve),bc[Me](Ie,Ke),Oe=Ze,Me=fe,tt=ve,255&(Ye=z>>0)&&(170&Ye?O0(Oe,256,Me,tt):To(Oe,256,Me,tt)),Ye=Ie,Oe=Ke,255&(z>>=8)&&(170&z?O0(Ze,320,Ye,Oe):To(Ze,320,Ye,Oe)),ie<T.Ub-1&&(r(Ue[rt].y,0,ce,de+480,16),r(Ue[rt].f,0,fe,ve+224,8),r(Ue[rt].ea,0,Ie,Ke+224,8)),z=8*le*T.B,Ue=T.sa,rt=T.ta+16*Z+16*le*T.R,Ze=T.qa,Ye=T.ra+8*Z+z,Oe=T.Ha,Me=T.Ia+8*Z+z,z=0;16>z;++z)r(Ue,rt+z*T.R,ce,de+32*z,16);for(z=0;8>z;++z)r(Ze,Ye+z*T.B,fe,ve+32*z,8),r(Oe,Me+z*T.B,Ie,Ke+32*z,8)}}function fp(T,I,z,Z,ie,le,ce,de,fe){var ve=[0],Ie=[0],Ke=0,Ye=fe!=null?fe.kd:0,Ue=fe??new E0;if(T==null||12>z)return 7;Ue.data=T,Ue.w=I,Ue.ha=z,I=[I],z=[z],Ue.gb=[Ue.gb];e:{var rt=I,Ze=z,Oe=Ue.gb;if(e(T!=null),e(Ze!=null),e(Oe!=null),Oe[0]=0,12<=Ze[0]&&!n(T,rt[0],"RIFF")){if(n(T,rt[0]+8,"WEBP")){Oe=3;break e}var Me=ke(T,rt[0]+4);if(12>Me||4294967286<Me){Oe=3;break e}if(Ye&&Me>Ze[0]-8){Oe=7;break e}Oe[0]=Me,rt[0]+=12,Ze[0]-=12}Oe=0}if(Oe!=0)return Oe;for(Me=0<Ue.gb[0],z=z[0];;){e:{var tt=T;Ze=I,Oe=z;var ot=ve,nt=Ie,Tt=rt=[0];if((St=Ke=[Ke])[0]=0,8>Oe[0])Oe=7;else{if(!n(tt,Ze[0],"VP8X")){if(ke(tt,Ze[0]+4)!=10){Oe=3;break e}if(18>Oe[0]){Oe=7;break e}var _t=ke(tt,Ze[0]+8),Ht=1+Ce(tt,Ze[0]+12);if(2147483648<=Ht*(tt=1+Ce(tt,Ze[0]+15))){Oe=3;break e}Tt!=null&&(Tt[0]=_t),ot!=null&&(ot[0]=Ht),nt!=null&&(nt[0]=tt),Ze[0]+=18,Oe[0]-=18,St[0]=1}Oe=0}}if(Ke=Ke[0],rt=rt[0],Oe!=0)return Oe;if(Ze=!!(2&rt),!Me&&Ke)return 3;if(le!=null&&(le[0]=!!(16&rt)),ce!=null&&(ce[0]=Ze),de!=null&&(de[0]=0),ce=ve[0],rt=Ie[0],Ke&&Ze&&fe==null){Oe=0;break}if(4>z){Oe=7;break}if(Me&&Ke||!Me&&!Ke&&!n(T,I[0],"ALPH")){z=[z],Ue.na=[Ue.na],Ue.P=[Ue.P],Ue.Sa=[Ue.Sa];e:{_t=T,Oe=I,Me=z;var St=Ue.gb;ot=Ue.na,nt=Ue.P,Tt=Ue.Sa,Ht=22,e(_t!=null),e(Me!=null),tt=Oe[0];var Dn=Me[0];for(e(ot!=null),e(Tt!=null),ot[0]=null,nt[0]=null,Tt[0]=0;;){if(Oe[0]=tt,Me[0]=Dn,8>Dn){Oe=7;break e}var Bn=ke(_t,tt+4);if(4294967286<Bn){Oe=3;break e}var An=8+Bn+1&-2;if(Ht+=An,0<St&&Ht>St){Oe=3;break e}if(!n(_t,tt,"VP8 ")||!n(_t,tt,"VP8L")){Oe=0;break e}if(Dn[0]<An){Oe=7;break e}n(_t,tt,"ALPH")||(ot[0]=_t,nt[0]=tt+8,Tt[0]=Bn),tt+=An,Dn-=An}}if(z=z[0],Ue.na=Ue.na[0],Ue.P=Ue.P[0],Ue.Sa=Ue.Sa[0],Oe!=0)break}z=[z],Ue.Ja=[Ue.Ja],Ue.xa=[Ue.xa];e:if(St=T,Oe=I,Me=z,ot=Ue.gb[0],nt=Ue.Ja,Tt=Ue.xa,_t=Oe[0],tt=!n(St,_t,"VP8 "),Ht=!n(St,_t,"VP8L"),e(St!=null),e(Me!=null),e(nt!=null),e(Tt!=null),8>Me[0])Oe=7;else{if(tt||Ht){if(St=ke(St,_t+4),12<=ot&&St>ot-12){Oe=3;break e}if(Ye&&St>Me[0]-8){Oe=7;break e}nt[0]=St,Oe[0]+=8,Me[0]-=8,Tt[0]=Ht}else Tt[0]=5<=Me[0]&&St[_t+0]==47&&!(St[_t+4]>>5),nt[0]=Me[0];Oe=0}if(z=z[0],Ue.Ja=Ue.Ja[0],Ue.xa=Ue.xa[0],I=I[0],Oe!=0)break;if(4294967286<Ue.Ja)return 3;if(de==null||Ze||(de[0]=Ue.xa?2:1),ce=[ce],rt=[rt],Ue.xa){if(5>z){Oe=7;break}de=ce,Ye=rt,Ze=le,T==null||5>z?T=0:5<=z&&T[I+0]==47&&!(T[I+4]>>5)?(Me=[0],St=[0],ot=[0],J(nt=new M,T,I,z),Vt(nt,Me,St,ot)?(de!=null&&(de[0]=Me[0]),Ye!=null&&(Ye[0]=St[0]),Ze!=null&&(Ze[0]=ot[0]),T=1):T=0):T=0}else{if(10>z){Oe=7;break}de=rt,T==null||10>z||!mx(T,I+3,z-3)?T=0:(Ye=T[I+0]|T[I+1]<<8|T[I+2]<<16,Ze=16383&(T[I+7]<<8|T[I+6]),T=16383&(T[I+9]<<8|T[I+8]),1&Ye||3<(Ye>>1&7)||!(Ye>>4&1)||Ye>>5>=Ue.Ja||!Ze||!T?T=0:(ce&&(ce[0]=Ze),de&&(de[0]=T),T=1))}if(!T||(ce=ce[0],rt=rt[0],Ke&&(ve[0]!=ce||Ie[0]!=rt)))return 3;fe!=null&&(fe[0]=Ue,fe.offset=I-fe.w,e(4294967286>I-fe.w),e(fe.offset==fe.ha-z));break}return Oe==0||Oe==7&&Ke&&fe==null?(le!=null&&(le[0]|=Ue.na!=null&&0<Ue.na.length),Z!=null&&(Z[0]=ce),ie!=null&&(ie[0]=rt),0):Oe}function N0(T,I,z){var Z=I.width,ie=I.height,le=0,ce=0,de=Z,fe=ie;if(I.Da=T!=null&&0<T.Da,I.Da&&(de=T.cd,fe=T.bd,le=T.v,ce=T.j,11>z||(le&=-2,ce&=-2),0>le||0>ce||0>=de||0>=fe||le+de>Z||ce+fe>ie))return 0;if(I.v=le,I.j=ce,I.va=le+de,I.o=ce+fe,I.U=de,I.T=fe,I.da=T!=null&&0<T.da,I.da){if(!oe(de,fe,z=[T.ib],le=[T.hb]))return 0;I.ib=z[0],I.hb=le[0]}return I.ob=T!=null&&T.ob,I.Kb=T==null||!T.Sd,I.da&&(I.ob=I.ib<3*Z/4&&I.hb<3*ie/4,I.Kb=0),1}function L0(T){if(T==null)return 2;if(11>T.S){var I=T.f.RGBA;I.fb+=(T.height-1)*I.A,I.A=-I.A}else I=T.f.kb,T=T.height,I.O+=(T-1)*I.fa,I.fa=-I.fa,I.N+=(T-1>>1)*I.Ab,I.Ab=-I.Ab,I.W+=(T-1>>1)*I.Db,I.Db=-I.Db,I.F!=null&&(I.J+=(T-1)*I.lb,I.lb=-I.lb);return 0}function pp(T,I,z,Z){if(Z==null||0>=T||0>=I)return 2;if(z!=null){if(z.Da){var ie=z.cd,le=z.bd,ce=-2&z.v,de=-2&z.j;if(0>ce||0>de||0>=ie||0>=le||ce+ie>T||de+le>I)return 2;T=ie,I=le}if(z.da){if(!oe(T,I,ie=[z.ib],le=[z.hb]))return 2;T=ie[0],I=le[0]}}Z.width=T,Z.height=I;e:{var fe=Z.width,ve=Z.height;if(T=Z.S,0>=fe||0>=ve||!(T>=Fx&&13>T))T=2;else{if(0>=Z.Rd&&Z.sd==null){ce=le=ie=I=0;var Ie=(de=fe*TD[T])*ve;if(11>T||(le=(ve+1)/2*(I=(fe+1)/2),T==12&&(ce=(ie=fe)*ve)),(ve=s(Ie+2*le+ce))==null){T=1;break e}Z.sd=ve,11>T?((fe=Z.f.RGBA).eb=ve,fe.fb=0,fe.A=de,fe.size=Ie):((fe=Z.f.kb).y=ve,fe.O=0,fe.fa=de,fe.Fd=Ie,fe.f=ve,fe.N=0+Ie,fe.Ab=I,fe.Cd=le,fe.ea=ve,fe.W=0+Ie+le,fe.Db=I,fe.Ed=le,T==12&&(fe.F=ve,fe.J=0+Ie+2*le),fe.Tc=ce,fe.lb=ie)}if(I=1,ie=Z.S,le=Z.width,ce=Z.height,ie>=Fx&&13>ie)if(11>ie)T=Z.f.RGBA,I&=(de=Math.abs(T.A))*(ce-1)+le<=T.size,I&=de>=le*TD[ie],I&=T.eb!=null;else{T=Z.f.kb,de=(le+1)/2,Ie=(ce+1)/2,fe=Math.abs(T.fa),ve=Math.abs(T.Ab);var Ke=Math.abs(T.Db),Ye=Math.abs(T.lb),Ue=Ye*(ce-1)+le;I&=fe*(ce-1)+le<=T.Fd,I&=ve*(Ie-1)+de<=T.Cd,I=(I&=Ke*(Ie-1)+de<=T.Ed)&fe>=le&ve>=de&Ke>=de,I&=T.y!=null,I&=T.f!=null,I&=T.ea!=null,ie==12&&(I&=Ye>=le,I&=Ue<=T.Tc,I&=T.F!=null)}else I=0;T=I?0:2}}return T!=0||z!=null&&z.fd&&(T=L0(Z)),T}var Ci=64,mp=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],gp=24,bp=32,R0=8,Ts=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Pe("Predictor0","PredictorAdd0"),_.Predictor0=function(){return 4278190080},_.Predictor1=function(T){return T},_.Predictor2=function(T,I,z){return I[z+0]},_.Predictor3=function(T,I,z){return I[z+1]},_.Predictor4=function(T,I,z){return I[z-1]},_.Predictor5=function(T,I,z){return we(we(T,I[z+1]),I[z+0])},_.Predictor6=function(T,I,z){return we(T,I[z-1])},_.Predictor7=function(T,I,z){return we(T,I[z+0])},_.Predictor8=function(T,I,z){return we(I[z-1],I[z+0])},_.Predictor9=function(T,I,z){return we(I[z+0],I[z+1])},_.Predictor10=function(T,I,z){return we(we(T,I[z-1]),we(I[z+0],I[z+1]))},_.Predictor11=function(T,I,z){var Z=I[z+0];return 0>=Be(Z>>24&255,T>>24&255,(I=I[z-1])>>24&255)+Be(Z>>16&255,T>>16&255,I>>16&255)+Be(Z>>8&255,T>>8&255,I>>8&255)+Be(255&Z,255&T,255&I)?Z:T},_.Predictor12=function(T,I,z){var Z=I[z+0];return($e((T>>24&255)+(Z>>24&255)-((I=I[z-1])>>24&255))<<24|$e((T>>16&255)+(Z>>16&255)-(I>>16&255))<<16|$e((T>>8&255)+(Z>>8&255)-(I>>8&255))<<8|$e((255&T)+(255&Z)-(255&I)))>>>0},_.Predictor13=function(T,I,z){var Z=I[z-1];return(Fe((T=we(T,I[z+0]))>>24&255,Z>>24&255)<<24|Fe(T>>16&255,Z>>16&255)<<16|Fe(T>>8&255,Z>>8&255)<<8|Fe(T>>0&255,Z>>0&255))>>>0};var $5=_.PredictorAdd0;_.PredictorAdd1=Ee,Pe("Predictor2","PredictorAdd2"),Pe("Predictor3","PredictorAdd3"),Pe("Predictor4","PredictorAdd4"),Pe("Predictor5","PredictorAdd5"),Pe("Predictor6","PredictorAdd6"),Pe("Predictor7","PredictorAdd7"),Pe("Predictor8","PredictorAdd8"),Pe("Predictor9","PredictorAdd9"),Pe("Predictor10","PredictorAdd10"),Pe("Predictor11","PredictorAdd11"),Pe("Predictor12","PredictorAdd12"),Pe("Predictor13","PredictorAdd13");var I0=_.PredictorAdd2;re("ColorIndexInverseTransform","MapARGB","32b",function(T){return T>>8&255},function(T){return T}),re("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(T){return T},function(T){return T>>8&255});var Rx,Co=_.ColorIndexInverseTransform,yp=_.MapARGB,Ix=_.VP8LColorIndexInverseTransformAlpha,Ox=_.MapAlpha,fu=_.VP8LPredictorsAdd=[];fu.length=16,(_.VP8LPredictors=[]).length=16,(_.VP8LPredictorsAdd_C=[]).length=16,(_.VP8LPredictors_C=[]).length=16;var qh,As,as,pu,fc,pc,vp,mc,Nr,O0,ls,To,xp,Dx,D0,Kh,Yh,mu,Xh,_p,Zh,gu,M0,Ao,Po,tr,nr,Lr,ti=s(511),gc=s(2041),j0=s(225),wp=s(767),Mx=0,H5=gc,jx=j0,eo=wp,No=ti,Fx=0,Bx=1,gD=2,Ux=3,$x=4,z5=5,bD=6,V5=7,W5=8,Hx=9,G5=10,Hoe=[2,3,7],zoe=[3,3,11],yD=[280,256,256,256,40],Voe=[0,1,1,1,0],Woe=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Goe=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],qoe=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Koe=8,q5=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],K5=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],F0=null,Yoe=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Xoe=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],vD=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Zoe=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Joe=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Qoe=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],eae=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],bu=[],xa=[],bc=[],tae=1,xD=2,yu=[],Lo=[];Qe("UpsampleRgbLinePair",_n,3),Qe("UpsampleBgrLinePair",xr,3),Qe("UpsampleRgbaLinePair",va,4),Qe("UpsampleBgraLinePair",ui,4),Qe("UpsampleArgbLinePair",$i,4),Qe("UpsampleRgba4444LinePair",Hr,2),Qe("UpsampleRgb565LinePair",Er,2);var nae=_.UpsampleRgbLinePair,rae=_.UpsampleBgrLinePair,_D=_.UpsampleRgbaLinePair,wD=_.UpsampleBgraLinePair,SD=_.UpsampleArgbLinePair,ED=_.UpsampleRgba4444LinePair,iae=_.UpsampleRgb565LinePair,zx=16,Vx=1<<zx-1,B0=-227,Y5=482,sae=6,kD=0,oae=s(256),aae=s(256),lae=s(256),cae=s(256),uae=s(Y5-B0),hae=s(Y5-B0);ol("YuvToRgbRow",_n,3),ol("YuvToBgrRow",xr,3),ol("YuvToRgbaRow",va,4),ol("YuvToBgraRow",ui,4),ol("YuvToArgbRow",$i,4),ol("YuvToRgba4444Row",Hr,2),ol("YuvToRgb565Row",Er,2);var CD=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Wx=[0,2,8],dae=[8,7,6,4,4,2,2,2,1,1,1,1],fae=1;this.WebPDecodeRGBA=function(T,I,z,Z,ie){var le=Bx,ce=new hp,de=new nn;ce.ba=de,de.S=le,de.width=[de.width],de.height=[de.height];var fe=de.width,ve=de.height,Ie=new os;if(Ie==null||T==null)var Ke=2;else e(Ie!=null),Ke=fp(T,I,z,Ie.width,Ie.height,Ie.Pd,Ie.Qd,Ie.format,null);if(Ke!=0?fe=0:(fe!=null&&(fe[0]=Ie.width[0]),ve!=null&&(ve[0]=Ie.height[0]),fe=1),fe){de.width=de.width[0],de.height=de.height[0],Z!=null&&(Z[0]=de.width),ie!=null&&(ie[0]=de.height);e:{if(Z=new ip,(ie=new E0).data=T,ie.w=I,ie.ha=z,ie.kd=1,I=[0],e(ie!=null),((T=fp(ie.data,ie.w,ie.ha,null,null,null,I,null,ie))==0||T==7)&&I[0]&&(T=4),(I=T)==0){if(e(ce!=null),Z.data=ie.data,Z.w=ie.w+ie.offset,Z.ha=ie.ha-ie.offset,Z.put=Qa,Z.ac=ki,Z.bc=el,Z.ma=ce,ie.xa){if((T=ko())==null){ce=1;break e}if(function(Ye,Ue){var rt=[0],Ze=[0],Oe=[0];t:for(;;){if(Ye==null)return 0;if(Ue==null)return Ye.a=2,0;if(Ye.l=Ue,Ye.a=0,J(Ye.m,Ue.data,Ue.w,Ue.ha),!Vt(Ye.m,rt,Ze,Oe)){Ye.a=3;break t}if(Ye.xb=xD,Ue.width=rt[0],Ue.height=Ze[0],!rl(rt[0],Ze[0],1,Ye,null))break t;return 1}return e(Ye.a!=0),0}(T,Z)){if(Z=(I=pp(Z.width,Z.height,ce.Oa,ce.ba))==0){t:{Z=T;n:for(;;){if(Z==null){Z=0;break t}if(e(Z.s.yc!=null),e(Z.s.Ya!=null),e(0<Z.s.Wb),e((z=Z.l)!=null),e((ie=z.ma)!=null),Z.xb!=0){if(Z.ca=ie.ba,Z.tb=ie.tb,e(Z.ca!=null),!N0(ie.Oa,z,Ux)){Z.a=2;break n}if(!Hh(Z,z.width)||z.da)break n;if((z.da||It(Z.ca.S))&&ze(),11>Z.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Z.ca.f.kb.F!=null&&ze()),Z.Pb&&0<Z.s.ua&&Z.s.vb.X==null&&!q(Z.s.vb,Z.s.Wa.Xa)){Z.a=1;break n}Z.xb=0}if(!ga(Z,Z.V,Z.Ba,Z.c,Z.i,z.o,Jf))break n;ie.Dc=Z.Ma,Z=1;break t}e(Z.a!=0),Z=0}Z=!Z}Z&&(I=T.a)}else I=T.a}else{if((T=new w5)==null){ce=1;break e}if(T.Fa=ie.na,T.P=ie.P,T.qc=ie.Sa,gx(T,Z)){if((I=pp(Z.width,Z.height,ce.Oa,ce.ba))==0){if(T.Aa=0,z=ce.Oa,e((ie=T)!=null),z!=null){if(0<(fe=0>(fe=z.Md)?0:100<fe?255:255*fe/100)){for(ve=Ie=0;4>ve;++ve)12>(Ke=ie.pb[ve]).lc&&(Ke.ia=fe*dae[0>Ke.lc?0:Ke.lc]>>3),Ie|=Ke.ia;Ie&&(alert("todo:VP8InitRandom"),ie.ia=1)}ie.Ga=z.Id,100<ie.Ga?ie.Ga=100:0>ie.Ga&&(ie.Ga=0)}S5(T,Z)||(I=T.a)}}else I=T.a}I==0&&ce.Oa!=null&&ce.Oa.fd&&(I=L0(ce.ba))}ce=I}le=ce!=0?null:11>le?de.f.RGBA.eb:de.f.kb.y}else le=null;return le};var TD=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(_,L){for(var R="",C=0;C<4;C++)R+=String.fromCharCode(_[L++]);return R}function u(_,L){return(_[L+0]<<0|_[L+1]<<8|_[L+2]<<16)>>>0}function h(_,L){return(_[L+0]<<0|_[L+1]<<8|_[L+2]<<16|_[L+3]<<24)>>>0}new l;var d=[0],f=[0],m=[],g=new l,b=t,y=function(_,L){var R={},C=0,P=!1,O=0,N=0;if(R.frames=[],!function(D,V,W,te){for(var ee=0;ee<te;ee++)if(D[V+ee]!=W.charCodeAt(ee))return!0;return!1}(_,L,"RIFF",4)){var H,Q;for(h(_,L+=4),L+=8;L<_.length;){var X=c(_,L),J=h(_,L+=4);L+=4;var j=J+(1&J);switch(X){case"VP8 ":case"VP8L":R.frames[C]===void 0&&(R.frames[C]={}),(M=R.frames[C]).src_off=P?N:L-8,M.src_size=O+J+8,C++,P&&(P=!1,O=0,N=0);break;case"VP8X":(M=R.header={}).feature_flags=_[L];var F=L+4;M.canvas_width=1+u(_,F),F+=3,M.canvas_height=1+u(_,F),F+=3;break;case"ALPH":P=!0,O=j+8,N=L-8;break;case"ANIM":(M=R.header).bgcolor=h(_,L),F=L+4,M.loop_count=(H=_)[(Q=F)+0]<<0|H[Q+1]<<8,F+=2;break;case"ANMF":var Y,M;(M=R.frames[C]={}).offset_x=2*u(_,L),L+=3,M.offset_y=2*u(_,L),L+=3,M.width=1+u(_,L),L+=3,M.height=1+u(_,L),L+=3,M.duration=u(_,L),L+=3,Y=_[L++],M.dispose=1&Y,M.blend=Y>>1&1}X!="ANMF"&&(L+=j)}return R}}(b,0);y.response=b,y.rgbaoutput=!0,y.dataurl=!1;var v=y.header?y.header:null,x=y.frames?y.frames:null;if(v){v.loop_counter=v.loop_count,d=[v.canvas_height],f=[v.canvas_width];for(var w=0;w<x.length&&x[w].blend!=0;w++);}var S=x[0],E=g.WebPDecodeRGBA(b,S.src_off,S.src_size,f,d);S.rgba=E,S.imgwidth=f[0],S.imgheight=d[0];for(var k=0;k<f[0]*d[0]*4;k++)m[k]=E[k];return this.width=f,this.height=d,this.data=m,this}(function(t){var e=function(){return typeof kP=="function"},n=function(d,f,m,g){var b=4,y=o;switch(g){case t.image_compression.FAST:b=1,y=s;break;case t.image_compression.MEDIUM:b=6,y=a;break;case t.image_compression.SLOW:b=9,y=l}d=r(d,f,m,y);var v=kP(d,{level:b});return t.__addimage__.arrayBufferToBinaryString(v)},r=function(d,f,m,g){for(var b,y,v,x=d.length/f,w=new Uint8Array(d.length+x),S=u(),E=0;E<x;E+=1){if(v=E*f,b=d.subarray(v,v+f),g)w.set(g(b,m,y),v+E);else{for(var k,_=S.length,L=[];k<_;k+=1)L[k]=S[k](b,m,y);var R=h(L.concat());w.set(L[R],v+E)}y=b}return w},i=function(d){var f=Array.apply([],d);return f.unshift(0),f},s=function(d,f){var m,g=[],b=d.length;g[0]=1;for(var y=0;y<b;y+=1)m=d[y-f]||0,g[y+1]=d[y]-m+256&255;return g},o=function(d,f,m){var g,b=[],y=d.length;b[0]=2;for(var v=0;v<y;v+=1)g=m&&m[v]||0,b[v+1]=d[v]-g+256&255;return b},a=function(d,f,m){var g,b,y=[],v=d.length;y[0]=3;for(var x=0;x<v;x+=1)g=d[x-f]||0,b=m&&m[x]||0,y[x+1]=d[x]+256-(g+b>>>1)&255;return y},l=function(d,f,m){var g,b,y,v,x=[],w=d.length;x[0]=4;for(var S=0;S<w;S+=1)g=d[S-f]||0,b=m&&m[S]||0,y=m&&m[S-f]||0,v=c(g,b,y),x[S+1]=d[S]-v+256&255;return x},c=function(d,f,m){if(d===f&&f===m)return d;var g=Math.abs(f-m),b=Math.abs(d-m),y=Math.abs(d+f-m-m);return g<=b&&g<=y?d:b<=y?f:m},u=function(){return[i,s,o,a,l]},h=function(d){var f=d.map(function(m){return m.reduce(function(g,b){return g+Math.abs(b)},0)});return f.indexOf(Math.min.apply(null,f))};t.processPNG=function(d,f,m,g){var b,y,v,x,w,S,E,k,_,L,R,C,P,O,N,H=this.decode.FLATE_DECODE,Q="";if(this.__addimage__.isArrayBuffer(d)&&(d=new Uint8Array(d)),this.__addimage__.isArrayBufferView(d)){if(d=(v=new r3e(d)).imgData,y=v.bits,b=v.colorSpace,w=v.colors,[4,6].indexOf(v.colorType)!==-1){if(v.bits===8){_=(k=v.pixelBitlength==32?new Uint32Array(v.decodePixels().buffer):v.pixelBitlength==16?new Uint16Array(v.decodePixels().buffer):new Uint8Array(v.decodePixels().buffer)).length,R=new Uint8Array(_*v.colors),L=new Uint8Array(_);var X,J=v.pixelBitlength-v.bits;for(O=0,N=0;O<_;O++){for(P=k[O],X=0;X<J;)R[N++]=P>>>X&255,X+=v.bits;L[O]=P>>>X&255}}if(v.bits===16){_=(k=new Uint32Array(v.decodePixels().buffer)).length,R=new Uint8Array(_*(32/v.pixelBitlength)*v.colors),L=new Uint8Array(_*(32/v.pixelBitlength)),C=v.colors>1,O=0,N=0;for(var j=0;O<_;)P=k[O++],R[N++]=P>>>0&255,C&&(R[N++]=P>>>16&255,P=k[O++],R[N++]=P>>>0&255),L[j++]=P>>>16&255;y=8}g!==t.image_compression.NONE&&e()?(d=n(R,v.width*v.colors,v.colors,g),E=n(L,v.width,1,g)):(d=R,E=L,H=void 0)}if(v.colorType===3&&(b=this.color_spaces.INDEXED,S=v.palette,v.transparency.indexed)){var F=v.transparency.indexed,Y=0;for(O=0,_=F.length;O<_;++O)Y+=F[O];if((Y/=255)===_-1&&F.indexOf(0)!==-1)x=[F.indexOf(0)];else if(Y!==_){for(k=v.decodePixels(),L=new Uint8Array(k.length),O=0,_=k.length;O<_;O++)L[O]=F[k[O]];E=n(L,v.width,1)}}var M=function(D){var V;switch(D){case t.image_compression.FAST:V=11;break;case t.image_compression.MEDIUM:V=13;break;case t.image_compression.SLOW:V=14;break;default:V=12}return V}(g);return H===this.decode.FLATE_DECODE&&(Q="/Predictor "+M+" "),Q+="/Colors "+w+" /BitsPerComponent "+y+" /Columns "+v.width,(this.__addimage__.isArrayBuffer(d)||this.__addimage__.isArrayBufferView(d))&&(d=this.__addimage__.arrayBufferToBinaryString(d)),(E&&this.__addimage__.isArrayBuffer(E)||this.__addimage__.isArrayBufferView(E))&&(E=this.__addimage__.arrayBufferToBinaryString(E)),{alias:m,data:d,index:f,filter:H,decodeParameters:Q,transparency:x,palette:S,sMask:E,predictor:M,width:v.width,height:v.height,bitsPerComponent:y,colorSpace:b}}}})(zt.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new i3e(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},u=new dT(100).encode(c,100);return t.processJPEG.call(this,u,n,r,i)},t.processGIF87A=t.processGIF89A}(zt.API),Ea.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ea.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Zn.log("bit decode error:"+n)}},Ea.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},Ea.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Ea.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Ea.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,u=r*this.width*4+4*i;this.data[u]=l,this.data[u+1]=a,this.data[u+2]=o,this.data[u+3]=c}this.pos+=t}},Ea.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,u=i*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=a,this.data[u+3]=255}this.pos+=t}},Ea.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Ea.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},Ea.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new Ea(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new dT(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(zt.API),Gj.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new Gj(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new dT(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(zt.API),zt.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var u=r[c],h=r[c+1],d=r[c+2],f=r[c+3];s[a++]=u,s[a++]=h,s[a++]=d,o[l++]=f}var m=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:m,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},zt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Mp=zt.API,L_=Mp.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=c.fof?c.fof:1,h=e.doKerning!==!1,d=0,f=t.length,m=0,g=a[0]||l,b=[];for(n=0;n<f;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?b.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(d=h&&Vn(c[r])==="object"&&!isNaN(parseInt(c[r][m],10))?c[r][m]/u:0,b.push((a[r]||g)/l+d)),m=r;return b},Hj=Mp.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Mp.processArabic&&(t=Mp.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:L_.apply(this,arguments).reduce(function(s,o){return s+o},0)},zj=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},Vj=function(t,e,n){n||(n={});var r,i,s,o,a,l,c,u=[],h=[u],d=n.textIndent||0,f=0,m=0,g=t.split(" "),b=L_.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?g[0].length+2:n.lineIndent||0){var y=Array(l).join(" "),v=[];g.map(function(w){(w=w.split(/\s*\n/)).length>1?v=v.concat(w.map(function(S,E){return(E&&S.length?`
`:"")+S})):v.push(w[0])}),g=v,l=Hj.apply(this,[y,n])}for(s=0,o=g.length;s<o;s++){var x=0;if(r=g[s],l&&r[0]==`
`&&(r=r.substr(1),x=1),d+f+(m=(i=L_.apply(this,[r,n])).reduce(function(w,S){return w+S},0))>e||x){if(m>e){for(a=zj.apply(this,[r,i,e-(d+f),e]),u.push(a.shift()),u=[a.pop()];a.length;)h.push([a.shift()]);m=i.slice(r.length-(u[0]?u[0].length:0)).reduce(function(w,S){return w+S},0)}else u=[r];h.push(u),d=m+l,f=b}else u.push(r),d+=f+m,f=b}return c=l?function(w,S){return(S?y:"")+w.join(" ")}:function(w){return w.join(" ")},h.map(c)},Mp.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(Vj.apply(this,[r[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(h){return"0x"+parseInt(h,10).toString(16)},o=t.__fontmetrics__.compress=function(h){var d,f,m,g,b=["{"];for(var y in h){if(d=h[y],isNaN(parseInt(y,10))?f="'"+y+"'":(y=parseInt(y,10),f=(f=s(y).slice(2)).slice(0,-1)+r[f.slice(-1)]),typeof d=="number")d<0?(m=s(d).slice(3),g="-"):(m=s(d).slice(2),g=""),m=g+m.slice(0,-1)+r[m.slice(-1)];else{if(Vn(d)!=="object")throw new Error("Don't know what to do with value type "+Vn(d)+".");m=o(d)}b.push(f+m)}return b.push("}"),b.join("")},a=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var d,f,m,g,b={},y=1,v=b,x=[],w="",S="",E=h.length-1,k=1;k<E;k+=1)(g=h[k])=="'"?d?(m=d.join(""),d=void 0):d=[]:d?d.push(g):g=="{"?(x.push([v,m]),v={},m=void 0):g=="}"?((f=x.pop())[0][f[1]]=v,m=void 0,v=f[0]):g=="-"?y=-1:m===void 0?n.hasOwnProperty(g)?(w+=n[g],m=parseInt(w,16)*y,y=1,w=""):w+=g:n.hasOwnProperty(g)?(S+=n[g],v[m]=parseInt(S,16)*y,y=1,m=void 0,S=""):S+=g;return b},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var d=h.font,f=u.Unicode[d.postScriptName];f&&(d.metadata.Unicode={},d.metadata.Unicode.widths=f.widths,d.metadata.Unicode.kerning=f.kerning);var m=c.Unicode[d.postScriptName];m&&(d.metadata.Unicode.encoding=m,d.encoding=m.codePages[0])}])}(zt.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(u1(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(zt),function(t){function e(){return(Gt.canvg?Promise.resolve(Gt.canvg):ye(()=>import("./index.es-ClkHvYwd.js"),__vite__mapDeps([0,1,2,3,4,5]))).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}zt.API.addSvgAsImage=function(n,r,i,s,o,a,l,c){if(isNaN(r)||isNaN(i))throw Zn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Zn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=s,u.height=o;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return e().then(function(m){return m.fromString(h,n,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(d)}).then(function(){f.addImage(u.toDataURL("image/jpeg",1),r,i,s,o,l,c)})}}(),zt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},zt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,u=0,h=0;function d(m,g){var b,y=!1;for(b=0;b<m.length;b+=1)m[b]===g&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var f=a.length;for(h=0;h<f;h+=1)n[a[h]].value=n[a[h]].defaultValue,n[a[h]].explicitSet=!1}if(Vn(t)==="object"){for(i in t)if(s=t[i],d(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&d(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(u=0;u<s[c].length;u+=1)typeof s[c][u]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,g=[];for(m in n)n[m].explicitSet===!0&&(n[m].type==="name"?g.push("/"+m+" /"+n[m].value):g.push("/"+m+" "+n[m].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(zt.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],h=0,d=s.length;h<d;++h){if(a=o.metadata.characterToGlyph(s.charCodeAt(h)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(h),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return u.join("");a=a.toString(16),u.push(c[4-a.length],a)}return u.join("")},r=function(s){var o,a,l,c,u,h,d;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,d=(a=Object.keys(s).sort(function(f,m){return f-m})).length;h<d;h++)o=a[h],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var h=a.metadata.Unicode.widths,d=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),f="",m=0;m<d.length;m++)f+=String.fromCharCode(d[m]);var g=c();u({data:f,addLength1:!0,objectId:g}),l("endobj");var b=c();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var y=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Kp(a.fontName)),l("/FontFile2 "+g+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var v=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Kp(a.fontName)),l("/FontDescriptor "+y+" 0 R"),l("/W "+t.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+b+" 0 R"),l("/BaseFont /"+Kp(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+v+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var h=a.metadata.rawData,d="",f=0;f<h.length;f++)d+=String.fromCharCode(h[f]);var m=c();u({data:d,addLength1:!0,objectId:m}),l("endobj");var g=c();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:g}),l("endobj");var b=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+m+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Kp(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var y=0;y<a.metadata.hmtx.widths.length;y++)a.metadata.hmtx.widths[y]=parseInt(a.metadata.hmtx.widths[y]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+Kp(a.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,u=s.options||{},h=s.mutex||{},d=h.pdfEscape,f=h.activeFontKey,m=h.fonts,g=f,b="",y=0,v="",x=m[g].encoding;if(m[g].encoding!=="Identity-H")return{text:a,x:l,y:c,options:u,mutex:h};for(v=a,g=f,Array.isArray(a)&&(v=a[0]),y=0;y<v.length;y+=1)m[g].metadata.hasOwnProperty("cmap")&&(o=m[g].metadata.cmap.unicode.codeMap[v[y].charCodeAt(0)]),o||v[y].charCodeAt(0)<256&&m[g].metadata.hasOwnProperty("Unicode")?b+=v[y]:b+="";var w="";return parseInt(g.slice(1))<14||x==="WinAnsiEncoding"?w=d(b,g).split("").map(function(S){return S.charCodeAt(0).toString(16)}).join(""):x==="Identity-H"&&(w=n(b,m[g])),h.isHex=!0,{text:w,x:l,y:c,options:u,mutex:h}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(zt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(zt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,u,h=e,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),v=!1,x=0;this.__bidiEngine__={};var w=function(C){var P=C.charCodeAt(),O=P>>8,N=g[O];return N!==void 0?h[256*N+(255&P)]:O===252||O===253?"AL":y.test(O)?"L":O===8?"R":"N"},S=function(C){for(var P,O=0;O<C.length;O++){if((P=w(C.charAt(O)))==="L")return!1;if(P==="R")return!0}return!1},E=function(C,P,O,N){var H,Q,X,J,j=P[N];switch(j){case"L":case"R":v=!1;break;case"N":case"AN":break;case"EN":v&&(j="AN");break;case"AL":v=!0,j="R";break;case"WS":j="N";break;case"CS":N<1||N+1>=P.length||(H=O[N-1])!=="EN"&&H!=="AN"||(Q=P[N+1])!=="EN"&&Q!=="AN"?j="N":v&&(Q="AN"),j=Q===H?Q:"N";break;case"ES":j=(H=N>0?O[N-1]:"B")==="EN"&&N+1<P.length&&P[N+1]==="EN"?"EN":"N";break;case"ET":if(N>0&&O[N-1]==="EN"){j="EN";break}if(v){j="N";break}for(X=N+1,J=P.length;X<J&&P[X]==="ET";)X++;j=X<J&&P[X]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(J=P.length,X=N+1;X<J&&P[X]==="NSM";)X++;if(X<J){var F=C[N],Y=F>=1425&&F<=2303||F===64286;if(H=P[X],Y&&(H==="R"||H==="AL")){j="R";break}}}j=N<1||(H=P[N-1])==="B"?"N":O[N-1];break;case"B":v=!1,i=!0,j=x;break;case"S":s=!0,j="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":v=!1;break;case"BN":j="N"}return j},k=function(C,P,O){var N=C.split("");return O&&_(N,O,{hiLevel:x}),N.reverse(),P&&P.reverse(),N.join("")},_=function(C,P,O){var N,H,Q,X,J,j=-1,F=C.length,Y=0,M=[],D=x?f:d,V=[];for(v=!1,i=!1,s=!1,H=0;H<F;H++)V[H]=w(C[H]);for(Q=0;Q<F;Q++){if(J=Y,M[Q]=E(C,V,M,Q),N=240&(Y=D[J][m[M[Q]]]),Y&=15,P[Q]=X=D[Y][5],N>0)if(N===16){for(H=j;H<Q;H++)P[H]=1;j=-1}else j=-1;if(D[Y][6])j===-1&&(j=Q);else if(j>-1){for(H=j;H<Q;H++)P[H]=X;j=-1}V[Q]==="B"&&(P[Q]=0),O.hiLevel|=X}s&&function(W,te,ee){for(var K=0;K<ee;K++)if(W[K]==="S"){te[K]=x;for(var he=K-1;he>=0&&W[he]==="WS";he--)te[he]=x}}(V,P,F)},L=function(C,P,O,N,H){if(!(H.hiLevel<C)){if(C===1&&x===1&&!i)return P.reverse(),void(O&&O.reverse());for(var Q,X,J,j,F=P.length,Y=0;Y<F;){if(N[Y]>=C){for(J=Y+1;J<F&&N[J]>=C;)J++;for(j=Y,X=J-1;j<X;j++,X--)Q=P[j],P[j]=P[X],P[X]=Q,O&&(Q=O[j],O[j]=O[X],O[X]=Q);Y=J}Y++}}},R=function(C,P,O){var N=C.split(""),H={hiLevel:x};return O||(O=[]),_(N,O,H),function(Q,X,J){if(J.hiLevel!==0&&u)for(var j,F=0;F<Q.length;F++)X[F]===1&&(j=b.indexOf(Q[F]))>=0&&(Q[F]=b[j+1])}(N,O,H),L(2,N,P,O,H),L(1,N,P,O,H),N.join("")};return this.__bidiEngine__.doBidiReorder=function(C,P,O){if(function(H,Q){if(Q)for(var X=0;X<H.length;X++)Q[X]=X;a===void 0&&(a=S(H)),c===void 0&&(c=S(H))}(C,P),o||!l||c)if(o&&l&&a^c)x=a?1:0,C=k(C,P,O);else if(!o&&l&&c)x=a?1:0,C=R(C,P,O),C=k(C,P);else if(!o||a||l||c){if(o&&!l&&a^c)C=k(C,P),a?(x=0,C=R(C,P,O)):(x=1,C=R(C,P,O),C=k(C,P));else if(o&&a&&!l&&c)x=1,C=R(C,P,O),C=k(C,P);else if(!o&&!l&&a^c){var N=u;a?(x=1,C=R(C,P,O),x=0,u=!1,C=R(C,P,O),u=N):(x=0,C=R(C,P,O),C=k(C,P),x=1,u=!1,C=R(C,P,O),u=N,C=k(C,P))}}else x=0,C=R(C,P,O);else x=a?1:0,C=R(C,P,O);return C},this.__bidiEngine__.setOptions=function(C){C&&(o=C.isInputVisual,l=C.isOutputVisual,a=C.isInputRtl,c=C.isOutputRtl,u=C.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(zt),zt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new xh(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new v3e(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new s3e(this.contents),this.head=new a3e(this),this.name=new d3e(this),this.cmap=new PZ(this),this.toUnicode={},this.hhea=new l3e(this),this.maxp=new f3e(this),this.hmtx=new p3e(this),this.post=new u3e(this),this.os2=new c3e(this),this.loca=new y3e(this),this.glyf=new m3e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}.call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Ka,xh=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),s3e=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,c,u,h,d,f,m,g;for(g in f=Object.keys(n).length,l=Math.log(2),h=16*Math.floor(Math.log(f)/l),o=Math.floor(h/l),u=16*f-h,(i=new xh).writeInt(this.scalarType),i.writeShort(f),i.writeShort(h),i.writeShort(o),i.writeShort(u),s=16*f,c=i.pos+s,a=null,m=[],n)for(d=n[g],i.writeString(g),i.writeInt(t(d)),i.writeInt(c),i.writeInt(d.length),m=m.concat(d),g==="head"&&(a=c),c+=d.length;c%4;)m.push(0),c++;return i.write(m),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=NZ.call(n);n.length%4;)n.push(0);for(s=new xh(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),o3e={}.hasOwnProperty,ac=function(t,e){for(var n in e)o3e.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Ka=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var a3e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ac(e,Ka),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new xh).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),qj=function(){function t(e,n){var r,i,s,o,a,l,c,u,h,d,f,m,g,b,y,v,x;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(f=e.readUInt16(),d=f/2,e.pos+=6,s=function(){var w,S;for(S=[],l=w=0;0<=d?w<d:w>d;l=0<=d?++w:--w)S.push(e.readUInt16());return S}(),e.pos+=2,g=function(){var w,S;for(S=[],l=w=0;0<=d?w<d:w>d;l=0<=d?++w:--w)S.push(e.readUInt16());return S}(),c=function(){var w,S;for(S=[],l=w=0;0<=d?w<d:w>d;l=0<=d?++w:--w)S.push(e.readUInt16());return S}(),u=function(){var w,S;for(S=[],l=w=0;0<=d?w<d:w>d;l=0<=d?++w:--w)S.push(e.readUInt16());return S}(),i=(this.length-e.pos+this.offset)/2,a=function(){var w,S;for(S=[],l=w=0;0<=i?w<i:w>i;l=0<=i?++w:--w)S.push(e.readUInt16());return S}(),l=y=0,x=s.length;y<x;l=++y)for(b=s[l],r=v=m=g[l];m<=b?v<=b:v>=b;r=m<=b?++v:--v)u[l]===0?o=r+c[l]:(o=a[u[l]/2+(r-m)-(d-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=h}return t.encode=function(e,n){var r,i,s,o,a,l,c,u,h,d,f,m,g,b,y,v,x,w,S,E,k,_,L,R,C,P,O,N,H,Q,X,J,j,F,Y,M,D,V,W,te,ee,K,he,be,Se,Ce;switch(N=new xh,o=Object.keys(e).sort(function(ke,q){return ke-q}),n){case"macroman":for(g=0,b=function(){var ke=[];for(m=0;m<256;++m)ke.push(0);return ke}(),v={0:0},s={},H=0,j=o.length;H<j;H++)v[he=e[i=o[H]]]==null&&(v[he]=++g),s[i]={old:e[i],new:v[e[i]]},b[i]=v[e[i]];return N.writeUInt16(1),N.writeUInt16(0),N.writeUInt32(12),N.writeUInt16(0),N.writeUInt16(262),N.writeUInt16(0),N.write(b),{charMap:s,subtable:N.data,maxGlyphID:g+1};case"unicode":for(P=[],h=[],x=0,v={},r={},y=c=null,Q=0,F=o.length;Q<F;Q++)v[S=e[i=o[Q]]]==null&&(v[S]=++x),r[i]={old:S,new:v[S]},a=v[S]-i,y!=null&&a===c||(y&&h.push(y),P.push(i),c=a),y=i;for(y&&h.push(y),h.push(65535),P.push(65535),R=2*(L=P.length),_=2*Math.pow(Math.log(L)/Math.LN2,2),d=Math.log(_/2)/Math.LN2,k=2*L-_,l=[],E=[],f=[],m=X=0,Y=P.length;X<Y;m=++X){if(C=P[m],u=h[m],C===65535){l.push(0),E.push(0);break}if(C-(O=r[C].new)>=32768)for(l.push(0),E.push(2*(f.length+L-m)),i=J=C;C<=u?J<=u:J>=u;i=C<=u?++J:--J)f.push(r[i].new);else l.push(O-C),E.push(0)}for(N.writeUInt16(3),N.writeUInt16(1),N.writeUInt32(12),N.writeUInt16(4),N.writeUInt16(16+8*L+2*f.length),N.writeUInt16(0),N.writeUInt16(R),N.writeUInt16(_),N.writeUInt16(d),N.writeUInt16(k),ee=0,M=h.length;ee<M;ee++)i=h[ee],N.writeUInt16(i);for(N.writeUInt16(0),K=0,D=P.length;K<D;K++)i=P[K],N.writeUInt16(i);for(be=0,V=l.length;be<V;be++)a=l[be],N.writeUInt16(a);for(Se=0,W=E.length;Se<W;Se++)w=E[Se],N.writeUInt16(w);for(Ce=0,te=f.length;Ce<te;Ce++)g=f[Ce],N.writeUInt16(g);return{charMap:r,subtable:N.data,maxGlyphID:x+1}}},t}(),PZ=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ac(e,Ka),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new qj(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=qj.encode(n,r),(s=new xh).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),l3e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ac(e,Ka),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),c3e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ac(e,Ka),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),u3e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ac(e,Ka),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}.call(this)}},e}(),h3e=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},d3e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ac(e,Ka),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,c,u,h,d,f;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=h=0,d=i.length;h<d;o=++h)s=i[o],n.pos=s.offset,u=n.readString(s.length),a=new h3e(u,s),c[f=s.nameID]==null&&(c[f]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),f3e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ac(e,Ka),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),p3e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ac(e,Ka),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,h;for(h=[],r=u=0;0<=s?u<s:u>s;r=0<=s?++u:--u)h.push(n.readInt16());return h}(),this.widths=function(){var u,h,d,f;for(f=[],u=0,h=(d=this.metrics).length;u<h;u++)o=d[u],f.push(o.advance);return f}.call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),NZ=[].slice,m3e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ac(e,Ka),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,c,u,h,d;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new xh(r.read(s))).readShort(),u=l.readShort(),d=l.readShort(),c=l.readShort(),h=l.readShort(),this.cache[n]=a===-1?new b3e(l,u,d,c,h):new g3e(l,a,u,d,c,h),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,c;for(a=[],o=[],l=0,c=r.length;l<c;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),g3e=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),b3e=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new xh(NZ.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),y3e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ac(e,Ka),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}.call(this):function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}.call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var u=new Array(4*i.length),h=0;h<i.length;++h)u[4*h+3]=255&i[h],u[4*h+2]=(65280&i[h])>>8,u[4*h+1]=(16711680&i[h])>>16,u[4*h]=(4278190080&i[h])>>24;return u},e}(),v3e=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,c,u,h,d,f,m,g,b,y;for(i in r=PZ.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),f={0:0},y=r.charMap)f[(l=y[i]).old]=l.new;for(m in d=r.maxGlyphID,o)m in f||(f[m]=d++);return u=function(v){var x,w;for(x in w={},v)w[v[x]]=x;return w}(f),h=Object.keys(u).sort(function(v,x){return v-x}),g=function(){var v,x,w;for(w=[],v=0,x=h.length;v<x;v++)a=h[v],w.push(u[a]);return w}(),s=this.font.glyf.encode(o,g,f),c=this.font.loca.encode(s.offsets,g),b={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},t}();zt.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n?.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();const R_=({title:t,deps:e})=>{const[n,r]=A.useState(!1);return e.length===0?null:p.jsxs(Ab,{open:n,onOpenChange:r,children:[p.jsxs(Pb,{className:Ae("flex w-full items-center justify-between p-4","bg-white dark:bg-[#0A0A0A]","hover:bg-purple-50/50 dark:hover:bg-[#1a1a1a]","border-b border-[#E5E5E5] dark:border-[#1A1A1A]","transition-colors duration-200","first:rounded-t-lg last:rounded-b-lg",{"hover:rounded-lg":!n}),children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"i-ph:package text-bolt-elements-textSecondary w-4 h-4"}),p.jsxs("span",{className:"text-base text-bolt-elements-textPrimary",children:[t," Dependencies (",e.length,")"]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:n?"Hide":"Show"}),p.jsx("div",{className:Ae("i-ph:caret-down w-4 h-4 transform transition-transform duration-200 text-bolt-elements-textSecondary",n?"rotate-180":"")})]})]}),p.jsx(Nb,{children:p.jsx(fI,{className:Ae("h-[200px] w-full","bg-white dark:bg-[#0A0A0A]","border-b border-[#E5E5E5] dark:border-[#1A1A1A]","last:rounded-b-lg last:border-b-0"),children:p.jsx("div",{className:"space-y-2 p-4",children:e.map(i=>p.jsxs("div",{className:"flex items-center justify-between text-sm",children:[p.jsx("span",{className:"text-bolt-elements-textPrimary",children:i.name}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:i.version})]},i.name))})})})]})};function x3e(){const[t,e]=A.useState(null),[n,r]=A.useState(null),[i,s]=A.useState({isRunning:!1,lastChecked:new Date}),[o,a]=A.useState({systemInfo:!1,webAppInfo:!1,errors:!1,performance:!1}),[l,c]=A.useState({system:!1,webapp:!1,errors:!1,performance:!1}),{providers:u}=Dh(),h=Ot(Ut.logs),d=A.useMemo(()=>Object.values(h).filter(C=>typeof C=="object"&&C!==null&&"level"in C&&C.level==="error"),[h]);A.useEffect(()=>{const C=O=>{Ut.logError(O.message,O.error,{filename:O.filename,lineNumber:O.lineno,columnNumber:O.colno})},P=O=>{Ut.logError("Unhandled Promise Rejection",O.reason)};return window.addEventListener("error",C),window.addEventListener("unhandledrejection",P),()=>{window.removeEventListener("error",C),window.removeEventListener("unhandledrejection",P)}},[]),A.useEffect(()=>{l.errors&&y()},[l.errors]),A.useEffect(()=>{(async()=>{await Promise.all([f(),m()])})()},[]),A.useEffect(()=>{l.system&&f(),l.webapp&&m()},[l.system,l.webapp]),A.useEffect(()=>{if(!l.webapp)return;const C=async()=>{try{const N=await(await fetch("/api/system/git-info")).json();r(H=>H?JSON.stringify(H.gitInfo)===JSON.stringify(N)?H:{...H,gitInfo:N}:null)}catch(O){console.error("Failed to fetch git info:",O)}};C();const P=setInterval(C,5*60*1e3);return()=>clearInterval(P)},[l.webapp]);const f=async()=>{try{a(te=>({...te,systemInfo:!0}));const C=navigator.userAgent,P=C.includes("Firefox")?"Firefox":C.includes("Chrome")?"Chrome":C.includes("Safari")?"Safari":C.includes("Edge")?"Edge":"Unknown",O=C.match(/(Firefox|Chrome|Safari|Edge)\/([0-9.]+)/)?.[2]||"Unknown",N=performance.memory||{},H=performance.timing,Q=performance.navigation,X=navigator.connection;let J;try{const te=await navigator.getBattery();J={charging:te.charging,chargingTime:te.chargingTime,dischargingTime:te.dischargingTime,level:te.level*100}}catch{console.log("Battery API not supported")}let j={quota:0,usage:0,persistent:!1,temporary:!1};try{const te=await navigator.storage.estimate(),ee=await navigator.storage.persist();j={quota:te.quota||0,usage:te.usage||0,persistent:ee,temporary:!ee}}catch{console.log("Storage API not supported")}const F=performance.memory||{},Y=F.jsHeapSizeLimit||0,M=F.usedJSHeapSize||0,D=Y-M,V=Y?M/Y*100:0,W={os:navigator.platform,arch:navigator.userAgent.includes("x64")?"x64":navigator.userAgent.includes("arm")?"arm":"unknown",platform:navigator.platform,cpus:navigator.hardwareConcurrency+" cores",memory:{total:g(Y),free:g(D),used:g(M),percentage:Math.round(V)},node:"browser",browser:{name:P,version:O,language:navigator.language,userAgent:navigator.userAgent,cookiesEnabled:navigator.cookieEnabled,online:navigator.onLine,platform:navigator.platform,cores:navigator.hardwareConcurrency},screen:{width:window.screen.width,height:window.screen.height,colorDepth:window.screen.colorDepth,pixelRatio:window.devicePixelRatio},time:{timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,offset:new Date().getTimezoneOffset(),locale:navigator.language},performance:{memory:{jsHeapSizeLimit:N.jsHeapSizeLimit||0,totalJSHeapSize:N.totalJSHeapSize||0,usedJSHeapSize:N.usedJSHeapSize||0,usagePercentage:N.totalJSHeapSize?N.usedJSHeapSize/N.totalJSHeapSize*100:0},timing:{loadTime:H.loadEventEnd-H.navigationStart,domReadyTime:H.domContentLoadedEventEnd-H.navigationStart,readyStart:H.fetchStart-H.navigationStart,redirectTime:H.redirectEnd-H.redirectStart,appcacheTime:H.domainLookupStart-H.fetchStart,unloadEventTime:H.unloadEventEnd-H.unloadEventStart,lookupDomainTime:H.domainLookupEnd-H.domainLookupStart,connectTime:H.connectEnd-H.connectStart,requestTime:H.responseEnd-H.requestStart,initDomTreeTime:H.domInteractive-H.responseEnd,loadEventTime:H.loadEventEnd-H.loadEventStart},navigation:{type:Q.type,redirectCount:Q.redirectCount}},network:{downlink:X?.downlink||0,effectiveType:X?.effectiveType||"unknown",rtt:X?.rtt||0,saveData:X?.saveData||!1,type:X?.type||"unknown"},battery:J,storage:j};e(W),He.success("System information updated")}catch(C){He.error("Failed to get system information"),console.error("Failed to get system information:",C)}finally{a(C=>({...C,systemInfo:!1}))}},m=async()=>{try{a(H=>({...H,webAppInfo:!0}));const[C,P]=await Promise.all([fetch("/api/system/app-info"),fetch("/api/system/git-info")]);if(!C.ok||!P.ok)throw new Error("Failed to fetch webapp info");const O=await C.json(),N=await P.json();return console.log("Git Info Response:",N),r({...O,gitInfo:N}),He.success("WebApp information updated"),!0}catch(C){return console.error("Failed to fetch webapp info:",C),He.error("Failed to fetch webapp information"),r(null),!1}finally{a(C=>({...C,webAppInfo:!1}))}},g=C=>{const P=["B","KB","MB","GB"];let O=C,N=0;for(;O>=1024&&N<P.length-1;)O/=1024,N++;return`${Math.round(O)} ${P[N]}`},b=()=>{try{a(J=>({...J,performance:!0}));const C=performance.getEntriesByType("navigation")[0],P=performance.memory,O={loadTime:C.loadEventEnd-C.startTime,domReadyTime:C.domContentLoadedEventEnd-C.startTime,fetchTime:C.responseEnd-C.fetchStart,redirectTime:C.redirectEnd-C.redirectStart,dnsTime:C.domainLookupEnd-C.domainLookupStart,tcpTime:C.connectEnd-C.connectStart,ttfb:C.responseStart-C.requestStart,processingTime:C.loadEventEnd-C.responseEnd},N=performance.getEntriesByType("resource"),H={totalResources:N.length,totalSize:N.reduce((J,j)=>J+(j.transferSize||0),0),totalTime:Math.max(...N.map(J=>J.duration))},Q=P?{jsHeapSizeLimit:P.jsHeapSizeLimit,totalJSHeapSize:P.totalJSHeapSize,usedJSHeapSize:P.usedJSHeapSize,heapUtilization:P.usedJSHeapSize/P.totalJSHeapSize*100}:null;let X=0;if("requestAnimationFrame"in window){let J=function(F){if(j.push(F),j.length>10){const Y=Math.round(1e4/(F-j[0]));return j.shift(),Y}return requestAnimationFrame(J),0};const j=[];X=J(performance.now())}Ut.logSystem("Performance Metrics",{timing:O,resources:H,memory:Q,fps:X,timestamp:new Date().toISOString(),navigationEntry:{type:C.type,redirectCount:C.redirectCount}}),He.success("Performance metrics logged")}catch(C){He.error("Failed to log performance metrics"),console.error("Failed to log performance metrics:",C)}finally{a(C=>({...C,performance:!1}))}},y=async()=>{try{a(P=>({...P,errors:!0}));const C=d;C.length===0?He.success("No errors found"):He.warning(`Found ${C.length} error(s)`)}catch(C){He.error("Failed to check errors"),console.error("Failed to check errors:",C)}finally{a(C=>({...C,errors:!1}))}},E=[{id:"json",label:"Export as JSON",icon:"i-ph:file-json",handler:()=>{try{const C={timestamp:new Date().toISOString(),system:t,webApp:n,errors:Ut.getLogs().filter(H=>H.level==="error"),performance:{memory:performance.memory||{},timing:performance.timing,navigation:performance.navigation}},P=new Blob([JSON.stringify(C,null,2)],{type:"application/json"}),O=window.URL.createObjectURL(P),N=document.createElement("a");N.href=O,N.download=`bolt-debug-info-${new Date().toISOString()}.json`,document.body.appendChild(N),N.click(),window.URL.revokeObjectURL(O),document.body.removeChild(N),He.success("Debug information exported successfully")}catch(C){console.error("Failed to export debug info:",C),He.error("Failed to export debug information")}}},{id:"csv",label:"Export as CSV",icon:"i-ph:file-csv",handler:()=>{try{const C={system:t,webApp:n,errors:Ut.getLogs().filter(X=>X.level==="error"),performance:{memory:performance.memory||{},timing:performance.timing,navigation:performance.navigation}},O=[["Category","Key","Value"],...Object.entries(C).flatMap(([X,J])=>Object.entries(J||{}).map(([j,F])=>[X,j,typeof F=="object"?JSON.stringify(F):String(F)]))].map(X=>X.join(",")).join(`
`),N=new Blob([O],{type:"text/csv;charset=utf-8;"}),H=window.URL.createObjectURL(N),Q=document.createElement("a");Q.href=H,Q.download=`bolt-debug-info-${new Date().toISOString()}.csv`,document.body.appendChild(Q),Q.click(),window.URL.revokeObjectURL(H),document.body.removeChild(Q),He.success("Debug information exported as CSV")}catch(C){console.error("Failed to export CSV:",C),He.error("Failed to export debug information as CSV")}}},{id:"pdf",label:"Export as PDF",icon:"i-ph:file-pdf",handler:()=>{try{const C={system:t,webApp:n,errors:Ut.getLogs().filter(D=>D.level==="error"),performance:{memory:performance.memory||{},timing:performance.timing,navigation:performance.navigation}},P=new zt,O=7;let N=20;const H=20,Q=P.internal.pageSize.getWidth(),X=Q-2*H,J=(D,V,W=0)=>{N>P.internal.pageSize.getHeight()-20&&(P.addPage(),N=H),P.setFontSize(10),P.setTextColor("#374151"),P.setFont("helvetica","bold");const te=D.replace(/([A-Z])/g," $1").trim();P.text(te+":",H+W,N),P.setFont("helvetica","normal"),P.setTextColor("#6B7280");let ee;if(typeof V=="object"&&V!==null){if(Object.keys(V).length===0)return;N+=O,Object.entries(V).forEach(([Se,Ce])=>{N>P.internal.pageSize.getHeight()-20&&(P.addPage(),N=H);const ke=Se.replace(/([A-Z])/g," $1").trim();J(ke,Ce,W+10)});return}else ee=String(V);const K=H+W+P.getTextWidth(te+": "),he=X-W-P.getTextWidth(te+": "),be=P.splitTextToSize(ee,he);N+be.length*O>P.internal.pageSize.getHeight()-20&&(P.addPage(),N=H),P.text(be,K,N),N+=be.length*O},j=D=>{N+20>P.internal.pageSize.getHeight()-20&&(P.addPage(),N=H),N+=O,P.setFillColor("#F3F4F6"),P.rect(H-2,N-5,Q-2*(H-2),O+6,"F"),P.setFont("helvetica","bold"),P.setTextColor("#111827"),P.setFontSize(12),P.text(D.toUpperCase(),H,N),P.setFont("helvetica","normal"),N+=O*1.5},F=()=>{if(N+10>P.internal.pageSize.getHeight()-20){P.addPage(),N=H;return}P.setDrawColor("#E5E5E5"),P.line(H,N,Q-H,N),N+=O},Y=()=>{const D=P.internal.pages.length-1;for(let V=1;V<=D;V++)P.setPage(V),P.setFontSize(8),P.setTextColor("#9CA3AF"),P.text(`Page ${V} of ${D}`,Q/2,P.internal.pageSize.getHeight()-10,{align:"center"})};P.setFillColor("#6366F1"),P.rect(0,0,Q,40,"F"),P.setTextColor("#FFFFFF"),P.setFontSize(24),P.setFont("helvetica","bold"),P.text("Debug Information Report",H,25),N=50,P.setTextColor("#6B7280"),P.setFontSize(10),P.setFont("helvetica","normal");const M=new Date().toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"});if(P.text(`Generated: ${M}`,H,N),N+=O*2,C.system){j("System Information"),J("Operating System",C.system.os),J("Architecture",C.system.arch),J("Platform",C.system.platform),J("CPU Cores",C.system.cpus);const D=C.system.memory;J("Memory",{"Total Memory":D.total,"Used Memory":D.used,"Free Memory":D.free,Usage:D.percentage+"%"});const V=C.system.browser;J("Browser",{Name:V.name,Version:V.version,Language:V.language,Platform:V.platform,"Cookies Enabled":V.cookiesEnabled?"Yes":"No","Online Status":V.online?"Online":"Offline"});const W=C.system.screen;J("Screen",{Resolution:`${W.width}x${W.height}`,"Color Depth":W.colorDepth+" bit","Pixel Ratio":W.pixelRatio+"x"});const te=C.system.time;J("Time Settings",{Timezone:te.timezone,"UTC Offset":te.offset/60+" hours",Locale:te.locale}),F()}if(C.webApp){if(j("Web App Information"),J("Application",{Name:C.webApp.name,Version:C.webApp.version,Environment:C.webApp.environment,"Node Version":C.webApp.runtimeInfo.nodeVersion}),C.webApp.gitInfo){const D=C.webApp.gitInfo.local;if(J("Git Information",{Branch:D.branch,Commit:D.commitHash,Author:D.author,"Commit Time":D.commitTime,Repository:D.repoName}),C.webApp.gitInfo.github){const V=C.webApp.gitInfo.github.currentRepo;J("GitHub Information",{Repository:V.fullName,"Default Branch":V.defaultBranch,Stars:V.stars,Forks:V.forks,"Open Issues":V.openIssues||0})}}F()}if(C.performance){j("Performance Metrics");const D=C.performance.memory||{},V=D.totalJSHeapSize||0,W=D.usedJSHeapSize||0,te=D.usagePercentage||0;J("Memory Usage",{"Total Heap Size":g(V),"Used Heap Size":g(W),Usage:te.toFixed(1)+"%"});const ee=C.performance.timing||{},K=ee.navigationStart||0,he=ee.loadEventEnd||0,be=ee.domContentLoadedEventEnd||0,Se=ee.responseEnd||0,Ce=ee.requestStart||0,ke=he>K?he-K:0,q=be>K?be-K:0,pe=Se>Ce?Se-Ce:0;if(J("Page Load Metrics",{"Total Load Time":(ke/1e3).toFixed(2)+" seconds","DOM Ready Time":(q/1e3).toFixed(2)+" seconds","Request Time":(pe/1e3).toFixed(2)+" seconds"}),C.system?.network){const ne=C.system.network;J("Network Information",{"Connection Type":ne.type||"Unknown","Effective Type":ne.effectiveType||"Unknown","Download Speed":(ne.downlink||0)+" Mbps","Latency (RTT)":(ne.rtt||0)+" ms","Data Saver":ne.saveData?"Enabled":"Disabled"})}F()}C.errors&&C.errors.length>0&&(j("Error Log"),C.errors.forEach((D,V)=>{P.setTextColor("#DC2626"),P.setFontSize(10),P.setFont("helvetica","bold"),P.text(`Error ${V+1}:`,H,N),N+=O,P.setFont("helvetica","normal"),P.setTextColor("#6B7280"),J("Message",D.message,10),D.stack&&J("Stack",D.stack,10),D.source&&J("Source",D.source,10),N+=O})),Y(),P.save(`bolt-debug-info-${new Date().toISOString()}.pdf`),He.success("Debug information exported as PDF")}catch(C){console.error("Failed to export PDF:",C),He.error("Failed to export debug information as PDF")}}},{id:"txt",label:"Export as Text",icon:"i-ph:file-text",handler:()=>{try{const C={system:t,webApp:n,errors:Ut.getLogs().filter(Q=>Q.level==="error"),performance:{memory:performance.memory||{},timing:performance.timing,navigation:performance.navigation}},P=Object.entries(C).map(([Q,X])=>`${Q.toUpperCase()}
${"-".repeat(30)}
${JSON.stringify(X,null,2)}

`).join(`
`),O=new Blob([P],{type:"text/plain"}),N=window.URL.createObjectURL(O),H=document.createElement("a");H.href=N,H.download=`bolt-debug-info-${new Date().toISOString()}.txt`,document.body.appendChild(H),H.click(),window.URL.revokeObjectURL(N),document.body.removeChild(H),He.success("Debug information exported as text file")}catch(C){console.error("Failed to export text file:",C),He.error("Failed to export debug information as text file")}}}],k=A.useCallback(async()=>{try{const P=u?.Ollama?.settings?.baseUrl||"http://127.0.0.1:11434";if(!(await fetch(`${P}/api/version`)).ok)throw new Error("Service not running");const H=await(await fetch(`${P}/api/tags`)).json();s({isRunning:!0,lastChecked:new Date,models:H.models})}catch{s({isRunning:!1,error:"Connection failed",lastChecked:new Date,models:void 0})}},[u]);A.useEffect(()=>{if(u?.Ollama?.settings?.enabled){k();const P=setInterval(k,1e4);return()=>clearInterval(P)}},[u,k]);const _=()=>{const[C,P]=A.useState(!1),O=A.useCallback(H=>{P(H)},[]),N=A.useCallback(H=>{H(),P(!1)},[]);return p.jsxs(xo,{open:C,onOpenChange:O,children:[p.jsxs("button",{onClick:()=>P(!0),className:Ae("group flex items-center gap-2","rounded-lg px-3 py-1.5","text-sm text-gray-900 dark:text-white","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-500/10 dark:hover:bg-purple-500/20","transition-all duration-200"),children:[p.jsx("span",{className:"i-ph:download text-lg text-gray-500 dark:text-gray-400 group-hover:text-purple-500 transition-colors"}),"Export"]}),p.jsx(df,{showCloseButton:!0,children:p.jsxs("div",{className:"p-6",children:[p.jsxs(Zc,{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:download w-5 h-5"}),"Export Debug Information"]}),p.jsx("div",{className:"mt-4 flex flex-col gap-2",children:E.map(H=>p.jsxs("button",{onClick:()=>N(H.handler),className:Ae("flex items-center gap-3 px-4 py-3 text-sm rounded-lg transition-colors w-full text-left","bg-white dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-50 dark:hover:bg-[#1a1a1a]","hover:border-purple-200 dark:hover:border-purple-900/30","text-bolt-elements-textPrimary"),children:[p.jsx("div",{className:Ae(H.icon,"w-5 h-5")}),p.jsxs("div",{children:[p.jsx("div",{className:"font-medium",children:H.label}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:[H.id==="json"&&"Export as a structured JSON file",H.id==="csv"&&"Export as a CSV spreadsheet",H.id==="pdf"&&"Export as a formatted PDF document",H.id==="txt"&&"Export as a formatted text file"]})]})]},H.id))})]})})]})},R=u?.Ollama?.settings?.enabled?i.isRunning?{status:"Running",color:"text-green-500",bgColor:"bg-green-500",message:`Ollama service is running with ${i.models?.length??0} installed models (Provider: Enabled)`}:{status:"Not Running",color:"text-red-500",bgColor:"bg-red-500",message:i.error||"Ollama service is not running"}:{status:"Disabled",color:"text-red-500",bgColor:"bg-red-500",message:"Ollama provider is disabled in settings"};return p.jsxs("div",{className:"flex flex-col gap-6 max-w-7xl mx-auto p-4",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[p.jsxs("div",{className:"p-4 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] hover:border-purple-500/30 transition-all duration-200 h-[180px] flex flex-col",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:warning-octagon text-purple-500 w-4 h-4"}),p.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Errors"})]}),p.jsx("div",{className:"flex items-center gap-2 mt-2",children:p.jsx("span",{className:Ae("text-2xl font-semibold",d.length>0?"text-red-500":"text-green-500"),children:d.length})}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2 flex items-center gap-1.5",children:[p.jsx("div",{className:Ae("w-3.5 h-3.5",d.length>0?"i-ph:warning text-red-500":"i-ph:check-circle text-green-500")}),d.length>0?"Errors detected":"No errors detected"]})]}),p.jsxs("div",{className:"p-4 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] hover:border-purple-500/30 transition-all duration-200 h-[180px] flex flex-col",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:cpu text-purple-500 w-4 h-4"}),p.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Memory Usage"})]}),p.jsx("div",{className:"flex items-center gap-2 mt-2",children:p.jsxs("span",{className:Ae("text-2xl font-semibold",(t?.memory?.percentage??0)>80?"text-red-500":(t?.memory?.percentage??0)>60?"text-yellow-500":"text-green-500"),children:[t?.memory?.percentage??0,"%"]})}),p.jsx(xk,{value:t?.memory?.percentage??0,className:Ae("mt-2",(t?.memory?.percentage??0)>80?"[&>div]:bg-red-500":(t?.memory?.percentage??0)>60?"[&>div]:bg-yellow-500":"[&>div]:bg-green-500")}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2 flex items-center gap-1.5",children:[p.jsx("div",{className:"i-ph:info w-3.5 h-3.5 text-purple-500"}),"Used: ",t?.memory.used??"0 GB"," / ",t?.memory.total??"0 GB"]})]}),p.jsxs("div",{className:"p-4 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] hover:border-purple-500/30 transition-all duration-200 h-[180px] flex flex-col",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:timer text-purple-500 w-4 h-4"}),p.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Page Load Time"})]}),p.jsx("div",{className:"flex items-center gap-2 mt-2",children:p.jsxs("span",{className:Ae("text-2xl font-semibold",(t?.performance.timing.loadTime??0)>2e3?"text-red-500":(t?.performance.timing.loadTime??0)>1e3?"text-yellow-500":"text-green-500"),children:[t?(t.performance.timing.loadTime/1e3).toFixed(2):"-","s"]})}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2 flex items-center gap-1.5",children:[p.jsx("div",{className:"i-ph:code w-3.5 h-3.5 text-purple-500"}),"DOM Ready: ",t?(t.performance.timing.domReadyTime/1e3).toFixed(2):"-","s"]})]}),p.jsxs("div",{className:"p-4 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] hover:border-purple-500/30 transition-all duration-200 h-[180px] flex flex-col",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:wifi-high text-purple-500 w-4 h-4"}),p.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Network Speed"})]}),p.jsx("div",{className:"flex items-center gap-2 mt-2",children:p.jsxs("span",{className:Ae("text-2xl font-semibold",(t?.network.downlink??0)<5?"text-red-500":(t?.network.downlink??0)<10?"text-yellow-500":"text-green-500"),children:[t?.network.downlink??"-"," Mbps"]})}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2 flex items-center gap-1.5",children:[p.jsx("div",{className:"i-ph:activity w-3.5 h-3.5 text-purple-500"}),"RTT: ",t?.network.rtt??"-"," ms"]})]}),p.jsxs("div",{className:"md:col-span-4 p-6 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] hover:border-purple-500/30 transition-all duration-200 h-[260px] flex flex-col",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"i-ph:robot text-purple-500 w-5 h-5"}),p.jsxs("div",{children:[p.jsx("div",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"Ollama Service"}),p.jsx("div",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:R.message})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("div",{className:"flex items-center gap-2 px-2.5 py-1 rounded-full bg-bolt-elements-background-depth-3",children:[p.jsx("div",{className:Ae("w-2 h-2 rounded-full animate-pulse",R.bgColor,{"shadow-lg shadow-green-500/20":R.status==="Running","shadow-lg shadow-red-500/20":R.status==="Not Running"})}),p.jsx("span",{className:Ae("text-xs font-medium flex items-center gap-1",R.color),children:R.status})]}),p.jsxs("div",{className:"text-[10px] text-bolt-elements-textTertiary flex items-center gap-1.5",children:[p.jsx("div",{className:"i-ph:clock w-3 h-3"}),i.lastChecked.toLocaleTimeString()]})]})]}),p.jsx("div",{className:"mt-6 flex-1 min-h-0 flex flex-col",children:R.status==="Running"&&i.models&&i.models.length>0?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"text-xs font-medium text-bolt-elements-textSecondary flex items-center justify-between mb-3",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:cube-duotone w-4 h-4 text-purple-500"}),p.jsx("span",{children:"Installed Models"}),p.jsx(rT,{variant:"secondary",className:"ml-1",children:i.models.length})]})}),p.jsx("div",{className:"overflow-y-auto flex-1 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-700 scrollbar-track-transparent hover:scrollbar-thumb-gray-400 dark:hover:scrollbar-thumb-gray-600",children:p.jsx("div",{className:"grid grid-cols-2 gap-3 pr-2",children:i.models.map(C=>p.jsxs("div",{className:"text-sm bg-bolt-elements-background-depth-3 hover:bg-bolt-elements-background-depth-4 rounded-lg px-4 py-3 flex items-center justify-between transition-colors group",children:[p.jsxs("div",{className:"flex items-center gap-2 text-bolt-elements-textSecondary",children:[p.jsx("div",{className:"i-ph:cube w-4 h-4 text-purple-500/70 group-hover:text-purple-500 transition-colors"}),p.jsx("span",{className:"font-mono truncate",children:C.name})]}),p.jsxs(rT,{variant:"outline",className:"ml-2 text-xs font-mono",children:[Math.round(parseInt(C.size)/1024/1024),"MB"]})]},C.name))})})]}):p.jsx("div",{className:"flex-1 flex items-center justify-center",children:p.jsxs("div",{className:"flex flex-col items-center gap-3 max-w-[280px] text-center",children:[p.jsx("div",{className:Ae("w-12 h-12",{"i-ph:warning-circle text-red-500/80":R.status==="Not Running"||R.status==="Disabled","i-ph:cube-duotone text-purple-500/80":R.status==="Running"})}),p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:R.message})]})})})]})]}),p.jsxs("div",{className:"flex flex-wrap gap-4",children:[p.jsxs("button",{onClick:f,disabled:o.systemInfo,className:Ae("flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors","bg-white dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-50 dark:hover:bg-[#1a1a1a]","hover:border-purple-200 dark:hover:border-purple-900/30","text-bolt-elements-textPrimary",{"opacity-50 cursor-not-allowed":o.systemInfo}),children:[o.systemInfo?p.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}):p.jsx("div",{className:"i-ph:gear w-4 h-4"}),"Update System Info"]}),p.jsxs("button",{onClick:b,disabled:o.performance,className:Ae("flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors","bg-white dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-50 dark:hover:bg-[#1a1a1a]","hover:border-purple-200 dark:hover:border-purple-900/30","text-bolt-elements-textPrimary",{"opacity-50 cursor-not-allowed":o.performance}),children:[o.performance?p.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}):p.jsx("div",{className:"i-ph:chart-bar w-4 h-4"}),"Log Performance"]}),p.jsxs("button",{onClick:y,disabled:o.errors,className:Ae("flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors","bg-white dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-50 dark:hover:bg-[#1a1a1a]","hover:border-purple-200 dark:hover:border-purple-900/30","text-bolt-elements-textPrimary",{"opacity-50 cursor-not-allowed":o.errors}),children:[o.errors?p.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}):p.jsx("div",{className:"i-ph:warning w-4 h-4"}),"Check Errors"]}),p.jsxs("button",{onClick:m,disabled:o.webAppInfo,className:Ae("flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors","bg-white dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-50 dark:hover:bg-[#1a1a1a]","hover:border-purple-200 dark:hover:border-purple-900/30","text-bolt-elements-textPrimary",{"opacity-50 cursor-not-allowed":o.webAppInfo}),children:[o.webAppInfo?p.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}):p.jsx("div",{className:"i-ph:info w-4 h-4"}),"Fetch WebApp Info"]}),p.jsx(_,{})]}),p.jsxs(Ab,{open:l.system,onOpenChange:C=>c(P=>({...P,system:C})),className:"w-full",children:[p.jsx(Pb,{className:"w-full",children:p.jsxs("div",{className:"flex items-center justify-between p-6 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"i-ph:cpu text-purple-500 w-5 h-5"}),p.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"System Information"})]}),p.jsx("div",{className:Ae("i-ph:caret-down w-4 h-4 transform transition-transform duration-200",l.system?"rotate-180":"")})]})}),p.jsx(Nb,{children:p.jsx("div",{className:"p-6 mt-2 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:t?p.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:desktop text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"OS: "}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.os})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:device-mobile text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Platform: "}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.platform})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:microchip text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Architecture: "}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.arch})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:cpu text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"CPU Cores: "}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.cpus})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:node text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Node Version: "}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.node})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:wifi-high text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Network Type: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[t.network.type," (",t.network.effectiveType,")"]})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:gauge text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Network Speed: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[t.network.downlink,"Mbps (RTT: ",t.network.rtt,"ms)"]})]}),t.battery&&p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:battery-charging text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Battery: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[t.battery.level.toFixed(1),"% ",t.battery.charging?"(Charging)":""]})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:hard-drive text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Storage: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.storage.usage/(1024*1024*1024)).toFixed(2),"GB /"," ",(t.storage.quota/(1024*1024*1024)).toFixed(2),"GB"]})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:database text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Memory Usage: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[t.memory.used," / ",t.memory.total," (",t.memory.percentage,"%)"]})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:browser text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Browser: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[t.browser.name," ",t.browser.version]})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:monitor text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Screen: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[t.screen.width,"x",t.screen.height," (",t.screen.pixelRatio,"x)"]})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:clock text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Timezone: "}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.time.timezone})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:translate text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Language: "}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.browser.language})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:chart-pie text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"JS Heap: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.memory.usedJSHeapSize/(1024*1024)).toFixed(1),"MB /"," ",(t.performance.memory.totalJSHeapSize/(1024*1024)).toFixed(1),"MB (",t.performance.memory.usagePercentage.toFixed(1),"%)"]})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:timer text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Page Load: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.timing.loadTime/1e3).toFixed(2),"s"]})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:code text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"DOM Ready: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.timing.domReadyTime/1e3).toFixed(2),"s"]})]})]})]}):p.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Loading system information..."})})})]}),p.jsxs(Ab,{open:l.performance,onOpenChange:C=>c(P=>({...P,performance:C})),className:"w-full",children:[p.jsx(Pb,{className:"w-full",children:p.jsxs("div",{className:"flex items-center justify-between p-6 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"i-ph:chart-line text-purple-500 w-5 h-5"}),p.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"Performance Metrics"})]}),p.jsx("div",{className:Ae("i-ph:caret-down w-4 h-4 transform transition-transform duration-200",l.performance?"rotate-180":"")})]})}),p.jsx(Nb,{children:p.jsx("div",{className:"p-6 mt-2 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:t&&p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Page Load Time: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.timing.loadTime/1e3).toFixed(2),"s"]})]}),p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"DOM Ready Time: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.timing.domReadyTime/1e3).toFixed(2),"s"]})]}),p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Request Time: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.timing.requestTime/1e3).toFixed(2),"s"]})]}),p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Redirect Time: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.timing.redirectTime/1e3).toFixed(2),"s"]})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"JS Heap Usage: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.memory.usedJSHeapSize/(1024*1024)).toFixed(1),"MB /"," ",(t.performance.memory.totalJSHeapSize/(1024*1024)).toFixed(1),"MB"]})]}),p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Heap Utilization: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[t.performance.memory.usagePercentage.toFixed(1),"%"]})]}),p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Navigation Type: "}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.performance.navigation.type===0?"Navigate":t.performance.navigation.type===1?"Reload":t.performance.navigation.type===2?"Back/Forward":"Other"})]}),p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Redirects: "}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.performance.navigation.redirectCount})]})]})]})})})]}),p.jsxs(Ab,{open:l.webapp,onOpenChange:C=>c(P=>({...P,webapp:C})),className:"w-full",children:[p.jsx(Pb,{className:"w-full",children:p.jsxs("div",{className:"flex items-center justify-between p-6 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"i-ph:info text-blue-500 w-5 h-5"}),p.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"WebApp Information"}),o.webAppInfo&&p.jsx("span",{className:"loading loading-spinner loading-sm"})]}),p.jsx("div",{className:Ae("i-ph:caret-down w-4 h-4 transform transition-transform duration-200",l.webapp?"rotate-180":"")})]})}),p.jsx(Nb,{children:p.jsxs("div",{className:"p-6 mt-2 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:[o.webAppInfo?p.jsx("div",{className:"flex items-center justify-center p-8",children:p.jsx("span",{className:"loading loading-spinner loading-lg"})}):n?p.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"mb-4 text-base font-medium text-bolt-elements-textPrimary",children:"Basic Information"}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:app-window text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Name:"}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.name})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:tag text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Version:"}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.version})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:certificate text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"License:"}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.license})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:cloud text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Environment:"}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.environment})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:node text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Node Version:"}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.runtimeInfo.nodeVersion})]})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"mb-4 text-base font-medium text-bolt-elements-textPrimary",children:"Git Information"}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:git-branch text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Branch:"}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.gitInfo.local.branch})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:git-commit text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Commit:"}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.gitInfo.local.commitHash})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:user text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Author:"}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.gitInfo.local.author})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:clock text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Commit Time:"}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.gitInfo.local.commitTime})]}),n.gitInfo.github&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-800",children:[p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:git-repository text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Repository:"}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[n.gitInfo.github.currentRepo.fullName,n.gitInfo.isForked&&" (fork)"]})]}),p.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:star text-yellow-500 w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:n.gitInfo.github.currentRepo.stars})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:git-fork text-blue-500 w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:n.gitInfo.github.currentRepo.forks})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:warning-circle text-red-500 w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:n.gitInfo.github.currentRepo.openIssues})]})]})]}),n.gitInfo.github.upstream&&p.jsxs("div",{className:"mt-2",children:[p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:git-fork text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Upstream:"}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.gitInfo.github.upstream.fullName})]}),p.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:star text-yellow-500 w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:n.gitInfo.github.upstream.stars})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:git-fork text-blue-500 w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:n.gitInfo.github.upstream.forks})]})]})]})]})]})]})]}):p.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-bolt-elements-textSecondary",children:[p.jsx("div",{className:"i-ph:warning-circle w-8 h-8 mb-2"}),p.jsx("p",{children:"Failed to load WebApp information"}),p.jsx("button",{onClick:()=>m(),className:"mt-4 px-4 py-2 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Retry"})]}),n&&p.jsxs("div",{className:"mt-6",children:[p.jsx("h3",{className:"mb-4 text-base font-medium text-bolt-elements-textPrimary",children:"Dependencies"}),p.jsxs("div",{className:"bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] rounded-lg divide-y divide-[#E5E5E5] dark:divide-[#1A1A1A]",children:[p.jsx(R_,{title:"Production",deps:n.dependencies.production}),p.jsx(R_,{title:"Development",deps:n.dependencies.development}),p.jsx(R_,{title:"Peer",deps:n.dependencies.peer}),p.jsx(R_,{title:"Optional",deps:n.dependencies.optional})]})]})]})})]}),p.jsxs(Ab,{open:l.errors,onOpenChange:C=>c(P=>({...P,errors:C})),className:"w-full",children:[p.jsx(Pb,{className:"w-full",children:p.jsxs("div",{className:"flex items-center justify-between p-6 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"i-ph:warning text-red-500 w-5 h-5"}),p.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"Error Check"}),d.length>0&&p.jsxs(rT,{variant:"destructive",className:"ml-2",children:[d.length," Errors"]})]}),p.jsx("div",{className:Ae("i-ph:caret-down w-4 h-4 transform transition-transform duration-200",l.errors?"rotate-180":"")})]})}),p.jsx(Nb,{children:p.jsx("div",{className:"p-6 mt-2 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:p.jsx(fI,{className:"h-[300px]",children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"text-sm text-bolt-elements-textSecondary",children:["Checks for:",p.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[p.jsx("li",{children:"Unhandled JavaScript errors"}),p.jsx("li",{children:"Unhandled Promise rejections"}),p.jsx("li",{children:"Runtime exceptions"}),p.jsx("li",{children:"Network errors"})]})]}),p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Status: "}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:o.errors?"Checking...":d.length>0?`${d.length} errors found`:"No errors found"})]}),d.length>0&&p.jsxs("div",{className:"mt-4",children:[p.jsx("div",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-2",children:"Recent Errors:"}),p.jsx("div",{className:"space-y-2",children:d.map(C=>p.jsxs("div",{className:"text-sm text-red-500 dark:text-red-400 p-2 rounded bg-red-500/5",children:[p.jsx("div",{className:"font-medium",children:C.message}),C.source&&p.jsxs("div",{className:"text-xs mt-1 text-red-400",children:["Source: ",C.source,C.details?.lineNumber&&`:${C.details.lineNumber}`]}),C.stack&&p.jsx("div",{className:"text-xs mt-1 text-red-400 font-mono whitespace-pre-wrap",children:C.stack})]},C.id))})]})]})})})})]})]})}const Kj=[{value:"all",label:"All Types",icon:"i-ph:funnel",color:"#9333ea"},{value:"provider",label:"LLM",icon:"i-ph:robot",color:"#10b981"},{value:"api",label:"API",icon:"i-ph:cloud",color:"#3b82f6"},{value:"error",label:"Errors",icon:"i-ph:warning-circle",color:"#ef4444"},{value:"warning",label:"Warnings",icon:"i-ph:warning",color:"#f59e0b"},{value:"info",label:"Info",icon:"i-ph:info",color:"#3b82f6"},{value:"debug",label:"Debug",icon:"i-ph:bug",color:"#6b7280"}],_3e=({log:t,isExpanded:e,use24Hour:n,showTimestamp:r})=>{const[i,s]=A.useState(e);A.useEffect(()=>{s(e)},[e]);const o=A.useMemo(()=>new Date(t.timestamp).toLocaleTimeString("en-US",{hour12:!n}),[t.timestamp,n]),a=A.useMemo(()=>{if(t.category==="provider")return{icon:"i-ph:robot",color:"text-emerald-500 dark:text-emerald-400",bg:"hover:bg-emerald-500/10 dark:hover:bg-emerald-500/20",badge:"text-emerald-500 bg-emerald-50 dark:bg-emerald-500/10"};if(t.category==="api")return{icon:"i-ph:cloud",color:"text-blue-500 dark:text-blue-400",bg:"hover:bg-blue-500/10 dark:hover:bg-blue-500/20",badge:"text-blue-500 bg-blue-50 dark:bg-blue-500/10"};switch(t.level){case"error":return{icon:"i-ph:warning-circle",color:"text-red-500 dark:text-red-400",bg:"hover:bg-red-500/10 dark:hover:bg-red-500/20",badge:"text-red-500 bg-red-50 dark:bg-red-500/10"};case"warning":return{icon:"i-ph:warning",color:"text-yellow-500 dark:text-yellow-400",bg:"hover:bg-yellow-500/10 dark:hover:bg-yellow-500/20",badge:"text-yellow-500 bg-yellow-50 dark:bg-yellow-500/10"};case"debug":return{icon:"i-ph:bug",color:"text-gray-500 dark:text-gray-400",bg:"hover:bg-gray-500/10 dark:hover:bg-gray-500/20",badge:"text-gray-500 bg-gray-50 dark:bg-gray-500/10"};default:return{icon:"i-ph:info",color:"text-blue-500 dark:text-blue-400",bg:"hover:bg-blue-500/10 dark:hover:bg-blue-500/20",badge:"text-blue-500 bg-blue-50 dark:bg-blue-500/10"}}},[t.level,t.category]),l=c=>t.category==="provider"?p.jsxs("div",{className:"flex flex-col gap-2",children:[p.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[p.jsxs("span",{children:["Model: ",c.model]}),p.jsx("span",{children:""}),p.jsxs("span",{children:["Tokens: ",c.totalTokens]}),p.jsx("span",{children:""}),p.jsxs("span",{children:["Duration: ",c.duration,"ms"]})]}),c.prompt&&p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Prompt:"}),p.jsx("pre",{className:"text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800/50 rounded p-2 whitespace-pre-wrap",children:c.prompt})]}),c.response&&p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Response:"}),p.jsx("pre",{className:"text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800/50 rounded p-2 whitespace-pre-wrap",children:c.response})]})]}):t.category==="api"?p.jsxs("div",{className:"flex flex-col gap-2",children:[p.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[p.jsx("span",{className:c.method==="GET"?"text-green-500":"text-blue-500",children:c.method}),p.jsx("span",{children:""}),p.jsxs("span",{children:["Status: ",c.statusCode]}),p.jsx("span",{children:""}),p.jsxs("span",{children:["Duration: ",c.duration,"ms"]})]}),p.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 break-all",children:c.url}),c.request&&p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Request:"}),p.jsx("pre",{className:"text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800/50 rounded p-2 whitespace-pre-wrap",children:JSON.stringify(c.request,null,2)})]}),c.response&&p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Response:"}),p.jsx("pre",{className:"text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800/50 rounded p-2 whitespace-pre-wrap",children:JSON.stringify(c.response,null,2)})]}),c.error&&p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("div",{className:"text-xs font-medium text-red-500",children:"Error:"}),p.jsx("pre",{className:"text-xs text-red-400 bg-red-50 dark:bg-red-500/10 rounded p-2 whitespace-pre-wrap",children:JSON.stringify(c.error,null,2)})]})]}):p.jsx("pre",{className:"text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800/50 rounded whitespace-pre-wrap",children:JSON.stringify(c,null,2)});return p.jsx(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:Ae("flex flex-col gap-2","rounded-lg p-4","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]",a.bg,"transition-all duration-200"),children:p.jsxs("div",{className:"flex items-start justify-between gap-4",children:[p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("span",{className:Ae("text-lg",a.icon,a.color)}),p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.message}),t.details&&p.jsxs(p.Fragment,{children:[p.jsxs("button",{onClick:()=>s(!i),className:"text-xs text-gray-500 dark:text-gray-400 hover:text-purple-500 dark:hover:text-purple-400 transition-colors",children:[i?"Hide":"Show"," Details"]}),i&&l(t.details)]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:Ae("px-2 py-0.5 rounded text-xs font-medium uppercase",a.badge),children:t.level}),t.category&&p.jsx("div",{className:"px-2 py-0.5 rounded-full text-xs bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:t.category})]})]})]}),r&&p.jsx("time",{className:"shrink-0 text-xs text-gray-500 dark:text-gray-400",children:o})]})})};function w3e(){const t=Ot(Ut.logs),[e,n]=A.useState("all"),[r,i]=A.useState(""),[s,o]=A.useState(!1),[a,l]=A.useState(!1),[c,u]=A.useState(!0),[h,d]=A.useState(!1),[f,m]=A.useState(!1),g=A.useRef(null),b=A.useMemo(()=>{const C=Object.values(t);return e==="all"?C.filter(P=>r?P.message.toLowerCase().includes(r.toLowerCase()):!0):C.filter(P=>{const O=P.category===e||P.level===e,N=r?P.message.toLowerCase().includes(r.toLowerCase()):!0;return O&&N})},[t,e,r]);A.useEffect(()=>{const C=performance.now();return Ut.logInfo("Event Logs tab mounted",{type:"component_mount",message:"Event Logs tab component mounted",component:"EventLogsTab"}),()=>{const P=performance.now()-C;Ut.logPerformanceMetric("EventLogsTab","mount-duration",P)}},[]);const y=A.useCallback(C=>{Ut.logInfo("Log level filter changed",{type:"filter_change",message:`Log level filter changed from ${e} to ${C}`,component:"EventLogsTab",previousLevel:e,newLevel:C}),n(C),d(!1)},[e]);A.useEffect(()=>{const C=setTimeout(()=>{r&&Ut.logInfo("Log search performed",{type:"search",message:`Search performed with query "${r}" (${b.length} results)`,component:"EventLogsTab",query:r,resultsCount:b.length})},1e3);return()=>clearTimeout(C)},[r,b.length]);const v=A.useCallback(async()=>{const C=performance.now();m(!0);try{await Ut.refreshLogs();const P=performance.now()-C;Ut.logSuccess("Logs refreshed successfully",{type:"refresh",message:`Successfully refreshed ${Object.keys(t).length} logs`,component:"EventLogsTab",duration:P,logsCount:Object.keys(t).length})}catch(P){Ut.logError("Failed to refresh logs",P,{type:"refresh_error",message:"Failed to refresh logs",component:"EventLogsTab"})}finally{setTimeout(()=>m(!1),500)}},[t]),x=A.useCallback((C,P)=>{switch(Ut.logInfo("Log preference changed",{type:"preference_change",message:`Log preference "${C}" changed to ${P}`,component:"EventLogsTab",preference:C,value:P}),C){case"timestamps":u(P);break;case"24hour":o(P);break;case"autoExpand":l(P);break}},[]);A.useEffect(()=>{const C=P=>{g.current&&!g.current.contains(P.target)&&d(!1)};return document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[]);const w=Kj.find(C=>C.value===e),L=[{id:"json",label:"Export as JSON",icon:"i-ph:file-json",handler:()=>{try{const C={timestamp:new Date().toISOString(),logs:b,filters:{level:e,searchQuery:r},preferences:{use24Hour:s,showTimestamps:c,autoExpand:a}},P=new Blob([JSON.stringify(C,null,2)],{type:"application/json"}),O=window.URL.createObjectURL(P),N=document.createElement("a");N.href=O,N.download=`bolt-event-logs-${new Date().toISOString()}.json`,document.body.appendChild(N),N.click(),window.URL.revokeObjectURL(O),document.body.removeChild(N),He.success("Event logs exported successfully as JSON")}catch(C){console.error("Failed to export JSON:",C),He.error("Failed to export event logs as JSON")}}},{id:"csv",label:"Export as CSV",icon:"i-ph:file-csv",handler:()=>{try{const O=[["Timestamp","Level","Category","Message","Details"],...b.map(X=>[new Date(X.timestamp).toISOString(),X.level,X.category||"",X.message,X.details?JSON.stringify(X.details):""])].map(X=>X.map(J=>`"${String(J).replace(/"/g,'""')}"`).join(",")).join(`
`),N=new Blob([O],{type:"text/csv;charset=utf-8;"}),H=window.URL.createObjectURL(N),Q=document.createElement("a");Q.href=H,Q.download=`bolt-event-logs-${new Date().toISOString()}.csv`,document.body.appendChild(Q),Q.click(),window.URL.revokeObjectURL(H),document.body.removeChild(Q),He.success("Event logs exported successfully as CSV")}catch(C){console.error("Failed to export CSV:",C),He.error("Failed to export event logs as CSV")}}},{id:"pdf",label:"Export as PDF",icon:"i-ph:file-pdf",handler:()=>{try{const C=new zt,P=7;let O=20;const N=20,H=C.internal.pageSize.getWidth(),Q=H-2*N,X=W=>{O>C.internal.pageSize.getHeight()-30&&(C.addPage(),O=N),C.setFillColor("#F3F4F6"),C.rect(N-2,O-5,H-2*(N-2),P+6,"F"),C.setFont("helvetica","bold"),C.setTextColor("#111827"),C.setFontSize(12),C.text(W.toUpperCase(),N,O),O+=P*2};C.setFillColor("#6366F1"),C.rect(0,0,H,50,"F"),C.setTextColor("#FFFFFF"),C.setFontSize(24),C.setFont("helvetica","bold"),C.text("Event Logs Report",N,35),C.setFontSize(12),C.setFont("helvetica","normal"),C.text("bolt.diy - AI Development Platform",N,45),O=70,X("Report Summary"),C.setFontSize(10),C.setFont("helvetica","normal"),C.setTextColor("#374151"),[{label:"Generated",value:new Date().toLocaleString()},{label:"Total Logs",value:b.length.toString()},{label:"Filter Applied",value:e==="all"?"All Types":e},{label:"Search Query",value:r||"None"},{label:"Time Format",value:s?"24-hour":"12-hour"}].forEach(W=>{C.setFont("helvetica","bold"),C.text(`${W.label}:`,N,O),C.setFont("helvetica","normal"),C.text(W.value,N+60,O),O+=P}),O+=P*2,X("Log Statistics");const j={error:b.filter(W=>W.level==="error").length,warning:b.filter(W=>W.level==="warning").length,info:b.filter(W=>W.level==="info").length,debug:b.filter(W=>W.level==="debug").length,provider:b.filter(W=>W.category==="provider").length,api:b.filter(W=>W.category==="api").length},F=[{label:"Error Logs",value:j.error,color:"#DC2626"},{label:"Warning Logs",value:j.warning,color:"#F59E0B"},{label:"Info Logs",value:j.info,color:"#3B82F6"}],Y=[{label:"Debug Logs",value:j.debug,color:"#6B7280"},{label:"LLM Logs",value:j.provider,color:"#10B981"},{label:"API Logs",value:j.api,color:"#3B82F6"}],M=(H-2*N)/2;F.forEach((W,te)=>{C.setTextColor(W.color),C.setFont("helvetica","bold"),C.text(W.value.toString(),N,O),C.setTextColor("#374151"),C.setFont("helvetica","normal"),C.text(W.label,N+20,O),Y[te]&&(C.setTextColor(Y[te].color),C.setFont("helvetica","bold"),C.text(Y[te].value.toString(),N+M,O),C.setTextColor("#374151"),C.setFont("helvetica","normal"),C.text(Y[te].label,N+M+20,O)),O+=P}),O+=P*2,X("Event Logs");const D=W=>{const te=20+(W.details?40:0);O+te>C.internal.pageSize.getHeight()-20&&(C.addPage(),O=N);const ee=new Date(W.timestamp).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!s}),K={error:"#FEE2E2",warning:"#FEF3C7",info:"#DBEAFE",debug:"#F3F4F6"},he={error:"#DC2626",warning:"#F59E0B",info:"#3B82F6",debug:"#6B7280"},be=C.getTextWidth(W.level.toUpperCase())+10;if(C.setFillColor(K[W.level]||"#F3F4F6"),C.roundedRect(N,O-4,be,P+4,1,1,"F"),C.setTextColor(he[W.level]||"#6B7280"),C.setFont("helvetica","bold"),C.setFontSize(8),C.text(W.level.toUpperCase(),N+5,O),C.setTextColor("#6B7280"),C.setFont("helvetica","normal"),C.setFontSize(9),C.text(ee,N+be+10,O),W.category){const Ce=N+be+C.getTextWidth(ee)+20;C.setFillColor("#F3F4F6");const ke=C.getTextWidth(W.category)+10;C.roundedRect(Ce,O-4,ke,P+4,2,2,"F"),C.setTextColor("#6B7280"),C.text(W.category,Ce+5,O)}O+=P*1.5,C.setTextColor("#111827"),C.setFontSize(10);const Se=C.splitTextToSize(W.message,Q-10);if(C.text(Se,N+5,O),O+=Se.length*P,W.details){C.setTextColor("#6B7280"),C.setFontSize(8);const Ce=JSON.stringify(W.details,null,2),ke=C.splitTextToSize(Ce,Q-15);C.setFillColor("#F9FAFB"),C.roundedRect(N+5,O-2,Q-10,ke.length*P+8,1,1,"F"),C.text(ke,N+10,O+4),O+=ke.length*P+10}C.setDrawColor("#E5E7EB"),C.setLineWidth(.1),C.line(N,O,H-N,O),O+=P*1.5};b.forEach(W=>{D(W)});const V=C.internal.pages.length-1;for(let W=1;W<=V;W++){C.setPage(W),C.setFontSize(8),C.setTextColor("#9CA3AF"),C.text(`Page ${W} of ${V}`,H/2,C.internal.pageSize.getHeight()-10,{align:"center"}),C.text("Generated by bolt.diy",N,C.internal.pageSize.getHeight()-10);const te=new Date().toLocaleDateString();C.text(te,H-N,C.internal.pageSize.getHeight()-10,{align:"right"})}C.save(`bolt-event-logs-${new Date().toISOString()}.pdf`),He.success("Event logs exported successfully as PDF")}catch(C){console.error("Failed to export PDF:",C),He.error("Failed to export event logs as PDF")}}},{id:"txt",label:"Export as Text",icon:"i-ph:file-text",handler:()=>{try{const C=b.map(H=>{let X=`[${new Date(H.timestamp).toLocaleString()}] ${H.level.toUpperCase()}: ${H.message}
`;return H.category&&(X+=`Category: ${H.category}
`),H.details&&(X+=`Details:
${JSON.stringify(H.details,null,2)}
`),X+"-".repeat(80)+`
`}).join(`
`),P=new Blob([C],{type:"text/plain"}),O=window.URL.createObjectURL(P),N=document.createElement("a");N.href=O,N.download=`bolt-event-logs-${new Date().toISOString()}.txt`,document.body.appendChild(N),N.click(),window.URL.revokeObjectURL(O),document.body.removeChild(N),He.success("Event logs exported successfully as text file")}catch(C){console.error("Failed to export text file:",C),He.error("Failed to export event logs as text file")}}}],R=()=>{const[C,P]=A.useState(!1),O=A.useCallback(H=>{P(H)},[]),N=A.useCallback(H=>{H(),P(!1)},[]);return p.jsxs(xo,{open:C,onOpenChange:O,children:[p.jsxs("button",{onClick:()=>P(!0),className:Ae("group flex items-center gap-2","rounded-lg px-3 py-1.5","text-sm text-gray-900 dark:text-white","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-500/10 dark:hover:bg-purple-500/20","transition-all duration-200"),children:[p.jsx("span",{className:"i-ph:download text-lg text-gray-500 dark:text-gray-400 group-hover:text-purple-500 transition-colors"}),"Export"]}),p.jsx(df,{showCloseButton:!0,children:p.jsxs("div",{className:"p-6",children:[p.jsxs(Zc,{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:download w-5 h-5"}),"Export Event Logs"]}),p.jsx("div",{className:"mt-4 flex flex-col gap-2",children:L.map(H=>p.jsxs("button",{onClick:()=>N(H.handler),className:Ae("flex items-center gap-3 px-4 py-3 text-sm rounded-lg transition-colors w-full text-left","bg-white dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-50 dark:hover:bg-[#1a1a1a]","hover:border-purple-200 dark:hover:border-purple-900/30","text-bolt-elements-textPrimary"),children:[p.jsx("div",{className:Ae(H.icon,"w-5 h-5")}),p.jsxs("div",{children:[p.jsx("div",{className:"font-medium",children:H.label}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:[H.id==="json"&&"Export as a structured JSON file",H.id==="csv"&&"Export as a CSV spreadsheet",H.id==="pdf"&&"Export as a formatted PDF document",H.id==="txt"&&"Export as a formatted text file"]})]})]},H.id))})]})})]})};return p.jsxs("div",{className:"flex h-full flex-col gap-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(sk,{open:h,onOpenChange:d,children:[p.jsx(ok,{asChild:!0,children:p.jsxs("button",{className:Ae("flex items-center gap-2","rounded-lg px-3 py-1.5","text-sm text-gray-900 dark:text-white","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-500/10 dark:hover:bg-purple-500/20","transition-all duration-200"),children:[p.jsx("span",{className:Ae("text-lg",w?.icon||"i-ph:funnel"),style:{color:w?.color}}),w?.label||"All Types",p.jsx("span",{className:"i-ph:caret-down text-lg text-gray-500 dark:text-gray-400"})]})}),p.jsx(ak,{children:p.jsx(lk,{className:"min-w-[200px] bg-white dark:bg-[#0A0A0A] rounded-lg shadow-lg py-1 z-[250] animate-in fade-in-0 zoom-in-95 border border-[#E5E5E5] dark:border-[#1A1A1A]",sideOffset:5,align:"start",side:"bottom",children:Kj.map(C=>p.jsxs(im,{className:"group flex items-center px-4 py-2.5 text-sm text-gray-700 dark:text-gray-200 hover:bg-purple-500/10 dark:hover:bg-purple-500/20 cursor-pointer transition-colors",onClick:()=>y(C.value),children:[p.jsx("div",{className:"mr-3 flex h-5 w-5 items-center justify-center",children:p.jsx("div",{className:Ae(C.icon,"text-lg group-hover:text-purple-500 transition-colors"),style:{color:C.color}})}),p.jsx("span",{className:"group-hover:text-purple-500 transition-colors",children:C.label})]},C.value))})})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Zo,{checked:c,onCheckedChange:C=>x("timestamps",C),className:"data-[state=checked]:bg-purple-500"}),p.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Show Timestamps"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Zo,{checked:s,onCheckedChange:C=>x("24hour",C),className:"data-[state=checked]:bg-purple-500"}),p.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"24h Time"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Zo,{checked:a,onCheckedChange:C=>x("autoExpand",C),className:"data-[state=checked]:bg-purple-500"}),p.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Auto Expand"})]}),p.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),p.jsxs("button",{onClick:v,className:Ae("group flex items-center gap-2","rounded-lg px-3 py-1.5","text-sm text-gray-900 dark:text-white","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-500/10 dark:hover:bg-purple-500/20","transition-all duration-200",{"animate-spin":f}),children:[p.jsx("span",{className:"i-ph:arrows-clockwise text-lg text-gray-500 dark:text-gray-400 group-hover:text-purple-500 transition-colors"}),"Refresh"]}),p.jsx(R,{})]})]}),p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"text",placeholder:"Search logs...",value:r,onChange:C=>i(C.target.value),className:Ae("w-full px-4 py-2 pl-10 rounded-lg","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400","focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500","transition-all duration-200")}),p.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:p.jsx("div",{className:"i-ph:magnifying-glass text-lg text-gray-500 dark:text-gray-400"})})]}),b.length===0?p.jsxs(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:Ae("flex flex-col items-center justify-center gap-4","rounded-lg p-8 text-center","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]"),children:[p.jsx("span",{className:"i-ph:clipboard-text text-4xl text-gray-400 dark:text-gray-600"}),p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"No Logs Found"}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search or filters"})]})]}):b.map(C=>p.jsx(_3e,{log:C,isExpanded:a,use24Hour:s,showTimestamp:c},C.id))]})]})}const S3e=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,E3e=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,k3e={};function Yj(t,e){return(k3e.jsx?E3e:S3e).test(t)}const C3e=/[ \t\n\f\r]/g;function T3e(t){return typeof t=="object"?t.type==="text"?Xj(t.value):!1:Xj(t)}function Xj(t){return t.replace(C3e,"")===""}let Sv=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};Sv.prototype.normal={};Sv.prototype.property={};Sv.prototype.space=void 0;function LZ(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new Sv(n,r,e)}function RP(t){return t.toLowerCase()}let Ys=class{constructor(e,n){this.attribute=n,this.property=e}};Ys.prototype.attribute="";Ys.prototype.booleanish=!1;Ys.prototype.boolean=!1;Ys.prototype.commaOrSpaceSeparated=!1;Ys.prototype.commaSeparated=!1;Ys.prototype.defined=!1;Ys.prototype.mustUseProperty=!1;Ys.prototype.number=!1;Ys.prototype.overloadedBoolean=!1;Ys.prototype.property="";Ys.prototype.spaceSeparated=!1;Ys.prototype.space=void 0;let A3e=0;const ln=zf(),Kr=zf(),RZ=zf(),bt=zf(),or=zf(),Tm=zf(),ao=zf();function zf(){return 2**++A3e}const IP=Object.freeze(Object.defineProperty({__proto__:null,boolean:ln,booleanish:Kr,commaOrSpaceSeparated:ao,commaSeparated:Tm,number:bt,overloadedBoolean:RZ,spaceSeparated:or},Symbol.toStringTag,{value:"Module"})),fT=Object.keys(IP);let bI=class extends Ys{constructor(e,n,r,i){let s=-1;if(super(e,n),Zj(this,"space",i),typeof r=="number")for(;++s<fT.length;){const o=fT[s];Zj(this,fT[s],(r&IP[o])===IP[o])}}};bI.prototype.defined=!0;function Zj(t,e,n){n&&(t[e]=n)}function Wg(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new bI(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[RP(r)]=r,n[RP(s.attribute)]=r}return new Sv(e,n,t.space)}const IZ=Wg({properties:{ariaActiveDescendant:null,ariaAtomic:Kr,ariaAutoComplete:null,ariaBusy:Kr,ariaChecked:Kr,ariaColCount:bt,ariaColIndex:bt,ariaColSpan:bt,ariaControls:or,ariaCurrent:null,ariaDescribedBy:or,ariaDetails:null,ariaDisabled:Kr,ariaDropEffect:or,ariaErrorMessage:null,ariaExpanded:Kr,ariaFlowTo:or,ariaGrabbed:Kr,ariaHasPopup:null,ariaHidden:Kr,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:or,ariaLevel:bt,ariaLive:null,ariaModal:Kr,ariaMultiLine:Kr,ariaMultiSelectable:Kr,ariaOrientation:null,ariaOwns:or,ariaPlaceholder:null,ariaPosInSet:bt,ariaPressed:Kr,ariaReadOnly:Kr,ariaRelevant:null,ariaRequired:Kr,ariaRoleDescription:or,ariaRowCount:bt,ariaRowIndex:bt,ariaRowSpan:bt,ariaSelected:Kr,ariaSetSize:bt,ariaSort:null,ariaValueMax:bt,ariaValueMin:bt,ariaValueNow:bt,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function OZ(t,e){return e in t?t[e]:e}function DZ(t,e){return OZ(t,e.toLowerCase())}const P3e=Wg({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Tm,acceptCharset:or,accessKey:or,action:null,allow:null,allowFullScreen:ln,allowPaymentRequest:ln,allowUserMedia:ln,alt:null,as:null,async:ln,autoCapitalize:null,autoComplete:or,autoFocus:ln,autoPlay:ln,blocking:or,capture:null,charSet:null,checked:ln,cite:null,className:or,cols:bt,colSpan:null,content:null,contentEditable:Kr,controls:ln,controlsList:or,coords:bt|Tm,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ln,defer:ln,dir:null,dirName:null,disabled:ln,download:RZ,draggable:Kr,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ln,formTarget:null,headers:or,height:bt,hidden:ln,high:bt,href:null,hrefLang:null,htmlFor:or,httpEquiv:or,id:null,imageSizes:null,imageSrcSet:null,inert:ln,inputMode:null,integrity:null,is:null,isMap:ln,itemId:null,itemProp:or,itemRef:or,itemScope:ln,itemType:or,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ln,low:bt,manifest:null,max:null,maxLength:bt,media:null,method:null,min:null,minLength:bt,multiple:ln,muted:ln,name:null,nonce:null,noModule:ln,noValidate:ln,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ln,optimum:bt,pattern:null,ping:or,placeholder:null,playsInline:ln,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ln,referrerPolicy:null,rel:or,required:ln,reversed:ln,rows:bt,rowSpan:bt,sandbox:or,scope:null,scoped:ln,seamless:ln,selected:ln,shadowRootClonable:ln,shadowRootDelegatesFocus:ln,shadowRootMode:null,shape:null,size:bt,sizes:null,slot:null,span:bt,spellCheck:Kr,src:null,srcDoc:null,srcLang:null,srcSet:null,start:bt,step:null,style:null,tabIndex:bt,target:null,title:null,translate:null,type:null,typeMustMatch:ln,useMap:null,value:Kr,width:bt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:or,axis:null,background:null,bgColor:null,border:bt,borderColor:null,bottomMargin:bt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ln,declare:ln,event:null,face:null,frame:null,frameBorder:null,hSpace:bt,leftMargin:bt,link:null,longDesc:null,lowSrc:null,marginHeight:bt,marginWidth:bt,noResize:ln,noHref:ln,noShade:ln,noWrap:ln,object:null,profile:null,prompt:null,rev:null,rightMargin:bt,rules:null,scheme:null,scrolling:Kr,standby:null,summary:null,text:null,topMargin:bt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:bt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ln,disableRemotePlayback:ln,prefix:null,property:null,results:bt,security:null,unselectable:null},space:"html",transform:DZ}),N3e=Wg({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:ao,accentHeight:bt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:bt,amplitude:bt,arabicForm:null,ascent:bt,attributeName:null,attributeType:null,azimuth:bt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:bt,by:null,calcMode:null,capHeight:bt,className:or,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:bt,diffuseConstant:bt,direction:null,display:null,dur:null,divisor:bt,dominantBaseline:null,download:ln,dx:null,dy:null,edgeMode:null,editable:null,elevation:bt,enableBackground:null,end:null,event:null,exponent:bt,externalResourcesRequired:null,fill:null,fillOpacity:bt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Tm,g2:Tm,glyphName:Tm,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:bt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:bt,horizOriginX:bt,horizOriginY:bt,id:null,ideographic:bt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:bt,k:bt,k1:bt,k2:bt,k3:bt,k4:bt,kernelMatrix:ao,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:bt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:bt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:bt,overlineThickness:bt,paintOrder:null,panose1:null,path:null,pathLength:bt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:or,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:bt,pointsAtY:bt,pointsAtZ:bt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ao,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ao,rev:ao,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ao,requiredFeatures:ao,requiredFonts:ao,requiredFormats:ao,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:bt,specularExponent:bt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:bt,strikethroughThickness:bt,string:null,stroke:null,strokeDashArray:ao,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:bt,strokeOpacity:bt,strokeWidth:null,style:null,surfaceScale:bt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ao,tabIndex:bt,tableValues:null,target:null,targetX:bt,targetY:bt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ao,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:bt,underlineThickness:bt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:bt,values:null,vAlphabetic:bt,vMathematical:bt,vectorEffect:null,vHanging:bt,vIdeographic:bt,version:null,vertAdvY:bt,vertOriginX:bt,vertOriginY:bt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:bt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:OZ}),MZ=Wg({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),jZ=Wg({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:DZ}),FZ=Wg({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),L3e={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},R3e=/[A-Z]/g,Jj=/-[a-z]/g,I3e=/^data[-\w.:]+$/i;function O3e(t,e){const n=RP(e);let r=e,i=Ys;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&I3e.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(Jj,M3e);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!Jj.test(s)){let o=s.replace(R3e,D3e);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=bI}return new i(r,e)}function D3e(t){return"-"+t.toLowerCase()}function M3e(t){return t.charAt(1).toUpperCase()}const j3e=LZ([IZ,P3e,MZ,jZ,FZ],"html"),yI=LZ([IZ,N3e,MZ,jZ,FZ],"svg");var BZ={},Qj=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,F3e=/\n/g,B3e=/^\s*/,U3e=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,$3e=/^:\s*/,H3e=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,z3e=/^[;\s]*/,V3e=/^\s+|\s+$/g,W3e=`
`,eF="/",tF="*",_d="",G3e="comment",q3e="declaration",K3e=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(m){var g=m.match(F3e);g&&(n+=g.length);var b=m.lastIndexOf(W3e);r=~b?m.length-b:r+m.length}function s(){var m={line:n,column:r};return function(g){return g.position=new o(m),c(),g}}function o(m){this.start=m,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(m){var g=new Error(e.source+":"+n+":"+r+": "+m);if(g.reason=m,g.filename=e.source,g.line=n,g.column=r,g.source=t,!e.silent)throw g}function l(m){var g=m.exec(t);if(g){var b=g[0];return i(b),t=t.slice(b.length),g}}function c(){l(B3e)}function u(m){var g;for(m=m||[];g=h();)g!==!1&&m.push(g);return m}function h(){var m=s();if(!(eF!=t.charAt(0)||tF!=t.charAt(1))){for(var g=2;_d!=t.charAt(g)&&(tF!=t.charAt(g)||eF!=t.charAt(g+1));)++g;if(g+=2,_d===t.charAt(g-1))return a("End of comment missing");var b=t.slice(2,g-2);return r+=2,i(b),t=t.slice(g),r+=2,m({type:G3e,comment:b})}}function d(){var m=s(),g=l(U3e);if(g){if(h(),!l($3e))return a("property missing ':'");var b=l(H3e),y=m({type:q3e,property:nF(g[0].replace(Qj,_d)),value:b?nF(b[0].replace(Qj,_d)):_d});return l(z3e),y}}function f(){var m=[];u(m);for(var g;g=d();)g!==!1&&(m.push(g),u(m));return m}return c(),f()};function nF(t){return t?t.replace(V3e,_d):_d}var Y3e=Na&&Na.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(BZ,"__esModule",{value:!0});var rF=BZ.default=Z3e,X3e=Y3e(K3e);function Z3e(t,e){var n=null;if(!t||typeof t!="string")return n;var r=(0,X3e.default)(t),i=typeof e=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?e(o,a,s):a&&(n=n||{},n[o]=a)}}),n}const J3e=rF.default||rF,Q3e=ePe("start");function ePe(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function tPe(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?iF(t.position):"start"in t||"end"in t?iF(t):"line"in t||"column"in t?OP(t):""}function OP(t){return sF(t&&t.line)+":"+sF(t&&t.column)}function iF(t){return OP(t&&t.start)+"-"+OP(t&&t.end)}function sF(t){return t&&typeof t=="number"?t:1}class Bi extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=tPe(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Bi.prototype.file="";Bi.prototype.name="";Bi.prototype.reason="";Bi.prototype.message="";Bi.prototype.stack="";Bi.prototype.column=void 0;Bi.prototype.line=void 0;Bi.prototype.ancestors=void 0;Bi.prototype.cause=void 0;Bi.prototype.fatal=void 0;Bi.prototype.place=void 0;Bi.prototype.ruleId=void 0;Bi.prototype.source=void 0;const vI={}.hasOwnProperty,nPe=new Map,rPe=/[A-Z]/g,iPe=/-([a-z])/g,sPe=new Set(["table","tbody","thead","tfoot","tr"]),oPe=new Set(["td","th"]),UZ="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function aPe(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=mPe(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=pPe(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?yI:j3e,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=$Z(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function $Z(t,e,n){if(e.type==="element")return lPe(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return cPe(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return hPe(t,e,n);if(e.type==="mdxjsEsm")return uPe(t,e);if(e.type==="root")return dPe(t,e,n);if(e.type==="text")return fPe(t,e)}function lPe(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=yI,t.schema=i),t.ancestors.push(e);const s=zZ(t,e.tagName,!1),o=gPe(t,e);let a=_I(t,e);return sPe.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!T3e(l):!0})),HZ(t,o,s,e),xI(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function cPe(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}fy(t,e.position)}function uPe(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);fy(t,e.position)}function hPe(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=yI,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:zZ(t,e.name,!0),o=bPe(t,e),a=_I(t,e);return HZ(t,o,s,e),xI(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function dPe(t,e,n){const r={};return xI(r,_I(t,e)),t.create(e,t.Fragment,r,n)}function fPe(t,e){return e.value}function HZ(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function xI(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function pPe(t,e,n){return r;function r(i,s,o,a){const c=Array.isArray(o.children)?n:e;return a?c(s,o,a):c(s,o)}}function mPe(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=Q3e(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function gPe(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&vI.call(e.properties,i)){const s=yPe(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&oPe.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function bPe(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else fy(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else fy(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function _I(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:nPe;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const c=i.get(l)||0;o=l+"-"+c,i.set(l,c+1)}}const a=$Z(t,s,o);a!==void 0&&n.push(a)}return n}function yPe(t,e,n){const r=O3e(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?FR(n):BR(n)),r.property==="style"){let i=typeof n=="object"?n:vPe(t,String(n));return t.stylePropertyNameCase==="css"&&(i=xPe(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?L3e[r.property]||r.property:r.attribute,n]}}function vPe(t,e){const n={};try{J3e(e,r)}catch(i){if(!t.ignoreInvalidStyle){const s=i,o=new Bi("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=t.filePath||void 0,o.url=UZ+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(iPe,wPe)),n[o]=s}}function zZ(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=Yj(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Yj(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return vI.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);fy(t)}function fy(t,e){const n=new Bi("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=UZ+"#cannot-handle-mdx-estrees-without-createevaluater",n}function xPe(t){const e={};let n;for(n in t)vI.call(t,n)&&(e[_Pe(n)]=t[n]);return e}function _Pe(t){let e=t.replace(rPe,SPe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function wPe(t,e){return e.toUpperCase()}function SPe(t){return"-"+t.toLowerCase()}const pT={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},EPe={};function kPe(t,e){const n=EPe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return VZ(t,r,i)}function VZ(t,e,n){if(CPe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return oF(t.children,e,n)}return Array.isArray(t)?oF(t,e,n):""}function oF(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=VZ(t[i],e,n);return r.join("")}function CPe(t){return!!(t&&typeof t=="object")}function nc(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function $o(t,e){return t.length>0?(nc(t,t.length,0,e),t):e}const aF={}.hasOwnProperty;function TPe(t){const e={};let n=-1;for(;++n<t.length;)APe(e,t[n]);return e}function APe(t,e){let n;for(n in e){const i=(aF.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){aF.call(i,o)||(i[o]=[]);const a=s[o];PPe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function PPe(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);nc(t,0,0,r)}function WZ(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Am(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ll=Mh(/[A-Za-z]/),Ra=Mh(/[\dA-Za-z]/),NPe=Mh(/[#-'*+\--9=?A-Z^-~]/);function DP(t){return t!==null&&(t<32||t===127)}const MP=Mh(/\d/),LPe=Mh(/[\dA-Fa-f]/),RPe=Mh(/[!-/:-@[-`{-~]/);function Yt(t){return t!==null&&t<-2}function $s(t){return t!==null&&(t<0||t===32)}function Mn(t){return t===-2||t===-1||t===32}const IPe=Mh(/\p{P}|\p{S}/u),OPe=Mh(/\s/);function Mh(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function lr(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Mn(l)?(t.enter(n),a(l)):e(l)}function a(l){return Mn(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const DPe={tokenize:MPe};function MPe(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),lr(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return Yt(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const jPe={tokenize:FPe},lF={tokenize:BPe};function FPe(t){const e=this,n=[];let r=0,i,s,o;return a;function a(x){if(r<n.length){const w=n[r];return e.containerState=w[1],t.attempt(w[0].continuation,l,c)(x)}return c(x)}function l(x){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&v();const w=e.events.length;let S=w,E;for(;S--;)if(e.events[S][0]==="exit"&&e.events[S][1].type==="chunkFlow"){E=e.events[S][1].end;break}y(r);let k=w;for(;k<e.events.length;)e.events[k][1].end={...E},k++;return nc(e.events,S+1,0,e.events.slice(w)),e.events.length=k,c(x)}return a(x)}function c(x){if(r===n.length){if(!i)return d(x);if(i.currentConstruct&&i.currentConstruct.concrete)return m(x);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(lF,u,h)(x)}function u(x){return i&&v(),y(r),d(x)}function h(x){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,m(x)}function d(x){return e.containerState={},t.attempt(lF,f,m)(x)}function f(x){return r++,n.push([e.currentConstruct,e.containerState]),d(x)}function m(x){if(x===null){i&&v(),y(0),t.consume(x);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),g(x)}function g(x){if(x===null){b(t.exit("chunkFlow"),!0),y(0),t.consume(x);return}return Yt(x)?(t.consume(x),b(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(x),g)}function b(x,w){const S=e.sliceStream(x);if(w&&S.push(null),x.previous=s,s&&(s.next=x),s=x,i.defineSkip(x.start),i.write(S),e.parser.lazy[x.start.line]){let E=i.events.length;for(;E--;)if(i.events[E][1].start.offset<o&&(!i.events[E][1].end||i.events[E][1].end.offset>o))return;const k=e.events.length;let _=k,L,R;for(;_--;)if(e.events[_][0]==="exit"&&e.events[_][1].type==="chunkFlow"){if(L){R=e.events[_][1].end;break}L=!0}for(y(r),E=k;E<e.events.length;)e.events[E][1].end={...R},E++;nc(e.events,_+1,0,e.events.slice(k)),e.events.length=E}}function y(x){let w=n.length;for(;w-- >x;){const S=n[w];e.containerState=S[1],S[0].exit.call(e,t)}n.length=x}function v(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function BPe(t,e,n){return lr(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function cF(t){if(t===null||$s(t)||OPe(t))return 1;if(IPe(t))return 2}function wI(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const jP={name:"attention",resolveAll:UPe,tokenize:$Pe};function UPe(t,e){let n=-1,r,i,s,o,a,l,c,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const h={...t[r][1].end},d={...t[n][1].start};uF(h,-l),uF(d,l),o={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:d},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=$o(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=$o(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=$o(c,wI(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=$o(c,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,c=$o(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,nc(t,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function $Pe(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=cF(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const c=t.exit("attentionSequence"),u=cF(l),h=!u||u===2&&i||n.includes(l),d=!i||i===2&&u||n.includes(r);return c._open=!!(s===42?h:h&&(i||!d)),c._close=!!(s===42?d:d&&(u||!h)),e(l)}}function uF(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const HPe={name:"autolink",tokenize:zPe};function zPe(t,e,n){let r=0;return i;function i(f){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(f){return Ll(f)?(t.consume(f),o):f===64?n(f):c(f)}function o(f){return f===43||f===45||f===46||Ra(f)?(r=1,a(f)):c(f)}function a(f){return f===58?(t.consume(f),r=0,l):(f===43||f===45||f===46||Ra(f))&&r++<32?(t.consume(f),a):(r=0,c(f))}function l(f){return f===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):f===null||f===32||f===60||DP(f)?n(f):(t.consume(f),l)}function c(f){return f===64?(t.consume(f),u):NPe(f)?(t.consume(f),c):n(f)}function u(f){return Ra(f)?h(f):n(f)}function h(f){return f===46?(t.consume(f),r=0,u):f===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):d(f)}function d(f){if((f===45||Ra(f))&&r++<63){const m=f===45?d:h;return t.consume(f),m}return n(f)}}const Ck={partial:!0,tokenize:VPe};function VPe(t,e,n){return r;function r(s){return Mn(s)?lr(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Yt(s)?e(s):n(s)}}const GZ={continuation:{tokenize:GPe},exit:qPe,name:"blockQuote",tokenize:WPe};function WPe(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Mn(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function GPe(t,e,n){const r=this;return i;function i(o){return Mn(o)?lr(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(GZ,e,n)(o)}}function qPe(t){t.exit("blockQuote")}const qZ={name:"characterEscape",tokenize:KPe};function KPe(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return RPe(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const KZ={name:"characterReference",tokenize:YPe};function YPe(t,e,n){const r=this;let i=0,s,o;return a;function a(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),l}function l(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=Ra,u(h))}function c(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=LPe,u):(t.enter("characterReferenceValue"),s=7,o=MP,u(h))}function u(h){if(h===59&&i){const d=t.exit("characterReferenceValue");return o===Ra&&!ZR(r.sliceSerialize(d))?n(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(h)&&i++<s?(t.consume(h),u):n(h)}}const hF={partial:!0,tokenize:ZPe},dF={concrete:!0,name:"codeFenced",tokenize:XPe};function XPe(t,e,n){const r=this,i={partial:!0,tokenize:S};let s=0,o=0,a;return l;function l(E){return c(E)}function c(E){const k=r.events[r.events.length-1];return s=k&&k[1].type==="linePrefix"?k[2].sliceSerialize(k[1],!0).length:0,a=E,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(E)}function u(E){return E===a?(o++,t.consume(E),u):o<3?n(E):(t.exit("codeFencedFenceSequence"),Mn(E)?lr(t,h,"whitespace")(E):h(E))}function h(E){return E===null||Yt(E)?(t.exit("codeFencedFence"),r.interrupt?e(E):t.check(hF,g,w)(E)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),d(E))}function d(E){return E===null||Yt(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),h(E)):Mn(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),lr(t,f,"whitespace")(E)):E===96&&E===a?n(E):(t.consume(E),d)}function f(E){return E===null||Yt(E)?h(E):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),m(E))}function m(E){return E===null||Yt(E)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),h(E)):E===96&&E===a?n(E):(t.consume(E),m)}function g(E){return t.attempt(i,w,b)(E)}function b(E){return t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),y}function y(E){return s>0&&Mn(E)?lr(t,v,"linePrefix",s+1)(E):v(E)}function v(E){return E===null||Yt(E)?t.check(hF,g,w)(E):(t.enter("codeFlowValue"),x(E))}function x(E){return E===null||Yt(E)?(t.exit("codeFlowValue"),v(E)):(t.consume(E),x)}function w(E){return t.exit("codeFenced"),e(E)}function S(E,k,_){let L=0;return R;function R(H){return E.enter("lineEnding"),E.consume(H),E.exit("lineEnding"),C}function C(H){return E.enter("codeFencedFence"),Mn(H)?lr(E,P,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(H):P(H)}function P(H){return H===a?(E.enter("codeFencedFenceSequence"),O(H)):_(H)}function O(H){return H===a?(L++,E.consume(H),O):L>=o?(E.exit("codeFencedFenceSequence"),Mn(H)?lr(E,N,"whitespace")(H):N(H)):_(H)}function N(H){return H===null||Yt(H)?(E.exit("codeFencedFence"),k(H)):_(H)}}}function ZPe(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const mT={name:"codeIndented",tokenize:QPe},JPe={partial:!0,tokenize:e4e};function QPe(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),lr(t,s,"linePrefix",5)(c)}function s(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?l(c):Yt(c)?t.attempt(JPe,o,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||Yt(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function e4e(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Yt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):lr(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):Yt(o)?i(o):n(o)}}const t4e={name:"codeText",previous:r4e,resolve:n4e,tokenize:i4e};function n4e(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function r4e(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function i4e(t,e,n){let r=0,i,s;return o;function o(h){return t.enter("codeText"),t.enter("codeTextSequence"),a(h)}function a(h){return h===96?(t.consume(h),r++,a):(t.exit("codeTextSequence"),l(h))}function l(h){return h===null?n(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),l):h===96?(s=t.enter("codeTextSequence"),i=0,u(h)):Yt(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(h))}function c(h){return h===null||h===32||h===96||Yt(h)?(t.exit("codeTextData"),l(h)):(t.consume(h),c)}function u(h){return h===96?(t.consume(h),i++,u):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(s.type="codeTextData",c(h))}}class s4e{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&eb(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),eb(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),eb(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);eb(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);eb(this.left,n.reverse())}}}function eb(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function YZ(t){const e={};let n=-1,r,i,s,o,a,l,c;const u=new s4e(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,o4e(u,n)),n=e[n],c=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=u.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},a=u.slice(i,n),a.unshift(r),u.splice(i,n-i+1,a))}}return nc(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function o4e(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],c={};let u,h,d=-1,f=n,m=0,g=0;const b=[g];for(;f;){for(;t.get(++i)[1]!==f;);s.push(i),f._tokenizer||(u=r.sliceStream(f),f.next||u.push(null),h&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=f,f=f.next}for(f=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(g=d+1,b.push(g),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):b.pop(),d=b.length;d--;){const y=a.slice(b[d],b[d+1]),v=s.pop();l.push([v,v+y.length-1]),t.splice(v,2,y)}for(l.reverse(),d=-1;++d<l.length;)c[m+l[d][0]]=m+l[d][1],m+=l[d][1]-l[d][0]-1;return c}const a4e={resolve:c4e,tokenize:u4e},l4e={partial:!0,tokenize:h4e};function c4e(t){return YZ(t),t}function u4e(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Yt(a)?t.check(l4e,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function h4e(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),lr(t,s,"linePrefix")}function s(o){if(o===null||Yt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function XZ(t,e,n,r,i,s,o,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return h;function h(y){return y===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(y),t.exit(s),d):y===null||y===32||y===41||DP(y)?n(y):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),g(y))}function d(y){return y===62?(t.enter(s),t.consume(y),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),f(y))}function f(y){return y===62?(t.exit("chunkString"),t.exit(a),d(y)):y===null||y===60||Yt(y)?n(y):(t.consume(y),y===92?m:f)}function m(y){return y===60||y===62||y===92?(t.consume(y),f):f(y)}function g(y){return!u&&(y===null||y===41||$s(y))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(y)):u<c&&y===40?(t.consume(y),u++,g):y===41?(t.consume(y),u--,g):y===null||y===32||y===40||DP(y)?n(y):(t.consume(y),y===92?b:g)}function b(y){return y===40||y===41||y===92?(t.consume(y),g):g(y)}}function ZZ(t,e,n,r,i,s){const o=this;let a=0,l;return c;function c(f){return t.enter(r),t.enter(i),t.consume(f),t.exit(i),t.enter(s),u}function u(f){return a>999||f===null||f===91||f===93&&!l||f===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(f):f===93?(t.exit(s),t.enter(i),t.consume(f),t.exit(i),t.exit(r),e):Yt(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),h(f))}function h(f){return f===null||f===91||f===93||Yt(f)||a++>999?(t.exit("chunkString"),u(f)):(t.consume(f),l||(l=!Mn(f)),f===92?d:h)}function d(f){return f===91||f===92||f===93?(t.consume(f),a++,h):h(f)}}function JZ(t,e,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(t.enter(r),t.enter(i),t.consume(d),t.exit(i),o=d===40?41:d,l):n(d)}function l(d){return d===o?(t.enter(i),t.consume(d),t.exit(i),t.exit(r),e):(t.enter(s),c(d))}function c(d){return d===o?(t.exit(s),l(o)):d===null?n(d):Yt(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),lr(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(d))}function u(d){return d===o||d===null||Yt(d)?(t.exit("chunkString"),c(d)):(t.consume(d),d===92?h:u)}function h(d){return d===o||d===92?(t.consume(d),u):u(d)}}function h1(t,e){let n;return r;function r(i){return Yt(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Mn(i)?lr(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const d4e={name:"definition",tokenize:p4e},f4e={partial:!0,tokenize:m4e};function p4e(t,e,n){const r=this;let i;return s;function s(f){return t.enter("definition"),o(f)}function o(f){return ZZ.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function a(f){return i=Am(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(t.enter("definitionMarker"),t.consume(f),t.exit("definitionMarker"),l):n(f)}function l(f){return $s(f)?h1(t,c)(f):c(f)}function c(f){return XZ(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function u(f){return t.attempt(f4e,h,h)(f)}function h(f){return Mn(f)?lr(t,d,"whitespace")(f):d(f)}function d(f){return f===null||Yt(f)?(t.exit("definition"),r.parser.defined.push(i),e(f)):n(f)}}function m4e(t,e,n){return r;function r(a){return $s(a)?h1(t,i)(a):n(a)}function i(a){return JZ(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Mn(a)?lr(t,o,"whitespace")(a):o(a)}function o(a){return a===null||Yt(a)?e(a):n(a)}}const g4e={name:"hardBreakEscape",tokenize:b4e};function b4e(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Yt(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const y4e={name:"headingAtx",resolve:v4e,tokenize:x4e};function v4e(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},nc(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function x4e(t,e,n){let r=0;return i;function i(u){return t.enter("atxHeading"),s(u)}function s(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(t.consume(u),o):u===null||$s(u)?(t.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(t.enter("atxHeadingSequence"),l(u)):u===null||Yt(u)?(t.exit("atxHeading"),e(u)):Mn(u)?lr(t,a,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function l(u){return u===35?(t.consume(u),l):(t.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||$s(u)?(t.exit("atxHeadingText"),a(u)):(t.consume(u),c)}}const _4e=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],fF=["pre","script","style","textarea"],w4e={concrete:!0,name:"htmlFlow",resolveTo:k4e,tokenize:C4e},S4e={partial:!0,tokenize:A4e},E4e={partial:!0,tokenize:T4e};function k4e(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function C4e(t,e,n){const r=this;let i,s,o,a,l;return c;function c(D){return u(D)}function u(D){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(D),h}function h(D){return D===33?(t.consume(D),d):D===47?(t.consume(D),s=!0,g):D===63?(t.consume(D),i=3,r.interrupt?e:F):Ll(D)?(t.consume(D),o=String.fromCharCode(D),b):n(D)}function d(D){return D===45?(t.consume(D),i=2,f):D===91?(t.consume(D),i=5,a=0,m):Ll(D)?(t.consume(D),i=4,r.interrupt?e:F):n(D)}function f(D){return D===45?(t.consume(D),r.interrupt?e:F):n(D)}function m(D){const V="CDATA[";return D===V.charCodeAt(a++)?(t.consume(D),a===V.length?r.interrupt?e:P:m):n(D)}function g(D){return Ll(D)?(t.consume(D),o=String.fromCharCode(D),b):n(D)}function b(D){if(D===null||D===47||D===62||$s(D)){const V=D===47,W=o.toLowerCase();return!V&&!s&&fF.includes(W)?(i=1,r.interrupt?e(D):P(D)):_4e.includes(o.toLowerCase())?(i=6,V?(t.consume(D),y):r.interrupt?e(D):P(D)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(D):s?v(D):x(D))}return D===45||Ra(D)?(t.consume(D),o+=String.fromCharCode(D),b):n(D)}function y(D){return D===62?(t.consume(D),r.interrupt?e:P):n(D)}function v(D){return Mn(D)?(t.consume(D),v):R(D)}function x(D){return D===47?(t.consume(D),R):D===58||D===95||Ll(D)?(t.consume(D),w):Mn(D)?(t.consume(D),x):R(D)}function w(D){return D===45||D===46||D===58||D===95||Ra(D)?(t.consume(D),w):S(D)}function S(D){return D===61?(t.consume(D),E):Mn(D)?(t.consume(D),S):x(D)}function E(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(t.consume(D),l=D,k):Mn(D)?(t.consume(D),E):_(D)}function k(D){return D===l?(t.consume(D),l=null,L):D===null||Yt(D)?n(D):(t.consume(D),k)}function _(D){return D===null||D===34||D===39||D===47||D===60||D===61||D===62||D===96||$s(D)?S(D):(t.consume(D),_)}function L(D){return D===47||D===62||Mn(D)?x(D):n(D)}function R(D){return D===62?(t.consume(D),C):n(D)}function C(D){return D===null||Yt(D)?P(D):Mn(D)?(t.consume(D),C):n(D)}function P(D){return D===45&&i===2?(t.consume(D),Q):D===60&&i===1?(t.consume(D),X):D===62&&i===4?(t.consume(D),Y):D===63&&i===3?(t.consume(D),F):D===93&&i===5?(t.consume(D),j):Yt(D)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(S4e,M,O)(D)):D===null||Yt(D)?(t.exit("htmlFlowData"),O(D)):(t.consume(D),P)}function O(D){return t.check(E4e,N,M)(D)}function N(D){return t.enter("lineEnding"),t.consume(D),t.exit("lineEnding"),H}function H(D){return D===null||Yt(D)?O(D):(t.enter("htmlFlowData"),P(D))}function Q(D){return D===45?(t.consume(D),F):P(D)}function X(D){return D===47?(t.consume(D),o="",J):P(D)}function J(D){if(D===62){const V=o.toLowerCase();return fF.includes(V)?(t.consume(D),Y):P(D)}return Ll(D)&&o.length<8?(t.consume(D),o+=String.fromCharCode(D),J):P(D)}function j(D){return D===93?(t.consume(D),F):P(D)}function F(D){return D===62?(t.consume(D),Y):D===45&&i===2?(t.consume(D),F):P(D)}function Y(D){return D===null||Yt(D)?(t.exit("htmlFlowData"),M(D)):(t.consume(D),Y)}function M(D){return t.exit("htmlFlow"),e(D)}}function T4e(t,e,n){const r=this;return i;function i(o){return Yt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function A4e(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Ck,e,n)}}const P4e={name:"htmlText",tokenize:N4e};function N4e(t,e,n){const r=this;let i,s,o;return a;function a(F){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(F),l}function l(F){return F===33?(t.consume(F),c):F===47?(t.consume(F),S):F===63?(t.consume(F),x):Ll(F)?(t.consume(F),_):n(F)}function c(F){return F===45?(t.consume(F),u):F===91?(t.consume(F),s=0,m):Ll(F)?(t.consume(F),v):n(F)}function u(F){return F===45?(t.consume(F),f):n(F)}function h(F){return F===null?n(F):F===45?(t.consume(F),d):Yt(F)?(o=h,X(F)):(t.consume(F),h)}function d(F){return F===45?(t.consume(F),f):h(F)}function f(F){return F===62?Q(F):F===45?d(F):h(F)}function m(F){const Y="CDATA[";return F===Y.charCodeAt(s++)?(t.consume(F),s===Y.length?g:m):n(F)}function g(F){return F===null?n(F):F===93?(t.consume(F),b):Yt(F)?(o=g,X(F)):(t.consume(F),g)}function b(F){return F===93?(t.consume(F),y):g(F)}function y(F){return F===62?Q(F):F===93?(t.consume(F),y):g(F)}function v(F){return F===null||F===62?Q(F):Yt(F)?(o=v,X(F)):(t.consume(F),v)}function x(F){return F===null?n(F):F===63?(t.consume(F),w):Yt(F)?(o=x,X(F)):(t.consume(F),x)}function w(F){return F===62?Q(F):x(F)}function S(F){return Ll(F)?(t.consume(F),E):n(F)}function E(F){return F===45||Ra(F)?(t.consume(F),E):k(F)}function k(F){return Yt(F)?(o=k,X(F)):Mn(F)?(t.consume(F),k):Q(F)}function _(F){return F===45||Ra(F)?(t.consume(F),_):F===47||F===62||$s(F)?L(F):n(F)}function L(F){return F===47?(t.consume(F),Q):F===58||F===95||Ll(F)?(t.consume(F),R):Yt(F)?(o=L,X(F)):Mn(F)?(t.consume(F),L):Q(F)}function R(F){return F===45||F===46||F===58||F===95||Ra(F)?(t.consume(F),R):C(F)}function C(F){return F===61?(t.consume(F),P):Yt(F)?(o=C,X(F)):Mn(F)?(t.consume(F),C):L(F)}function P(F){return F===null||F===60||F===61||F===62||F===96?n(F):F===34||F===39?(t.consume(F),i=F,O):Yt(F)?(o=P,X(F)):Mn(F)?(t.consume(F),P):(t.consume(F),N)}function O(F){return F===i?(t.consume(F),i=void 0,H):F===null?n(F):Yt(F)?(o=O,X(F)):(t.consume(F),O)}function N(F){return F===null||F===34||F===39||F===60||F===61||F===96?n(F):F===47||F===62||$s(F)?L(F):(t.consume(F),N)}function H(F){return F===47||F===62||$s(F)?L(F):n(F)}function Q(F){return F===62?(t.consume(F),t.exit("htmlTextData"),t.exit("htmlText"),e):n(F)}function X(F){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(F),t.exit("lineEnding"),J}function J(F){return Mn(F)?lr(t,j,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):j(F)}function j(F){return t.enter("htmlTextData"),o(F)}}const SI={name:"labelEnd",resolveAll:O4e,resolveTo:D4e,tokenize:M4e},L4e={tokenize:j4e},R4e={tokenize:F4e},I4e={tokenize:B4e};function O4e(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&nc(t,0,t.length,n),t}function D4e(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},u={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=$o(a,t.slice(s+1,s+r+3)),a=$o(a,[["enter",u,e]]),a=$o(a,wI(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=$o(a,[["exit",u,e],t[o-2],t[o-1],["exit",c,e]]),a=$o(a,t.slice(o+1)),a=$o(a,[["exit",l,e]]),nc(t,s,t.length,a),t}function M4e(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?h(d):(o=r.parser.defined.includes(Am(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(d),t.exit("labelMarker"),t.exit("labelEnd"),l):n(d)}function l(d){return d===40?t.attempt(L4e,u,o?u:h)(d):d===91?t.attempt(R4e,u,o?c:h)(d):o?u(d):h(d)}function c(d){return t.attempt(I4e,u,h)(d)}function u(d){return e(d)}function h(d){return s._balanced=!0,n(d)}}function j4e(t,e,n){return r;function r(h){return t.enter("resource"),t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),i}function i(h){return $s(h)?h1(t,s)(h):s(h)}function s(h){return h===41?u(h):XZ(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return $s(h)?h1(t,l)(h):u(h)}function a(h){return n(h)}function l(h){return h===34||h===39||h===40?JZ(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):u(h)}function c(h){return $s(h)?h1(t,u)(h):u(h)}function u(h){return h===41?(t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),t.exit("resource"),e):n(h)}}function F4e(t,e,n){const r=this;return i;function i(a){return ZZ.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Am(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function B4e(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const U4e={name:"labelStartImage",resolveAll:SI.resolveAll,tokenize:$4e};function $4e(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const H4e={name:"labelStartLink",resolveAll:SI.resolveAll,tokenize:z4e};function z4e(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const gT={name:"lineEnding",tokenize:V4e};function V4e(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),lr(t,e,"linePrefix")}}const i2={name:"thematicBreak",tokenize:W4e};function W4e(t,e,n){let r=0,i;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,a(c)}function a(c){return c===i?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||Yt(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===i?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),Mn(c)?lr(t,a,"whitespace")(c):a(c))}}const Is={continuation:{tokenize:Y4e},exit:Z4e,name:"list",tokenize:K4e},G4e={partial:!0,tokenize:J4e},q4e={partial:!0,tokenize:X4e};function K4e(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(f){const m=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:MP(f)){if(r.containerState.type||(r.containerState.type=m,t.enter(m,{_container:!0})),m==="listUnordered")return t.enter("listItemPrefix"),f===42||f===45?t.check(i2,n,c)(f):c(f);if(!r.interrupt||f===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(f)}return n(f)}function l(f){return MP(f)&&++o<10?(t.consume(f),l):(!r.interrupt||o<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(t.exit("listItemValue"),c(f)):n(f)}function c(f){return t.enter("listItemMarker"),t.consume(f),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,t.check(Ck,r.interrupt?n:u,t.attempt(G4e,d,h))}function u(f){return r.containerState.initialBlankLine=!0,s++,d(f)}function h(f){return Mn(f)?(t.enter("listItemPrefixWhitespace"),t.consume(f),t.exit("listItemPrefixWhitespace"),d):n(f)}function d(f){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(f)}}function Y4e(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Ck,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,lr(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Mn(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(q4e,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,lr(t,t.attempt(Is,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function X4e(t,e,n){const r=this;return lr(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function Z4e(t){t.exit(this.containerState.type)}function J4e(t,e,n){const r=this;return lr(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Mn(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const pF={name:"setextUnderline",resolveTo:Q4e,tokenize:eNe};function Q4e(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function eNe(t,e,n){const r=this;let i;return s;function s(c){let u=r.events.length,h;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){h=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(t.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),Mn(c)?lr(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||Yt(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const tNe={tokenize:nNe};function nNe(t){const e=this,n=t.attempt(Ck,r,t.attempt(this.parser.constructs.flowInitial,i,lr(t,t.attempt(this.parser.constructs.flow,i,t.attempt(a4e,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const rNe={resolveAll:eJ()},iNe=QZ("string"),sNe=QZ("text");function QZ(t){return{resolveAll:eJ(t==="text"?oNe:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(u){return c(u)?s(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),s(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const h=i[u];let d=-1;if(h)for(;++d<h.length;){const f=h[d];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function eJ(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function oNe(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const c={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const aNe={42:Is,43:Is,45:Is,48:Is,49:Is,50:Is,51:Is,52:Is,53:Is,54:Is,55:Is,56:Is,57:Is,62:GZ},lNe={91:d4e},cNe={[-2]:mT,[-1]:mT,32:mT},uNe={35:y4e,42:i2,45:[pF,i2],60:w4e,61:pF,95:i2,96:dF,126:dF},hNe={38:KZ,92:qZ},dNe={[-5]:gT,[-4]:gT,[-3]:gT,33:U4e,38:KZ,42:jP,60:[HPe,P4e],91:H4e,92:[g4e,qZ],93:SI,95:jP,96:t4e},fNe={null:[jP,rNe]},pNe={null:[42,95]},mNe={null:[]},gNe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:pNe,contentInitial:lNe,disable:mNe,document:aNe,flow:uNe,flowInitial:cNe,insideSpan:fNe,string:hNe,text:dNe},Symbol.toStringTag,{value:"Module"}));function bNe(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:k(S),check:k(E),consume:v,enter:x,exit:w,interrupt:k(E,{interrupt:!0})},c={code:null,containerState:{},defineSkip:g,events:[],now:m,parser:t,previous:null,sliceSerialize:d,sliceStream:f,write:h};let u=e.tokenize.call(c,l);return e.resolveAll&&s.push(e),c;function h(C){return o=$o(o,C),b(),o[o.length-1]!==null?[]:(_(e,0),c.events=wI(s,c.events,c),c.events)}function d(C,P){return vNe(f(C),P)}function f(C){return yNe(o,C)}function m(){const{_bufferIndex:C,_index:P,line:O,column:N,offset:H}=r;return{_bufferIndex:C,_index:P,line:O,column:N,offset:H}}function g(C){i[C.line]=C.column,R()}function b(){let C;for(;r._index<o.length;){const P=o[r._index];if(typeof P=="string")for(C=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===C&&r._bufferIndex<P.length;)y(P.charCodeAt(r._bufferIndex));else y(P)}}function y(C){u=u(C)}function v(C){Yt(C)?(r.line++,r.column=1,r.offset+=C===-3?2:1,R()):C!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=C}function x(C,P){const O=P||{};return O.type=C,O.start=m(),c.events.push(["enter",O,c]),a.push(O),O}function w(C){const P=a.pop();return P.end=m(),c.events.push(["exit",P,c]),P}function S(C,P){_(C,P.from)}function E(C,P){P.restore()}function k(C,P){return O;function O(N,H,Q){let X,J,j,F;return Array.isArray(N)?M(N):"tokenize"in N?M([N]):Y(N);function Y(te){return ee;function ee(K){const he=K!==null&&te[K],be=K!==null&&te.null,Se=[...Array.isArray(he)?he:he?[he]:[],...Array.isArray(be)?be:be?[be]:[]];return M(Se)(K)}}function M(te){return X=te,J=0,te.length===0?Q:D(te[J])}function D(te){return ee;function ee(K){return F=L(),j=te,te.partial||(c.currentConstruct=te),te.name&&c.parser.constructs.disable.null.includes(te.name)?W():te.tokenize.call(P?Object.assign(Object.create(c),P):c,l,V,W)(K)}}function V(te){return C(j,F),H}function W(te){return F.restore(),++J<X.length?D(X[J]):Q}}}function _(C,P){C.resolveAll&&!s.includes(C)&&s.push(C),C.resolve&&nc(c.events,P,c.events.length-P,C.resolve(c.events.slice(P),c)),C.resolveTo&&(c.events=C.resolveTo(c.events,c))}function L(){const C=m(),P=c.previous,O=c.currentConstruct,N=c.events.length,H=Array.from(a);return{from:N,restore:Q};function Q(){r=C,c.previous=P,c.currentConstruct=O,c.events.length=N,a=H,R()}}function R(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function yNe(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function vNe(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function xNe(t){const r={constructs:TPe([gNe,...(t||{}).extensions||[]]),content:i(DPe),defined:[],document:i(jPe),flow:i(tNe),lazy:{},string:i(iNe),text:i(sNe)};return r;function i(s){return o;function o(a){return bNe(r,s,a)}}}function _Ne(t){for(;!YZ(t););return t}const mF=/[\0\t\n\r]/g;function wNe(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let c,u,h,d,f;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),h=0,e="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if(mF.lastIndex=h,c=mF.exec(s),d=c&&c.index!==void 0?c.index:s.length,f=s.charCodeAt(d),!c){e=s.slice(h);break}if(f===10&&h===d&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<d&&(l.push(s.slice(h,d)),t+=d-h),f){case 0:{l.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,l.push(-2);t++<u;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}h=d+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const SNe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function ENe(t){return t.replace(SNe,kNe)}function kNe(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return WZ(n.slice(s?2:1),s?16:10)}return ZR(n)||t}function s2(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?gF(t.position):"start"in t||"end"in t?gF(t):"line"in t||"column"in t?FP(t):""}function FP(t){return bF(t&&t.line)+":"+bF(t&&t.column)}function gF(t){return FP(t&&t.start)+"-"+FP(t&&t.end)}function bF(t){return t&&typeof t=="number"?t:1}const tJ={}.hasOwnProperty;function CNe(t,e,n){return typeof e!="string"&&(n=e,e=void 0),TNe(n)(_Ne(xNe(n).document().write(wNe()(t,e,!0))))}function TNe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(me),autolinkProtocol:L,autolinkEmail:L,atxHeading:s(pe),blockQuote:s(be),characterEscape:L,characterReference:L,codeFenced:s(Se),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Se,o),codeText:s(Ce,o),codeTextData:L,data:L,codeFlowValue:L,definition:s(ke),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(q),hardBreakEscape:s(ne),hardBreakTrailing:s(ne),htmlFlow:s(oe,o),htmlFlowData:L,htmlText:s(oe,o),htmlTextData:L,image:s(ae),label:o,link:s(me),listItem:s(Re),listItemValue:d,listOrdered:s(Pe,h),listUnordered:s(Pe),paragraph:s(we),reference:D,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(pe),strong:s($e),thematicBreak:s(Be)},exit:{atxHeading:l(),atxHeadingSequence:S,autolink:l(),autolinkEmail:he,autolinkProtocol:K,blockQuote:l(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:W,characterReferenceMarkerNumeric:W,characterReferenceValue:te,characterReference:ee,codeFenced:l(b),codeFencedFence:g,codeFencedFenceInfo:f,codeFencedFenceMeta:m,codeFlowValue:R,codeIndented:l(y),codeText:l(H),codeTextData:R,data:R,definition:l(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:x,emphasis:l(),hardBreakEscape:l(P),hardBreakTrailing:l(P),htmlFlow:l(O),htmlFlowData:R,htmlText:l(N),htmlTextData:R,image:l(X),label:j,labelText:J,lineEnding:C,link:l(Q),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:V,resourceDestinationString:F,resourceTitleString:Y,resource:M,setextHeading:l(_),setextHeadingLineSequence:k,setextHeadingText:E,strong:l(),thematicBreak:l()}};nJ(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(Ee){let qe={type:"root",children:[]};const Xe={stack:[qe],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:u,data:n},et=[];let re=-1;for(;++re<Ee.length;)if(Ee[re][1].type==="listOrdered"||Ee[re][1].type==="listUnordered")if(Ee[re][0]==="enter")et.push(re);else{const $=et.pop();re=i(Ee,$,re)}for(re=-1;++re<Ee.length;){const $=e[Ee[re][0]];tJ.call($,Ee[re][1].type)&&$[Ee[re][1].type].call(Object.assign({sliceSerialize:Ee[re][2].sliceSerialize},Xe),Ee[re][1])}if(Xe.tokenStack.length>0){const $=Xe.tokenStack[Xe.tokenStack.length-1];($[1]||yF).call(Xe,void 0,$[0])}for(qe.position={start:Tu(Ee.length>0?Ee[0][1].start:{line:1,column:1,offset:0}),end:Tu(Ee.length>0?Ee[Ee.length-2][1].end:{line:1,column:1,offset:0})},re=-1;++re<e.transforms.length;)qe=e.transforms[re](qe)||qe;return qe}function i(Ee,qe,Xe){let et=qe-1,re=-1,$=!1,G,ue,Ne,De;for(;++et<=Xe;){const Ve=Ee[et];switch(Ve[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ve[0]==="enter"?re++:re--,De=void 0;break}case"lineEndingBlank":{Ve[0]==="enter"&&(G&&!De&&!re&&!Ne&&(Ne=et),De=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:De=void 0}if(!re&&Ve[0]==="enter"&&Ve[1].type==="listItemPrefix"||re===-1&&Ve[0]==="exit"&&(Ve[1].type==="listUnordered"||Ve[1].type==="listOrdered")){if(G){let Ft=et;for(ue=void 0;Ft--;){const It=Ee[Ft];if(It[1].type==="lineEnding"||It[1].type==="lineEndingBlank"){if(It[0]==="exit")continue;ue&&(Ee[ue][1].type="lineEndingBlank",$=!0),It[1].type="lineEnding",ue=Ft}else if(!(It[1].type==="linePrefix"||It[1].type==="blockQuotePrefix"||It[1].type==="blockQuotePrefixWhitespace"||It[1].type==="blockQuoteMarker"||It[1].type==="listItemIndent"))break}Ne&&(!ue||Ne<ue)&&(G._spread=!0),G.end=Object.assign({},ue?Ee[ue][1].start:Ve[1].end),Ee.splice(ue||et,0,["exit",G,Ve[2]]),et++,Xe++}if(Ve[1].type==="listItemPrefix"){const Ft={type:"listItem",_spread:!1,start:Object.assign({},Ve[1].start),end:void 0};G=Ft,Ee.splice(et,0,["enter",Ft,Ve[2]]),et++,Xe++,Ne=void 0,De=!0}}}return Ee[qe][1]._spread=$,Xe}function s(Ee,qe){return Xe;function Xe(et){a.call(this,Ee(et),et),qe&&qe.call(this,et)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Ee,qe,Xe){this.stack[this.stack.length-1].children.push(Ee),this.stack.push(Ee),this.tokenStack.push([qe,Xe||void 0]),Ee.position={start:Tu(qe.start),end:void 0}}function l(Ee){return qe;function qe(Xe){Ee&&Ee.call(this,Xe),c.call(this,Xe)}}function c(Ee,qe){const Xe=this.stack.pop(),et=this.tokenStack.pop();if(et)et[0].type!==Ee.type&&(qe?qe.call(this,Ee,et[0]):(et[1]||yF).call(this,Ee,et[0]));else throw new Error("Cannot close `"+Ee.type+"` ("+s2({start:Ee.start,end:Ee.end})+"): its not open");Xe.position.end=Tu(Ee.end)}function u(){return kPe(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function d(Ee){if(this.data.expectingFirstListItemValue){const qe=this.stack[this.stack.length-2];qe.start=Number.parseInt(this.sliceSerialize(Ee),10),this.data.expectingFirstListItemValue=void 0}}function f(){const Ee=this.resume(),qe=this.stack[this.stack.length-1];qe.lang=Ee}function m(){const Ee=this.resume(),qe=this.stack[this.stack.length-1];qe.meta=Ee}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function b(){const Ee=this.resume(),qe=this.stack[this.stack.length-1];qe.value=Ee.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const Ee=this.resume(),qe=this.stack[this.stack.length-1];qe.value=Ee.replace(/(\r?\n|\r)$/g,"")}function v(Ee){const qe=this.resume(),Xe=this.stack[this.stack.length-1];Xe.label=qe,Xe.identifier=Am(this.sliceSerialize(Ee)).toLowerCase()}function x(){const Ee=this.resume(),qe=this.stack[this.stack.length-1];qe.title=Ee}function w(){const Ee=this.resume(),qe=this.stack[this.stack.length-1];qe.url=Ee}function S(Ee){const qe=this.stack[this.stack.length-1];if(!qe.depth){const Xe=this.sliceSerialize(Ee).length;qe.depth=Xe}}function E(){this.data.setextHeadingSlurpLineEnding=!0}function k(Ee){const qe=this.stack[this.stack.length-1];qe.depth=this.sliceSerialize(Ee).codePointAt(0)===61?1:2}function _(){this.data.setextHeadingSlurpLineEnding=void 0}function L(Ee){const Xe=this.stack[this.stack.length-1].children;let et=Xe[Xe.length-1];(!et||et.type!=="text")&&(et=Fe(),et.position={start:Tu(Ee.start),end:void 0},Xe.push(et)),this.stack.push(et)}function R(Ee){const qe=this.stack.pop();qe.value+=this.sliceSerialize(Ee),qe.position.end=Tu(Ee.end)}function C(Ee){const qe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Xe=qe.children[qe.children.length-1];Xe.position.end=Tu(Ee.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(qe.type)&&(L.call(this,Ee),R.call(this,Ee))}function P(){this.data.atHardBreak=!0}function O(){const Ee=this.resume(),qe=this.stack[this.stack.length-1];qe.value=Ee}function N(){const Ee=this.resume(),qe=this.stack[this.stack.length-1];qe.value=Ee}function H(){const Ee=this.resume(),qe=this.stack[this.stack.length-1];qe.value=Ee}function Q(){const Ee=this.stack[this.stack.length-1];if(this.data.inReference){const qe=this.data.referenceType||"shortcut";Ee.type+="Reference",Ee.referenceType=qe,delete Ee.url,delete Ee.title}else delete Ee.identifier,delete Ee.label;this.data.referenceType=void 0}function X(){const Ee=this.stack[this.stack.length-1];if(this.data.inReference){const qe=this.data.referenceType||"shortcut";Ee.type+="Reference",Ee.referenceType=qe,delete Ee.url,delete Ee.title}else delete Ee.identifier,delete Ee.label;this.data.referenceType=void 0}function J(Ee){const qe=this.sliceSerialize(Ee),Xe=this.stack[this.stack.length-2];Xe.label=ENe(qe),Xe.identifier=Am(qe).toLowerCase()}function j(){const Ee=this.stack[this.stack.length-1],qe=this.resume(),Xe=this.stack[this.stack.length-1];if(this.data.inReference=!0,Xe.type==="link"){const et=Ee.children;Xe.children=et}else Xe.alt=qe}function F(){const Ee=this.resume(),qe=this.stack[this.stack.length-1];qe.url=Ee}function Y(){const Ee=this.resume(),qe=this.stack[this.stack.length-1];qe.title=Ee}function M(){this.data.inReference=void 0}function D(){this.data.referenceType="collapsed"}function V(Ee){const qe=this.resume(),Xe=this.stack[this.stack.length-1];Xe.label=qe,Xe.identifier=Am(this.sliceSerialize(Ee)).toLowerCase(),this.data.referenceType="full"}function W(Ee){this.data.characterReferenceType=Ee.type}function te(Ee){const qe=this.sliceSerialize(Ee),Xe=this.data.characterReferenceType;let et;Xe?(et=WZ(qe,Xe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):et=ZR(qe);const re=this.stack[this.stack.length-1];re.value+=et}function ee(Ee){const qe=this.stack.pop();qe.position.end=Tu(Ee.end)}function K(Ee){R.call(this,Ee);const qe=this.stack[this.stack.length-1];qe.url=this.sliceSerialize(Ee)}function he(Ee){R.call(this,Ee);const qe=this.stack[this.stack.length-1];qe.url="mailto:"+this.sliceSerialize(Ee)}function be(){return{type:"blockquote",children:[]}}function Se(){return{type:"code",lang:null,meta:null,value:""}}function Ce(){return{type:"inlineCode",value:""}}function ke(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function q(){return{type:"emphasis",children:[]}}function pe(){return{type:"heading",depth:0,children:[]}}function ne(){return{type:"break"}}function oe(){return{type:"html",value:""}}function ae(){return{type:"image",title:null,url:"",alt:null}}function me(){return{type:"link",title:null,url:"",children:[]}}function Pe(Ee){return{type:"list",ordered:Ee.type==="listOrdered",start:null,spread:Ee._spread,children:[]}}function Re(Ee){return{type:"listItem",spread:Ee._spread,checked:null,children:[]}}function we(){return{type:"paragraph",children:[]}}function $e(){return{type:"strong",children:[]}}function Fe(){return{type:"text",value:""}}function Be(){return{type:"thematicBreak"}}}function Tu(t){return{line:t.line,column:t.column,offset:t.offset}}function nJ(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?nJ(t,r):ANe(t,r)}}function ANe(t,e){let n;for(n in e)if(tJ.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function yF(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+s2({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+s2({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+s2({start:e.start,end:e.end})+") is still open")}function PNe(t){const e=this;e.parser=n;function n(r){return CNe(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function NNe(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function LNe(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function RNe(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function INe(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function ONe(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const vF=DNe(/[\dA-Za-z]/);function DNe(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Gg(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&vF(t.charCodeAt(n+1))&&vF(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function MNe(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Gg(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function jNe(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function FNe(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function rJ(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function BNe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return rJ(t,e);const i={src:Gg(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function UNe(t,e){const n={src:Gg(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function $Ne(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function HNe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return rJ(t,e);const i={href:Gg(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function zNe(t,e){const n={href:Gg(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function VNe(t,e,n){const r=t.all(e),i=n?WNe(n):iJ(e),s={},o=[];if(typeof e.checked=="boolean"){const u=r[0];let h;u&&u.type==="element"&&u.tagName==="p"?h=u:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const u=r[a];(i||a!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,c),t.applyData(e,c)}function WNe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=iJ(n[r])}return e}function iJ(t){const e=t.spread;return e??t.children.length>1}function GNe(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function qNe(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function KNe(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function YNe(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const sJ=aJ("end"),oJ=aJ("start");function aJ(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function XNe(t){const e=oJ(t),n=sJ(t);if(e&&n)return{start:e,end:n}}function ZNe(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=oJ(e.children[1]),l=sJ(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function JNe(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<a;){const h=e.children[l],d={},f=o?o[l]:void 0;f&&(d.align=f);let m={type:"element",tagName:s,properties:d,children:[]};h&&(m.children=t.all(h),t.patch(h,m),m=t.applyData(h,m)),c.push(m)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,u),t.applyData(e,u)}function QNe(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const xF=9,_F=32;function eLe(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(wF(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(wF(e.slice(i),i>0,!1)),s.join("")}function wF(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===xF||s===_F;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===xF||s===_F;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function tLe(t,e){const n={type:"text",value:eLe(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function nLe(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const rLe={blockquote:NNe,break:LNe,code:RNe,delete:INe,emphasis:ONe,footnoteReference:MNe,heading:jNe,html:FNe,imageReference:BNe,image:UNe,inlineCode:$Ne,linkReference:HNe,link:zNe,listItem:VNe,list:GNe,paragraph:qNe,root:KNe,strong:YNe,table:ZNe,tableCell:QNe,tableRow:JNe,text:tLe,thematicBreak:nLe,toml:I_,yaml:I_,definition:I_,footnoteDefinition:I_};function I_(){}function iLe(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function sLe(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function oLe(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||iLe,r=t.options.footnoteBackLabel||sLe,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const u=t.all(c),h=String(c.identifier).toUpperCase(),d=Gg(h.toLowerCase());let f=0;const m=[],g=t.footnoteCounts.get(h);for(;g!==void 0&&++f<=g;){m.length>0&&m.push({type:"text",value:" "});let v=typeof n=="string"?n:n(l,f);typeof v=="string"&&(v={type:"text",value:v}),m.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+d+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,f),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const b=u[u.length-1];if(b&&b.type==="element"&&b.tagName==="p"){const v=b.children[b.children.length-1];v&&v.type==="text"?v.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...m)}else u.push(...m);const y={type:"element",tagName:"li",properties:{id:e+"fn-"+d},children:t.wrap(u,!0)};t.patch(c,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...mf(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const BP={}.hasOwnProperty,aLe={};function lLe(t,e){const n=e||aLe,r=new Map,i=new Map,s=new Map,o={...rLe,...n.handlers},a={all:c,applyData:uLe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:cLe,wrap:dLe};return $f(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const h=u.type==="definition"?r:i,d=String(u.identifier).toUpperCase();h.has(d)||h.set(d,u)}}),a;function l(u,h){const d=u.type,f=a.handlers[d];if(BP.call(a.handlers,d)&&f)return f(a,u,h);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in u){const{children:g,...b}=u,y=mf(b);return y.children=a.all(u),y}return mf(u)}return(a.options.unknownHandler||hLe)(a,u,h)}function c(u){const h=[];if("children"in u){const d=u.children;let f=-1;for(;++f<d.length;){const m=a.one(d[f],u);if(m){if(f&&d[f-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=SF(m.value)),!Array.isArray(m)&&m.type==="element")){const g=m.children[0];g&&g.type==="text"&&(g.value=SF(g.value))}Array.isArray(m)?h.push(...m):h.push(m)}}}return h}}function cLe(t,e){t.position&&(e.position=XNe(t))}function uLe(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,mf(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function hLe(t,e){const n=e.data||{},r="value"in e&&!(BP.call(n,"hProperties")||BP.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function dLe(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function SF(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function EF(t,e){const n=lLe(t,e),r=n.one(t,void 0),i=oLe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function fLe(t,e){return t&&"run"in t?async function(n,r){const i=EF(n,{file:r,...e});await t.run(i,r)}:function(n,r){return EF(n,{file:r,...t||e})}}function kF(t){if(t)throw t}var o2=Object.prototype.hasOwnProperty,lJ=Object.prototype.toString,CF=Object.defineProperty,TF=Object.getOwnPropertyDescriptor,AF=function(e){return typeof Array.isArray=="function"?Array.isArray(e):lJ.call(e)==="[object Array]"},PF=function(e){if(!e||lJ.call(e)!=="[object Object]")return!1;var n=o2.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&o2.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||o2.call(e,i)},NF=function(e,n){CF&&n.name==="__proto__"?CF(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},LF=function(e,n){if(n==="__proto__")if(o2.call(e,n)){if(TF)return TF(e,n).value}else return;return e[n]},pLe=function t(){var e,n,r,i,s,o,a=arguments[0],l=1,c=arguments.length,u=!1;for(typeof a=="boolean"&&(u=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(e=arguments[l],e!=null)for(n in e)r=LF(a,n),i=LF(e,n),a!==i&&(u&&i&&(PF(i)||(s=AF(i)))?(s?(s=!1,o=r&&AF(r)?r:[]):o=r&&PF(r)?r:{},NF(a,{name:n,newValue:t(u,o,i)})):typeof i<"u"&&NF(a,{name:n,newValue:i}));return a};const bT=_s(pLe);function UP(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function mLe(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...c){const u=t[++s];let h=-1;if(l){o(l);return}for(;++h<i.length;)(c[h]===null||c[h]===void 0)&&(c[h]=i[h]);i=c,u?gLe(u,a)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function gLe(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(c){const u=c;if(a&&n)throw u;return i(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const El={basename:bLe,dirname:yLe,extname:vLe,join:xLe,sep:"/"};function bLe(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Ev(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function yLe(t){if(Ev(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function vLe(t){Ev(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function xLe(...t){let e=-1,n;for(;++e<t.length;)Ev(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":_Le(n)}function _Le(t){Ev(t);const e=t.codePointAt(0)===47;let n=wLe(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function wLe(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function Ev(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const SLe={cwd:ELe};function ELe(){return"/"}function $P(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function kLe(t){if(typeof t=="string")t=new URL(t);else if(!$P(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return CLe(t)}function CLe(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const yT=["history","path","basename","stem","extname","dirname"];let TLe=class{constructor(e){let n;e?$P(e)?n={path:e}:typeof e=="string"||ALe(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":SLe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<yT.length;){const s=yT[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)yT.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?El.basename(this.path):void 0}set basename(e){xT(e,"basename"),vT(e,"basename"),this.path=El.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?El.dirname(this.path):void 0}set dirname(e){RF(this.basename,"dirname"),this.path=El.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?El.extname(this.path):void 0}set extname(e){if(vT(e,"extname"),RF(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=El.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){$P(e)&&(e=kLe(e)),xT(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?El.basename(this.path,this.extname):void 0}set stem(e){xT(e,"stem"),vT(e,"stem"),this.path=El.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new Bi(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}};function vT(t,e){if(t&&t.includes(El.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+El.sep+"`")}function xT(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function RF(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function ALe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const PLe=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},NLe={}.hasOwnProperty;class EI extends PLe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=mLe()}copy(){const e=new EI;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(bT(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(ST("data",this.frozen),this.namespace[e]=n,this):NLe.call(this.namespace,e)&&this.namespace[e]||void 0:e?(ST("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=O_(e),r=this.parser||this.Parser;return _T("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),_T("process",this.parser||this.Parser),wT("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=O_(e),l=r.parse(a);r.run(l,a,function(u,h,d){if(u||!h||!d)return c(u);const f=h,m=r.stringify(f,d);ILe(m)?d.value=m:d.result=m,c(u,d)});function c(u,h){u||!h?o(u):s?s(h):n(void 0,h)}}}processSync(e){let n=!1,r;return this.freeze(),_T("processSync",this.parser||this.Parser),wT("processSync",this.compiler||this.Compiler),this.process(e,i),OF("processSync","process",n),r;function i(s,o){n=!0,kF(s),r=o}}run(e,n,r){IF(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=O_(n);i.run(e,l,c);function c(u,h,d){const f=h||e;u?a(u):o?o(f):r(void 0,f,d)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),OF("runSync","run",r),i;function s(o,a){kF(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=O_(n),i=this.compiler||this.Compiler;return wT("stringify",i),IF(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(ST("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...h]=c;l(u,h)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=bT(!0,i.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const h=c[u];s(h)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let h=-1,d=-1;for(;++h<r.length;)if(r[h][0]===c){d=h;break}if(d===-1)r.push([c,...u]);else if(u.length>0){let[f,...m]=u;const g=r[d][1];UP(g)&&UP(f)&&(f=bT(!0,g,f)),r[d]=[c,f,...m]}}}}const LLe=new EI().freeze();function _T(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function wT(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function ST(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function IF(t){if(!UP(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function OF(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function O_(t){return RLe(t)?t:new TLe(t)}function RLe(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function ILe(t){return typeof t=="string"||OLe(t)}function OLe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const kl={basename:DLe,dirname:MLe,extname:jLe,join:FLe,sep:"/"};function DLe(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');kv(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function MLe(t){if(kv(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function jLe(t){kv(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function FLe(...t){let e=-1,n;for(;++e<t.length;)kv(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":BLe(n)}function BLe(t){kv(t);const e=t.codePointAt(0)===47;let n=ULe(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function ULe(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function kv(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const $Le={cwd:HLe};function HLe(){return"/"}function HP(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function zLe(t){if(typeof t=="string")t=new URL(t);else if(!HP(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return VLe(t)}function VLe(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const ET=["history","path","basename","stem","extname","dirname"];class WLe{constructor(e){let n;e?HP(e)?n={path:e}:typeof e=="string"||GLe(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":$Le.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<ET.length;){const s=ET[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)ET.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?kl.basename(this.path):void 0}set basename(e){CT(e,"basename"),kT(e,"basename"),this.path=kl.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?kl.dirname(this.path):void 0}set dirname(e){DF(this.basename,"dirname"),this.path=kl.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?kl.extname(this.path):void 0}set extname(e){if(kT(e,"extname"),DF(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=kl.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){HP(e)&&(e=zLe(e)),CT(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?kl.basename(this.path,this.extname):void 0}set stem(e){CT(e,"stem"),kT(e,"stem"),this.path=kl.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new Bi(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function kT(t,e){if(t&&t.includes(kl.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+kl.sep+"`")}function CT(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function DF(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function GLe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const qLe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",MF=[],jF={allowDangerousHtml:!0},KLe=/^(https?|ircs?|mailto|xmpp)$/i,YLe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function XLe(t){const e=ZLe(t),n=JLe(t);return QLe(e.runSync(e.parse(n),n),t)}function ZLe(t){const e=t.rehypePlugins||MF,n=t.remarkPlugins||MF,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...jF}:jF;return LLe().use(PNe).use(n).use(fLe,r).use(e)}function JLe(t){const e=t.children||"",n=new WLe;return typeof e=="string"&&(n.value=e),n}function QLe(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||eRe;for(const u of YLe)Object.hasOwn(e,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+qLe+u.id,void 0);return e.className&&(t={type:"element",tagName:"div",properties:{className:e.className},children:t.type==="root"?t.children:[t]}),$f(t,c),aPe(t,{Fragment:p.Fragment,components:i,ignoreInvalidStyle:!0,jsx:p.jsx,jsxs:p.jsxs,passKeys:!0,passNode:!0});function c(u,h,d){if(u.type==="raw"&&d&&typeof h=="number")return o?d.children.splice(h,1):d.children[h]={type:"text",value:u.value},h;if(u.type==="element"){let f;for(f in pT)if(Object.hasOwn(pT,f)&&Object.hasOwn(u.properties,f)){const m=u.properties[f],g=pT[f];(g===null||g.includes(u.tagName))&&(u.properties[f]=l(String(m||""),f,u))}}if(u.type==="element"){let f=n?!n.includes(u.tagName):s?s.includes(u.tagName):!1;if(!f&&r&&typeof h=="number"&&(f=!r(u,h,d)),f&&d&&typeof h=="number")return a&&u.children?d.children.splice(h,1,...u.children):d.children.splice(h,1),h}}}function eRe(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||KLe.test(t.slice(0,e))?t:""}const cJ=[{id:"abap",name:"ABAP",import:()=>ye(()=>import("./abap-DsBKuouk.js"),[])},{id:"actionscript-3",name:"ActionScript",import:()=>ye(()=>import("./actionscript-3-D_z4Izcz.js"),[])},{id:"ada",name:"Ada",import:()=>ye(()=>import("./ada-727ZlQH0.js"),[])},{id:"angular-html",name:"Angular HTML",import:()=>ye(()=>import("./angular-html-LfdN0zeE.js").then(t=>t.f),__vite__mapDeps([6,7,8,9]))},{id:"angular-ts",name:"Angular TypeScript",import:()=>ye(()=>import("./angular-ts-CKsD7JZE.js"),__vite__mapDeps([10,6,7,8,9,11]))},{id:"apache",name:"Apache Conf",import:()=>ye(()=>import("./apache-Dn00JSTd.js"),[])},{id:"apex",name:"Apex",import:()=>ye(()=>import("./apex-COJ4H7py.js"),[])},{id:"apl",name:"APL",import:()=>ye(()=>import("./apl-BBq3IX1j.js"),__vite__mapDeps([12,7,8,9,13,14,15]))},{id:"applescript",name:"AppleScript",import:()=>ye(()=>import("./applescript-Bu5BbsvL.js"),[])},{id:"ara",name:"Ara",import:()=>ye(()=>import("./ara-7O62HKoU.js"),[])},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:()=>ye(()=>import("./asciidoc-BPT9niGB.js"),[])},{id:"asm",name:"Assembly",import:()=>ye(()=>import("./asm-Dhn9LcZ4.js"),[])},{id:"astro",name:"Astro",import:()=>ye(()=>import("./astro-CqkE3fuf.js"),__vite__mapDeps([16,15,8,17,9,18]))},{id:"awk",name:"AWK",import:()=>ye(()=>import("./awk-eg146-Ew.js"),[])},{id:"ballerina",name:"Ballerina",import:()=>ye(()=>import("./ballerina-Du268qiB.js"),[])},{id:"bat",name:"Batch File",aliases:["batch"],import:()=>ye(()=>import("./bat-fje9CFhw.js"),[])},{id:"beancount",name:"Beancount",import:()=>ye(()=>import("./beancount-BwXTMy5W.js"),[])},{id:"berry",name:"Berry",aliases:["be"],import:()=>ye(()=>import("./berry-3xVqZejG.js"),[])},{id:"bibtex",name:"BibTeX",import:()=>ye(()=>import("./bibtex-xW4inM5L.js"),[])},{id:"bicep",name:"Bicep",import:()=>ye(()=>import("./bicep-DHo0CJ0O.js"),[])},{id:"blade",name:"Blade",import:()=>ye(()=>import("./blade-a8OxSdnT.js"),__vite__mapDeps([19,7,8,9,13,14,20,15]))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:()=>ye(()=>import("./bsl-Dgyn0ogV.js"),__vite__mapDeps([21,22]))},{id:"c",name:"C",import:()=>ye(()=>import("./c-C3t2pwGQ.js"),[])},{id:"cadence",name:"Cadence",aliases:["cdc"],import:()=>ye(()=>import("./cadence-DNquZEk8.js"),[])},{id:"cairo",name:"Cairo",import:()=>ye(()=>import("./cairo--RitsXJZ.js"),__vite__mapDeps([23,24]))},{id:"clarity",name:"Clarity",import:()=>ye(()=>import("./clarity-BHOwM8T6.js"),[])},{id:"clojure",name:"Clojure",aliases:["clj"],import:()=>ye(()=>import("./clojure-DxSadP1t.js"),[])},{id:"cmake",name:"CMake",import:()=>ye(()=>import("./cmake-DbXoA79R.js"),[])},{id:"cobol",name:"COBOL",import:()=>ye(()=>import("./cobol-PTqiYgYu.js"),__vite__mapDeps([25,7,8,9,14]))},{id:"codeowners",name:"CODEOWNERS",import:()=>ye(()=>import("./codeowners-Bp6g37R7.js"),[])},{id:"codeql",name:"CodeQL",aliases:["ql"],import:()=>ye(()=>import("./codeql-sacFqUAJ.js"),[])},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:()=>ye(()=>import("./coffee-dyiR41kL.js"),__vite__mapDeps([26,8]))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:()=>ye(()=>import("./common-lisp-C7gG9l05.js"),[])},{id:"coq",name:"Coq",import:()=>ye(()=>import("./coq-Dsg_Bt_b.js"),[])},{id:"cpp",name:"C++",aliases:["c++"],import:()=>ye(()=>import("./cpp-BksuvNSY.js"),__vite__mapDeps([27,28,29,30,20]))},{id:"crystal",name:"Crystal",import:()=>ye(()=>import("./crystal-DtDmRg-F.js"),__vite__mapDeps([31,7,8,9,20,30,32]))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:()=>ye(()=>import("./csharp-D9R-vmeu.js"),[])},{id:"css",name:"CSS",import:()=>ye(()=>import("./css-BPhBrDlE.js"),[])},{id:"csv",name:"CSV",import:()=>ye(()=>import("./csv-B0qRVHPH.js"),[])},{id:"cue",name:"CUE",import:()=>ye(()=>import("./cue-DtFQj3wx.js"),[])},{id:"cypher",name:"Cypher",aliases:["cql"],import:()=>ye(()=>import("./cypher-m2LEI-9-.js"),[])},{id:"d",name:"D",import:()=>ye(()=>import("./d-BoXegm-a.js"),[])},{id:"dart",name:"Dart",import:()=>ye(()=>import("./dart-B9wLZaAG.js"),[])},{id:"dax",name:"DAX",import:()=>ye(()=>import("./dax-ClGRhx96.js"),[])},{id:"desktop",name:"Desktop",import:()=>ye(()=>import("./desktop-DEIpsLCJ.js"),[])},{id:"diff",name:"Diff",import:()=>ye(()=>import("./diff-BgYniUM_.js"),[])},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:()=>ye(()=>import("./docker-COcR7UxN.js"),[])},{id:"dotenv",name:"dotEnv",import:()=>ye(()=>import("./dotenv-BjQB5zDj.js"),[])},{id:"dream-maker",name:"Dream Maker",import:()=>ye(()=>import("./dream-maker-C-nORZOA.js"),[])},{id:"edge",name:"Edge",import:()=>ye(()=>import("./edge-D5gP-w-T.js"),__vite__mapDeps([33,17,7,8,9,34]))},{id:"elixir",name:"Elixir",import:()=>ye(()=>import("./elixir-CLiX3zqd.js"),__vite__mapDeps([35,7,8,9]))},{id:"elm",name:"Elm",import:()=>ye(()=>import("./elm-CmHSxxaM.js"),__vite__mapDeps([36,29,30]))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:()=>ye(()=>import("./emacs-lisp-BX77sIaO.js"),[])},{id:"erb",name:"ERB",import:()=>ye(()=>import("./erb-BYTLMnw6.js"),__vite__mapDeps([37,7,8,9,38,39,13,14,20,40,17,41,42,27,28,29,30,32,43,44]))},{id:"erlang",name:"Erlang",aliases:["erl"],import:()=>ye(()=>import("./erlang-B-DoSBHF.js"),[])},{id:"fennel",name:"Fennel",import:()=>ye(()=>import("./fennel-bCA53EVm.js"),[])},{id:"fish",name:"Fish",import:()=>ye(()=>import("./fish-w-ucz2PV.js"),[])},{id:"fluent",name:"Fluent",aliases:["ftl"],import:()=>ye(()=>import("./fluent-Dayu4EKP.js"),[])},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:()=>ye(()=>import("./fortran-fixed-form-TqA4NnZg.js"),__vite__mapDeps([45,46]))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:()=>ye(()=>import("./fortran-free-form-DKXYxT9g.js"),[])},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:()=>ye(()=>import("./fsharp-XplgxFYe.js"),__vite__mapDeps([47,48]))},{id:"gdresource",name:"GDResource",import:()=>ye(()=>import("./gdresource-BHYsBjWJ.js"),__vite__mapDeps([49,50,51]))},{id:"gdscript",name:"GDScript",import:()=>ye(()=>import("./gdscript-DfxzS6Rs.js"),[])},{id:"gdshader",name:"GDShader",import:()=>ye(()=>import("./gdshader-SKMF96pI.js"),[])},{id:"genie",name:"Genie",import:()=>ye(()=>import("./genie-ajMbGru0.js"),[])},{id:"gherkin",name:"Gherkin",import:()=>ye(()=>import("./gherkin--30QC5Em.js"),[])},{id:"git-commit",name:"Git Commit Message",import:()=>ye(()=>import("./git-commit-i4q6IMui.js"),__vite__mapDeps([52,53]))},{id:"git-rebase",name:"Git Rebase Message",import:()=>ye(()=>import("./git-rebase-B-v9cOL2.js"),__vite__mapDeps([54,32]))},{id:"gleam",name:"Gleam",import:()=>ye(()=>import("./gleam-B430Bg39.js"),[])},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:()=>ye(()=>import("./glimmer-js-D-cwc0-E.js"),__vite__mapDeps([55,8,17,9,7]))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:()=>ye(()=>import("./glimmer-ts-pgjy16dm.js"),__vite__mapDeps([56,17,9,8,7]))},{id:"glsl",name:"GLSL",import:()=>ye(()=>import("./glsl-DBO2IWDn.js"),__vite__mapDeps([29,30]))},{id:"gnuplot",name:"Gnuplot",import:()=>ye(()=>import("./gnuplot-CM8KxXT1.js"),[])},{id:"go",name:"Go",import:()=>ye(()=>import("./go-B1SYOhNW.js"),[])},{id:"graphql",name:"GraphQL",aliases:["gql"],import:()=>ye(()=>import("./graphql-cDcHW_If.js"),__vite__mapDeps([40,8,17,41,42]))},{id:"groovy",name:"Groovy",import:()=>ye(()=>import("./groovy-DkBy-JyN.js"),[])},{id:"hack",name:"Hack",import:()=>ye(()=>import("./hack-D1yCygmZ.js"),__vite__mapDeps([57,7,8,9,20]))},{id:"haml",name:"Ruby Haml",import:()=>ye(()=>import("./haml-B2EZWmdv.js"),__vite__mapDeps([39,8,9]))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:()=>ye(()=>import("./handlebars-BQGss363.js"),__vite__mapDeps([58,7,8,9,44]))},{id:"haskell",name:"Haskell",aliases:["hs"],import:()=>ye(()=>import("./haskell-BILxekzW.js"),[])},{id:"haxe",name:"Haxe",import:()=>ye(()=>import("./haxe-C5wWYbrZ.js"),[])},{id:"hcl",name:"HashiCorp HCL",import:()=>ye(()=>import("./hcl-HzYwdGDm.js"),[])},{id:"hjson",name:"Hjson",import:()=>ye(()=>import("./hjson-T-Tgc4AT.js"),[])},{id:"hlsl",name:"HLSL",import:()=>ye(()=>import("./hlsl-ifBTmRxC.js"),[])},{id:"html",name:"HTML",import:()=>ye(()=>import("./html-C2L_23MC.js"),__vite__mapDeps([7,8,9]))},{id:"html-derivative",name:"HTML (Derivative)",import:()=>ye(()=>import("./html-derivative-CSfWNPLT.js"),__vite__mapDeps([34,7,8,9]))},{id:"http",name:"HTTP",import:()=>ye(()=>import("./http-FRrOvY1W.js"),__vite__mapDeps([59,32,15,13,14,40,8,17,41,42]))},{id:"hxml",name:"HXML",import:()=>ye(()=>import("./hxml-TIA70rKU.js"),__vite__mapDeps([60,61]))},{id:"hy",name:"Hy",import:()=>ye(()=>import("./hy-BMj5Y0dO.js"),[])},{id:"imba",name:"Imba",import:()=>ye(()=>import("./imba-bv_oIlVt.js"),__vite__mapDeps([62,17]))},{id:"ini",name:"INI",aliases:["properties"],import:()=>ye(()=>import("./ini-BjABl1g7.js"),[])},{id:"java",name:"Java",import:()=>ye(()=>import("./java-xI-RfyKK.js"),[])},{id:"javascript",name:"JavaScript",aliases:["js"],import:()=>ye(()=>import("./javascript-ySlJ1b_l.js"),[])},{id:"jinja",name:"Jinja",import:()=>ye(()=>import("./jinja-DGy0s7-h.js"),__vite__mapDeps([63,7,8,9]))},{id:"jison",name:"Jison",import:()=>ye(()=>import("./jison-BqZprYcd.js"),__vite__mapDeps([64,8]))},{id:"json",name:"JSON",import:()=>ye(()=>import("./json-BQoSv7ci.js"),[])},{id:"json5",name:"JSON5",import:()=>ye(()=>import("./json5-w8dY5SsB.js"),[])},{id:"jsonc",name:"JSON with Comments",import:()=>ye(()=>import("./jsonc-TU54ms6u.js"),[])},{id:"jsonl",name:"JSON Lines",import:()=>ye(()=>import("./jsonl-DREVFZK8.js"),[])},{id:"jsonnet",name:"Jsonnet",import:()=>ye(()=>import("./jsonnet-BfivnA6A.js"),[])},{id:"jssm",name:"JSSM",aliases:["fsl"],import:()=>ye(()=>import("./jssm-P4WzXJd0.js"),[])},{id:"jsx",name:"JSX",import:()=>ye(()=>import("./jsx-BAng5TT0.js"),[])},{id:"julia",name:"Julia",aliases:["jl"],import:()=>ye(()=>import("./julia-BBuGR-5E.js"),__vite__mapDeps([65,27,28,29,30,20,24,8,66]))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:()=>ye(()=>import("./kotlin-B5lbUyaz.js"),[])},{id:"kusto",name:"Kusto",aliases:["kql"],import:()=>ye(()=>import("./kusto-mebxcVVE.js"),[])},{id:"latex",name:"LaTeX",import:()=>ye(()=>import("./latex-C-cWTeAZ.js"),__vite__mapDeps([67,68,66]))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:()=>ye(()=>import("./lean-XBlWyCtg.js"),[])},{id:"less",name:"Less",import:()=>ye(()=>import("./less-BfCpw3nA.js"),[])},{id:"liquid",name:"Liquid",import:()=>ye(()=>import("./liquid-D3W5UaiH.js"),__vite__mapDeps([69,7,8,9,15]))},{id:"log",name:"Log file",import:()=>ye(()=>import("./log-Cc5clBb7.js"),[])},{id:"logo",name:"Logo",import:()=>ye(()=>import("./logo-IuBKFhSY.js"),[])},{id:"lua",name:"Lua",import:()=>ye(()=>import("./lua-CvWAzNxB.js"),__vite__mapDeps([43,30]))},{id:"luau",name:"Luau",import:()=>ye(()=>import("./luau-Du5NY7AG.js"),[])},{id:"make",name:"Makefile",aliases:["makefile"],import:()=>ye(()=>import("./make-Bvotw-X0.js"),[])},{id:"markdown",name:"Markdown",aliases:["md"],import:()=>ye(()=>import("./markdown-UIAJJxZW.js"),[])},{id:"marko",name:"Marko",import:()=>ye(()=>import("./marko-z0MBrx5-.js"),__vite__mapDeps([70,9,71,11,8]))},{id:"matlab",name:"MATLAB",import:()=>ye(()=>import("./matlab-D9-PGadD.js"),[])},{id:"mdc",name:"MDC",import:()=>ye(()=>import("./mdc-DB_EDNY_.js"),__vite__mapDeps([72,48,44,34,7,8,9]))},{id:"mdx",name:"MDX",import:()=>ye(()=>import("./mdx-sdHcTMYB.js"),[])},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:()=>ye(()=>import("./mermaid-Ci6OQyBP.js"),[])},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:()=>ye(()=>import("./mipsasm-BC5c_5Pe.js"),[])},{id:"mojo",name:"Mojo",import:()=>ye(()=>import("./mojo-Tz6hzZYG.js"),[])},{id:"move",name:"Move",import:()=>ye(()=>import("./move-DB_GagMm.js"),[])},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:()=>ye(()=>import("./narrat-DLbgOhZU.js"),[])},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:()=>ye(()=>import("./nextflow-B0XVJmRM.js"),[])},{id:"nginx",name:"Nginx",import:()=>ye(()=>import("./nginx-D_VnBJ67.js"),__vite__mapDeps([73,43,30]))},{id:"nim",name:"Nim",import:()=>ye(()=>import("./nim-ZlGxZxc3.js"),__vite__mapDeps([74,30,7,8,9,13,14,29,48]))},{id:"nix",name:"Nix",import:()=>ye(()=>import("./nix-shcSOmrb.js"),[])},{id:"nushell",name:"nushell",aliases:["nu"],import:()=>ye(()=>import("./nushell-D4Tzg5kh.js"),[])},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:()=>ye(()=>import("./objective-c-Deuh7S70.js"),[])},{id:"objective-cpp",name:"Objective-C++",import:()=>ye(()=>import("./objective-cpp-BUEGK8hf.js"),[])},{id:"ocaml",name:"OCaml",import:()=>ye(()=>import("./ocaml-BNioltXt.js"),[])},{id:"pascal",name:"Pascal",import:()=>ye(()=>import("./pascal-JqZropPD.js"),[])},{id:"perl",name:"Perl",import:()=>ye(()=>import("./perl-CHQXSrWU.js"),__vite__mapDeps([75,7,8,9,13,14,20]))},{id:"php",name:"PHP",import:()=>ye(()=>import("./php-B5ebYQev.js"),__vite__mapDeps([76,7,8,9,13,14,20,15]))},{id:"plsql",name:"PL/SQL",import:()=>ye(()=>import("./plsql-LKU2TuZ1.js"),[])},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:()=>ye(()=>import("./po-BFLt1xDp.js"),[])},{id:"polar",name:"Polar",import:()=>ye(()=>import("./polar-DKykz6zU.js"),[])},{id:"postcss",name:"PostCSS",import:()=>ye(()=>import("./postcss-B3ZDOciz.js"),[])},{id:"powerquery",name:"PowerQuery",import:()=>ye(()=>import("./powerquery-CSHBycmS.js"),[])},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:()=>ye(()=>import("./powershell-BIEUsx6d.js"),[])},{id:"prisma",name:"Prisma",import:()=>ye(()=>import("./prisma-B48N-Iqd.js"),[])},{id:"prolog",name:"Prolog",import:()=>ye(()=>import("./prolog-BY-TUvya.js"),[])},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:()=>ye(()=>import("./proto-zocC4JxJ.js"),[])},{id:"pug",name:"Pug",aliases:["jade"],import:()=>ye(()=>import("./pug-CM9l7STV.js"),__vite__mapDeps([77,8,9,7]))},{id:"puppet",name:"Puppet",import:()=>ye(()=>import("./puppet-Cza_XSSt.js"),[])},{id:"purescript",name:"PureScript",import:()=>ye(()=>import("./purescript-Bg-kzb6g.js"),[])},{id:"python",name:"Python",aliases:["py"],import:()=>ye(()=>import("./python-DhUJRlN_.js"),[])},{id:"qml",name:"QML",import:()=>ye(()=>import("./qml-D8XfuvdV.js"),__vite__mapDeps([78,8]))},{id:"qmldir",name:"QML Directory",import:()=>ye(()=>import("./qmldir-C8lEn-DE.js"),[])},{id:"qss",name:"Qt Style Sheets",import:()=>ye(()=>import("./qss-DhMKtDLN.js"),[])},{id:"r",name:"R",import:()=>ye(()=>import("./r-CwjWoCRV.js"),[])},{id:"racket",name:"Racket",import:()=>ye(()=>import("./racket-CzouJOBO.js"),[])},{id:"raku",name:"Raku",aliases:["perl6"],import:()=>ye(()=>import("./raku-B1bQXN8T.js"),[])},{id:"razor",name:"ASP.NET Razor",import:()=>ye(()=>import("./razor-CNLDkMZG.js"),__vite__mapDeps([79,7,8,9,80]))},{id:"reg",name:"Windows Registry Script",import:()=>ye(()=>import("./reg-5LuOXUq_.js"),[])},{id:"regexp",name:"RegExp",aliases:["regex"],import:()=>ye(()=>import("./regexp-DWJ3fJO_.js"),[])},{id:"rel",name:"Rel",import:()=>ye(()=>import("./rel-DJlmqQ1C.js"),[])},{id:"riscv",name:"RISC-V",import:()=>ye(()=>import("./riscv-QhoSD0DR.js"),[])},{id:"rst",name:"reStructuredText",import:()=>ye(()=>import("./rst-4NLicBqY.js"),__vite__mapDeps([81,34,7,8,9,27,28,29,30,20,24,32,44,82,38,39,13,14,40,17,41,42,43]))},{id:"ruby",name:"Ruby",aliases:["rb"],import:()=>ye(()=>import("./ruby-DeZ3UC14.js"),__vite__mapDeps([38,7,8,9,39,13,14,20,40,17,41,42,27,28,29,30,32,43,44]))},{id:"rust",name:"Rust",aliases:["rs"],import:()=>ye(()=>import("./rust-Be6lgOlo.js"),[])},{id:"sas",name:"SAS",import:()=>ye(()=>import("./sas-BmTFh92c.js"),__vite__mapDeps([83,20]))},{id:"sass",name:"Sass",import:()=>ye(()=>import("./sass-BJ4Li9vH.js"),[])},{id:"scala",name:"Scala",import:()=>ye(()=>import("./scala-DQVVAn-B.js"),[])},{id:"scheme",name:"Scheme",import:()=>ye(()=>import("./scheme-BJGe-b2p.js"),[])},{id:"scss",name:"SCSS",import:()=>ye(()=>import("./scss-C31hgJw-.js"),__vite__mapDeps([11,9]))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:()=>ye(()=>import("./sdbl-BLhTXw86.js"),[])},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:()=>ye(()=>import("./shaderlab-B7qAK45m.js"),__vite__mapDeps([84,85]))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:()=>ye(()=>import("./shellscript-atvbtKCR.js"),[])},{id:"shellsession",name:"Shell Session",aliases:["console"],import:()=>ye(()=>import("./shellsession-C_rIy8kc.js"),__vite__mapDeps([86,32]))},{id:"smalltalk",name:"Smalltalk",import:()=>ye(()=>import("./smalltalk-DkLiglaE.js"),[])},{id:"solidity",name:"Solidity",import:()=>ye(()=>import("./solidity-C1w2a3ep.js"),[])},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:()=>ye(()=>import("./soy-C-lX7w71.js"),__vite__mapDeps([87,7,8,9]))},{id:"sparql",name:"SPARQL",import:()=>ye(()=>import("./sparql-bYkjHRlG.js"),__vite__mapDeps([88,89]))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:()=>ye(()=>import("./splunk-Cf8iN4DR.js"),[])},{id:"sql",name:"SQL",import:()=>ye(()=>import("./sql-COK4E0Yg.js"),[])},{id:"ssh-config",name:"SSH Config",import:()=>ye(()=>import("./ssh-config-BknIz3MU.js"),[])},{id:"stata",name:"Stata",import:()=>ye(()=>import("./stata-DorPZHa4.js"),__vite__mapDeps([90,20]))},{id:"stylus",name:"Stylus",aliases:["styl"],import:()=>ye(()=>import("./stylus-BeQkCIfX.js"),[])},{id:"svelte",name:"Svelte",import:()=>ye(()=>import("./svelte-MSaWC3Je.js"),__vite__mapDeps([91,8,17,9,18]))},{id:"swift",name:"Swift",import:()=>ye(()=>import("./swift-BSxZ-RaX.js"),[])},{id:"system-verilog",name:"SystemVerilog",import:()=>ye(()=>import("./system-verilog-C7L56vO4.js"),[])},{id:"systemd",name:"Systemd Units",import:()=>ye(()=>import("./systemd-CUnW07Te.js"),[])},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:()=>ye(()=>import("./talonscript-C1XDQQGZ.js"),[])},{id:"tasl",name:"Tasl",import:()=>ye(()=>import("./tasl-CQjiPCtT.js"),[])},{id:"tcl",name:"Tcl",import:()=>ye(()=>import("./tcl-DQ1-QYvQ.js"),[])},{id:"templ",name:"Templ",import:()=>ye(()=>import("./templ-dwX3ZSMB.js"),__vite__mapDeps([92,93,8,9]))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:()=>ye(()=>import("./terraform-BbSNqyBO.js"),[])},{id:"tex",name:"TeX",import:()=>ye(()=>import("./tex-rYs2v40G.js"),__vite__mapDeps([68,66]))},{id:"toml",name:"TOML",import:()=>ye(()=>import("./toml-CB2ApiWb.js"),[])},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:()=>ye(()=>import("./ts-tags-CipyTH0X.js"),__vite__mapDeps([94,17,9,8,29,30,7,20,13,14]))},{id:"tsv",name:"TSV",import:()=>ye(()=>import("./tsv-B_m7g4N7.js"),[])},{id:"tsx",name:"TSX",import:()=>ye(()=>import("./tsx-B6W0miNI.js"),[])},{id:"turtle",name:"Turtle",import:()=>ye(()=>import("./turtle-BMR_PYu6.js"),[])},{id:"twig",name:"Twig",import:()=>ye(()=>import("./twig-NC5TFiHP.js"),__vite__mapDeps([95,9,8,11,76,7,13,14,20,15,24,38,39,40,17,41,42,27,28,29,30,32,43,44]))},{id:"typescript",name:"TypeScript",aliases:["ts"],import:()=>ye(()=>import("./typescript-Dj6nwHGl.js"),[])},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:()=>ye(()=>import("./typespec-BpWG_bgh.js"),[])},{id:"typst",name:"Typst",aliases:["typ"],import:()=>ye(()=>import("./typst-BVUVsWT6.js"),[])},{id:"v",name:"V",import:()=>ye(()=>import("./v-CAQ2eGtk.js"),[])},{id:"vala",name:"Vala",import:()=>ye(()=>import("./vala-BFOHcciG.js"),[])},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:()=>ye(()=>import("./vb-CdO5JTpU.js"),[])},{id:"verilog",name:"Verilog",import:()=>ye(()=>import("./verilog-CJaU5se_.js"),[])},{id:"vhdl",name:"VHDL",import:()=>ye(()=>import("./vhdl-DYoNaHQp.js"),[])},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:()=>ye(()=>import("./viml-m4uW47V2.js"),[])},{id:"vue",name:"Vue",import:()=>ye(()=>import("./vue-BuYVFjOK.js"),__vite__mapDeps([96,7,8,9,17,15,34]))},{id:"vue-html",name:"Vue HTML",import:()=>ye(()=>import("./vue-html-xdeiXROB.js"),__vite__mapDeps([97,96,7,8,9,17,15,34]))},{id:"vyper",name:"Vyper",aliases:["vy"],import:()=>ye(()=>import("./vyper-nyqBNV6O.js"),[])},{id:"wasm",name:"WebAssembly",import:()=>ye(()=>import("./wasm-C6j12Q_x.js"),[])},{id:"wenyan",name:"Wenyan",aliases:[""],import:()=>ye(()=>import("./wenyan-7A4Fjokl.js"),[])},{id:"wgsl",name:"WGSL",import:()=>ye(()=>import("./wgsl-CB0Krxn9.js"),[])},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:()=>ye(()=>import("./wikitext-DCE3LsBG.js"),[])},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:()=>ye(()=>import("./wolfram-C3FkfJm5.js"),[])},{id:"xml",name:"XML",import:()=>ye(()=>import("./xml-e3z08dGr.js"),__vite__mapDeps([13,14]))},{id:"xsl",name:"XSL",import:()=>ye(()=>import("./xsl-Dd0NUgwM.js"),__vite__mapDeps([98,13,14]))},{id:"yaml",name:"YAML",aliases:["yml"],import:()=>ye(()=>import("./yaml-CVw76BM1.js"),[])},{id:"zenscript",name:"ZenScript",import:()=>ye(()=>import("./zenscript-HnGAYVZD.js"),[])},{id:"zig",name:"Zig",import:()=>ye(()=>import("./zig-BVz_zdnA.js"),[])}],tRe=Object.fromEntries(cJ.map(t=>[t.id,t.import])),nRe=Object.fromEntries(cJ.flatMap(t=>t.aliases?.map(e=>[e,t.import])||[])),uJ={...tRe,...nRe},rRe=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:()=>ye(()=>import("./andromeeda-C3khCPGq.js"),[])},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:()=>ye(()=>import("./aurora-x-D-2ljcwZ.js"),[])},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:()=>ye(()=>import("./ayu-dark-Cv9koXgw.js"),[])},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:()=>ye(()=>import("./catppuccin-frappe-CD_QflpE.js"),[])},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:()=>ye(()=>import("./catppuccin-latte-DRW-0cLl.js"),[])},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:()=>ye(()=>import("./catppuccin-macchiato-C-_shW-Y.js"),[])},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:()=>ye(()=>import("./catppuccin-mocha-LGGdnPYs.js"),[])},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:()=>ye(()=>import("./dark-plus-C3mMm8J8.js"),[])},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:()=>ye(()=>import("./dracula-BzJJZx-M.js"),[])},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:()=>ye(()=>import("./dracula-soft-BXkSAIEj.js"),[])},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:()=>ye(()=>import("./everforest-dark-BgDCqdQA.js"),[])},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:()=>ye(()=>import("./everforest-light-C8M2exoo.js"),[])},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:()=>ye(()=>import("./github-dark-DHJKELXO.js"),[])},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:()=>ye(()=>import("./github-dark-default-Cuk6v7N8.js"),[])},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:()=>ye(()=>import("./github-dark-dimmed-DH5Ifo-i.js"),[])},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:()=>ye(()=>import("./github-dark-high-contrast-E3gJ1_iC.js"),[])},{id:"github-light",displayName:"GitHub Light",type:"light",import:()=>ye(()=>import("./github-light-DAi9KRSo.js"),[])},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:()=>ye(()=>import("./github-light-default-D7oLnXFd.js"),[])},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:()=>ye(()=>import("./github-light-high-contrast-BfjtVDDH.js"),[])},{id:"houston",displayName:"Houston",type:"dark",import:()=>ye(()=>import("./houston-DnULxvSX.js"),[])},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:()=>ye(()=>import("./kanagawa-dragon-CkXjmgJE.js"),[])},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:()=>ye(()=>import("./kanagawa-lotus-CfQXZHmo.js"),[])},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:()=>ye(()=>import("./kanagawa-wave-DWedfzmr.js"),[])},{id:"laserwave",displayName:"LaserWave",type:"dark",import:()=>ye(()=>import("./laserwave-DUszq2jm.js"),[])},{id:"light-plus",displayName:"Light Plus",type:"light",import:()=>ye(()=>import("./light-plus-B7mTdjB0.js"),[])},{id:"material-theme",displayName:"Material Theme",type:"dark",import:()=>ye(()=>import("./material-theme-D5KoaKCx.js"),[])},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:()=>ye(()=>import("./material-theme-darker-BfHTSMKl.js"),[])},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:()=>ye(()=>import("./material-theme-lighter-B0m2ddpp.js"),[])},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:()=>ye(()=>import("./material-theme-ocean-CyktbL80.js"),[])},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:()=>ye(()=>import("./material-theme-palenight-Csfq5Kiy.js"),[])},{id:"min-dark",displayName:"Min Dark",type:"dark",import:()=>ye(()=>import("./min-dark-CafNBF8u.js"),[])},{id:"min-light",displayName:"Min Light",type:"light",import:()=>ye(()=>import("./min-light-CTRr51gU.js"),[])},{id:"monokai",displayName:"Monokai",type:"dark",import:()=>ye(()=>import("./monokai-D4h5O-jR.js"),[])},{id:"night-owl",displayName:"Night Owl",type:"dark",import:()=>ye(()=>import("./night-owl-C39BiMTA.js"),[])},{id:"nord",displayName:"Nord",type:"dark",import:()=>ye(()=>import("./nord-Ddv68eIx.js"),[])},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:()=>ye(()=>import("./one-dark-pro-GBQ2dnAY.js"),[])},{id:"one-light",displayName:"One Light",type:"light",import:()=>ye(()=>import("./one-light-PoHY5YXO.js"),[])},{id:"plastic",displayName:"Plastic",type:"dark",import:()=>ye(()=>import("./plastic-3e1v2bzS.js"),[])},{id:"poimandres",displayName:"Poimandres",type:"dark",import:()=>ye(()=>import("./poimandres-CS3Unz2-.js"),[])},{id:"red",displayName:"Red",type:"dark",import:()=>ye(()=>import("./red-bN70gL4F.js"),[])},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:()=>ye(()=>import("./rose-pine-CmCqftbK.js"),[])},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:()=>ye(()=>import("./rose-pine-dawn-Ds-gbosJ.js"),[])},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:()=>ye(()=>import("./rose-pine-moon-CjDtw9vr.js"),[])},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:()=>ye(()=>import("./slack-dark-BthQWCQV.js"),[])},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:()=>ye(()=>import("./slack-ochin-DqwNpetd.js"),[])},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:()=>ye(()=>import("./snazzy-light-Bw305WKR.js"),[])},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:()=>ye(()=>import("./solarized-dark-DXbdFlpD.js"),[])},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:()=>ye(()=>import("./solarized-light-L9t79GZl.js"),[])},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:()=>ye(()=>import("./synthwave-84-CbfX1IO0.js"),[])},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:()=>ye(()=>import("./tokyo-night-DBQeEorK.js"),[])},{id:"vesper",displayName:"Vesper",type:"dark",import:()=>ye(()=>import("./vesper-BEBZ7ncR.js"),[])},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:()=>ye(()=>import("./vitesse-black-Bkuqu6BP.js"),[])},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:()=>ye(()=>import("./vitesse-dark-D0r3Knsf.js"),[])},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:()=>ye(()=>import("./vitesse-light-CVO1_9PV.js"),[])}],iRe=Object.fromEntries(rRe.map(t=>[t.id,t.import]));let zc=class extends Error{constructor(e){super(e),this.name="ShikiError"}},kI=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function sRe(){return 2147483648}function oRe(){return typeof performance<"u"?performance.now():Date.now()}const aRe=(t,e)=>t+(e-t%e)%e;async function lRe(t){let e,n;const r={};function i(f){n=f,r.HEAPU8=new Uint8Array(f),r.HEAPU32=new Uint32Array(f)}function s(f,m,g){r.HEAPU8.copyWithin(f,m,m+g)}function o(f){try{return e.grow(f-n.byteLength+65535>>>16),i(e.buffer),1}catch{}}function a(f){const m=r.HEAPU8.length;f=f>>>0;const g=sRe();if(f>g)return!1;for(let b=1;b<=4;b*=2){let y=m*(1+.2/b);y=Math.min(y,f+100663296);const v=Math.min(g,aRe(Math.max(f,y),65536));if(o(v))return!0}return!1}const l=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function c(f,m,g=1024){const b=m+g;let y=m;for(;f[y]&&!(y>=b);)++y;if(y-m>16&&f.buffer&&l)return l.decode(f.subarray(m,y));let v="";for(;m<y;){let x=f[m++];if(!(x&128)){v+=String.fromCharCode(x);continue}const w=f[m++]&63;if((x&224)===192){v+=String.fromCharCode((x&31)<<6|w);continue}const S=f[m++]&63;if((x&240)===224?x=(x&15)<<12|w<<6|S:x=(x&7)<<18|w<<12|S<<6|f[m++]&63,x<65536)v+=String.fromCharCode(x);else{const E=x-65536;v+=String.fromCharCode(55296|E>>10,56320|E&1023)}}return v}function u(f,m){return f?c(r.HEAPU8,f,m):""}const h={emscripten_get_now:oRe,emscripten_memcpy_big:s,emscripten_resize_heap:a,fd_write:()=>0};async function d(){const m=await t({env:h,wasi_snapshot_preview1:h});e=m.memory,i(e.buffer),Object.assign(r,m),r.UTF8ToString=u}return await d(),r}var cRe=Object.defineProperty,uRe=(t,e,n)=>e in t?cRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ni=(t,e,n)=>(uRe(t,typeof e!="symbol"?e+"":e,n),n);let pi=null;function hRe(t){throw new kI(t.UTF8ToString(t.getLastOnigError()))}class Tk{constructor(e){ni(this,"utf16Length"),ni(this,"utf8Length"),ni(this,"utf16Value"),ni(this,"utf8Value"),ni(this,"utf16OffsetToUtf8"),ni(this,"utf8OffsetToUtf16");const n=e.length,r=Tk._utf8ByteLength(e),i=r!==n,s=i?new Uint32Array(n+1):null;i&&(s[n]=r);const o=i?new Uint32Array(r+1):null;i&&(o[r]=n);const a=new Uint8Array(r);let l=0;for(let c=0;c<n;c++){const u=e.charCodeAt(c);let h=u,d=!1;if(u>=55296&&u<=56319&&c+1<n){const f=e.charCodeAt(c+1);f>=56320&&f<=57343&&(h=(u-55296<<10)+65536|f-56320,d=!0)}i&&(s[c]=l,d&&(s[c+1]=l),h<=127?o[l+0]=c:h<=2047?(o[l+0]=c,o[l+1]=c):h<=65535?(o[l+0]=c,o[l+1]=c,o[l+2]=c):(o[l+0]=c,o[l+1]=c,o[l+2]=c,o[l+3]=c)),h<=127?a[l++]=h:h<=2047?(a[l++]=192|(h&1984)>>>6,a[l++]=128|(h&63)>>>0):h<=65535?(a[l++]=224|(h&61440)>>>12,a[l++]=128|(h&4032)>>>6,a[l++]=128|(h&63)>>>0):(a[l++]=240|(h&1835008)>>>18,a[l++]=128|(h&258048)>>>12,a[l++]=128|(h&4032)>>>6,a[l++]=128|(h&63)>>>0),d&&c++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=e,this.utf8Value=a,this.utf16OffsetToUtf8=s,this.utf8OffsetToUtf16=o}static _utf8ByteLength(e){let n=0;for(let r=0,i=e.length;r<i;r++){const s=e.charCodeAt(r);let o=s,a=!1;if(s>=55296&&s<=56319&&r+1<i){const l=e.charCodeAt(r+1);l>=56320&&l<=57343&&(o=(s-55296<<10)+65536|l-56320,a=!0)}o<=127?n+=1:o<=2047?n+=2:o<=65535?n+=3:n+=4,a&&r++}return n}createString(e){const n=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,n),n}}const xl=class{constructor(t){if(ni(this,"id",++xl.LAST_ID),ni(this,"_onigBinding"),ni(this,"content"),ni(this,"utf16Length"),ni(this,"utf8Length"),ni(this,"utf16OffsetToUtf8"),ni(this,"utf8OffsetToUtf16"),ni(this,"ptr"),!pi)throw new kI("Must invoke loadWasm first.");this._onigBinding=pi,this.content=t;const e=new Tk(t);this.utf16Length=e.utf16Length,this.utf8Length=e.utf8Length,this.utf16OffsetToUtf8=e.utf16OffsetToUtf8,this.utf8OffsetToUtf16=e.utf8OffsetToUtf16,this.utf8Length<1e4&&!xl._sharedPtrInUse?(xl._sharedPtr||(xl._sharedPtr=pi.omalloc(1e4)),xl._sharedPtrInUse=!0,pi.HEAPU8.set(e.utf8Value,xl._sharedPtr),this.ptr=xl._sharedPtr):this.ptr=e.createString(pi)}convertUtf8OffsetToUtf16(t){return this.utf8OffsetToUtf16?t<0?0:t>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[t]:t}convertUtf16OffsetToUtf8(t){return this.utf16OffsetToUtf8?t<0?0:t>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[t]:t}dispose(){this.ptr===xl._sharedPtr?xl._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};let Cv=xl;ni(Cv,"LAST_ID",0);ni(Cv,"_sharedPtr",0);ni(Cv,"_sharedPtrInUse",!1);class dRe{constructor(e){if(ni(this,"_onigBinding"),ni(this,"_ptr"),!pi)throw new kI("Must invoke loadWasm first.");const n=[],r=[];for(let a=0,l=e.length;a<l;a++){const c=new Tk(e[a]);n[a]=c.createString(pi),r[a]=c.utf8Length}const i=pi.omalloc(4*e.length);pi.HEAPU32.set(n,i/4);const s=pi.omalloc(4*e.length);pi.HEAPU32.set(r,s/4);const o=pi.createOnigScanner(i,s,e.length);for(let a=0,l=e.length;a<l;a++)pi.ofree(n[a]);pi.ofree(s),pi.ofree(i),o===0&&hRe(pi),this._onigBinding=pi,this._ptr=o}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,n,r){let i=0;if(typeof r=="number"&&(i=r),typeof e=="string"){e=new Cv(e);const s=this._findNextMatchSync(e,n,!1,i);return e.dispose(),s}return this._findNextMatchSync(e,n,!1,i)}_findNextMatchSync(e,n,r,i){const s=this._onigBinding,o=s.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),i);if(o===0)return null;const a=s.HEAPU32;let l=o/4;const c=a[l++],u=a[l++],h=[];for(let d=0;d<u;d++){const f=e.convertUtf8OffsetToUtf16(a[l++]),m=e.convertUtf8OffsetToUtf16(a[l++]);h[d]={start:f,end:m,length:m-f}}return{index:c,captureIndices:h}}}function fRe(t){return typeof t.instantiator=="function"}function pRe(t){return typeof t.default=="function"}function mRe(t){return typeof t.data<"u"}function gRe(t){return typeof Response<"u"&&t instanceof Response}function bRe(t){return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof xt<"u"&&xt.isBuffer?.(t)||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let D_;function yRe(t){if(D_)return D_;async function e(){pi=await lRe(async n=>{let r=t;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),fRe(r)?r=await r.instantiator(n):pRe(r)?r=await r.default(n):(mRe(r)&&(r=r.data),gRe(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await vRe(r)(n):r=await xRe(r)(n):bRe(r)?r=await TT(r)(n):r instanceof WebAssembly.Module?r=await TT(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await TT(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return D_=e(),D_}function TT(t){return e=>WebAssembly.instantiate(t,e)}function vRe(t){return e=>WebAssembly.instantiateStreaming(t,e)}function xRe(t){return async e=>{const n=await t.arrayBuffer();return WebAssembly.instantiate(n,e)}}let _Re;function wRe(){return _Re}async function hJ(t){return t&&await yRe(t),{createScanner(e){return new dRe(e.map(n=>typeof n=="string"?n:n.source))},createString(e){return new Cv(e)}}}function SRe(t){return CI(t)}function CI(t){return Array.isArray(t)?ERe(t):t instanceof RegExp?t:typeof t=="object"?kRe(t):t}function ERe(t){let e=[];for(let n=0,r=t.length;n<r;n++)e[n]=CI(t[n]);return e}function kRe(t){let e={};for(let n in t)e[n]=CI(t[n]);return e}function dJ(t,...e){return e.forEach(n=>{for(let r in n)t[r]=n[r]}),t}function fJ(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?fJ(t.substring(0,t.length-1)):t.substr(~e+1)}var AT=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,M_=class{static hasCaptures(t){return t===null?!1:(AT.lastIndex=0,AT.test(t))}static replaceCaptures(t,e,n){return t.replace(AT,(r,i,s,o)=>{let a=n[parseInt(i||s,10)];if(a){let l=e.substring(a.start,a.end);for(;l[0]===".";)l=l.substring(1);switch(o){case"downcase":return l.toLowerCase();case"upcase":return l.toUpperCase();default:return l}}else return r})}};function pJ(t,e){return t<e?-1:t>e?1:0}function mJ(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,r=e.length;if(n===r){for(let i=0;i<n;i++){let s=pJ(t[i],e[i]);if(s!==0)return s}return 0}return n-r}function FF(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function gJ(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var bJ=class{constructor(t){this.fn=t}cache=new Map;get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},wS=class{constructor(t,e,n){this._colorMap=t,this._defaults=e,this._root=n}static createFromRawTheme(t,e){return this.createFromParsedTheme(ARe(t),e)}static createFromParsedTheme(t,e){return NRe(t,e)}_cachedMatchRoot=new bJ(t=>this._root.match(t));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,r=this._cachedMatchRoot.get(e).find(i=>CRe(t.parent,i.parentScopes));return r?new yJ(r.fontStyle,r.foreground,r.background):null}},PT=class a2{constructor(e,n){this.parent=e,this.scopeName=n}static push(e,n){for(const r of n)e=new a2(e,r);return e}static from(...e){let n=null;for(let r=0;r<e.length;r++)n=new a2(n,e[r]);return n}push(e){return new a2(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push(r.scopeName),r=r.parent;return r===e?n.reverse():void 0}};function CRe(t,e){if(e.length===0)return!0;for(let n=0;n<e.length;n++){let r=e[n],i=!1;if(r===">"){if(n===e.length-1)return!1;r=e[++n],i=!0}for(;t&&!TRe(t.scopeName,r);){if(i)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function TRe(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var yJ=class{constructor(t,e,n){this.fontStyle=t,this.foregroundId=e,this.backgroundId=n}};function ARe(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];if(!o.settings)continue;let a;if(typeof o.scope=="string"){let h=o.scope;h=h.replace(/^[,]+/,""),h=h.replace(/[,]+$/,""),a=h.split(",")}else Array.isArray(o.scope)?a=o.scope:a=[""];let l=-1;if(typeof o.settings.fontStyle=="string"){l=0;let h=o.settings.fontStyle.split(" ");for(let d=0,f=h.length;d<f;d++)switch(h[d]){case"italic":l=l|1;break;case"bold":l=l|2;break;case"underline":l=l|4;break;case"strikethrough":l=l|8;break}}let c=null;typeof o.settings.foreground=="string"&&FF(o.settings.foreground)&&(c=o.settings.foreground);let u=null;typeof o.settings.background=="string"&&FF(o.settings.background)&&(u=o.settings.background);for(let h=0,d=a.length;h<d;h++){let m=a[h].trim().split(" "),g=m[m.length-1],b=null;m.length>1&&(b=m.slice(0,m.length-1),b.reverse()),n[r++]=new PRe(g,b,i,l,c,u)}}return n}var PRe=class{constructor(t,e,n,r,i,s){this.scope=t,this.parentScopes=e,this.index=n,this.fontStyle=r,this.foreground=i,this.background=s}},Bc=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(Bc||{});function NRe(t,e){t.sort((l,c)=>{let u=pJ(l.scope,c.scope);return u!==0||(u=mJ(l.parentScopes,c.parentScopes),u!==0)?u:l.index-c.index});let n=0,r="#000000",i="#ffffff";for(;t.length>=1&&t[0].scope==="";){let l=t.shift();l.fontStyle!==-1&&(n=l.fontStyle),l.foreground!==null&&(r=l.foreground),l.background!==null&&(i=l.background)}let s=new LRe(e),o=new yJ(n,s.getId(r),s.getId(i)),a=new IRe(new zP(0,null,-1,0,0),[]);for(let l=0,c=t.length;l<c;l++){let u=t[l];a.insert(0,u.scope,u.parentScopes,u.fontStyle,s.getId(u.foreground),s.getId(u.background))}return new wS(s,o,a)}var LRe=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(t){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,n=t.length;e<n;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},RRe=Object.freeze([]),zP=class vJ{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,n,r,i,s){this.scopeDepth=e,this.parentScopes=n||RRe,this.fontStyle=r,this.foreground=i,this.background=s}clone(){return new vJ(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let r=0,i=e.length;r<i;r++)n[r]=e[r].clone();return n}acceptOverwrite(e,n,r,i){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),i!==0&&(this.background=i)}},IRe=class VP{constructor(e,n=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=n}_rulesWithParentScopes;static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let r=0,i=0;for(;e.parentScopes[r]===">"&&r++,n.parentScopes[i]===">"&&i++,!(r>=e.parentScopes.length||i>=n.parentScopes.length);){const s=n.parentScopes[i].length-e.parentScopes[r].length;if(s!==0)return s;r++,i++}return n.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let r=e.indexOf("."),i,s;if(r===-1?(i=e,s=""):(i=e.substring(0,r),s=e.substring(r+1)),this._children.hasOwnProperty(i))return this._children[i].match(s)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(VP._cmpBySpecificity),n}insert(e,n,r,i,s,o){if(n===""){this._doInsertHere(e,r,i,s,o);return}let a=n.indexOf("."),l,c;a===-1?(l=n,c=""):(l=n.substring(0,a),c=n.substring(a+1));let u;this._children.hasOwnProperty(l)?u=this._children[l]:(u=new VP(this._mainRule.clone(),zP.cloneArr(this._rulesWithParentScopes)),this._children[l]=u),u.insert(e+1,c,r,i,s,o)}_doInsertHere(e,n,r,i,s){if(n===null){this._mainRule.acceptOverwrite(e,r,i,s);return}for(let o=0,a=this._rulesWithParentScopes.length;o<a;o++){let l=this._rulesWithParentScopes[o];if(mJ(l.parentScopes,n)===0){l.acceptOverwrite(e,r,i,s);return}}r===-1&&(r=this._mainRule.fontStyle),i===0&&(i=this._mainRule.foreground),s===0&&(s=this._mainRule.background),this._rulesWithParentScopes.push(new zP(e,n,r,i,s))}},og=class Do{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const n=Do.getLanguageId(e),r=Do.getTokenType(e),i=Do.getFontStyle(e),s=Do.getForeground(e),o=Do.getBackground(e);console.log({languageId:n,tokenType:r,fontStyle:i,foreground:s,background:o})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,n,r,i,s,o,a){let l=Do.getLanguageId(e),c=Do.getTokenType(e),u=Do.containsBalancedBrackets(e)?1:0,h=Do.getFontStyle(e),d=Do.getForeground(e),f=Do.getBackground(e);return n!==0&&(l=n),r!==8&&(c=r),i!==null&&(u=i?1:0),s!==-1&&(h=s),o!==0&&(d=o),a!==0&&(f=a),(l<<0|c<<8|u<<10|h<<11|d<<15|f<<24)>>>0}};function SS(t,e){const n=[],r=ORe(t);let i=r.next();for(;i!==null;){let l=0;if(i.length===2&&i.charAt(1)===":"){switch(i.charAt(0)){case"R":l=1;break;case"L":l=-1;break;default:console.log(`Unknown priority ${i} in scope selector`)}i=r.next()}let c=o();if(n.push({matcher:c,priority:l}),i!==",")break;i=r.next()}return n;function s(){if(i==="-"){i=r.next();const l=s();return c=>!!l&&!l(c)}if(i==="("){i=r.next();const l=a();return i===")"&&(i=r.next()),l}if(BF(i)){const l=[];do l.push(i),i=r.next();while(BF(i));return c=>e(l,c)}return null}function o(){const l=[];let c=s();for(;c;)l.push(c),c=s();return u=>l.every(h=>h(u))}function a(){const l=[];let c=o();for(;c&&(l.push(c),i==="|"||i===",");){do i=r.next();while(i==="|"||i===",");c=o()}return u=>l.some(h=>h(u))}}function BF(t){return!!t&&!!t.match(/[\w\.:]+/)}function ORe(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const r=n[0];return n=e.exec(t),r}}}function xJ(t){typeof t.dispose=="function"&&t.dispose()}var py=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},DRe=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},MRe=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},jRe=class{constructor(t,e){this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new py(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const t=this.Q;this.Q=[];const e=new MRe;for(const n of t)FRe(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof py){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function FRe(t,e,n,r){const i=n.lookup(t.scopeName);if(!i){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const s=n.lookup(e);t instanceof py?l2({baseGrammar:s,selfGrammar:i},r):WP(t.ruleName,{baseGrammar:s,selfGrammar:i,repository:i.repository},r);const o=n.injections(t.scopeName);if(o)for(const a of o)r.add(new py(a))}function WP(t,e,n){if(e.repository&&e.repository[t]){const r=e.repository[t];ES([r],e,n)}}function l2(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&ES(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&ES(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function ES(t,e,n){for(const r of t){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const i=r.repository?dJ({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&ES(r.patterns,{...e,repository:i},n);const s=r.include;if(!s)continue;const o=_J(s);switch(o.kind){case 0:l2({...e,selfGrammar:e.baseGrammar},n);break;case 1:l2(e,n);break;case 2:WP(o.ruleName,{...e,repository:i},n);break;case 3:case 4:const a=o.scopeName===e.selfGrammar.scopeName?e.selfGrammar:o.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(a){const l={baseGrammar:e.baseGrammar,selfGrammar:a,repository:i};o.kind===4?WP(o.ruleName,l,n):l2(l,n)}else o.kind===4?n.add(new DRe(o.scopeName,o.ruleName)):n.add(new py(o.scopeName));break}}}var BRe=class{kind=0},URe=class{kind=1},$Re=class{constructor(t){this.ruleName=t}kind=2},HRe=class{constructor(t){this.scopeName=t}kind=3},zRe=class{constructor(t,e){this.scopeName=t,this.ruleName=e}kind=4};function _J(t){if(t==="$base")return new BRe;if(t==="$self")return new URe;const e=t.indexOf("#");if(e===-1)return new HRe(t);if(e===0)return new $Re(t.substring(1));{const n=t.substring(0,e),r=t.substring(e+1);return new zRe(n,r)}}var VRe=/\\(\d+)/,UF=/\\(\d+)/g,WRe=-1,wJ=-2;var Tv=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(e,n,r,i){this.$location=e,this.id=n,this._name=r||null,this._nameIsCapturing=M_.hasCaptures(this._name),this._contentName=i||null,this._contentNameIsCapturing=M_.hasCaptures(this._contentName)}get debugName(){const e=this.$location?`${fJ(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,n){return!this._nameIsCapturing||this._name===null||e===null||n===null?this._name:M_.replaceCaptures(this._name,e,n)}getContentName(e,n){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:M_.replaceCaptures(this._contentName,e,n)}},GRe=class extends Tv{retokenizeCapturedWithRuleId;constructor(t,e,n,r,i){super(t,e,n,r),this.retokenizeCapturedWithRuleId=i}dispose(){}collectPatterns(t,e){throw new Error("Not supported!")}compile(t,e){throw new Error("Not supported!")}compileAG(t,e,n,r){throw new Error("Not supported!")}},qRe=class extends Tv{_match;captures;_cachedCompiledPatterns;constructor(t,e,n,r,i){super(t,e,n,null),this._match=new my(r,this.id),this.captures=i,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,e){e.push(this._match)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new gy,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},$F=class extends Tv{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,i){super(t,e,n,r),this.patterns=i.patterns,this.hasMissingPatterns=i.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,e){for(const n of this.patterns)t.getRule(n).collectPatterns(t,e)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new gy,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},GP=class extends Tv{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,i,s,o,a,l,c){super(t,e,n,r),this._begin=new my(i,this.id),this.beginCaptures=s,this._end=new my(o||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=a,this.applyEndPatternLast=l||!1,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,e){return this._end.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t,e).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t,e).compileAG(t,n,r)}_getCachedCompiledPatterns(t,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new gy;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},kS=class extends Tv{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(t,e,n,r,i,s,o,a,l){super(t,e,n,r),this._begin=new my(i,this.id),this.beginCaptures=s,this.whileCaptures=a,this._while=new my(o,wJ),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=l.patterns,this.hasMissingPatterns=l.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,e){return this._while.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new gy;for(const e of this.patterns)t.getRule(e).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,e){return this._getCachedCompiledWhilePatterns(t,e).compile(t)}compileWhileAG(t,e,n,r){return this._getCachedCompiledWhilePatterns(t,e).compileAG(t,n,r)}_getCachedCompiledWhilePatterns(t,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new gy,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||""),this._cachedCompiledWhilePatterns}},SJ=class Gi{static createCaptureRule(e,n,r,i,s){return e.registerRule(o=>new GRe(n,o,r,i,s))}static getCompiledRuleId(e,n,r){return e.id||n.registerRule(i=>{if(e.id=i,e.match)return new qRe(e.$vscodeTextmateLocation,e.id,e.name,e.match,Gi._compileCaptures(e.captures,n,r));if(typeof e.begin>"u"){e.repository&&(r=dJ({},r,e.repository));let s=e.patterns;return typeof s>"u"&&e.include&&(s=[{include:e.include}]),new $F(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,Gi._compilePatterns(s,n,r))}return e.while?new kS(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,Gi._compileCaptures(e.beginCaptures||e.captures,n,r),e.while,Gi._compileCaptures(e.whileCaptures||e.captures,n,r),Gi._compilePatterns(e.patterns,n,r)):new GP(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,Gi._compileCaptures(e.beginCaptures||e.captures,n,r),e.end,Gi._compileCaptures(e.endCaptures||e.captures,n,r),e.applyEndPatternLast,Gi._compilePatterns(e.patterns,n,r))}),e.id}static _compileCaptures(e,n,r){let i=[];if(e){let s=0;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);a>s&&(s=a)}for(let o=0;o<=s;o++)i[o]=null;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);let l=0;e[o].patterns&&(l=Gi.getCompiledRuleId(e[o],n,r)),i[a]=Gi.createCaptureRule(n,e[o].$vscodeTextmateLocation,e[o].name,e[o].contentName,l)}}return i}static _compilePatterns(e,n,r){let i=[];if(e)for(let s=0,o=e.length;s<o;s++){const a=e[s];let l=-1;if(a.include){const c=_J(a.include);switch(c.kind){case 0:case 1:l=Gi.getCompiledRuleId(r[a.include],n,r);break;case 2:let u=r[c.ruleName];u&&(l=Gi.getCompiledRuleId(u,n,r));break;case 3:case 4:const h=c.scopeName,d=c.kind===4?c.ruleName:null,f=n.getExternalGrammar(h,r);if(f)if(d){let m=f.repository[d];m&&(l=Gi.getCompiledRuleId(m,n,f.repository))}else l=Gi.getCompiledRuleId(f.repository.$self,n,f.repository);break}}else l=Gi.getCompiledRuleId(a,n,r);if(l!==-1){const c=n.getRule(l);let u=!1;if((c instanceof $F||c instanceof GP||c instanceof kS)&&c.hasMissingPatterns&&c.patterns.length===0&&(u=!0),u)continue;i.push(l)}}return{patterns:i,hasMissingPatterns:(e?e.length:0)!==i.length}}},my=class EJ{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,n){if(e&&typeof e=="string"){const r=e.length;let i=0,s=[],o=!1;for(let a=0;a<r;a++)if(e.charAt(a)==="\\"&&a+1<r){const c=e.charAt(a+1);c==="z"?(s.push(e.substring(i,a)),s.push("$(?!\\n)(?<!\\n)"),i=a+2):(c==="A"||c==="G")&&(o=!0),a++}this.hasAnchor=o,i===0?this.source=e:(s.push(e.substring(i,r)),this.source=s.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=VRe.test(this.source):this.hasBackReferences=!1}clone(){return new EJ(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(i=>e.substring(i.start,i.end));return UF.lastIndex=0,this.source.replace(UF,(i,s)=>gJ(r[parseInt(s,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],n=[],r=[],i=[],s,o,a,l;for(s=0,o=this.source.length;s<o;s++)a=this.source.charAt(s),e[s]=a,n[s]=a,r[s]=a,i[s]=a,a==="\\"&&s+1<o&&(l=this.source.charAt(s+1),l==="A"?(e[s+1]="",n[s+1]="",r[s+1]="A",i[s+1]="A"):l==="G"?(e[s+1]="",n[s+1]="G",r[s+1]="",i[s+1]="G"):(e[s+1]=l,n[s+1]=l,r[s+1]=l,i[s+1]=l),s++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:i.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},gy=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(n=>n.source);this._cached=new HF(t,e,this._items.map(n=>n.ruleId))}return this._cached}compileAG(t,e,n){return this._hasAnchors?e?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,n){let r=this._items.map(i=>i.resolveAnchors(e,n));return new HF(t,r,this._items.map(i=>i.ruleId))}},HF=class{constructor(t,e,n){this.regExps=e,this.rules=n,this.scanner=t.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,n=this.rules.length;e<n;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,n){const r=this.scanner.findNextMatchSync(t,e,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},NT=class{constructor(t,e){this.languageId=t,this.tokenType=e}},KRe=class qP{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,n){this._defaultAttributes=new NT(e,8),this._embeddedLanguagesMatcher=new YRe(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?qP._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new NT(0,0);_getBasicScopeAttributes=new bJ(e=>{const n=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new NT(n,r)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(qP.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},YRe=class{values;scopesRegExp;constructor(t){if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([n,r])=>gJ(n));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},zF=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function kJ(t,e,n,r,i,s,o,a){const l=e.content.length;let c=!1,u=-1;if(o){const f=XRe(t,e,n,r,i,s);i=f.stack,r=f.linePos,n=f.isFirstLine,u=f.anchorPosition}const h=Date.now();for(;!c;){if(a!==0&&Date.now()-h>a)return new zF(i,!0);d()}return new zF(i,!1);function d(){const f=ZRe(t,e,n,r,i,u);if(!f){s.produce(i,l),c=!0;return}const m=f.captureIndices,g=f.matchedRuleId,b=m&&m.length>0?m[0].end>r:!1;if(g===WRe){const y=i.getRule(t);s.produce(i,m[0].start),i=i.withContentNameScopesList(i.nameScopesList),Lb(t,e,n,i,s,y.endCaptures,m),s.produce(i,m[0].end);const v=i;if(i=i.parent,u=v.getAnchorPos(),!b&&v.getEnterPos()===r){i=v,s.produce(i,l),c=!0;return}}else{const y=t.getRule(g);s.produce(i,m[0].start);const v=i,x=y.getName(e.content,m),w=i.contentNameScopesList.pushAttributed(x,t);if(i=i.push(g,r,u,m[0].end===l,null,w,w),y instanceof GP){const S=y;Lb(t,e,n,i,s,S.beginCaptures,m),s.produce(i,m[0].end),u=m[0].end;const E=S.getContentName(e.content,m),k=w.pushAttributed(E,t);if(i=i.withContentNameScopesList(k),S.endHasBackReferences&&(i=i.withEndRule(S.getEndWithResolvedBackReferences(e.content,m))),!b&&v.hasSameRuleAs(i)){i=i.pop(),s.produce(i,l),c=!0;return}}else if(y instanceof kS){const S=y;Lb(t,e,n,i,s,S.beginCaptures,m),s.produce(i,m[0].end),u=m[0].end;const E=S.getContentName(e.content,m),k=w.pushAttributed(E,t);if(i=i.withContentNameScopesList(k),S.whileHasBackReferences&&(i=i.withEndRule(S.getWhileWithResolvedBackReferences(e.content,m))),!b&&v.hasSameRuleAs(i)){i=i.pop(),s.produce(i,l),c=!0;return}}else if(Lb(t,e,n,i,s,y.captures,m),s.produce(i,m[0].end),i=i.pop(),!b){i=i.safePop(),s.produce(i,l),c=!0;return}}m[0].end>r&&(r=m[0].end,n=!1)}}function XRe(t,e,n,r,i,s){let o=i.beginRuleCapturedEOL?0:-1;const a=[];for(let l=i;l;l=l.pop()){const c=l.getRule(t);c instanceof kS&&a.push({rule:c,stack:l})}for(let l=a.pop();l;l=a.pop()){const{ruleScanner:c,findOptions:u}=eIe(l.rule,t,l.stack.endRule,n,r===o),h=c.findNextMatchSync(e,r,u);if(h){if(h.ruleId!==wJ){i=l.stack.pop();break}h.captureIndices&&h.captureIndices.length&&(s.produce(l.stack,h.captureIndices[0].start),Lb(t,e,n,l.stack,s,l.rule.whileCaptures,h.captureIndices),s.produce(l.stack,h.captureIndices[0].end),o=h.captureIndices[0].end,h.captureIndices[0].end>r&&(r=h.captureIndices[0].end,n=!1))}else{i=l.stack.pop();break}}return{stack:i,linePos:r,anchorPosition:o,isFirstLine:n}}function ZRe(t,e,n,r,i,s){const o=JRe(t,e,n,r,i,s),a=t.getInjections();if(a.length===0)return o;const l=QRe(a,t,e,n,r,i,s);if(!l)return o;if(!o)return l;const c=o.captureIndices[0].start,u=l.captureIndices[0].start;return u<c||l.priorityMatch&&u===c?l:o}function JRe(t,e,n,r,i,s){const o=i.getRule(t),{ruleScanner:a,findOptions:l}=CJ(o,t,i.endRule,n,r===s),c=a.findNextMatchSync(e,r,l);return c?{captureIndices:c.captureIndices,matchedRuleId:c.ruleId}:null}function QRe(t,e,n,r,i,s,o){let a=Number.MAX_VALUE,l=null,c,u=0;const h=s.contentNameScopesList.getScopeNames();for(let d=0,f=t.length;d<f;d++){const m=t[d];if(!m.matcher(h))continue;const g=e.getRule(m.ruleId),{ruleScanner:b,findOptions:y}=CJ(g,e,null,r,i===o),v=b.findNextMatchSync(n,i,y);if(!v)continue;const x=v.captureIndices[0].start;if(!(x>=a)&&(a=x,l=v.captureIndices,c=v.ruleId,u=m.priority,a===i))break}return l?{priorityMatch:u===-1,captureIndices:l,matchedRuleId:c}:null}function CJ(t,e,n,r,i){return{ruleScanner:t.compileAG(e,n,r,i),findOptions:0}}function eIe(t,e,n,r,i){return{ruleScanner:t.compileWhileAG(e,n,r,i),findOptions:0}}function Lb(t,e,n,r,i,s,o){if(s.length===0)return;const a=e.content,l=Math.min(s.length,o.length),c=[],u=o[0].end;for(let h=0;h<l;h++){const d=s[h];if(d===null)continue;const f=o[h];if(f.length===0)continue;if(f.start>u)break;for(;c.length>0&&c[c.length-1].endPos<=f.start;)i.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?i.produceFromScopes(c[c.length-1].scopes,f.start):i.produce(r,f.start),d.retokenizeCapturedWithRuleId){const g=d.getName(a,o),b=r.contentNameScopesList.pushAttributed(g,t),y=d.getContentName(a,o),v=b.pushAttributed(y,t),x=r.push(d.retokenizeCapturedWithRuleId,f.start,-1,!1,null,b,v),w=t.createOnigString(a.substring(0,f.end));kJ(t,w,n&&f.start===0,f.start,x,i,!1,0),xJ(w);continue}const m=d.getName(a,o);if(m!==null){const b=(c.length>0?c[c.length-1].scopes:r.contentNameScopesList).pushAttributed(m,t);c.push(new tIe(b,f.end))}}for(;c.length>0;)i.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}var tIe=class{scopes;endPos;constructor(t,e){this.scopes=t,this.endPos=e}};function nIe(t,e,n,r,i,s,o,a){return new iIe(t,e,n,r,i,s,o,a)}function VF(t,e,n,r,i){const s=SS(e,CS),o=SJ.getCompiledRuleId(n,r,i.repository);for(const a of s)t.push({debugSelector:e,matcher:a.matcher,ruleId:o,grammar:i,priority:a.priority})}function CS(t,e){if(e.length<t.length)return!1;let n=0;return t.every(r=>{for(let i=n;i<e.length;i++)if(rIe(e[i],r))return n=i+1,!0;return!1})}function rIe(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}var iIe=class{constructor(t,e,n,r,i,s,o,a){if(this._rootScopeName=t,this.balancedBracketSelectors=s,this._onigLib=a,this._basicScopeAttributesProvider=new KRe(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=o,this._grammar=WF(e,null),this._injections=null,this._tokenTypeMatchers=[],i)for(const l of Object.keys(i)){const c=SS(l,CS);for(const u of c)this._tokenTypeMatchers.push({matcher:u.matcher,type:i[l]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:i=>i===this._rootScopeName?this._grammar:this.getExternalGrammar(i),injections:i=>this._grammarRepository.injections(i)},e=[],n=this._rootScopeName,r=t.lookup(n);if(r){const i=r.injections;if(i)for(let o in i)VF(e,o,i[o],this,r);const s=this._grammarRepository.injections(n);s&&s.forEach(o=>{const a=this.getExternalGrammar(o);if(a){const l=a.injectionSelector;l&&VF(e,l,a,this,a)}})}return e.sort((i,s)=>i.priority-s.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,n=t(e);return this._ruleId2desc[e]=n,n}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const n=this._grammarRepository.lookup(t);if(n)return this._includedGrammars[t]=WF(n,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,n=0){const r=this._tokenize(t,e,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(t,e,n=0){const r=this._tokenize(t,e,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(t,e,n,r){this._rootId===-1&&(this._rootId=SJ.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let i;if(!e||e===KP.NULL){i=!0;const c=this._basicScopeAttributesProvider.getDefaultAttributes(),u=this.themeProvider.getDefaults(),h=og.set(0,c.languageId,c.tokenType,null,u.fontStyle,u.foregroundId,u.backgroundId),d=this.getRule(this._rootId).getName(null,null);let f;d?f=d1.createRootAndLookUpScopeName(d,h,this):f=d1.createRoot("unknown",h),e=new KP(null,this._rootId,-1,-1,!1,null,f,f)}else i=!1,e.reset();t=t+`
`;const s=this.createOnigString(t),o=s.content.length,a=new oIe(n,t,this._tokenTypeMatchers,this.balancedBracketSelectors),l=kJ(this,s,i,0,e,a,!0,r);return xJ(s),{lineLength:o,lineTokens:a,ruleStack:l.stack,stoppedEarly:l.stoppedEarly}}};function WF(t,e){return t=SRe(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var d1=class _l{constructor(e,n,r){this.parent=e,this.scopePath=n,this.tokenAttributes=r}static fromExtension(e,n){let r=e,i=e?.scopePath??null;for(const s of n)i=PT.push(i,s.scopeNames),r=new _l(r,i,s.encodedTokenAttributes);return r}static createRoot(e,n){return new _l(null,new PT(null,e),n)}static createRootAndLookUpScopeName(e,n,r){const i=r.getMetadataForScope(e),s=new PT(null,e),o=r.themeProvider.themeMatch(s),a=_l.mergeAttributes(n,i,o);return new _l(null,s,a)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return _l.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,r){let i=-1,s=0,o=0;return r!==null&&(i=r.fontStyle,s=r.foregroundId,o=r.backgroundId),og.set(e,n.languageId,n.tokenType,null,i,s,o)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return _l._pushAttributed(this,e,n);const r=e.split(/ /g);let i=this;for(const s of r)i=_l._pushAttributed(i,s,n);return i}static _pushAttributed(e,n,r){const i=r.getMetadataForScope(n),s=e.scopePath.push(n),o=r.themeProvider.themeMatch(s),a=_l.mergeAttributes(e.tokenAttributes,i,o);return new _l(e,s,a)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?n.reverse():void 0}},KP=class fd{constructor(e,n,r,i,s,o,a,l){this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=s,this.endRule=o,this.nameScopesList=a,this.contentNameScopesList=l,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=i}_stackElementBrand=void 0;static NULL=new fd(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:fd._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?d1.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){fd._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,r,i,s,o,a){return new fd(this,e,n,r,i,s,o,a)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new fd(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,n){const r=d1.fromExtension(e?.nameScopesList??null,n.nameScopesList);return new fd(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,d1.fromExtension(r,n.contentNameScopesList))}},sIe=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(t,e){this.balancedBracketScopes=t.flatMap(n=>n==="*"?(this.allowAny=!0,[]):SS(n,CS).map(r=>r.matcher)),this.unbalancedBracketScopes=e.flatMap(n=>SS(n,CS).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},oIe=class{constructor(t,e,n,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=t,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let r=t?.tokenAttributes??0,i=!1;if(this.balancedBracketSelectors?.matchesAlways&&(i=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const s=t?.getScopeNames()??[];for(const o of this._tokenTypeOverrides)o.matcher(s)&&(r=og.set(r,0,o.type,null,-1,0,0));this.balancedBracketSelectors&&(i=this.balancedBracketSelectors.match(s))}if(i&&(r=og.set(r,0,8,i,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=e;return}const n=t?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:n}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,i=this._binaryTokens.length;r<i;r++)n[r]=this._binaryTokens[r];return n}},aIe=class{constructor(t,e){this._onigLib=e,this._theme=t}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,n,r,i){if(!this._grammars.has(t)){let s=this._rawGrammars.get(t);if(!s)return null;this._grammars.set(t,nIe(t,s,e,n,r,i,this,this._onigLib))}return this._grammars.get(t)}},lIe=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new aIe(wS.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(wS.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,r){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,n,r){return this._loadGrammar(e,n,r.embeddedLanguages,r.tokenTypes,new sIe(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,r,i,s){const o=new jRe(this._syncRegistry,e);for(;o.Q.length>0;)o.Q.map(a=>this._loadSingleGrammar(a.scopeName)),o.processQueue();return this._grammarForScopeName(e,n,r,i,s)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const n=this._options.loadGrammar(e);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(e,n=[],r=0,i=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,r,i)}_grammarForScopeName(e,n=0,r=null,i=null,s=null){return this._syncRegistry.grammarForScopeName(e,n,r,i,s)}},YP=KP.NULL;class Av{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}Av.prototype.normal={};Av.prototype.property={};Av.prototype.space=void 0;function TJ(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new Av(n,r,e)}function XP(t){return t.toLowerCase()}class Xs{constructor(e,n){this.attribute=n,this.property=e}}Xs.prototype.attribute="";Xs.prototype.booleanish=!1;Xs.prototype.boolean=!1;Xs.prototype.commaOrSpaceSeparated=!1;Xs.prototype.commaSeparated=!1;Xs.prototype.defined=!1;Xs.prototype.mustUseProperty=!1;Xs.prototype.number=!1;Xs.prototype.overloadedBoolean=!1;Xs.prototype.property="";Xs.prototype.spaceSeparated=!1;Xs.prototype.space=void 0;let cIe=0;const cn=Vf(),Yr=Vf(),AJ=Vf(),yt=Vf(),ar=Vf(),Pm=Vf(),lo=Vf();function Vf(){return 2**++cIe}const ZP=Object.freeze(Object.defineProperty({__proto__:null,boolean:cn,booleanish:Yr,commaOrSpaceSeparated:lo,commaSeparated:Pm,number:yt,overloadedBoolean:AJ,spaceSeparated:ar},Symbol.toStringTag,{value:"Module"})),LT=Object.keys(ZP);class TI extends Xs{constructor(e,n,r,i){let s=-1;if(super(e,n),GF(this,"space",i),typeof r=="number")for(;++s<LT.length;){const o=LT[s];GF(this,LT[s],(r&ZP[o])===ZP[o])}}}TI.prototype.defined=!0;function GF(t,e,n){n&&(t[e]=n)}function qg(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new TI(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[XP(r)]=r,n[XP(s.attribute)]=r}return new Av(e,n,t.space)}const PJ=qg({properties:{ariaActiveDescendant:null,ariaAtomic:Yr,ariaAutoComplete:null,ariaBusy:Yr,ariaChecked:Yr,ariaColCount:yt,ariaColIndex:yt,ariaColSpan:yt,ariaControls:ar,ariaCurrent:null,ariaDescribedBy:ar,ariaDetails:null,ariaDisabled:Yr,ariaDropEffect:ar,ariaErrorMessage:null,ariaExpanded:Yr,ariaFlowTo:ar,ariaGrabbed:Yr,ariaHasPopup:null,ariaHidden:Yr,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ar,ariaLevel:yt,ariaLive:null,ariaModal:Yr,ariaMultiLine:Yr,ariaMultiSelectable:Yr,ariaOrientation:null,ariaOwns:ar,ariaPlaceholder:null,ariaPosInSet:yt,ariaPressed:Yr,ariaReadOnly:Yr,ariaRelevant:null,ariaRequired:Yr,ariaRoleDescription:ar,ariaRowCount:yt,ariaRowIndex:yt,ariaRowSpan:yt,ariaSelected:Yr,ariaSetSize:yt,ariaSort:null,ariaValueMax:yt,ariaValueMin:yt,ariaValueNow:yt,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function NJ(t,e){return e in t?t[e]:e}function LJ(t,e){return NJ(t,e.toLowerCase())}const uIe=qg({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Pm,acceptCharset:ar,accessKey:ar,action:null,allow:null,allowFullScreen:cn,allowPaymentRequest:cn,allowUserMedia:cn,alt:null,as:null,async:cn,autoCapitalize:null,autoComplete:ar,autoFocus:cn,autoPlay:cn,blocking:ar,capture:null,charSet:null,checked:cn,cite:null,className:ar,cols:yt,colSpan:null,content:null,contentEditable:Yr,controls:cn,controlsList:ar,coords:yt|Pm,crossOrigin:null,data:null,dateTime:null,decoding:null,default:cn,defer:cn,dir:null,dirName:null,disabled:cn,download:AJ,draggable:Yr,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:cn,formTarget:null,headers:ar,height:yt,hidden:cn,high:yt,href:null,hrefLang:null,htmlFor:ar,httpEquiv:ar,id:null,imageSizes:null,imageSrcSet:null,inert:cn,inputMode:null,integrity:null,is:null,isMap:cn,itemId:null,itemProp:ar,itemRef:ar,itemScope:cn,itemType:ar,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:cn,low:yt,manifest:null,max:null,maxLength:yt,media:null,method:null,min:null,minLength:yt,multiple:cn,muted:cn,name:null,nonce:null,noModule:cn,noValidate:cn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:cn,optimum:yt,pattern:null,ping:ar,placeholder:null,playsInline:cn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:cn,referrerPolicy:null,rel:ar,required:cn,reversed:cn,rows:yt,rowSpan:yt,sandbox:ar,scope:null,scoped:cn,seamless:cn,selected:cn,shadowRootClonable:cn,shadowRootDelegatesFocus:cn,shadowRootMode:null,shape:null,size:yt,sizes:null,slot:null,span:yt,spellCheck:Yr,src:null,srcDoc:null,srcLang:null,srcSet:null,start:yt,step:null,style:null,tabIndex:yt,target:null,title:null,translate:null,type:null,typeMustMatch:cn,useMap:null,value:Yr,width:yt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ar,axis:null,background:null,bgColor:null,border:yt,borderColor:null,bottomMargin:yt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:cn,declare:cn,event:null,face:null,frame:null,frameBorder:null,hSpace:yt,leftMargin:yt,link:null,longDesc:null,lowSrc:null,marginHeight:yt,marginWidth:yt,noResize:cn,noHref:cn,noShade:cn,noWrap:cn,object:null,profile:null,prompt:null,rev:null,rightMargin:yt,rules:null,scheme:null,scrolling:Yr,standby:null,summary:null,text:null,topMargin:yt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:yt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:cn,disableRemotePlayback:cn,prefix:null,property:null,results:yt,security:null,unselectable:null},space:"html",transform:LJ}),hIe=qg({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:lo,accentHeight:yt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:yt,amplitude:yt,arabicForm:null,ascent:yt,attributeName:null,attributeType:null,azimuth:yt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:yt,by:null,calcMode:null,capHeight:yt,className:ar,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:yt,diffuseConstant:yt,direction:null,display:null,dur:null,divisor:yt,dominantBaseline:null,download:cn,dx:null,dy:null,edgeMode:null,editable:null,elevation:yt,enableBackground:null,end:null,event:null,exponent:yt,externalResourcesRequired:null,fill:null,fillOpacity:yt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Pm,g2:Pm,glyphName:Pm,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:yt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:yt,horizOriginX:yt,horizOriginY:yt,id:null,ideographic:yt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:yt,k:yt,k1:yt,k2:yt,k3:yt,k4:yt,kernelMatrix:lo,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:yt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:yt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:yt,overlineThickness:yt,paintOrder:null,panose1:null,path:null,pathLength:yt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ar,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:yt,pointsAtY:yt,pointsAtZ:yt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:lo,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:lo,rev:lo,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:lo,requiredFeatures:lo,requiredFonts:lo,requiredFormats:lo,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:yt,specularExponent:yt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:yt,strikethroughThickness:yt,string:null,stroke:null,strokeDashArray:lo,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:yt,strokeOpacity:yt,strokeWidth:null,style:null,surfaceScale:yt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:lo,tabIndex:yt,tableValues:null,target:null,targetX:yt,targetY:yt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:lo,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:yt,underlineThickness:yt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:yt,values:null,vAlphabetic:yt,vMathematical:yt,vectorEffect:null,vHanging:yt,vIdeographic:yt,version:null,vertAdvY:yt,vertOriginX:yt,vertOriginY:yt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:yt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:NJ}),RJ=qg({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),IJ=qg({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:LJ}),OJ=qg({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),dIe=/[A-Z]/g,qF=/-[a-z]/g,fIe=/^data[-\w.:]+$/i;function pIe(t,e){const n=XP(e);let r=e,i=Xs;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&fIe.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(qF,gIe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!qF.test(s)){let o=s.replace(dIe,mIe);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=TI}return new i(r,e)}function mIe(t){return"-"+t.toLowerCase()}function gIe(t){return t.charAt(1).toUpperCase()}const bIe=TJ([PJ,uIe,RJ,IJ,OJ],"html"),DJ=TJ([PJ,hIe,RJ,IJ,OJ],"svg"),yIe=/["&'<>`]/g,vIe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,xIe=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,_Ie=/[|\\{}()[\]^$+*?.]/g,KF=new WeakMap;function wIe(t,e){if(t=t.replace(e.subset?SIe(e.subset):yIe,r),e.subset||e.escapeOnly)return t;return t.replace(vIe,n).replace(xIe,r);function n(i,s,o){return e.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,o.charCodeAt(s+2),e)}function r(i,s,o){return e.format(i.charCodeAt(0),o.charCodeAt(s+1),e)}}function SIe(t){let e=KF.get(t);return e||(e=EIe(t),KF.set(t,e)),e}function EIe(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(_Ie,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const kIe=/[\dA-Fa-f]/;function CIe(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!kIe.test(String.fromCharCode(e))?r:r+";"}const TIe=/\d/;function AIe(t,e,n){const r="&#"+String(t);return n&&e&&!TIe.test(String.fromCharCode(e))?r:r+";"}const PIe=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],RT={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},NIe=["cent","copy","divide","gt","lt","not","para","times"],MJ={}.hasOwnProperty,JP={};let j_;for(j_ in RT)MJ.call(RT,j_)&&(JP[RT[j_]]=j_);const LIe=/[^\dA-Za-z]/;function RIe(t,e,n,r){const i=String.fromCharCode(t);if(MJ.call(JP,i)){const s=JP[i],o="&"+s;return n&&PIe.includes(s)&&!NIe.includes(s)&&(!r||e&&e!==61&&LIe.test(String.fromCharCode(e)))?o:o+";"}return""}function IIe(t,e,n){let r=CIe(t,e,n.omitOptionalSemicolons),i;if((n.useNamedReferences||n.useShortestReferences)&&(i=RIe(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!i)&&n.useShortestReferences){const s=AIe(t,e,n.omitOptionalSemicolons);s.length<r.length&&(r=s)}return i&&(!n.useShortestReferences||i.length<r.length)?i:r}function Nm(t,e){return wIe(t,Object.assign({format:IIe},e))}const OIe=/^>|^->|<!--|-->|--!>|<!-$/g,DIe=[">"],MIe=["<",">"];function jIe(t,e,n,r){return r.settings.bogusComments?"<?"+Nm(t.value,Object.assign({},r.settings.characterReferences,{subset:DIe}))+">":"<!--"+t.value.replace(OIe,i)+"-->";function i(s){return Nm(s,Object.assign({},r.settings.characterReferences,{subset:MIe}))}}function FIe(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}const BIe=/[ \t\n\f\r]/g;function AI(t){return typeof t=="object"?t.type==="text"?YF(t.value):!1:YF(t)}function YF(t){return t.replace(BIe,"")===""}const ci=FJ(1),jJ=FJ(-1),UIe=[];function FJ(t){return e;function e(n,r,i){const s=n?n.children:UIe;let o=(r||0)+t,a=s[o];if(!i)for(;a&&AI(a);)o+=t,a=s[o];return a}}const $Ie={}.hasOwnProperty;function BJ(t){return e;function e(n,r,i){return $Ie.call(t,n.tagName)&&t[n.tagName](n,r,i)}}const PI=BJ({body:zIe,caption:IT,colgroup:IT,dd:qIe,dt:GIe,head:IT,html:HIe,li:WIe,optgroup:KIe,option:YIe,p:VIe,rp:XF,rt:XF,tbody:ZIe,td:ZF,tfoot:JIe,th:ZF,thead:XIe,tr:QIe});function IT(t,e,n){const r=ci(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&AI(r.value.charAt(0)))}function HIe(t,e,n){const r=ci(n,e);return!r||r.type!=="comment"}function zIe(t,e,n){const r=ci(n,e);return!r||r.type!=="comment"}function VIe(t,e,n){const r=ci(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function WIe(t,e,n){const r=ci(n,e);return!r||r.type==="element"&&r.tagName==="li"}function GIe(t,e,n){const r=ci(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function qIe(t,e,n){const r=ci(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function XF(t,e,n){const r=ci(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function KIe(t,e,n){const r=ci(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function YIe(t,e,n){const r=ci(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function XIe(t,e,n){const r=ci(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function ZIe(t,e,n){const r=ci(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function JIe(t,e,n){return!ci(n,e)}function QIe(t,e,n){const r=ci(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function ZF(t,e,n){const r=ci(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const eOe=BJ({body:rOe,colgroup:iOe,head:nOe,html:tOe,tbody:sOe});function tOe(t){const e=ci(t,-1);return!e||e.type!=="comment"}function nOe(t){const e=new Set;for(const r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const n=t.children[0];return!n||n.type==="element"}function rOe(t){const e=ci(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&AI(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function iOe(t,e,n){const r=jJ(n,e),i=ci(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&PI(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="col")}function sOe(t,e,n){const r=jJ(n,e),i=ci(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&PI(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="tr")}const F_={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function oOe(t,e,n,r){const i=r.schema,s=i.space==="svg"?!1:r.settings.omitOptionalTags;let o=i.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const a=[];let l;i.space==="html"&&t.tagName==="svg"&&(r.schema=DJ);const c=aOe(r,t.properties),u=r.all(i.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=i,u&&(o=!1),(c||!s||!eOe(t,e,n))&&(a.push("<",t.tagName,c?" "+c:""),o&&(i.space==="svg"||r.settings.closeSelfClosing)&&(l=c.charAt(c.length-1),(!r.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(u),!o&&(!s||!PI(t,e,n))&&a.push("</"+t.tagName+">"),a.join("")}function aOe(t,e){const n=[];let r=-1,i;if(e){for(i in e)if(e[i]!==null&&e[i]!==void 0){const s=lOe(t,i,e[i]);s&&n.push(s)}}for(;++r<n.length;){const s=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&s!=='"'&&s!=="'"&&(n[r]+=" ")}return n.join("")}function lOe(t,e,n){const r=pIe(t.schema,e),i=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,s=t.settings.allowDangerousCharacters?0:1;let o=t.quote,a;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const l=Nm(r.attribute,Object.assign({},t.settings.characterReferences,{subset:F_.name[i][s]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?FR:BR)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?l:(t.settings.preferUnquoted&&(a=Nm(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:F_.unquoted[i][s]}))),a!==n&&(t.settings.quoteSmart&&pS(n,o)>pS(n,t.alternative)&&(o=t.alternative),a=o+Nm(n,Object.assign({},t.settings.characterReferences,{subset:(o==="'"?F_.single:F_.double)[i][s],attribute:!0}))+o),l+(a&&"="+a))}const cOe=["<","&"];function UJ(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:Nm(t.value,Object.assign({},r.settings.characterReferences,{subset:cOe}))}function uOe(t,e,n,r){return r.settings.allowDangerousHtml?t.value:UJ(t,e,n,r)}function hOe(t,e,n,r){return r.all(t)}const dOe=zR("type",{invalid:fOe,unknown:pOe,handlers:{comment:jIe,doctype:FIe,element:oOe,raw:uOe,root:hOe,text:UJ}});function fOe(t){throw new Error("Expected node, not `"+t+"`")}function pOe(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const mOe={},gOe={},bOe=[];function yOe(t,e){const n=mOe,r=n.quote||'"',i=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:vOe,all:xOe,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||lY,characterReferences:n.characterReferences||gOe,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?DJ:bIe,quote:r,alternative:i}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function vOe(t,e,n){return dOe(t,e,n,this)}function xOe(t){const e=[],n=t&&t.children||bOe;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function _Oe(t){return Array.isArray(t)?t:[t]}function Ak(t,e=!1){const n=t.split(/(\r?\n)/g);let r=0;const i=[];for(let s=0;s<n.length;s+=2){const o=e?n[s]+(n[s+1]||""):n[s];i.push([o,r]),r+=n[s].length,r+=n[s+1]?.length||0}return i}function NI(t){return!t||["plaintext","txt","text","plain"].includes(t)}function LI(t){return t==="ansi"||NI(t)}function RI(t){return t==="none"}function $J(t){return RI(t)}function HJ(t,e){if(!e)return t;t.properties||={},t.properties.class||=[],typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const r of n)r&&!t.properties.class.includes(r)&&t.properties.class.push(r);return t}function wOe(t,e){let n=0;const r=[];for(const i of e)i>n&&r.push({...t,content:t.content.slice(n,i),offset:t.offset+n}),n=i;return n<t.content.length&&r.push({...t,content:t.content.slice(n),offset:t.offset+n}),r}function SOe(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((r,i)=>r-i);return n.length?t.map(r=>r.flatMap(i=>{const s=n.filter(o=>i.offset<o&&o<i.offset+i.content.length).map(o=>o-i.offset).sort((o,a)=>o-a);return s.length?wOe(i,s):i})):t}async function zJ(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function TS(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},r=typeof t=="string"?t:t.name;for(const[i,s]of Object.entries(e?.colorReplacements||{}))typeof s=="string"?n[i]=s:i===r&&Object.assign(n,s);return n}function Pd(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function VJ(t){const e={};return t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle&&(t.fontStyle&Bc.Italic&&(e["font-style"]="italic"),t.fontStyle&Bc.Bold&&(e["font-weight"]="bold"),t.fontStyle&Bc.Underline&&(e["text-decoration"]="underline")),e}function EOe(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}function kOe(t){const e=Ak(t,!0).map(([i])=>i);function n(i){if(i===t.length)return{line:e.length-1,character:e[e.length-1].length};let s=i,o=0;for(const a of e){if(s<a.length)break;s-=a.length,o++}return{line:o,character:s}}function r(i,s){let o=0;for(let a=0;a<i;a++)o+=e[a].length;return o+=s,o}return{lines:e,indexToPos:n,posToIndex:r}}class ds extends Error{constructor(e){super(e),this.name="ShikiError"}}const WJ=new WeakMap;function Pk(t,e){WJ.set(t,e)}function by(t){return WJ.get(t)}class Kg{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new Kg(Object.fromEntries(_Oe(n).map(r=>[r,YP])),e)}constructor(...e){if(e.length===2){const[n,r]=e;this.lang=r,this._stacks=n}else{const[n,r,i]=e;this.lang=r,this._stacks={[i]:n}}}getInternalStack(e=this.theme){return this._stacks[e]}get scopes(){return JF(this._stacks[this.theme])}getScopes(e=this.theme){return JF(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.scopes}}}function JF(t){const e=[],n=new Set;function r(i){if(n.has(i))return;n.add(i);const s=i?.nameScopesList?.scopeName;s&&e.push(s),i.parent&&r(i.parent)}return r(t),e}function COe(t,e){if(!(t instanceof Kg))throw new ds("Invalid grammar state");return t.getInternalStack(e)}function TOe(){const t=new WeakMap;function e(n){if(!t.has(n.meta)){let r=function(o){if(typeof o=="number"){if(o<0||o>n.source.length)throw new ds(`Invalid decoration offset: ${o}. Code length: ${n.source.length}`);return{...i.indexToPos(o),offset:o}}else{const a=i.lines[o.line];if(a===void 0)throw new ds(`Invalid decoration position ${JSON.stringify(o)}. Lines length: ${i.lines.length}`);if(o.character<0||o.character>a.length)throw new ds(`Invalid decoration position ${JSON.stringify(o)}. Line ${o.line} length: ${a.length}`);return{...o,offset:i.posToIndex(o.line,o.character)}}};const i=kOe(n.source),s=(n.options.decorations||[]).map(o=>({...o,start:r(o.start),end:r(o.end)}));AOe(s),t.set(n.meta,{decorations:s,converter:i,source:n.source})}return t.get(n.meta)}return{name:"shiki:decorations",tokens(n){if(!this.options.decorations?.length)return;const i=e(this).decorations.flatMap(o=>[o.start.offset,o.end.offset]);return SOe(n,i)},code(n){if(!this.options.decorations?.length)return;const r=e(this),i=Array.from(n.children).filter(u=>u.type==="element"&&u.tagName==="span");if(i.length!==r.converter.lines.length)throw new ds(`Number of lines in code element (${i.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function s(u,h,d,f){const m=i[u];let g="",b=-1,y=-1;if(h===0&&(b=0),d===0&&(y=0),d===Number.POSITIVE_INFINITY&&(y=m.children.length),b===-1||y===-1)for(let x=0;x<m.children.length;x++)g+=GJ(m.children[x]),b===-1&&g.length===h&&(b=x+1),y===-1&&g.length===d&&(y=x+1);if(b===-1)throw new ds(`Failed to find start index for decoration ${JSON.stringify(f.start)}`);if(y===-1)throw new ds(`Failed to find end index for decoration ${JSON.stringify(f.end)}`);const v=m.children.slice(b,y);if(!f.alwaysWrap&&v.length===m.children.length)a(m,f,"line");else if(!f.alwaysWrap&&v.length===1&&v[0].type==="element")a(v[0],f,"token");else{const x={type:"element",tagName:"span",properties:{},children:v};a(x,f,"wrapper"),m.children.splice(b,v.length,x)}}function o(u,h){i[u]=a(i[u],h,"line")}function a(u,h,d){const f=h.properties||{},m=h.transform||(g=>g);return u.tagName=h.tagName||"span",u.properties={...u.properties,...f,class:u.properties.class},h.properties?.class&&HJ(u,h.properties.class),u=m(u,d)||u,u}const l=[],c=r.decorations.sort((u,h)=>h.start.offset-u.start.offset);for(const u of c){const{start:h,end:d}=u;if(h.line===d.line)s(h.line,h.character,d.character,u);else if(h.line<d.line){s(h.line,h.character,Number.POSITIVE_INFINITY,u);for(let f=h.line+1;f<d.line;f++)l.unshift(()=>o(f,u));s(d.line,0,d.character,u)}}l.forEach(u=>u())}}}function AOe(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.start.offset>n.end.offset)throw new ds(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=e+1;r<t.length;r++){const i=t[r],s=n.start.offset<i.start.offset&&i.start.offset<n.end.offset,o=n.start.offset<i.end.offset&&i.end.offset<n.end.offset,a=i.start.offset<n.start.offset&&n.start.offset<i.end.offset,l=i.start.offset<n.end.offset&&n.end.offset<i.end.offset;if(s||o||a||l){if(o&&o||a&&l)continue;throw new ds(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(i.start)} intersect.`)}}}}function GJ(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(GJ).join(""):""}const POe=[TOe()];function AS(t){return[...t.transformers||[],...POe]}var Nd=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],OT={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",9:"strikethrough"};function NOe(t,e){const n=t.indexOf("\x1B[",e);if(n!==-1){const r=t.indexOf("m",n);return{sequence:t.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:t.length}}function QF(t,e){let n=1;const r=t[e+n++];let i;if(r==="2"){const s=[t[e+n++],t[e+n++],t[e+n]].map(o=>Number.parseInt(o));s.length===3&&!s.some(o=>Number.isNaN(o))&&(i={type:"rgb",rgb:s})}else if(r==="5"){const s=Number.parseInt(t[e+n]);Number.isNaN(s)||(i={type:"table",index:Number(s)})}return[n,i]}function LOe(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n],i=Number.parseInt(r);if(!Number.isNaN(i))if(i===0)e.push({type:"resetAll"});else if(i<=9)OT[i]&&e.push({type:"setDecoration",value:OT[i]});else if(i<=29){const s=OT[i-20];s&&e.push({type:"resetDecoration",value:s})}else if(i<=37)e.push({type:"setForegroundColor",value:{type:"named",name:Nd[i-30]}});else if(i===38){const[s,o]=QF(t,n);o&&e.push({type:"setForegroundColor",value:o}),n+=s}else if(i===39)e.push({type:"resetForegroundColor"});else if(i<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:Nd[i-40]}});else if(i===48){const[s,o]=QF(t,n);o&&e.push({type:"setBackgroundColor",value:o}),n+=s}else i===49?e.push({type:"resetBackgroundColor"}):i>=90&&i<=97?e.push({type:"setForegroundColor",value:{type:"named",name:Nd[i-90+8]}}):i>=100&&i<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:Nd[i-100+8]}})}return e}function ROe(){let t=null,e=null,n=new Set;return{parse(r){const i=[];let s=0;do{const o=NOe(r,s),a=o.sequence?r.substring(s,o.startPosition):r.substring(s);if(a.length>0&&i.push({value:a,foreground:t,background:e,decorations:new Set(n)}),o.sequence){const l=LOe(o.sequence);for(const c of l)c.type==="resetAll"?(t=null,e=null,n.clear()):c.type==="resetForegroundColor"?t=null:c.type==="resetBackgroundColor"?e=null:c.type==="resetDecoration"&&n.delete(c.value);for(const c of l)c.type==="setForegroundColor"?t=c.value:c.type==="setBackgroundColor"?e=c.value:c.type==="setDecoration"&&n.add(c.value)}s=o.position}while(s<r.length);return i}}}var IOe={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function OOe(t=IOe){function e(a){return t[a]}function n(a){return`#${a.map(l=>Math.max(0,Math.min(l,255)).toString(16).padStart(2,"0")).join("")}`}let r;function i(){if(r)return r;r=[];for(let c=0;c<Nd.length;c++)r.push(e(Nd[c]));let a=[0,95,135,175,215,255];for(let c=0;c<6;c++)for(let u=0;u<6;u++)for(let h=0;h<6;h++)r.push(n([a[c],a[u],a[h]]));let l=8;for(let c=0;c<24;c++,l+=10)r.push(n([l,l,l]));return r}function s(a){return i()[a]}function o(a){switch(a.type){case"named":return e(a.name);case"rgb":return n(a.rgb);case"table":return s(a.index)}}return{value:o}}function DOe(t,e,n){const r=TS(t,n),i=Ak(e),s=OOe(Object.fromEntries(Nd.map(a=>[a,t.colors?.[`terminal.ansi${a[0].toUpperCase()}${a.substring(1)}`]]))),o=ROe();return i.map(a=>o.parse(a[0]).map(l=>{let c,u;l.decorations.has("reverse")?(c=l.background?s.value(l.background):t.bg,u=l.foreground?s.value(l.foreground):t.fg):(c=l.foreground?s.value(l.foreground):t.fg,u=l.background?s.value(l.background):void 0),c=Pd(c,r),u=Pd(u,r),l.decorations.has("dim")&&(c=MOe(c));let h=Bc.None;return l.decorations.has("bold")&&(h|=Bc.Bold),l.decorations.has("italic")&&(h|=Bc.Italic),l.decorations.has("underline")&&(h|=Bc.Underline),{content:l.value,offset:a[1],color:c,bgColor:u,fontStyle:h}}))}function MOe(t){const e=t.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(e)if(e[3]){const r=Math.round(Number.parseInt(e[3],16)/2).toString(16).padStart(2,"0");return`#${e[1]}${e[2]}${r}`}else return e[2]?`#${e[1]}${e[2]}80`:`#${Array.from(e[1]).map(r=>`${r}${r}`).join("")}80`;const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function II(t,e,n={}){const{lang:r="text",theme:i=t.getLoadedThemes()[0]}=n;if(NI(r)||RI(i))return Ak(e).map(l=>[{content:l[0],offset:l[1]}]);const{theme:s,colorMap:o}=t.setTheme(i);if(r==="ansi")return DOe(s,e,n);const a=t.getLanguage(r);if(n.grammarState){if(n.grammarState.lang!==a.name)throw new zc(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${a.name}"`);if(!n.grammarState.themes.includes(s.name))throw new zc(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${s.name}"`)}return FOe(e,a,s,o,n)}function jOe(...t){if(t.length===2)return by(t[1]);const[e,n,r={}]=t,{lang:i="text",theme:s=e.getLoadedThemes()[0]}=r;if(NI(i)||RI(s))throw new zc("Plain language does not have grammar state");if(i==="ansi")throw new zc("ANSI language does not have grammar state");const{theme:o,colorMap:a}=e.setTheme(s),l=e.getLanguage(i);return new Kg(PS(n,l,o,a,r).stateStack,l.name,o.name)}function FOe(t,e,n,r,i){const s=PS(t,e,n,r,i),o=new Kg(PS(t,e,n,r,i).stateStack,e.name,n.name);return Pk(s.tokens,o),s.tokens}function PS(t,e,n,r,i){const s=TS(n,i),{tokenizeMaxLineLength:o=0,tokenizeTimeLimit:a=500}=i,l=Ak(t);let c=i.grammarState?COe(i.grammarState,n.name)??YP:i.grammarContextCode!=null?PS(i.grammarContextCode,e,n,r,{...i,grammarState:void 0,grammarContextCode:void 0}).stateStack:YP,u=[];const h=[];for(let d=0,f=l.length;d<f;d++){const[m,g]=l[d];if(m===""){u=[],h.push([]);continue}if(o>0&&m.length>=o){u=[],h.push([{content:m,offset:g,color:"",fontStyle:0}]);continue}let b,y,v;i.includeExplanation&&(b=e.tokenizeLine(m,c),y=b.tokens,v=0);const x=e.tokenizeLine2(m,c,a),w=x.tokens.length/2;for(let S=0;S<w;S++){const E=x.tokens[2*S],k=S+1<w?x.tokens[2*S+2]:m.length;if(E===k)continue;const _=x.tokens[2*S+1],L=Pd(r[og.getForeground(_)],s),R=og.getFontStyle(_),C={content:m.substring(E,k),offset:g+E,color:L,fontStyle:R};if(i.includeExplanation){const P=[];if(i.includeExplanation!=="scopeName")for(const N of n.settings){let H;switch(typeof N.scope){case"string":H=N.scope.split(/,/).map(Q=>Q.trim());break;case"object":H=N.scope;break;default:continue}P.push({settings:N,selectors:H.map(Q=>Q.split(/ /))})}C.explanation=[];let O=0;for(;E+O<k;){const N=y[v],H=m.substring(N.startIndex,N.endIndex);O+=H.length,C.explanation.push({content:H,scopes:i.includeExplanation==="scopeName"?BOe(N.scopes):UOe(P,N.scopes)}),v+=1}}u.push(C)}h.push(u),u=[],c=x.ruleStack}return{tokens:h,stateStack:c}}function BOe(t){return t.map(e=>({scopeName:e}))}function UOe(t,e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n[r]={scopeName:s,themeMatches:HOe(t,s,e.slice(0,r))}}return n}function eB(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function $Oe(t,e,n){if(!eB(t[t.length-1],e))return!1;let r=t.length-2,i=n.length-1;for(;r>=0&&i>=0;)eB(t[r],n[i])&&(r-=1),i-=1;return r===-1}function HOe(t,e,n){const r=[];for(const{selectors:i,settings:s}of t)for(const o of i)if($Oe(o,e,n)){r.push(s);break}return r}function qJ(t,e,n){const r=Object.entries(n.themes).filter(l=>l[1]).map(l=>({color:l[0],theme:l[1]})),i=r.map(l=>{const c=II(t,e,{...n,theme:l.theme}),u=by(c),h=typeof l.theme=="string"?l.theme:l.theme.name;return{tokens:c,state:u,theme:h}}),s=zOe(...i.map(l=>l.tokens)),o=s[0].map((l,c)=>l.map((u,h)=>{const d={content:u.content,variants:{},offset:u.offset};return"includeExplanation"in n&&n.includeExplanation&&(d.explanation=u.explanation),s.forEach((f,m)=>{const{content:g,explanation:b,offset:y,...v}=f[c][h];d.variants[r[m].color]=v}),d})),a=i[0].state?new Kg(Object.fromEntries(i.map(l=>[l.theme,l.state?.getInternalStack(l.theme)])),i[0].state.lang):void 0;return a&&Pk(o,a),o}function zOe(...t){const e=t.map(()=>[]),n=t.length;for(let r=0;r<t[0].length;r++){const i=t.map(l=>l[r]),s=e.map(()=>[]);e.forEach((l,c)=>l.push(s[c]));const o=i.map(()=>0),a=i.map(l=>l[0]);for(;a.every(l=>l);){const l=Math.min(...a.map(c=>c.content.length));for(let c=0;c<n;c++){const u=a[c];u.content.length===l?(s[c].push(u),o[c]+=1,a[c]=i[c][o[c]]):(s[c].push({...u,content:u.content.slice(0,l)}),a[c]={...u,content:u.content.slice(l),offset:u.offset+l})}}}return e}function NS(t,e,n){let r,i,s,o,a,l;if("themes"in n){const{defaultColor:c="light",cssVariablePrefix:u="--shiki-"}=n,h=Object.entries(n.themes).filter(b=>b[1]).map(b=>({color:b[0],theme:b[1]})).sort((b,y)=>b.color===c?-1:y.color===c?1:0);if(h.length===0)throw new zc("`themes` option must not be empty");const d=qJ(t,e,n);if(l=by(d),c&&!h.find(b=>b.color===c))throw new zc(`\`themes\` option must contain the defaultColor key \`${c}\``);const f=h.map(b=>t.getTheme(b.theme)),m=h.map(b=>b.color);s=d.map(b=>b.map(y=>VOe(y,m,u,c))),l&&Pk(s,l);const g=h.map(b=>TS(b.theme,n));i=h.map((b,y)=>(y===0&&c?"":`${u+b.color}:`)+(Pd(f[y].fg,g[y])||"inherit")).join(";"),r=h.map((b,y)=>(y===0&&c?"":`${u+b.color}-bg:`)+(Pd(f[y].bg,g[y])||"inherit")).join(";"),o=`shiki-themes ${f.map(b=>b.name).join(" ")}`,a=c?void 0:[i,r].join(";")}else if("theme"in n){const c=TS(n.theme,n);s=II(t,e,n);const u=t.getTheme(n.theme);r=Pd(u.bg,c),i=Pd(u.fg,c),o=u.name,l=by(s)}else throw new zc("Invalid options, either `theme` or `themes` must be provided");return{tokens:s,fg:i,bg:r,themeName:o,rootStyle:a,grammarState:l}}function VOe(t,e,n,r){const i={content:t.content,explanation:t.explanation,offset:t.offset},s=e.map(l=>VJ(t.variants[l])),o=new Set(s.flatMap(l=>Object.keys(l))),a={};return s.forEach((l,c)=>{for(const u of o){const h=l[u]||"inherit";if(c===0&&r)a[u]=h;else{const d=u==="color"?"":u==="background-color"?"-bg":`-${u}`,f=n+e[c]+(u==="color"?"":d);a[f]=h}}}),i.htmlStyle=a,i}function LS(t,e,n,r={meta:{},options:n,codeToHast:(i,s)=>LS(t,i,s),codeToTokens:(i,s)=>NS(t,i,s)}){let i=e;for(const f of AS(n))i=f.preprocess?.call(r,i,n)||i;let{tokens:s,fg:o,bg:a,themeName:l,rootStyle:c,grammarState:u}=NS(t,i,n);const{mergeWhitespaces:h=!0}=n;h===!0?s=GOe(s):h==="never"&&(s=qOe(s));const d={...r,get source(){return i}};for(const f of AS(n))s=f.tokens?.call(d,s)||s;return WOe(s,{...n,fg:o,bg:a,themeName:l,rootStyle:c},d,u)}function WOe(t,e,n,r=by(t)){const i=AS(e),s=[],o={type:"root",children:[]},{structure:a="classic",tabindex:l="0"}=e;let c={type:"element",tagName:"pre",properties:{class:`shiki ${e.themeName||""}`,style:e.rootStyle||`background-color:${e.bg};color:${e.fg}`,...l!==!1&&l!=null?{tabindex:l.toString()}:{},...Object.fromEntries(Array.from(Object.entries(e.meta||{})).filter(([m])=>!m.startsWith("_")))},children:[]},u={type:"element",tagName:"code",properties:{},children:s};const h=[],d={...n,structure:a,addClassToHast:HJ,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return o},get pre(){return c},get code(){return u},get lines(){return h}};if(t.forEach((m,g)=>{g&&(a==="inline"?o.children.push({type:"element",tagName:"br",properties:{},children:[]}):a==="classic"&&s.push({type:"text",value:`
`}));let b={type:"element",tagName:"span",properties:{class:"line"},children:[]},y=0;for(const v of m){let x={type:"element",tagName:"span",properties:{...v.htmlAttrs},children:[{type:"text",value:v.content}]};v.htmlStyle;const w=EOe(v.htmlStyle||VJ(v));w&&(x.properties.style=w);for(const S of i)x=S?.span?.call(d,x,g+1,y,b,v)||x;a==="inline"?o.children.push(x):a==="classic"&&b.children.push(x),y+=v.content.length}if(a==="classic"){for(const v of i)b=v?.line?.call(d,b,g+1)||b;h.push(b),s.push(b)}}),a==="classic"){for(const m of i)u=m?.code?.call(d,u)||u;c.children.push(u);for(const m of i)c=m?.pre?.call(d,c)||c;o.children.push(c)}let f=o;for(const m of i)f=m?.root?.call(d,f)||f;return r&&Pk(f,r),f}function GOe(t){return t.map(e=>{const n=[];let r="",i=0;return e.forEach((s,o)=>{const l=!(s.fontStyle&&s.fontStyle&Bc.Underline);l&&s.content.match(/^\s+$/)&&e[o+1]?(i||(i=s.offset),r+=s.content):r?(l?n.push({...s,offset:i,content:r+s.content}):n.push({content:r,offset:i},s),i=0,r=""):n.push(s)}),n})}function qOe(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,i,s,o]=r;if(!i&&!o)return n;const a=[{...n,offset:n.offset+i.length,content:s}];return i&&a.unshift({content:i,offset:n.offset}),o&&a.push({content:o,offset:n.offset+i.length+s.length}),a}))}function KOe(t,e,n){const r={meta:{},options:n,codeToHast:(s,o)=>LS(t,s,o),codeToTokens:(s,o)=>NS(t,s,o)};let i=yOe(LS(t,e,n,r));for(const s of AS(n))i=s.postprocess?.call(r,i,n)||i;return i}const tB={light:"#333333",dark:"#bbbbbb"},nB={light:"#fffffe",dark:"#1e1e1e"},rB="__shiki_resolved";function OI(t){if(t?.[rB])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:n,fg:r}=e;if(!n||!r){const a=e.settings?e.settings.find(l=>!l.name&&!l.scope):void 0;a?.settings?.foreground&&(r=a.settings.foreground),a?.settings?.background&&(n=a.settings.background),!r&&e?.colors?.["editor.foreground"]&&(r=e.colors["editor.foreground"]),!n&&e?.colors?.["editor.background"]&&(n=e.colors["editor.background"]),r||(r=e.type==="light"?tB.light:tB.dark),n||(n=e.type==="light"?nB.light:nB.dark),e.fg=r,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let i=0;const s=new Map;function o(a){if(s.has(a))return s.get(a);i+=1;const l=`#${i.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${l}`]?o(a):(s.set(a,l),l)}e.settings=e.settings.map(a=>{const l=a.settings?.foreground&&!a.settings.foreground.startsWith("#"),c=a.settings?.background&&!a.settings.background.startsWith("#");if(!l&&!c)return a;const u={...a,settings:{...a.settings}};if(l){const h=o(a.settings.foreground);e.colorReplacements[h]=a.settings.foreground,u.settings.foreground=h}if(c){const h=o(a.settings.background);e.colorReplacements[h]=a.settings.background,u.settings.background=h}return u});for(const a of Object.keys(e.colors||{}))if((a==="editor.foreground"||a==="editor.background"||a.startsWith("terminal.ansi"))&&!e.colors[a]?.startsWith("#")){const l=o(e.colors[a]);e.colorReplacements[l]=e.colors[a],e.colors[a]=l}return Object.defineProperty(e,rB,{enumerable:!1,writable:!1,value:!0}),e}async function KJ(t){return Array.from(new Set((await Promise.all(t.filter(e=>!LI(e)).map(async e=>await zJ(e).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function YJ(t){return(await Promise.all(t.map(async n=>$J(n)?null:OI(await zJ(n))))).filter(n=>!!n)}let YOe=class extends lIe{constructor(e,n,r,i={}){super(e),this._resolver=e,this._themes=n,this._langs=r,this._alias=i,this._themes.map(s=>this.loadTheme(s)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const n=OI(e);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let n=this._textmateThemeCache.get(e);n||(n=wS.createFromRawTheme(e),this._textmateThemeCache.set(e,n)),this._syncRegistry.setTheme(n)}getGrammar(e){if(this._alias[e]){const n=new Set([e]);for(;this._alias[e];){if(e=this._alias[e],n.has(e))throw new ds(`Circular alias \`${Array.from(n).join(" -> ")} -> ${e}\``);n.add(e)}}return this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const n=new Set([...this._langMap.values()].filter(s=>s.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const r={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const i=this.loadGrammarWithConfiguration(e.scopeName,1,r);if(i.name=e.name,this._resolvedGrammars.set(e.name,i),e.aliases&&e.aliases.forEach(s=>{this._alias[s]=e.name}),this._loadedLanguagesCache=null,n.size)for(const s of n)this._resolvedGrammars.delete(s.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(s.scopeName),this._syncRegistry?._grammars?.delete(s.scopeName),this.loadLanguage(this._langMap.get(s.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const i of e)this.resolveEmbeddedLanguages(i);const n=Array.from(this._langGraph.entries()),r=n.filter(([i,s])=>!s);if(r.length){const i=n.filter(([s,o])=>o&&o.embeddedLangs?.some(a=>r.map(([l])=>l).includes(a))).filter(s=>!r.includes(s));throw new ds(`Missing languages ${r.map(([s])=>`\`${s}\``).join(", ")}, required by ${i.map(([s])=>`\`${s}\``).join(", ")}`)}for(const[i,s]of n)this._resolver.addLanguage(s);for(const[i,s]of n)this.loadLanguage(s)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){if(this._langMap.set(e.name,e),this._langGraph.set(e.name,e),e.embeddedLangs)for(const n of e.embeddedLangs)this._langGraph.set(n,this._langMap.get(n))}};class XOe{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,n){this._onigLib={createOnigScanner:r=>e.createScanner(r),createOnigString:r=>e.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let r=[];for(let i=1;i<=n.length;i++){const s=n.slice(0,i).join(".");r=[...r,...this._injections.get(s)||[]]}return r}}let tb=0;function ZOe(t){tb+=1,t.warnings!==!1&&tb>=10&&tb%10===0&&console.warn(`[Shiki] ${tb} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new ds("`engine` option is required for synchronous mode");const n=(t.langs||[]).flat(1),r=(t.themes||[]).flat(1).map(OI),i=new XOe(t.engine,n),s=new YOe(i,r,n,t.langAlias);let o;function a(v){b();const x=s.getGrammar(typeof v=="string"?v:v.name);if(!x)throw new ds(`Language \`${v}\` not found, you may need to load it first`);return x}function l(v){if(v==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};b();const x=s.getTheme(v);if(!x)throw new ds(`Theme \`${v}\` not found, you may need to load it first`);return x}function c(v){b();const x=l(v);o!==v&&(s.setTheme(x),o=v);const w=s.getColorMap();return{theme:x,colorMap:w}}function u(){return b(),s.getLoadedThemes()}function h(){return b(),s.getLoadedLanguages()}function d(...v){b(),s.loadLanguages(v.flat(1))}async function f(...v){return d(await KJ(v))}function m(...v){b();for(const x of v.flat(1))s.loadTheme(x)}async function g(...v){return b(),m(await YJ(v))}function b(){if(e)throw new ds("Shiki instance has been disposed")}function y(){e||(e=!0,s.dispose(),tb-=1)}return{setTheme:c,getTheme:l,getLanguage:a,getLoadedThemes:u,getLoadedLanguages:h,loadLanguage:f,loadLanguageSync:d,loadTheme:g,loadThemeSync:m,dispose:y,[Symbol.dispose]:y}}async function JOe(t={}){t.loadWasm;const[e,n,r]=await Promise.all([YJ(t.themes||[]),KJ(t.langs||[]),t.engine||hJ(t.loadWasm||wRe())]);return ZOe({...t,themes:e,langs:n,engine:r})}async function QOe(t={}){const e=await JOe(t);return{getLastGrammarState:(...n)=>jOe(e,...n),codeToTokensBase:(n,r)=>II(e,n,r),codeToTokensWithThemes:(n,r)=>qJ(e,n,r),codeToTokens:(n,r)=>NS(e,n,r),codeToHast:(n,r)=>LS(e,n,r),codeToHtml:(n,r)=>KOe(e,n,r),...e,getInternalContext:()=>e}}function eDe(t,e,n){let r,i,s;{const a=t;r=a.langs,i=a.themes,s=a.engine}async function o(a){function l(f){if(typeof f=="string"){if(LI(f))return[];const m=r[f];if(!m)throw new zc(`Language \`${f}\` is not included in this bundle. You may want to load it from external source.`);return m}return f}function c(f){if($J(f))return"none";if(typeof f=="string"){const m=i[f];if(!m)throw new zc(`Theme \`${f}\` is not included in this bundle. You may want to load it from external source.`);return m}return f}const u=(a.themes??[]).map(f=>c(f)),h=(a.langs??[]).map(f=>l(f)),d=await QOe({engine:a.engine??s(),...a,themes:u,langs:h});return{...d,loadLanguage(...f){return d.loadLanguage(...f.map(l))},loadTheme(...f){return d.loadTheme(...f.map(c))}}}return o}function tDe(t){let e;async function n(r={}){if(e){const i=await e;return await Promise.all([i.loadTheme(...r.themes||[]),i.loadLanguage(...r.langs||[])]),i}else return e=t({...r,themes:r.themes||[],langs:r.langs||[]}),e}return n}function nDe(t){const e=tDe(t);return{getSingletonHighlighter(n){return e(n)},async codeToHtml(n,r){return(await e({langs:[r.lang],themes:"theme"in r?[r.theme]:Object.values(r.themes)})).codeToHtml(n,r)},async codeToHast(n,r){return(await e({langs:[r.lang],themes:"theme"in r?[r.theme]:Object.values(r.themes)})).codeToHast(n,r)},async codeToTokens(n,r){return(await e({langs:[r.lang],themes:"theme"in r?[r.theme]:Object.values(r.themes)})).codeToTokens(n,r)},async codeToTokensBase(n,r){return(await e({langs:[r.lang],themes:[r.theme]})).codeToTokensBase(n,r)},async codeToTokensWithThemes(n,r){return(await e({langs:[r.lang],themes:Object.values(r.themes).filter(Boolean)})).codeToTokensWithThemes(n,r)},async getLastGrammarState(n,r){return(await e({langs:[r.lang],themes:[r.theme]})).getLastGrammarState(n,r)}}}const DI=eDe({langs:uJ,themes:iRe,engine:()=>hJ(ye(()=>import("./wasm-CG6Dc4jp.js"),[]))}),{codeToHtml:rDe}=nDe(DI),iDe=t=>DI(t),sDe={langs:["shell"],themes:["light-plus","dark-plus"]},oDe=await DI(sDe),aDe=A.memo(({messageId:t})=>{const e=A.useRef(!1),[n,r]=A.useState(!1),[i,s]=A.useState(!1),a=Ot(Nt.artifacts)[t],l=Ot(XN(a.runner.actions,u=>Object.values(u))),c=()=>{e.current=!0,r(!n)};return A.useEffect(()=>{if(l.length&&!n&&!e.current&&r(!0),l.length!==0&&a.type==="bundled"){const u=!l.find(h=>h.status!=="complete");i!==u&&s(u)}},[l]),p.jsxs("div",{className:"artifact border border-bolt-elements-borderColor flex flex-col overflow-hidden rounded-lg w-full transition-border duration-150",children:[p.jsxs("div",{className:"flex",children:[p.jsxs("button",{className:"flex items-stretch bg-bolt-elements-artifacts-background hover:bg-bolt-elements-artifacts-backgroundHover w-full overflow-hidden",onClick:()=>{const u=Nt.showWorkbench.get();Nt.showWorkbench.set(!u)},children:[a.type=="bundled"&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"p-4",children:i?p.jsx("div",{className:"i-ph:files-light",style:{fontSize:"2rem"}}):p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg",style:{fontSize:"2rem"}})}),p.jsx("div",{className:"bg-bolt-elements-artifacts-borderColor w-[1px]"})]}),p.jsxs("div",{className:"px-5 p-3.5 w-full text-left",children:[p.jsx("div",{className:"w-full text-bolt-elements-textPrimary font-medium leading-5 text-sm",children:a?.title}),p.jsx("div",{className:"w-full w-full text-bolt-elements-textSecondary text-xs mt-0.5",children:"Click to open Workbench"})]})]}),p.jsx("div",{className:"bg-bolt-elements-artifacts-borderColor w-[1px]"}),p.jsx(Ql,{children:l.length&&a.type!=="bundled"&&p.jsx(at.button,{initial:{width:0},animate:{width:"auto"},exit:{width:0},transition:{duration:.15,ease:So},className:"bg-bolt-elements-artifacts-background hover:bg-bolt-elements-artifacts-backgroundHover",onClick:c,children:p.jsx("div",{className:"p-4",children:p.jsx("div",{className:n?"i-ph:caret-up-bold":"i-ph:caret-down-bold"})})})})]}),p.jsx(Ql,{children:a.type!=="bundled"&&n&&l.length>0&&p.jsxs(at.div,{className:"actions",initial:{height:0},animate:{height:"auto"},exit:{height:"0px"},transition:{duration:.15},children:[p.jsx("div",{className:"bg-bolt-elements-artifacts-borderColor h-[1px]"}),p.jsx("div",{className:"p-5 text-left bg-bolt-elements-actions-background",children:p.jsx(hDe,{actions:l})})]})})]})});function lDe({classsName:t,code:e}){return p.jsx("div",{className:Ae("text-xs",t),dangerouslySetInnerHTML:{__html:oDe.codeToHtml(e,{lang:"shell",theme:"dark-plus"})}})}const cDe={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};function uDe(t){Nt.currentView.get()!=="code"&&Nt.currentView.set("code"),Nt.setSelectedFile(`${Kc}/${t}`)}const hDe=A.memo(({actions:t})=>p.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:p.jsx("ul",{className:"list-none space-y-2.5",children:t.map((e,n)=>{const{status:r,type:i,content:s}=e,o=n===t.length-1;return p.jsxs(at.li,{variants:cDe,initial:"hidden",animate:"visible",transition:{duration:.2,ease:So},children:[p.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[p.jsx("div",{className:Ae("text-lg",dDe(e.status)),children:r==="running"?p.jsx(p.Fragment,{children:i!=="start"?p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg"}):p.jsx("div",{className:"i-ph:terminal-window-duotone"})}):r==="pending"?p.jsx("div",{className:"i-ph:circle-duotone"}):r==="complete"?p.jsx("div",{className:"i-ph:check"}):r==="failed"||r==="aborted"?p.jsx("div",{className:"i-ph:x"}):null}),i==="file"?p.jsxs("div",{children:["Create"," ",p.jsx("code",{className:"bg-bolt-elements-artifacts-inlineCode-background text-bolt-elements-artifacts-inlineCode-text px-1.5 py-1 rounded-md text-bolt-elements-item-contentAccent hover:underline cursor-pointer",onClick:()=>uDe(e.filePath),children:e.filePath})]}):i==="shell"?p.jsx("div",{className:"flex items-center w-full min-h-[28px]",children:p.jsx("span",{className:"flex-1",children:"Run command"})}):i==="start"?p.jsx("a",{onClick:a=>{a.preventDefault(),Nt.currentView.set("preview")},className:"flex items-center w-full min-h-[28px]",children:p.jsx("span",{className:"flex-1",children:"Start Application"})}):null]}),(i==="shell"||i==="start")&&p.jsx(lDe,{classsName:Ae("mt-1",{"mb-3.5":!o}),code:s})]},n)})})}));function dDe(t){switch(t){case"pending":return"text-bolt-elements-textTertiary";case"running":return"text-bolt-elements-loader-progress";case"complete":return"text-bolt-elements-icon-success";case"aborted":return"text-bolt-elements-textSecondary";case"failed":return"text-bolt-elements-icon-error";default:return}}const fDe="y",pDe={CopyButtonContainer:fDe},iB=Ws("CodeBlock"),mDe=A.memo(({className:t,code:e,language:n="plaintext",theme:r="dark-plus",disableCopy:i=!1})=>{const[s,o]=A.useState(void 0),[a,l]=A.useState(!1),c=()=>{a||(navigator.clipboard.writeText(e),l(!0),setTimeout(()=>{l(!1)},2e3))};return A.useEffect(()=>{n&&!LI(n)&&!(n in uJ)&&iB.warn(`Unsupported language '${n}'`),iB.trace(`Language = ${n}`),(async()=>{o(await rDe(e,{lang:n,theme:r}))})()},[e]),p.jsxs("div",{className:Ae("relative group text-left",t),children:[p.jsx("div",{className:Ae(pDe.CopyButtonContainer,"bg-transparant absolute top-[10px] right-[10px] rounded-md z-10 text-lg flex items-center justify-center opacity-0 group-hover:opacity-100",{"rounded-l-0 opacity-100":a}),children:!i&&p.jsx("button",{className:Ae("flex items-center bg-accent-500 p-[6px] justify-center before:bg-white before:rounded-l-md before:text-gray-500 before:border-r before:border-gray-300 rounded-md transition-theme",{"before:opacity-0":!a,"before:opacity-100":a}),title:"Copy Code",onClick:()=>c(),children:p.jsx("div",{className:"i-ph:clipboard-text-duotone"})})}),p.jsx("div",{dangerouslySetInnerHTML:{__html:s??""}})]})}),gDe="x",bDe={MarkdownContent:gDe},yDe=({title:t,children:e})=>{const[n,r]=A.useState(!1);return p.jsxs("div",{onClick:()=>r(!n),className:`
        bg-bolt-elements-background-depth-2
        shadow-md 
        rounded-lg 
        cursor-pointer 
        transition-all 
        duration-300
        ${n?"max-h-96":"max-h-13"}
        overflow-auto
        border border-bolt-elements-borderColor
      `,children:[p.jsxs("div",{className:"p-4 flex items-center gap-4 rounded-lg  text-bolt-elements-textSecondary font-medium leading-5 text-sm  border border-bolt-elements-borderColor",children:[p.jsx("div",{className:"i-ph:brain-thin text-2xl"}),p.jsxs("div",{className:"div",children:[p.jsxs("span",{children:[" ",t]})," ",!n&&p.jsx("span",{className:"text-bolt-elements-textTertiary",children:" - Click to expand"})]})]}),p.jsx("div",{className:`
        transition-opacity 
        duration-300
        p-4 
        rounded-lg 
        ${n?"opacity-100":"opacity-0"}
      `,children:e})]})},sB=Ws("MarkdownComponent"),ag=A.memo(({children:t,html:e=!1,limitedMarkdown:n=!1})=>{sB.trace("Render");const r=A.useMemo(()=>({div:({className:i,children:s,node:o,...a})=>{if(i?.includes("__boltArtifact__")){const l=o?.properties.dataMessageId;return l||sB.error(`Invalid message id ${l}`),p.jsx(aDe,{messageId:l})}return i?.includes("__boltThought__")?p.jsx(yDe,{title:"Thought process",children:s}):p.jsx("div",{className:i,...a,children:s})},pre:i=>{const{children:s,node:o,...a}=i,[l]=o?.children??[];if(l&&l.type==="element"&&l.tagName==="code"&&l.children[0].type==="text"){const{className:c,...u}=l.properties,[,h="plaintext"]=/language-(\w+)/.exec(String(c)||"")??[];return p.jsx(mDe,{code:l.children[0].value,language:h,...u})}return p.jsx("pre",{...a,children:s})}}),[]);return p.jsx(XLe,{allowedElements:iI,className:bDe.MarkdownContent,components:r,remarkPlugins:qTe(n),rehypePlugins:KTe(e),children:vDe(t)})}),vDe=t=>{if(!t||!t.includes("__boltArtifact__"))return t;const e=t.split(`
`),n=e.findIndex(r=>r.includes("__boltArtifact__"));return n===-1?t:(n>0&&e[n-1]?.trim().match(/^```\w*$/)&&(e[n-1]=""),n<e.length-1&&e[n+1]?.trim().match(/^```$/)&&(e[n+1]=""),e.join(`
`))},xDe=({progress:t})=>p.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:p.jsx(at.div,{className:"h-full bg-blue-500",initial:{width:0},animate:{width:`${t}%`},transition:{duration:.3}})}),_De=({progress:t})=>p.jsxs("div",{className:"mt-4 space-y-2",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-sm font-medium",children:t.message}),p.jsxs("span",{className:"text-sm text-gray-500",children:[t.progress,"%"]})]}),p.jsx(xDe,{progress:t.progress||0}),t.details&&p.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[t.details.changedFiles&&t.details.changedFiles.length>0&&p.jsxs("div",{className:"mt-4",children:[p.jsx("div",{className:"font-medium mb-2",children:"Changed Files:"}),p.jsx("div",{className:"space-y-2",children:["Modified","Added","Deleted"].map(e=>{const n=t.details?.changedFiles?.filter(r=>r.startsWith(e))||[];return n.length===0?null:p.jsxs("div",{className:"space-y-1",children:[p.jsxs("div",{className:Ae("text-sm font-medium",{"text-blue-500":e==="Modified","text-green-500":e==="Added","text-red-500":e==="Deleted"}),children:[e," (",n.length,")"]}),p.jsx("div",{className:"pl-4 space-y-1",children:n.map((r,i)=>{const s=r.split(": ")[1];return p.jsxs("div",{className:"text-sm text-bolt-elements-textSecondary flex items-center gap-2",children:[p.jsx("div",{className:Ae("w-4 h-4",{"i-ph:pencil-simple":e==="Modified","i-ph:plus":e==="Added","i-ph:trash":e==="Deleted","text-blue-500":e==="Modified","text-green-500":e==="Added","text-red-500":e==="Deleted"})}),p.jsx("span",{className:"font-mono text-xs",children:s})]},i)})})]},e)})})]}),t.details.totalSize&&p.jsxs("div",{className:"mt-1",children:["Total size: ",t.details.totalSize]}),t.details.additions!==void 0&&t.details.deletions!==void 0&&p.jsxs("div",{className:"mt-1",children:["Changes: ",p.jsxs("span",{className:"text-green-600",children:["+",t.details.additions]})," ",p.jsxs("span",{className:"text-red-600",children:["-",t.details.deletions]})]}),t.details.currentCommit&&t.details.remoteCommit&&p.jsxs("div",{className:"mt-1",children:["Updating from ",t.details.currentCommit," to ",t.details.remoteCommit]})]})]}),wDe=()=>{const{isLatestBranch:t}=Dh(),[e,n]=A.useState(!1),[r,i]=A.useState(null),[s,o]=A.useState(()=>{const f=localStorage.getItem("update_settings");return f?JSON.parse(f):{autoUpdate:!1,notifyInApp:!0,checkInterval:24}}),[a,l]=A.useState(!1),[c,u]=A.useState(null);A.useEffect(()=>{localStorage.setItem("update_settings",JSON.stringify(s))},[s]);const h=async()=>{console.log("Starting update check..."),n(!0),i(null),u(null);try{const m=await fetch("/api/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch:t?"main":"stable",autoUpdate:s.autoUpdate})});if(!m.ok)throw new Error(`Update check failed: ${m.statusText}`);const g=m.body?.getReader();if(!g)throw new Error("No response stream available");for(;;){const{done:b,value:y}=await g.read();if(b)break;const x=new TextDecoder().decode(y).split(`
`).filter(Boolean);for(const w of x)try{const S=JSON.parse(w);u(S),S.error&&i(S.error),S.stage==="complete"&&(n(!1),S.error||(He.success("Update check completed"),S.details?.changedFiles?.length&&S.details.updateReady&&l(!0)))}catch(S){console.error("Error parsing progress update:",S)}}}catch(f){i(f instanceof Error?f.message:"Unknown error occurred"),Ut.logWarning("Update Check Failed",{type:"update",message:f instanceof Error?f.message:"Unknown error occurred"})}finally{n(!1)}},d=async()=>{l(!1);try{const m=await fetch("/api/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch:t?"main":"stable",autoUpdate:!0})});if(!m.ok)throw new Error(`Update failed: ${m.statusText}`);const g=m.body?.getReader();if(!g)throw new Error("No response stream available");for(;;){const{done:b,value:y}=await g.read();if(b)break;const x=new TextDecoder().decode(y).split(`
`).filter(Boolean);for(const w of x)try{const S=JSON.parse(w);u(S),S.error&&(i(S.error),He.error("Update failed")),S.stage==="complete"&&!S.error&&He.success("Update completed successfully")}catch(S){console.error("Error parsing update progress:",S)}}}catch(f){i(f instanceof Error?f.message:"Unknown error occurred"),He.error("Update failed")}};return p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs(at.div,{className:"flex items-center gap-3",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:[p.jsx("div",{className:"i-ph:arrow-circle-up text-xl text-blue-500"})," ",p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:"Updates"}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:"Check for and manage application updates"})]})]}),p.jsxs(at.div,{className:"p-6 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},children:[p.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[p.jsx("div",{className:"i-ph:gear text-blue-500 w-5 h-5"})," ",p.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:"Update Settings"})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-sm text-bolt-elements-textPrimary",children:"Automatic Updates"}),p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary",children:"Automatically check and apply updates when available"})]}),p.jsx("button",{onClick:()=>o(f=>({...f,autoUpdate:!f.autoUpdate})),className:Ae("relative inline-flex h-6 w-11 items-center rounded-full transition-colors",s.autoUpdate?"bg-blue-500":"bg-gray-200 dark:bg-gray-700"),children:p.jsx("span",{className:Ae("inline-block h-4 w-4 transform rounded-full bg-white transition-transform",s.autoUpdate?"translate-x-6":"translate-x-1")})})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-sm text-bolt-elements-textPrimary",children:"In-App Notifications"}),p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary",children:"Show notifications when updates are available"})]}),p.jsx("button",{onClick:()=>o(f=>({...f,notifyInApp:!f.notifyInApp})),className:Ae("relative inline-flex h-6 w-11 items-center rounded-full transition-colors",s.notifyInApp?"bg-blue-500":"bg-gray-200 dark:bg-gray-700"),children:p.jsx("span",{className:Ae("inline-block h-4 w-4 transform rounded-full bg-white transition-transform",s.notifyInApp?"translate-x-6":"translate-x-1")})})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-sm text-bolt-elements-textPrimary",children:"Check Interval"}),p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary",children:"How often to check for updates"})]}),p.jsxs("select",{value:s.checkInterval,onChange:f=>o(m=>({...m,checkInterval:Number(f.target.value)})),className:Ae("px-3 py-2 rounded-lg text-sm","bg-[#F5F5F5] dark:bg-[#1A1A1A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","text-bolt-elements-textPrimary","hover:bg-[#E5E5E5] dark:hover:bg-[#2A2A2A]","transition-colors duration-200"),children:[p.jsx("option",{value:"6",children:"6 hours"}),p.jsx("option",{value:"12",children:"12 hours"}),p.jsx("option",{value:"24",children:"24 hours"}),p.jsx("option",{value:"48",children:"48 hours"})]})]})]})]}),p.jsxs(at.div,{className:"p-6 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"i-ph:arrows-clockwise text-blue-500 w-5 h-5"})," ",p.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:"Update Status"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[c?.details?.updateReady&&!s.autoUpdate&&p.jsxs("button",{onClick:d,className:Ae("flex items-center gap-2 px-4 py-2 rounded-lg text-sm","bg-blue-500 text-white","hover:bg-blue-600","transition-colors duration-200"),children:[p.jsx("div",{className:"i-ph:arrow-circle-up w-4 h-4"}),"Update Now"]}),p.jsx("button",{onClick:()=>{i(null),h()},className:Ae("flex items-center gap-2 px-4 py-2 rounded-lg text-sm","bg-[#F5F5F5] dark:bg-[#1A1A1A]","hover:bg-blue-500/10 hover:text-blue-500","dark:hover:bg-blue-500/20 dark:hover:text-blue-500","text-bolt-elements-textPrimary","transition-colors duration-200","disabled:opacity-50 disabled:cursor-not-allowed"),disabled:e,children:e?p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(at.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"i-ph:arrows-clockwise w-4 h-4"}),"Checking..."]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:arrows-clockwise w-4 h-4"}),"Check for Updates"]})})]})]}),c&&p.jsx(_De,{progress:c}),r&&p.jsx("div",{className:"mt-4 p-4 bg-red-100 text-red-700 rounded",children:r}),c?.details?.currentCommit&&c?.details?.remoteCommit&&p.jsxs("div",{className:"mt-4 text-sm text-bolt-elements-textSecondary",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsxs("p",{children:["Updates are fetched from: ",p.jsx("span",{className:"font-mono",children:"stackblitz-labs/bolt.diy"})," (",t?"main":"stable"," branch)"]}),p.jsxs("p",{className:"mt-1",children:["Current version: ",p.jsx("span",{className:"font-mono",children:c.details.currentCommit}),p.jsx("span",{className:"mx-2",children:""}),"Latest version: ",p.jsx("span",{className:"font-mono",children:c.details.remoteCommit})]})]}),c?.details?.compareUrl&&p.jsxs("a",{href:c.details.compareUrl,target:"_blank",rel:"noopener noreferrer",className:Ae("flex items-center gap-2 px-4 py-2 rounded-lg text-sm","bg-[#F5F5F5] dark:bg-[#1A1A1A]","hover:bg-blue-500/10 hover:text-blue-500","dark:hover:bg-blue-500/20 dark:hover:text-blue-500","text-bolt-elements-textPrimary","transition-colors duration-200","w-fit"),children:[p.jsx("div",{className:"i-ph:github-logo w-4 h-4"}),"View Changes on GitHub"]})]}),c?.details?.additions!==void 0&&c?.details?.deletions!==void 0&&p.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:git-diff text-blue-500 w-4 h-4"})," ","Changes: ",p.jsxs("span",{className:"text-green-600",children:["+",c.details.additions]})," ",p.jsxs("span",{className:"text-red-600",children:["-",c.details.deletions]})]})]}),c?.details?.changelog&&p.jsxs("div",{className:"mb-6",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("div",{className:"i-ph:scroll text-blue-500 w-5 h-5"})," ",p.jsx("p",{className:"font-medium",children:"Changelog"})]}),p.jsx("div",{className:"bg-[#F5F5F5] dark:bg-[#1A1A1A] rounded-lg p-4 overflow-auto max-h-[300px]",children:p.jsx("div",{className:"prose dark:prose-invert prose-sm max-w-none",children:p.jsx(ag,{children:c.details.changelog})})})]}),c?.details?.compareUrl&&p.jsx("div",{className:"mt-4",children:p.jsxs("a",{href:c.details.compareUrl,target:"_blank",rel:"noopener noreferrer",className:Ae("flex items-center gap-2 px-4 py-2 rounded-lg text-sm","bg-[#F5F5F5] dark:bg-[#1A1A1A]","hover:bg-blue-500/10 hover:text-blue-500","dark:hover:bg-blue-500/20 dark:hover:text-blue-500","text-bolt-elements-textPrimary","transition-colors duration-200","w-fit"),children:[p.jsx("div",{className:"i-ph:github-logo w-4 h-4"}),"View Changes on GitHub"]})}),c?.details?.commitMessages&&c.details.commitMessages.length>0&&p.jsxs("div",{className:"mb-6",children:[p.jsx("p",{className:"font-medium mb-2",children:"Changes in this Update:"}),p.jsx("div",{className:"bg-[#F5F5F5] dark:bg-[#1A1A1A] rounded-lg p-4 overflow-auto max-h-[400px]",children:p.jsx("div",{className:"prose dark:prose-invert prose-sm max-w-none",children:c.details.commitMessages.map((f,m)=>p.jsx(ag,{children:f},m))})})]})]}),p.jsx(xo,{open:a,onOpenChange:l,children:p.jsxs(df,{children:[p.jsx(Zc,{children:"Update Available"}),p.jsx(BW,{children:p.jsxs("div",{className:"mt-4",children:[p.jsxs("p",{className:"text-sm text-bolt-elements-textSecondary mb-4",children:["A new version is available from ",p.jsx("span",{className:"font-mono",children:"stackblitz-labs/bolt.diy"})," (",t?"main":"stable"," branch)"]}),c?.details?.compareUrl&&p.jsx("div",{className:"mb-6",children:p.jsxs("a",{href:c.details.compareUrl,target:"_blank",rel:"noopener noreferrer",className:Ae("flex items-center gap-2 px-4 py-2 rounded-lg text-sm","bg-[#F5F5F5] dark:bg-[#1A1A1A]","hover:bg-blue-500/10 hover:text-blue-500","dark:hover:bg-blue-500/20 dark:hover:text-blue-500","text-bolt-elements-textPrimary","transition-colors duration-200","w-fit"),children:[p.jsx("div",{className:"i-ph:github-logo w-4 h-4"}),"View Changes on GitHub"]})}),c?.details?.commitMessages&&c.details.commitMessages.length>0&&p.jsxs("div",{className:"mb-6",children:[p.jsx("p",{className:"font-medium mb-2",children:"Commit Messages:"}),p.jsx("div",{className:"bg-[#F5F5F5] dark:bg-[#1A1A1A] rounded-lg p-3 space-y-2",children:c.details.commitMessages.map((f,m)=>p.jsxs("div",{className:"text-sm text-bolt-elements-textSecondary flex items-start gap-2",children:[p.jsx("div",{className:"i-ph:git-commit text-blue-500 w-4 h-4 mt-0.5 flex-shrink-0"})," ",p.jsx("span",{children:f})]},m))})]}),c?.details?.totalSize&&p.jsxs("div",{className:"flex items-center gap-4 text-sm text-bolt-elements-textSecondary",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:file text-blue-500 w-4 h-4"})," ","Total size: ",c.details.totalSize]}),c?.details?.additions!==void 0&&c?.details?.deletions!==void 0&&p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:git-diff text-blue-500 w-4 h-4"})," ","Changes: ",p.jsxs("span",{className:"text-green-600",children:["+",c.details.additions]})," ",p.jsxs("span",{className:"text-red-600",children:["-",c.details.deletions]})]})]})]})}),p.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[p.jsx(Yd,{type:"secondary",onClick:()=>l(!1),children:"Cancel"}),p.jsx(Yd,{type:"primary",onClick:d,children:"Update Now"})]})]})})]})};function SDe(){const[t,e]=A.useState({user:null,token:"",tokenType:"classic"}),[n,r]=A.useState(!0),[i,s]=A.useState(!1),[o,a]=A.useState(!1),[l,c]=A.useState(!1),u=async m=>{try{a(!0);const g=await fetch("https://api.github.com/user/repos?sort=updated&per_page=10&affiliation=owner,organization_member,collaborator",{headers:{Authorization:`Bearer ${m}`}});if(!g.ok)throw new Error("Failed to fetch repositories");const b=await g.json(),y=await fetch("https://api.github.com/user/orgs",{headers:{Authorization:`Bearer ${m}`}});if(!y.ok)throw new Error("Failed to fetch organizations");const v=await y.json(),x=await fetch("https://api.github.com/users/"+t.user?.login+"/events/public",{headers:{Authorization:`Bearer ${m}`}});if(!x.ok)throw new Error("Failed to fetch events");const w=(await x.json()).slice(0,5),S=b.map(C=>fetch(C.languages_url,{headers:{Authorization:`Bearer ${m}`}}).then(P=>P.json())),E=await Promise.all(S),k={};E.forEach(C=>{Object.entries(C).forEach(([P,O])=>{k[P]=(k[P]||0)+O})});const _=b.reduce((C,P)=>C+P.stargazers_count,0),L=b.reduce((C,P)=>C+P.forks_count,0),R=t.user?.public_gists||0;e(C=>({...C,stats:{repos:b,totalStars:_,totalForks:L,organizations:v,recentActivity:w,languages:k,totalGists:R}}))}catch(g){Ut.logError("Failed to fetch GitHub stats",{error:g}),He.error("Failed to fetch GitHub statistics")}finally{a(!1)}};if(A.useEffect(()=>{const m=localStorage.getItem("github_connection");if(m){const g=JSON.parse(m);g.tokenType||(g.tokenType="classic"),e(g),g.user&&g.token&&u(g.token)}r(!1)},[]),n||i||o)return p.jsx(EDe,{});const h=async m=>{try{s(!0);const g=await fetch("https://api.github.com/user",{headers:{Authorization:`Bearer ${m}`}});if(!g.ok)throw new Error("Invalid token or unauthorized");const b=await g.json(),y={user:b,token:m,tokenType:t.tokenType};localStorage.setItem("github_connection",JSON.stringify(y)),Zr.set("githubToken",m),Zr.set("githubUsername",b.login),Zr.set("git:github.com",JSON.stringify({username:m,password:"x-oauth-basic"})),e(y),await u(m),He.success("Successfully connected to GitHub")}catch(g){Ut.logError("Failed to authenticate with GitHub",{error:g}),He.error("Failed to connect to GitHub"),e({user:null,token:"",tokenType:"classic"})}finally{s(!1)}},d=async m=>{m.preventDefault(),await h(t.token)},f=()=>{localStorage.removeItem("github_connection"),e({user:null,token:"",tokenType:"classic"}),He.success("Disconnected from GitHub")};return p.jsx(at.div,{className:"bg-[#FFFFFF] dark:bg-[#0A0A0A] rounded-lg border border-[#E5E5E5] dark:border-[#1A1A1A]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:p.jsxs("div",{className:"p-6 space-y-6",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:github-logo w-5 h-5 text-bolt-elements-textPrimary"}),p.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"GitHub Connection"})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary mb-2",children:"Token Type"}),p.jsxs("select",{value:t.tokenType,onChange:m=>e(g=>({...g,tokenType:m.target.value})),disabled:i||!!t.user,className:Ae("w-full px-3 py-2 rounded-lg text-sm","bg-[#F8F8F8] dark:bg-[#1A1A1A]","border border-[#E5E5E5] dark:border-[#333333]","text-bolt-elements-textPrimary","focus:outline-none focus:ring-1 focus:ring-purple-500","disabled:opacity-50"),children:[p.jsx("option",{value:"classic",children:"Personal Access Token (Classic)"}),p.jsx("option",{value:"fine-grained",children:"Fine-grained Token"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary mb-2",children:t.tokenType==="classic"?"Personal Access Token":"Fine-grained Token"}),p.jsx("input",{type:"password",value:t.token,onChange:m=>e(g=>({...g,token:m.target.value})),disabled:i||!!t.user,placeholder:`Enter your GitHub ${t.tokenType==="classic"?"personal access token":"fine-grained token"}`,className:Ae("w-full px-3 py-2 rounded-lg text-sm","bg-[#F8F8F8] dark:bg-[#1A1A1A]","border border-[#E5E5E5] dark:border-[#333333]","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-1 focus:ring-purple-500","disabled:opacity-50")}),p.jsxs("div",{className:"mt-2 text-sm text-bolt-elements-textSecondary",children:[p.jsxs("a",{href:`https://github.com/settings/tokens${t.tokenType==="fine-grained"?"/beta":"/new"}`,target:"_blank",rel:"noopener noreferrer",className:"text-purple-500 hover:underline inline-flex items-center gap-1",children:["Get your token",p.jsx("div",{className:"i-ph:arrow-square-out w-10 h-5"})]}),p.jsx("span",{className:"mx-2",children:""}),p.jsxs("span",{children:["Required scopes:"," ",t.tokenType==="classic"?"repo, read:org, read:user":"Repository access, Organization access"]})]})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[t.user?p.jsxs("button",{onClick:f,className:Ae("px-4 py-2 rounded-lg text-sm flex items-center gap-2","bg-red-500 text-white","hover:bg-red-600"),children:[p.jsx("div",{className:"i-ph:plug-x w-4 h-4"}),"Disconnect"]}):p.jsx("button",{onClick:d,disabled:i||!t.token,className:Ae("px-4 py-2 rounded-lg text-sm flex items-center gap-2","bg-purple-500 text-white","hover:bg-purple-600","disabled:opacity-50 disabled:cursor-not-allowed"),children:i?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:spinner-gap animate-spin"}),"Connecting..."]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:plug-charging w-4 h-4"}),"Connect"]})}),t.user&&p.jsxs("span",{className:"text-sm text-bolt-elements-textSecondary flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:check-circle w-4 h-4"}),"Connected to GitHub"]})]}),t.user&&t.stats&&p.jsxs("div",{className:"mt-6 border-t border-[#E5E5E5] dark:border-[#1A1A1A] pt-6",children:[p.jsx("button",{onClick:()=>c(!l),className:"w-full bg-transparent",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("img",{src:t.user.avatar_url,alt:t.user.login,className:"w-16 h-16 rounded-full"}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:t.user.name||t.user.login}),p.jsx("div",{className:Ae("i-ph:caret-down w-4 h-4 text-bolt-elements-textSecondary transition-transform",l?"rotate-180":"")})]}),t.user.bio&&p.jsx("p",{className:"text-sm text-start text-bolt-elements-textSecondary",children:t.user.bio}),p.jsxs("div",{className:"flex gap-4 mt-2 text-sm text-bolt-elements-textSecondary",children:[p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:users w-4 h-4"}),t.user.followers," followers"]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:book-bookmark w-4 h-4"}),t.user.public_repos," public repos"]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:star w-4 h-4"}),t.stats.totalStars," stars"]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:git-fork w-4 h-4"}),t.stats.totalForks," forks"]})]})]})]})}),l&&p.jsxs("div",{className:"pt-4",children:[t.stats.organizations.length>0&&p.jsxs("div",{className:"mb-6",children:[p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-3",children:"Organizations"}),p.jsx("div",{className:"flex flex-wrap gap-3",children:t.stats.organizations.map(m=>p.jsxs("a",{href:m.html_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-2 rounded-lg bg-[#F8F8F8] dark:bg-[#1A1A1A] hover:bg-[#F0F0F0] dark:hover:bg-[#252525] transition-colors",children:[p.jsx("img",{src:m.avatar_url,alt:m.login,className:"w-6 h-6 rounded-md"}),p.jsx("span",{className:"text-sm text-bolt-elements-textPrimary",children:m.login})]},m.login))})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-3",children:"Top Languages"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(t.stats.languages).sort(([,m],[,g])=>g-m).slice(0,5).map(([m])=>p.jsx("span",{className:"px-3 py-1 text-xs rounded-full bg-purple-500/10 text-purple-500 dark:bg-purple-500/20",children:m},m))})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-3",children:"Recent Activity"}),p.jsx("div",{className:"space-y-3",children:t.stats.recentActivity.map(m=>p.jsxs("div",{className:"p-3 rounded-lg bg-[#F8F8F8] dark:bg-[#1A1A1A] text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2 text-bolt-elements-textPrimary",children:[p.jsx("div",{className:"i-ph:git-commit w-4 h-4 text-bolt-elements-textSecondary"}),p.jsx("span",{className:"font-medium",children:m.type.replace("Event","")}),p.jsx("span",{children:"on"}),p.jsx("a",{href:`https://github.com/${m.repo.name}`,target:"_blank",rel:"noopener noreferrer",className:"text-purple-500 hover:underline",children:m.repo.name})]}),p.jsxs("div",{className:"mt-1 text-xs text-bolt-elements-textSecondary",children:[new Date(m.created_at).toLocaleDateString()," at"," ",new Date(m.created_at).toLocaleTimeString()]})]},m.id))})]}),p.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[p.jsxs("div",{className:"p-4 rounded-lg bg-[#F8F8F8] dark:bg-[#1A1A1A]",children:[p.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Member Since"}),p.jsx("div",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:new Date(t.user.created_at).toLocaleDateString()})]}),p.jsxs("div",{className:"p-4 rounded-lg bg-[#F8F8F8] dark:bg-[#1A1A1A]",children:[p.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Public Gists"}),p.jsx("div",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:t.stats.totalGists})]}),p.jsxs("div",{className:"p-4 rounded-lg bg-[#F8F8F8] dark:bg-[#1A1A1A]",children:[p.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Organizations"}),p.jsx("div",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:t.stats.organizations.length})]}),p.jsxs("div",{className:"p-4 rounded-lg bg-[#F8F8F8] dark:bg-[#1A1A1A]",children:[p.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Languages"}),p.jsx("div",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:Object.keys(t.stats.languages).length})]})]}),p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-3",children:"Recent Repositories"}),p.jsx("div",{className:"space-y-3",children:t.stats.repos.map(m=>p.jsx("a",{href:m.html_url,target:"_blank",rel:"noopener noreferrer",className:"block p-3 rounded-lg bg-[#F8F8F8] dark:bg-[#1A1A1A] hover:bg-[#F0F0F0] dark:hover:bg-[#252525] transition-colors",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsxs("h5",{className:"text-sm font-medium text-bolt-elements-textPrimary flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:git-repository w-4 h-4 text-bolt-elements-textSecondary"}),m.name]}),m.description&&p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary mt-1",children:m.description}),p.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-bolt-elements-textSecondary",children:[p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:git-branch w-3 h-3"}),m.default_branch]}),p.jsx("span",{children:""}),p.jsxs("span",{children:["Updated ",new Date(m.updated_at).toLocaleDateString()]})]})]}),p.jsxs("div",{className:"flex items-center gap-3 text-xs text-bolt-elements-textSecondary",children:[p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:star w-3 h-3"}),m.stargazers_count]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:git-fork w-3 h-3"}),m.forks_count]})]})]})},m.full_name))})]})]})]})})}function EDe(){return p.jsx("div",{className:"flex items-center justify-center p-4",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Loading..."})]})})}const oB=typeof window<"u"?localStorage.getItem("netlify_connection"):null,kDe=oB?JSON.parse(oB):{user:null,token:"",stats:void 0},lg=qn(kDe),DT=qn(!1),QP=qn(!1),Rb=t=>{const n={...lg.get(),...t};lg.set(n),typeof window<"u"&&localStorage.setItem("netlify_connection",JSON.stringify(n))};async function e4(t){try{QP.set(!0);const e=await fetch("https://api.netlify.com/api/v1/sites",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!e.ok)throw new Error(`Failed to fetch sites: ${e.status}`);const n=await e.json(),r=lg.get();Rb({...r,stats:{sites:n,totalSites:n.length}})}catch(e){console.error("Netlify API Error:",e),Ut.logError("Failed to fetch Netlify stats",{error:e}),He.error("Failed to fetch Netlify statistics")}finally{QP.set(!1)}}function CDe(){const t=Ot(lg),e=Ot(DT),n=Ot(QP),[r,i]=A.useState(!1);A.useEffect(()=>{(async()=>{t.user&&t.token&&await e4(t.token)})()},[t.user,t.token]);const s=async a=>{a.preventDefault(),DT.set(!0);try{const l=await fetch("https://api.netlify.com/api/v1/user",{headers:{Authorization:`Bearer ${t.token}`,"Content-Type":"application/json"}});if(!l.ok)throw new Error("Invalid token or unauthorized");const c=await l.json();Rb({user:c,token:t.token}),await e4(t.token),He.success("Successfully connected to Netlify")}catch(l){console.error("Auth error:",l),Ut.logError("Failed to authenticate with Netlify",{error:l}),He.error("Failed to connect to Netlify"),Rb({user:null,token:""})}finally{DT.set(!1)}},o=()=>{Rb({user:null,token:""}),He.success("Disconnected from Netlify")};return p.jsx(at.div,{className:"bg-[#FFFFFF] dark:bg-[#0A0A0A] rounded-lg border border-[#E5E5E5] dark:border-[#1A1A1A]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:p.jsxs("div",{className:"p-6 space-y-6",children:[p.jsx("div",{className:"flex items-center justify-between",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("img",{className:"w-5 h-5",height:"24",width:"24",crossOrigin:"anonymous",src:"https://cdn.simpleicons.org/netlify"}),p.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"Netlify Connection"})]})}),t.user?p.jsxs("div",{className:"space-y-6",children:[p.jsx("div",{className:"flex items-center justify-between",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("button",{onClick:o,className:Ae("px-4 py-2 rounded-lg text-sm flex items-center gap-2","bg-red-500 text-white","hover:bg-red-600"),children:[p.jsx("div",{className:"i-ph:plug w-4 h-4"}),"Disconnect"]}),p.jsxs("span",{className:"text-sm text-bolt-elements-textSecondary flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:check-circle w-4 h-4 text-green-500"}),"Connected to Netlify"]})]})}),p.jsxs("div",{className:"flex items-center gap-4 p-4 bg-[#F8F8F8] dark:bg-[#1A1A1A] rounded-lg",children:[p.jsx("img",{src:t.user.avatar_url,referrerPolicy:"no-referrer",crossOrigin:"anonymous",alt:t.user.full_name,className:"w-12 h-12 rounded-full border-2 border-[#00AD9F]"}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:t.user.full_name}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:t.user.email})]})]}),n?p.jsxs("div",{className:"flex items-center gap-2 text-sm text-bolt-elements-textSecondary",children:[p.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}),"Fetching Netlify sites..."]}):p.jsxs("div",{children:[p.jsxs("button",{onClick:()=>i(!r),className:"w-full bg-transparent text-left text-sm font-medium text-bolt-elements-textPrimary mb-3 flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:buildings w-4 h-4"}),"Your Sites (",t.stats?.totalSites||0,")",p.jsx("div",{className:Ae("i-ph:caret-down w-4 h-4 ml-auto transition-transform",r?"rotate-180":"")})]}),r&&t.stats?.sites?.length?p.jsx("div",{className:"grid gap-3",children:t.stats.sites.map(a=>p.jsx("a",{href:a.admin_url,target:"_blank",rel:"noopener noreferrer",className:"block p-4 rounded-lg border border-[#E5E5E5] dark:border-[#1A1A1A] hover:border-[#00AD9F] dark:hover:border-[#00AD9F] transition-colors",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsxs("h5",{className:"text-sm font-medium text-bolt-elements-textPrimary flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:globe w-4 h-4 text-[#00AD9F]"}),a.name]}),p.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-bolt-elements-textSecondary",children:[p.jsx("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#00AD9F]",children:a.url}),a.published_deploy&&p.jsxs(p.Fragment,{children:[p.jsx("span",{children:""}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:clock w-3 h-3"}),new Date(a.published_deploy.published_at).toLocaleDateString()]})]})]})]}),a.build_settings?.provider&&p.jsx("div",{className:"text-xs text-bolt-elements-textSecondary px-2 py-1 rounded-md bg-[#F0F0F0] dark:bg-[#252525]",children:p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:git-branch w-3 h-3"}),a.build_settings.provider]})})]})},a.id))}):r?p.jsxs("div",{className:"text-sm text-bolt-elements-textSecondary flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:info w-4 h-4"}),"No sites found in your Netlify account"]}):null]})]}):p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary mb-2",children:"Personal Access Token"}),p.jsx("input",{type:"password",value:t.token,onChange:a=>Rb({...t,token:a.target.value}),disabled:e,placeholder:"Enter your Netlify personal access token",className:Ae("w-full px-3 py-2 rounded-lg text-sm","bg-[#F8F8F8] dark:bg-[#1A1A1A]","border border-[#E5E5E5] dark:border-[#333333]","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-1 focus:ring-[#00AD9F]","disabled:opacity-50")}),p.jsx("div",{className:"mt-2 text-sm text-bolt-elements-textSecondary",children:p.jsxs("a",{href:"https://app.netlify.com/user/applications#personal-access-tokens",target:"_blank",rel:"noopener noreferrer",className:"text-[#00AD9F] hover:underline inline-flex items-center gap-1",children:["Get your token",p.jsx("div",{className:"i-ph:arrow-square-out w-4 h-4"})]})})]}),p.jsx("button",{onClick:s,disabled:e||!t.token,className:Ae("px-4 py-2 rounded-lg text-sm flex items-center gap-2","bg-[#00AD9F] text-white","hover:bg-[#00968A]","disabled:opacity-50 disabled:cursor-not-allowed"),children:e?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:spinner-gap animate-spin"}),"Connecting..."]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:plug-charging w-4 h-4"}),"Connect"]})})]})]})})}function TDe(){return p.jsxs("div",{className:"space-y-4",children:[p.jsxs(at.div,{className:"flex items-center gap-2 mb-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[p.jsx("div",{className:"i-ph:plugs-connected w-5 h-5 text-purple-500"}),p.jsx("h2",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:"Connection Settings"})]}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mb-6",children:"Manage your external service connections and integrations"}),p.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[p.jsx(SDe,{}),p.jsx(CDe,{})]})]})}function XJ(t){return li({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M.045 18.02c.072-.116.187-.124.348-.022 3.636 2.11 7.594 3.166 11.87 3.166 2.852 0 5.668-.533 8.447-1.595l.315-.14c.138-.06.234-.1.293-.13.226-.088.39-.046.525.13.12.174.09.336-.12.48-.256.19-.6.41-1.006.654-1.244.743-2.64 1.316-4.185 1.726a17.617 17.617 0 01-10.951-.577 17.88 17.88 0 01-5.43-3.35c-.1-.074-.151-.15-.151-.22 0-.047.021-.09.051-.13zm6.565-6.218c0-1.005.247-1.863.743-2.577.495-.71 1.17-1.25 2.04-1.615.796-.335 1.756-.575 2.912-.72.39-.046 1.033-.103 1.92-.174v-.37c0-.93-.105-1.558-.3-1.875-.302-.43-.78-.65-1.44-.65h-.182c-.48.046-.896.196-1.246.46-.35.27-.575.63-.675 1.096-.06.3-.206.465-.435.51l-2.52-.315c-.248-.06-.372-.18-.372-.39 0-.046.007-.09.022-.15.247-1.29.855-2.25 1.82-2.88.976-.616 2.1-.975 3.39-1.05h.54c1.65 0 2.957.434 3.888 1.29.135.15.27.3.405.48.12.165.224.314.283.45.075.134.15.33.195.57.06.254.105.42.135.51.03.104.062.3.076.615.01.313.02.493.02.553v5.28c0 .376.06.72.165 1.036.105.313.21.54.315.674l.51.674c.09.136.136.256.136.36 0 .12-.06.226-.18.314-1.2 1.05-1.86 1.62-1.963 1.71-.165.135-.375.15-.63.045a6.062 6.062 0 01-.526-.496l-.31-.347a9.391 9.391 0 01-.317-.42l-.3-.435c-.81.886-1.603 1.44-2.4 1.665-.494.15-1.093.227-1.83.227-1.11 0-2.04-.343-2.76-1.034-.72-.69-1.08-1.665-1.08-2.94l-.05-.076zm3.753-.438c0 .566.14 1.02.425 1.364.285.34.675.512 1.155.512.045 0 .106-.007.195-.02.09-.016.134-.023.166-.023.614-.16 1.08-.553 1.424-1.178.165-.28.285-.58.36-.91.09-.32.12-.59.135-.8.015-.195.015-.54.015-1.005v-.54c-.84 0-1.484.06-1.92.18-1.275.36-1.92 1.17-1.92 2.43l-.035-.02zm9.162 7.027c.03-.06.075-.11.132-.17.362-.243.714-.41 1.05-.5a8.094 8.094 0 011.612-.24c.14-.012.28 0 .41.03.65.06 1.05.168 1.172.33.063.09.099.228.099.39v.15c0 .51-.149 1.11-.424 1.8-.278.69-.664 1.248-1.156 1.68-.073.06-.14.09-.197.09-.03 0-.06 0-.09-.012-.09-.044-.107-.12-.064-.24.54-1.26.806-2.143.806-2.64 0-.15-.03-.27-.087-.344-.145-.166-.55-.257-1.224-.257-.243 0-.533.016-.87.046-.363.045-.7.09-1 .135-.09 0-.148-.014-.18-.044-.03-.03-.036-.047-.02-.077 0-.017.006-.03.02-.063v-.06z"},child:[]}]})(t)}function ZJ(t){return li({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"},child:[]}]})(t)}function JJ(t){return li({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.4446 11.5059c0 1.1021.1673 2.1585.4847 3.1563-.0378-.0028-.0691-.0058-.1058-.0058-.4209 0-.8015.16-1.0704.4512-.3454.3737-.4984.8335-.4316 1.293a1.576 1.576 0 0 0 .2148.5978c-.2319.1864-.4018.4456-.4844.7578-.0646.2448-.131.7543.2149 1.2794a1.4552 1.4552 0 0 0-.0625.1055c-.208.3923-.2207.8372-.0371 1.25.2783.6258.9696 1.1175 2.3126 1.6467.8356.3292 1.5988.5411 1.6056.543 1.1046.2847 2.104.4277 2.969.4277 1.4173 0 2.4754-.3849 3.1525-1.1446 1.538.2651 2.791.1403 3.592.006.6773.7555 1.7332 1.1387 3.1467 1.1387.8649 0 1.8643-.143 2.969-.4278.0068-.0019.77-.2138 1.6056-.543 1.343-.5292 2.0343-1.0208 2.3126-1.6466.1836-.4129.171-.8577-.037-1.25a1.4685 1.4685 0 0 0-.0626-.1056c.346-.525.2795-1.0346.2149-1.2793-.0826-.3122-.2525-.5714-.4844-.7579.11-.1816.1831-.3788.2148-.5977.0669-.4595-.0862-.9193-.4316-1.293-.2688-.2913-.6495-.4513-1.0704-.4513-.0209 0-.0376.0008-.0588.0018.3162-.9966.4846-2.0518.4846-3.1523 0-5.807-4.7362-10.5144-10.5789-10.5144-5.8426 0-10.5788 4.7073-10.5788 10.5144Zm10.5788-9.4831c5.2727 0 9.5476 4.246 9.5476 9.483a9.4201 9.4201 0 0 1-.2696 2.2365c-.0039-.0047-.0079-.011-.0117-.0156-.274-.3255-.6679-.5059-1.1075-.5059-.352 0-.714.1155-1.0763.3438-.2403.1517-.5058.422-.7793.7598-.2534-.3492-.608-.5832-1.0137-.6465a1.5174 1.5174 0 0 0-.2344-.0176c-.9263 0-1.4828.7993-1.6935 1.5177-.1046.2426-.6065 1.3482-1.3614 2.0978-1.1681 1.1601-1.4458 2.3534-.8396 3.6382-.843.1029-1.5836.0927-2.365-.006.5906-1.212.3626-2.4388-.8426-3.6322-.755-.7496-1.2568-1.8552-1.3614-2.0978-.2107-.7184-.7673-1.5177-1.6935-1.5177-.078 0-.1568.0054-.2344.0176-.4057.0633-.7604.2973-1.0137.6465-.2735-.3379-.539-.6081-.7794-.7598-.3622-.2283-.7243-.3438-1.0762-.3438-.4266 0-.8094.171-1.0821.4786a9.4208 9.4208 0 0 1-.2598-2.1936c0-5.237 4.2749-9.483 9.5475-9.483zM8.6443 7.0036c-.4838.0043-.9503.2667-1.1934.7227-.3536.6633-.1006 1.4873.5645 1.84.351.1862.4883-.5261.836-.6485.3107-.1095.841.399 1.0078.086.3536-.6634.1025-1.4874-.5625-1.84a1.3659 1.3659 0 0 0-.6524-.1602Zm6.8403 0c-.2199-.002-.4426.05-.6504.1602-.665.3526-.9181 1.1766-.5645 1.84.1669.313.6971-.1955 1.0079-.086.3476.1224.4867.8347.838.6485.6649-.3527.916-1.1767.5624-1.84-.243-.456-.7096-.7184-1.1934-.7227Zm-9.7565 1.418a.8768.8768 0 0 0-.877.877c0 .4846.3925.877.877.877a.8768.8768 0 0 0 .877-.877.8768.8768 0 0 0-.877-.877zm12.6434 0c-.4845 0-.879.3925-.879.877 0 .4846.3945.877.879.877a.8768.8768 0 0 0 .877-.877.8768.8768 0 0 0-.877-.877zM8.7927 11.459c-.179-.003-.2793.1107-.2793.416 0 .8097.3874 2.125 1.4279 2.924.207-.7123 1.3453-1.2832 1.5079-1.2012.2315.1167.2191.4417.6074.7266.3884-.285.374-.6098.6056-.7266.1627-.082 1.3009.4889 1.5079 1.2012 1.0404-.799 1.4278-2.1144 1.4278-2.924 0-1.2212-1.583.6402-3.5413.6485-1.4686-.0061-2.7266-1.0558-3.2639-1.0645zM4.312 14.4768c.5792.365 1.6964 2.2751 2.1056 3.0177.1371.2488.371.3536.582.3536.4188 0 .7465-.4138.0391-.9395-1.0636-.791-.6914-2.0846-.1836-2.1642a.4302.4302 0 0 1 .0664-.004c.4616 0 .666.7892.666.7892s.5959 1.4898 1.6213 2.508c.942.9356 1.062 1.703.4961 2.6661-.0164-.004-.0159.0236-.1484.2149-.1853.2673-.4322.4688-.7188.6152-.5062.2269-1.1397.2696-1.7833.2696-1.037 0-2.1017-.1824-2.6975-.336-.0293-.0075-3.6505-.9567-3.1916-1.8224.0771-.1454.2033-.2031.3633-.2031.6463 0 1.823.9551 2.3283.9551.113 0 .196-.0865.2285-.2031.2249-.8045-3.2787-1.0522-2.9846-2.1642.0519-.1967.193-.2757.3907-.2754.854 0 2.7704 1.4923 3.172 1.4923.0307 0 .0525-.0085.0645-.0274.2012-.3227.1096-.5865-1.3087-1.4395-1.4182-.8533-2.4315-1.329-1.8653-1.9416.0651-.0707.1574-.1015.2695-.1015.8611.0002 2.8948 1.84 2.8948 1.84s.5487.5683.8809.5683c.0762 0 .1416-.0315.1855-.1054.2355-.3946-2.1858-2.2183-2.3224-2.971-.0926-.51.0641-.7676.3555-.7676-.0006.008.1701-.0285.4942.1759zm16.2257.5918c-.1366.7526-2.5579 2.5764-2.3224 2.9709.044.074.1092.1055.1855.1055.3321 0 .881-.5684.881-.5684s2.0336-1.8397 2.8947-1.84c.1121 0 .2044.0308.2695.1016.5662.6125-.447 1.0882-1.8653 1.9415-1.4183.853-1.51 1.1168-1.3087 1.4396.012.0188.0337.0273.0644.0273.4016 0 2.3181-1.4923 3.1721-1.4923.1977-.0002.3388.0787.3907.2754.294 1.112-3.2095 1.3597-2.9846 2.1642.0325.1166.1156.2032.2285.2032.5054 0 1.682-.9552 2.3283-.9552.16 0 .2862.0577.3633.2032.459.8656-3.1623 1.8149-3.1916 1.8224-.5958.1535-1.6605.336-2.6975.336-.6351 0-1.261-.0409-1.7638-.2599-.2949-.1472-.5488-.3516-.7383-.625-.0411-.0682-.1026-.1476-.1426-.205-.5726-.9679-.455-1.7371.4903-2.676 1.0254-1.0182 1.6212-2.508 1.6212-2.508s.2044-.7891.666-.7891a.4318.4318 0 0 1 .0665.0039c.5078.0796.88 1.3732-.1836 2.1642-.7074.5257-.3797.9395.039.9395.211 0 .445-.1047.5821-.3535.4092-.7426 1.5264-2.6527 2.1056-3.0178.5588-.3524.99-.1816.8497.5918z"},child:[]}]})(t)}function QJ(t){return li({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M22.2819 9.8211a5.9847 5.9847 0 0 0-.5157-4.9108 6.0462 6.0462 0 0 0-6.5098-2.9A6.0651 6.0651 0 0 0 4.9807 4.1818a5.9847 5.9847 0 0 0-3.9977 2.9 6.0462 6.0462 0 0 0 .7427 7.0966 5.98 5.98 0 0 0 .511 4.9107 6.051 6.051 0 0 0 6.5146 2.9001A5.9847 5.9847 0 0 0 13.2599 24a6.0557 6.0557 0 0 0 5.7718-4.2058 5.9894 5.9894 0 0 0 3.9977-2.9001 6.0557 6.0557 0 0 0-.7475-7.0729zm-9.022 12.6081a4.4755 4.4755 0 0 1-2.8764-1.0408l.1419-.0804 4.7783-2.7582a.7948.7948 0 0 0 .3927-.6813v-6.7369l2.02 1.1686a.071.071 0 0 1 .038.052v5.5826a4.504 4.504 0 0 1-4.4945 4.4944zm-9.6607-4.1254a4.4708 4.4708 0 0 1-.5346-3.0137l.142.0852 4.783 2.7582a.7712.7712 0 0 0 .7806 0l5.8428-3.3685v2.3324a.0804.0804 0 0 1-.0332.0615L9.74 19.9502a4.4992 4.4992 0 0 1-6.1408-1.6464zM2.3408 7.8956a4.485 4.485 0 0 1 2.3655-1.9728V11.6a.7664.7664 0 0 0 .3879.6765l5.8144 3.3543-2.0201 1.1685a.0757.0757 0 0 1-.071 0l-4.8303-2.7865A4.504 4.504 0 0 1 2.3408 7.872zm16.5963 3.8558L13.1038 8.364 15.1192 7.2a.0757.0757 0 0 1 .071 0l4.8303 2.7913a4.4944 4.4944 0 0 1-.6765 8.1042v-5.6772a.79.79 0 0 0-.407-.667zm2.0107-3.0231l-.142-.0852-4.7735-2.7818a.7759.7759 0 0 0-.7854 0L9.409 9.2297V6.8974a.0662.0662 0 0 1 .0284-.0615l4.8303-2.7866a4.4992 4.4992 0 0 1 6.6802 4.66zM8.3065 12.863l-2.02-1.1638a.0804.0804 0 0 1-.038-.0567V6.0742a4.4992 4.4992 0 0 1 7.3757-3.4537l-.142.0805L8.704 5.459a.7948.7948 0 0 0-.3927.6813zm1.0976-2.3654l2.602-1.4998 2.6069 1.4998v2.9994l-2.5974 1.4997-2.6067-1.4997Z"},child:[]}]})(t)}function eQ(t){return li({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M22.3977 7.0896h-2.3106V.0676l-7.5094 6.3542V.1577h-1.1554v6.1966L4.4904 0v7.0896H1.6023v10.3976h2.8882V24l6.932-6.3591v6.2005h1.1554v-6.0469l6.9318 6.1807v-6.4879h2.8882V7.0896zm-3.4657-4.531v4.531h-5.355l5.355-4.531zm-13.2862.0676 4.8691 4.4634H5.6458V2.6262zM2.7576 16.332V8.245h7.8476l-6.1149 6.1147v1.9723H2.7576zm2.8882 5.0404v-3.8852h.0001v-2.6488l5.7763-5.7764v7.0111l-5.7764 5.2993zm12.7086.0248-5.7766-5.1509V9.0618l5.7766 5.7766v6.5588zm2.8882-5.0652h-1.733v-1.9723L13.3948 8.245h7.8478v8.087z"},child:[]}]})(t)}function ADe(t){return li({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"},child:[]}]})(t)}function RS(t){return li({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383m.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z"},child:[]}]})(t)}function PDe(t){return li({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2"},child:[]}]})(t)}function gf(t){return li({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6 12.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5M3 8.062C3 6.76 4.235 5.765 5.53 5.886a26.6 26.6 0 0 0 4.94 0C11.765 5.765 13 6.76 13 8.062v1.157a.93.93 0 0 1-.765.935c-.845.147-2.34.346-4.235.346s-3.39-.2-4.235-.346A.93.93 0 0 1 3 9.219zm4.542-.827a.25.25 0 0 0-.217.068l-.92.9a25 25 0 0 1-1.871-.183.25.25 0 0 0-.068.495c.55.076 1.232.149 2.02.193a.25.25 0 0 0 .189-.071l.754-.736.847 1.71a.25.25 0 0 0 .404.062l.932-.97a25 25 0 0 0 1.922-.188.25.25 0 0 0-.068-.495c-.538.074-1.207.145-1.98.189a.25.25 0 0 0-.166.076l-.754.785-.842-1.7a.25.25 0 0 0-.182-.135"},child:[]},{tag:"path",attr:{d:"M8.5 1.866a1 1 0 1 0-1 0V3h-2A4.5 4.5 0 0 0 1 7.5V8a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1v1a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-1a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1v-.5A4.5 4.5 0 0 0 10.5 3h-2zM14 7.5V13a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7.5A3.5 3.5 0 0 1 5.5 4h5A3.5 3.5 0 0 1 14 7.5"},child:[]}]})(t)}function aB(t){return li({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"},child:[]}]})(t)}function MI(t){return li({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9 9h6v6H9z"},child:[]},{tag:"path",attr:{d:"M20 6c0-1.103-.897-2-2-2h-2V2h-2v2h-4V2H8v2H6c-1.103 0-2 .897-2 2v2H2v2h2v4H2v2h2v2c0 1.103.897 2 2 2h2v2h2v-2h4v2h2v-2h2c1.103 0 2-.897 2-2v-2h2v-2h-2v-4h2V8h-2V6zM6 18V6h12l.002 12H6z"},child:[]}]})(t)}function tQ(t){return li({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 3H4c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2zM4 19V7h16l.002 12H4z"},child:[]},{tag:"path",attr:{d:"M9.293 9.293 5.586 13l3.707 3.707 1.414-1.414L8.414 13l2.293-2.293zm5.414 0-1.414 1.414L15.586 13l-2.293 2.293 1.414 1.414L18.414 13z"},child:[]}]})(t)}function nQ(t){return li({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M208 0c-29.9 0-54.7 20.5-61.8 48.2-.8 0-1.4-.2-2.2-.2-35.3 0-64 28.7-64 64 0 4.8.6 9.5 1.7 14C52.5 138 32 166.6 32 200c0 12.6 3.2 24.3 8.3 34.9C16.3 248.7 0 274.3 0 304c0 33.3 20.4 61.9 49.4 73.9-.9 4.6-1.4 9.3-1.4 14.1 0 39.8 32.2 72 72 72 4.1 0 8.1-.5 12-1.2 9.6 28.5 36.2 49.2 68 49.2 39.8 0 72-32.2 72-72V64c0-35.3-28.7-64-64-64zm368 304c0-29.7-16.3-55.3-40.3-69.1 5.2-10.6 8.3-22.3 8.3-34.9 0-33.4-20.5-62-49.7-74 1-4.5 1.7-9.2 1.7-14 0-35.3-28.7-64-64-64-.8 0-1.5.2-2.2.2C422.7 20.5 397.9 0 368 0c-35.3 0-64 28.6-64 64v376c0 39.8 32.2 72 72 72 31.8 0 58.4-20.7 68-49.2 3.9.7 7.9 1.2 12 1.2 39.8 0 72-32.2 72-72 0-4.8-.5-9.5-1.4-14.1 29-12 49.4-40.6 49.4-73.9z"},child:[]}]})(t)}function rQ(t){return li({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4z"},child:[]}]})(t)}const NDe={AmazonBedrock:XJ,Anthropic:nQ,Cohere:MI,Deepseek:tQ,Google:ZJ,Groq:RS,HuggingFace:JJ,Hyperbolic:iG,Mistral:rG,OpenAI:QJ,OpenRouter:rQ,Perplexity:eQ,Together:RS,XAI:gf},LDe={Anthropic:"Access Claude and other Anthropic models",OpenAI:"Use GPT-4, GPT-3.5, and other OpenAI models"},RDe=()=>{const t=Dh(),[e,n]=A.useState(null),[r,i]=A.useState([]),[s,o]=A.useState(!1);A.useEffect(()=>{const u=Object.entries(t.providers||{}).filter(([f])=>!["Ollama","LMStudio","OpenAILike"].includes(f)).map(([f,m])=>({name:f,settings:m.settings,staticModels:m.staticModels||[],getDynamicModels:m.getDynamicModels,getApiKeyLink:m.getApiKeyLink,labelForGetApiKey:m.labelForGetApiKey,icon:m.icon})),h=u.sort((f,m)=>f.name.localeCompare(m.name));i(h);const d=u.every(f=>f.settings.enabled);o(d)},[t.providers]);const a=A.useCallback(u=>{r.forEach(h=>{t.updateProviderSettings(h.name,{...h.settings,enabled:u})}),o(u),He.success(u?"All cloud providers enabled":"All cloud providers disabled")},[r,t]),l=A.useCallback((u,h)=>{t.updateProviderSettings(u.name,{...u.settings,enabled:h}),h?(Ut.logProvider(`Provider ${u.name} enabled`,{provider:u.name}),He.success(`${u.name} enabled`)):(Ut.logProvider(`Provider ${u.name} disabled`,{provider:u.name}),He.success(`${u.name} disabled`))},[t]),c=A.useCallback((u,h)=>{const d=h.trim()||void 0;t.updateProviderSettings(u.name,{...u.settings,baseUrl:d}),Ut.logProvider(`Base URL updated for ${u.name}`,{provider:u.name,baseUrl:d}),He.success(`${u.name} base URL updated`),n(null)},[t]);return p.jsx("div",{className:"space-y-6",children:p.jsxs(at.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[p.jsxs("div",{className:"flex items-center justify-between gap-4 mt-8 mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:Ae("w-8 h-8 flex items-center justify-center rounded-lg","bg-bolt-elements-background-depth-3","text-blue-500"),children:p.jsx(iG,{className:"w-5 h-5"})}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-md font-medium text-bolt-elements-textPrimary",children:"Cloud Providers"}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:"Connect to cloud-based AI models and services"})]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Enable All Cloud"}),p.jsx(Zo,{checked:s,onCheckedChange:a})]})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map((u,h)=>p.jsxs(at.div,{className:Ae("rounded-lg border bg-bolt-elements-background text-bolt-elements-textPrimary shadow-sm","bg-bolt-elements-background-depth-2","hover:bg-bolt-elements-background-depth-3","transition-all duration-200","relative overflow-hidden group","flex flex-col"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:h*.1},whileHover:{scale:1.02},children:[p.jsx("div",{className:"absolute top-0 right-0 p-2 flex gap-1",children:Qb.includes(u.name)&&p.jsx(at.span,{className:"px-2 py-0.5 text-xs rounded-full bg-blue-500/10 text-blue-500 font-medium",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Configurable"})}),p.jsxs("div",{className:"flex items-start gap-4 p-4",children:[p.jsx(at.div,{className:Ae("w-10 h-10 flex items-center justify-center rounded-xl","bg-bolt-elements-background-depth-3 group-hover:bg-bolt-elements-background-depth-4","transition-all duration-200",u.settings.enabled?"text-blue-500":"text-bolt-elements-textSecondary"),whileHover:{scale:1.1},whileTap:{scale:.9},children:p.jsx("div",{className:Ae("w-6 h-6","transition-transform duration-200","group-hover:rotate-12"),children:ut.createElement(NDe[u.name]||gf,{className:"w-full h-full","aria-label":`${u.name} logo`})})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-center justify-between gap-4 mb-2",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary group-hover:text-blue-500 transition-colors",children:u.name}),p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:LDe[u.name]||(Qb.includes(u.name)?"Configure custom endpoint for this provider":"Standard AI provider integration")})]}),p.jsx(Zo,{checked:u.settings.enabled,onCheckedChange:d=>l(u,d)})]}),u.settings.enabled&&Qb.includes(u.name)&&p.jsxs(at.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:[p.jsx("div",{className:"flex items-center gap-2 mt-4",children:e===u.name?p.jsx("input",{type:"text",defaultValue:u.settings.baseUrl,placeholder:`Enter ${u.name} base URL`,className:Ae("flex-1 px-3 py-1.5 rounded-lg text-sm","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-2 focus:ring-blue-500/30","transition-all duration-200"),onKeyDown:d=>{d.key==="Enter"?c(u,d.currentTarget.value):d.key==="Escape"&&n(null)},onBlur:d=>c(u,d.target.value),autoFocus:!0}):p.jsx("div",{className:"flex-1 px-3 py-1.5 rounded-lg text-sm cursor-pointer group/url",onClick:()=>n(u.name),children:p.jsxs("div",{className:"flex items-center gap-2 text-bolt-elements-textSecondary",children:[p.jsx("div",{className:"i-ph:link text-sm"}),p.jsx("span",{className:"group-hover/url:text-blue-500 transition-colors",children:u.settings.baseUrl||"Click to set base URL"})]})})}),nL[u.name]?.baseUrlKey&&p.jsx("div",{className:"mt-2 text-xs text-green-500",children:p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:info"}),p.jsx("span",{children:"Environment URL set in .env file"})]})})]})]})]}),p.jsx(at.div,{className:"absolute inset-0 border-2 border-blue-500/0 rounded-lg pointer-events-none",animate:{borderColor:u.settings.enabled?"rgba(59, 130, 246, 0.2)":"rgba(59, 130, 246, 0)",scale:u.settings.enabled?1:.98},transition:{duration:.2}})]},u.name))})]})})};function jI(){const t=A.useCallback((r,i={})=>{const{type:s="info",duration:o=3e3}=i;He[s](r,{position:"bottom-right",autoClose:o,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"})},[]),e=A.useCallback((r,i={})=>{t(r,{...i,type:"success"})},[t]),n=A.useCallback((r,i={})=>{t(r,{...i,type:"error"})},[t]);return{toast:t,success:e,error:n}}const IDe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},B_={OpenAI:{statusUrl:"https://status.openai.com/",apiUrl:"https://api.openai.com/v1/models",headers:{Authorization:"Bearer $OPENAI_API_KEY"},testModel:"gpt-3.5-turbo"},Anthropic:{statusUrl:"https://status.anthropic.com/",apiUrl:"https://api.anthropic.com/v1/messages",headers:{"x-api-key":"$ANTHROPIC_API_KEY","anthropic-version":"2024-02-29"},testModel:"claude-3-sonnet-20240229"},Cohere:{statusUrl:"https://status.cohere.com/",apiUrl:"https://api.cohere.ai/v1/models",headers:{Authorization:"Bearer $COHERE_API_KEY"},testModel:"command"},Google:{statusUrl:"https://status.cloud.google.com/",apiUrl:"https://generativelanguage.googleapis.com/v1/models",headers:{"x-goog-api-key":"$GOOGLE_API_KEY"},testModel:"gemini-pro"},HuggingFace:{statusUrl:"https://status.huggingface.co/",apiUrl:"https://api-inference.huggingface.co/models",headers:{Authorization:"Bearer $HUGGINGFACE_API_KEY"},testModel:"mistralai/Mixtral-8x7B-Instruct-v0.1"},Mistral:{statusUrl:"https://status.mistral.ai/",apiUrl:"https://api.mistral.ai/v1/models",headers:{Authorization:"Bearer $MISTRAL_API_KEY"},testModel:"mistral-tiny"},Perplexity:{statusUrl:"https://status.perplexity.com/",apiUrl:"https://api.perplexity.ai/v1/models",headers:{Authorization:"Bearer $PERPLEXITY_API_KEY"},testModel:"pplx-7b-chat"},Together:{statusUrl:"https://status.together.ai/",apiUrl:"https://api.together.xyz/v1/models",headers:{Authorization:"Bearer $TOGETHER_API_KEY"},testModel:"mistralai/Mixtral-8x7B-Instruct-v0.1"},AmazonBedrock:{statusUrl:"https://health.aws.amazon.com/health/status",apiUrl:"https://bedrock.us-east-1.amazonaws.com/models",headers:{Authorization:"Bearer $AWS_BEDROCK_CONFIG"},testModel:"anthropic.claude-3-sonnet-20240229-v1:0"},Groq:{statusUrl:"https://groqstatus.com/",apiUrl:"https://api.groq.com/v1/models",headers:{Authorization:"Bearer $GROQ_API_KEY"},testModel:"mixtral-8x7b-32768"},OpenRouter:{statusUrl:"https://status.openrouter.ai/",apiUrl:"https://openrouter.ai/api/v1/models",headers:{Authorization:"Bearer $OPEN_ROUTER_API_KEY"},testModel:"anthropic/claude-3-sonnet"},XAI:{statusUrl:"https://status.x.ai/",apiUrl:"https://api.x.ai/v1/models",headers:{Authorization:"Bearer $XAI_API_KEY"},testModel:"grok-1"},Deepseek:{statusUrl:"https://status.deepseek.com/",apiUrl:"https://api.deepseek.com/v1/models",headers:{Authorization:"Bearer $DEEPSEEK_API_KEY"},testModel:"deepseek-chat"}},U_={AmazonBedrock:XJ,Anthropic:nQ,Cohere:MI,Google:ZJ,Groq:RS,HuggingFace:JJ,Mistral:rG,OpenAI:QJ,OpenRouter:rQ,Perplexity:eQ,Together:RS,XAI:gf,Deepseek:tQ},iQ=()=>{const[t,e]=A.useState([]),[n,r]=A.useState(!0),[i,s]=A.useState(new Date),[o,a]=A.useState(""),[l,c]=A.useState(""),[u,h]=A.useState("idle"),d=Dh(),{success:f,error:m}=jI(),g=A.useCallback(_=>{if(!d.providers)return null;const R={OpenAI:"OPENAI_API_KEY",Anthropic:"ANTHROPIC_API_KEY",Cohere:"COHERE_API_KEY",Google:"GOOGLE_GENERATIVE_AI_API_KEY",HuggingFace:"HuggingFace_API_KEY",Mistral:"MISTRAL_API_KEY",Perplexity:"PERPLEXITY_API_KEY",Together:"TOGETHER_API_KEY",AmazonBedrock:"AWS_BEDROCK_CONFIG",Groq:"GROQ_API_KEY",OpenRouter:"OPEN_ROUTER_API_KEY",XAI:"XAI_API_KEY",Deepseek:"DEEPSEEK_API_KEY"}[_];if(!R)return null;const C=IDe[R]||null;return _==="Together"&&C?null:C},[d.providers]),b=A.useCallback(_=>{const L=B_[_];return L?{...L}:null},[]),y=A.useCallback(async(_,L,R)=>{try{const C=new AbortController,P=setTimeout(()=>C.abort(),1e4),O=performance.now(),N={"Content-Type":"application/json",...L},H=await fetch(_,{method:"GET",headers:N,signal:C.signal}),X=performance.now()-O;clearTimeout(P);const J=await H.json();if(!H.ok){let F=`API returned status: ${H.status}`;return J.error?.message?F=J.error.message:J.message&&(F=J.message),{ok:!1,status:H.status,message:F,responseTime:X}}let j=[];return Array.isArray(J)?j=J.map(F=>F.id||F.name||""):J.data&&Array.isArray(J.data)?j=J.data.map(F=>F.id||F.name||""):J.models&&Array.isArray(J.models)?j=J.models.map(F=>F.id||F.name||""):J.model&&(j=[J.model]),!R||j.length>0?{ok:!0,status:H.status,responseTime:X,message:"API key is valid"}:R&&!j.includes(R)?{ok:!0,status:"model_not_found",message:`API key is valid (test model ${R} not found in ${j.length} available models)`,responseTime:X}:{ok:!0,status:H.status,message:"API key is valid",responseTime:X}}catch(C){return console.error(`Error checking API endpoint ${_}:`,C),{ok:!1,status:C instanceof Error?C.message:"Unknown error",message:C instanceof Error?`Connection failed: ${C.message}`:"Connection failed",responseTime:0}}},[g]),v=A.useCallback(async _=>{try{const L=async R=>{try{return(await fetch(R,{mode:"no-cors",headers:{Accept:"text/html"}})).type==="opaque"?"reachable":"unreachable"}catch(C){return console.error(`Error checking ${R}:`,C),"unreachable"}};switch(_){case"HuggingFace":{const R=await L("https://status.huggingface.co/"),P=await L("https://api-inference.huggingface.co/models");return{status:R==="reachable"&&P==="reachable"?"operational":"degraded",message:`Status page: ${R}, API: ${P}`,incidents:["Note: Limited status information due to CORS restrictions"]}}case"OpenAI":{const R=await L("https://status.openai.com/"),P=await L("https://api.openai.com/v1/models");return{status:R==="reachable"&&P==="reachable"?"operational":"degraded",message:`Status page: ${R}, API: ${P}`,incidents:["Note: Limited status information due to CORS restrictions"]}}case"Google":{const R=await L("https://status.cloud.google.com/"),P=await L("https://generativelanguage.googleapis.com/v1/models");return{status:R==="reachable"&&P==="reachable"?"operational":"degraded",message:`Status page: ${R}, API: ${P}`,incidents:["Note: Limited status information due to CORS restrictions"]}}default:return{status:"operational",message:"Basic reachability check only",incidents:["Note: Limited status information due to CORS restrictions"]}}}catch(L){return console.error(`Error fetching status for ${_}:`,L),{status:"degraded",message:"Unable to fetch status due to CORS restrictions",incidents:["Error: Unable to check service status"]}}},[]),x=A.useCallback(async(_,L)=>{const P=async O=>{try{if(["Anthropic","OpenAI","Google","HuggingFace","Mistral","Groq","Perplexity","Together"].includes(_)){const Y=await v(_);return{provider:_,status:Y.status,lastChecked:new Date().toISOString(),statusUrl:L.statusUrl,icon:U_[_],message:Y.message,incidents:Y.incidents}}const H=g(_),Q=b(_);if(!H||!Q)return{provider:_,status:"operational",lastChecked:new Date().toISOString(),statusUrl:L.statusUrl,icon:U_[_],message:H?"Status operational (configuration needed for usage)":"Status operational (API key needed for usage)",incidents:[]};const{ok:X,status:J,message:j,responseTime:F}=await y(Q.apiUrl,Q.headers,Q.testModel);return!X&&O<2?(await new Promise(Y=>setTimeout(Y,2e3)),P(O+1)):{provider:_,status:X?"operational":"degraded",lastChecked:new Date().toISOString(),statusUrl:Q.statusUrl,icon:U_[_],message:X?"Service and API operational":`Service operational (API: ${j||J})`,responseTime:F,incidents:[]}}catch(N){return console.error(`Error fetching status for ${_} (attempt ${O}):`,N),O<2?(await new Promise(H=>setTimeout(H,2e3)),P(O+1)):{provider:_,status:"degraded",lastChecked:new Date().toISOString(),statusUrl:L.statusUrl,icon:U_[_],message:"Service operational (Status check error)",responseTime:0,incidents:[]}}};return P(1)},[y,g,b,v]),w=A.useCallback(async()=>{try{r(!0);const _=await Promise.all(Object.entries(B_).map(([L,R])=>x(L,R)));e(_.sort((L,R)=>L.provider.localeCompare(R.provider))),s(new Date),f("Service statuses updated successfully")}catch(_){console.error("Error fetching all statuses:",_),m("Failed to update service statuses")}finally{r(!1)}},[x,f,m]);A.useEffect(()=>{w();const _=setInterval(w,2*60*1e3);return()=>clearInterval(_)},[w]);const S=A.useCallback(async(_,L)=>{try{h("testing");const R=B_[_];if(!R)throw new Error("Provider configuration not found");const C={...R.headers};switch(Object.keys(C).forEach(N=>{C[N].startsWith("$")&&(C[N]=C[N].replace(/\$.*/,L))}),_){case"Anthropic":C["anthropic-version"]="2024-02-29";break;case"OpenAI":C.Authorization?.startsWith("Bearer ")||(C.Authorization=`Bearer ${L}`);break;case"Google":{const N=`${R.apiUrl}?key=${L}`,H=await y(N,{},R.testModel);H.ok?(h("success"),f("API key is valid!")):(h("error"),m(`API key test failed: ${H.message}`));return}}const{ok:P,message:O}=await y(R.apiUrl,C,R.testModel);P?(h("success"),f("API key is valid!")):(h("error"),m(`API key test failed: ${O}`))}catch(R){h("error"),m("Failed to test API key: "+(R instanceof Error?R.message:"Unknown error"))}finally{setTimeout(()=>h("idle"),3e3)}},[y,f,m]),E=_=>{switch(_){case"operational":return"text-green-500";case"degraded":return"text-yellow-500";case"down":return"text-red-500";default:return"text-gray-500"}},k=_=>{switch(_){case"operational":return p.jsx(ADe,{className:"w-4 h-4"});case"degraded":return p.jsx(PDe,{className:"w-4 h-4"});case"down":return p.jsx(aB,{className:"w-4 h-4"});default:return p.jsx(aB,{className:"w-4 h-4"})}};return p.jsx("div",{className:"space-y-6",children:p.jsxs(at.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[p.jsxs("div",{className:"flex items-center justify-between gap-2 mt-8 mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:Ae("w-8 h-8 flex items-center justify-center rounded-lg","bg-bolt-elements-background-depth-3","text-blue-500"),children:p.jsx(d0e,{className:"w-5 h-5"})}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-md font-medium text-bolt-elements-textPrimary",children:"Service Status"}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:"Monitor and test the operational status of cloud LLM providers"})]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("span",{className:"text-sm text-bolt-elements-textSecondary",children:["Last updated: ",i.toLocaleTimeString()]}),p.jsxs("button",{onClick:()=>w(),className:Ae("px-3 py-1.5 rounded-lg text-sm","bg-bolt-elements-background-depth-3 hover:bg-bolt-elements-background-depth-4","text-bolt-elements-textPrimary","transition-all duration-200","flex items-center gap-2",n?"opacity-50 cursor-not-allowed":""),disabled:n,children:[p.jsx("div",{className:`i-ph:arrows-clockwise w-4 h-4 ${n?"animate-spin":""}`}),p.jsx("span",{children:n?"Refreshing...":"Refresh"})]})]})]}),p.jsxs("div",{className:"p-4 bg-bolt-elements-background-depth-2 rounded-lg",children:[p.jsx("h5",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-2",children:"Test API Key"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("select",{value:l,onChange:_=>c(_.target.value),className:Ae("flex-1 px-3 py-1.5 rounded-lg text-sm max-w-[200px]","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","text-bolt-elements-textPrimary","focus:outline-none focus:ring-2 focus:ring-blue-500/30"),children:[p.jsx("option",{value:"",children:"Select Provider"}),Object.keys(B_).map(_=>p.jsx("option",{value:_,children:_},_))]}),p.jsx("input",{type:"password",value:o,onChange:_=>a(_.target.value),placeholder:"Enter API key to test",className:Ae("flex-1 px-3 py-1.5 rounded-lg text-sm","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-2 focus:ring-blue-500/30")}),p.jsx("button",{onClick:()=>l&&o&&S(l,o),disabled:!l||!o||u==="testing",className:Ae("px-4 py-1.5 rounded-lg text-sm","bg-blue-500 hover:bg-blue-600","text-white","transition-all duration-200","flex items-center gap-2",!l||!o||u==="testing"?"opacity-50 cursor-not-allowed":""),children:u==="testing"?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}),p.jsx("span",{children:"Testing..."})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:key w-4 h-4"}),p.jsx("span",{children:"Test Key"})]})})]})]}),n&&t.length===0?p.jsx("div",{className:"text-center py-8 text-bolt-elements-textSecondary",children:"Loading service statuses..."}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map((_,L)=>p.jsx(at.div,{className:Ae("bg-bolt-elements-background-depth-2","hover:bg-bolt-elements-background-depth-3","transition-all duration-200","relative overflow-hidden rounded-lg"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:L*.1},whileHover:{scale:1.02},children:p.jsxs("div",{className:Ae("block p-4",_.statusUrl?"cursor-pointer":""),onClick:()=>_.statusUrl&&window.open(_.statusUrl,"_blank"),children:[p.jsxs("div",{className:"flex items-center justify-between gap-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[_.icon&&p.jsx("div",{className:Ae("w-8 h-8 flex items-center justify-center rounded-lg","bg-bolt-elements-background-depth-3",E(_.status)),children:ut.createElement(_.icon,{className:"w-5 h-5"})}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:_.provider}),p.jsxs("div",{className:"space-y-1",children:[p.jsxs("p",{className:"text-xs text-bolt-elements-textSecondary",children:["Last checked: ",new Date(_.lastChecked).toLocaleTimeString()]}),_.responseTime&&p.jsxs("p",{className:"text-xs text-bolt-elements-textTertiary",children:["Response time: ",Math.round(_.responseTime),"ms"]}),_.message&&p.jsx("p",{className:"text-xs text-bolt-elements-textTertiary",children:_.message})]})]})]}),p.jsxs("div",{className:Ae("flex items-center gap-2",E(_.status)),children:[p.jsx("span",{className:"text-sm capitalize",children:_.status}),k(_.status)]})]}),_.incidents&&_.incidents.length>0&&p.jsxs("div",{className:"mt-2 border-t border-bolt-elements-borderColor pt-2",children:[p.jsx("p",{className:"text-xs font-medium text-bolt-elements-textSecondary mb-1",children:"Recent Incidents:"}),p.jsx("ul",{className:"text-xs text-bolt-elements-textTertiary space-y-1",children:_.incidents.map((R,C)=>p.jsx("li",{children:R},C))})]})]})},_.provider))})]})})};iQ.tabMetadata={icon:"i-ph:activity-bold",description:"Monitor and test LLM provider service status",category:"services"};const lB=[{name:"deepseek-coder:6.7b",desc:"DeepSeek's code generation model",size:"4.1GB",tags:["coding","popular"]},{name:"llama2:7b",desc:"Meta's Llama 2 (7B parameters)",size:"3.8GB",tags:["general","popular"]},{name:"mistral:7b",desc:"Mistral's 7B model",size:"4.1GB",tags:["general","popular"]},{name:"gemma:7b",desc:"Google's Gemma model",size:"4.0GB",tags:["general","new"]},{name:"codellama:7b",desc:"Meta's Code Llama model",size:"4.1GB",tags:["coding","popular"]},{name:"neural-chat:7b",desc:"Intel's Neural Chat model",size:"4.1GB",tags:["chat","popular"]},{name:"phi:latest",desc:"Microsoft's Phi-2 model",size:"2.7GB",tags:["small","fast"]},{name:"qwen:7b",desc:"Alibaba's Qwen model",size:"4.1GB",tags:["general"]},{name:"solar:10.7b",desc:"Upstage's Solar model",size:"6.1GB",tags:["large","powerful"]},{name:"openchat:7b",desc:"Open-source chat model",size:"4.1GB",tags:["chat","popular"]},{name:"dolphin-phi:2.7b",desc:"Lightweight chat model",size:"1.6GB",tags:["small","fast"]},{name:"stable-code:3b",desc:"Lightweight coding model",size:"1.8GB",tags:["coding","small"]}];function Ib(t){if(t===0)return"0 B";const e=1024,n=["B","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return`${parseFloat((t/Math.pow(e,r)).toFixed(1))} ${n[r]}`}function cB(t){return`${Ib(t)}/s`}function MT({className:t}){return p.jsx("svg",{viewBox:"0 0 1024 1024",className:t,fill:"currentColor",children:p.jsx("path",{d:"M684.3 322.2H339.8c-9.5.1-17.7 6.8-19.6 16.1-8.2 41.4-12.4 83.5-12.4 125.7 0 42.2 4.2 84.3 12.4 125.7 1.9 9.3 10.1 16 19.6 16.1h344.5c9.5-.1 17.7-6.8 19.6-16.1 8.2-41.4 12.4-83.5 12.4-125.7 0-42.2-4.2-84.3-12.4-125.7-1.9-9.3-10.1-16-19.6-16.1zM512 640c-176.7 0-320-143.3-320-320S335.3 0 512 0s320 143.3 320 320-143.3 320-320 320z"})})}function ODe({onModelInstalled:t}){const[e,n]=A.useState(""),[r,i]=A.useState(""),[s,o]=A.useState(!1),[a,l]=A.useState(!1),[c,u]=A.useState(null),[h,d]=A.useState([]),[f,m]=A.useState(lB),{toast:g}=jI(),{providers:b}=Dh(),y=b?.Ollama?.settings?.baseUrl||"http://127.0.0.1:11434",v=async()=>{try{const _=await fetch(`${y}/api/tags`,{method:"GET"});if(!_.ok)throw new Error("Failed to fetch installed models");const R=(await _.json()).models||[];m(C=>C.map(P=>{const O=R.find(N=>N.name.toLowerCase()===P.name.toLowerCase());return O?{...P,installedVersion:O.digest.substring(0,8),needsUpdate:O.digest!==O.latest,latestVersion:O.latest?.substring(0,8)}:P}))}catch(_){console.error("Error checking installed models:",_)}};A.useEffect(()=>{v()},[y]);const x=async()=>{l(!0);try{await v(),g("Model versions checked")}catch(_){console.error("Failed to check model versions:",_),g("Failed to check model versions")}finally{l(!1)}},w=f.filter(_=>{const L=r===""||_.name.toLowerCase().includes(r.toLowerCase())||_.desc.toLowerCase().includes(r.toLowerCase()),R=h.length===0||h.some(C=>_.tags.includes(C));return L&&R}),S=async _=>{if(_)try{o(!0),u({status:"Starting download...",progress:0,downloadedSize:"0 B",totalSize:"Calculating...",speed:"0 B/s"}),n(""),i("");const L=await fetch(`${y}/api/pull`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:_})});if(!L.ok)throw new Error(`HTTP error! status: ${L.status}`);const R=L.body?.getReader();if(!R)throw new Error("Failed to get response reader");let C=Date.now(),P=0;for(;;){const{done:O,value:N}=await R.read();if(O)break;const Q=new TextDecoder().decode(N).split(`
`).filter(Boolean);for(const X of Q)try{const J=JSON.parse(X);if("status"in J){const j=Date.now(),F=(j-C)/1e3,M=((J.completed||0)-P)/F;u({status:J.status,progress:J.completed&&J.total?J.completed/J.total*100:0,downloadedSize:Ib(J.completed||0),totalSize:J.total?Ib(J.total):"Calculating...",speed:cB(M)}),C=j,P=J.completed||0}}catch(J){console.error("Error parsing progress:",J)}}g("Successfully installed "+_+". The model list will refresh automatically."),setTimeout(()=>{t()},1e3)}catch(L){const R=L instanceof Error?L.message:"Unknown error occurred";console.error(`Error installing ${_}:`,R),g(`Failed to install ${_}. ${R}`)}finally{o(!1),u(null)}},E=async _=>{try{m(O=>O.map(N=>N.name===_?{...N,status:"updating"}:N));const L=await fetch(`${y}/api/pull`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:_})});if(!L.ok)throw new Error(`HTTP error! status: ${L.status}`);const R=L.body?.getReader();if(!R)throw new Error("Failed to get response reader");let C=Date.now(),P=0;for(;;){const{done:O,value:N}=await R.read();if(O)break;const Q=new TextDecoder().decode(N).split(`
`).filter(Boolean);for(const X of Q)try{const J=JSON.parse(X);if("status"in J){const j=Date.now(),F=(j-C)/1e3,M=((J.completed||0)-P)/F;u({status:J.status,progress:J.completed&&J.total?J.completed/J.total*100:0,downloadedSize:Ib(J.completed||0),totalSize:J.total?Ib(J.total):"Calculating...",speed:cB(M)}),C=j,P=J.completed||0}}catch(J){console.error("Error parsing progress:",J)}}g("Successfully updated "+_),await v()}catch(L){const R=L instanceof Error?L.message:"Unknown error occurred";console.error(`Error updating ${_}:`,R),g(`Failed to update ${_}. ${R}`),m(C=>C.map(P=>P.name===_?{...P,status:"error"}:P))}finally{u(null)}},k=Array.from(new Set(lB.flatMap(_=>_.tags)));return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between pt-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(MT,{className:"w-8 h-8 text-purple-500"}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-bolt-elements-textPrimary",children:"Ollama Models"}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mt-1",children:"Install and manage your Ollama models"})]})]}),p.jsxs(at.button,{onClick:x,disabled:a,className:Ae("px-4 py-2 rounded-lg","bg-purple-500/10 text-purple-500","hover:bg-purple-500/20","transition-all duration-200","flex items-center gap-2"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[a?p.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin"}):p.jsx("div",{className:"i-ph:arrows-clockwise"}),"Check Updates"]})]}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("div",{className:"flex-1",children:p.jsxs("div",{className:"space-y-1",children:[p.jsx("input",{type:"text",className:Ae("w-full px-4 py-3 rounded-xl","bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-2 focus:ring-purple-500/30","transition-all duration-200"),placeholder:"Search models or enter custom model name...",value:r||e,onChange:_=>{const L=_.target.value;i(L),n(L)},disabled:s}),p.jsxs("p",{className:"text-sm text-bolt-elements-textSecondary px-1",children:["Browse models at"," ",p.jsxs("a",{href:"https://ollama.com/library",target:"_blank",rel:"noopener noreferrer",className:"text-purple-500 hover:underline inline-flex items-center gap-1 text-base font-medium",children:["ollama.com/library",p.jsx("div",{className:"i-ph:arrow-square-out text-sm"})]})," ","and copy model names to install"]})]})}),p.jsx(at.button,{onClick:()=>S(e),disabled:!e||s,className:Ae("rounded-lg px-4 py-2","bg-purple-500 text-white text-sm","hover:bg-purple-600","transition-all duration-200","flex items-center gap-2",{"opacity-50 cursor-not-allowed":!e||s}),whileHover:{scale:1.02},whileTap:{scale:.98},children:s?p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}),p.jsx("span",{children:"Installing..."})]}):p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(MT,{className:"w-4 h-4"}),p.jsx("span",{children:"Install Model"})]})})]}),p.jsx("div",{className:"flex flex-wrap gap-2",children:k.map(_=>p.jsx("button",{onClick:()=>{d(L=>L.includes(_)?L.filter(R=>R!==_):[...L,_])},className:Ae("px-3 py-1 rounded-full text-xs font-medium transition-all duration-200",h.includes(_)?"bg-purple-500 text-white":"bg-bolt-elements-background-depth-3 text-bolt-elements-textSecondary hover:bg-bolt-elements-background-depth-4"),children:_},_))}),p.jsx("div",{className:"grid grid-cols-1 gap-2",children:w.map(_=>p.jsxs(at.div,{className:Ae("flex items-start gap-2 p-3 rounded-lg","bg-bolt-elements-background-depth-3","hover:bg-bolt-elements-background-depth-4","transition-all duration-200","relative group"),children:[p.jsx(MT,{className:"w-5 h-5 text-purple-500 mt-0.5 flex-shrink-0"}),p.jsxs("div",{className:"flex-1 space-y-1.5",children:[p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-bolt-elements-textPrimary font-mono text-sm",children:_.name}),p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:_.desc})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("span",{className:"text-xs text-bolt-elements-textTertiary",children:_.size}),_.installedVersion&&p.jsxs("div",{className:"mt-0.5 flex flex-col items-end gap-0.5",children:[p.jsxs("span",{className:"text-xs text-bolt-elements-textTertiary",children:["v",_.installedVersion]}),_.needsUpdate&&_.latestVersion&&p.jsxs("span",{className:"text-xs text-purple-500",children:["v",_.latestVersion," available"]})]})]})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("div",{className:"flex flex-wrap gap-1",children:_.tags.map(L=>p.jsx("span",{className:"px-1.5 py-0.5 rounded-full text-[10px] bg-bolt-elements-background-depth-4 text-bolt-elements-textTertiary",children:L},L))}),p.jsx("div",{className:"flex gap-2",children:_.installedVersion?_.needsUpdate?p.jsxs(at.button,{onClick:()=>E(_.name),className:Ae("px-2 py-0.5 rounded-lg text-xs","bg-purple-500 text-white","hover:bg-purple-600","transition-all duration-200","flex items-center gap-1"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[p.jsx("div",{className:"i-ph:arrows-clockwise text-xs"}),"Update"]}):p.jsx("span",{className:"px-2 py-0.5 rounded-lg text-xs text-green-500 bg-green-500/10",children:"Up to date"}):p.jsxs(at.button,{onClick:()=>S(_.name),className:Ae("px-2 py-0.5 rounded-lg text-xs","bg-purple-500 text-white","hover:bg-purple-600","transition-all duration-200","flex items-center gap-1"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[p.jsx("div",{className:"i-ph:download text-xs"}),"Install"]})})]})]})]},_.name))}),c&&p.jsxs(at.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-2",children:[p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary",children:c.status}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("span",{className:"text-bolt-elements-textTertiary",children:[c.downloadedSize," / ",c.totalSize]}),p.jsx("span",{className:"text-bolt-elements-textTertiary",children:c.speed}),p.jsxs("span",{className:"text-bolt-elements-textSecondary",children:[Math.round(c.progress),"%"]})]})]}),p.jsx(xk,{value:c.progress,className:"h-1"})]})]})}const DDe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},uB={Ollama:gf,LMStudio:gf,OpenAILike:f0e},hB={Ollama:"Run open-source models locally on your machine",LMStudio:"Local model inference with LM Studio",OpenAILike:"Connect to OpenAI-compatible API endpoints"},$_="http://127.0.0.1:11434",MDe=t=>typeof t=="object"&&t!==null&&"status"in t&&typeof t.status=="string";function jDe(){const{providers:t,updateProviderSettings:e}=Dh(),[n,r]=A.useState([]),[i,s]=A.useState(!1),[o,a]=A.useState([]),[l,c]=A.useState(!1),[u,h]=A.useState(null),{toast:d}=jI();A.useEffect(()=>{const k=Object.entries(t||{}).filter(([_])=>[...GW,"OpenAILike"].includes(_)).map(([_,L])=>{const R=L,C=nL[_]?.baseUrlKey,P=C?DDe[C]:void 0;return P&&!R.settings.baseUrl&&e(_,{...R.settings,baseUrl:P}),{name:_,settings:{...R.settings,baseUrl:R.settings.baseUrl||P},staticModels:R.staticModels||[],getDynamicModels:R.getDynamicModels,getApiKeyLink:R.getApiKeyLink,labelForGetApiKey:R.labelForGetApiKey,icon:R.icon}}).sort((_,L)=>_.name==="LMStudio"?-1:L.name==="LMStudio"||_.name==="OpenAILike"?1:L.name==="OpenAILike"?-1:_.name.localeCompare(L.name));r(k)},[t,e]),A.useEffect(()=>{const E=n.every(k=>k.settings.enabled);s(E)},[n]),A.useEffect(()=>{n.find(k=>k.name==="Ollama")?.settings.enabled&&f()},[n]);const f=async()=>{try{c(!0);const k=await(await fetch("http://127.0.0.1:11434/api/tags")).json();a(k.models.map(_=>({..._,status:"idle"})))}catch(E){console.error("Error fetching Ollama models:",E)}finally{c(!1)}},m=async E=>{try{const k=await fetch(`${$_}/api/pull`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:E})});if(!k.ok)throw new Error(`Failed to update ${E}`);const _=k.body?.getReader();if(!_)throw new Error("No response reader available");for(;;){const{done:P,value:O}=await _.read();if(P)break;const H=new TextDecoder().decode(O).split(`
`).filter(Boolean);for(const Q of H){const X=JSON.parse(Q);if(!MDe(X)){console.error("Invalid response format:",X);continue}a(J=>J.map(j=>j.name===E?{...j,progress:{current:X.completed||0,total:X.total||0,status:X.status},newDigest:X.digest}:j))}}return(await(await fetch("http://127.0.0.1:11434/api/tags")).json()).models.find(P=>P.name===E)!==void 0}catch(k){return console.error(`Error updating ${E}:`,k),!1}},g=A.useCallback(async E=>{n.forEach(k=>{e(k.name,{...k.settings,enabled:E})}),d(E?"All local providers enabled":"All local providers disabled")},[n,e]),b=(E,k)=>{e(E.name,{...E.settings,enabled:k}),k?(Ut.logProvider(`Provider ${E.name} enabled`,{provider:E.name}),d(`${E.name} enabled`)):(Ut.logProvider(`Provider ${E.name} disabled`,{provider:E.name}),d(`${E.name} disabled`))},y=(E,k)=>{e(E.name,{...E.settings,baseUrl:k}),d(`${E.name} base URL updated`),h(null)},v=async E=>{const k=await m(E);d(k?`Updated ${E}`:`Failed to update ${E}`)},x=async E=>{try{if(!(await fetch(`${$_}/api/delete`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:E})})).ok)throw new Error(`Failed to delete ${E}`);a(_=>_.filter(L=>L.name!==E)),d(`Deleted ${E}`)}catch(k){const _=k instanceof Error?k.message:"Unknown error occurred";console.error(`Error deleting ${E}:`,_),d(`Failed to delete ${E}`)}},w=({model:E})=>p.jsxs("div",{className:"flex items-center gap-3 text-xs text-bolt-elements-textSecondary",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:code text-purple-500"}),p.jsx("span",{children:E.digest.substring(0,7)})]}),E.details&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:database text-purple-500"}),p.jsx("span",{children:E.details.parameter_size})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:cube text-purple-500"}),p.jsx("span",{children:E.details.quantization_level})]})]})]}),S=({model:E,onUpdate:k,onDelete:_})=>p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(at.button,{onClick:k,disabled:E.status==="updating",className:Ae("rounded-lg p-2","bg-purple-500/10 text-purple-500","hover:bg-purple-500/20","transition-all duration-200",{"opacity-50 cursor-not-allowed":E.status==="updating"}),whileHover:{scale:1.05},whileTap:{scale:.95},title:"Update model",children:E.status==="updating"?p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}),p.jsx("span",{className:"text-sm",children:"Updating..."})]}):p.jsx("div",{className:"i-ph:arrows-clockwise text-lg"})}),p.jsx(at.button,{onClick:_,disabled:E.status==="updating",className:Ae("rounded-lg p-2","bg-red-500/10 text-red-500","hover:bg-red-500/20","transition-all duration-200",{"opacity-50 cursor-not-allowed":E.status==="updating"}),whileHover:{scale:1.05},whileTap:{scale:.95},title:"Delete model",children:p.jsx("div",{className:"i-ph:trash text-lg"})})]});return p.jsx("div",{className:Ae("rounded-lg bg-bolt-elements-background text-bolt-elements-textPrimary shadow-sm p-4","hover:bg-bolt-elements-background-depth-2","transition-all duration-200"),role:"region","aria-label":"Local Providers Configuration",children:p.jsxs(at.div,{className:"space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[p.jsxs("div",{className:"flex items-center justify-between gap-4 border-b border-bolt-elements-borderColor pb-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(at.div,{className:Ae("w-10 h-10 flex items-center justify-center rounded-xl","bg-purple-500/10 text-purple-500"),whileHover:{scale:1.05},children:p.jsx(MI,{className:"w-6 h-6"})}),p.jsxs("div",{children:[p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("h2",{className:"text-lg font-semibold text-bolt-elements-textPrimary",children:"Local AI Models"})}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:"Configure and manage your local AI providers"})]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Enable All"}),p.jsx(Zo,{checked:i,onCheckedChange:g,"aria-label":"Toggle all local providers"})]})]}),n.filter(E=>E.name==="Ollama").map(E=>p.jsxs(at.div,{className:Ae("bg-bolt-elements-background-depth-2 rounded-xl","hover:bg-bolt-elements-background-depth-3","transition-all duration-200 p-5","relative overflow-hidden group"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.01},children:[p.jsxs("div",{className:"flex items-start justify-between gap-4",children:[p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsx(at.div,{className:Ae("w-12 h-12 flex items-center justify-center rounded-xl","bg-bolt-elements-background-depth-3",E.settings.enabled?"text-purple-500":"text-bolt-elements-textSecondary"),whileHover:{scale:1.1,rotate:5},children:ut.createElement(uB[E.name]||gf,{className:"w-7 h-7","aria-label":`${E.name} icon`})}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("h3",{className:"text-md font-semibold text-bolt-elements-textPrimary",children:E.name}),p.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-500/10 text-green-500",children:"Local"})]}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mt-1",children:hB[E.name]})]})]}),p.jsx(Zo,{checked:E.settings.enabled,onCheckedChange:k=>b(E,k),"aria-label":`Toggle ${E.name} provider`})]}),p.jsx(Ql,{children:E.settings.enabled&&p.jsx(at.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4",children:p.jsxs("div",{className:"flex flex-col gap-2",children:[p.jsx("label",{className:"text-sm text-bolt-elements-textSecondary",children:"API Endpoint"}),u===E.name?p.jsx("input",{type:"text",defaultValue:E.settings.baseUrl||$_,placeholder:"Enter Ollama base URL",className:Ae("w-full px-3 py-2 rounded-lg text-sm","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-2 focus:ring-purple-500/30","transition-all duration-200"),onKeyDown:k=>{k.key==="Enter"?y(E,k.currentTarget.value):k.key==="Escape"&&h(null)},onBlur:k=>y(E,k.target.value),autoFocus:!0}):p.jsx("div",{onClick:()=>h(E.name),className:Ae("w-full px-3 py-2 rounded-lg text-sm cursor-pointer","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","hover:border-purple-500/30 hover:bg-bolt-elements-background-depth-4","transition-all duration-200"),children:p.jsxs("div",{className:"flex items-center gap-2 text-bolt-elements-textSecondary",children:[p.jsx("div",{className:"i-ph:link text-sm"}),p.jsx("span",{children:E.settings.baseUrl||$_})]})})]})})}),E.settings.enabled&&p.jsxs(at.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-6 space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:cube-duotone text-purple-500"}),p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Installed Models"})]}),l?p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}),p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Loading models..."})]}):p.jsxs("span",{className:"text-sm text-bolt-elements-textSecondary",children:[o.length," models available"]})]}),p.jsx("div",{className:"space-y-3",children:l?p.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((k,_)=>p.jsx("div",{className:"h-20 w-full bg-bolt-elements-background-depth-3 rounded-lg animate-pulse"},_))}):o.length===0?p.jsxs("div",{className:"text-center py-8 text-bolt-elements-textSecondary",children:[p.jsx("div",{className:"i-ph:cube-transparent text-4xl mx-auto mb-2"}),p.jsx("p",{children:"No models installed yet"}),p.jsxs("p",{className:"text-sm text-bolt-elements-textTertiary px-1",children:["Browse models at"," ",p.jsxs("a",{href:"https://ollama.com/library",target:"_blank",rel:"noopener noreferrer",className:"text-purple-500 hover:underline inline-flex items-center gap-0.5 text-base font-medium",children:["ollama.com/library",p.jsx("div",{className:"i-ph:arrow-square-out text-xs"})]})," ","and copy model names to install"]})]}):o.map(k=>p.jsxs(at.div,{className:Ae("p-4 rounded-xl","bg-bolt-elements-background-depth-3","hover:bg-bolt-elements-background-depth-4","transition-all duration-200"),whileHover:{scale:1.01},children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("h5",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:k.name}),p.jsx(FDe,{status:k.status})]}),p.jsx(w,{model:k})]}),p.jsx(S,{model:k,onUpdate:()=>v(k.name),onDelete:()=>{window.confirm(`Are you sure you want to delete ${k.name}?`)&&x(k.name)}})]}),k.progress&&p.jsxs("div",{className:"mt-3",children:[p.jsx(xk,{value:Math.round(k.progress.current/k.progress.total*100),className:"h-1"}),p.jsxs("div",{className:"flex justify-between mt-1 text-xs text-bolt-elements-textSecondary",children:[p.jsx("span",{children:k.progress.status}),p.jsxs("span",{children:[Math.round(k.progress.current/k.progress.total*100),"%"]})]})]})]},k.name))}),p.jsx(ODe,{onModelInstalled:f})]})]},E.name)),p.jsxs("div",{className:"border-t border-bolt-elements-borderColor pt-6 mt-8",children:[p.jsx("h3",{className:"text-lg font-semibold text-bolt-elements-textPrimary mb-4",children:"Other Local Providers"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.filter(E=>E.name!=="Ollama").map((E,k)=>p.jsxs(at.div,{className:Ae("bg-bolt-elements-background-depth-2 rounded-xl","hover:bg-bolt-elements-background-depth-3","transition-all duration-200 p-5","relative overflow-hidden group"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:k*.1},whileHover:{scale:1.01},children:[p.jsxs("div",{className:"flex items-start justify-between gap-4",children:[p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsx(at.div,{className:Ae("w-12 h-12 flex items-center justify-center rounded-xl","bg-bolt-elements-background-depth-3",E.settings.enabled?"text-purple-500":"text-bolt-elements-textSecondary"),whileHover:{scale:1.1,rotate:5},children:ut.createElement(uB[E.name]||gf,{className:"w-7 h-7","aria-label":`${E.name} icon`})}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("h3",{className:"text-md font-semibold text-bolt-elements-textPrimary",children:E.name}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-500/10 text-green-500",children:"Local"}),Qb.includes(E.name)&&p.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-purple-500/10 text-purple-500",children:"Configurable"})]})]}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mt-1",children:hB[E.name]})]})]}),p.jsx(Zo,{checked:E.settings.enabled,onCheckedChange:_=>b(E,_),"aria-label":`Toggle ${E.name} provider`})]}),p.jsx(Ql,{children:E.settings.enabled&&Qb.includes(E.name)&&p.jsx(at.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4",children:p.jsxs("div",{className:"flex flex-col gap-2",children:[p.jsx("label",{className:"text-sm text-bolt-elements-textSecondary",children:"API Endpoint"}),u===E.name?p.jsx("input",{type:"text",defaultValue:E.settings.baseUrl,placeholder:`Enter ${E.name} base URL`,className:Ae("w-full px-3 py-2 rounded-lg text-sm","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-2 focus:ring-purple-500/30","transition-all duration-200"),onKeyDown:_=>{_.key==="Enter"?y(E,_.currentTarget.value):_.key==="Escape"&&h(null)},onBlur:_=>y(E,_.target.value),autoFocus:!0}):p.jsx("div",{onClick:()=>h(E.name),className:Ae("w-full px-3 py-2 rounded-lg text-sm cursor-pointer","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","hover:border-purple-500/30 hover:bg-bolt-elements-background-depth-4","transition-all duration-200"),children:p.jsxs("div",{className:"flex items-center gap-2 text-bolt-elements-textSecondary",children:[p.jsx("div",{className:"i-ph:link text-sm"}),p.jsx("span",{children:E.settings.baseUrl||"Click to set base URL"})]})})]})})})]},E.name))})]})]})})}function FDe({status:t}){if(!t||t==="idle")return null;const n={updating:{bg:"bg-yellow-500/10",text:"text-yellow-500",label:"Updating"},updated:{bg:"bg-green-500/10",text:"text-green-500",label:"Updated"},error:{bg:"bg-red-500/10",text:"text-red-500",label:"Error"}}[t];return n?p.jsx("span",{className:Ae("px-2 py-0.5 rounded-full text-xs font-medium",n.bg,n.text),children:n.label}):null}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Pv(t){return t+.5|0}const Ju=(t,e,n)=>Math.max(Math.min(t,n),e);function Ob(t){return Ju(Pv(t*2.55),0,255)}function ah(t){return Ju(Pv(t*255),0,255)}function Ac(t){return Ju(Pv(t/2.55)/100,0,1)}function dB(t){return Ju(Pv(t*100),0,100)}const Oo={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},t4=[..."0123456789ABCDEF"],BDe=t=>t4[t&15],UDe=t=>t4[(t&240)>>4]+t4[t&15],H_=t=>(t&240)>>4===(t&15),$De=t=>H_(t.r)&&H_(t.g)&&H_(t.b)&&H_(t.a);function HDe(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Oo[t[1]]*17,g:255&Oo[t[2]]*17,b:255&Oo[t[3]]*17,a:e===5?Oo[t[4]]*17:255}:(e===7||e===9)&&(n={r:Oo[t[1]]<<4|Oo[t[2]],g:Oo[t[3]]<<4|Oo[t[4]],b:Oo[t[5]]<<4|Oo[t[6]],a:e===9?Oo[t[7]]<<4|Oo[t[8]]:255})),n}const zDe=(t,e)=>t<255?e(t):"";function VDe(t){var e=$De(t)?BDe:UDe;return t?"#"+e(t.r)+e(t.g)+e(t.b)+zDe(t.a,e):void 0}const WDe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function sQ(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function GDe(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function qDe(t,e,n){const r=sQ(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function KDe(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function FI(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=KDe(n,r,i,u,s),l=l*60+.5),[l|0,c||0,a]}function BI(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(ah)}function UI(t,e,n){return BI(sQ,t,e,n)}function YDe(t,e,n){return BI(qDe,t,e,n)}function XDe(t,e,n){return BI(GDe,t,e,n)}function oQ(t){return(t%360+360)%360}function ZDe(t){const e=WDe.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Ob(+e[5]):ah(+e[5]));const i=oQ(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=YDe(i,s,o):e[1]==="hsv"?r=XDe(i,s,o):r=UI(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function JDe(t,e){var n=FI(t);n[0]=oQ(n[0]+e),n=UI(n),t.r=n[0],t.g=n[1],t.b=n[2]}function QDe(t){if(!t)return;const e=FI(t),n=e[0],r=dB(e[1]),i=dB(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Ac(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const fB={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},pB={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function e6e(){const t={},e=Object.keys(pB),n=Object.keys(fB);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,fB[s]);s=parseInt(pB[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let z_;function t6e(t){z_||(z_=e6e(),z_.transparent=[0,0,0,0]);const e=z_[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const n6e=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function r6e(t){const e=n6e.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Ob(o):Ju(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Ob(r):Ju(r,0,255)),i=255&(e[4]?Ob(i):Ju(i,0,255)),s=255&(e[6]?Ob(s):Ju(s,0,255)),{r,g:i,b:s,a:n}}}function i6e(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ac(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const jT=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,jp=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function s6e(t,e,n){const r=jp(Ac(t.r)),i=jp(Ac(t.g)),s=jp(Ac(t.b));return{r:ah(jT(r+n*(jp(Ac(e.r))-r))),g:ah(jT(i+n*(jp(Ac(e.g))-i))),b:ah(jT(s+n*(jp(Ac(e.b))-s))),a:t.a+n*(e.a-t.a)}}function V_(t,e,n){if(t){let r=FI(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=UI(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function aQ(t,e){return t&&Object.assign(e||{},t)}function mB(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ah(t[3]))):(e=aQ(t,{r:0,g:0,b:0,a:1}),e.a=ah(e.a)),e}function o6e(t){return t.charAt(0)==="r"?r6e(t):ZDe(t)}class yy{constructor(e){if(e instanceof yy)return e;const n=typeof e;let r;n==="object"?r=mB(e):n==="string"&&(r=HDe(e)||t6e(e)||o6e(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=aQ(this._rgb);return e&&(e.a=Ac(e.a)),e}set rgb(e){this._rgb=mB(e)}rgbString(){return this._valid?i6e(this._rgb):void 0}hexString(){return this._valid?VDe(this._rgb):void 0}hslString(){return this._valid?QDe(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=s6e(this._rgb,e._rgb,n)),this}clone(){return new yy(this.rgb)}alpha(e){return this._rgb.a=ah(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Pv(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return V_(this._rgb,2,e),this}darken(e){return V_(this._rgb,2,-e),this}saturate(e){return V_(this._rgb,1,e),this}desaturate(e){return V_(this._rgb,1,-e),this}rotate(e){return JDe(this._rgb,e),this}}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function wc(){}const a6e=(()=>{let t=0;return()=>t++})();function cr(t){return t==null}function yi(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function jn(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ia(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function ul(t,e){return ia(t)?t:e}function En(t,e){return typeof t>"u"?e:t}const l6e=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ur(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Hn(t,e,n,r){let i,s,o;if(yi(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(jn(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function IS(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function OS(t){if(yi(t))return t.map(OS);if(jn(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=OS(t[n[i]]);return e}return t}function lQ(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function c6e(t,e,n,r){if(!lQ(t))return;const i=e[t],s=n[t];jn(i)&&jn(s)?vy(i,s,r):e[t]=OS(s)}function vy(t,e,n){const r=yi(e)?e:[e],i=r.length;if(!jn(t))return t;n=n||{};const s=n.merger||c6e;let o;for(let a=0;a<i;++a){if(o=r[a],!jn(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function f1(t,e){return vy(t,e,{merger:u6e})}function u6e(t,e,n){if(!lQ(t))return;const r=e[t],i=n[t];jn(r)&&jn(i)?f1(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=OS(i))}const gB={"":t=>t,x:t=>t.x,y:t=>t.y};function h6e(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function d6e(t){const e=h6e(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function DS(t,e){return(gB[e]||(gB[e]=d6e(e)))(t)}function $I(t){return t.charAt(0).toUpperCase()+t.slice(1)}const MS=t=>typeof t<"u",_h=t=>typeof t=="function",bB=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function f6e(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const _i=Math.PI,Yl=2*_i,p6e=Yl+_i,jS=Number.POSITIVE_INFINITY,m6e=_i/180,Ia=_i/2,nd=_i/4,yB=_i*2/3,cQ=Math.log10,cg=Math.sign;function p1(t,e,n){return Math.abs(t-e)<n}function vB(t){const e=Math.round(t);t=p1(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(cQ(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function g6e(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function b6e(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function xy(t){return!b6e(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function y6e(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function v6e(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Ld(t){return t*(_i/180)}function x6e(t){return t*(180/_i)}function xB(t){if(!ia(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function _6e(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*_i&&(s+=Yl),{angle:s,distance:i}}function n4(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function w6e(t,e){return(t-e+p6e)%Yl-_i}function Mu(t){return(t%Yl+Yl)%Yl}function uQ(t,e,n,r){const i=Mu(t),s=Mu(e),o=Mu(n),a=Mu(s-i),l=Mu(o-i),c=Mu(i-s),u=Mu(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function Wo(t,e,n){return Math.max(e,Math.min(n,t))}function S6e(t){return Wo(t,-32768,32767)}function Db(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function HI(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const Rd=(t,e,n,r)=>HI(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),E6e=(t,e,n)=>HI(t,n,r=>t[r][e]>=n);function k6e(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const hQ=["push","pop","shift","splice","unshift"];function C6e(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),hQ.forEach(n=>{const r="_onData"+$I(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function _B(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(hQ.forEach(s=>{delete t[s]}),delete t._chartjs)}function T6e(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const dQ=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function fQ(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,dQ.call(window,()=>{r=!1,t.apply(e,n)}))}}function A6e(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const zI=t=>t==="start"?"left":t==="end"?"right":"center",qi=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,P6e=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function N6e(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:h,max:d,minDefined:f,maxDefined:m}=o.getUserBounds();if(f){if(i=Math.min(Rd(l,u,h).lo,n?r:Rd(e,u,o.getPixelForValue(h)).lo),c){const g=l.slice(0,i+1).reverse().findIndex(b=>!cr(b[a.axis]));i-=Math.max(0,g)}i=Wo(i,0,r-1)}if(m){let g=Math.max(Rd(l,o.axis,d,!0).hi+1,n?0:Rd(e,u,o.getPixelForValue(d),!0).hi+1);if(c){const b=l.slice(g-1).findIndex(y=>!cr(y[a.axis]));g+=Math.max(0,b)}s=Wo(g,i,r)-i}else s=r-i}return{start:i,count:s}}function L6e(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const W_=t=>t===0||t===1,wB=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Yl/n)),SB=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Yl/n)+1,m1={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Ia)+1,easeOutSine:t=>Math.sin(t*Ia),easeInOutSine:t=>-.5*(Math.cos(_i*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>W_(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>W_(t)?t:wB(t,.075,.3),easeOutElastic:t=>W_(t)?t:SB(t,.075,.3),easeInOutElastic(t){return W_(t)?t:t<.5?.5*wB(t*2,.1125,.45):.5+.5*SB(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-m1.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?m1.easeInBounce(t*2)*.5:m1.easeOutBounce(t*2-1)*.5+.5};function VI(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function EB(t){return VI(t)?t:new yy(t)}function FT(t){return VI(t)?t:new yy(t).saturate(.5).darken(.1).hexString()}const R6e=["x","y","borderWidth","radius","tension"],I6e=["color","borderColor","backgroundColor"];function O6e(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:I6e},numbers:{type:"number",properties:R6e}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function D6e(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const kB=new Map;function M6e(t,e){e=e||{};const n=t+JSON.stringify(e);let r=kB.get(n);return r||(r=new Intl.NumberFormat(t,e),kB.set(n,r)),r}function pQ(t,e,n){return M6e(e,n).format(t)}const j6e={values(t){return yi(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=F6e(t,n)}const o=cQ(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),pQ(t,r,l)}};function F6e(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var mQ={formatters:j6e};function B6e(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:mQ.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const bf=Object.create(null),r4=Object.create(null);function g1(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function BT(t,e,n){return typeof e=="string"?vy(g1(t,e),n):vy(g1(t,""),e)}class U6e{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>FT(i.backgroundColor),this.hoverBorderColor=(r,i)=>FT(i.borderColor),this.hoverColor=(r,i)=>FT(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return BT(this,e,n)}get(e){return g1(this,e)}describe(e,n){return BT(r4,e,n)}override(e,n){return BT(bf,e,n)}route(e,n,r,i){const s=g1(this,e),o=g1(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return jn(l)?Object.assign({},c,l):En(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Br=new U6e({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[O6e,D6e,B6e]);function $6e(t){return!t||cr(t.size)||cr(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function CB(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function rd(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function TB(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function i4(t,e,n,r){gQ(t,e,n,r,null)}function gQ(t,e,n,r,i){let s,o,a,l,c,u,h,d;const f=e.pointStyle,m=e.rotation,g=e.radius;let b=(m||0)*m6e;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(b),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:i?t.ellipse(n,r,i/2,g,0,0,Yl):t.arc(n,r,g,0,Yl),t.closePath();break;case"triangle":u=i?i/2:g,t.moveTo(n+Math.sin(b)*u,r-Math.cos(b)*g),b+=yB,t.lineTo(n+Math.sin(b)*u,r-Math.cos(b)*g),b+=yB,t.lineTo(n+Math.sin(b)*u,r-Math.cos(b)*g),t.closePath();break;case"rectRounded":c=g*.516,l=g-c,o=Math.cos(b+nd)*l,h=Math.cos(b+nd)*(i?i/2-c:l),a=Math.sin(b+nd)*l,d=Math.sin(b+nd)*(i?i/2-c:l),t.arc(n-h,r-a,c,b-_i,b-Ia),t.arc(n+d,r-o,c,b-Ia,b),t.arc(n+h,r+a,c,b,b+Ia),t.arc(n-d,r+o,c,b+Ia,b+_i),t.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*g,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}b+=nd;case"rectRot":h=Math.cos(b)*(i?i/2:g),o=Math.cos(b)*g,a=Math.sin(b)*g,d=Math.sin(b)*(i?i/2:g),t.moveTo(n-h,r-a),t.lineTo(n+d,r-o),t.lineTo(n+h,r+a),t.lineTo(n-d,r+o),t.closePath();break;case"crossRot":b+=nd;case"cross":h=Math.cos(b)*(i?i/2:g),o=Math.cos(b)*g,a=Math.sin(b)*g,d=Math.sin(b)*(i?i/2:g),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o);break;case"star":h=Math.cos(b)*(i?i/2:g),o=Math.cos(b)*g,a=Math.sin(b)*g,d=Math.sin(b)*(i?i/2:g),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o),b+=nd,h=Math.cos(b)*(i?i/2:g),o=Math.cos(b)*g,a=Math.sin(b)*g,d=Math.sin(b)*(i?i/2:g),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o);break;case"line":o=i?i/2:Math.cos(b)*g,a=Math.sin(b)*g,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(b)*(i?i/2:g),r+Math.sin(b)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function _y(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function WI(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function GI(t){t.restore()}function H6e(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function z6e(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function V6e(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),cr(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function W6e(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function G6e(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function wy(t,e,n,r,i,s={}){const o=yi(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,V6e(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&G6e(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),cr(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),W6e(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function s4(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*_i,_i,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,_i,Ia,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Ia,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Ia,!0),t.lineTo(n+o.topLeft,r)}const q6e=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,K6e=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Y6e(t,e){const n=(""+t).match(q6e);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const X6e=t=>+t||0;function bQ(t,e){const n={},r=jn(e),i=r?Object.keys(e):e,s=jn(t)?r?o=>En(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=X6e(s(o));return n}function Z6e(t){return bQ(t,{top:"y",right:"x",bottom:"y",left:"x"})}function b1(t){return bQ(t,["topLeft","topRight","bottomLeft","bottomRight"])}function sa(t){const e=Z6e(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function es(t,e){t=t||{},e=e||Br.font;let n=En(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=En(t.style,e.style);r&&!(""+r).match(K6e)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:En(t.family,e.family),lineHeight:Y6e(En(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:En(t.weight,e.weight),string:""};return i.string=$6e(i),i}function G_(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function J6e(t,e,n){const{min:r,max:i}=t,s=l6e(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Wf(t,e){return Object.assign(Object.create(t),e)}function qI(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=_Q("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>qI([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return vQ(a,l,()=>oMe(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return PB(a).includes(l)},ownKeys(a){return PB(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function ug(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:yQ(t,r),setContext:s=>ug(t,s,n,r),override:s=>ug(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return vQ(s,o,()=>eMe(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function yQ(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:_h(n)?n:()=>n,isIndexable:_h(r)?r:()=>r}}const Q6e=(t,e)=>t?t+$I(e):e,KI=(t,e)=>jn(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function vQ(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function eMe(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return _h(a)&&o.isScriptable(e)&&(a=tMe(e,a,t,n)),yi(a)&&a.length&&(a=nMe(e,a,t,o.isIndexable)),KI(e,a)&&(a=ug(a,i,s&&s[e],o)),a}function tMe(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),KI(t,l)&&(l=YI(i._scopes,i,t,l)),l}function nMe(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(jn(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=YI(c,i,t,u);e.push(ug(h,s,o&&o[t],a))}}return e}function xQ(t,e,n){return _h(t)?t(e,n):t}const rMe=(t,e)=>t===!0?e:typeof t=="string"?DS(e,t):void 0;function iMe(t,e,n,r,i){for(const s of e){const o=rMe(n,s);if(o){t.add(o);const a=xQ(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function YI(t,e,n,r){const i=e._rootScopes,s=xQ(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=AB(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=AB(a,o,s,l,r),l===null)?!1:qI(Array.from(a),[""],i,s,()=>sMe(e,n,r))}function AB(t,e,n,r,i){for(;n;)n=iMe(t,e,n,r,i);return n}function sMe(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return yi(i)&&jn(n)?n:i||{}}function oMe(t,e,n,r){let i;for(const s of e)if(i=_Q(Q6e(s,t),n),typeof i<"u")return KI(t,i)?YI(n,r,t,i):i}function _Q(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function PB(t){let e=t._keys;return e||(e=t._keys=aMe(t._scopes)),e}function aMe(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const lMe=Number.EPSILON||1e-14,hg=(t,e)=>e<t.length&&!t[e].skip&&t[e],wQ=t=>t==="x"?"y":"x";function cMe(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=n4(s,i),l=n4(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=r*c,d=r*u;return{previous:{x:s.x-h*(o.x-i.x),y:s.y-h*(o.y-i.y)},next:{x:s.x+d*(o.x-i.x),y:s.y+d*(o.y-i.y)}}}function uMe(t,e,n){const r=t.length;let i,s,o,a,l,c=hg(t,0);for(let u=0;u<r-1;++u)if(l=c,c=hg(t,u+1),!(!l||!c)){if(p1(e[u],0,lMe)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])}}function hMe(t,e,n="x"){const r=wQ(n),i=t.length;let s,o,a,l=hg(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=hg(t,c+1),!a)continue;const u=a[n],h=a[r];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${r}`]=h-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${r}`]=h+s*e[c])}}function dMe(t,e="x"){const n=wQ(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=hg(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=hg(t,o+1),!!l){if(c){const u=c[e]-l[e];i[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?cg(i[o-1])!==cg(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}uMe(t,i,s),hMe(t,s,e)}function q_(t,e,n){return Math.max(Math.min(t,n),e)}function fMe(t,e){let n,r,i,s,o,a=_y(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&_y(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=q_(i.cp1x,e.left,e.right),i.cp1y=q_(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=q_(i.cp2x,e.left,e.right),i.cp2y=q_(i.cp2y,e.top,e.bottom)))}function pMe(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")dMe(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=cMe(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&fMe(t,n)}function XI(){return typeof window<"u"&&typeof document<"u"}function ZI(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function FS(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Nk=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function mMe(t,e){return Nk(t).getPropertyValue(e)}const gMe=["top","right","bottom","left"];function ef(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=gMe[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const bMe=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function yMe(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(bMe(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function pd(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Nk(n),s=i.boxSizing==="border-box",o=ef(i,"padding"),a=ef(i,"border","width"),{x:l,y:c,box:u}=yMe(t,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:m}=e;return s&&(f-=o.width+a.width,m-=o.height+a.height),{x:Math.round((l-h)/f*n.width/r),y:Math.round((c-d)/m*n.height/r)}}function vMe(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&ZI(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Nk(s),l=ef(a,"border","width"),c=ef(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=FS(a.maxWidth,s,"clientWidth"),i=FS(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||jS,maxHeight:i||jS}}const K_=t=>Math.round(t*10)/10;function xMe(t,e,n,r){const i=Nk(t),s=ef(i,"margin"),o=FS(i.maxWidth,t,"clientWidth")||jS,a=FS(i.maxHeight,t,"clientHeight")||jS,l=vMe(t,e,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const d=ef(i,"border","width"),f=ef(i,"padding");c-=f.width+d.width,u-=f.height+d.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=K_(Math.min(c,o,l.maxWidth)),u=K_(Math.min(u,a,l.maxHeight)),c&&!u&&(u=K_(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=K_(Math.floor(u*r))),{width:c,height:u}}function NB(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const _Me=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};XI()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function LB(t,e){const n=mMe(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function md(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function wMe(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function SMe(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=md(t,i,n),a=md(i,s,n),l=md(s,e,n),c=md(o,a,n),u=md(a,l,n);return md(c,u,n)}const EMe=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},kMe=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Lm(t,e,n){return t?EMe(e,n):kMe()}function SQ(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function EQ(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function kQ(t){return t==="angle"?{between:uQ,compare:w6e,normalize:Mu}:{between:Db,compare:(e,n)=>e-n,normalize:e=>e}}function RB({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function CMe(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=kQ(r),l=e.length;let{start:c,end:u,loop:h}=t,d,f;if(h){for(c+=l,u+=l,d=0,f=l;d<f&&o(a(e[c%l][r]),i,s);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function TMe(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=kQ(r),{start:u,end:h,loop:d,style:f}=CMe(t,e,n),m=[];let g=!1,b=null,y,v,x;const w=()=>l(i,x,y)&&a(i,x)!==0,S=()=>a(s,y)===0||l(s,x,y),E=()=>g||w(),k=()=>!g||S();for(let _=u,L=u;_<=h;++_)v=e[_%o],!v.skip&&(y=c(v[r]),y!==x&&(g=l(y,i,s),b===null&&E()&&(b=a(y,i)===0?_:L),b!==null&&k()&&(m.push(RB({start:b,end:_,loop:d,count:o,style:f})),b=null),L=_,x=y));return b!==null&&m.push(RB({start:b,end:h,loop:d,count:o,style:f})),m}function AMe(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=TMe(r[i],t.points,e);s.length&&n.push(...s)}return n}function PMe(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function NMe(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function LMe(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=PMe(n,i,s,r);if(r===!0)return IB(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return IB(t,NMe(n,o,l,c),n,e)}function IB(t,e,n,r){return!r||!r.setContext||!n?e:RMe(t,e,n,r)}function RMe(t,e,n,r){const i=t._chart.getContext(),s=OB(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,h=e[0].start,d=h;function f(m,g,b,y){const v=a?-1:1;if(m!==g){for(m+=l;n[m%l].skip;)m-=v;for(;n[g%l].skip;)g+=v;m%l!==g%l&&(c.push({start:m%l,end:g%l,loop:b,style:y}),u=y,h=g%l)}}for(const m of e){h=a?h:m.start;let g=n[h%l],b;for(d=h+1;d<=m.end;d++){const y=n[d%l];b=OB(r.setContext(Wf(i,{type:"segment",p0:g,p1:y,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),IMe(b,u)&&f(h,d-1,m.loop,u),g=y,u=b}h<d-1&&f(h,d-1,m.loop,u)}return c}function OB(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function IMe(t,e){if(!e)return!1;const n=[],r=function(i,s){return VI(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class OMe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=dQ.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var kc=new OMe;const DB="transparent",DMe={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=EB(t||DB),i=r.valid&&EB(e||DB);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class MMe{constructor(e,n,r,i){const s=n[r];i=G_([e.to,i,s,e.from]);const o=G_([e.from,s,i]);this._active=!0,this._fn=e.fn||DMe[e.type||typeof o],this._easing=m1[e.easing]||m1.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=G_([e.to,n,i,e.from]),this._from=G_([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class CQ{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!jn(e))return;const n=Object.keys(Br.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!jn(s))return;const o={};for(const a of n)o[a]=s[a];(yi(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=FMe(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&jMe(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const u=n[c];let h=s[c];const d=r.get(c);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){e[c]=u;continue}s[c]=h=new MMe(d,e,c,u),i.push(h)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return kc.add(this._chart,r),!0}}function jMe(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function FMe(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function MB(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function BMe(t,e,n){if(n===!1)return!1;const r=MB(t,n),i=MB(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function UMe(t){let e,n,r,i;return jn(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function TQ(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function jB(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],ia(c)&&(s||e===0||cg(e)===cg(c))&&(e+=c)}return!u&&!r.all?0:e}function $Me(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:t[u]};return a}function UT(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function HMe(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function zMe(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function VMe(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function FB(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function BB(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=HMe(s,o,r),h=e.length;let d;for(let f=0;f<h;++f){const m=e[f],{[l]:g,[c]:b}=m,y=m._stacks||(m._stacks={});d=y[c]=VMe(i,u,g),d[a]=b,d._top=FB(d,o,!0,r.type),d._bottom=FB(d,o,!1,r.type);const v=d._visualValues||(d._visualValues={});v[a]=b}}function $T(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function WMe(t,e){return Wf(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function GMe(t,e,n){return Wf(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function nb(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const HT=t=>t==="reset"||t==="none",UB=(t,e)=>e?t:Object.assign({},t),qMe=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:TQ(n,!0),values:null};class AQ{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=UT(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&nb(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(h,d,f,m)=>h==="x"?d:h==="r"?m:f,s=n.xAxisID=En(r.xAxisID,$T(e,"x")),o=n.yAxisID=En(r.yAxisID,$T(e,"y")),a=n.rAxisID=En(r.rAxisID,$T(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),u=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&_B(this._data,this),e._stacked&&nb(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(jn(n)){const i=this._cachedMeta;this._data=$Me(n,i)}else if(r!==n){if(r){_B(r,this);const i=this._cachedMeta;nb(i),i._parsed=[]}n&&Object.isExtensible(n)&&C6e(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=UT(n.vScale,n),n.stack!==r.stack&&(i=!0,nb(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(BB(this,n._parsed),n._stacked=UT(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,h,d;if(this._parsing===!1)r._parsed=i,r._sorted=!0,d=i;else{yi(i[e])?d=this.parseArrayData(r,i,e,n):jn(i[e])?d=this.parseObjectData(r,i,e,n):d=this.parsePrimitiveData(r,i,e,n);const f=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=h=d[u],l&&(f()&&(l=!1),c=h);r._sorted=l}o&&BB(this,d)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,h=new Array(i);let d,f,m;for(d=0,f=i;d<f;++d)m=d+r,h[d]={[a]:u||s.parse(c[m],m),[l]:o.parse(n[m],m)};return h}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,u,h;for(l=0,c=i;l<c;++l)u=l+r,h=n[u],a[l]={x:s.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,h,d,f;for(u=0,h=i;u<h;++u)d=u+r,f=n[d],c[u]={x:s.parse(DS(f,a),d),y:o.parse(DS(f,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:TQ(i,!0),values:n._stacks[e.axis]._visualValues};return jB(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=jB(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=qMe(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=zMe(a);let d,f;function m(){f=i[d];const g=f[a.axis];return!ia(f[e.axis])||u>g||h<g}for(d=0;d<o&&!(!m()&&(this.updateRangeFromParsed(c,e,f,l),s));++d);if(s){for(d=o-1;d>=0;--d)if(!m()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],ia(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=UMe(En(this.options.clip,BMe(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const h=i[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=GMe(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=WMe(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&MS(r);if(a)return UB(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=i?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),u),f=Object.keys(Br.elements[e]),m=()=>this.getContext(r,i,n),g=c.resolveNamedOptions(d,f,m,h);return g.$shared&&(g.$shared=l,s[o]=Object.freeze(UB(g,l))),g}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),d=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(d,this.getContext(e,r,n))}const c=new CQ(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||HT(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){HT(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!HT(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&nb(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class KMe extends AQ{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=N6e(n,i,o);this._drawStart=a,this._drawCount=l,L6e(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,i),d=o.axis,f=a.axis,{spanGaps:m,segment:g}=this.options,b=xy(m)?m:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||s||i==="none",v=n+r,x=e.length;let w=n>0&&this.getParsed(n-1);for(let S=0;S<x;++S){const E=e[S],k=y?E:{};if(S<n||S>=v){k.skip=!0;continue}const _=this.getParsed(S),L=cr(_[f]),R=k[d]=o.getPixelForValue(_[d],S),C=k[f]=s||L?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,_,l):_[f],S);k.skip=isNaN(R)||isNaN(C)||L,k.stop=S>0&&Math.abs(_[d]-w[d])>b,g&&(k.parsed=_,k.raw=c.data[S]),h&&(k.options=u||this.resolveDataElementOptions(S,E.active?"active":i)),y||this.updateElement(E,S,k,i),w=_}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function id(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class JI{static override(e){Object.assign(JI.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return id()}parse(){return id()}format(){return id()}add(){return id()}diff(){return id()}startOf(){return id()}endOf(){return id()}}var YMe={_date:JI};function XMe(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?E6e:Rd;if(r){if(i._sharedOptions){const u=s[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const d=c(s,e,n-h),f=c(s,e,n+h);return{lo:d.lo,hi:f.hi}}}}else{const u=c(s,e,n);if(l){const{vScale:h}=i._cachedMeta,{_parsed:d}=t,f=d.slice(0,u.lo+1).reverse().findIndex(g=>!cr(g[h.axis]));u.lo-=Math.max(0,f);const m=d.slice(u.hi).findIndex(g=>!cr(g[h.axis]));u.hi+=Math.max(0,m)}return u}}return{lo:0,hi:s.length-1}}function Lk(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:h,hi:d}=XMe(s[a],e,o,i);for(let f=h;f<=d;++f){const m=u[f];m.skip||r(m,c,f)}}}function ZMe(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function zT(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||Lk(t,n,e,function(a,l,c){!i&&!_y(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function JMe(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:h}=_6e(o,{x:e.x,y:e.y});uQ(h,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return Lk(t,n,e,s),i}function QMe(t,e,n,r,i,s){let o=[];const a=ZMe(n);let l=Number.POSITIVE_INFINITY;function c(u,h,d){const f=u.inRange(e.x,e.y,i);if(r&&!f)return;const m=u.getCenterPoint(i);if(!(!!s||t.isPointInArea(m))&&!f)return;const b=a(e,m);b<l?(o=[{element:u,datasetIndex:h,index:d}],l=b):b===l&&o.push({element:u,datasetIndex:h,index:d})}return Lk(t,n,e,c),o}function VT(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?JMe(t,e,n,i):QMe(t,e,n,r,i,s)}function $B(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Lk(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var e8e={modes:{index(t,e,n,r){const i=pd(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?zT(t,i,s,r,o):VT(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const i=pd(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?zT(t,i,s,r,o):VT(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const i=pd(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return zT(t,i,s,r,o)},nearest(t,e,n,r){const i=pd(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return VT(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=pd(e,t);return $B(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=pd(e,t);return $B(t,i,"y",n.intersect,r)}}};const PQ=["left","top","right","bottom"];function rb(t,e){return t.filter(n=>n.pos===e)}function HB(t,e){return t.filter(n=>PQ.indexOf(n.pos)===-1&&n.box.axis===e)}function ib(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function t8e(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function n8e(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!PQ.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function r8e(t,e){const n=n8e(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:l&&e.availableHeight)}return n}function i8e(t){const e=t8e(t),n=ib(e.filter(c=>c.box.fullSize),!0),r=ib(rb(e,"left"),!0),i=ib(rb(e,"right")),s=ib(rb(e,"top"),!0),o=ib(rb(e,"bottom")),a=HB(e,"x"),l=HB(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:rb(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function zB(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function NQ(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function s8e(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!jn(i)){n.size&&(t[i]-=n.size);const h=r[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?s.height:s.width),n.size=h.size/h.count,t[i]+=n.size}s.getPadding&&NQ(o,s.getPadding());const a=Math.max(0,e.outerWidth-zB(o,t,"left","right")),l=Math.max(0,e.outerHeight-zB(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function o8e(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function a8e(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Mb(t,e,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,a8e(a.horizontal,e));const{same:h,other:d}=s8e(e,n,a,r);c|=h&&i.length,u=u||d,l.fullSize||i.push(a)}return c&&Mb(i,e,n,r)||u}function Y_(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function VB(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,d=c.size||l.height;MS(c.start)&&(o=c.start),l.fullSize?Y_(l,i.left,o,n.outerWidth-i.right-i.left,d):Y_(l,e.left+c.placed,o,h,d),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,d=c.size||l.width;MS(c.start)&&(s=c.start),l.fullSize?Y_(l,s,i.top,d,n.outerHeight-i.bottom-i.top):Y_(l,s,e.top+c.placed,d,h),c.start=s,c.placed+=h,s=l.right}}e.x=s,e.y=o}var Go={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=sa(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=i8e(t.boxes),l=a.vertical,c=a.horizontal;Hn(t.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const u=l.reduce((g,b)=>b.box.options&&b.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},i);NQ(d,sa(r));const f=Object.assign({maxPadding:d,w:s,h:o,x:i.left,y:i.top},i),m=r8e(l.concat(c),h);Mb(a.fullSize,f,h,m),Mb(l,f,h,m),Mb(c,f,h,m)&&Mb(l,f,h,m),o8e(f),VB(a.leftAndTop,f,h,m),f.x+=f.w,f.y+=f.h,VB(a.rightAndBottom,f,h,m),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Hn(a.chartArea,g=>{const b=g.box;Object.assign(b,t.chartArea),b.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class LQ{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class l8e extends LQ{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const c2="$chartjs",c8e={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},WB=t=>t===null||t==="";function u8e(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[c2]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",WB(i)){const s=LB(t,"width");s!==void 0&&(t.width=s)}if(WB(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=LB(t,"height");s!==void 0&&(t.height=s)}return t}const RQ=_Me?{passive:!0}:!1;function h8e(t,e,n){t&&t.addEventListener(e,n,RQ)}function d8e(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,RQ)}function f8e(t,e){const n=c8e[t.type]||t.type,{x:r,y:i}=pd(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function BS(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function p8e(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||BS(a.addedNodes,r),o=o&&!BS(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function m8e(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||BS(a.removedNodes,r),o=o&&!BS(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Sy=new Map;let GB=0;function IQ(){const t=window.devicePixelRatio;t!==GB&&(GB=t,Sy.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function g8e(t,e){Sy.size||window.addEventListener("resize",IQ),Sy.set(t,e)}function b8e(t){Sy.delete(t),Sy.size||window.removeEventListener("resize",IQ)}function y8e(t,e,n){const r=t.canvas,i=r&&ZI(r);if(!i)return;const s=fQ((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(i),g8e(t,s),o}function WT(t,e,n){n&&n.disconnect(),e==="resize"&&b8e(t)}function v8e(t,e,n){const r=t.canvas,i=fQ(s=>{t.ctx!==null&&n(f8e(s,t))},t);return h8e(r,e,i),i}class x8e extends LQ{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(u8e(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[c2])return!1;const r=n[c2].initial;["height","width"].forEach(s=>{const o=r[s];cr(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[c2],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:p8e,detach:m8e,resize:y8e}[n]||v8e;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:WT,detach:WT,resize:WT}[n]||d8e)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return xMe(e,n,r,i)}isAttached(e){const n=e&&ZI(e);return!!(n&&n.isConnected)}}function _8e(t){return!XI()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?l8e:x8e}let Gf=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return xy(this.x)&&xy(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}};function w8e(t,e){const n=t.options.ticks,r=S8e(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?k8e(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return C8e(e,c,s,o/i),c;const u=E8e(s,e,i);if(o>0){let h,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(X_(e,c,u,cr(f)?0:a-f,a),h=0,d=o-1;h<d;h++)X_(e,c,u,s[h],s[h+1]);return X_(e,c,u,l,cr(f)?e.length:l+f),c}return X_(e,c,u),c}function S8e(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function E8e(t,e,n){const r=T8e(t),i=e.length/n;if(!r)return Math.max(i,1);const s=g6e(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function k8e(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function C8e(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function X_(t,e,n,r,i){const s=En(r,0),o=Math.min(En(i,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function T8e(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const A8e=t=>t==="left"?"right":t==="right"?"left":t,qB=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,KB=(t,e)=>Math.min(e||t,t);function YB(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function P8e(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function N8e(t,e){Hn(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function sb(t){return t.drawTicks?t.tickLength:0}function XB(t,e){if(!t.display)return 0;const n=es(t.font,e),r=sa(t.padding);return(yi(t.text)?t.text.length:1)*n.lineHeight+r.height}function L8e(t,e){return Wf(t,{scale:e,type:"scale"})}function R8e(t,e,n){return Wf(t,{tick:n,index:e,type:"tick"})}function I8e(t,e,n){let r=zI(t);return(n&&e!=="right"||!n&&e==="right")&&(r=A8e(r)),r}function O8e(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,d,f,m;const g=o-i,b=a-s;if(t.isHorizontal()){if(f=qi(r,s,a),jn(n)){const y=Object.keys(n)[0],v=n[y];m=u[y].getPixelForValue(v)+g-e}else n==="center"?m=(c.bottom+c.top)/2+g-e:m=qB(t,n,e);d=a-s}else{if(jn(n)){const y=Object.keys(n)[0],v=n[y];f=u[y].getPixelForValue(v)-b+e}else n==="center"?f=(c.left+c.right)/2-b+e:f=qB(t,n,e);m=qi(r,o,i),h=n==="left"?-Ia:Ia}return{titleX:f,titleY:m,maxWidth:d,rotation:h}}class Yg extends Gf{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=ul(e,Number.POSITIVE_INFINITY),n=ul(n,Number.NEGATIVE_INFINITY),r=ul(r,Number.POSITIVE_INFINITY),i=ul(i,Number.NEGATIVE_INFINITY),{min:ul(e,r),max:ul(n,i),minDefined:ia(e),maxDefined:ia(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:ul(n,ul(r,n)),max:ul(r,ul(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ur(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=J6e(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?YB(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=w8e(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ur(this.options.afterUpdate,[this])}beforeSetDimensions(){ur(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ur(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ur(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ur(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=ur(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){ur(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ur(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=KB(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=Wo(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/r:f/(r-1),h+6>a&&(a=f/(r-(e.offset?.5:1)),l=this.maxHeight-sb(e.grid)-n.padding-XB(e.title,this.chart.options.font),c=Math.sqrt(h*h+d*d),o=x6e(Math.min(Math.asin(Wo((u.highest.height+6)/a,-1,1)),Math.asin(Wo(l/c,-1,1))-Math.asin(Wo(d/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){ur(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ur(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=XB(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=sb(s)+l):(e.height=this.maxHeight,e.width=sb(s)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:d}=this._getLabelSizes(),f=r.padding*2,m=Ld(this.labelRotation),g=Math.cos(m),b=Math.sin(m);if(a){const y=r.mirror?0:b*h.width+g*d.height;e.height=Math.min(this.maxHeight,e.height+y+f)}else{const y=r.mirror?0:g*h.width+b*d.height;e.width=Math.min(this.maxWidth,e.width+y+f)}this._calculatePadding(c,u,b,g)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=i*e.width,f=r*n.height):(d=r*e.height,f=i*n.width):s==="start"?f=n.width:s==="end"?d=e.width:s!=="inner"&&(d=e.width/2,f=n.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;s==="start"?(u=0,h=e.height):s==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ur(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)cr(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=YB(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/KB(n,r));let c=0,u=0,h,d,f,m,g,b,y,v,x,w,S;for(h=0;h<n;h+=l){if(m=e[h].label,g=this._resolveTickFontOptions(h),i.font=b=g.string,y=s[b]=s[b]||{data:{},gc:[]},v=g.lineHeight,x=w=0,!cr(m)&&!yi(m))x=CB(i,y.data,y.gc,x,m),w=v;else if(yi(m))for(d=0,f=m.length;d<f;++d)S=m[d],!cr(S)&&!yi(S)&&(x=CB(i,y.data,y.gc,x,S),w+=v);o.push(x),a.push(w),c=Math.max(x,c),u=Math.max(w,u)}N8e(s,n);const E=o.indexOf(c),k=a.indexOf(u),_=L=>({width:o[L]||0,height:a[L]||0});return{first:_(0),last:_(n-1),widest:_(E),highest:_(k),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return S6e(this._alignToPixels?rd(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=R8e(this.getContext(),e,r))}return this.$context||(this.$context=L8e(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Ld(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=sb(s),f=[],m=a.setContext(this.getContext()),g=m.display?m.width:0,b=g/2,y=function(Q){return rd(r,Q,g)};let v,x,w,S,E,k,_,L,R,C,P,O;if(o==="top")v=y(this.bottom),k=this.bottom-d,L=v-b,C=y(e.top)+b,O=e.bottom;else if(o==="bottom")v=y(this.top),C=e.top,O=y(e.bottom)-b,k=v+b,L=this.top+d;else if(o==="left")v=y(this.right),E=this.right-d,_=v-b,R=y(e.left)+b,P=e.right;else if(o==="right")v=y(this.left),R=e.left,P=y(e.right)-b,E=v+b,_=this.left+d;else if(n==="x"){if(o==="center")v=y((e.top+e.bottom)/2+.5);else if(jn(o)){const Q=Object.keys(o)[0],X=o[Q];v=y(this.chart.scales[Q].getPixelForValue(X))}C=e.top,O=e.bottom,k=v+b,L=k+d}else if(n==="y"){if(o==="center")v=y((e.left+e.right)/2);else if(jn(o)){const Q=Object.keys(o)[0],X=o[Q];v=y(this.chart.scales[Q].getPixelForValue(X))}E=v-b,_=E-d,R=e.left,P=e.right}const N=En(i.ticks.maxTicksLimit,h),H=Math.max(1,Math.ceil(h/N));for(x=0;x<h;x+=H){const Q=this.getContext(x),X=s.setContext(Q),J=a.setContext(Q),j=X.lineWidth,F=X.color,Y=J.dash||[],M=J.dashOffset,D=X.tickWidth,V=X.tickColor,W=X.tickBorderDash||[],te=X.tickBorderDashOffset;w=P8e(this,x,l),w!==void 0&&(S=rd(r,w,j),c?E=_=R=P=S:k=L=C=O=S,f.push({tx1:E,ty1:k,tx2:_,ty2:L,x1:R,y1:C,x2:P,y2:O,width:j,color:F,borderDash:Y,borderDashOffset:M,tickWidth:D,tickColor:V,tickBorderDash:W,tickBorderDashOffset:te}))}return this._ticksLength=h,this._borderValue=v,f}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=s,d=sb(r.grid),f=d+u,m=h?-u:f,g=-Ld(this.labelRotation),b=[];let y,v,x,w,S,E,k,_,L,R,C,P,O="middle";if(i==="top")E=this.bottom-m,k=this._getXAxisLabelAlignment();else if(i==="bottom")E=this.top+m,k=this._getXAxisLabelAlignment();else if(i==="left"){const H=this._getYAxisLabelAlignment(d);k=H.textAlign,S=H.x}else if(i==="right"){const H=this._getYAxisLabelAlignment(d);k=H.textAlign,S=H.x}else if(n==="x"){if(i==="center")E=(e.top+e.bottom)/2+f;else if(jn(i)){const H=Object.keys(i)[0],Q=i[H];E=this.chart.scales[H].getPixelForValue(Q)+f}k=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")S=(e.left+e.right)/2-f;else if(jn(i)){const H=Object.keys(i)[0],Q=i[H];S=this.chart.scales[H].getPixelForValue(Q)}k=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(l==="start"?O="top":l==="end"&&(O="bottom"));const N=this._getLabelSizes();for(y=0,v=a.length;y<v;++y){x=a[y],w=x.label;const H=s.setContext(this.getContext(y));_=this.getPixelForTick(y)+s.labelOffset,L=this._resolveTickFontOptions(y),R=L.lineHeight,C=yi(w)?w.length:1;const Q=C/2,X=H.color,J=H.textStrokeColor,j=H.textStrokeWidth;let F=k;o?(S=_,k==="inner"&&(y===v-1?F=this.options.reverse?"left":"right":y===0?F=this.options.reverse?"right":"left":F="center"),i==="top"?c==="near"||g!==0?P=-C*R+R/2:c==="center"?P=-N.highest.height/2-Q*R+R:P=-N.highest.height+R/2:c==="near"||g!==0?P=R/2:c==="center"?P=N.highest.height/2-Q*R:P=N.highest.height-C*R,h&&(P*=-1),g!==0&&!H.showLabelBackdrop&&(S+=R/2*Math.sin(g))):(E=_,P=(1-C)*R/2);let Y;if(H.showLabelBackdrop){const M=sa(H.backdropPadding),D=N.heights[y],V=N.widths[y];let W=P-M.top,te=0-M.left;switch(O){case"middle":W-=D/2;break;case"bottom":W-=D;break}switch(k){case"center":te-=V/2;break;case"right":te-=V;break;case"inner":y===v-1?te-=V:y>0&&(te-=V/2);break}Y={left:te,top:W,width:V+M.width,height:D+M.height,color:H.backdropColor}}b.push({label:w,font:L,textOffset:P,options:{rotation:g,color:X,strokeColor:J,strokeWidth:j,textAlign:F,textBaseline:O,translation:[S,E],backdrop:Y}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Ld(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,d;this.isHorizontal()?(c=rd(e,this.left,o)-o/2,u=rd(e,this.right,a)+a/2,h=d=l):(h=rd(e,this.top,o)-o/2,d=rd(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&WI(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;wy(r,c,0,u,l,a)}i&&GI(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=es(r.font),o=sa(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||jn(n)?(l+=o.bottom,yi(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:d}=O8e(this,l,n,a);wy(e,r.text,0,0,s,{color:r.color,maxWidth:h,rotation:d,textAlign:I8e(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=En(e.grid&&e.grid.z,-1),i=En(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Yg.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return es(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Z_{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;j8e(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,D8e(e,o,r),this.override&&Br.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Br[i]&&(delete Br[i][r],this.override&&delete bf[r])}}function D8e(t,e,n){const r=vy(Object.create(null),[n?Br.get(n):{},Br.get(e),t.defaults]);Br.set(e,r),t.defaultRoutes&&M8e(e,t.defaultRoutes),t.descriptors&&Br.describe(e,t.descriptors)}function M8e(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Br.route(s,i,l,a)})}function j8e(t){return"id"in t&&"defaults"in t}class F8e{constructor(){this.controllers=new Z_(AQ,"datasets",!0),this.elements=new Z_(Gf,"elements"),this.plugins=new Z_(Object,"plugins"),this.scales=new Z_(Yg,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Hn(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=$I(e);ur(r["before"+i],[],r),n[e](r),ur(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Cl=new F8e;class B8e{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(ur(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){cr(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=En(r.options&&r.options.plugins,{}),s=U8e(r);return i===!1&&!n?[]:H8e(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function U8e(t){const e={},n=[],r=Object.keys(Cl.plugins.items);for(let s=0;s<r.length;s++)n.push(Cl.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function $8e(t,e){return!e&&t===!1?null:t===!0?{}:t}function H8e(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=$8e(r[l],i);c!==null&&s.push({plugin:a,options:z8e(t.config,{plugin:a,local:n[l]},c,o)})}return s}function z8e(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function o4(t,e){const n=Br.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function V8e(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function W8e(t,e){return t===e?"_index_":"_value_"}function ZB(t){if(t==="x"||t==="y"||t==="r")return t}function G8e(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function a4(t,...e){if(ZB(t))return t;for(const n of e){const r=n.axis||G8e(n.position)||t.length>1&&ZB(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function JB(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function q8e(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return JB(t,"x",n[0])||JB(t,"y",n[0])}return{}}function K8e(t,e){const n=bf[t.type]||{scales:{}},r=e.scales||{},i=o4(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!jn(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=a4(o,a,q8e(o,t),Br.scales[a.type]),c=W8e(l,i),u=n.scales||{};s[o]=f1(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||o4(a,e),u=(bf[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=V8e(h,l),f=o[d+"AxisID"]||d;s[f]=s[f]||Object.create(null),f1(s[f],[{axis:d},r[f],u[h]])})}),Object.keys(s).forEach(o=>{const a=s[o];f1(a,[Br.scales[a.type],Br.scale])}),s}function OQ(t){const e=t.options||(t.options={});e.plugins=En(e.plugins,{}),e.scales=K8e(t,e)}function DQ(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Y8e(t){return t=t||{},t.data=DQ(t.data),OQ(t),t}const QB=new Map,MQ=new Set;function J_(t,e){let n=QB.get(t);return n||(n=e(),QB.set(t,n),MQ.add(n)),n}const ob=(t,e,n)=>{const r=DS(e,n);r!==void 0&&t.add(r)};let X8e=class{constructor(e){this._config=Y8e(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=DQ(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),OQ(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return J_(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return J_(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return J_(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return J_(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>ob(l,e,h))),u.forEach(h=>ob(l,i,h)),u.forEach(h=>ob(l,bf[s]||{},h)),u.forEach(h=>ob(l,Br,h)),u.forEach(h=>ob(l,r4,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),MQ.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,bf[n]||{},Br.datasets[n]||{},{type:n},Br,r4]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=e7(this._resolverCache,e,i);let l=o;if(J8e(o,n)){s.$shared=!1,r=_h(r)?r():r;const c=this.createResolver(e,r,a);l=ug(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=e7(this._resolverCache,e,r);return jn(n)?ug(s,n,void 0,i):s}};function e7(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:qI(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const Z8e=t=>jn(t)&&Object.getOwnPropertyNames(t).some(e=>_h(t[e]));function J8e(t,e){const{isScriptable:n,isIndexable:r}=yQ(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(_h(a)||Z8e(a))||o&&yi(a))return!0}return!1}var Q8e="4.4.8";const eje=["top","bottom","left","right","chartArea"];function t7(t,e){return t==="top"||t==="bottom"||eje.indexOf(t)===-1&&e==="x"}function n7(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function r7(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ur(n&&n.onComplete,[t],e)}function tje(t){const e=t.chart,n=e.options.animation;ur(n&&n.onProgress,[t],e)}function jQ(t){return XI()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const u2={},i7=t=>{const e=jQ(t);return Object.values(u2).filter(n=>n.canvas===e).pop()};function nje(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function rje(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function Q_(t,e,n){return t.options.clip?t[n]:e[n]}function ije(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Q_(n,e,"left"),right:Q_(n,e,"right"),top:Q_(r,e,"top"),bottom:Q_(r,e,"bottom")}:e}let Rk=class{static defaults=Br;static instances=u2;static overrides=bf;static registry=Cl;static version=Q8e;static getChart=i7;static register(...e){Cl.add(...e),s7()}static unregister(...e){Cl.remove(...e),s7()}constructor(e,n){const r=this.config=new X8e(n),i=jQ(e),s=i7(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||_8e(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=a6e(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new B8e,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=A6e(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],u2[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}kc.listen(this,"complete",r7),kc.listen(this,"progress",tje),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return cr(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Cl}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():NB(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return TB(this.canvas,this.ctx),this}stop(){return kc.stop(this),this}resize(e,n){kc.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,NB(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ur(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Hn(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=a4(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Hn(s,o=>{const a=o.options,l=a.id,c=a4(l,a),u=En(a.type,o.dtype);(a.position===void 0||t7(a.position,c)!==t7(o.dposition))&&(a.position=o.dposition),i[l]=!0;let h=null;if(l in r&&r[l].type===u)h=r[l];else{const d=Cl.getScale(u);h=new d({id:l,type:u,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(a,e)}),Hn(i,(o,a)=>{o||delete r[a]}),Hn(r,o=>{Go.configure(this,o,o.options),Go.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(n7("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||o4(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Cl.getController(a),{datasetElementType:c,dataElementType:u}=Br.datasets[a];Object.assign(l,{dataElementType:Cl.getElement(u),datasetElementType:c&&Cl.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Hn(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),d=!i&&s.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||Hn(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(n7("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Hn(this.scales,e=>{Go.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!bB(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;nje(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!bB(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Go.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Hn(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,_h(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(kc.has(this)?this.attached&&!kc.running(this)&&kc.start(this):(this.draw(),r7({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=ije(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&WI(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&GI(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return _y(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=e8e.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Wf(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);MS(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),kc.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),TB(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete u2[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Hn(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Hn(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Hn(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!IS(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=f6e(e),c=rje(e,this._lastEvent,r,l);r&&(this._lastEvent=null,ur(s.onHover,[e,a,this],this),l&&ur(s.onClick,[e,a,this],this));const u=!IS(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}};function s7(){return Hn(Rk.instances,t=>t._plugins.invalidate())}function FQ(t,e,n=e){t.lineCap=En(n.borderCapStyle,e.borderCapStyle),t.setLineDash(En(n.borderDash,e.borderDash)),t.lineDashOffset=En(n.borderDashOffset,e.borderDashOffset),t.lineJoin=En(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=En(n.borderWidth,e.borderWidth),t.strokeStyle=En(n.borderColor,e.borderColor)}function sje(t,e,n){t.lineTo(n.x,n.y)}function oje(t){return t.stepped?H6e:t.tension||t.cubicInterpolationMode==="monotone"?z6e:sje}function BQ(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function aje(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=BQ(i,n,r),u=oje(s);let{move:h=!0,reverse:d}=r||{},f,m,g;for(f=0;f<=c;++f)m=i[(a+(d?c-f:f))%o],!m.skip&&(h?(t.moveTo(m.x,m.y),h=!1):u(t,g,m,d,s.stepped),g=m);return l&&(m=i[(a+(d?c:0))%o],u(t,g,m,d,s.stepped)),!!l}function lje(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=BQ(i,n,r),{move:l=!0,reverse:c}=r||{};let u=0,h=0,d,f,m,g,b,y;const v=w=>(o+(c?a-w:w))%s,x=()=>{g!==b&&(t.lineTo(u,b),t.lineTo(u,g),t.lineTo(u,y))};for(l&&(f=i[v(0)],t.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=i[v(d)],f.skip)continue;const w=f.x,S=f.y,E=w|0;E===m?(S<g?g=S:S>b&&(b=S),u=(h*u+w)/++h):(x(),t.lineTo(w,S),m=E,h=0,g=b=S),y=S}x()}function l4(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?lje:aje}function cje(t){return t.stepped?wMe:t.tension||t.cubicInterpolationMode==="monotone"?SMe:md}function uje(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),FQ(t,e.options),t.stroke(i)}function hje(t,e,n,r){const{segments:i,options:s}=e,o=l4(e);for(const a of i)FQ(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const dje=typeof Path2D=="function";function fje(t,e,n,r){dje&&!e.options.segment?uje(t,e,n,r):hje(t,e,n,r)}class pje extends Gf{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;pMe(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=LMe(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=AMe(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=cje(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:d}=o[c],f=s[h],m=s[d];if(f===m){a.push(f);continue}const g=Math.abs((i-f[n])/(m[n]-f[n])),b=l(f,m,g,r.stepped);b[n]=e[n],a.push(b)}return a.length===1?a[0]:a}pathSegment(e,n,r){return l4(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=l4(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),fje(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function o7(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class mje extends Gf{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,r){const i=this.options,{x:s,y:o}=this.getProps(["x","y"],r);return Math.pow(e-s,2)+Math.pow(n-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,n){return o7(this,e,"x",n)}inYRange(e,n){return o7(this,e,"y",n)}getCenterPoint(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const r=n&&e.borderWidth||0;return(n+r)*2}draw(e,n){const r=this.options;this.skip||r.radius<.1||!_y(this,n,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,i4(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}const a7=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},gje=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class l7 extends Gf{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ur(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=es(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=a7(r,s);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let h=e;s.textAlign="left",s.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((m,g)=>{const b=r+n/2+s.measureText(m.text).width;(g===0||c[c.length-1]+b+2*a>o)&&(h+=u,c[c.length-(g>0?0:1)]=0,f+=u,d++),l[g]={left:0,top:f,row:d,width:b,height:i},c[c.length-1]+=b+a}),h}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,d=0,f=0,m=0,g=0;return this.legendItems.forEach((b,y)=>{const{itemWidth:v,itemHeight:x}=bje(r,n,s,b,i);y>0&&f+x+2*a>u&&(h+=d+a,c.push({width:d,height:f}),m+=d+a,g++,d=f=0),l[y]={left:m,top:f,col:g,width:v,height:x},d=Math.max(d,v),f+=x+a}),h+=d,c.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=Lm(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=qi(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=qi(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=qi(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=qi(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;WI(e,this),this._draw(),GI(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Br.color,l=Lm(e.rtl,this.left,this.width),c=es(o.font),{padding:u}=o,h=c.size,d=h/2;let f;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:m,boxHeight:g,itemHeight:b}=a7(o,h),y=function(E,k,_){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;i.save();const L=En(_.lineWidth,1);if(i.fillStyle=En(_.fillStyle,a),i.lineCap=En(_.lineCap,"butt"),i.lineDashOffset=En(_.lineDashOffset,0),i.lineJoin=En(_.lineJoin,"miter"),i.lineWidth=L,i.strokeStyle=En(_.strokeStyle,a),i.setLineDash(En(_.lineDash,[])),o.usePointStyle){const R={radius:g*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:L},C=l.xPlus(E,m/2),P=k+d;gQ(i,R,C,P,o.pointStyleWidth&&m)}else{const R=k+Math.max((h-g)/2,0),C=l.leftForLtr(E,m),P=b1(_.borderRadius);i.beginPath(),Object.values(P).some(O=>O!==0)?s4(i,{x:C,y:R,w:m,h:g,radius:P}):i.rect(C,R,m,g),i.fill(),L!==0&&i.stroke()}i.restore()},v=function(E,k,_){wy(i,_.text,E,k+b/2,c,{strikethrough:_.hidden,textAlign:l.textAlign(_.textAlign)})},x=this.isHorizontal(),w=this._computeTitleHeight();x?f={x:qi(s,this.left+u,this.right-r[0]),y:this.top+u+w,line:0}:f={x:this.left+u,y:qi(s,this.top+w+u,this.bottom-n[0].height),line:0},SQ(this.ctx,e.textDirection);const S=b+u;this.legendItems.forEach((E,k)=>{i.strokeStyle=E.fontColor,i.fillStyle=E.fontColor;const _=i.measureText(E.text).width,L=l.textAlign(E.textAlign||(E.textAlign=o.textAlign)),R=m+d+_;let C=f.x,P=f.y;l.setWidth(this.width),x?k>0&&C+R+u>this.right&&(P=f.y+=S,f.line++,C=f.x=qi(s,this.left+u,this.right-r[f.line])):k>0&&P+S>this.bottom&&(C=f.x=C+n[f.line].width+u,f.line++,P=f.y=qi(s,this.top+w+u,this.bottom-n[f.line].height));const O=l.x(C);if(y(O,P,E),C=P6e(L,C+m+d,x?C+R:this.right,e.rtl),v(l.x(C),P,E),x)f.x+=R+u;else if(typeof E.text!="string"){const N=c.lineHeight;f.y+=UQ(E,N)+u}else f.y+=S}),EQ(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=es(n.font),i=sa(n.padding);if(!n.display)return;const s=Lm(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,h=qi(e.align,h,this.right-d);else{const m=this.columnSizes.reduce((g,b)=>Math.max(g,b.height),0);u=c+qi(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const f=qi(a,h,h+d);o.textAlign=s.textAlign(zI(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,wy(o,n.text,f,u,r)}_computeTitleHeight(){const e=this.options.title,n=es(e.font),r=sa(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(Db(e,this.left,this.right)&&Db(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Db(e,i.left,i.left+i.width)&&Db(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!xje(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=gje(i,r);i&&!s&&ur(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&ur(n.onHover,[e,r,this],this)}else r&&ur(n.onClick,[e,r,this],this)}}function bje(t,e,n,r,i){const s=yje(r,t,e,n),o=vje(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function yje(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function vje(t,e,n){let r=t;return typeof e.text!="string"&&(r=UQ(e,n)),r}function UQ(t,e){const n=t.text?t.text.length:0;return e*n}function xje(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var _je={id:"legend",_element:l7,start(t,e,n){const r=t.legend=new l7({ctx:t.ctx,options:n,chart:t});Go.configure(t,r,n),Go.addBox(t,r)},stop(t){Go.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Go.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=sa(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class $Q extends Gf{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=yi(r.text)?r.text.length:1;this._padding=sa(r.padding);const s=i*es(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=qi(a,r,s),h=n+e,c=s-r):(o.position==="left"?(u=r+e,h=qi(a,i,n),l=_i*-.5):(u=s-e,h=qi(a,n,i),l=_i*.5),c=i-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=es(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);wy(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:zI(n.align),textBaseline:"middle",translation:[o,a]})}}function wje(t,e){const n=new $Q({ctx:t.ctx,options:e,chart:t});Go.configure(t,n,e),Go.addBox(t,n),t.titleBlock=n}var Sje={id:"title",_element:$Q,start(t,e,n){wje(t,n)},stop(t){const e=t.titleBlock;Go.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Go.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const jb={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=n4(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function wl(t,e){return e&&(yi(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Cc(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Eje(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function c7(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=es(e.bodyFont),c=es(e.titleFont),u=es(e.footerFont),h=s.length,d=i.length,f=r.length,m=sa(e.padding);let g=m.height,b=0,y=r.reduce((w,S)=>w+S.before.length+S.lines.length+S.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){const w=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=f*w+(y-f)*l.lineHeight+(y-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let v=0;const x=function(w){b=Math.max(b,n.measureText(w).width+v)};return n.save(),n.font=c.string,Hn(t.title,x),n.font=l.string,Hn(t.beforeBody.concat(t.afterBody),x),v=e.displayColors?o+2+e.boxPadding:0,Hn(r,w=>{Hn(w.before,x),Hn(w.lines,x),Hn(w.after,x)}),v=0,n.font=u.string,Hn(t.footer,x),n.restore(),b+=m.width,{width:b,height:g}}function kje(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function Cje(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function Tje(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),Cje(c,t,e,n)&&(c="center"),c}function u7(t,e,n){const r=n.yAlign||e.yAlign||kje(t,n);return{xAlign:n.xAlign||e.xAlign||Tje(t,e,n,r),yAlign:r}}function Aje(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function Pje(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function h7(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=b1(o);let m=Aje(e,a);const g=Pje(e,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(u,d)+i:a==="right"&&(m+=Math.max(h,f)+i),{x:Wo(m,0,r.width-e.width),y:Wo(g,0,r.height-e.height)}}function ew(t,e,n){const r=sa(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function d7(t){return wl([],Cc(t))}function Nje(t,e,n){return Wf(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function f7(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const HQ={beforeTitle:wc,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:wc,beforeBody:wc,beforeLabel:wc,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return cr(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:wc,afterBody:wc,beforeFooter:wc,footer:wc,afterFooter:wc};function Rs(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?HQ[e].call(n,r):i}class p7 extends Gf{static positioners=jb;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new CQ(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=Nje(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Rs(r,"beforeTitle",this,e),s=Rs(r,"title",this,e),o=Rs(r,"afterTitle",this,e);let a=[];return a=wl(a,Cc(i)),a=wl(a,Cc(s)),a=wl(a,Cc(o)),a}getBeforeBody(e,n){return d7(Rs(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return Hn(e,s=>{const o={before:[],lines:[],after:[]},a=f7(r,s);wl(o.before,Cc(Rs(a,"beforeLabel",this,s))),wl(o.lines,Rs(a,"label",this,s)),wl(o.after,Cc(Rs(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return d7(Rs(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Rs(r,"beforeFooter",this,e),s=Rs(r,"footer",this,e),o=Rs(r,"afterFooter",this,e);let a=[];return a=wl(a,Cc(i)),a=wl(a,Cc(s)),a=wl(a,Cc(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(Eje(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,d)=>e.filter(u,h,d,r))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,r))),Hn(a,u=>{const h=f7(e.callbacks,u);i.push(Rs(h,"labelColor",this,u)),s.push(Rs(h,"labelPointStyle",this,u)),o.push(Rs(h,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=jb[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=c7(this,r),c=Object.assign({},a,l),u=u7(this.chart,r,c),h=h7(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=b1(a),{x:d,y:f}=e,{width:m,height:g}=n;let b,y,v,x,w,S;return s==="center"?(w=f+g/2,i==="left"?(b=d,y=b-o,x=w+o,S=w-o):(b=d+m,y=b+o,x=w-o,S=w+o),v=b):(i==="left"?y=d+Math.max(l,u)+o:i==="right"?y=d+m-Math.max(c,h)-o:y=this.caretX,s==="top"?(x=f,w=x-o,b=y-o,v=y+o):(x=f+g,w=x+o,b=y+o,v=y-o),S=x),{x1:b,x2:y,x3:v,y1:x,y2:w,y3:S}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=Lm(r.rtl,this.x,this.width);for(e.x=ew(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=es(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,u=es(s.bodyFont),h=ew(this,"left",s),d=i.x(h),f=l<u.lineHeight?(u.lineHeight-l)/2:0,m=n.y+f;if(s.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=i.leftForLtr(d,c)+c/2,y=m+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,i4(e,g,b,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,i4(e,g,b,y)}else{e.lineWidth=jn(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const g=i.leftForLtr(d,c),b=i.leftForLtr(i.xPlus(d,1),c-2),y=b1(o.borderRadius);Object.values(y).some(v=>v!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,s4(e,{x:g,y:m,w:c,h:l,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),s4(e,{x:b,y:m+1,w:c-2,h:l-2,radius:y}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(g,m,c,l),e.strokeRect(g,m,c,l),e.fillStyle=o.backgroundColor,e.fillRect(b,m+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,h=es(r.bodyFont);let d=h.lineHeight,f=0;const m=Lm(r.rtl,this.x,this.width),g=function(_){n.fillText(_,m.x(e.x+f),e.y+d/2),e.y+=d+s},b=m.textAlign(o);let y,v,x,w,S,E,k;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=ew(this,b,r),n.fillStyle=r.bodyColor,Hn(this.beforeBody,g),f=a&&b!=="right"?o==="center"?c/2+u:c+2+u:0,w=0,E=i.length;w<E;++w){for(y=i[w],v=this.labelTextColors[w],n.fillStyle=v,Hn(y.before,g),x=y.lines,a&&x.length&&(this._drawColorBox(n,e,w,m,r),d=Math.max(h.lineHeight,l)),S=0,k=x.length;S<k;++S)g(x[S]),d=h.lineHeight;Hn(y.after,g)}f=0,d=h.lineHeight,Hn(this.afterBody,g),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=Lm(r.rtl,this.x,this.width);for(e.x=ew(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=es(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:m}=b1(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-d,l),n.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+u-m),n.quadraticCurveTo(a+c,l+u,a+c-m,l+u),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=jb[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=c7(this,e),l=Object.assign({},o,this._size),c=u7(n,e,l),u=h7(e,l,c,n);(i._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=sa(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),SQ(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),EQ(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!IS(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!IS(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=jb[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}var Lje={id:"tooltip",_element:p7,positioners:jb,afterInit(t,e,n){n&&(t.tooltip=new p7({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:HQ},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Rje=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Ije(t,e,n,r){const i=t.indexOf(e);if(i===-1)return Rje(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const Oje=(t,e)=>t===null?null:Wo(Math.round(t),0,e);function m7(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Dje extends Yg{static id="category";static defaults={ticks:{callback:m7}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(cr(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:Ije(r,e,En(n,e),this._addedLabels),Oje(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return m7.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Mje(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=t,f=s||1,m=u-1,{min:g,max:b}=e,y=!cr(o),v=!cr(a),x=!cr(c),w=(b-g)/(h+1);let S=vB((b-g)/m/f)*f,E,k,_,L;if(S<1e-14&&!y&&!v)return[{value:g},{value:b}];L=Math.ceil(b/S)-Math.floor(g/S),L>m&&(S=vB(L*S/m/f)*f),cr(l)||(E=Math.pow(10,l),S=Math.ceil(S*E)/E),i==="ticks"?(k=Math.floor(g/S)*S,_=Math.ceil(b/S)*S):(k=g,_=b),y&&v&&s&&y6e((a-o)/s,S/1e3)?(L=Math.round(Math.min((a-o)/S,u)),S=(a-o)/L,k=o,_=a):x?(k=y?o:k,_=v?a:_,L=c-1,S=(_-k)/L):(L=(_-k)/S,p1(L,Math.round(L),S/1e3)?L=Math.round(L):L=Math.ceil(L));const R=Math.max(xB(S),xB(k));E=Math.pow(10,cr(l)?R:l),k=Math.round(k*E)/E,_=Math.round(_*E)/E;let C=0;for(y&&(d&&k!==o?(n.push({value:o}),k<o&&C++,p1(Math.round((k+C*S)*E)/E,o,g7(o,w,t))&&C++):k<o&&C++);C<L;++C){const P=Math.round((k+C*S)*E)/E;if(v&&P>a)break;n.push({value:P})}return v&&d&&_!==a?n.length&&p1(n[n.length-1].value,a,g7(a,w,t))?n[n.length-1].value=a:n.push({value:a}):(!v||_===a)&&n.push({value:_}),n}function g7(t,e,{horizontal:n,minRotation:r}){const i=Ld(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class jje extends Yg{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return cr(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=cg(i),c=cg(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=Mje(i,s);return e.bounds==="ticks"&&v6e(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return pQ(e,this.chart.options.locale,this.options.ticks.format)}}class Fje extends jje{static id="linear";static defaults={ticks:{callback:mQ.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ia(e)?e:0,this.max=ia(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Ld(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Ik={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Fs=Object.keys(Ik);function b7(t,e){return t-e}function y7(t,e){if(cr(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),ia(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(xy(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function v7(t,e,n,r){const i=Fs.length;for(let s=Fs.indexOf(t);s<i-1;++s){const o=Ik[Fs[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Fs[s]}return Fs[i-1]}function Bje(t,e,n,r,i){for(let s=Fs.length-1;s>=Fs.indexOf(n);s--){const o=Fs[s];if(Ik[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return Fs[n?Fs.indexOf(n):0]}function Uje(t){for(let e=Fs.indexOf(t)+1,n=Fs.length;e<n;++e)if(Ik[Fs[e]].common)return Fs[e]}function x7(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=HI(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function $je(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function _7(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:$je(t,r,i,n)}class w7 extends Yg{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new YMe._date(e.adapters.date);i.init(n),f1(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:y7(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=ia(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=ia(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=k6e(i,s,o);return this._unit=n.unit||(r.autoSkip?v7(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):Bje(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Uje(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),_7(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Wo(n,0,o),r=Wo(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||v7(s.minUnit,n,r,this._getLabelCapacity(n)),a=En(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=xy(l)||l===!0,u={};let h=n,d,f;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const m=i.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<r;d=+e.add(d,a,o),f++)x7(u,d,m);return(d===r||i.bounds==="ticks"||f===1)&&x7(u,d,m),Object.keys(u).sort(b7).map(g=>+g)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return ur(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],d=r[n],f=c&&h&&d&&d.major;return this._adapter.format(e,i||(f?h:u))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=Ld(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,_7(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(y7(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return T6e(e.sort(b7))}}function tw(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Rd(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Rd(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class Dit extends w7{static id="timeseries";static defaults=w7.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=tw(n,this.min),this._tableRange=tw(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(tw(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return tw(this._table,r*this._tableRange+this._minPos,!0)}}const zQ="label";function S7(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Hje(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function VQ(t,e){t.labels=e}function WQ(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zQ;const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function zje(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zQ;const n={labels:[],datasets:[]};return VQ(n,t.labels),WQ(n,t.datasets,e),n}function Vje(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:h,...d}=t,f=A.useRef(null),m=A.useRef(null),g=()=>{f.current&&(m.current=new Rk(f.current,{type:o,data:zje(a,s),options:l&&{...l},plugins:c}),S7(e,m.current))},b=()=>{S7(e,null),m.current&&(m.current.destroy(),m.current=null)};return A.useEffect(()=>{!i&&m.current&&l&&Hje(m.current,l)},[i,l]),A.useEffect(()=>{!i&&m.current&&VQ(m.current.config.data,a.labels)},[i,a.labels]),A.useEffect(()=>{!i&&m.current&&a.datasets&&WQ(m.current.config.data,a.datasets,s)},[i,a.datasets]),A.useEffect(()=>{m.current&&(i?(b(),setTimeout(g)):m.current.update(h))},[i,l,a.labels,a.datasets,h]),A.useEffect(()=>{m.current&&(b(),setTimeout(g))},[o]),A.useEffect(()=>(g(),()=>b()),[]),ut.createElement("canvas",{ref:f,role:"img",height:n,width:r,...d},u)}const Wje=A.forwardRef(Vje);function Gje(t,e){return Rk.register(e),A.forwardRef((n,r)=>ut.createElement(Wje,{...n,ref:r,type:t}))}const qje=Gje("line",KMe),E7={userTabs:[],developerTabs:[]},Kje=WW((t,e)=>({...E7,get:()=>({userTabs:e().userTabs,developerTabs:e().developerTabs}),set:n=>t(n),reset:()=>t(E7)}));Rk.register(Dje,Fje,mje,pje,Sje,Lje,_je);const $u={normal:{metrics:1e3},energySaver:{metrics:5e3}},us={cpu:{warning:70,critical:90},memory:{warning:80,critical:95},fps:{warning:30,critical:15}},Yje={update:.1},ab=[{name:"Performance",description:"Maximum performance with frequent updates",settings:{updateInterval:$u.normal.metrics,enableAnimations:!0,backgroundProcessing:!0,networkThrottling:!1}},{name:"Balanced",description:"Optimal balance between performance and energy efficiency",settings:{updateInterval:2e3,enableAnimations:!0,backgroundProcessing:!0,networkThrottling:!1}},{name:"Energy Saver",description:"Maximum energy efficiency with reduced updates",settings:{updateInterval:$u.energySaver.metrics,enableAnimations:!1,backgroundProcessing:!1,networkThrottling:!0}}],k7={cpu:{usage:0,cores:[]},memory:{used:0,total:0,percentage:0,heap:{used:0,total:0,limit:0}},uptime:0,network:{downlink:0,latency:0,type:"unknown",bytesReceived:0,bytesSent:0},performance:{fps:0,pageLoad:0,domReady:0,resources:{total:0,size:0,loadTime:0},timing:{ttfb:0,fcp:0,lcp:0}},health:{score:0,issues:[],suggestions:[]}},C7={timestamps:Array(10).fill(new Date().toLocaleTimeString()),cpu:Array(10).fill(0),memory:Array(10).fill(0),battery:Array(10).fill(0),network:Array(10).fill(0)},Xje=20,lb=10,Zje=()=>{const[t,e]=A.useState(()=>k7),[n,r]=A.useState(()=>C7),[i,s]=A.useState(!1),[o,a]=A.useState(!1),[l,c]=A.useState(()=>({updatesReduced:0,timeInSaverMode:0,estimatedEnergySaved:0})),[u,h]=A.useState(()=>ab[1]),[d,f]=A.useState([]),m=A.useRef(null),{hasUpdate:g}=BG(),b=VW(Kje),y=A.useCallback(()=>(b.reset(),b.get()),[b]);A.useEffect(()=>{const H=setInterval(()=>{const Q=b.get(),X=["debug","update"],J=Q.userTabs.map(j=>X.includes(j.id)?{...j,visible:j.id==="debug"?t.cpu.usage>80:g}:j);b.set({...Q,userTabs:J})},5e3);return()=>{clearInterval(H)}},[t.cpu.usage,g,b]),A.useEffect(()=>{const N=()=>{console.log("TaskManagerTab: Resetting to defaults"),e(k7),r(C7),s(!1),a(!1),c({updatesReduced:0,timeInSaverMode:0,estimatedEnergySaved:0}),h(ab[1]),f([]),m.current=null;const X=y();console.log("TaskManagerTab: Reset tab configuration:",X)},H=X=>{X instanceof StorageEvent?X.key==="tabConfiguration"&&X.newValue===null&&N():X instanceof CustomEvent&&X.type==="tabConfigReset"&&N()},Q=async()=>{try{const X=localStorage.getItem("energySaverMode"),J=localStorage.getItem("autoEnergySaver"),j=localStorage.getItem("selectedProfile");if(X&&s(JSON.parse(X)),J&&a(JSON.parse(J)),j){const F=ab.find(Y=>Y.name===j);F&&h(F)}await L()}catch(X){console.error("Failed to initialize TaskManagerTab:",X),N()}};return window.addEventListener("storage",H),window.addEventListener("tabConfigReset",H),Q(),()=>{window.removeEventListener("storage",H),window.removeEventListener("tabConfigReset",H)}},[]);const v=async()=>{try{const N=await E(),H=performance.getEntriesByType("navigation")[0],Q=H.loadEventEnd-H.startTime,X=H.domContentLoadedEventEnd-H.startTime,J=performance.getEntriesByType("resource"),j={total:J.length,size:J.reduce((V,W)=>V+(W.transferSize||0),0),loadTime:Math.max(0,...J.map(V=>V.duration))},F=H.responseStart-H.requestStart,M=performance.getEntriesByType("paint").find(V=>V.name==="first-contentful-paint")?.startTime||0,D=await k();return{fps:N,pageLoad:Q,domReady:X,resources:j,timing:{ttfb:F,fcp:M,lcp:D?.startTime||0}}}catch(N){return console.error("Failed to get performance metrics:",N),{}}};A.useEffect(()=>{let N=!0;const H=async()=>{if(N)try{await L()}catch(X){console.error("Failed to update metrics:",X)}};H();const Q=setInterval(H,i?$u.energySaver.metrics:$u.normal.metrics);return()=>{N=!1,clearInterval(Q)}},[i]);const x=N=>{s(N),localStorage.setItem("energySaverMode",JSON.stringify(N)),He.success(N?"Energy Saver mode enabled":"Energy Saver mode disabled")},w=N=>{a(N),localStorage.setItem("autoEnergySaver",JSON.stringify(N)),He.success(N?"Auto Energy Saver enabled":"Auto Energy Saver disabled"),N||(s(!1),localStorage.setItem("energySaverMode","false"))},S=A.useCallback(()=>{if(!i){m.current=null,c({updatesReduced:0,timeInSaverMode:0,estimatedEnergySaved:0});return}m.current||(m.current=Date.now());const N=Math.max(0,(Date.now()-(m.current||Date.now()))/1e3),H=60/($u.normal.metrics/1e3),Q=60/($u.energySaver.metrics/1e3),X=Math.floor((H-Q)*(N/60)),J=Yje.update,j=X*J/3600;c({updatesReduced:X,timeInSaverMode:N,estimatedEnergySaved:j})},[i]);A.useEffect(()=>{const N=setInterval(S,1e3);return()=>clearInterval(N)},[S]);const E=async()=>new Promise(N=>{const H={value:0},Q=performance.now(),X=J=>{H.value++,J-Q>=1e3?N(Math.round(H.value*1e3/(J-Q))):requestAnimationFrame(X)};requestAnimationFrame(X)}),k=async()=>new Promise(N=>{new PerformanceObserver(H=>{const Q=H.getEntries();N(Q[Q.length-1])}).observe({entryTypes:["largest-contentful-paint"]}),setTimeout(()=>N(void 0),3e3)}),_=N=>{const H=[],Q=[];let X=100;return N.cpu.usage>us.cpu.critical?(X-=30,H.push("Critical CPU usage"),Q.push("Consider closing resource-intensive applications")):N.cpu.usage>us.cpu.warning&&(X-=15,H.push("High CPU usage"),Q.push("Monitor system processes for unusual activity")),N.memory.percentage>us.memory.critical?(X-=30,H.push("Critical memory usage"),Q.push("Close unused applications to free up memory")):N.memory.percentage>us.memory.warning&&(X-=15,H.push("High memory usage"),Q.push("Consider freeing up memory by closing background applications")),N.performance.fps<us.fps.critical?(X-=20,H.push("Very low frame rate"),Q.push("Disable animations or switch to power saver mode")):N.performance.fps<us.fps.warning&&(X-=10,H.push("Low frame rate"),Q.push("Consider reducing visual effects")),N.battery&&!N.battery.charging&&N.battery.level<20&&(X-=10,H.push("Low battery"),Q.push("Connect to power source or enable power saver mode")),{score:Math.max(0,X),issues:H,suggestions:Q}},L=async()=>{try{const N=performance.memory||{jsHeapSizeLimit:0,totalJSHeapSize:0,usedJSHeapSize:0},H=N.totalJSHeapSize/(1024*1024),Q=N.usedJSHeapSize/(1024*1024),X=Q/H*100,J=await R();let j;try{const W=await navigator.getBattery();j={level:W.level*100,charging:W.charging,timeRemaining:W.charging?W.chargingTime:W.dischargingTime}}catch{console.log("Battery API not available")}const F=navigator.connection||navigator.mozConnection||navigator.webkitConnection,Y={downlink:F?.downlink||0,uplink:F?.uplink,latency:F?.rtt||0,type:F?.type||"unknown",activeConnections:F?.activeConnections,bytesReceived:F?.bytesReceived||0,bytesSent:F?.bytesSent||0},M=await v(),D={cpu:{usage:J,cores:[],temperature:void 0,frequency:void 0},memory:{used:Math.round(Q),total:Math.round(H),percentage:Math.round(X),heap:{used:Math.round(Q),total:Math.round(H),limit:Math.round(H)}},uptime:performance.now()/1e3,battery:j,network:Y,performance:M,health:{score:0,issues:[],suggestions:[]}};D.health=_(D),O(D),e(D);const V=new Date().toLocaleTimeString();r(W=>{const te=[...W.timestamps,V].slice(-lb),ee=[...W.cpu,D.cpu.usage].slice(-lb),K=[...W.memory,D.memory.percentage].slice(-lb),he=[...W.battery,j?.level||0].slice(-lb),be=[...W.network,Y.downlink].slice(-lb);return{timestamps:te,cpu:ee,memory:K,battery:he,network:be}})}catch(N){console.error("Failed to update system metrics:",N)}},R=async()=>{try{const N=performance.now();let H=0;for(let F=0;F<1e4;F++)H+=Math.random();H<0&&console.log("Unexpected negative result");const X=performance.now()-N,J=50;return 100-Math.max(0,Math.min(100,(J-X)/J*100))}catch(N){return console.error("Failed to get CPU usage:",N),0}};A.useEffect(()=>{const N=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(!N)return;const H=()=>{e(Q=>({...Q,network:{downlink:N.downlink||0,latency:N.rtt||0,type:N.type||"unknown",bytesReceived:N.bytesReceived||0,bytesSent:N.bytesSent||0}}))};return N.addEventListener("change",H),()=>N.removeEventListener("change",H)},[]),A.useEffect(()=>{const N=setInterval(()=>{i||L()},i?$u.energySaver.metrics:$u.normal.metrics);return()=>{clearInterval(N)}},[i]);const C=N=>N>80?"text-red-500":N>50?"text-yellow-500":"text-gray-500",P=(N,H,Q)=>{const X={labels:n.timestamps,datasets:[{label:H,data:N,borderColor:Q,fill:!1,tension:.4}]},J={responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,max:100,grid:{color:"rgba(255, 255, 255, 0.1)"}},x:{grid:{display:!1}}},plugins:{legend:{display:!1}},animation:{duration:0}};return p.jsx("div",{className:"h-32",children:p.jsx(qje,{data:X,options:J})})};A.useEffect(()=>{if(!o){s(!1);return}const N=async()=>{try{const Q=await navigator.getBattery(),X=!Q.charging&&Q.level*100<=Xje;s(X)}catch{console.log("Battery API not available")}};N();const H=setInterval(N,6e4);return()=>clearInterval(H)},[o]);const O=N=>{const H=[];N.cpu.usage>us.cpu.critical&&H.push({type:"error",message:"Critical CPU usage detected",timestamp:Date.now(),metric:"cpu",threshold:us.cpu.critical,value:N.cpu.usage}),N.memory.percentage>us.memory.critical&&H.push({type:"error",message:"Critical memory usage detected",timestamp:Date.now(),metric:"memory",threshold:us.memory.critical,value:N.memory.percentage}),N.performance.fps<us.fps.critical&&H.push({type:"warning",message:"Very low frame rate detected",timestamp:Date.now(),metric:"fps",threshold:us.fps.critical,value:N.performance.fps}),H.length>0&&(f(Q=>[...Q,...H]),H.forEach(Q=>{He.warning(Q.message)}))};return p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"Power Management"}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",id:"autoEnergySaver",checked:o,onChange:N=>w(N.target.checked),className:"form-checkbox h-4 w-4 text-purple-600 rounded border-gray-300 dark:border-gray-700"}),p.jsx("div",{className:"i-ph:gauge-duotone w-4 h-4 text-bolt-elements-textSecondary"}),p.jsx("label",{htmlFor:"autoEnergySaver",className:"text-sm text-bolt-elements-textSecondary",children:"Auto Energy Saver"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",id:"energySaver",checked:i,onChange:N=>!o&&x(N.target.checked),disabled:o,className:"form-checkbox h-4 w-4 text-purple-600 rounded border-gray-300 dark:border-gray-700 disabled:opacity-50"}),p.jsx("div",{className:"i-ph:leaf-duotone w-4 h-4 text-bolt-elements-textSecondary"}),p.jsxs("label",{htmlFor:"energySaver",className:Ae("text-sm text-bolt-elements-textSecondary",{"opacity-50":o}),children:["Energy Saver",i&&p.jsx("span",{className:"ml-2 text-xs text-bolt-elements-textSecondary",children:"Active"})]})]}),p.jsxs("div",{className:"relative",children:[p.jsx("select",{value:u.name,onChange:N=>{const H=ab.find(Q=>Q.name===N.target.value);H&&(h(H),He.success(`Switched to ${H.name} power profile`))},className:"pl-8 pr-8 py-1.5 rounded-md bg-bolt-background-secondary dark:bg-[#1E1E1E] border border-bolt-border dark:border-bolt-borderDark text-sm text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimaryDark hover:border-bolt-action-primary dark:hover:border-bolt-action-primary focus:outline-none focus:ring-1 focus:ring-bolt-action-primary appearance-none min-w-[160px] cursor-pointer transition-colors duration-150",style:{WebkitAppearance:"none",MozAppearance:"none"},children:ab.map(N=>p.jsx("option",{value:N.name,className:"py-2 px-3 bg-bolt-background-secondary dark:bg-[#1E1E1E] text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimaryDark hover:bg-bolt-background-tertiary dark:hover:bg-bolt-backgroundDark-tertiary cursor-pointer",children:N.name},N.name))}),p.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 pointer-events-none",children:p.jsx("div",{className:Ae("w-4 h-4 text-bolt-elements-textSecondary",{"i-ph:lightning-fill text-yellow-500":u.name==="Performance","i-ph:scales-fill text-blue-500":u.name==="Balanced","i-ph:leaf-fill text-green-500":u.name==="Energy Saver"})})}),p.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none",children:p.jsx("div",{className:"i-ph:caret-down w-4 h-4 text-bolt-elements-textSecondary opacity-75"})})]})]})]}),p.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:u.description})]}),p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"System Health"}),p.jsx("div",{className:"grid grid-cols-1 gap-4",children:p.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Health Score"}),p.jsxs("span",{className:Ae("text-lg font-medium",{"text-green-500":t.health.score>=80,"text-yellow-500":t.health.score>=60&&t.health.score<80,"text-red-500":t.health.score<60}),children:[t.health.score,"%"]})]}),t.health.issues.length>0&&p.jsxs("div",{className:"mt-2",children:[p.jsx("div",{className:"text-sm font-medium text-bolt-elements-textSecondary mb-1",children:"Issues:"}),p.jsx("ul",{className:"text-sm text-bolt-elements-textSecondary space-y-1",children:t.health.issues.map((N,H)=>p.jsxs("li",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:warning-circle-fill text-yellow-500 w-4 h-4"}),N]},H))})]}),t.health.suggestions.length>0&&p.jsxs("div",{className:"mt-2",children:[p.jsx("div",{className:"text-sm font-medium text-bolt-elements-textSecondary mb-1",children:"Suggestions:"}),p.jsx("ul",{className:"text-sm text-bolt-elements-textSecondary space-y-1",children:t.health.suggestions.map((N,H)=>p.jsxs("li",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:lightbulb-fill text-purple-500 w-4 h-4"}),N]},H))})]})]})})]}),p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"System Metrics"}),p.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[p.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"CPU Usage"}),p.jsxs("span",{className:Ae("text-sm font-medium",C(t.cpu.usage)),children:[Math.round(t.cpu.usage),"%"]})]}),P(n.cpu,"CPU","#9333ea"),t.cpu.temperature&&p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2",children:["Temperature: ",t.cpu.temperature,"C"]}),t.cpu.frequency&&p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Frequency: ",(t.cpu.frequency/1e3).toFixed(1)," GHz"]})]}),p.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Memory Usage"}),p.jsxs("span",{className:Ae("text-sm font-medium",C(t.memory.percentage)),children:[Math.round(t.memory.percentage),"%"]})]}),P(n.memory,"Memory","#2563eb"),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2",children:["Used: ",sd(t.memory.used)]}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Total: ",sd(t.memory.total)]}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Heap: ",sd(t.memory.heap.used)," / ",sd(t.memory.heap.total)]})]}),p.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Performance"}),p.jsxs("span",{className:Ae("text-sm font-medium",{"text-red-500":t.performance.fps<us.fps.critical,"text-yellow-500":t.performance.fps<us.fps.warning,"text-green-500":t.performance.fps>=us.fps.warning}),children:[Math.round(t.performance.fps)," FPS"]})]}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2",children:["Page Load: ",(t.performance.pageLoad/1e3).toFixed(2),"s"]}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["DOM Ready: ",(t.performance.domReady/1e3).toFixed(2),"s"]}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["TTFB: ",(t.performance.timing.ttfb/1e3).toFixed(2),"s"]}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Resources: ",t.performance.resources.total," (",sd(t.performance.resources.size),")"]})]}),p.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Network"}),p.jsxs("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:[t.network.downlink.toFixed(1)," Mbps"]})]}),P(n.network,"Network","#f59e0b"),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2",children:["Type: ",t.network.type]}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Latency: ",t.network.latency,"ms"]}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Received: ",sd(t.network.bytesReceived)]}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Sent: ",sd(t.network.bytesSent)]})]})]}),t.battery&&p.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Battery"}),p.jsxs("div",{className:"flex items-center gap-2",children:[t.battery.charging&&p.jsx("div",{className:"i-ph:lightning-fill w-4 h-4 text-bolt-action-primary"}),p.jsxs("span",{className:Ae("text-sm font-medium",t.battery.level>20?"text-bolt-elements-textPrimary":"text-red-500"),children:[Math.round(t.battery.level),"%"]})]})]}),P(n.battery,"Battery","#22c55e"),t.battery.timeRemaining&&p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2",children:[t.battery.charging?"Time to full: ":"Time remaining: ",Qje(t.battery.timeRemaining)]}),t.battery.temperature&&p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Temperature: ",t.battery.temperature,"C"]}),t.battery.cycles&&p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Charge cycles: ",t.battery.cycles]}),t.battery.health&&p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Battery health: ",t.battery.health,"%"]})]}),d.length>0&&p.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Recent Alerts"}),p.jsx("button",{onClick:()=>f([]),className:"text-xs text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary",children:"Clear All"})]}),p.jsx("div",{className:"space-y-2",children:d.slice(-5).map((N,H)=>p.jsxs("div",{className:Ae("flex items-center gap-2 text-sm",{"text-red-500":N.type==="error","text-yellow-500":N.type==="warning","text-blue-500":N.type==="info"}),children:[p.jsx("div",{className:Ae("w-4 h-4",{"i-ph:warning-circle-fill":N.type==="warning","i-ph:x-circle-fill":N.type==="error","i-ph:info-fill":N.type==="info"})}),p.jsx("span",{children:N.message}),p.jsx("span",{className:"text-xs text-bolt-elements-textSecondary ml-auto",children:new Date(N.timestamp).toLocaleTimeString()})]},H))})]}),i&&p.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Energy Savings"}),p.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Updates Reduced"}),p.jsx("p",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:l.updatesReduced})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Time in Saver Mode"}),p.jsxs("p",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:[Math.floor(l.timeInSaverMode/60),"m ",Math.floor(l.timeInSaverMode%60),"s"]})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Energy Saved"}),p.jsxs("p",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:[l.estimatedEnergySaved.toFixed(2)," mWh"]})]})]})]})]})]})},Jje=A.memo(Zje),sd=t=>{if(t===0)return"0 B";const e=1024,n=["B","KB","MB","GB","TB"],r=Math.floor(Math.log(t)/Math.log(e));return`${parseFloat((t/Math.pow(e,r)).toFixed(2))} ${n[r]}`},Qje=t=>{if(!isFinite(t)||t===0)return"Unknown";const e=Math.floor(t/3600),n=Math.floor(t%3600/60);return e>0?`${e}h ${n}m`:`${n}m`},eFe={profile:"Manage your profile and account settings",settings:"Configure application preferences",notifications:"View and manage your notifications",features:"Explore new and upcoming features",data:"Manage your data and storage","cloud-providers":"","local-providers":"","service-status":"Monitor cloud LLM service status",connection:"Check connection status and settings",debug:"Debug tools and system information","event-logs":"View system events and logs",update:"Check for updates and release notes","task-manager":"Monitor system resources and processes","tab-management":"Configure visible tabs and their order"},tFe=new Set(["task-manager","service-status","update"]),nFe=()=>p.jsx("div",{className:"absolute top-2 right-2 px-1.5 py-0.5 rounded-full bg-blue-500/10 dark:bg-blue-900/10",children:p.jsx("span",{className:"text-[10px] font-medium text-blue-600 dark:text-blue-300",children:"BETA"})}),rFe=({checked:t,onCheckedChange:e,id:n,label:r})=>p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs(qL,{id:n,checked:t,onCheckedChange:e,className:Ae("relative inline-flex h-6 w-11 items-center rounded-full","transition-all duration-300 ease-[cubic-bezier(0.87,_0,_0.13,_1)]","bg-gray-200 dark:bg-gray-700","data-[state=checked]:bg-blue-500","focus:outline-none focus:ring-2 focus:ring-blue-500/20","cursor-pointer","group"),children:[p.jsx(at.span,{className:Ae("absolute left-[2px] top-[2px]","inline-block h-5 w-5 rounded-full","bg-white shadow-lg","transition-shadow duration-300","group-hover:shadow-md group-active:shadow-sm","group-hover:scale-95 group-active:scale-90"),initial:!1,transition:{type:"spring",stiffness:500,damping:30,duration:.2},animate:{x:t?"1.25rem":"0rem"},children:p.jsx(at.div,{className:"absolute inset-0 rounded-full bg-white",initial:!1,animate:{scale:t?1:.8},transition:{duration:.2}})}),p.jsxs("span",{className:"sr-only",children:["Toggle ",r]})]}),p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("label",{htmlFor:n,className:"text-sm text-gray-500 dark:text-gray-400 select-none cursor-pointer whitespace-nowrap w-[88px]",children:r})})]}),iFe=t=>t?t.role==="admin":!1,sFe=({open:t,onClose:e})=>{const[n,r]=A.useState(null),[i,s]=A.useState(null),[o,a]=A.useState(!1),[l,c]=A.useState(!1),u=Ot(oh),h=Ot(eG),d=Ot(nv);A.useEffect(()=>{try{const D=localStorage.getItem("userData");if(D){const V=JSON.parse(D);c(iFe(V))}}catch(D){console.error("Error checking admin status:",D)}},[]);const{hasUpdate:f,currentVersion:m,acknowledgeUpdate:g}=BG(),{hasNewFeatures:b,unviewedFeatures:y,acknowledgeAllFeatures:v}=Mbe(),{hasUnreadNotifications:x,unreadNotifications:w,markAllAsRead:S}=jbe(),{hasConnectionIssues:E,currentIssue:k,acknowledgeIssue:_}=$be(),{hasActiveWarnings:L,activeIssues:R,acknowledgeAllIssues:C}=Vbe(),P=A.useMemo(()=>new Map(Zm.map(D=>[D.id,D])),[]),O=A.useMemo(()=>{if(!u?.userTabs||!Array.isArray(u.userTabs))return console.warn("Invalid tab configuration, resetting to defaults"),QW(),[];const D=d?.preferences?.notifications===!1;if(h){const V=new Set,W=[],te=ee=>{V.has(ee.id)||(V.add(ee.id),W.push({id:ee.id,visible:!0,window:"developer",order:ee.order||W.length}))};return u.developerTabs?.forEach(ee=>te(ee)),u.userTabs.forEach(ee=>te(ee)),Zm.forEach(ee=>te(ee)),W.push({id:"tab-management",visible:!0,window:"developer",order:W.length,isExtraDevTab:!0}),W.sort((ee,K)=>ee.order-K.order)}return u.userTabs.filter(V=>!V?.id||V.id==="notifications"&&D?!1:V.visible&&V.window==="user").sort((V,W)=>V.order-W.order)},[u,h,d?.preferences?.notifications,P]),N={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05,delayChildren:.1}}},H={hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1,transition:{type:"spring",stiffness:200,damping:20,mass:.6}}};A.useEffect(()=>{t?r(null):(r(null),s(null),a(!1))},[t]);const Q=()=>{r(null),s(null),a(!1),e()},X=()=>{o?a(!1):n&&r(null)},J=D=>{console.log("Developer mode changed:",D),r0e(D)};A.useEffect(()=>{console.log("Current developer mode:",h)},[h]);const j=D=>{if(D==="tab-management")return p.jsx(UM,{});switch(D){case"profile":return p.jsx(fye,{});case"settings":return p.jsx(pye,{});case"notifications":return p.jsx(jve,{});case"features":return p.jsx(eAe,{});case"data":return p.jsx(tAe,{});case"connection":return p.jsx(TDe,{});case"debug":return p.jsx(x3e,{});case"event-logs":return p.jsx(w3e,{});case"update":return p.jsx(wDe,{});case"task-manager":return p.jsx(Jje,{});case"service-status":return p.jsx(iQ,{});case"cloud-providers":return p.jsx(RDe,{});case"local-providers":return p.jsx(jDe,{});default:return null}},F=D=>{switch(D){case"update":return f;case"features":return b;case"notifications":return x;case"connection":return E;case"debug":return L;default:return!1}},Y=D=>{switch(D){case"update":return`New update available (v${m})`;case"features":return`${y.length} new feature${y.length===1?"":"s"} to explore`;case"notifications":return`${w.length} unread notification${w.length===1?"":"s"}`;case"connection":return k==="disconnected"?"Connection lost":k==="high-latency"?"High latency detected":"Connection issues detected";case"debug":{const V=R.filter(te=>te.type==="warning").length,W=R.filter(te=>te.type==="error").length;return`${V} warning${V===1?"":"s"}, ${W} error${W===1?"":"s"}`}default:return""}},M=D=>{switch(s(D),r(D),a(!1),D){case"update":g();break;case"features":v();break;case"notifications":S();break;case"connection":_();break;case"debug":C();break}setTimeout(()=>s(null),500)};return p.jsx(xo,{open:t,children:p.jsx(Gd,{children:p.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-[100]",children:[p.jsx(qd,{asChild:!0,children:p.jsx(at.div,{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}})}),p.jsx(Kd,{"aria-describedby":void 0,onEscapeKeyDown:Q,onPointerDownOutside:Q,className:"relative z-[101]",children:p.jsxs(at.div,{className:Ae("w-[1200px] h-[90vh]","bg-[#FAFAFA] dark:bg-[#0A0A0A]","rounded-2xl shadow-2xl","border border-[#E5E5E5] dark:border-[#1A1A1A]","flex flex-col overflow-hidden","relative"),initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},children:[p.jsx("div",{className:"absolute inset-0 overflow-hidden rounded-2xl",children:p.jsx(dye,{})}),p.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[p.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[(n||o)&&p.jsx("button",{onClick:X,className:"flex items-center justify-center w-8 h-8 rounded-full bg-transparent hover:bg-blue-500/10 dark:hover:bg-blue-900/10 group transition-all duration-200",children:p.jsx("div",{className:"i-ph:arrow-left w-4 h-4 text-gray-500 dark:text-gray-400 group-hover:text-blue-500 transition-colors"})}),p.jsx(Zc,{className:"text-xl font-semibold text-gray-900 dark:text-white",children:o?"Tab Management":n?Jb[n]:"Control Panel"})]}),p.jsxs("div",{className:"flex items-center gap-6",children:[l&&p.jsx("div",{className:"flex items-center gap-2 min-w-[140px] border-r border-gray-200 dark:border-gray-800 pr-6",children:p.jsx(rFe,{id:"developer-mode",checked:h,onCheckedChange:J,label:h?"Developer Mode":"User Mode"})}),p.jsx("div",{className:"border-l border-gray-200 dark:border-gray-800 pl-6",children:p.jsx(tye,{onSelectTab:M})}),p.jsx("button",{onClick:Q,className:"flex items-center justify-center w-8 h-8 rounded-full bg-transparent hover:bg-blue-500/10 dark:hover:bg-blue-900/10 group transition-all duration-200",children:p.jsx("div",{className:"i-ph:x w-4 h-4 text-gray-500 dark:text-gray-400 group-hover:text-blue-500 transition-colors"})})]})]}),p.jsx("div",{className:Ae("flex-1","overflow-y-auto","hover:overflow-y-auto","scrollbar scrollbar-w-2","scrollbar-track-transparent","scrollbar-thumb-[#E5E5E5] hover:scrollbar-thumb-[#CCCCCC]","dark:scrollbar-thumb-[#333333] dark:hover:scrollbar-thumb-[#444444]","will-change-scroll","touch-auto"),children:p.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"p-6",children:o?p.jsx(UM,{}):n?j(n):p.jsx(at.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 relative",variants:N,initial:"hidden",animate:"visible",children:p.jsx(Ql,{mode:"popLayout",children:O.map(D=>p.jsx(at.div,{layout:!0,variants:H,className:"aspect-[1.5/1]",children:p.jsx(Lbe,{tab:D,onClick:()=>M(D.id),isActive:n===D.id,hasUpdate:F(D.id),statusMessage:Y(D.id),description:eFe[D.id],isLoading:i===D.id,className:"h-full relative hover:bg-blue-500/10 dark:hover:bg-blue-900/10 !important",children:tFe.has(D.id)&&p.jsx(nFe,{})})},D.id))})})},n||"home")})]})]})})]})})})},oFe=A.memo(({onClick:t})=>p.jsx(gi,{onClick:t,icon:"i-ph:gear",size:"xl",title:"Settings",className:"text-[#666] hover:text-bolt-elements-textPrimary hover:bg-bolt-elements-item-backgroundActive/10 transition-colors"})),yf=A.forwardRef(({tooltip:t,children:e,sideOffset:n=5,className:r="",arrowClassName:i="",tooltipStyle:s={},position:o="top",maxWidth:a=250,delay:l=0},c)=>p.jsxs(uR,{delayDuration:l,children:[p.jsx(hR,{asChild:!0,children:e}),p.jsx(dR,{children:p.jsxs(fR,{side:o,className:`
              z-[2000]
              px-2.5
              py-1.5
              max-h-[300px]
              select-none
              rounded-md
              bg-bolt-elements-background-depth-3
              text-bolt-elements-textPrimary
              text-sm
              leading-tight
              shadow-lg
              animate-in
              fade-in-0
              zoom-in-95
              data-[state=closed]:animate-out
              data-[state=closed]:fade-out-0
              data-[state=closed]:zoom-out-95
              ${r}
            `,sideOffset:n,style:{maxWidth:a,...s},children:[p.jsx("div",{className:"break-words",children:t}),p.jsx(pR,{className:`
                fill-bolt-elements-background-depth-3
                ${i}
              `,width:12,height:6})]})})]})),nw="<boltArtifact",T7="</boltArtifact>",aFe="<boltAction",A7="</boltAction>",rw=Ws("MessageParser");function P7(t){const e=/^\s*```\w*\n([\s\S]*?)\n\s*```\s*$/,n=t.match(e);return n?n[1]:t}function N7(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}class lFe{constructor(e={}){this._options=e}#t=new Map;parse(e,n){let r=this.#t.get(e);r||(r={position:0,insideAction:!1,insideArtifact:!1,currentAction:{content:""},actionId:0},this.#t.set(e,r));let i="",s=r.position,o=!1;for(;s<n.length;){if(r.insideArtifact){const a=r.currentArtifact;if(a===void 0&&Fo("Artifact not initialized"),r.insideAction){const l=n.indexOf(A7,s),c=r.currentAction;if(l!==-1){c.content+=n.slice(s,l);let u=c.content.trim();"type"in c&&c.type==="file"&&(c.filePath.endsWith(".md")||(u=P7(u),u=N7(u)),u+=`
`),c.content=u,this._options.callbacks?.onActionClose?.({artifactId:a.id,messageId:e,actionId:String(r.actionId-1),action:c}),r.insideAction=!1,r.currentAction={content:""},s=l+A7.length}else{if("type"in c&&c.type==="file"){let u=n.slice(s);c.filePath.endsWith(".md")||(u=P7(u),u=N7(u)),this._options.callbacks?.onActionStream?.({artifactId:a.id,messageId:e,actionId:String(r.actionId-1),action:{...c,content:u,filePath:c.filePath}})}break}}else{const l=n.indexOf(aFe,s),c=n.indexOf(T7,s);if(l!==-1&&(c===-1||l<c)){const u=n.indexOf(">",l);if(u!==-1)r.insideAction=!0,r.currentAction=this.#n(n,l,u),this._options.callbacks?.onActionOpen?.({artifactId:a.id,messageId:e,actionId:String(r.actionId++),action:r.currentAction}),s=u+1;else break}else if(c!==-1)this._options.callbacks?.onArtifactClose?.({messageId:e,...a}),r.insideArtifact=!1,r.currentArtifact=void 0,s=c+T7.length;else break}}else if(n[s]==="<"&&n[s+1]!=="/"){let a=s,l="";for(;a<n.length&&l.length<nw.length;){if(l+=n[a],l===nw){const c=n[a+1];if(c&&c!==">"&&c!==" "){i+=n.slice(s,a+1),s=a+1;break}const u=n.indexOf(">",a);if(u!==-1){const h=n.slice(s,u+1),d=this.#e(h,"title"),f=this.#e(h,"type"),m=this.#e(h,"id");d||rw.warn("Artifact title missing"),m||rw.warn("Artifact id missing"),r.insideArtifact=!0;const g={id:m,title:d,type:f};r.currentArtifact=g,this._options.callbacks?.onArtifactOpen?.({messageId:e,...g});const b=this._options.artifactElement??cFe;i+=b({messageId:e}),s=u+1}else o=!0;break}else if(!nw.startsWith(l)){i+=n.slice(s,a+1),s=a+1;break}a++}if(a===n.length&&nw.startsWith(l))break}else i+=n[s],s++;if(o)break}return r.position=s,i}reset(){this.#t.clear()}#n(e,n,r){const i=e.slice(n,r+1),s=this.#e(i,"type"),o={type:s,content:""};if(s==="file"){const a=this.#e(i,"filePath");a||rw.debug("File path not specified"),o.filePath=a}else["shell","start"].includes(s)||rw.warn(`Unknown action type '${s}'`);return o}#e(e,n){const r=e.match(new RegExp(`${n}="([^"]*)"`,"i"));return r?r[1]:void 0}}const cFe=t=>`<div ${['class="__boltArtifact__"',...Object.entries(t).map(([n,r])=>`data-${uFe(n)}=${JSON.stringify(r)}`)].join(" ")}></div>`;function uFe(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}const cb=Ws("useMessageParser"),hFe=new lFe({callbacks:{onArtifactOpen:t=>{cb.trace("onArtifactOpen",t),Nt.showWorkbench.set(!0),Nt.addArtifact(t)},onArtifactClose:t=>{cb.trace("onArtifactClose"),Nt.updateArtifact(t,{closed:!0})},onActionOpen:t=>{cb.trace("onActionOpen",t.action),t.action.type==="file"&&Nt.addAction(t)},onActionClose:t=>{cb.trace("onActionClose",t.action),t.action.type!=="file"&&Nt.addAction(t),Nt.runAction(t)},onActionStream:t=>{cb.trace("onActionStream",t.action),Nt.runAction(t,!0)}}}),dFe=t=>Array.isArray(t.content)?t.content.find(e=>e.type==="text")?.text||"":t.content;function fFe(){const[t,e]=A.useState({}),n=A.useCallback((r,i)=>{for(const[s,o]of r.entries())if(o.role==="assistant"||o.role==="user"){const a=hFe.parse(o.id,dFe(o));e(l=>({...l,[s]:(l[s]||"")+a}))}},[]);return{parsedMessages:t,parseMessages:n}}const L7=Ws("usePromptEnhancement");function pFe(){const[t,e]=A.useState(!1),[n,r]=A.useState(!1);return{enhancingPrompt:t,promptEnhanced:n,enhancePrompt:async(o,a,l,c,u)=>{e(!0),r(!1);const h={message:o,model:l,provider:c};u&&(h.apiKeys=u);const f=(await fetch("/api/enhancer",{method:"POST",body:JSON.stringify(h)})).body?.getReader(),m=o;if(f){const g=new TextDecoder;let b="",y;try{for(a("");;){const{value:v,done:x}=await f.read();if(x)break;b+=g.decode(v),L7.trace("Set input",b),a(b)}}catch(v){y=v,a(m)}finally{y&&L7.error(y),e(!1),r(!0),setTimeout(()=>{a(b)})}}},resetEnhancer:()=>{e(!1),r(!1)}}}const mFe=["input","textarea"];class gFe{#t=new EventTarget;dispatch(e){this.#t.dispatchEvent(new Event(e))}on(e,n){return this.#t.addEventListener(e,n),()=>{this.#t.removeEventListener(e,n)}}}const GQ=new gFe;function bFe(){const t=Ot(Gge);A.useEffect(()=>{const e=n=>{if(!(document.activeElement&&mFe.includes(document.activeElement.tagName.toLowerCase())&&!n.altKey&&!n.metaKey&&!n.ctrlKey))for(const[r,i]of Object.entries(t)){const s=i.key.toLowerCase()===n.key.toLowerCase()||`Key${i.key.toUpperCase()}`===n.code,a=(i.ctrlOrMetaKey?rS&&n.metaKey||!rS&&n.ctrlKey:!0)&&(i.ctrlKey===void 0||i.ctrlKey===n.ctrlKey)&&(i.metaKey===void 0||i.metaKey===n.metaKey)&&(i.shiftKey===void 0||i.shiftKey===n.shiftKey)&&(i.altKey===void 0||i.altKey===n.altKey);if(s&&a){i.isPreventDefault&&(n.preventDefault(),n.stopPropagation()),GQ.dispatch(r),i.action();break}}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[t])}function yFe(t={}){const{duration:e=800,easing:n="ease-in-out",cubicBezier:r=[.42,0,.58,1],bottomThreshold:i=50}=t,s=A.useRef(!0),o=A.useRef(),a=A.useRef(),l=A.useRef(),c=A.useRef(),u=A.useRef(0),h=A.useCallback((g,b,y,v)=>{const x=g.scrollTop,w=b-x,S=performance.now(),E=v==="cubic-bezier"?r:[.42,0,.58,1],k=L=>{const[,R,,C]=E,P=3*R,O=3*(C-R)-P,N=1-P-O;return(Q=>((N*Q+O)*Q+P)*Q)(L)},_=L=>{const R=L-S,C=Math.min(R/y,1),P=k(C),O=x+w*P;s.current&&(g.scrollTop=O),C<1&&s.current&&(c.current=requestAnimationFrame(_))};c.current&&cancelAnimationFrame(c.current),c.current=requestAnimationFrame(_)},[r]),d=A.useCallback(g=>{const{scrollTop:b,scrollHeight:y,clientHeight:v}=g;return y-b-v<=i},[i]),f=A.useCallback(g=>{if(g){const b=new ResizeObserver(()=>{if(s.current&&o.current){const{scrollHeight:y,clientHeight:v}=o.current,x=y-v;h(o.current,x,e,n)}});b.observe(g),l.current=b}else l.current?.disconnect(),l.current=void 0,c.current&&(cancelAnimationFrame(c.current),c.current=void 0)},[e,n,h]),m=A.useCallback(g=>{g?(a.current=()=>{const{scrollTop:b}=g;b<u.current?s.current=!1:d(g)&&(s.current=!0),u.current=b},g.addEventListener("scroll",a.current),o.current=g):(a.current&&o.current&&o.current.removeEventListener("scroll",a.current),c.current&&(cancelAnimationFrame(c.current),c.current=void 0),o.current=void 0,a.current=void 0)},[d]);return[f,m]}function qQ({initialDescription:t=Nl.get(),customChatId:e,syncWithGlobalStore:n}){const r=Ot(Vo),[i,s]=A.useState(!1),[o,a]=A.useState(t),[l,c]=A.useState();A.useEffect(()=>{c(e||r)},[e,r]),A.useEffect(()=>{a(t)},[t]);const u=A.useCallback(()=>s(y=>!y),[]),h=A.useCallback(y=>{a(y.target.value)},[]),d=A.useCallback(async()=>{if(!wn||!l)return t;try{return(await tg(wn,l))?.description||t}catch(y){return console.error("Failed to fetch latest description:",y),t}},[wn,l,t]),f=A.useCallback(async()=>{const y=await d();a(y),u()},[d,u]),m=A.useCallback(y=>{const v=y.trim();if(v===t)return u(),!1;const x=v.length>0&&v.length<=100,w=/^[a-zA-Z0-9\s\-_.,!?()[\]{}'"]+$/.test(v);return x?w?!0:(He.error("Description can only contain letters, numbers, spaces, and basic punctuation."),!1):(He.error("Description must be between 1 and 100 characters."),!1)},[]),g=A.useCallback(async y=>{if(y.preventDefault(),!!m(o)){try{if(!wn){He.error("Chat persistence is not available");return}if(!l){He.error("Chat Id is not available");return}await Gve(wn,l,o),n&&Nl.set(o),He.success("Chat description updated successfully")}catch(v){He.error("Failed to update chat description: "+v.message)}u()}},[o,wn,l,t,e]),b=A.useCallback(async y=>{y.key==="Escape"&&await f()},[f]);return{editing:i,handleChange:h,handleBlur:f,handleSubmit:g,handleKeyDown:b,currentDescription:o,toggleEditMode:u}}const KQ=(t=1024)=>{const[e,n]=A.useState(window.innerWidth<t);return A.useEffect(()=>{const r=()=>n(window.innerWidth<t);return window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[t]),e};function vFe({item:t,onDelete:e,onDuplicate:n,exportChat:r}){const{id:i}=Tae(),s=i===t.urlId,{editing:o,handleChange:a,handleBlur:l,handleSubmit:c,handleKeyDown:u,currentDescription:h,toggleEditMode:d}=qQ({initialDescription:t.description,customChatId:t.id,syncWithGlobalStore:s});return p.jsx("div",{className:Ae("group rounded-lg text-sm text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50/80 dark:hover:bg-gray-800/30 overflow-hidden flex justify-between items-center px-3 py-2 transition-colors",{"text-gray-900 dark:text-white bg-gray-50/80 dark:bg-gray-800/30":s}),children:o?p.jsxs("form",{onSubmit:c,className:"flex-1 flex items-center gap-2",children:[p.jsx("input",{type:"text",className:"flex-1 bg-white dark:bg-gray-900 text-gray-900 dark:text-white rounded-md px-3 py-1.5 text-sm border border-gray-200 dark:border-gray-800 focus:outline-none focus:ring-1 focus:ring-blue-500/50",autoFocus:!0,value:h,onChange:a,onBlur:l,onKeyDown:u}),p.jsx("button",{type:"submit",className:"i-ph:check h-4 w-4 text-gray-500 hover:text-blue-500 transition-colors",onMouseDown:c})]}):p.jsxs("a",{href:`/chat/${t.urlId}`,className:"flex w-full relative truncate block",children:[p.jsx(yf,{tooltip:h,children:p.jsx("span",{className:"truncate pr-24",children:h})}),p.jsx("div",{className:Ae("absolute right-0 top-0 bottom-0 flex items-center bg-white dark:bg-gray-950 group-hover:bg-gray-50/80 dark:group-hover:bg-gray-800/30 px-2",{"bg-gray-50/80 dark:bg-gray-800/30":s}),children:p.jsxs("div",{className:"flex items-center gap-2.5 text-gray-400 dark:text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity",children:[(()=>{const f=localStorage.getItem("userData");let m="free";if(f)try{m=JSON.parse(f).plan?.toLowerCase()||"free"}catch(g){console.error("Error parsing user data:",g)}return m!=="free"?p.jsx(iw,{toolTipContent:"Export",icon:"i-ph:download-simple h-4 w-4",onClick:g=>{g.preventDefault(),r(t.id)}}):null})(),n&&p.jsx(iw,{toolTipContent:"Duplicate",icon:"i-ph:copy h-4 w-4",onClick:()=>n?.(t.id)}),p.jsx(iw,{toolTipContent:"Rename",icon:"i-ph:pencil-fill h-4 w-4",onClick:f=>{f.preventDefault(),d()}}),p.jsx(Pge,{asChild:!0,children:p.jsx(iw,{toolTipContent:"Delete",icon:"i-ph:trash h-4 w-4",className:"hover:text-red-500",onClick:f=>{f.preventDefault(),e?.(f)}})})]})})]})})}const iw=A.forwardRef(({toolTipContent:t,icon:e,className:n,onClick:r},i)=>p.jsx(yf,{tooltip:t,position:"bottom",sideOffset:4,children:p.jsx("button",{ref:i,type:"button",className:`text-gray-400 dark:text-gray-500 hover:text-blue-500 dark:hover:text-blue-400 transition-colors ${e} ${n||""}`,onClick:r})}));function xFe(t){const e=t.toSorted((i,s)=>Date.parse(s.timestamp)-Date.parse(i.timestamp)),n={},r=[];return e.forEach(i=>{const s=_Fe(new Date(i.timestamp));if(s in n)n[s].items.push(i);else{const o={category:s,items:[i]};n[s]=o,r.push(o)}}),r}function _Fe(t){if(Dve(t))return"Today";if(Mve(t))return"Yesterday";if(Ive(t))return jC(t,"EEE");const e=qq(new Date,30);return Nve(t,e)?"Past 30 Days":Ove(t)?jC(t,"LLL"):jC(t,"LLL yyyy")}function wFe({items:t=[],searchFields:e=["description"],debounceMs:n=300}){const[r,i]=A.useState(""),s=A.useCallback(pv(i,n),[]),o=A.useCallback(l=>{s(l.target.value)},[s]),a=A.useMemo(()=>{if(!r.trim())return t;const l=r.toLowerCase();return t.filter(c=>e.some(u=>{const h=c[u];return typeof h=="string"?h.toLowerCase().includes(l):!1}))},[t,r,e]);return{searchQuery:r,filteredItems:a,handleSearchChange:o}}function SFe(){const[t,e]=A.useState(null),[n,r]=A.useState(!0);return A.useEffect(()=>{(()=>{try{const a=localStorage.getItem("userData");if(a){const l=JSON.parse(a);console.log("User data from localStorage:",l),e(l)}}catch(a){console.error("Error checking authentication:",a)}finally{r(!1)}})()},[]),{user:t,loading:n,isAuthenticated:!!t,login:o=>{localStorage.setItem("userData",JSON.stringify(o)),e(o)},logout:()=>{localStorage.removeItem("userData"),e(null)}}}const EFe=({className:t="",onPopupOpen:e,onPopupClose:n})=>{const{user:r,isAuthenticated:i}=SFe(),[s,o]=A.useState(!1),a=r?.plan?.toLowerCase()||"free",l=a!=="pro"&&a!=="admin",c=g=>{switch(g){case"pro":return"Pro";case"starter":return"Starter";case"admin":return"Admin";case"free":default:return"Free"}},u=g=>{switch(g){case"pro":return"text-blue-500";case"starter":return"text-green-500";case"admin":return"text-purple-500";case"free":default:return"text-gray-400"}},h=c(a),d=u(a),f=()=>{o(!0),e&&e()},m=()=>{o(!1),n&&n()};return A.useEffect(()=>{s?e&&e():n&&n()},[s,e,n]),i?p.jsxs("div",{className:`flex items-center ${t}`,children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:crown-simple-fill h-4 w-4 text-yellow-500"}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:`text-sm font-medium leading-tight ${d}`,children:h}),l&&p.jsx("button",{onClick:f,className:"text-xs text-gray-400 hover:text-gray-300 text-left leading-tight border-none bg-transparent p-0","aria-label":"Upgrade plan",children:"Upgrade"})]})]}),p.jsx(rL,{isOpen:s,onClose:m})]}):null},kFe={closed:{opacity:0,visibility:"hidden",left:"-340px",transition:{duration:.2,ease:So}},open:{opacity:1,visibility:"initial",left:0,transition:{duration:.2,ease:So}}};function CFe(){const[t,e]=A.useState(new Date);return A.useEffect(()=>{const n=setInterval(()=>{e(new Date)},6e4);return()=>clearInterval(n)},[]),p.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-600 dark:text-gray-400 border-b border-gray-100 dark:border-gray-800/50",children:[p.jsx("div",{className:"h-4 w-4 i-lucide:clock opacity-80"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("span",{children:t.toLocaleDateString()}),p.jsx("span",{children:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})}const TFe=()=>{const{duplicateCurrentChat:t,exportChat:e}=TK(),n=A.useRef(null),[r,i]=A.useState([]),[s,o]=A.useState(!1),[a,l]=A.useState(null),[c,u]=A.useState(!1),[h,d]=A.useState(!1),f=Ot(nv),{filteredItems:m,handleSearchChange:g}=wFe({items:r,searchFields:["description"]}),b=A.useCallback(()=>{wn&&Kw(wn).then(k=>k.filter(_=>_.urlId&&_.description)).then(i).catch(k=>He.error(k.message))},[]),y=A.useCallback((k,_)=>{k.preventDefault(),wn&&J3(wn,_.id).then(()=>{b(),Vo.get()===_.id&&(window.location.pathname="/")}).catch(L=>{He.error("Failed to delete conversation"),Lae.error(L)})},[]),v=()=>{l(null)};A.useEffect(()=>{s&&b()},[s]),A.useEffect(()=>{function L(R){c||h||(R.pageX<40&&o(!0),n.current&&R.clientX>n.current.getBoundingClientRect().right+40&&o(!1))}return window.addEventListener("mousemove",L),()=>{window.removeEventListener("mousemove",L)}},[c,h]);const x=(k,_)=>{k.preventDefault(),l({type:"delete",item:_})},w=async k=>{await t(k),b()},S=()=>{u(!0),o(!1)},E=()=>{u(!1)};return p.jsxs(p.Fragment,{children:[p.jsxs(at.div,{ref:n,initial:"closed",animate:s||h?"open":"closed",variants:kFe,style:{width:"340px"},className:Ae("flex selection-accent flex-col side-menu fixed top-0 h-full","bg-white dark:bg-gray-950 border-r border-gray-100 dark:border-gray-800/50","shadow-sm text-sm",c?"z-40":"z-sidebar"),children:[p.jsxs("div",{className:"h-12 flex items-center justify-between px-4 border-b border-gray-100 dark:border-gray-800/50 bg-gray-50/50 dark:bg-gray-900/50",children:[p.jsx("div",{className:"text-gray-900 dark:text-white font-medium"}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"font-medium text-sm text-gray-900 dark:text-white truncate",children:f?.username||"Guest User"}),p.jsx("div",{className:"flex items-center justify-center w-[32px] h-[32px] overflow-hidden bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-500 rounded-full shrink-0",children:f?.avatar?p.jsx("img",{src:f.avatar,alt:f?.username||"User",className:"w-full h-full object-cover",loading:"eager",decoding:"sync"}):p.jsx("div",{className:"i-ph:user-fill text-lg"})})]})]}),p.jsx(CFe,{}),p.jsxs("div",{className:"flex-1 flex flex-col h-full w-full overflow-hidden",children:[p.jsxs("div",{className:"p-4 space-y-3",children:[p.jsxs("a",{href:"/",className:"flex gap-2 items-center bg-blue-50 dark:bg-blue-900/10 text-blue-600 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/20 rounded-lg px-4 py-2 transition-colors",children:[p.jsx("span",{className:"inline-block i-lucide:message-square h-4 w-4"}),p.jsx("span",{className:"text-sm font-medium",children:"Start new chat"})]}),p.jsxs("div",{className:"relative w-full",children:[p.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:p.jsx("span",{className:"i-lucide:search h-4 w-4 text-gray-400 dark:text-gray-500"})}),p.jsx("input",{className:"w-full bg-gray-50 dark:bg-gray-900 relative pl-9 pr-3 py-2 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500/50 text-sm text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-500 border border-gray-200 dark:border-gray-800",type:"search",placeholder:"Search chats...",onChange:g,"aria-label":"Search chats"})]})]}),p.jsx("div",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium px-4 py-2",children:"Your Chats"}),p.jsxs("div",{className:"flex-1 overflow-auto px-3 pb-3",children:[m.length===0&&p.jsx("div",{className:"px-4 text-gray-500 dark:text-gray-400 text-sm",children:r.length===0?"No previous conversations":"No matches found"}),p.jsxs(xo,{open:a!==null,children:[xFe(m).map(({category:k,items:_})=>p.jsxs("div",{className:"mt-2 first:mt-0 space-y-1",children:[p.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 sticky top-0 z-1 bg-white dark:bg-gray-950 px-4 py-1",children:k}),p.jsx("div",{className:"space-y-0.5 pr-1",children:_.map(L=>p.jsx(vFe,{item:L,exportChat:e,onDelete:R=>x(R,L),onDuplicate:()=>w(L.id)},L.id))})]},k)),p.jsx(df,{onBackdrop:v,onClose:v,children:a?.type==="delete"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"p-6 bg-white dark:bg-gray-950",children:[p.jsx(Zc,{className:"text-gray-900 dark:text-white",children:"Delete Chat?"}),p.jsxs(BW,{className:"mt-2 text-gray-600 dark:text-gray-400",children:[p.jsxs("p",{children:["You are about to delete"," ",p.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a.item.description})]}),p.jsx("p",{className:"mt-2",children:"Are you sure you want to delete this chat?"})]})]}),p.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 bg-gray-50 dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800",children:[p.jsx(Yd,{type:"secondary",onClick:v,children:"Cancel"}),p.jsx(Yd,{type:"danger",onClick:k=>{y(k,a.item),v()},children:"Delete"})]})]})})]})]}),p.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 dark:border-gray-800 px-4 py-3",children:[p.jsx(oFe,{onClick:S}),p.jsx("div",{className:"flex-1 flex justify-center",children:p.jsx(EFe,{onPopupOpen:()=>d(!0),onPopupClose:()=>d(!1)})}),p.jsx(Dge,{})]})]})]}),p.jsx(sFe,{open:c,onClose:E})]})},YQ=typeof document<"u"?ut.useLayoutEffect:()=>{};function AFe(t){const e=A.useRef(null);return YQ(()=>{e.current=t},[t]),A.useCallback((...n)=>{const r=e.current;return r?.(...n)},[])}const Nv=t=>{var e;return(e=t?.ownerDocument)!==null&&e!==void 0?e:document},Id=t=>t&&"window"in t&&t.window===t?t:Nv(t).defaultView||window;function PFe(t){var e;return typeof window>"u"||window.navigator==null?!1:((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands.some(n=>t.test(n.brand)))||t.test(window.navigator.userAgent)}function NFe(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function XQ(t){let e=null;return()=>(e==null&&(e=t()),e)}const LFe=XQ(function(){return NFe(/^Mac/i)}),RFe=XQ(function(){return PFe(/Android/i)});function IFe(t){return t.mozInputSource===0&&t.isTrusted?!0:RFe()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}class OFe{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(e,n){this.nativeEvent=n,this.target=n.target,this.currentTarget=n.currentTarget,this.relatedTarget=n.relatedTarget,this.bubbles=n.bubbles,this.cancelable=n.cancelable,this.defaultPrevented=n.defaultPrevented,this.eventPhase=n.eventPhase,this.isTrusted=n.isTrusted,this.timeStamp=n.timeStamp,this.type=e}}function ZQ(t){let e=A.useRef({isFocused:!1,observer:null});YQ(()=>{const r=e.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=AFe(r=>{t?.(r)});return A.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){e.current.isFocused=!0;let i=r.target,s=o=>{e.current.isFocused=!1,i.disabled&&n(new OFe("blur",o)),e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};i.addEventListener("focusout",s,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&i.disabled){var o;(o=e.current.observer)===null||o===void 0||o.disconnect();let a=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:a})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:a}))}}),e.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[n])}function DFe(t){let{isDisabled:e,onFocus:n,onBlur:r,onFocusChange:i}=t;const s=A.useCallback(l=>{if(l.target===l.currentTarget)return r&&r(l),i&&i(!1),!0},[r,i]),o=ZQ(s),a=A.useCallback(l=>{const c=Nv(l.target);l.target===l.currentTarget&&c.activeElement===l.target&&(n&&n(l),i&&i(!0),o(l))},[i,n,o]);return{focusProps:{onFocus:!e&&(n||i||r)?a:void 0,onBlur:!e&&(r||i)?s:void 0}}}let Lv=null,c4=new Set,y1=new Map,vf=!1,u4=!1;const MFe={Tab:!0,Escape:!0};function QI(t,e){for(let n of c4)n(t,e)}function jFe(t){return!(t.metaKey||!LFe()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function US(t){vf=!0,jFe(t)&&(Lv="keyboard",QI("keyboard",t))}function Ho(t){Lv="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(vf=!0,QI("pointer",t))}function JQ(t){IFe(t)&&(vf=!0,Lv="virtual")}function QQ(t){t.target===window||t.target===document||(!vf&&!u4&&(Lv="virtual",QI("virtual",t)),vf=!1,u4=!1)}function eee(){vf=!1,u4=!0}function h4(t){if(typeof window>"u"||y1.get(Id(t)))return;const e=Id(t),n=Nv(t);let r=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){vf=!0,r.apply(this,arguments)},n.addEventListener("keydown",US,!0),n.addEventListener("keyup",US,!0),n.addEventListener("click",JQ,!0),e.addEventListener("focus",QQ,!0),e.addEventListener("blur",eee,!1),typeof PointerEvent<"u"?(n.addEventListener("pointerdown",Ho,!0),n.addEventListener("pointermove",Ho,!0),n.addEventListener("pointerup",Ho,!0)):(n.addEventListener("mousedown",Ho,!0),n.addEventListener("mousemove",Ho,!0),n.addEventListener("mouseup",Ho,!0)),e.addEventListener("beforeunload",()=>{tee(t)},{once:!0}),y1.set(e,{focus:r})}const tee=(t,e)=>{const n=Id(t),r=Nv(t);e&&r.removeEventListener("DOMContentLoaded",e),y1.has(n)&&(n.HTMLElement.prototype.focus=y1.get(n).focus,r.removeEventListener("keydown",US,!0),r.removeEventListener("keyup",US,!0),r.removeEventListener("click",JQ,!0),n.removeEventListener("focus",QQ,!0),n.removeEventListener("blur",eee,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",Ho,!0),r.removeEventListener("pointermove",Ho,!0),r.removeEventListener("pointerup",Ho,!0)):(r.removeEventListener("mousedown",Ho,!0),r.removeEventListener("mousemove",Ho,!0),r.removeEventListener("mouseup",Ho,!0)),y1.delete(n))};function FFe(t){const e=Nv(t);let n;return e.readyState!=="loading"?h4(t):(n=()=>{h4(t)},e.addEventListener("DOMContentLoaded",n)),()=>tee(t,n)}typeof document<"u"&&FFe();function nee(){return Lv!=="pointer"}const BFe=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function UFe(t,e,n){var r;const i=typeof window<"u"?Id(n?.target).HTMLInputElement:HTMLInputElement,s=typeof window<"u"?Id(n?.target).HTMLTextAreaElement:HTMLTextAreaElement,o=typeof window<"u"?Id(n?.target).HTMLElement:HTMLElement,a=typeof window<"u"?Id(n?.target).KeyboardEvent:KeyboardEvent;return t=t||n?.target instanceof i&&!BFe.has(n==null||(r=n.target)===null||r===void 0?void 0:r.type)||n?.target instanceof s||n?.target instanceof o&&n?.target.isContentEditable,!(t&&e==="keyboard"&&n instanceof a&&!MFe[n.key])}function $Fe(t,e,n){h4(),A.useEffect(()=>{let r=(i,s)=>{UFe(!!n?.isTextInput,i,s)&&t(nee())};return c4.add(r),()=>{c4.delete(r)}},e)}function HFe(t){let{isDisabled:e,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=t,s=A.useRef({isFocusWithin:!1}),o=A.useCallback(c=>{s.current.isFocusWithin&&!c.currentTarget.contains(c.relatedTarget)&&(s.current.isFocusWithin=!1,n&&n(c),i&&i(!1))},[n,i,s]),a=ZQ(o),l=A.useCallback(c=>{!s.current.isFocusWithin&&document.activeElement===c.target&&(r&&r(c),i&&i(!0),s.current.isFocusWithin=!0,a(c))},[r,i,a]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:l,onBlur:o}}}let $S=!1,GT=0;function d4(){$S=!0,setTimeout(()=>{$S=!1},50)}function R7(t){t.pointerType==="touch"&&d4()}function zFe(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",R7):document.addEventListener("touchend",d4),GT++,()=>{GT--,!(GT>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",R7):document.removeEventListener("touchend",d4))}}function VFe(t){let{onHoverStart:e,onHoverChange:n,onHoverEnd:r,isDisabled:i}=t,[s,o]=A.useState(!1),a=A.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;A.useEffect(zFe,[]);let{hoverProps:l,triggerHoverEnd:c}=A.useMemo(()=>{let u=(f,m)=>{if(a.pointerType=m,i||m==="touch"||a.isHovered||!f.currentTarget.contains(f.target))return;a.isHovered=!0;let g=f.currentTarget;a.target=g,e&&e({type:"hoverstart",target:g,pointerType:m}),n&&n(!0),o(!0)},h=(f,m)=>{if(a.pointerType="",a.target=null,m==="touch"||!a.isHovered)return;a.isHovered=!1;let g=f.currentTarget;r&&r({type:"hoverend",target:g,pointerType:m}),n&&n(!1),o(!1)},d={};return typeof PointerEvent<"u"?(d.onPointerEnter=f=>{$S&&f.pointerType==="mouse"||u(f,f.pointerType)},d.onPointerLeave=f=>{!i&&f.currentTarget.contains(f.target)&&h(f,f.pointerType)}):(d.onTouchStart=()=>{a.ignoreEmulatedMouseEvents=!0},d.onMouseEnter=f=>{!a.ignoreEmulatedMouseEvents&&!$S&&u(f,"mouse"),a.ignoreEmulatedMouseEvents=!1},d.onMouseLeave=f=>{!i&&f.currentTarget.contains(f.target)&&h(f,"mouse")}),{hoverProps:d,triggerHoverEnd:h}},[e,n,r,i,a]);return A.useEffect(()=>{i&&c({currentTarget:a.target},a.pointerType)},[i]),{hoverProps:l,isHovered:s}}function WFe(t={}){let{autoFocus:e=!1,isTextInput:n,within:r}=t,i=A.useRef({isFocused:!1,isFocusVisible:e||nee()}),[s,o]=A.useState(!1),[a,l]=A.useState(()=>i.current.isFocused&&i.current.isFocusVisible),c=A.useCallback(()=>l(i.current.isFocused&&i.current.isFocusVisible),[]),u=A.useCallback(f=>{i.current.isFocused=f,o(f),c()},[c]);$Fe(f=>{i.current.isFocusVisible=f,c()},[],{isTextInput:n});let{focusProps:h}=DFe({isDisabled:r,onFocusChange:u}),{focusWithinProps:d}=HFe({isDisabled:!r,onFocusWithinChange:u});return{isFocused:s,isFocusVisible:a,focusProps:r?d:h}}var GFe=Object.defineProperty,qFe=(t,e,n)=>e in t?GFe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qT=(t,e,n)=>(qFe(t,typeof e!="symbol"?e+"":e,n),n);let KFe=class{constructor(){qT(this,"current",this.detect()),qT(this,"handoffState","pending"),qT(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},tf=new KFe;function Rv(t){return tf.isServer?null:t instanceof Node?t.ownerDocument:t!=null&&t.hasOwnProperty("current")&&t.current instanceof Node?t.current.ownerDocument:document}function ree(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function qf(){let t=[],e={addEventListener(n,r,i,s){return n.addEventListener(r,i,s),e.add(()=>n.removeEventListener(r,i,s))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return ree(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,i){let s=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:s})})},group(n){let r=qf();return n(r),this.add(()=>r.dispose())},add(n){return t.includes(n)||t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let i of t.splice(r,1))i()}},dispose(){for(let n of t.splice(0))n()}};return e}function Ok(){let[t]=A.useState(qf);return A.useEffect(()=>()=>t.dispose(),[t]),t}let wi=(t,e)=>{tf.isServer?A.useEffect(t,e):A.useLayoutEffect(t,e)};function tu(t){let e=A.useRef(t);return wi(()=>{e.current=t},[t]),e}let yn=function(t){let e=tu(t);return ut.useCallback((...n)=>e.current(...n),[e])};function YFe(t){let e=t.width/2,n=t.height/2;return{top:t.clientY-n,right:t.clientX+e,bottom:t.clientY+n,left:t.clientX-e}}function XFe(t,e){return!(!t||!e||t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)}function ZFe({disabled:t=!1}={}){let e=A.useRef(null),[n,r]=A.useState(!1),i=Ok(),s=yn(()=>{e.current=null,r(!1),i.dispose()}),o=yn(a=>{if(i.dispose(),e.current===null){e.current=a.currentTarget,r(!0);{let l=Rv(a.currentTarget);i.addEventListener(l,"pointerup",s,!1),i.addEventListener(l,"pointermove",c=>{if(e.current){let u=YFe(c);r(XFe(u,e.current.getBoundingClientRect()))}},!1),i.addEventListener(l,"pointercancel",s,!1)}}});return{pressed:n,pressProps:t?{}:{onPointerDown:o,onPointerUp:s,onClick:s}}}function f4(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function oa(t,e,...n){if(t in e){let i=e[t];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,oa),r}var dg=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(dg||{}),Qu=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Qu||{});function Ya(){let t=QFe();return A.useCallback(e=>JFe({mergeRefs:t,...e}),[t])}function JFe({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:i,visible:s=!0,name:o,mergeRefs:a}){a=a??eBe;let l=iee(e,t);if(s)return sw(l,n,r,o,a);let c=i??0;if(c&2){let{static:u=!1,...h}=l;if(u)return sw(h,n,r,o,a)}if(c&1){let{unmount:u=!0,...h}=l;return oa(u?0:1,{0(){return null},1(){return sw({...h,hidden:!0,style:{display:"none"}},n,r,o,a)}})}return sw(l,n,r,o,a)}function sw(t,e={},n,r,i){let{as:s=n,children:o,refName:a="ref",...l}=KT(t,["unmount","static"]),c=t.ref!==void 0?{[a]:t.ref}:{},u=typeof o=="function"?o(e):o;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(e)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let h={};if(e){let d=!1,f=[];for(let[m,g]of Object.entries(e))typeof g=="boolean"&&(d=!0),g===!0&&f.push(m.replace(/([A-Z])/g,b=>`-${b.toLowerCase()}`));if(d){h["data-headlessui-state"]=f.join(" ");for(let m of f)h[`data-${m}`]=""}}if(s===A.Fragment&&(Object.keys(gd(l)).length>0||Object.keys(gd(h)).length>0))if(!A.isValidElement(u)||Array.isArray(u)&&u.length>1){if(Object.keys(gd(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(gd(l)).concat(Object.keys(gd(h))).map(d=>`  - ${d}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(d=>`  - ${d}`).join(`
`)].join(`
`))}else{let d=u.props,f=d?.className,m=typeof f=="function"?(...y)=>f4(f(...y),l.className):f4(f,l.className),g=m?{className:m}:{},b=iee(u.props,gd(KT(l,["ref"])));for(let y in h)y in b&&delete h[y];return A.cloneElement(u,Object.assign({},b,h,c,{ref:i(tBe(u),c.ref)},g))}return A.createElement(s,Object.assign({},KT(l,["ref"]),s!==A.Fragment&&c,s!==A.Fragment&&h),u)}function QFe(){let t=A.useRef([]),e=A.useCallback(n=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return t.current=n,e}}function eBe(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function iee(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):e[i]=r[i];if(e.disabled||e["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var s;return(s=i?.preventDefault)==null?void 0:s.call(i)}]);for(let r in n)Object.assign(e,{[r](i,...s){let o=n[r];for(let a of o){if((i instanceof Event||i?.nativeEvent instanceof Event)&&i.defaultPrevented)return;a(i,...s)}}});return e}function p4(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):e[i]=r[i];for(let r in n)Object.assign(e,{[r](...i){let s=n[r];for(let o of s)o?.(...i)}});return e}function Eo(t){var e;return Object.assign(A.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function gd(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function KT(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function tBe(t){return ut.version.split(".")[0]>="19"?t.props.ref:t.ref}let nBe="span";var Ey=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(Ey||{});function rBe(t,e){var n;let{features:r=1,...i}=t,s={ref:e,"aria-hidden":(r&2)===2?!0:(n=i["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Ya()({ourProps:s,theirProps:i,slot:{},defaultTag:nBe,name:"Hidden"})}let HS=Eo(rBe);function see(t){let e=t.parentElement,n=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(n=e),e=e.parentElement;let r=e?.getAttribute("disabled")==="";return r&&iBe(n)?!1:r}function iBe(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}let oee=Symbol();function aee(t,e=!0){return Object.assign(t,{[oee]:e})}function $a(...t){let e=A.useRef(t);A.useEffect(()=>{e.current=t},[t]);let n=yn(r=>{for(let i of e.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return t.every(r=>r==null||r?.[oee])?void 0:n}var Hu=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(Hu||{});let sBe=A.createContext(()=>{});function oBe({value:t,children:e}){return ut.createElement(sBe.Provider,{value:t},e)}function aBe(t){if(t===null)return{width:0,height:0};let{width:e,height:n}=t.getBoundingClientRect();return{width:e,height:n}}function lBe(t,e=!1){let[n,r]=A.useReducer(()=>({}),{}),i=A.useMemo(()=>aBe(t),[t,n]);return wi(()=>{if(!t)return;let s=new ResizeObserver(r);return s.observe(t),()=>{s.disconnect()}},[t]),e?{width:`${i.width}px`,height:`${i.height}px`}:i}let cBe=class extends Map{constructor(e){super(),this.factory=e}get(e){let n=super.get(e);return n===void 0&&(n=this.factory(e),this.set(e,n)),n}};function lee(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...s){let o=e[i].call(n,...s);o&&(n=o,r.forEach(a=>a()))}}}function cee(t){return A.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}let uBe=new cBe(()=>lee(()=>[],{ADD(t){return this.includes(t)?this:[...this,t]},REMOVE(t){let e=this.indexOf(t);if(e===-1)return this;let n=this.slice();return n.splice(e,1),n}}));function uee(t,e){let n=uBe.get(e),r=A.useId(),i=cee(n);if(wi(()=>{if(t)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,t]),!t)return!1;let s=i.indexOf(r),o=i.length;return s===-1&&(s=o,o+=1),s===o-1}function hBe(t,e,n){let r=tu(i=>{let s=i.getBoundingClientRect();s.x===0&&s.y===0&&s.width===0&&s.height===0&&n()});A.useEffect(()=>{if(!t)return;let i=e===null?null:e instanceof HTMLElement?e:e.current;if(!i)return;let s=qf();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>r.current(i));o.observe(i),s.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>r.current(i));o.observe(i),s.add(()=>o.disconnect())}return()=>s.dispose()},[e,r,t])}let m4=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),dBe=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Uc=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(Uc||{}),zS=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(zS||{}),fBe=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(fBe||{});function Dk(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(m4)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function pBe(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(dBe)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var eO=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(eO||{});function hee(t,e=0){var n;return t===((n=Rv(t))==null?void 0:n.body)?!1:oa(e,{0(){return t.matches(m4)},1(){let r=t;for(;r!==null;){if(r.matches(m4))return!0;r=r.parentElement}return!1}})}var mBe=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(mBe||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let gBe=["textarea","input"].join(",");function bBe(t){var e,n;return(n=(e=t?.matches)==null?void 0:e.call(t,gBe))!=null?n:!1}function yBe(t,e=n=>n){return t.slice().sort((n,r)=>{let i=e(n),s=e(r);if(i===null||s===null)return 0;let o=i.compareDocumentPosition(s);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Od(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let s=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,o=Array.isArray(t)?n?yBe(t):t:e&64?pBe(t):Dk(t);i.length>0&&o.length>1&&(o=o.filter(f=>!i.some(m=>m!=null&&"current"in m?m?.current===f:m===f))),r=r??s.activeElement;let a=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,o.indexOf(r))-1;if(e&4)return Math.max(0,o.indexOf(r))+1;if(e&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=e&32?{preventScroll:!0}:{},u=0,h=o.length,d;do{if(u>=h||u+h<=0)return 0;let f=l+u;if(e&16)f=(f+h)%h;else{if(f<0)return 3;if(f>=h)return 1}d=o[f],d?.focus(c),u+=a}while(d!==s.activeElement);return e&6&&bBe(d)&&d.select(),2}function dee(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function vBe(){return/Android/gi.test(window.navigator.userAgent)}function xBe(){return dee()||vBe()}function ub(t,e,n,r){let i=tu(n);A.useEffect(()=>{if(!t)return;function s(o){i.current(o)}return document.addEventListener(e,s,r),()=>document.removeEventListener(e,s,r)},[t,e,r])}function fee(t,e,n,r){let i=tu(n);A.useEffect(()=>{if(!t)return;function s(o){i.current(o)}return window.addEventListener(e,s,r),()=>window.removeEventListener(e,s,r)},[t,e,r])}const I7=30;function _Be(t,e,n){let r=uee(t,"outside-click"),i=tu(n),s=A.useCallback(function(l,c){if(l.defaultPrevented)return;let u=c(l);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let h=function d(f){return typeof f=="function"?d(f()):Array.isArray(f)||f instanceof Set?f:[f]}(e);for(let d of h)if(d!==null&&(d.contains(u)||l.composed&&l.composedPath().includes(d)))return;return!hee(u,eO.Loose)&&u.tabIndex!==-1&&l.preventDefault(),i.current(l,u)},[i,e]),o=A.useRef(null);ub(r,"pointerdown",l=>{var c,u;o.current=((u=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:u[0])||l.target},!0),ub(r,"mousedown",l=>{var c,u;o.current=((u=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:u[0])||l.target},!0),ub(r,"click",l=>{xBe()||o.current&&(s(l,()=>o.current),o.current=null)},!0);let a=A.useRef({x:0,y:0});ub(r,"touchstart",l=>{a.current.x=l.touches[0].clientX,a.current.y=l.touches[0].clientY},!0),ub(r,"touchend",l=>{let c={x:l.changedTouches[0].clientX,y:l.changedTouches[0].clientY};if(!(Math.abs(c.x-a.current.x)>=I7||Math.abs(c.y-a.current.y)>=I7))return s(l,()=>l.target instanceof HTMLElement?l.target:null)},!0),fee(r,"blur",l=>s(l,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Xg(...t){return A.useMemo(()=>Rv(...t),[...t])}function wBe(t,e,n,r){let i=tu(n);A.useEffect(()=>{t=t??window;function s(o){i.current(o)}return t.addEventListener(e,s,r),()=>t.removeEventListener(e,s,r)},[t,e,r])}function SBe(t,e){return A.useMemo(()=>{var n;if(t.type)return t.type;let r=(n=t.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||e?.tagName==="BUTTON"&&!e.hasAttribute("type"))return"button"},[t.type,t.as,e])}function EBe(){let t;return{before({doc:e}){var n;let r=e.documentElement,i=(n=e.defaultView)!=null?n:window;t=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:e,d:n}){let r=e.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),s=Math.max(0,t-i);n.style(r,"paddingRight",`${s}px`)}}}function kBe(){return dee()?{before({doc:t,d:e,meta:n}){function r(i){return n.containers.flatMap(s=>s()).some(s=>s.contains(i))}e.microTask(()=>{var i;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let a=qf();a.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>a.dispose()))}let s=(i=window.scrollY)!=null?i:window.pageYOffset,o=null;e.addEventListener(t,"click",a=>{if(a.target instanceof HTMLElement)try{let l=a.target.closest("a");if(!l)return;let{hash:c}=new URL(l.href),u=t.querySelector(c);u&&!r(u)&&(o=u)}catch{}},!0),e.addEventListener(t,"touchstart",a=>{if(a.target instanceof HTMLElement)if(r(a.target)){let l=a.target;for(;l.parentElement&&r(l.parentElement);)l=l.parentElement;e.style(l,"overscrollBehavior","contain")}else e.style(a.target,"touchAction","none")}),e.addEventListener(t,"touchmove",a=>{if(a.target instanceof HTMLElement){if(a.target.tagName==="INPUT")return;if(r(a.target)){let l=a.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&a.preventDefault()}else a.preventDefault()}},{passive:!1}),e.add(()=>{var a;let l=(a=window.scrollY)!=null?a:window.pageYOffset;s!==l&&window.scrollTo(0,s),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function CBe(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function TBe(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let Dd=lee(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:qf(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:TBe(n)},i=[kBe(),EBe(),CBe()];i.forEach(({before:s})=>s?.(r)),i.forEach(({after:s})=>s?.(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});Dd.subscribe(()=>{let t=Dd.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&Dd.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Dd.dispatch("TEARDOWN",n)}});function ABe(t,e,n=()=>({containers:[]})){let r=cee(Dd),i=e?r.get(e):void 0,s=i?i.count>0:!1;return wi(()=>{if(!(!e||!t))return Dd.dispatch("PUSH",e,n),()=>Dd.dispatch("POP",e,n)},[t,e]),s}function PBe(t,e,n=()=>[document.body]){let r=uee(t,"scroll-lock");ABe(r,e,i=>{var s;return{containers:[...(s=i.containers)!=null?s:[],n]}})}function NBe(t=0){let[e,n]=A.useState(t),r=A.useCallback(l=>n(l),[e]),i=A.useCallback(l=>n(c=>c|l),[e]),s=A.useCallback(l=>(e&l)===l,[e]),o=A.useCallback(l=>n(c=>c&~l),[n]),a=A.useCallback(l=>n(c=>c^l),[n]);return{flags:e,setFlag:r,addFlag:i,hasFlag:s,removeFlag:o,toggleFlag:a}}var LBe={},O7,D7;typeof Qn<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((O7=Qn==null?void 0:LBe)==null?void 0:O7.NODE_ENV)==="test"&&typeof((D7=Element?.prototype)==null?void 0:D7.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var RBe=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(RBe||{});function tO(t){let e={};for(let n in t)t[n]===!0&&(e[`data-${n}`]="");return e}function nO(t,e,n,r){let[i,s]=A.useState(n),{hasFlag:o,addFlag:a,removeFlag:l}=NBe(t&&i?3:0),c=A.useRef(!1),u=A.useRef(!1),h=Ok();return wi(()=>{var d;if(t){if(n&&s(!0),!e){n&&a(3);return}return(d=r?.start)==null||d.call(r,n),IBe(e,{inFlight:c,prepare(){u.current?u.current=!1:u.current=c.current,c.current=!0,!u.current&&(n?(a(3),l(4)):(a(4),l(2)))},run(){u.current?n?(l(3),a(4)):(l(4),a(3)):n?l(1):a(1)},done(){var f;u.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(c.current=!1,l(7),n||s(!1),(f=r?.end)==null||f.call(r,n))}})}},[t,n,e,h]),t?[i,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function IBe(t,{prepare:e,run:n,done:r,inFlight:i}){let s=qf();return DBe(t,{prepare:e,inFlight:i}),s.nextFrame(()=>{n(),s.requestAnimationFrame(()=>{s.add(OBe(t,r))})}),s.dispose}function OBe(t,e){var n,r;let i=qf();if(!t)return i.dispose;let s=!1;i.add(()=>{s=!0});let o=(r=(n=t.getAnimations)==null?void 0:n.call(t).filter(a=>a instanceof CSSTransition))!=null?r:[];return o.length===0?(e(),i.dispose):(Promise.allSettled(o.map(a=>a.finished)).then(()=>{s||e()}),i.dispose)}function DBe(t,{inFlight:e,prepare:n}){if(e!=null&&e.current){n();return}let r=t.style.transition;t.style.transition="none",n(),t.offsetHeight,t.style.transition=r}function MBe(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}const pee={...zm},jBe=pee.useInsertionEffect,FBe=jBe||(t=>t());function mee(t){const e=A.useRef(()=>{});return FBe(()=>{e.current=t}),A.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}var g4=typeof document<"u"?A.useLayoutEffect:A.useEffect;let M7=!1,BBe=0;const j7=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+BBe++;function UBe(){const[t,e]=A.useState(()=>M7?j7():void 0);return g4(()=>{t==null&&e(j7())},[]),A.useEffect(()=>{M7=!0},[]),t}const $Be=pee.useId,HBe=$Be||UBe;function zBe(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(i=>i!==n))||[])}}}const VBe=A.createContext(null),WBe=A.createContext(null),GBe=()=>{var t;return((t=A.useContext(VBe))==null?void 0:t.id)||null},qBe=()=>A.useContext(WBe),KBe="data-floating-ui-focusable";function YBe(t){const{open:e=!1,onOpenChange:n,elements:r}=t,i=HBe(),s=A.useRef({}),[o]=A.useState(()=>zBe()),a=GBe()!=null,[l,c]=A.useState(r.reference),u=mee((f,m,g)=>{s.current.openEvent=f?m:void 0,o.emit("openchange",{open:f,event:m,reason:g,nested:a}),n?.(f,m,g)}),h=A.useMemo(()=>({setPositionReference:c}),[]),d=A.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return A.useMemo(()=>({dataRef:s,open:e,onOpenChange:u,elements:d,events:o,floatingId:i,refs:h}),[e,u,d,o,i,h])}function XBe(t){t===void 0&&(t={});const{nodeId:e}=t,n=YBe({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,i=r.elements,[s,o]=A.useState(null),[a,l]=A.useState(null),u=i?.domReference||s,h=A.useRef(null),d=qBe();g4(()=>{u&&(h.current=u)},[u]);const f=gG({...t,elements:{...i,...a&&{reference:a}}}),m=A.useCallback(x=>{const w=gs(x)?{getBoundingClientRect:()=>x.getBoundingClientRect(),contextElement:x}:x;l(w),f.refs.setReference(w)},[f.refs]),g=A.useCallback(x=>{(gs(x)||x===null)&&(h.current=x,o(x)),(gs(f.refs.reference.current)||f.refs.reference.current===null||x!==null&&!gs(x))&&f.refs.setReference(x)},[f.refs]),b=A.useMemo(()=>({...f.refs,setReference:g,setPositionReference:m,domReference:h}),[f.refs,g,m]),y=A.useMemo(()=>({...f.elements,domReference:u}),[f.elements,u]),v=A.useMemo(()=>({...f,...r,refs:b,elements:y,nodeId:e}),[f,b,y,e,r]);return g4(()=>{r.dataRef.current.floatingContext=v;const x=d?.nodesRef.current.find(w=>w.id===e);x&&(x.context=v)}),A.useMemo(()=>({...f,context:v,refs:b,elements:y}),[f,b,y,v])}const F7="active",B7="selected";function YT(t,e,n){const r=new Map,i=n==="item";let s=t;if(i&&t){const{[F7]:o,[B7]:a,...l}=t;s=l}return{...n==="floating"&&{tabIndex:-1,[KBe]:""},...s,...e.map(o=>{const a=o?o[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((o,a)=>(a&&Object.entries(a).forEach(l=>{let[c,u]=l;if(!(i&&[F7,B7].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof u=="function"){var h;(h=r.get(c))==null||h.push(u),o[c]=function(){for(var d,f=arguments.length,m=new Array(f),g=0;g<f;g++)m[g]=arguments[g];return(d=r.get(c))==null?void 0:d.map(b=>b(...m)).find(b=>b!==void 0)}}}else o[c]=u}),o),{})}}function ZBe(t){t===void 0&&(t=[]);const e=t.map(a=>a?.reference),n=t.map(a=>a?.floating),r=t.map(a=>a?.item),i=A.useCallback(a=>YT(a,t,"reference"),e),s=A.useCallback(a=>YT(a,t,"floating"),n),o=A.useCallback(a=>YT(a,t,"item"),r);return A.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}function U7(t,e){return{...t,rects:{...t.rects,floating:{...t.rects.floating,height:e}}}}const JBe=t=>({name:"inner",options:t,async fn(e){const{listRef:n,overflowRef:r,onFallbackChange:i,offset:s=0,index:o=0,minItemsVisible:a=4,referenceOverflowThreshold:l=0,scrollRef:c,...u}=ec(t,e),{rects:h,elements:{floating:d}}=e,f=n.current[o],m=c?.current||d,g=d.clientTop||m.clientTop,b=d.clientTop!==0,y=m.clientTop!==0,v=d===m;if(!f)return{};const x={...e,...await tR(-f.offsetTop-d.clientTop-h.reference.height/2-f.offsetHeight/2-s).fn(e)},w=await RC(U7(x,m.scrollHeight+g+d.clientTop),u),S=await RC(x,{...u,elementContext:"reference"}),E=Xi(0,w.top),k=x.y+E,R=(m.scrollHeight>m.clientHeight?C=>C:ty)(Xi(0,m.scrollHeight+(b&&v||y?g*2:0)-E-Xi(0,w.bottom)));if(m.style.maxHeight=R+"px",m.scrollTop=E,i){const C=m.offsetHeight<f.offsetHeight*Jc(a,n.current.length)-1||S.top>=-l||S.bottom>=-l;Vm.flushSync(()=>i(C))}return r&&(r.current=await RC(U7({...x,y:k},m.offsetHeight+g+d.clientTop),u)),{y:k}}});function QBe(t,e){const{open:n,elements:r}=t,{enabled:i=!0,overflowRef:s,scrollRef:o,onChange:a}=e,l=mee(a),c=A.useRef(!1),u=A.useRef(null),h=A.useRef(null);A.useEffect(()=>{if(!i)return;function f(g){if(g.ctrlKey||!m||s.current==null)return;const b=g.deltaY,y=s.current.top>=-.5,v=s.current.bottom>=-.5,x=m.scrollHeight-m.clientHeight,w=b<0?-1:1,S=b<0?"max":"min";m.scrollHeight<=m.clientHeight||(!y&&b>0||!v&&b<0?(g.preventDefault(),Vm.flushSync(()=>{l(E=>E+Math[S](b,x*w))})):/firefox/i.test(MBe())&&(m.scrollTop+=b))}const m=o?.current||r.floating;if(n&&m)return m.addEventListener("wheel",f),requestAnimationFrame(()=>{u.current=m.scrollTop,s.current!=null&&(h.current={...s.current})}),()=>{u.current=null,h.current=null,m.removeEventListener("wheel",f)}},[i,n,r.floating,s,o,l]);const d=A.useMemo(()=>({onKeyDown(){c.current=!0},onWheel(){c.current=!1},onPointerMove(){c.current=!1},onScroll(){const f=o?.current||r.floating;if(!(!s.current||!f||!c.current)){if(u.current!==null){const m=f.scrollTop-u.current;(s.current.bottom<-.5&&m<-1||s.current.top<-.5&&m>1)&&Vm.flushSync(()=>l(g=>g+m))}requestAnimationFrame(()=>{u.current=f.scrollTop})}}}),[r.floating,l,s,o]);return A.useMemo(()=>i?{floating:d}:{},[i,d])}let Iv=A.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});Iv.displayName="FloatingContext";let rO=A.createContext(null);rO.displayName="PlacementContext";function e7e(t){return A.useMemo(()=>t?typeof t=="string"?{to:t}:t:null,[t])}function t7e(){return A.useContext(Iv).setReference}function n7e(){let{getFloatingProps:t,slot:e}=A.useContext(Iv);return A.useCallback((...n)=>Object.assign({},t(...n),{"data-anchor":e.anchor}),[t,e])}function r7e(t=null){t===!1&&(t=null),typeof t=="string"&&(t={to:t});let e=A.useContext(rO),n=A.useMemo(()=>t,[JSON.stringify(t,(i,s)=>{var o;return(o=s?.outerHTML)!=null?o:s})]);wi(()=>{e?.(n??null)},[e,n]);let r=A.useContext(Iv);return A.useMemo(()=>[r.setFloating,t?r.styles:{}],[r.setFloating,t,r.styles])}let $7=4;function i7e({children:t,enabled:e=!0}){let[n,r]=A.useState(null),[i,s]=A.useState(0),o=A.useRef(null),[a,l]=A.useState(null);s7e(a);let c=e&&n!==null&&a!==null,{to:u="bottom",gap:h=0,offset:d=0,padding:f=0,inner:m}=o7e(n,a),[g,b="center"]=u.split(" ");wi(()=>{c&&s(0)},[c]);let{refs:y,floatingStyles:v,context:x}=XBe({open:c,placement:g==="selection"?b==="center"?"bottom":`bottom-${b}`:b==="center"?`${g}`:`${g}-${b}`,strategy:"absolute",transform:!1,middleware:[tR({mainAxis:g==="selection"?0:h,crossAxis:d}),bG({padding:f}),g!=="selection"&&yG({padding:f}),g==="selection"&&m?JBe({...m,padding:f,overflowRef:o,offset:i,minItemsVisible:$7,referenceOverflowThreshold:f,onFallbackChange(C){var P,O;if(!C)return;let N=x.elements.floating;if(!N)return;let H=parseFloat(getComputedStyle(N).scrollPaddingBottom)||0,Q=Math.min($7,N.childElementCount),X=0,J=0;for(let j of(O=(P=x.elements.floating)==null?void 0:P.childNodes)!=null?O:[])if(j instanceof HTMLElement){let F=j.offsetTop,Y=F+j.clientHeight+H,M=N.scrollTop,D=M+N.clientHeight;if(F>=M&&Y<=D)Q--;else{J=Math.max(0,Math.min(Y,D)-Math.max(F,M)),X=j.clientHeight;break}}Q>=1&&s(j=>{let F=X*Q-J+H;return j>=F?j:F})}}):null,vG({padding:f,apply({availableWidth:C,availableHeight:P,elements:O}){Object.assign(O.floating.style,{overflow:"auto",maxWidth:`${C}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${P}px)`})}})].filter(Boolean),whileElementsMounted:pG}),[w=g,S=b]=x.placement.split("-");g==="selection"&&(w="selection");let E=A.useMemo(()=>({anchor:[w,S].filter(Boolean).join(" ")}),[w,S]),k=QBe(x,{overflowRef:o,onChange:s}),{getReferenceProps:_,getFloatingProps:L}=ZBe([k]),R=yn(C=>{l(C),y.setFloating(C)});return A.createElement(rO.Provider,{value:r},A.createElement(Iv.Provider,{value:{setFloating:R,setReference:y.setReference,styles:v,getReferenceProps:_,getFloatingProps:L,slot:E}},t))}function s7e(t){wi(()=>{if(!t)return;let e=new MutationObserver(()=>{let n=window.getComputedStyle(t).maxHeight,r=parseFloat(n);if(isNaN(r))return;let i=parseInt(n);isNaN(i)||r!==i&&(t.style.maxHeight=`${Math.ceil(r)}px`)});return e.observe(t,{attributes:!0,attributeFilter:["style"]}),()=>{e.disconnect()}},[t])}function o7e(t,e){var n,r,i;let s=XT((n=t?.gap)!=null?n:"var(--anchor-gap, 0)",e),o=XT((r=t?.offset)!=null?r:"var(--anchor-offset, 0)",e),a=XT((i=t?.padding)!=null?i:"var(--anchor-padding, 0)",e);return{...t,gap:s,offset:o,padding:a}}function XT(t,e,n=void 0){let r=Ok(),i=yn((l,c)=>{if(l==null)return[n,null];if(typeof l=="number")return[l,null];if(typeof l=="string"){if(!c)return[n,null];let u=H7(l,c);return[u,h=>{let d=gee(l);{let f=d.map(m=>window.getComputedStyle(c).getPropertyValue(m));r.requestAnimationFrame(function m(){r.nextFrame(m);let g=!1;for(let[y,v]of d.entries()){let x=window.getComputedStyle(c).getPropertyValue(v);if(f[y]!==x){f[y]=x,g=!0;break}}if(!g)return;let b=H7(l,c);u!==b&&(h(b),u=b)})}return r.dispose}]}return[n,null]}),s=A.useMemo(()=>i(t,e)[0],[t,e]),[o=s,a]=A.useState();return wi(()=>{let[l,c]=i(t,e);if(a(l),!!c)return c(a)},[t,e]),o}function gee(t){let e=/var\((.*)\)/.exec(t);if(e){let n=e[1].indexOf(",");if(n===-1)return[e[1]];let r=e[1].slice(0,n).trim(),i=e[1].slice(n+1).trim();return i?[r,...gee(i)]:[r]}return[]}function H7(t,e){let n=document.createElement("div");e.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",t,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return e.removeChild(n),r}let Mk=A.createContext(null);Mk.displayName="OpenClosedContext";var po=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(po||{});function jk(){return A.useContext(Mk)}function bee({value:t,children:e}){return ut.createElement(Mk.Provider,{value:t},e)}function a7e({children:t}){return ut.createElement(Mk.Provider,{value:null},t)}function l7e(t){let e=yn(t),n=A.useRef(!1);A.useEffect(()=>(n.current=!1,()=>{n.current=!0,ree(()=>{n.current&&e()})}),[e])}function c7e(){let t=typeof document>"u";return"useSyncExternalStore"in zm?(e=>e.useSyncExternalStore)(zm)(()=>()=>{},()=>!1,()=>!t):!1}function iO(){let t=c7e(),[e,n]=A.useState(tf.isHandoffComplete);return e&&tf.isHandoffComplete===!1&&n(!1),A.useEffect(()=>{e!==!0&&n(!0)},[e]),A.useEffect(()=>tf.handoff(),[]),t?!1:e}let u7e=A.createContext(!1);function h7e(){return A.useContext(u7e)}function d7e(t){let e=h7e(),n=A.useContext(vee),r=Xg(t),[i,s]=A.useState(()=>{var o;if(!e&&n!==null)return(o=n.current)!=null?o:null;if(tf.isServer)return null;let a=r?.getElementById("headlessui-portal-root");if(a)return a;if(r===null)return null;let l=r.createElement("div");return l.setAttribute("id","headlessui-portal-root"),r.body.appendChild(l)});return A.useEffect(()=>{i!==null&&(r!=null&&r.body.contains(i)||r==null||r.body.appendChild(i))},[i,r]),A.useEffect(()=>{e||n!==null&&s(n.current)},[n,s,e]),i}let yee=A.Fragment,f7e=Eo(function(t,e){let n=t,r=A.useRef(null),i=$a(aee(h=>{r.current=h}),e),s=Xg(r),o=d7e(r),[a]=A.useState(()=>{var h;return tf.isServer?null:(h=s?.createElement("div"))!=null?h:null}),l=A.useContext(b4),c=iO();wi(()=>{!o||!a||o.contains(a)||(a.setAttribute("data-headlessui-portal",""),o.appendChild(a))},[o,a]),wi(()=>{if(a&&l)return l.register(a)},[l,a]),l7e(()=>{var h;!o||!a||(a instanceof Node&&o.contains(a)&&o.removeChild(a),o.childNodes.length<=0&&((h=o.parentElement)==null||h.removeChild(o)))});let u=Ya();return c?!o||!a?null:Vm.createPortal(u({ourProps:{ref:i},theirProps:n,slot:{},defaultTag:yee,name:"Portal"}),a):null});function p7e(t,e){let n=$a(e),{enabled:r=!0,...i}=t,s=Ya();return r?ut.createElement(f7e,{...i,ref:n}):s({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:yee,name:"Portal"})}let m7e=A.Fragment,vee=A.createContext(null);function g7e(t,e){let{target:n,...r}=t,i={ref:$a(e)},s=Ya();return ut.createElement(vee.Provider,{value:n},s({ourProps:i,theirProps:r,defaultTag:m7e,name:"Popover.Group"}))}let b4=A.createContext(null);function b7e(){let t=A.useContext(b4),e=A.useRef([]),n=yn(s=>(e.current.push(s),t&&t.register(s),()=>r(s))),r=yn(s=>{let o=e.current.indexOf(s);o!==-1&&e.current.splice(o,1),t&&t.unregister(s)}),i=A.useMemo(()=>({register:n,unregister:r,portals:e}),[n,r,e]);return[e,A.useMemo(()=>function({children:s}){return ut.createElement(b4.Provider,{value:i},s)},[i])]}let y7e=Eo(p7e),v7e=Eo(g7e),x7e=Object.assign(y7e,{Group:v7e});function _7e({defaultContainers:t=[],portals:e,mainTreeNode:n}={}){let r=Xg(n),i=yn(()=>{var s,o;let a=[];for(let l of t)l!==null&&(l instanceof HTMLElement?a.push(l):"current"in l&&l.current instanceof HTMLElement&&a.push(l.current));if(e!=null&&e.current)for(let l of e.current)a.push(l);for(let l of(s=r?.querySelectorAll("html > *, body > *"))!=null?s:[])l!==document.body&&l!==document.head&&l instanceof HTMLElement&&l.id!=="headlessui-portal-root"&&(n&&(l.contains(n)||l.contains((o=n?.getRootNode())==null?void 0:o.host))||a.some(c=>l.contains(c))||a.push(l));return a});return{resolveContainers:i,contains:yn(s=>i().some(o=>o.contains(s)))}}let xee=A.createContext(null);function _ee({children:t,node:e}){let[n,r]=A.useState(null),i=wee(e??n);return ut.createElement(xee.Provider,{value:i},t,i===null&&ut.createElement(HS,{features:Ey.Hidden,ref:s=>{var o,a;if(s){for(let l of(a=(o=Rv(s))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?a:[])if(l!==document.body&&l!==document.head&&l instanceof HTMLElement&&l!=null&&l.contains(s)){r(l);break}}}}))}function wee(t=null){var e;return(e=A.useContext(xee))!=null?e:t}function w7e(){let t=A.useRef(!1);return wi(()=>(t.current=!0,()=>{t.current=!1}),[]),t}var $c=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))($c||{});function See(){let t=A.useRef(0);return fee(!0,"keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function Eee(t){var e;return!!(t.enter||t.enterFrom||t.enterTo||t.leave||t.leaveFrom||t.leaveTo)||((e=t.as)!=null?e:Cee)!==A.Fragment||ut.Children.count(t.children)===1}let Fk=A.createContext(null);Fk.displayName="TransitionContext";var S7e=(t=>(t.Visible="visible",t.Hidden="hidden",t))(S7e||{});function E7e(){let t=A.useContext(Fk);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function k7e(){let t=A.useContext(Bk);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let Bk=A.createContext(null);Bk.displayName="NestingContext";function Uk(t){return"children"in t?Uk(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function kee(t,e){let n=tu(t),r=A.useRef([]),i=w7e(),s=Ok(),o=yn((f,m=Qu.Hidden)=>{let g=r.current.findIndex(({el:b})=>b===f);g!==-1&&(oa(m,{[Qu.Unmount](){r.current.splice(g,1)},[Qu.Hidden](){r.current[g].state="hidden"}}),s.microTask(()=>{var b;!Uk(r)&&i.current&&((b=n.current)==null||b.call(n))}))}),a=yn(f=>{let m=r.current.find(({el:g})=>g===f);return m?m.state!=="visible"&&(m.state="visible"):r.current.push({el:f,state:"visible"}),()=>o(f,Qu.Unmount)}),l=A.useRef([]),c=A.useRef(Promise.resolve()),u=A.useRef({enter:[],leave:[]}),h=yn((f,m,g)=>{l.current.splice(0),e&&(e.chains.current[m]=e.chains.current[m].filter(([b])=>b!==f)),e?.chains.current[m].push([f,new Promise(b=>{l.current.push(b)})]),e?.chains.current[m].push([f,new Promise(b=>{Promise.all(u.current[m].map(([y,v])=>v)).then(()=>b())})]),m==="enter"?c.current=c.current.then(()=>e?.wait.current).then(()=>g(m)):g(m)}),d=yn((f,m,g)=>{Promise.all(u.current[m].splice(0).map(([b,y])=>y)).then(()=>{var b;(b=l.current.shift())==null||b()}).then(()=>g(m))});return A.useMemo(()=>({children:r,register:a,unregister:o,onStart:h,onStop:d,wait:c,chains:u}),[a,o,r,h,d,u,c])}let Cee=A.Fragment,Tee=dg.RenderStrategy;function C7e(t,e){var n,r;let{transition:i=!0,beforeEnter:s,afterEnter:o,beforeLeave:a,afterLeave:l,enter:c,enterFrom:u,enterTo:h,entered:d,leave:f,leaveFrom:m,leaveTo:g,...b}=t,[y,v]=A.useState(null),x=A.useRef(null),w=Eee(t),S=$a(...w?[x,e,v]:e===null?[]:[e]),E=(n=b.unmount)==null||n?Qu.Unmount:Qu.Hidden,{show:k,appear:_,initial:L}=E7e(),[R,C]=A.useState(k?"visible":"hidden"),P=k7e(),{register:O,unregister:N}=P;wi(()=>O(x),[O,x]),wi(()=>{if(E===Qu.Hidden&&x.current){if(k&&R!=="visible"){C("visible");return}return oa(R,{hidden:()=>N(x),visible:()=>O(x)})}},[R,x,O,N,k,E]);let H=iO();wi(()=>{if(w&&H&&R==="visible"&&x.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[x,R,H,w]);let Q=L&&!_,X=_&&k&&L,J=A.useRef(!1),j=kee(()=>{J.current||(C("hidden"),N(x))},P),F=yn(ee=>{J.current=!0;let K=ee?"enter":"leave";j.onStart(x,K,he=>{he==="enter"?s?.():he==="leave"&&a?.()})}),Y=yn(ee=>{let K=ee?"enter":"leave";J.current=!1,j.onStop(x,K,he=>{he==="enter"?o?.():he==="leave"&&l?.()}),K==="leave"&&!Uk(j)&&(C("hidden"),N(x))});A.useEffect(()=>{w&&i||(F(k),Y(k))},[k,w,i]);let M=!(!i||!w||!H||Q),[,D]=nO(M,y,k,{start:F,end:Y}),V=gd({ref:S,className:((r=f4(b.className,X&&c,X&&u,D.enter&&c,D.enter&&D.closed&&u,D.enter&&!D.closed&&h,D.leave&&f,D.leave&&!D.closed&&m,D.leave&&D.closed&&g,!D.transition&&k&&d))==null?void 0:r.trim())||void 0,...tO(D)}),W=0;R==="visible"&&(W|=po.Open),R==="hidden"&&(W|=po.Closed),D.enter&&(W|=po.Opening),D.leave&&(W|=po.Closing);let te=Ya();return ut.createElement(Bk.Provider,{value:j},ut.createElement(bee,{value:W},te({ourProps:V,theirProps:b,defaultTag:Cee,features:Tee,visible:R==="visible",name:"Transition.Child"})))}function T7e(t,e){let{show:n,appear:r=!1,unmount:i=!0,...s}=t,o=A.useRef(null),a=Eee(t),l=$a(...a?[o,e]:e===null?[]:[e]);iO();let c=jk();if(n===void 0&&c!==null&&(n=(c&po.Open)===po.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,h]=A.useState(n?"visible":"hidden"),d=kee(()=>{n||h("hidden")}),[f,m]=A.useState(!0),g=A.useRef([n]);wi(()=>{f!==!1&&g.current[g.current.length-1]!==n&&(g.current.push(n),m(!1))},[g,n]);let b=A.useMemo(()=>({show:n,appear:r,initial:f}),[n,r,f]);wi(()=>{n?h("visible"):!Uk(d)&&o.current!==null&&h("hidden")},[n,d]);let y={unmount:i},v=yn(()=>{var S;f&&m(!1),(S=t.beforeEnter)==null||S.call(t)}),x=yn(()=>{var S;f&&m(!1),(S=t.beforeLeave)==null||S.call(t)}),w=Ya();return ut.createElement(Bk.Provider,{value:d},ut.createElement(Fk.Provider,{value:b},w({ourProps:{...y,as:A.Fragment,children:ut.createElement(Aee,{ref:l,...y,...s,beforeEnter:v,beforeLeave:x})},theirProps:{},defaultTag:A.Fragment,features:Tee,visible:u==="visible",name:"Transition"})))}function A7e(t,e){let n=A.useContext(Fk)!==null,r=jk()!==null;return ut.createElement(ut.Fragment,null,!n&&r?ut.createElement(y4,{ref:e,...t}):ut.createElement(Aee,{ref:e,...t}))}let y4=Eo(T7e),Aee=Eo(C7e),P7e=Eo(A7e),N7e=Object.assign(y4,{Child:P7e,Root:y4});var L7e=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(L7e||{}),R7e=(t=>(t[t.TogglePopover=0]="TogglePopover",t[t.ClosePopover=1]="ClosePopover",t[t.SetButton=2]="SetButton",t[t.SetButtonId=3]="SetButtonId",t[t.SetPanel=4]="SetPanel",t[t.SetPanelId=5]="SetPanelId",t))(R7e||{});let I7e={0:t=>({...t,popoverState:oa(t.popoverState,{0:1,1:0}),__demoMode:!1}),1(t){return t.popoverState===1?t:{...t,popoverState:1,__demoMode:!1}},2(t,e){return t.button===e.button?t:{...t,button:e.button}},3(t,e){return t.buttonId===e.buttonId?t:{...t,buttonId:e.buttonId}},4(t,e){return t.panel===e.panel?t:{...t,panel:e.panel}},5(t,e){return t.panelId===e.panelId?t:{...t,panelId:e.panelId}}},sO=A.createContext(null);sO.displayName="PopoverContext";function $k(t){let e=A.useContext(sO);if(e===null){let n=new Error(`<${t} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,$k),n}return e}let Hk=A.createContext(null);Hk.displayName="PopoverAPIContext";function oO(t){let e=A.useContext(Hk);if(e===null){let n=new Error(`<${t} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,oO),n}return e}let aO=A.createContext(null);aO.displayName="PopoverGroupContext";function Pee(){return A.useContext(aO)}let zk=A.createContext(null);zk.displayName="PopoverPanelContext";function O7e(){return A.useContext(zk)}function D7e(t,e){return oa(e.type,I7e,t,e)}let M7e="div";function j7e(t,e){var n;let{__demoMode:r=!1,...i}=t,s=A.useRef(null),o=$a(e,aee(j=>{s.current=j})),a=A.useRef([]),l=A.useReducer(D7e,{__demoMode:r,popoverState:r?0:1,buttons:a,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:A.createRef(),afterPanelSentinel:A.createRef(),afterButtonSentinel:A.createRef()}),[{popoverState:c,button:u,buttonId:h,panel:d,panelId:f,beforePanelSentinel:m,afterPanelSentinel:g,afterButtonSentinel:b},y]=l,v=Xg((n=s.current)!=null?n:u),x=A.useMemo(()=>{if(!u||!d)return!1;for(let W of document.querySelectorAll("body > *"))if(Number(W?.contains(u))^Number(W?.contains(d)))return!0;let j=Dk(),F=j.indexOf(u),Y=(F+j.length-1)%j.length,M=(F+1)%j.length,D=j[Y],V=j[M];return!d.contains(D)&&!d.contains(V)},[u,d]),w=tu(h),S=tu(f),E=A.useMemo(()=>({buttonId:w,panelId:S,close:()=>y({type:1})}),[w,S,y]),k=Pee(),_=k?.registerPopover,L=yn(()=>{var j;return(j=k?.isFocusWithinPopoverGroup())!=null?j:v?.activeElement&&(u?.contains(v.activeElement)||d?.contains(v.activeElement))});A.useEffect(()=>_?.(E),[_,E]);let[R,C]=b7e(),P=wee(u),O=_7e({mainTreeNode:P,portals:R,defaultContainers:[u,d]});wBe(v?.defaultView,"focus",j=>{var F,Y,M,D,V,W;j.target!==window&&j.target instanceof HTMLElement&&c===0&&(L()||u&&d&&(O.contains(j.target)||(Y=(F=m.current)==null?void 0:F.contains)!=null&&Y.call(F,j.target)||(D=(M=g.current)==null?void 0:M.contains)!=null&&D.call(M,j.target)||(W=(V=b.current)==null?void 0:V.contains)!=null&&W.call(V,j.target)||y({type:1})))},!0),_Be(c===0,O.resolveContainers,(j,F)=>{y({type:1}),hee(F,eO.Loose)||(j.preventDefault(),u?.focus())});let N=yn(j=>{y({type:1});let F=j?j instanceof HTMLElement?j:"current"in j&&j.current instanceof HTMLElement?j.current:u:u;F?.focus()}),H=A.useMemo(()=>({close:N,isPortalled:x}),[N,x]),Q=A.useMemo(()=>({open:c===0,close:N}),[c,N]),X={ref:o},J=Ya();return ut.createElement(_ee,{node:P},ut.createElement(i7e,null,ut.createElement(zk.Provider,{value:null},ut.createElement(sO.Provider,{value:l},ut.createElement(Hk.Provider,{value:H},ut.createElement(oBe,{value:N},ut.createElement(bee,{value:oa(c,{0:po.Open,1:po.Closed})},ut.createElement(C,null,J({ourProps:X,theirProps:i,slot:Q,defaultTag:M7e,name:"Popover"})))))))))}let F7e="button";function B7e(t,e){let n=A.useId(),{id:r=`headlessui-popover-button-${n}`,disabled:i=!1,autoFocus:s=!1,...o}=t,[a,l]=$k("Popover.Button"),{isPortalled:c}=oO("Popover.Button"),u=A.useRef(null),h=`headlessui-focus-sentinel-${A.useId()}`,d=Pee(),f=d?.closeOthers,m=O7e()!==null;A.useEffect(()=>{if(!m)return l({type:3,buttonId:r}),()=>{l({type:3,buttonId:null})}},[m,r,l]);let[g]=A.useState(()=>Symbol()),b=$a(u,e,t7e(),yn(F=>{if(!m){if(F)a.buttons.current.push(g);else{let Y=a.buttons.current.indexOf(g);Y!==-1&&a.buttons.current.splice(Y,1)}a.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),F&&l({type:2,button:F})}})),y=$a(u,e),v=Xg(u),x=yn(F=>{var Y,M,D;if(m){if(a.popoverState===1)return;switch(F.key){case Hu.Space:case Hu.Enter:F.preventDefault(),(M=(Y=F.target).click)==null||M.call(Y),l({type:1}),(D=a.button)==null||D.focus();break}}else switch(F.key){case Hu.Space:case Hu.Enter:F.preventDefault(),F.stopPropagation(),a.popoverState===1&&f?.(a.buttonId),l({type:0});break;case Hu.Escape:if(a.popoverState!==0)return f?.(a.buttonId);if(!u.current||v!=null&&v.activeElement&&!u.current.contains(v.activeElement))return;F.preventDefault(),F.stopPropagation(),l({type:1});break}}),w=yn(F=>{m||F.key===Hu.Space&&F.preventDefault()}),S=yn(F=>{var Y,M;see(F.currentTarget)||i||(m?(l({type:1}),(Y=a.button)==null||Y.focus()):(F.preventDefault(),F.stopPropagation(),a.popoverState===1&&f?.(a.buttonId),l({type:0}),(M=a.button)==null||M.focus()))}),E=yn(F=>{F.preventDefault(),F.stopPropagation()}),{isFocusVisible:k,focusProps:_}=WFe({autoFocus:s}),{isHovered:L,hoverProps:R}=VFe({isDisabled:i}),{pressed:C,pressProps:P}=ZFe({disabled:i}),O=a.popoverState===0,N=A.useMemo(()=>({open:O,active:C||O,disabled:i,hover:L,focus:k,autofocus:s}),[O,L,k,C,i,s]),H=SBe(t,a.button),Q=p4(m?{ref:y,type:H,onKeyDown:x,onClick:S,disabled:i||void 0,autoFocus:s}:{ref:b,id:a.buttonId,type:H,"aria-expanded":a.popoverState===0,"aria-controls":a.panel?a.panelId:void 0,disabled:i||void 0,autoFocus:s,onKeyDown:x,onKeyUp:w,onClick:S,onMouseDown:E},_,R,P),X=See(),J=yn(()=>{let F=a.panel;if(!F)return;function Y(){oa(X.current,{[$c.Forwards]:()=>Od(F,Uc.First),[$c.Backwards]:()=>Od(F,Uc.Last)})===zS.Error&&Od(Dk().filter(M=>M.dataset.headlessuiFocusGuard!=="true"),oa(X.current,{[$c.Forwards]:Uc.Next,[$c.Backwards]:Uc.Previous}),{relativeTo:a.button})}Y()}),j=Ya();return ut.createElement(ut.Fragment,null,j({ourProps:Q,theirProps:o,slot:N,defaultTag:F7e,name:"Popover.Button"}),O&&!m&&c&&ut.createElement(HS,{id:h,ref:a.afterButtonSentinel,features:Ey.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:J}))}let U7e="div",$7e=dg.RenderStrategy|dg.Static;function Nee(t,e){let n=A.useId(),{id:r=`headlessui-popover-backdrop-${n}`,transition:i=!1,...s}=t,[{popoverState:o},a]=$k("Popover.Backdrop"),[l,c]=A.useState(null),u=$a(e,c),h=jk(),[d,f]=nO(i,l,h!==null?(h&po.Open)===po.Open:o===0),m=yn(y=>{if(see(y.currentTarget))return y.preventDefault();a({type:1})}),g=A.useMemo(()=>({open:o===0}),[o]),b={ref:u,id:r,"aria-hidden":!0,onClick:m,...tO(f)};return Ya()({ourProps:b,theirProps:s,slot:g,defaultTag:U7e,features:$7e,visible:d,name:"Popover.Backdrop"})}let H7e="div",z7e=dg.RenderStrategy|dg.Static;function V7e(t,e){let n=A.useId(),{id:r=`headlessui-popover-panel-${n}`,focus:i=!1,anchor:s,portal:o=!1,modal:a=!1,transition:l=!1,...c}=t,[u,h]=$k("Popover.Panel"),{close:d,isPortalled:f}=oO("Popover.Panel"),m=`headlessui-focus-sentinel-before-${n}`,g=`headlessui-focus-sentinel-after-${n}`,b=A.useRef(null),y=e7e(s),[v,x]=r7e(y),w=n7e();y&&(o=!0);let[S,E]=A.useState(null),k=$a(b,e,y?v:null,yn(F=>h({type:4,panel:F})),E),_=Xg(b);wi(()=>(h({type:5,panelId:r}),()=>{h({type:5,panelId:null})}),[r,h]);let L=jk(),[R,C]=nO(l,S,L!==null?(L&po.Open)===po.Open:u.popoverState===0);hBe(R,u.button,()=>{h({type:1})});let P=u.__demoMode?!1:a&&R;PBe(P,_);let O=yn(F=>{var Y;switch(F.key){case Hu.Escape:if(u.popoverState!==0||!b.current||_!=null&&_.activeElement&&!b.current.contains(_.activeElement))return;F.preventDefault(),F.stopPropagation(),h({type:1}),(Y=u.button)==null||Y.focus();break}});A.useEffect(()=>{var F;t.static||u.popoverState===1&&((F=t.unmount)==null||F)&&h({type:4,panel:null})},[u.popoverState,t.unmount,t.static,h]),A.useEffect(()=>{if(u.__demoMode||!i||u.popoverState!==0||!b.current)return;let F=_?.activeElement;b.current.contains(F)||Od(b.current,Uc.First)},[u.__demoMode,i,b.current,u.popoverState]);let N=A.useMemo(()=>({open:u.popoverState===0,close:d}),[u.popoverState,d]),H=p4(y?w():{},{ref:k,id:r,onKeyDown:O,onBlur:i&&u.popoverState===0?F=>{var Y,M,D,V,W;let te=F.relatedTarget;te&&b.current&&((Y=b.current)!=null&&Y.contains(te)||(h({type:1}),((D=(M=u.beforePanelSentinel.current)==null?void 0:M.contains)!=null&&D.call(M,te)||(W=(V=u.afterPanelSentinel.current)==null?void 0:V.contains)!=null&&W.call(V,te))&&te.focus({preventScroll:!0})))}:void 0,tabIndex:-1,style:{...c.style,...x,"--button-width":lBe(u.button,!0).width},...tO(C)}),Q=See(),X=yn(()=>{let F=b.current;if(!F)return;function Y(){oa(Q.current,{[$c.Forwards]:()=>{var M;Od(F,Uc.First)===zS.Error&&((M=u.afterPanelSentinel.current)==null||M.focus())},[$c.Backwards]:()=>{var M;(M=u.button)==null||M.focus({preventScroll:!0})}})}Y()}),J=yn(()=>{let F=b.current;if(!F)return;function Y(){oa(Q.current,{[$c.Forwards]:()=>{if(!u.button)return;let M=Dk(),D=M.indexOf(u.button),V=M.slice(0,D+1),W=[...M.slice(D+1),...V];for(let te of W.slice())if(te.dataset.headlessuiFocusGuard==="true"||S!=null&&S.contains(te)){let ee=W.indexOf(te);ee!==-1&&W.splice(ee,1)}Od(W,Uc.First,{sorted:!1})},[$c.Backwards]:()=>{var M;Od(F,Uc.Previous)===zS.Error&&((M=u.button)==null||M.focus())}})}Y()}),j=Ya();return ut.createElement(a7e,null,ut.createElement(zk.Provider,{value:r},ut.createElement(Hk.Provider,{value:{close:d,isPortalled:f}},ut.createElement(x7e,{enabled:o?t.static||R:!1},R&&f&&ut.createElement(HS,{id:m,ref:u.beforePanelSentinel,features:Ey.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:X}),j({ourProps:H,theirProps:c,slot:N,defaultTag:H7e,features:z7e,visible:R,name:"Popover.Panel"}),R&&f&&ut.createElement(HS,{id:g,ref:u.afterPanelSentinel,features:Ey.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:J})))))}let W7e="div";function G7e(t,e){let n=A.useRef(null),r=$a(n,e),[i,s]=A.useState([]),o=yn(g=>{s(b=>{let y=b.indexOf(g);if(y!==-1){let v=b.slice();return v.splice(y,1),v}return b})}),a=yn(g=>(s(b=>[...b,g]),()=>o(g))),l=yn(()=>{var g;let b=Rv(n);if(!b)return!1;let y=b.activeElement;return(g=n.current)!=null&&g.contains(y)?!0:i.some(v=>{var x,w;return((x=b.getElementById(v.buttonId.current))==null?void 0:x.contains(y))||((w=b.getElementById(v.panelId.current))==null?void 0:w.contains(y))})}),c=yn(g=>{for(let b of i)b.buttonId.current!==g&&b.close()}),u=A.useMemo(()=>({registerPopover:a,unregisterPopover:o,isFocusWithinPopoverGroup:l,closeOthers:c}),[a,o,l,c]),h=A.useMemo(()=>({}),[]),d=t,f={ref:r},m=Ya();return ut.createElement(_ee,null,ut.createElement(aO.Provider,{value:u},m({ourProps:f,theirProps:d,slot:h,defaultTag:W7e,name:"Popover.Group"})))}let q7e=Eo(j7e),K7e=Eo(B7e),Y7e=Eo(Nee),X7e=Eo(Nee),Z7e=Eo(V7e),J7e=Eo(G7e),ZT=Object.assign(q7e,{Button:K7e,Backdrop:X7e,Overlay:Y7e,Panel:Z7e,Group:J7e});const Lee=t=>({js:"javascript",jsx:"jsx",ts:"typescript",tsx:"tsx",json:"json",html:"html",css:"css",py:"python",java:"java",rb:"ruby",cpp:"cpp",c:"c",cs:"csharp",go:"go",rs:"rust",php:"php",swift:"swift",md:"plaintext",sh:"bash"})[t]||"typescript",Q7e=A.memo(({onClick:t,isFullscreen:e})=>p.jsx("button",{onClick:t,className:"ml-4 p-1 rounded hover:bg-bolt-elements-background-depth-3 text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary transition-colors",title:e?"Exit Fullscreen":"Enter Fullscreen",children:p.jsx("div",{className:e?"i-ph:corners-in":"i-ph:corners-out"})})),e9e=A.memo(({isFullscreen:t,children:e})=>t?p.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/50 flex items-center justify-center p-6",children:p.jsx("div",{className:"w-full h-full max-w-[90vw] max-h-[90vh] bg-bolt-elements-background-depth-2 rounded-lg border border-bolt-elements-borderColor shadow-xl overflow-hidden",children:e})}):p.jsx(p.Fragment,{children:e})),t9e=1024*1024,n9e=/[\x00-\x08\x0E-\x1F]/,z7=t=>t.length>t9e||n9e.test(t),r9e=(t,e)=>{try{if(z7(t)||z7(e))return{beforeLines:[],afterLines:[],hasChanges:!1,lineChanges:{before:new Set,after:new Set},unifiedBlocks:[],isBinary:!0};const n=u=>u.replace(/\r\n/g,`
`).split(`
`).map(h=>h.trimEnd()),r=n(t),i=n(e);if(r.join(`
`)===i.join(`
`))return{beforeLines:r,afterLines:i,hasChanges:!1,lineChanges:{before:new Set,after:new Set},unifiedBlocks:[],isBinary:!1};const s={before:new Set,after:new Set},o=[];let a=0,l=0;for(;a<r.length||l<i.length;)if(a<r.length&&l<i.length&&r[a]===i[l])o.push({lineNumber:l,content:i[l],type:"unchanged",correspondingLine:a}),a++,l++;else{let u=!1;const h=3;for(let d=1;d<=h&&a+d<r.length&&l+d<i.length;d++)if(r[a+d]===i[l]){for(let f=0;f<d;f++)s.before.add(a+f),o.push({lineNumber:a+f,content:r[a+f],type:"removed",correspondingLine:l,charChanges:[{value:r[a+f],type:"removed"}]});a+=d,u=!0;break}else if(r[a]===i[l+d]){for(let f=0;f<d;f++)s.after.add(l+f),o.push({lineNumber:l+f,content:i[l+f],type:"added",correspondingLine:a,charChanges:[{value:i[l+f],type:"added"}]});l+=d,u=!0;break}if(!u)if(a<r.length&&l<i.length){const d=r[a],f=i[l];let m=0;for(;m<d.length&&m<f.length&&d[m]===f[m];)m++;let g=0;for(;g<d.length-m&&g<f.length-m&&d[d.length-1-g]===f[f.length-1-g];)g++;const b=d.slice(0,m),y=d.slice(m,d.length-g),v=f.slice(m,f.length-g),x=d.slice(d.length-g);y||v?(y&&(s.before.add(a),o.push({lineNumber:a,content:d,type:"removed",correspondingLine:l,charChanges:[{value:b,type:"unchanged"},{value:y,type:"removed"},{value:x,type:"unchanged"}]}),a++),v&&(s.after.add(l),o.push({lineNumber:l,content:f,type:"added",correspondingLine:a-1,charChanges:[{value:b,type:"unchanged"},{value:v,type:"added"},{value:x,type:"unchanged"}]}),l++)):(a<r.length&&(s.before.add(a),o.push({lineNumber:a,content:r[a],type:"removed",correspondingLine:l,charChanges:[{value:r[a],type:"removed"}]}),a++),l<i.length&&(s.after.add(l),o.push({lineNumber:l,content:i[l],type:"added",correspondingLine:a-1,charChanges:[{value:i[l],type:"added"}]}),l++))}else a<r.length&&(s.before.add(a),o.push({lineNumber:a,content:r[a],type:"removed",correspondingLine:l,charChanges:[{value:r[a],type:"removed"}]}),a++),l<i.length&&(s.after.add(l),o.push({lineNumber:l,content:i[l],type:"added",correspondingLine:a-1,charChanges:[{value:i[l],type:"added"}]}),l++)}const c=o.sort((u,h)=>u.lineNumber-h.lineNumber);return{beforeLines:r,afterLines:i,hasChanges:s.before.size>0||s.after.size>0,lineChanges:s,unifiedBlocks:c,isBinary:!1}}catch(n){return console.error("Error processing changes:",n),{beforeLines:[],afterLines:[],hasChanges:!1,lineChanges:{before:new Set,after:new Set},unifiedBlocks:[],error:!0,isBinary:!1}}},Ree="w-9 shrink-0 pl-2 py-1 text-left font-mono text-bolt-elements-textTertiary border-r border-bolt-elements-borderColor bg-bolt-elements-background-depth-1",Iee="px-1 py-1 font-mono whitespace-pre flex-1 group-hover:bg-bolt-elements-background-depth-2 text-bolt-elements-textPrimary",i9e="h-full overflow-auto diff-panel-content",s9e={added:"bg-green-500/10 dark:bg-green-500/20 border-l-4 border-green-500",removed:"bg-red-500/10 dark:bg-red-500/20 border-l-4 border-red-500",unchanged:""},o9e={added:"text-green-700 dark:text-green-500 bg-green-500/10 dark:bg-green-500/20",removed:"text-red-700 dark:text-red-500 bg-red-500/10 dark:bg-red-500/20",unchanged:"text-bolt-elements-textPrimary"},a9e=t=>p.jsx("div",{className:"h-full flex items-center justify-center p-4",children:p.jsxs("div",{className:"text-center text-bolt-elements-textTertiary",children:[p.jsx("div",{className:`i-ph:${t==="binary"?"file-x":"warning-circle"} text-4xl text-red-400 mb-2 mx-auto`}),p.jsx("p",{className:"font-medium text-bolt-elements-textPrimary",children:t==="binary"?"Binary file detected":"Error processing file"}),p.jsx("p",{className:"text-sm mt-1",children:t==="binary"?"Diff view is not available for binary files":"Could not generate diff preview"})]})}),l9e=A.memo(({beforeCode:t,language:e,highlighter:n,theme:r})=>p.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-4",children:[p.jsxs("div",{className:"text-center text-bolt-elements-textTertiary",children:[p.jsx("div",{className:"i-ph:files text-4xl text-green-400 mb-2 mx-auto"}),p.jsx("p",{className:"font-medium text-bolt-elements-textPrimary",children:"Files are identical"}),p.jsx("p",{className:"text-sm mt-1",children:"Both versions match exactly"})]}),p.jsxs("div",{className:"mt-4 w-full max-w-2xl bg-bolt-elements-background-depth-1 rounded-lg border border-bolt-elements-borderColor overflow-hidden",children:[p.jsx("div",{className:"p-2 text-xs font-bold text-bolt-elements-textTertiary border-b border-bolt-elements-borderColor",children:"Current Content"}),p.jsx("div",{className:"overflow-auto max-h-96",children:t.split(`
`).map((i,s)=>p.jsxs("div",{className:"flex group min-w-fit",children:[p.jsx("div",{className:Ree,children:s+1}),p.jsxs("div",{className:Iee,children:[p.jsx("span",{className:"mr-2",children:" "}),p.jsx("span",{dangerouslySetInnerHTML:{__html:n?n.codeToHtml(i,{lang:e,theme:r==="dark"?"github-dark":"github-light"}).replace(/<\/?pre[^>]*>/g,"").replace(/<\/?code[^>]*>/g,""):i}})]})]},s))})]})]})),c9e=(t,e)=>A.useMemo(()=>r9e(t,e),[t,e]),u9e=A.memo(({lineNumber:t,content:e,type:n,highlighter:r,language:i,block:s,theme:o})=>{const a=s9e[n],l=()=>{if(n==="unchanged"||!s.charChanges){const c=r?r.codeToHtml(e,{lang:i,theme:o==="dark"?"github-dark":"github-light"}).replace(/<\/?pre[^>]*>/g,"").replace(/<\/?code[^>]*>/g,""):e;return p.jsx("span",{dangerouslySetInnerHTML:{__html:c}})}return p.jsx(p.Fragment,{children:s.charChanges.map((c,u)=>{const h=o9e[c.type],d=r?r.codeToHtml(c.value,{lang:i,theme:o==="dark"?"github-dark":"github-light"}).replace(/<\/?pre[^>]*>/g,"").replace(/<\/?code[^>]*>/g,""):c.value;return p.jsx("span",{className:h,dangerouslySetInnerHTML:{__html:d}},u)})})};return p.jsxs("div",{className:"flex group min-w-fit",children:[p.jsx("div",{className:Ree,children:t+1}),p.jsxs("div",{className:`${Iee} ${a}`,children:[p.jsxs("span",{className:"mr-2 text-bolt-elements-textTertiary",children:[n==="added"&&p.jsx("span",{className:"text-green-700 dark:text-green-500",children:"+"}),n==="removed"&&p.jsx("span",{className:"text-red-700 dark:text-red-500",children:"-"}),n==="unchanged"&&" "]}),l()]})]})}),h9e=A.memo(({filename:t,hasChanges:e,onToggleFullscreen:n,isFullscreen:r,beforeCode:i,afterCode:s})=>{const{additions:o,deletions:a}=A.useMemo(()=>e?ng(i,s,{newlineIsToken:!1,ignoreWhitespace:!0,ignoreCase:!1}).reduce((u,h)=>(h.added&&(u.additions+=h.value.split(`
`).length),h.removed&&(u.deletions+=h.value.split(`
`).length),u),{additions:0,deletions:0}):{additions:0,deletions:0},[e,i,s]),l=o>0||a>0;return p.jsxs("div",{className:"flex items-center bg-bolt-elements-background-depth-1 p-2 text-sm text-bolt-elements-textPrimary shrink-0",children:[p.jsx("div",{className:"i-ph:file mr-2 h-4 w-4 shrink-0"}),p.jsx("span",{className:"truncate",children:t}),p.jsxs("span",{className:"ml-auto shrink-0 flex items-center gap-2",children:[e?p.jsxs(p.Fragment,{children:[l&&p.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[o>0&&p.jsxs("span",{className:"text-green-700 dark:text-green-500",children:["+",o]}),a>0&&p.jsxs("span",{className:"text-red-700 dark:text-red-500",children:["-",a]})]}),p.jsx("span",{className:"text-yellow-600 dark:text-yellow-400",children:"Modified"}),p.jsx("span",{className:"text-bolt-elements-textTertiary text-xs",children:new Date().toLocaleTimeString()})]}):p.jsx("span",{className:"text-green-700 dark:text-green-400",children:"No Changes"}),p.jsx(Q7e,{onClick:n,isFullscreen:r})]})]})}),d9e=A.memo(({beforeCode:t,afterCode:e,filename:n,language:r})=>{const[i,s]=A.useState(!1),[o,a]=A.useState(null),l=Ot(R1),c=A.useCallback(()=>{s(m=>!m)},[]),{unifiedBlocks:u,hasChanges:h,isBinary:d,error:f}=c9e(t,e);return A.useEffect(()=>{iDe({themes:["github-dark","github-light"],langs:["typescript","javascript","json","html","css","jsx","tsx"]}).then(a)},[]),d||f?a9e(d?"binary":"error"):p.jsx(e9e,{isFullscreen:i,children:p.jsxs("div",{className:"w-full h-full flex flex-col",children:[p.jsx(h9e,{filename:n,hasChanges:h,onToggleFullscreen:c,isFullscreen:i,beforeCode:t,afterCode:e}),p.jsx("div",{className:i9e,children:h?p.jsx("div",{className:"overflow-x-auto min-w-full",children:u.map((m,g)=>p.jsx(u9e,{lineNumber:m.lineNumber,content:m.content,type:m.type,highlighter:o,language:r,block:m,theme:l},`${m.lineNumber}-${g}`))}):p.jsx(l9e,{beforeCode:t,language:r,highlighter:o,theme:l})})]})})}),f9e=A.memo(({fileHistory:t,setFileHistory:e})=>{const n=Ot(Nt.files),r=Ot(Nt.selectedFile),i=Ot(Nt.currentDocument),s=Ot(Nt.unsavedFiles);if(A.useEffect(()=>{if(r&&i){const d=n[r];if(!d||!("content"in d))return;const f=t[r],m=i.value,g=m.replace(/\r\n/g,`
`).trim(),b=(f?.originalContent||d.content).replace(/\r\n/g,`
`).trim();if(!f){if(g!==b){const S=ng(d.content,m);e(E=>({...E,[r]:{originalContent:d.content,lastModified:Date.now(),changes:S,versions:[{timestamp:Date.now(),content:m}],changeSource:"auto-save"}}))}return}const v=f.versions[f.versions.length-1]?.content.replace(/\r\n/g,`
`).trim();if(g===v)return;const x=n1(r);if(cK(x,f.originalContent,m)){const S=ng(f.originalContent,m);if(S.some(k=>(k.added||k.removed)&&k.value.trim().length>0)){const k={originalContent:f.originalContent,lastModified:Date.now(),changes:[...f.changes,...S].slice(-100),versions:[...f.versions,{timestamp:Date.now(),content:m}].slice(-10),changeSource:"auto-save"};e(_=>({..._,[r]:k}))}}}},[r,i?.value,n,e,s]),!r||!i)return p.jsx("div",{className:"flex w-full h-full justify-center items-center bg-bolt-elements-background-depth-1 text-bolt-elements-textPrimary",children:"Select a file to view differences"});const o=n[r],a=o&&"content"in o?o.content:"",l=i.value,u=t[r]?.originalContent||a,h=Lee(r.split(".").pop()||"");try{return p.jsx("div",{className:"h-full overflow-hidden",children:p.jsx(d9e,{beforeCode:u,afterCode:l,language:h,filename:r,lightTheme:"github-light",darkTheme:"github-dark"})})}catch(d){return console.error("DiffView render error:",d),p.jsx("div",{className:"flex w-full h-full justify-center items-center bg-bolt-elements-background-depth-1 text-red-400",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"i-ph:warning-circle text-4xl mb-2"}),p.jsx("p",{children:"Failed to render diff view"})]})})}});let v4=[],Oee=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?Oee:v4).push(n=n+t[e])})();function p9e(t){if(t<768)return!1;for(let e=0,n=v4.length;;){let r=e+n>>1;if(t<v4[r])n=r;else if(t>=Oee[r])e=r+1;else return!0;if(e==n)return!1}}function V7(t){return t>=127462&&t<=127487}const W7=8205;function m9e(t,e,n=!0,r=!0){return(n?Dee:g9e)(t,e,r)}function Dee(t,e,n){if(e==t.length)return e;e&&Mee(t.charCodeAt(e))&&jee(t.charCodeAt(e-1))&&e--;let r=JT(t,e);for(e+=G7(r);e<t.length;){let i=JT(t,e);if(r==W7||i==W7||n&&p9e(i))e+=G7(i),r=i;else if(V7(i)){let s=0,o=e-2;for(;o>=0&&V7(JT(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function g9e(t,e,n){for(;e>0;){let r=Dee(t,e-2,n);if(r<e)return r;e--}return 0}function JT(t,e){let n=t.charCodeAt(e);if(!jee(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return Mee(r)?(n-55296<<10)+(r-56320)+65536:n}function Mee(t){return t>=56320&&t<57344}function jee(t){return t>=55296&&t<56320}function G7(t){return t<65536?1:2}let Rn=class Fee{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=fg(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),Rl.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=fg(this,e,n);let r=[];return this.decompose(e,n,r,0),Rl.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new v1(this),s=new v1(e);for(let o=n,a=n;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new v1(this,e)}iterRange(e,n=this.length){return new Bee(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new Uee(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Fee.empty:e.length<=32?new Ir(e):Rl.from(Ir.split(e,[]))}};class Ir extends Rn{constructor(e,n=b9e(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((n?r:a)>=e)return new y9e(i,a,r,o);i=a+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new Ir(q7(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=h2(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new Ir(a,o.length+s.length));else{let l=a.length>>1;r.push(new Ir(a.slice(0,l)),new Ir(a.slice(l)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof Ir))return super.replace(e,n,r);[e,n]=fg(this,e,n);let i=h2(this.text,h2(r.text,q7(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new Ir(i,s):Rl.from(Ir.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=fg(this,e,n);let i="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&n>s&&(i+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new Ir(r,i)),r=[],i=-1);return i>-1&&n.push(new Ir(r,i)),n}}class Rl extends Rn{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,r,i);i=a+1,r=l+1}}decompose(e,n,r,i){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let c=i&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!c?r.push(a):a.decompose(e-o,n-o,r,c)}o=l+1}}replace(e,n,r){if([e,n]=fg(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,r),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[i]=l,new Rl(u,this.length-(n-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=fg(this,e,n);let i="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&n>o&&(i+=a.sliceString(e-o,n-o,r)),o=l+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Rl))return 0;let r=0,[i,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==o||s==a)return r;let l=this.children[i],c=e.children[s];if(l!=c)return r+l.scanIdentical(c,n);r+=l.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let f of e)r+=f.lines;if(r<32){let f=[];for(let m of e)m.flatten(f);return new Ir(f,n)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,c=-1,u=[];function h(f){let m;if(f.lines>s&&f instanceof Rl)for(let g of f.children)h(g);else f.lines>o&&(l>o||!l)?(d(),a.push(f)):f instanceof Ir&&l&&(m=u[u.length-1])instanceof Ir&&f.lines+m.lines<=32?(l+=f.lines,c+=f.length+1,u[u.length-1]=new Ir(m.text.concat(f.text),m.length+1+f.length)):(l+f.lines>i&&d(),l+=f.lines,c+=f.length+1,u.push(f))}function d(){l!=0&&(a.push(u.length==1?u[0]:Rl.from(u,c)),c=-1,l=u.length=0)}for(let f of e)h(f);return d(),a.length==1?a[0]:new Rl(a,n)}}Rn.empty=new Ir([""],0);function b9e(t){let e=-1;for(let n of t)e+=n.length+1;return e}function h2(t,e,n=0,r=1e9){for(let i=0,s=0,o=!0;s<t.length&&i<=r;s++){let a=t[s],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function q7(t,e,n){return h2(t,[""],e,n)}class v1{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Ir?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof Ir?i.text.length:i.children.length;if(o==(n>0?a:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Ir){let l=i.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof Ir?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Bee{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new v1(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Uee{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Rn.prototype[Symbol.iterator]=function(){return this.iter()},v1.prototype[Symbol.iterator]=Bee.prototype[Symbol.iterator]=Uee.prototype[Symbol.iterator]=function(){return this});class y9e{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function fg(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Oi(t,e,n=!0,r=!0){return m9e(t,e,n,r)}function v9e(t){return t>=56320&&t<57344}function x9e(t){return t>=55296&&t<56320}function Pa(t,e){let n=t.charCodeAt(e);if(!x9e(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return v9e(r)?(n-55296<<10)+(r-56320)+65536:n}function lO(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Ic(t){return t<65536?1:2}const x4=/\r\n?|\n/;var Ji=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Ji||(Ji={}));class Xl{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,n=!1){_4(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new Xl(e)}composeDesc(e){return this.empty?e:e.empty?this:$ee(this,e)}mapDesc(e,n=!1){return e.empty?this:w4(this,e,n)}mapPos(e,n=-1,r=Ji.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=i+a;if(l<0){if(c>e)return s+(e-i);s+=a}else{if(r!=Ji.Simple&&c>=e&&(r==Ji.TrackDel&&i<e&&c>e||r==Ji.TrackBefore&&i<e||r==Ji.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!a)return e==i||n<0?s:s+l;s+=l}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=n&&a>=e)return i<e&&a>n?"cover":!0;i=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Xl(e)}static create(e){return new Xl(e)}}class ri extends Xl{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return _4(this,(n,r,i,s,o)=>e=e.replace(i,i+(r-n),o),!1),e}mapDesc(e,n=!1){return w4(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a>=0){n[i]=a,n[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(Rn.empty);r.push(o?e.slice(s,s+o):Rn.empty)}s+=o}return new ri(n,r)}compose(e){return this.empty?e:e.empty?this:$ee(this,e,!0)}map(e,n=!1){return e.empty?this:w4(this,e,n,!0)}iterChanges(e,n=!1){_4(this,e,n)}get desc(){return Xl.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new ky(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);Yi(i,u,-1);let h=s.ins==-1?-1:s.off==0?s.ins:0;Yi(n,u,h),h>0&&eh(r,n,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);Yi(n,u,-1),Yi(i,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new ri(n,r),filtered:Xl.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!i.length)return;o<n&&Yi(i,n-o,-1);let h=new ri(i,s);a=a?a.compose(h.map(a)):h,i=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let h of u)c(h);else if(u instanceof ri){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:h,to:d=h,insert:f}=u;if(h>d||h<0||d>n)throw new RangeError(`Invalid change range ${h} to ${d} (in doc of length ${n})`);let m=f?typeof f=="string"?Rn.of(f.split(r||x4)):f:Rn.empty,g=m.length;if(h==d&&g==0)return;h<o&&l(),h>o&&Yi(i,h-o,-1),Yi(i,d-h,g),eh(s,i,m),o=d}}return c(e),l(!a),a}static empty(e){return new ri(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(Rn.empty);r[i]=Rn.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new ri(n,r)}static createSet(e,n){return new ri(e,n)}}function Yi(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function eh(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(Rn.empty);t.push(n)}}function _4(t,e,n){let r=t.inserted;for(let i=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)i+=a,s+=a;else{let c=i,u=s,h=Rn.empty;for(;c+=a,u+=l,l&&r&&(h=h.append(r[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(i,c,s,u,h),i=c,s=u}}}function w4(t,e,n,r=!1){let i=[],s=r?[]:null,o=new ky(t),a=new ky(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);Yi(i,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let c=a.len;for(Yi(i,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(Yi(i,0,o.ins),s&&eh(s,i,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let h=Math.min(u,a.len);c+=h,u-=h,a.forward(h)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;Yi(i,c,l<o.i?o.ins:0),s&&l<o.i&&eh(s,i,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?ri.createSet(i,s):Xl.create(i);throw new Error("Mismatched change set lengths")}}}function $ee(t,e,n=!1){let r=[],i=n?[]:null,s=new ky(t),o=new ky(e);for(let a=!1;;){if(s.done&&o.done)return i?ri.createSet(r,i):Xl.create(r);if(s.ins==0)Yi(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)Yi(r,0,o.ins,a),i&&eh(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=r.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;Yi(r,l,u,a),i&&u&&eh(i,r,o.text)}else o.ins==-1?(Yi(r,s.off?0:s.len,l,a),i&&eh(i,r,s.textBit(l))):(Yi(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&eh(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>c),s.forward2(l),o.forward(l)}}}}class ky{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Rn.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?Rn.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Md{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new Md(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return st.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return st.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return st.range(e.anchor,e.head)}static create(e,n,r){return new Md(e,n,r)}}class st{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:st.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new st([this.main],0)}addRange(e,n=!0){return st.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,st.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new st(e.ranges.map(n=>Md.fromJSON(n)),e.main)}static single(e,n=e){return new st([st.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return st.normalized(e.slice(),n);r=s.to}return new st(e,n)}static cursor(e,n=0,r,i){return Md.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?Md.create(n,e,48|s):Md.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?st.range(l,a):st.range(a,l))}}return new st(e,n)}}function Hee(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let cO=0;class Rt{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=cO++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Rt(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:uO),!!e.static,e.enables)}of(e){return new d2([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new d2(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new d2(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function uO(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class d2{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=cO++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let h of this.dependencies)h=="doc"?l=!0:h=="selection"?c=!0:((n=e[h.id])!==null&&n!==void 0?n:1)&1||u.push(e[h.id]);return{create(h){return h.values[o]=r(h),1},update(h,d){if(l&&d.docChanged||c&&(d.docChanged||d.selection)||S4(h,u)){let f=r(h);if(a?!K7(f,h.values[o],i):!i(f,h.values[o]))return h.values[o]=f,1}return 0},reconfigure:(h,d)=>{let f,m=d.config.address[s];if(m!=null){let g=WS(d,m);if(this.dependencies.every(b=>b instanceof Rt?d.facet(b)===h.facet(b):b instanceof Ei?d.field(b,!1)==h.field(b,!1):!0)||(a?K7(f=r(h),g,i):i(f=r(h),g)))return h.values[o]=g,0}else f=r(h);return h.values[o]=f,1}}}}function K7(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function S4(t,e){let n=!1;for(let r of e)x1(t,r)&1&&(n=!0);return n}function _9e(t,e,n){let r=n.map(l=>t[l.id]),i=n.map(l=>l.type),s=r.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<r.length;u++){let h=WS(l,r[u]);if(i[u]==2)for(let d of h)c.push(d);else c.push(h)}return e.combine(c)}return{create(l){for(let c of r)x1(l,c);return l.values[o]=a(l),1},update(l,c){if(!S4(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=S4(l,r),h=c.config.facets[e.id],d=c.facet(e);if(h&&!u&&uO(n,h))return l.values[o]=d,0;let f=a(l);return e.compare(f,d)?(l.values[o]=d,0):(l.values[o]=f,1)}}}const ow=Rt.define({static:!0});class Ei{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new Ei(cO++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(ow).find(r=>r.field==this);return(n?.create||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[n]=o,1)},reconfigure:(r,i)=>{let s=r.facet(ow),o=i.facet(ow),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(r.values[n]=a.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,ow.of({field:this,create:e})]}get extension(){return this}}const wd={lowest:4,low:3,default:2,high:1,highest:0};function hb(t){return e=>new zee(e,t)}const jh={highest:hb(wd.highest),high:hb(wd.high),default:hb(wd.default),low:hb(wd.low),lowest:hb(wd.lowest)};class zee{constructor(e,n){this.inner=e,this.prec=n}}class Zg{of(e){return new E4(this,e)}reconfigure(e){return Zg.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class E4{constructor(e,n){this.compartment=e,this.inner=n}}class VS{constructor(e,n,r,i,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),o=new Map;for(let d of w9e(e,n,o))d instanceof Ei?i.push(d):(s[d.facet.id]||(s[d.facet.id]=[])).push(d);let a=Object.create(null),l=[],c=[];for(let d of i)a[d.id]=c.length<<1,c.push(f=>d.slot(f));let u=r?.config.facets;for(let d in s){let f=s[d],m=f[0].facet,g=u&&u[d]||[];if(f.every(b=>b.type==0))if(a[m.id]=l.length<<1|1,uO(g,f))l.push(r.facet(m));else{let b=m.combine(f.map(y=>y.value));l.push(r&&m.compare(b,r.facet(m))?r.facet(m):b)}else{for(let b of f)b.type==0?(a[b.id]=l.length<<1|1,l.push(b.value)):(a[b.id]=c.length<<1,c.push(y=>b.dynamicSlot(y)));a[m.id]=c.length<<1,c.push(b=>_9e(b,m,f))}}let h=c.map(d=>d(a));return new VS(e,o,h,a,l,s)}}function w9e(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let c=r[l].indexOf(o);c>-1&&r[l].splice(c,1),o instanceof E4&&n.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof E4){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),s(c,a)}else if(o instanceof zee)s(o.inner,o.prec);else if(o instanceof Ei)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof d2)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,wd.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(t,wd.default),r.reduce((o,a)=>o.concat(a))}function x1(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function WS(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const Vee=Rt.define(),k4=Rt.define({combine:t=>t.some(e=>e),static:!0}),Wee=Rt.define({combine:t=>t.length?t[0]:void 0,static:!0}),Gee=Rt.define(),qee=Rt.define(),Kee=Rt.define(),Yee=Rt.define({combine:t=>t.length?t[0]:!1});class lu{constructor(e,n){this.type=e,this.value=n}static define(){return new S9e}}class S9e{of(e){return new lu(this,e)}}class E9e{constructor(e){this.map=e}of(e){return new fn(this,e)}}class fn{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new fn(this.type,n)}is(e){return this.type==e}static define(e={}){return new E9e(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}fn.reconfigure=fn.define();fn.appendConfig=fn.define();class Jr{constructor(e,n,r,i,s,o){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&Hee(r,n.newLength),s.some(a=>a.type==Jr.time)||(this.annotations=s.concat(Jr.time.of(Date.now())))}static create(e,n,r,i,s,o){return new Jr(e,n,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Jr.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Jr.time=lu.define();Jr.userEvent=lu.define();Jr.addToHistory=lu.define();Jr.remote=lu.define();function k9e(t,e){let n=[];for(let r=0,i=0;;){let s,o;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],o=t[r++];else if(i<e.length)s=e[i++],o=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function Xee(t,e,n){var r;let i,s,o;return n?(i=e.changes,s=ri.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:fn.mapEffects(t.effects,i).concat(fn.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function C4(t,e,n){let r=e.selection,i=Rm(e.annotations);return e.userEvent&&(i=i.concat(Jr.userEvent.of(e.userEvent))),{changes:e.changes instanceof ri?e.changes:ri.of(e.changes||[],n,t.facet(Wee)),selection:r&&(r instanceof st?r:st.single(r.anchor,r.head)),effects:Rm(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function Zee(t,e,n){let r=C4(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;r=Xee(r,C4(t,e[s],o?r.changes.newLength:t.doc.length),o)}let i=Jr.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return T9e(n?C9e(i):i)}function C9e(t){let e=t.startState,n=!0;for(let i of e.facet(Gee)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:k9e(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=ri.empty(e.doc.length);else{let o=t.changes.filter(n);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=Jr.create(e,i,t.selection&&t.selection.map(s),fn.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(qee);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof Jr?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Jr?t=s[0]:t=Zee(e,Rm(s),!1)}return t}function T9e(t){let e=t.startState,n=e.facet(Kee),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=Xee(r,C4(e,s,t.changes.newLength),!0))}return r==t?t:Jr.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const A9e=[];function Rm(t){return t==null?A9e:Array.isArray(t)?t:[t]}var Qr=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Qr||(Qr={}));const P9e=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let T4;try{T4=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function N9e(t){if(T4)return T4.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||P9e.test(n)))return!0}return!1}function L9e(t){return e=>{if(!/\S/.test(e))return Qr.Space;if(N9e(e))return Qr.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Qr.Word;return Qr.Other}}class Sn{constructor(e,n,r,i,s,o){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)x1(this,a<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return x1(this,r),WS(this,r)}update(...e){return Zee(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let a of e.effects)a.is(Zg.reconfigure)?(n&&(i=new Map,n.compartments.forEach((l,c)=>i.set(c,l)),n=null),i.set(a.value.compartment,a.value.extension)):a.is(fn.reconfigure)?(n=null,r=a.value):a.is(fn.appendConfig)&&(n=null,r=Rm(r).concat(a.value));let s;n?s=e.startState.values.slice():(n=VS.resolve(r,i,this),s=new Sn(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(k4)?e.newSelection:e.newSelection.asSingle();new Sn(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:st.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],o=Rm(r.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),c=this.changes(l.changes),u=c.map(i);for(let d=0;d<a;d++)s[d]=s[d].map(u);let h=i.mapDesc(c,!0);s.push(l.range.map(h)),i=i.compose(u),o=fn.mapEffects(o,u).concat(fn.mapEffects(Rm(l.effects),h))}return{changes:i,selection:st.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof ri?e:ri.of(e,this.doc.length,this.facet(Sn.lineSeparator))}toText(e){return Rn.of(e.split(this.facet(Sn.lineSeparator)||x4))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(x1(this,n),WS(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Ei&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Sn.create({doc:e.doc,selection:st.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=VS.resolve(e.extensions||[],new Map),r=e.doc instanceof Rn?e.doc:Rn.of((e.doc||"").split(n.staticFacet(Sn.lineSeparator)||x4)),i=e.selection?e.selection instanceof st?e.selection:st.single(e.selection.anchor,e.selection.head):st.single(0);return Hee(i,r.length),n.staticFacet(k4)||(i=i.asSingle()),new Sn(n,r,i,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Sn.tabSize)}get lineBreak(){return this.facet(Sn.lineSeparator)||`
`}get readOnly(){return this.facet(Yee)}phrase(e,...n){for(let r of this.facet(Sn.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(Vee))for(let o of s(this,n,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return L9e(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=Oi(n,o,!1);if(s(n.slice(l,o))!=Qr.Word)break;o=l}for(;a<i;){let l=Oi(n,a);if(s(n.slice(a,l))!=Qr.Word)break;a=l}return o==a?null:st.range(o+r,a+r)}}Sn.allowMultipleSelections=k4;Sn.tabSize=Rt.define({combine:t=>t.length?t[0]:4});Sn.lineSeparator=Wee;Sn.readOnly=Yee;Sn.phrases=Rt.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});Sn.languageData=Vee;Sn.changeFilter=Gee;Sn.transactionFilter=qee;Sn.transactionExtender=Kee;Zg.reconfigure=fn.define();function Kf(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class xf{eq(e){return this==e}range(e,n=e){return A4.create(e,n,this)}}xf.prototype.startSide=xf.prototype.endSide=0;xf.prototype.point=!1;xf.prototype.mapMode=Ji.TrackDel;let A4=class Jee{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new Jee(e,n,r)}};function P4(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class hO{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,h=this.to[l]+e,d,f;if(u==h){let m=n.mapPos(u,c.startSide,c.mapMode);if(m==null||(d=f=m,c.startSide!=c.endSide&&(f=n.mapPos(u,c.endSide),f<d)))continue}else if(d=n.mapPos(u,c.startSide),f=n.mapPos(h,c.endSide),d>f||d==f&&c.startSide>0&&c.endSide<=0)continue;(f-d||c.endSide-c.startSide)<0||(o<0&&(o=d),c.point&&(a=Math.max(a,f-d)),r.push(c),i.push(d-o),s.push(f-o))}return{mapped:r.length?new hO(i,s,r,a):null,pos:o}}}class Nn{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new Nn(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(r&&(n=n.slice().sort(P4)),this.isEmpty)return n.length?Nn.of(n):this;let a=new Qee(this,null,-1).goto(0),l=0,c=[],u=new _f;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let h=n[l++];u.addInner(h.from,h.to,h.value)||c.push(h)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(A4.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?Nn.empty:this.nextLayer.update({add:c,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)i=Math.max(i,l.maxPoint),n.push(l),r.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:h}=l.map(a,e);u&&(i=Math.max(i,u.maxPoint),n.push(u),r.push(h))}}let s=this.nextLayer.map(e);return n.length==0?s:new Nn(r,n,s||Nn.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return Cy.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Cy.from(e).goto(n)}static compare(e,n,r,i,s=-1){let o=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),a=n.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),l=Y7(o,a,r),c=new db(o,l,s),u=new db(a,l,s);r.iterGaps((h,d,f)=>X7(c,h,u,d,f,i)),r.empty&&r.length==0&&X7(c,0,u,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=Y7(s,o),l=new db(s,a,0).goto(r),c=new db(o,a,0).goto(r);for(;;){if(l.to!=c.to||!N4(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>i)return!0;l.next(),c.next()}}static spans(e,n,r,i,s=-1){let o=new db(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let c=Math.min(o.to,r);if(o.point){let u=o.activeForPoint(o.to),h=o.pointFrom<n?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);i.point(a,c,o.point,u,h,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(i.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,n=!1){let r=new _f;for(let i of e instanceof A4?[e]:n?R9e(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return Nn.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=Nn.empty;i=i.nextLayer)n=new Nn(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}Nn.empty=new Nn([],[],null,-1);function R9e(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(P4(e,r)>0)return t.slice().sort(P4);e=r}return t}Nn.empty.nextLayer=Nn.empty;class _f{finishChunk(e){this.chunks.push(new hO(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new _f)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(Nn.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=Nn.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function Y7(t,e,n){let r=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!n?.touchesRange(a,a+s.chunk[o].length)&&i.add(s.chunk[o])}return i}class Qee{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Cy{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new Qee(o,n,r,s));return i.length==1?i[0]:new Cy(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)QT(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)QT(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),QT(this.heap,0)}}}function QT(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class db{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Cy.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){aw(this.active,e),aw(this.activeTo,e),aw(this.activeRank,e),this.minActive=Z7(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;lw(this.active,n,r),lw(this.activeTo,n,i),lw(this.activeRank,n,s),e&&lw(e,n,this.cursor.from),this.minActive=Z7(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&aw(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function X7(t,e,n,r,i,s){t.goto(e),n.goto(r);let o=r+i,a=r,l=r-e;for(;;){let c=t.to+l-n.to,u=c||t.endSide-n.endSide,h=u<0?t.to+l:n.to,d=Math.min(h,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&N4(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,d,t.point,n.point):d>a&&!N4(t.active,n.active)&&s.compareRange(a,d,t.active,n.active),h>o)break;(c||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(h),a=h,u<=0&&t.next(),u>=0&&n.next()}}function N4(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function aw(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function lw(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function Z7(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function Vk(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Oi(t,i));return r}function I9e(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=Oi(t,i)}return t.length}const L4="",J7=typeof Symbol>"u"?"__"+L4:Symbol.for(L4),R4=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Q7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class wh{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],h=/^@(\w+)\b/.exec(o[0]),d=h&&h[1]=="keyframes";if(h&&a==null)return l.push(o[0]+";");for(let f in a){let m=a[f];if(/&/.test(f))s(f.split(/,\s*/).map(g=>o.map(b=>g.replace(/&/,b))).reduce((g,b)=>g.concat(b)),m,l);else if(m&&typeof m=="object"){if(!h)throw new RangeError("The value of a property ("+f+") should be a primitive value.");s(i(f),m,u,d)}else m!=null&&u.push(f.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+m+";")}(u.length||d)&&l.push((r&&!h&&!c?o.map(r):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Q7[J7]||1;return Q7[J7]=e+1,L4+e.toString(36)}static mount(e,n,r){let i=e[R4],s=r&&r.nonce;i?s&&i.setNonce(s):i=new O9e(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let e9=new Map;class O9e{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=e9.get(r);if(s)return e[R4]=s;this.sheet=new i.CSSStyleSheet,e9.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[R4]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),r)for(let c=0;c<a.rules.length;c++)r.insertRule(a.rules[c],i++)}else{for(;s<l;)i+=this.modules[s++].rules.length;i+=a.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Sh={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ty={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},D9e=typeof navigator<"u"&&/Mac/.test(navigator.platform),M9e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ii=0;Ii<10;Ii++)Sh[48+Ii]=Sh[96+Ii]=String(Ii);for(var Ii=1;Ii<=24;Ii++)Sh[Ii+111]="F"+Ii;for(var Ii=65;Ii<=90;Ii++)Sh[Ii]=String.fromCharCode(Ii+32),Ty[Ii]=String.fromCharCode(Ii);for(var eA in Sh)Ty.hasOwnProperty(eA)||(Ty[eA]=Sh[eA]);function j9e(t){var e=D9e&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||M9e&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Ty:Sh)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Ay(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function I4(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function f2(t,e){if(!e.anchorNode)return!1;try{return I4(t,e.anchorNode)}catch{return!1}}function Py(t){return t.nodeType==3?Sf(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function _1(t,e,n,r){return n?t9(t,e,n,r,-1)||t9(t,e,n,r,1):!1}function wf(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function GS(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function t9(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:rc(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=wf(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?rc(t):0}else return!1}}function rc(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Wk(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function F9e(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function ete(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function B9e(t,e,n,r,i,s,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,h=!1;u&&!h;)if(u.nodeType==1){let d,f=u==l.body,m=1,g=1;if(f)d=F9e(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(h=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let v=u.getBoundingClientRect();({scaleX:m,scaleY:g}=ete(u,v)),d={left:v.left,right:v.left+u.clientWidth*m,top:v.top,bottom:v.top+u.clientHeight*g}}let b=0,y=0;if(i=="nearest")e.top<d.top?(y=-(d.top-e.top+o),n>0&&e.bottom>d.bottom+y&&(y=e.bottom-d.bottom+y+o)):e.bottom>d.bottom&&(y=e.bottom-d.bottom+o,n<0&&e.top-y<d.top&&(y=-(d.top+y-e.top+o)));else{let v=e.bottom-e.top,x=d.bottom-d.top;y=(i=="center"&&v<=x?e.top+v/2-x/2:i=="start"||i=="center"&&n<0?e.top-o:e.bottom-x+o)-d.top}if(r=="nearest"?e.left<d.left?(b=-(d.left-e.left+s),n>0&&e.right>d.right+b&&(b=e.right-d.right+b+s)):e.right>d.right&&(b=e.right-d.right+s,n<0&&e.left<d.left+b&&(b=-(d.left+b-e.left+s))):b=(r=="center"?e.left+(e.right-e.left)/2-(d.right-d.left)/2:r=="start"==a?e.left-s:e.right-(d.right-d.left)+s)-d.left,b||y)if(f)c.scrollBy(b,y);else{let v=0,x=0;if(y){let w=u.scrollTop;u.scrollTop+=y/g,x=(u.scrollTop-w)*g}if(b){let w=u.scrollLeft;u.scrollLeft+=b/m,v=(u.scrollLeft-w)*m}e={left:e.left-v,top:e.top-x,right:e.right-v,bottom:e.bottom-x},v&&Math.abs(v-b)<1&&(r="nearest"),x&&Math.abs(x-y)<1&&(i="nearest")}if(f)break;u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function U9e(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class $9e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?rc(n):0),r,Math.min(e.focusOffset,r?rc(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Fp=null;function tte(t){if(t.setActive)return t.setActive();if(Fp)return t.focus(Fp);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Fp==null?{get preventScroll(){return Fp={preventScroll:!0},!0}}:void 0),!Fp){Fp=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let n9;function Sf(t,e,n=e){let r=n9||(n9=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function Im(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function H9e(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function nte(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function z9e(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,rc(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=rc(n))}else{if(n==t)return!0;r=wf(n),n=n.parentNode}}function rte(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function ite(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=rc(n)}else if(n.parentNode&&!GS(n))r=wf(n),n=n.parentNode;else return null}}function ste(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!GS(n))r=wf(n)+1,n=n.parentNode;else return null}}class Qi{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new Qi(e.parentNode,wf(e),n)}static after(e,n){return new Qi(e.parentNode,wf(e)+1,n)}}const dO=[];class er{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let a=er.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=o.dom&&(n.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=r9(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=r9(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=rc(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!er.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,c=r,u=r;l<this.children.length;l++){let h=this.children[l],d=c+h.length;if(c<e&&d>n)return h.domBoundsAround(e,n,c);if(d>=e&&i==-1&&(i=l,s=c),c>n&&h.dom.parentNode==this.dom){o=l,a=u;break}u=d,c=d+h.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=dO){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ote(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}er.prototype.breakAfter=0;function r9(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class ote{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function ate(t,e,n,r,i,s,o,a,l){let{children:c}=t,u=c.length?c[e]:null,h=s.length?s[s.length-1]:null,d=h?h.breakAfter:o;if(!(e==r&&u&&!o&&!d&&s.length<2&&u.merge(n,i,s.length?h:null,n==0,a,l))){if(r<c.length){let f=c[r];f&&(i<f.length||f.breakAfter&&h?.breakAfter)?(e==r&&(f=f.split(i),i=0),!d&&h&&f.merge(0,i,h,!0,0,l)?s[s.length-1]=f:((i||f.children.length&&!f.children[0].length)&&f.merge(0,i,null,!1,0,l),s.push(f))):f?.breakAfter&&(h?h.breakAfter=1:o=1),r++}for(u&&(u.breakAfter=o,n>0&&(!o&&s.length&&u.merge(n,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,a,0),e++));e<r&&s.length;)if(c[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&r<c.length&&!c[e-1].breakAfter&&c[r].merge(0,0,c[e-1],!1,a,l)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function lte(t,e,n,r,i,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:c,off:u}=o.findPos(e,-1),h=e-n;for(let d of r)h+=d.length;t.length+=h,ate(t,c,u,a,l,r,0,i,s)}let Ms=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},O4=typeof document<"u"?document:{documentElement:{style:{}}};const D4=/Edge\/(\d+)/.exec(Ms.userAgent),cte=/MSIE \d/.test(Ms.userAgent),M4=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ms.userAgent),Gk=!!(cte||M4||D4),i9=!Gk&&/gecko\/(\d+)/i.test(Ms.userAgent),tA=!Gk&&/Chrome\/(\d+)/.exec(Ms.userAgent),s9="webkitFontSmoothing"in O4.documentElement.style,ute=!Gk&&/Apple Computer/.test(Ms.vendor),o9=ute&&(/Mobile\/\w+/.test(Ms.userAgent)||Ms.maxTouchPoints>2);var Ct={mac:o9||/Mac/.test(Ms.platform),windows:/Win/.test(Ms.platform),linux:/Linux|X11/.test(Ms.platform),ie:Gk,ie_version:cte?O4.documentMode||6:M4?+M4[1]:D4?+D4[1]:0,gecko:i9,gecko_version:i9?+(/Firefox\/(\d+)/.exec(Ms.userAgent)||[0,0])[1]:0,chrome:!!tA,chrome_version:tA?+tA[1]:0,ios:o9,android:/Android\b/.test(Ms.userAgent),webkit:s9,safari:ute,webkit_version:s9?+(/\bAppleWebKit\/(\d+)/.exec(Ms.userAgent)||[0,0])[1]:0,tabSize:O4.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const V9e=256;class Ha extends er{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof Ha)||this.length-(n-e)+r.length>V9e||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Ha(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Qi(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return W9e(this.dom,e,n)}}class nu extends er{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(nte(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,o){return r&&(!(r instanceof nu&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(lte(this,e,n,r?r.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let a of this.children){let l=r+a.length;l>e&&n.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new nu(this.mark,n,o)}domAtPos(e){return hte(this,e)}coordsAt(e,n){return fte(this,e,n)}}function W9e(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&n<0||e==r&&n>=0?Ct.chrome||Ct.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):n<0?i--:s<r&&s++;let a=Sf(t,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return Ct.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?Wk(l,o<0):l||null}class jd extends er{static create(e,n,r){return new jd(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=jd.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,o){return r&&(!(r instanceof jd)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof jd&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Rn.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):Rn.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Qi.before(this.dom):Qi.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return Wk(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class pg extends er{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof pg&&e.side==this.side}split(){return new pg(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Qi.before(this.dom):Qi.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Rn.empty}get isHidden(){return!0}}Ha.prototype.children=jd.prototype.children=pg.prototype.children=dO;function hte(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new Qi(n,0)}function dte(t,e,n){let r,{children:i}=t;n>0&&e instanceof nu&&i.length&&(r=i[i.length-1])instanceof nu&&r.mark.eq(e.mark)?dte(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function fte(t,e,n){let r=null,i=-1,s=null,o=-1;function a(c,u){for(let h=0,d=0;h<c.children.length&&d<=u;h++){let f=c.children[h],m=d+f.length;m>=u&&(f.children.length?a(f,u-d):(!s||s.isHidden&&n>0)&&(m>u||d==m&&f.getSide()>0)?(s=f,o=u-d):(d<u||d==m&&f.getSide()<0&&!f.isHidden)&&(r=f,i=u-d)),d=m}}a(t,e);let l=(n<0?r:s)||r||s;return l?l.coordsAt(Math.max(0,l==r?i:o),n):G9e(t)}function G9e(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Py(e);return n[n.length-1]||null}function j4(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const a9=Object.create(null);function qS(t,e,n){if(t==e)return!0;t||(t=a9),e||(e=a9);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function F4(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function q9e(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class Jg{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var bs=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(bs||(bs={}));class Cn extends xf{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Ov(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Eh(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=pte(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(o?n?2e8:1:-6e8)+1}return new Eh(e,r,i,n,e.widget||null,!0)}static line(e){return new Dv(e)}static set(e,n=!1){return Nn.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Cn.none=Nn.empty;class Ov extends Cn{constructor(e){let{start:n,end:r}=pte(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof Ov&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&qS(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Ov.prototype.point=!1;class Dv extends Cn{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Dv&&this.spec.class==e.spec.class&&qS(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Dv.prototype.mapMode=Ji.TrackBefore;Dv.prototype.point=!0;class Eh extends Cn{constructor(e,n,r,i,s,o){super(n,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?n<=0?Ji.TrackBefore:Ji.TrackAfter:Ji.TrackDel}get type(){return this.startSide!=this.endSide?bs.WidgetRange:this.startSide<=0?bs.WidgetBefore:bs.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Eh&&K9e(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Eh.prototype.point=!0;function pte(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function K9e(t,e){return t==e||!!(t&&e&&t.compare(e))}function p2(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class Xr extends er{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,o){if(r){if(!(r instanceof Xr))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),lte(this,e,n,r?r.children.slice():[],s,o),!0}split(e){let n=new Xr;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){qS(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){dte(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=j4(n,this.attrs||{})),r&&(this.attrs=j4({class:r},this.attrs||{}))}domAtPos(e){return hte(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(nte(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(F4(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&er.get(i)instanceof nu;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=er.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!Ct.ios||!this.children.some(s=>s instanceof Ha))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof Ha)||/[^ -~]/.test(r.text))return null;let i=Py(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=fte(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return e instanceof Xr&&this.children.length==0&&e.children.length==0&&qS(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=n){if(s instanceof Xr)return s;if(o>n)break}i=o+s.breakAfter}return null}}class Vc extends er{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,o){return r&&(!(r instanceof Vc)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Qi.before(this.dom):Qi.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new Vc(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return dO}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Rn.empty}domBoundsAround(){return null}become(e){return e instanceof Vc&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof B4?null:Wk(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class B4 extends Jg{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class w1{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Vc&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Xr),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(cw(new pg(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Vc)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(cw(new Ha(this.text.slice(this.textOff,this.textOff+i)),n),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof Eh){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(r instanceof Eh)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Vc(r.widget||mg.block,a,r));else{let l=jd.create(r.widget||mg.inline,a,a?0:r.startSide),c=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<n||r.startSide>0),u=!l.isEditable&&(e<n||s>i.length||r.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(h.append(cw(new pg(1),i),s),s=i.length+Math.max(0,s-i.length)),h.append(cw(l,i),s),this.atCursorPos=u,this.pendingBuffer=u?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let o=new w1(e,n,r,s);return o.openEnd=Nn.spans(i,n,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function cw(t,e){for(let n of e)t=new nu(n,[t],t.length);return t}class mg extends Jg{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}mg.inline=new mg("span");mg.block=new mg("div");var yr=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(yr||(yr={}));const Ef=yr.LTR,fO=yr.RTL;function mte(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const Y9e=mte("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),X9e=mte("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),U4=Object.create(null),hl=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);U4[e]=n,U4[n]=-e}function gte(t){return t<=247?Y9e[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?X9e[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const Z9e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class th{get dir(){return this.level%2?fO:Ef}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function bte(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!bte(r.inner,i.inner))return!1}return!0}const Jn=[];function J9e(t,e,n,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,a=s<r.length?r[s].from:n,l=s?256:i;for(let c=o,u=l,h=l;c<a;c++){let d=gte(t.charCodeAt(c));d==512?d=u:d==8&&h==4&&(d=16),Jn[c]=d==4?2:d,d&7&&(h=d),u=d}for(let c=o,u=l,h=l;c<a;c++){let d=Jn[c];if(d==128)c<a-1&&u==Jn[c+1]&&u&24?d=Jn[c]=u:Jn[c]=256;else if(d==64){let f=c+1;for(;f<a&&Jn[f]==64;)f++;let m=c&&u==8||f<n&&Jn[f]==8?h==1?1:8:256;for(let g=c;g<f;g++)Jn[g]=m;c=f-1}else d==8&&h==1&&(Jn[c]=1);u=d,d&7&&(h=d)}}}function Q9e(t,e,n,r,i){let s=i==1?2:1;for(let o=0,a=0,l=0;o<=r.length;o++){let c=o?r[o-1].to:e,u=o<r.length?r[o].from:n;for(let h=c,d,f,m;h<u;h++)if(f=U4[d=t.charCodeAt(h)])if(f<0){for(let g=a-3;g>=0;g-=3)if(hl[g+1]==-f){let b=hl[g+2],y=b&2?i:b&4?b&1?s:i:0;y&&(Jn[h]=Jn[hl[g]]=y),a=g;break}}else{if(hl.length==189)break;hl[a++]=h,hl[a++]=d,hl[a++]=l}else if((m=Jn[h])==2||m==1){let g=m==i;l=g?0:1;for(let b=a-3;b>=0;b-=3){let y=hl[b+2];if(y&2)break;if(g)hl[b+2]|=2;else{if(y&4)break;hl[b+2]|=4}}}}}function eUe(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let o=i?n[i-1].to:t,a=i<n.length?n[i].from:e;for(let l=o;l<a;){let c=Jn[l];if(c==256){let u=l+1;for(;;)if(u==a){if(i==n.length)break;u=n[i++].to,a=i<n.length?n[i].from:e}else if(Jn[u]==256)u++;else break;let h=s==1,d=(u<e?Jn[u]:r)==1,f=h==d?h?1:2:r;for(let m=u,g=i,b=g?n[g-1].to:t;m>l;)m==b&&(m=n[--g].from,b=g?n[g-1].to:t),Jn[--m]=f;l=u}else s=c,l++}}}function $4(t,e,n,r,i,s,o){let a=r%2?2:1;if(r%2==i%2)for(let l=e,c=0;l<n;){let u=!0,h=!1;if(c==s.length||l<s[c].from){let g=Jn[l];g!=a&&(u=!1,h=g==16)}let d=!u&&a==1?[]:null,f=u?r:r+1,m=l;e:for(;;)if(c<s.length&&m==s[c].from){if(h)break e;let g=s[c];if(!u)for(let b=g.to,y=c+1;;){if(b==n)break e;if(y<s.length&&s[y].from==b)b=s[y++].to;else{if(Jn[b]==a)break e;break}}if(c++,d)d.push(g);else{g.from>l&&o.push(new th(l,g.from,f));let b=g.direction==Ef!=!(f%2);H4(t,b?r+1:r,i,g.inner,g.from,g.to,o),l=g.to}m=g.to}else{if(m==n||(u?Jn[m]!=a:Jn[m]==a))break;m++}d?$4(t,l,m,r+1,i,d,o):l<m&&o.push(new th(l,m,f)),l=m}else for(let l=n,c=s.length;l>e;){let u=!0,h=!1;if(!c||l>s[c-1].to){let g=Jn[l-1];g!=a&&(u=!1,h=g==16)}let d=!u&&a==1?[]:null,f=u?r:r+1,m=l;e:for(;;)if(c&&m==s[c-1].to){if(h)break e;let g=s[--c];if(!u)for(let b=g.from,y=c;;){if(b==e)break e;if(y&&s[y-1].to==b)b=s[--y].from;else{if(Jn[b-1]==a)break e;break}}if(d)d.push(g);else{g.to<l&&o.push(new th(g.to,l,f));let b=g.direction==Ef!=!(f%2);H4(t,b?r+1:r,i,g.inner,g.from,g.to,o),l=g.from}m=g.from}else{if(m==e||(u?Jn[m-1]!=a:Jn[m-1]==a))break;m--}d?$4(t,m,l,r+1,i,d,o):m<l&&o.push(new th(m,l,f)),l=m}}function H4(t,e,n,r,i,s,o){let a=e%2?2:1;J9e(t,i,s,r,a),Q9e(t,i,s,r,a),eUe(i,s,r,a),$4(t,i,s,e,n,r,o)}function tUe(t,e,n){if(!t)return[new th(0,0,e==fO?1:0)];if(e==Ef&&!n.length&&!Z9e.test(t))return yte(t.length);if(n.length)for(;t.length>Jn.length;)Jn[Jn.length]=256;let r=[],i=e==Ef?0:1;return H4(t,i,i,n,0,t.length,r),r}function yte(t){return[new th(0,t,0)]}let vte="";function nUe(t,e,n,r,i){var s;let o=r.head-t.from,a=th.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),l=e[a],c=l.side(i,n);if(o==c){let d=a+=i?1:-1;if(d<0||d>=e.length)return null;l=e[a=d],o=l.side(!i,n),c=l.side(i,n)}let u=Oi(t.text,o,l.forward(i,n));(u<l.from||u>l.to)&&(u=c),vte=t.text.slice(Math.min(o,u),Math.max(o,u));let h=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return h&&u==c&&h.level+(i?0:1)<l.level?st.cursor(h.side(!i,n)+t.from,h.forward(i,n)?1:-1,h.level):st.cursor(u+t.from,l.forward(i,n)?-1:1,l.level)}function rUe(t,e,n){for(let r=e;r<n;r++){let i=gte(t.charCodeAt(r));if(i==1)return Ef;if(i==2||i==4)return fO}return Ef}const xte=Rt.define(),_te=Rt.define(),wte=Rt.define(),Ste=Rt.define(),z4=Rt.define(),Ete=Rt.define(),kte=Rt.define(),pO=Rt.define(),mO=Rt.define(),Cte=Rt.define({combine:t=>t.some(e=>e)}),Tte=Rt.define({combine:t=>t.some(e=>e)}),Ate=Rt.define();class Om{constructor(e,n="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new Om(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Om(st.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const uw=fn.define({map:(t,e)=>t.map(e)}),Pte=fn.define();function mo(t,e,n){let r=t.facet(Ste);r.length?r[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const Oc=Rt.define({combine:t=>t.length?t[0]:!0});let iUe=0;const Fb=Rt.define();class Mi{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.extension=s(this)}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=n||{};return new Mi(iUe++,e,r,i,a=>{let l=[Fb.of(a)];return o&&l.push(Ny.of(c=>{let u=c.plugin(a);return u?o(u):Cn.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return Mi.define(r=>new e(r),n)}}class nA{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(mo(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){mo(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){mo(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Nte=Rt.define(),qk=Rt.define(),Ny=Rt.define(),Lte=Rt.define(),gO=Rt.define(),Rte=Rt.define();function l9(t,e){let n=t.state.facet(Rte);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return Nn.spans(r,e.from,e.to,{point(){},span(s,o,a,l){let c=s-e.from,u=o-e.from,h=i;for(let d=a.length-1;d>=0;d--,l--){let f=a[d].spec.bidiIsolate,m;if(f==null&&(f=rUe(e.text,c,u)),l>0&&h.length&&(m=h[h.length-1]).to==c&&m.direction==f)m.to=u,h=m.inner;else{let g={from:c,to:u,direction:f,inner:[]};h.push(g),h=g.inner}}}}),i}const Ite=Rt.define();function bO(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(Ite)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:n,top:r,bottom:i}}const Bb=Rt.define();class ea{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new ea(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],c=o-a,u=l?l.fromB:1e9;for(;s<n.length&&n[s]<u;){let h=n[s],d=n[s+1],f=Math.max(a,h),m=Math.min(u,d);if(f<=m&&new ea(f+c,m+c,f,m).addToSet(r),d>u)break;s+=2}if(!l)return r;new ea(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class KS{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=ri.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new ea(s,o,a,l))),this.changedRanges=i}static create(e,n,r){return new KS(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class c9 extends er{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Cn.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Xr],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ea(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!hUe(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?oUe(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;r=new ea(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Ct.ie||Ct.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=cUe(o,a,e.changes);return r=ea.extendWithRanges(r,l),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Ct.chrome||Ct.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Vc&&o.widget instanceof B4&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:h}=a,d,f,m,g;if(r&&r.range.fromB<h&&r.range.toB>u){let w=w1.build(this.view.state.doc,u,r.range.fromB,this.decorations,this.dynamicDecorationMap),S=w1.build(this.view.state.doc,r.range.toB,h,this.decorations,this.dynamicDecorationMap);f=w.breakAtStart,m=w.openStart,g=S.openEnd;let E=this.compositionView(r);S.breakAtStart?E.breakAfter=1:S.content.length&&E.merge(E.length,E.length,S.content[0],!1,S.openStart,0)&&(E.breakAfter=S.content[0].breakAfter,S.content.shift()),w.content.length&&E.merge(0,0,w.content[w.content.length-1],!0,0,w.openEnd)&&w.content.pop(),d=w.content.concat(E).concat(S.content)}else({content:d,breakAtStart:f,openStart:m,openEnd:g}=w1.build(this.view.state.doc,u,h,this.decorations,this.dynamicDecorationMap));let{i:b,off:y}=s.findPos(c,1),{i:v,off:x}=s.findPos(l,-1);ate(this,v,x,b,y,d,f,m,g)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(Pte)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new Ha(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new nu(i,[n],n.length);let r=new Xr;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=er.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(Oc)||this.dom.tabIndex>-1)&&f2(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(Ct.gecko&&a.empty&&!this.hasComposition&&sUe(l)){let h=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(h,l.node.childNodes[l.offset]||null)),l=c=new Qi(h,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!_1(l.node,l.offset,u.anchorNode,u.anchorOffset)||!_1(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{Ct.android&&Ct.chrome&&this.dom.contains(u.focusNode)&&uUe(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=Ay(this.view.root);if(h)if(a.empty){if(Ct.gecko){let d=aUe(l.node,l.offset);if(d&&d!=3){let f=(d==1?ite:ste)(l.node,l.offset);f&&(l=new Qi(f.node,f.offset))}}h.collapse(l.node,l.offset),a.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=a.bidiLevel)}else if(h.extend){h.collapse(l.node,l.offset);try{h.extend(c.node,c.offset)}catch{}}else{let d=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),d.setEnd(c.node,c.offset),d.setStart(l.node,l.offset),h.removeAllRanges(),h.addRange(d)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new Qi(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new Qi(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&_1(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=Ay(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=Xr.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);r.collapse(u.node,u.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=er.get(n.childNodes[i]);s instanceof Xr&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=er.get(n.childNodes[i]);s instanceof Xr&&(r=s.domAtPos(s.length))}return r?new Qi(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=er.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof Xr)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,c=l-a.length;if(l<e)break;if(c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!r||a instanceof Xr&&!(r instanceof Xr&&n>=0)))r=a,i=c;else if(r&&c==e&&l==e&&a instanceof Vc&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(r=null)}s=c}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof Xr))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(r,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}r=l}if(!(i instanceof Ha))return null;let s=Oi(i.text,r);if(s==r)return null;let o=Sf(i.dom,r,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==yr.LTR;for(let c=0,u=0;u<this.children.length;u++){let h=this.children[u],d=c+h.length;if(d>i)break;if(c>=r){let f=h.dom.getBoundingClientRect();if(n.push(f.height),o){let m=h.dom.lastChild,g=m?Py(m):[];if(g.length){let b=g[g.length-1],y=l?b.right-f.left:f.right-b.left;y>a&&(a=y,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=d)}}}c=d+h.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?yr.RTL:yr.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Xr){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Py(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new ote(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(Cn.replace({widget:new B4(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return Cn.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Ny).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(Lte).map((s,o)=>{let a=typeof s=="function";return a&&(r=!0),a?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(Nn.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(Ate))try{if(c(this.view,e.range,e))return!0}catch(u){mo(this.view.state,u,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=bO(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;B9e(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==yr.LTR)}}function sUe(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function Ote(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=ite(n.focusNode,n.focusOffset),i=ste(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let a=er.get(i.node);if(!a||a instanceof Ha&&a.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let l=er.get(r.node);!l||l instanceof Ha&&l.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function oUe(t,e,n){let r=Ote(t,n);if(!r)return null;let{node:i,from:s,to:o}=r,a=i.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(r.from,r.to)!=a)return null;let l=e.invertedDesc,c=new ea(l.mapPos(s),l.mapPos(o),s,o),u=[];for(let h=i.parentNode;;h=h.parentNode){let d=er.get(h);if(d instanceof nu)u.push({node:h,deco:d.mark});else{if(d instanceof Xr||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:c,text:i,marks:u,line:h};if(h!=t.contentDOM)u.push({node:h,deco:new Ov({inclusive:!0,attributes:q9e(h),tagName:h.tagName.toLowerCase()})});else return null}}}function aUe(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let lUe=class{constructor(){this.changes=[]}compareRange(e,n){p2(e,n,this.changes)}comparePoint(e,n){p2(e,n,this.changes)}boundChange(e){p2(e,e,this.changes)}};function cUe(t,e,n){let r=new lUe;return Nn.compare(t,e,n,r),r.changes}function uUe(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function hUe(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function dUe(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return st.cursor(e);s==0?n=1:s==i.length&&(n=-1);let o=s,a=s;n<0?o=Oi(i.text,s,!1):a=Oi(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let c=Oi(i.text,o,!1);if(r(i.text.slice(c,o))!=l)break;o=c}for(;a<i.length;){let c=Oi(i.text,a);if(r(i.text.slice(a,c))!=l)break;a=c}return st.range(o+i.from,a+i.from)}function fUe(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function pUe(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function rA(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function u9(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function h9(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function V4(t,e,n){let r,i,s,o,a=!1,l,c,u,h;for(let m=t.firstChild;m;m=m.nextSibling){let g=Py(m);for(let b=0;b<g.length;b++){let y=g[b];i&&rA(i,y)&&(y=u9(h9(y,i.bottom),i.top));let v=fUe(e,y),x=pUe(n,y);if(v==0&&x==0)return m.nodeType==3?d9(m,e,n):V4(m,e,n);if(!r||o>x||o==x&&s>v){r=m,i=y,s=v,o=x;let w=x?n<y.top?-1:1:v?e<y.left?-1:1:0;a=!w||(w>0?b<g.length-1:b>0)}v==0?n>y.bottom&&(!u||u.bottom<y.bottom)?(l=m,u=y):n<y.top&&(!h||h.top>y.top)&&(c=m,h=y):u&&rA(u,y)?u=h9(u,y.bottom):h&&rA(h,y)&&(h=u9(h,y.top))}}if(u&&u.bottom>=n?(r=l,i=u):h&&h.top<=n&&(r=c,i=h),!r)return{node:t,offset:0};let d=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return d9(r,d,n);if(a&&r.contentEditable!="false")return V4(r,d,n);let f=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:f}}function d9(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let l=Sf(t,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let h=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&h<s){let d=e>=(u.left+u.right)/2,f=d;if((Ct.chrome||Ct.gecko)&&Sf(t,a).getBoundingClientRect().left==u.right&&(f=!d),h<=0)return{node:t,offset:a+(f?1:0)};i=a+(f?1:0),s=h}}}return{node:t,offset:i>-1?i:o>0?t.nodeValue.length:0}}function Dte(t,e,n,r=-1){var i,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,{x:u,y:h}=e,d=h-a;if(d<0)return 0;if(d>c)return t.state.doc.length;for(let w=t.viewState.heightOracle.textHeight/2,S=!1;l=t.elementAtHeight(d),l.type!=bs.Text;)for(;d=r>0?l.bottom+w:l.top-w,!(d>=0&&d<=c);){if(S)return n?null:0;S=!0,r=-r}h=a+d;let f=l.from;if(f<t.viewport.from)return t.viewport.from==0?0:n?null:f9(t,o,l,u,h);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:f9(t,o,l,u,h);let m=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:m,b=g.elementFromPoint(u,h);b&&!t.contentDOM.contains(b)&&(b=null),b||(u=Math.max(o.left+1,Math.min(o.right-1,u)),b=g.elementFromPoint(u,h),b&&!t.contentDOM.contains(b)&&(b=null));let y,v=-1;if(b&&((i=t.docView.nearest(b))===null||i===void 0?void 0:i.isEditable)!=!1){if(m.caretPositionFromPoint){let w=m.caretPositionFromPoint(u,h);w&&({offsetNode:y,offset:v}=w)}else if(m.caretRangeFromPoint){let w=m.caretRangeFromPoint(u,h);w&&({startContainer:y,startOffset:v}=w,(!t.contentDOM.contains(y)||Ct.safari&&mUe(y,v,u)||Ct.chrome&&gUe(y,v,u))&&(y=void 0))}y&&(v=Math.min(rc(y),v))}if(!y||!t.docView.dom.contains(y)){let w=Xr.find(t.docView,f);if(!w)return d>l.top+l.height/2?l.to:l.from;({node:y,offset:v}=V4(w.dom,u,h))}let x=t.docView.nearest(y);if(!x)return null;if(x.isWidget&&((s=x.dom)===null||s===void 0?void 0:s.nodeType)==1){let w=x.dom.getBoundingClientRect();return e.y<w.top||e.y<=w.bottom&&e.x<=(w.left+w.right)/2?x.posAtStart:x.posAtEnd}else return x.localPosFromDOM(y,v)+x.posAtStart}function f9(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((i-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+I9e(o,s,t.state.tabSize)}function mUe(t,e,n){let r;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(let i=t.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return Sf(t,r-1,r).getBoundingClientRect().left>n}function gUe(t,e,n){if(e!=0)return!1;for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():Sf(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function W4(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let r of n.type)if(r.to>e||r.to==e&&(r.to==n.to||r.type==bs.Text))return r}return n}function bUe(t,e,n,r){let i=W4(t,e.head),s=!r||i.type!=bs.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(i.from),l=t.posAtCoords({x:n==(a==yr.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return st.cursor(l,n?-1:1)}return st.cursor(n?i.to:i.from,n?-1:1)}function p9(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),o=t.textDirectionAt(i.from);for(let a=e,l=null;;){let c=nUe(i,s,o,a,n),u=vte;if(!c){if(i.number==(n?t.state.doc.lines:1))return a;u=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),c=t.visualLineSide(i,!n)}if(l){if(!l(u))return a}else{if(!r)return c;l=r(u)}a=c}}function yUe(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let o=r(s);return i==Qr.Space&&(i=o),i==o}}function vUe(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return st.cursor(i,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(i,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let f=t.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-f.from))),a=(s<0?f.top:f.bottom)+u}let h=l.left+o,d=r??t.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let m=a+(d+f)*s,g=Dte(t,{x:h,y:m},!1,s);if(m<l.top||m>l.bottom||(s<0?g<i:g>i)){let b=t.docView.coordsForChar(g),y=!b||m<b.top?-1:1;return st.cursor(g,y,void 0,o)}}}function m2(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=r||n||(e-s<o-e?-1:1);e=l<0?s:o,r=l}});if(!r)return e}}function iA(t,e,n){let r=m2(t.state.facet(gO).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:st.cursor(r,r<n.from?1:-1)}const Ub="";class xUe{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(Sn.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Ub}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==n)break;let a=er.get(i),l=er.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:GS(i))||GS(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let n=er.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(_Ue(e,r.node,r.offset)?n:0))}}function _Ue(t,e,n){for(;;){if(!e||n<rc(e))return!1;if(e==t)return!0;n=wf(e)+1,e=e.parentNode}}class m9{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class wUe{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let a=s||o?[]:kUe(e),l=new xUe(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=CUe(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!I4(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!I4(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((Ct.ios||Ct.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let h=Math.min(l,c),d=Math.max(l,c),f=u.from-h,m=u.to-d;(f==0||f==1||h==0)&&(m==0||m==-1||d==e.state.doc.length)&&(l=0,c=e.state.doc.length)}this.newSel=st.single(c,l)}}}function Mte(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,c=null;(s===8||Ct.android&&e.text.length<a-o)&&(l=i.to,c="end");let u=EUe(t.state.doc.sliceString(o,a,Ub),e.text,l-o,c);u&&(Ct.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Ub+Ub&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:Rn.of(e.text.slice(u.from,u.toB).split(Ub))})}else r&&(!t.hasFocus&&t.state.facet(Oc)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(Ct.mac||Ct.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=st.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:Rn.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:Ct.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=st.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Rn.of([" "])}),n)return yO(t,n,r,s);if(r&&!r.main.eq(i)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function yO(t,e,n,r=-1){if(Ct.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(Ct.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Im(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&Im(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&Im(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=SUe(t,e,n));return t.state.facet(Ete).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function SUe(t,e,n){let r,i=t.state,s=i.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",l=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=i.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),u,h=n&&Ote(t,n.main.head);if(h){let m=e.insert.length-(e.to-e.from);u={from:h.from,to:h.to-m}}else u=t.state.doc.lineAt(s.head);let d=s.to-e.to,f=s.to-s.from;r=i.changeByRange(m=>{if(m.from==s.from&&m.to==s.to)return{changes:a,range:l||m.map(a)};let g=m.to-d,b=g-c.length;if(m.to-m.from!=f||t.state.sliceDoc(b,g)!=c||m.to>=u.from&&m.from<=u.to)return{range:m};let y=i.changes({from:b,to:g,insert:e.insert}),v=m.to-s.to;return{changes:y,range:l?st.range(Math.max(0,l.anchor+v),Math.max(0,l.head+v)):m.map(y)}})}else r={changes:a,selection:l&&i.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function EUe(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function kUe(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new m9(n,r)),(i!=n||s!=r)&&e.push(new m9(i,s))),e}function CUe(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?st.single(n+e,r+e):null}class TUe{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ct.safari&&e.contentDOM.addEventListener("input",()=>null),Ct.gecko&&zUe(e.contentDOM.ownerDocument)}handleEvent(e){!DUe(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=AUe(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=r[s];a&&o!=!a.handlers.length&&(i.removeEventListener(s,this.handleEvent),a=null),a||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Fte.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Ct.android&&Ct.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return Ct.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=jte.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||PUe.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Im(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Ct.safari&&!Ct.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function g9(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){mo(n.state,i)}}}function AUe(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec;if(i&&i.domEventHandlers)for(let s in i.domEventHandlers){let o=i.domEventHandlers[s];o&&n(s).handlers.push(g9(r.value,o))}if(i&&i.domEventObservers)for(let s in i.domEventObservers){let o=i.domEventObservers[s];o&&n(s).observers.push(g9(r.value,o))}}for(let r in za)n(r).handlers.push(za[r]);for(let r in aa)n(r).observers.push(aa[r]);return e}const jte=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],PUe="dthko",Fte=[16,17,18,20,91,92,224,225],hw=6;function dw(t){return Math.max(0,t)*.7+8}function NUe(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class LUe{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=U9e(e.contentDOM),this.atoms=e.state.facet(gO).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Sn.allowMultipleSelections)&&RUe(e,n),this.dragging=OUe(e,n)&&$te(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&NUe(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=bO(this.view);e.clientX-l.left<=i+hw?n=-dw(i-e.clientX):e.clientX+l.right>=o-hw&&(n=dw(e.clientX-o)),e.clientY-l.top<=s+hw?r=-dw(s-e.clientY):e.clientY+l.bottom>=a-hw&&(r=dw(e.clientY-a)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=m2(this.atoms,i.from,0);o!=i.from&&(s=st.cursor(o,-1))}else{let o=m2(this.atoms,i.from,-1),a=m2(this.atoms,i.to,1);(o!=i.from||a!=i.to)&&(s=st.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?st.create(n,e.mainIndex):e}select(e){let{view:n}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function RUe(t,e){let n=t.state.facet(xte);return n.length?n[0](e):Ct.mac?e.metaKey:e.ctrlKey}function IUe(t,e){let n=t.state.facet(_te);return n.length?n[0](e):Ct.mac?!e.altKey:!e.ctrlKey}function OUe(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=Ay(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function DUe(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=er.get(n))&&r.ignoreEvent(e))return!1;return!0}const za=Object.create(null),aa=Object.create(null),Bte=Ct.ie&&Ct.ie_version<15||Ct.ios&&Ct.webkit_version<604;function MUe(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),Ute(t,n.value)},50)}function Kk(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function Ute(t,e){e=Kk(t.state,pO,e);let{state:n}=t,r,i=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(G4!=null&&n.selection.ranges.every(l=>l.empty)&&G4==s.toString()){let l=-1;r=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let h=n.toText((o?s.line(i++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:h},range:st.cursor(c.from+h.length)}})}else o?r=n.changeByRange(l=>{let c=s.line(i++);return{changes:{from:l.from,to:l.to,insert:c.text},range:st.cursor(l.from+c.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}aa.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};za.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);aa.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};aa.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};za.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(wte))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=BUe(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new LUe(t,e,n,r)),r&&t.observer.ignore(()=>{tte(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function b9(t,e,n,r){if(r==1)return st.cursor(e,n);if(r==2)return dUe(t.state,e,n);{let i=Xr.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,st.range(o,a)}}let y9=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function jUe(t,e,n,r){let i=Xr.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&y9(n,r,o))return-1;let a=i.coordsAt(s,1);return a&&y9(n,r,a)?1:o&&o.bottom>=r?-1:1}function v9(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:jUe(t,n,e.clientX,e.clientY)}}const FUe=Ct.ie&&Ct.ie_version<=11;let x9=null,_9=0,w9=0;function $te(t){if(!FUe)return t.detail;let e=x9,n=w9;return x9=t,w9=Date.now(),_9=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(_9+1)%3:1}function BUe(t,e){let n=v9(t,e),r=$te(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,o,a){let l=v9(t,s),c,u=b9(t,l.pos,l.bias,r);if(n.pos!=l.pos&&!o){let h=b9(t,n.pos,n.bias,r),d=Math.min(h.from,u.from),f=Math.max(h.to,u.to);u=d<u.from?st.range(d,f):st.range(f,d)}return o?i.replaceRange(i.main.extend(u.from,u.to)):a&&r==1&&i.ranges.length>1&&(c=UUe(i,l.pos))?c:a?i.addRange(u):st.create([u])}}}function UUe(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return st.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}za.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=n.to||o<=n.from)&&(n=st.range(s,o))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",Kk(t.state,mO,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};za.dragend=t=>(t.inputState.draggedContent=null,!1);function S9(t,e,n,r){if(n=Kk(t.state,pO,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=r&&s&&IUe(t,e)?{from:s.from,to:s.to}:null,a={from:i,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}za.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&S9(t,e,r.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return S9(t,e,r,!0),!0}return!1};za.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=Bte?null:e.clipboardData;return n?(Ute(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(MUe(t),!1)};function $Ue(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function HUe(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>i&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}r=!0}return{text:Kk(t,mO,e.join(t.lineBreak)),ranges:n,linewise:r}}let G4=null;za.copy=za.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=HUe(t.state);if(!n&&!i)return!1;G4=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=Bte?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):($Ue(t,n),!1)};const Hte=lu.define();function zte(t,e){let n=[];for(let r of t.facet(kte)){let i=r(t,e);i&&n.push(i)}return n?t.update({effects:n,annotations:Hte.of(!0)}):null}function Vte(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=zte(t.state,e);n?t.dispatch(n):t.update([])}},10)}aa.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),Vte(t)};aa.blur=t=>{t.observer.clearSelectionRange(),Vte(t)};aa.compositionstart=aa.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};aa.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Ct.chrome&&Ct.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};aa.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};za.beforeinput=(t,e)=>{var n,r;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),c=t.posAtDOM(a.endContainer,a.endOffset);return yO(t,{from:l,to:c,insert:t.state.toText(s)},null),!0}}let i;if(Ct.chrome&&Ct.android&&(i=jte.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Ct.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Ct.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>aa.compositionend(t,e),20),!1};const E9=new Set;function zUe(t){E9.has(t)||(E9.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const k9=["pre-wrap","normal","pre-line","break-spaces"];let gg=!1;function C9(){gg=!1}class VUe{constructor(e){this.lineWrapping=e,this.doc=Rn.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return k9.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,o){let a=k9.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class WUe{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Il{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?bs.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Eh?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Il(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var hr=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(hr||(hr={}));const g2=.001;class ys{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>g2&&(gg=!0),this.height=e)}replace(e,n,r){return ys.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:h}=i[a],d=s.lineAt(l,hr.ByPosNoHeight,r.setDoc(n),0,0),f=d.to>=c?d:s.lineAt(c,hr.ByPosNoHeight,r,0,0);for(h+=f.to-c,c=f.to;a>0&&d.from<=i[a-1].toA;)l=i[a-1].fromA,u=i[a-1].fromB,a--,l<d.from&&(d=s.lineAt(l,hr.ByPosNoHeight,r,0,0));u+=d.from-l,l=d.from;let m=vO.build(r.setDoc(o),e,u,h);s=YS(s,s.replace(l,c,m))}return s.updateHeight(r,0)}static empty(){return new co(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[n++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,r++),new GUe(ys.of(e.slice(0,n)),o,ys.of(e.slice(r)))}}function YS(t,e){return t==e?t:(t.constructor!=e.constructor&&(gg=!0),e)}ys.prototype.size=1;class Wte extends ys{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new Il(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class co extends Wte{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new Il(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof co||i instanceof Ri&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Ri?i=new co(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):ys.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ri extends ys{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,n,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,i);if(n.lineWrapping){let c=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),u=n.doc.lineAt(c),h=a+u.length*l,d=Math.max(r,e-h/2);return new Il(u.from,u.length,d,h,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:u,length:h}=n.doc.line(s+c);return new Il(u,h,r+a*c,a,0)}}lineAt(e,n,r,i,s){if(n==hr.ByHeight)return this.blockAt(e,r,i,s);if(n==hr.ByPosNoHeight){let{from:f,to:m}=r.doc.lineAt(e);return new Il(f,m-f,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s),c=r.doc.lineAt(e),u=a+c.length*l,h=c.number-o,d=i+a*h+l*(c.from-s-h);return new Il(c.from,c.length,Math.max(i,Math.min(d,i+this.height-u)),u,0)}forEachLine(e,n,r,i,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(r,s);for(let u=e,h=i;u<=n;){let d=r.doc.lineAt(u);if(u==e){let m=d.number-a;h+=l*m+c*(e-s-m)}let f=l+c*d.length;o(new Il(d.from,d.length,h,f,0)),h+=f,u=d.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof Ri?r[r.length-1]=new Ri(s.length+i):r.push(null,new Ri(i-1))}if(e>0){let s=r[0];s instanceof Ri?r[0]=new Ri(e+s.length):r.unshift(new Ri(e-1),null)}return ys.of(r)}decomposeLeft(e,n){n.push(new Ri(e-1),null)}decomposeRight(e,n){n.push(null,new Ri(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let o=[],a=Math.max(n,i.from),l=-1;for(i.from>n&&o.push(new Ri(i.from-n-1).updateHeight(e,n));a<=s&&i.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let h=i.heights[i.index++];l==-1?l=h:Math.abs(h-l)>=g2&&(l=-2);let d=new co(u,h);d.outdated=!1,o.push(d),a+=u+1}a<=s&&o.push(null,new Ri(s-a).updateHeight(e,a));let c=ys.of(o);return(l<0||Math.abs(c.height-this.height)>=g2||Math.abs(l-this.heightMetrics(e,n).perLine)>=g2)&&(gg=!0),YS(this,c)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class GUe extends ys{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=n==hr.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=n==hr.ByPosNoHeight?hr.ByPosNoHeight:hr.ByPos;return l?c.join(this.right.lineAt(a,u,r,o,a)):this.left.lineAt(a,u,r,i,s).join(c)}forEachLine(e,n,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,r,i,s,o),n>=l&&this.right.forEachLine(e,n,r,a,l,o);else{let c=this.lineAt(l,hr.ByPos,r,i,s);e<c.from&&this.left.forEachLine(e,c.from-1,r,i,s,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,r,a,l,o)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&T9(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),T9(s,a)}return ys.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?ys.of(this.break?[e,null,n]:[e,n]):(this.left=YS(this.left,e),this.right=YS(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return i&&i.from<=n+s.length&&i.more?l=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function T9(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Ri&&(r=t[e+1])instanceof Ri&&t.splice(e-1,3,new Ri(n.length+1+r.length))}const qUe=5;class vO{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof co?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new co(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=n-e;r.block?this.addBlock(new Wte(o,i,r)):(o||s||i>=qUe)&&this.addLineDeco(i,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new co(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new Ri(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof co)return e;let n=new co(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof co)&&!this.isCovered?this.nodes.push(new co(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof co&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new vO(r,e);return Nn.spans(n,r,i,s,0),s.finish(r)}}function KUe(t,e,n){let r=new YUe;return Nn.compare(t,e,n,r,0),r.changes}class YUe{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&p2(e,n,this.changes,5)}}function XUe(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),o=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=r.body;)if(c.nodeType==1){let u=c,h=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&h.overflow!="visible"){let d=u.getBoundingClientRect();s=Math.max(s,d.left),o=Math.min(o,d.right),a=Math.max(a,d.top),l=Math.min(c==t.parentNode?i.innerHeight:l,d.bottom)}c=h.position=="absolute"||h.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function ZUe(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function JUe(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class sA{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return Cn.replace({widget:new QUe(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class QUe extends Jg{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class A9{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=P9,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=yr.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(qk).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new VUe(n),this.stateDeco=e.facet(Ny).filter(r=>typeof r!="function"),this.heightMap=ys.empty().applyChanges(this.stateDeco,Rn.empty,this.heightOracle.setDoc(e.doc),[new ea(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Cn.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new fw(s,o))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?P9:new xO(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push($b(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Ny).filter(u=>typeof u!="function");let i=e.changedRanges,s=ea.extendWithRanges(i,KUe(r,this.stateDeco,e?e.changes:ri.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);C9(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||gg)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Tte)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?yr.RTL:yr.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:w,scaleY:S}=ete(n,a);(w>.005&&Math.abs(this.scaleX-w)>.005||S>.005&&Math.abs(this.scaleY-S)>.005)&&(this.scaleX=w,this.scaleY=S,c|=16,o=l=!0)}let h=(parseInt(r.paddingTop)||0)*this.scaleY,d=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=d)&&(this.paddingTop=h,this.paddingBottom=d,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let f=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=f&&(this.scrollAnchorHeight=-1,this.scrollTop=f),this.scrolledToBottom=rte(e.scrollDOM);let m=(this.printing?JUe:XUe)(n,this.paddingTop),g=m.top-this.pixelViewport.top,b=m.bottom-this.pixelViewport.bottom;this.pixelViewport=m;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(l=!0)),!this.inView&&!this.scrollTarget&&!ZUe(e.dom))return 0;let v=a.width;if((this.contentDOMWidth!=v||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let w=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(w)&&(o=!0),o||i.lineWrapping&&Math.abs(v-this.contentDOMWidth)>i.charWidth){let{lineHeight:S,charWidth:E,textHeight:k}=e.docView.measureTextSize();o=S>0&&i.refresh(s,S,E,k,v/E,w),o&&(e.docView.minWidth=0,c|=16)}g>0&&b>0?u=Math.max(g,b):g<0&&b<0&&(u=Math.min(g,b)),C9();for(let S of this.viewports){let E=S.from==this.viewport.from?w:e.docView.measureVisibleLineHeights(S);this.heightMap=(o?ys.empty().applyChanges(this.stateDeco,Rn.empty,this.heightOracle,[new ea(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new WUe(S.from,E))}gg&&(c|=2)}let x=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new fw(i.lineAt(o-r*1e3,hr.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,hr.ByHeight,s,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=i.lineAt(c,hr.ByPos,s,0,0),d;n.y=="center"?d=(h.top+h.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<l.from?d=h.top:d=h.bottom-u,l=new fw(i.lineAt(d-1e3/2,hr.ByHeight,s,0,0).from,i.lineAt(d+u+1e3/2,hr.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new fw(this.heightMap.lineAt(r,hr.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,hr.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,hr.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,hr.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new sA(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=yr.LTR&&!r)return[];let a=[],l=(u,h,d,f)=>{if(h-u<s)return;let m=this.state.selection.main,g=[m.from];m.empty||g.push(m.to);for(let y of g)if(y>u&&y<h){l(u,y-10,d,f),l(y+10,h,d,f);return}let b=t$e(e,y=>y.from>=d.from&&y.to<=d.to&&Math.abs(y.from-u)<s&&Math.abs(y.to-h)<s&&!g.some(v=>y.from<v&&y.to>v));if(!b){if(h<d.to&&n&&r&&n.visibleRanges.some(x=>x.from<=h&&x.to>=h)){let x=n.moveToLineBoundary(st.cursor(h),!1,!0).head;x>u&&(h=x)}let y=this.gapSize(d,u,h,f),v=r||y<2e6?y:2e6;b=new sA(u,h,y,v)}a.push(b)},c=u=>{if(u.length<o||u.type!=bs.Text)return;let h=e$e(u.from,u.to,this.stateDeco);if(h.total<o)return;let d=this.scrollTarget?this.scrollTarget.range.head:null,f,m;if(r){let g=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,b,y;if(d!=null){let v=mw(h,d),x=((this.visibleBottom-this.visibleTop)/2+g)/u.height;b=v-x,y=v+x}else b=(this.visibleTop-u.top-g)/u.height,y=(this.visibleBottom-u.top+g)/u.height;f=pw(h,b),m=pw(h,y)}else{let g=h.total*this.heightOracle.charWidth,b=i*this.heightOracle.charWidth,y=0;if(g>2e6)for(let E of e)E.from>=u.from&&E.from<u.to&&E.size!=E.displaySize&&E.from*this.heightOracle.charWidth+y<this.pixelViewport.left&&(y=E.size-E.displaySize);let v=this.pixelViewport.left+y,x=this.pixelViewport.right+y,w,S;if(d!=null){let E=mw(h,d),k=((x-v)/2+b)/g;w=E-k,S=E+k}else w=(v-b)/g,S=(x+b)/g;f=pw(h,w),m=pw(h,S)}f>u.from&&l(u.from,f,u,h),m<u.to&&l(m,u.to,u,h)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return a}gapSize(e,n,r,i){let s=mw(i,r)-mw(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){sA.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Cn.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];Nn.spans(n,this.viewport.from,this.viewport.to,{span(s,o){r.push({from:s,to:o})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let o=this.visibleRanges[s],a=r[s];(o.from!=a.from||o.to!=a.to)&&(i|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||$b(this.heightMap.lineAt(e,hr.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||$b(this.heightMap.lineAt(this.scaler.fromDOM(e),hr.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return $b(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class fw{constructor(e,n){this.from=e,this.to=n}}function e$e(t,e,n){let r=[],i=t,s=0;return Nn.spans(n,t,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function pw({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function mw(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function t$e(t,e){for(let n of t)if(e(n))return n}const P9={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class xO{constructor(e,n,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let c=n.lineAt(a,hr.ByPos,e,0,0).top,u=n.lineAt(l,hr.ByPos,e,0,0).bottom;return i+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof xO?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function $b(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new Il(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>$b(i,e)):t._content)}const gw=Rt.define({combine:t=>t.join(" ")}),q4=Rt.define({combine:t=>t.indexOf(!0)>-1}),K4=wh.newName(),Gte=wh.newName(),qte=wh.newName(),Kte={"&light":"."+Gte,"&dark":"."+qte};function Y4(t,e,n){return new wh(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const n$e=Y4("."+K4,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Kte),r$e={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},oA=Ct.ie&&Ct.ie_version<=11;class i$e{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new $9e,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(Ct.ie&&Ct.ie_version<=11||Ct.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(Ct.chrome&&Ct.chrome_version<126)&&(this.editContext=new o$e(e),e.state.facet(Oc)&&(e.contentDOM.editContext=this.editContext.editContext)),oA&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(Oc)?r.root.activeElement!=this.dom:!f2(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Ct.ie&&Ct.ie_version<=11||Ct.android&&Ct.chrome)&&!r.state.selection.main.empty&&i.focusNode&&_1(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Ay(e.root);if(!n)return!1;let r=Ct.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&s$e(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=f2(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&z9e(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,r$e),oA&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),oA&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Im(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),n==-1?{from:n,to:r}=o:(n=Math.min(o.from,n),r=Math.max(o.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&f2(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new wUe(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=Mte(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=N9(n,e.previousSibling||e.target.previousSibling,-1),i=N9(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Oc)!=e.state.facet(Oc)&&(e.view.contentDOM.editContext=e.state.facet(Oc)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function N9(t,e,n){for(;e;){let r=er.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function L9(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return _1(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function s$e(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return L9(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?L9(t,n):null}class o$e{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:o}=i,a=this.toEditorPos(r.updateRangeStart),l=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:a,drifted:!1});let c={from:a,to:l,insert:Rn.of(r.text.split(`
`))};if(c.from==this.from&&s<this.from?c.from=s:c.to==this.to&&s>this.to&&(c.to=s),c.from==c.to&&!c.insert.length){let u=st.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));u.main.eq(i)||e.dispatch({selection:u,userEvent:"select"});return}if((Ct.mac||Ct.android)&&c.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:a,to:l,insert:Rn.of([r.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let u=this.to-this.from+(c.to-c.from+c.insert.length);yO(e,c,st.single(this.toEditorPos(r.selectionStart,u),this.toEditorPos(r.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let o=this.toEditorPos(r.rangeStart),a=this.toEditorPos(r.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(s.rangeStart),c=this.toEditorPos(s.rangeEnd);if(l<c){let u=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;i.push(Cn.mark({attributes:{style:u}}).range(l,c))}}}e.dispatch({effects:Pte.of(Cn.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=Ay(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,c)=>{if(r)return;let u=c.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(c)){i=this.pendingContextChange=null,n+=u,this.to+=u;return}else i=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=u,this.to+=u;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+c.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),c.toString()),this.to+=u}n+=u}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Lt{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||H9e(e.parent)||document,this.viewState=new A9(e.state||Sn.create(e)),e.scrollTo&&e.scrollTo.is(uw)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Fb).map(i=>new nA(i));for(let i of this.plugins)i.update(this);this.observer=new i$e(this),this.inputState=new TUe(this),this.inputState.ensureHandlers(this.plugins),this.docView=new c9(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Jr?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let d of e){if(d.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=d.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(d=>d.annotation(Hte))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=zte(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(Sn.phrases)!=this.state.facet(Sn.phrases))return this.setState(s);i=KS.create(this,s,e),i.flags|=a;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let d of e){if(h&&(h=h.map(d.changes)),d.scrollIntoView){let{main:f}=d.state.selection;h=new Om(f.empty?f:st.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of d.effects)f.is(uw)&&(h=f.value.clip(this.state))}this.viewState.update(i,h),this.bidiCache=XS.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(Bb)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(d=>d.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(gw)!=i.state.facet(gw)&&(this.viewState.mustMeasureContent=!0),(n||r||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let d of this.state.facet(z4))try{d(i)}catch(f){mo(this.state,f,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!Mte(this,u)&&c.force&&Im(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new A9(e),this.plugins=e.facet(Fb).map(r=>new nA(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new c9(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Fb),r=e.state.facet(Fb);if(n!=r){let i=[];for(let s of r){let o=n.indexOf(s);if(o<0)i.push(new nA(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){mo(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(rte(r))s=-1,o=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(i);s=f.from,o=f.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(f=>{try{return f.read(this)}catch(m){return mo(this.state,m),R9}}),h=KS.create(this,this.state,[]),d=!1;h.flags|=l,n?n.flags|=l:n=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),d=this.docView.update(h),d&&this.docViewUpdate());for(let f=0;f<c.length;f++)if(u[f]!=R9)try{let m=c[f];m.write&&m.write(u[f],this)}catch(m){mo(this.state,m)}if(d&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let m=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(m>1||m<-1){i=i+m,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(z4))a(n)}get themeClasses(){return K4+" "+(this.state.facet(q4)?qte:Gte)+" "+this.state.facet(gw)}updateAttrs(){let e=I9(this,Nte,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Oc)?"true":"false",class:"cm-content",style:`${Ct.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),I9(this,qk,n);let r=this.observer.ignore(()=>{let i=F4(this.contentDOM,this.contentAttrs,n),s=F4(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(Lt.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Bb);let e=this.state.facet(Lt.cspNonce);wh.mount(this.root,this.styleModules.concat(n$e).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return iA(this,e,p9(this,e,n,r))}moveByGroup(e,n){return iA(this,e,p9(this,e,n,r=>yUe(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return st.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return bUe(this,e,n,r)}moveVertically(e,n,r){return iA(this,e,vUe(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),Dte(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[th.find(s,e-i.from,-1,n)];return Wk(r,o.dir==yr.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Cte)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>a$e)return yte(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||bte(s.isolates,r=l9(this,e))))return s.order;r||(r=l9(this,e));let i=tUe(e.text,n,r);return this.bidiCache.push(new XS(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ct.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{tte(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return uw.of(new Om(typeof e=="number"?st.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return uw.of(new Om(st.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Mi.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Mi.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=wh.newName(),i=[gw.of(r),Bb.of(Y4(`.${r}`,e))];return n&&n.dark&&i.push(q4.of(!0)),i}static baseTheme(e){return jh.lowest(Bb.of(Y4("."+K4,e,Kte)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&er.get(r)||er.get(e);return((n=i?.rootView)===null||n===void 0?void 0:n.view)||null}}Lt.styleModule=Bb;Lt.inputHandler=Ete;Lt.clipboardInputFilter=pO;Lt.clipboardOutputFilter=mO;Lt.scrollHandler=Ate;Lt.focusChangeEffect=kte;Lt.perLineTextDirection=Cte;Lt.exceptionSink=Ste;Lt.updateListener=z4;Lt.editable=Oc;Lt.mouseSelectionStyle=wte;Lt.dragMovesSelection=_te;Lt.clickAddsSelectionRange=xte;Lt.decorations=Ny;Lt.outerDecorations=Lte;Lt.atomicRanges=gO;Lt.bidiIsolatedRanges=Rte;Lt.scrollMargins=Ite;Lt.darkTheme=q4;Lt.cspNonce=Rt.define({combine:t=>t.length?t[0]:""});Lt.contentAttributes=qk;Lt.editorAttributes=Nte;Lt.lineWrapping=Lt.contentAttributes.of({class:"cm-lineWrapping"});Lt.announce=fn.define();const a$e=4096,R9={};class XS{constructor(e,n,r,i,s,o){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:yr.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!n.touchesRange(o.from,o.to)&&r.push(new XS(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function I9(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(t):s;o&&j4(o,n)}return n}const l$e=Ct.mac?"mac":Ct.windows?"win":Ct.linux?"linux":"key";function c$e(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function bw(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const u$e=jh.default(Lt.domEventHandlers({keydown(t,e){return Xte(Yte(e.state),t,e,"editor")}})),Yk=Rt.define({enables:u$e}),O9=new WeakMap;function Yte(t){let e=t.facet(Yk),n=O9.get(e);return n||O9.set(e,n=f$e(e.reduce((r,i)=>r.concat(i),[]))),n}function h$e(t,e,n){return Xte(Yte(t.state),e,t,n)}let qu=null;const d$e=4e3;function f$e(t,e=l$e){let n=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,u)=>{var h,d;let f=n[o]||(n[o]=Object.create(null)),m=a.split(/ (?!$)/).map(y=>c$e(y,e));for(let y=1;y<m.length;y++){let v=m.slice(0,y).join(" ");i(v,!0),f[v]||(f[v]={preventDefault:!0,stopPropagation:!1,run:[x=>{let w=qu={view:x,prefix:v,scope:o};return setTimeout(()=>{qu==w&&(qu=null)},d$e),!0}]})}let g=m.join(" ");i(g,!1);let b=f[g]||(f[g]={preventDefault:!1,stopPropagation:!1,run:((d=(h=f._any)===null||h===void 0?void 0:h.run)===null||d===void 0?void 0:d.slice())||[]});l&&b.run.push(l),c&&(b.preventDefault=!0),u&&(b.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=o;for(let d in u)u[d].run.push(f=>h(f,X4))}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let X4=null;function Xte(t,e,n,r){X4=e;let i=j9e(e),s=Pa(i,0),o=Ic(s)==i.length&&i!=" ",a="",l=!1,c=!1,u=!1;qu&&qu.view==n&&qu.scope==r&&(a=qu.prefix+" ",Fte.indexOf(e.keyCode)<0&&(c=!0,qu=null));let h=new Set,d=b=>{if(b){for(let y of b.run)if(!h.has(y)&&(h.add(y),y(n)))return b.stopPropagation&&(u=!0),!0;b.preventDefault&&(b.stopPropagation&&(u=!0),c=!0)}return!1},f=t[r],m,g;return f&&(d(f[a+bw(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ct.windows&&e.ctrlKey&&e.altKey)&&(m=Sh[e.keyCode])&&m!=i?(d(f[a+bw(m,e,!0)])||e.shiftKey&&(g=Ty[e.keyCode])!=i&&g!=m&&d(f[a+bw(g,e,!1)]))&&(l=!0):o&&e.shiftKey&&d(f[a+bw(i,e,!0)])&&(l=!0),!l&&d(f._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),X4=null,l}class Mv{constructor(e,n,r,i,s){this.className=e,this.left=n,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=Zte(e);return[new Mv(n,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return p$e(e,n,r)}}function Zte(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==yr.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function D9(t,e,n,r){let i=t.coordsAtPos(e,n*2);if(!i)return r;let s=t.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?r:{from:Math.max(r.from,Math.min(a,l)),to:Math.min(r.to,Math.max(a,l))}}function p$e(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),s=t.textDirection==yr.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=Zte(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),h=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),d=a.right-(u?parseInt(u.paddingRight):0),f=W4(t,r),m=W4(t,i),g=f.type==bs.Text?f:null,b=m.type==bs.Text?m:null;if(g&&(t.lineWrapping||f.widgetLineBreaks)&&(g=D9(t,r,1,g)),b&&(t.lineWrapping||m.widgetLineBreaks)&&(b=D9(t,i,-1,b)),g&&b&&g.from==b.from&&g.to==b.to)return v(x(n.from,n.to,g));{let S=g?x(n.from,null,g):w(f,!1),E=b?x(null,n.to,b):w(m,!0),k=[];return(g||f).to<(b||m).from-(g&&b?1:0)||f.widgetLineBreaks>1&&S.bottom+t.defaultLineHeight/2<E.top?k.push(y(h,S.bottom,d,E.top)):S.bottom<E.top&&t.elementAtHeight((S.bottom+E.top)/2).type==bs.Text&&(S.bottom=E.top=(S.bottom+E.top)/2),v(S).concat(k).concat(v(E))}function y(S,E,k,_){return new Mv(e,S-l.left,E-l.top,k-S,_-E)}function v({top:S,bottom:E,horizontal:k}){let _=[];for(let L=0;L<k.length;L+=2)_.push(y(k[L],S,k[L+1],E));return _}function x(S,E,k){let _=1e9,L=-1e9,R=[];function C(N,H,Q,X,J){let j=t.coordsAtPos(N,N==k.to?-2:2),F=t.coordsAtPos(Q,Q==k.from?2:-2);!j||!F||(_=Math.min(j.top,F.top,_),L=Math.max(j.bottom,F.bottom,L),J==yr.LTR?R.push(s&&H?h:j.left,s&&X?d:F.right):R.push(!s&&X?h:F.left,!s&&H?d:j.right))}let P=S??k.from,O=E??k.to;for(let N of t.visibleRanges)if(N.to>P&&N.from<O)for(let H=Math.max(N.from,P),Q=Math.min(N.to,O);;){let X=t.state.doc.lineAt(H);for(let J of t.bidiSpans(X)){let j=J.from+X.from,F=J.to+X.from;if(j>=Q)break;F>H&&C(Math.max(j,H),S==null&&j<=P,Math.min(F,Q),E==null&&F>=O,J.dir)}if(H=X.to+1,H>=Q)break}return R.length==0&&C(P,S==null,O,E==null,t.textDirection),{top:_,bottom:L,horizontal:R}}function w(S,E){let k=a.top+(E?S.top:S.bottom);return{top:k,bottom:k,horizontal:[]}}}function m$e(t,e){return t.constructor==e.constructor&&t.eq(e)}class g$e{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(b2)!=e.state.facet(b2)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(b2);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!m$e(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const b2=Rt.define();function Jte(t){return[Mi.define(e=>new g$e(e,t)),b2.of(t)]}const Qte=!(Ct.ios&&Ct.webkit&&Ct.webkit_version<534),Ly=Rt.define({combine(t){return Kf(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function b$e(t={}){return[Ly.of(t),y$e,v$e,x$e,Tte.of(!0)]}function ene(t){return t.startState.facet(Ly)!=t.state.facet(Ly)}const y$e=Jte({above:!0,markers(t){let{state:e}=t,n=e.facet(Ly),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty?!s||Qte:n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:st.cursor(i.head,i.head>i.anchor?-1:1);for(let l of Mv.forRange(t,o,a))r.push(l)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=ene(t);return n&&M9(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){M9(e.state,t)},class:"cm-cursorLayer"});function M9(t,e){e.style.animationDuration=t.facet(Ly).cursorBlinkRate+"ms"}const v$e=Jte({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Mv.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||ene(t)},class:"cm-selectionLayer"}),Z4={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};Qte&&(Z4[".cm-line"].caretColor=Z4[".cm-content"].caretColor="transparent !important");const x$e=jh.highest(Lt.theme(Z4)),tne=fn.define({map(t,e){return t==null?null:e.mapPos(t)}}),Hb=Ei.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(tne)?r.value:n,t)}}),_$e=Mi.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Hb);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Hb)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(Hb),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let r=t.scrollDOM.getBoundingClientRect();return{left:n.left-r.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-r.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Hb)!=t&&this.view.dispatch({effects:tne.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function w$e(){return[Hb,_$e]}const j9=Mi.fromClass(class{constructor(){this.height=1e3,this.attrs={style:"padding-bottom: 1000px"}}update(t){let{view:e}=t,n=e.viewState.editorHeight-e.defaultLineHeight-e.documentPadding.top-.5;n>=0&&n!=this.height&&(this.height=n,this.attrs={style:`padding-bottom: ${n}px`})}});function S$e(){return[j9,qk.of(t=>{var e;return((e=t.plugin(j9))===null||e===void 0?void 0:e.attrs)||null})]}function E$e(){return C$e}const k$e=Cn.line({class:"cm-activeLine"}),C$e=Mi.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(k$e.range(i.from)),e=i.from)}return Cn.set(n)}},{decorations:t=>t.decorations}),fb="-10000px";class T$e{constructor(e,n,r,i){this.facet=n,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=r(o,s))}update(e,n){var r;let i=e.state.facet(this.facet),s=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let c=s[l],u=-1;if(c){for(let h=0;h<this.tooltips.length;h++){let d=this.tooltips[h];d&&d.create==c.create&&(u=h)}if(u<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let h=o[l]=this.tooltipViews[u];a&&(a[l]=n[u]),h.update&&h.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(r=l.destroy)===null||r===void 0||r.call(l));return n&&(a.forEach((l,c)=>n[c]=l),n.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function A$e(t={}){return y2.of(t)}function P$e(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const y2=Rt.define({combine:t=>{var e,n,r;return{position:Ct.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||P$e}}}),F9=new WeakMap,nne=Mi.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(y2);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new T$e(t,_O,(n,r)=>this.createTooltip(n,r),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(y2);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),r=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",n.dom.appendChild(i)}return n.dom.style.position=this.position,n.dom.style.top=fb,n.dom.style.left="0px",this.container.insertBefore(n.dom,r),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(t=r.destroy)===null||t===void 0||t.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Ct.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==fb&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=bO(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(y2).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:r,scaleX:i,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,h=t.pos[a],d=t.size[a];if(!h||l.clip!==!1&&(h.bottom<=Math.max(n.top,r.top)||h.top>=Math.min(n.bottom,r.bottom)||h.right<Math.max(n.left,r.left)-.1||h.left>Math.min(n.right,r.right)+.1)){u.style.top=fb;continue}let f=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,m=f?7:0,g=d.right-d.left,b=(e=F9.get(c))!==null&&e!==void 0?e:d.bottom-d.top,y=c.offset||L$e,v=this.view.textDirection==yr.LTR,x=d.width>r.right-r.left?v?r.left:r.right-d.width:v?Math.max(r.left,Math.min(h.left-(f?14:0)+y.x,r.right-g)):Math.min(Math.max(r.left,h.left-g+(f?14:0)-y.x),r.right-g),w=this.above[a];!l.strictSide&&(w?h.top-b-m-y.y<r.top:h.bottom+b+m+y.y>r.bottom)&&w==r.bottom-h.bottom>h.top-r.top&&(w=this.above[a]=!w);let S=(w?h.top-r.top:r.bottom-h.bottom)-m;if(S<b&&c.resize!==!1){if(S<this.view.defaultLineHeight){u.style.top=fb;continue}F9.set(c,b),u.style.height=(b=S)/s+"px"}else u.style.height&&(u.style.height="");let E=w?h.top-b-m-y.y:h.bottom+m+y.y,k=x+g;if(c.overlap!==!0)for(let _ of o)_.left<k&&_.right>x&&_.top<E+b&&_.bottom>E&&(E=w?_.top-b-2-m:_.bottom+m+2);if(this.position=="absolute"?(u.style.top=(E-t.parent.top)/s+"px",B9(u,(x-t.parent.left)/i)):(u.style.top=E/s+"px",B9(u,x/i)),f){let _=h.left+(v?y.x:-y.x)-(x+14-7);f.style.left=_/i+"px"}c.overlap!==!0&&o.push({left:x,top:E,right:k,bottom:E+b}),u.classList.toggle("cm-tooltip-above",w),u.classList.toggle("cm-tooltip-below",!w),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=fb}},{eventObservers:{scroll(){this.maybeMeasure()}}});function B9(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const N$e=Lt.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),L$e={x:0,y:0},_O=Rt.define({enables:[nne,N$e]});function rne(t,e){let n=t.plugin(nne);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const U9=Rt.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function ZS(t,e){let n=t.plugin(ine),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const ine=Mi.fromClass(class{constructor(t){this.input=t.state.facet(JS),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(U9);this.top=new yw(t,!0,e.topContainer),this.bottom=new yw(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(U9);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new yw(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new yw(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(JS);if(n!=this.input){let r=n.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of r){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),i.push(u),(u.top?s:o).push(u)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Lt.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});let yw=class{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=$9(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=$9(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}};function $9(t){let e=t.nextSibling;return t.remove(),e}const JS=Rt.define({enables:ine});class ru extends xf{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}ru.prototype.elementClass="";ru.prototype.toDOM=void 0;ru.prototype.mapMode=Ji.TrackBefore;ru.prototype.startSide=ru.prototype.endSide=-1;ru.prototype.point=!0;const v2=Rt.define(),R$e=Rt.define(),I$e={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Nn.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},S1=Rt.define();function O$e(t){return[sne(),S1.of(Object.assign(Object.assign({},I$e),t))]}const H9=Rt.define({combine:t=>t.some(e=>e)});function sne(t){return[D$e]}const D$e=Mi.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(S1).map(e=>new V9(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(H9),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(H9)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=Nn.iter(this.view.state.facet(v2),this.view.viewport.from),r=[],i=this.gutters.map(s=>new M$e(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==bs.Text&&o){J4(n,r,a.from);for(let l of i)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==bs.Text){J4(n,r,s.from);for(let o of i)o.line(this.view,s,r)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(S1),n=t.state.facet(S1),r=t.docChanged||t.heightChanged||t.viewportChanged||!Nn.eq(t.startState.facet(v2),t.state.facet(v2),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let o=e.indexOf(s);o<0?i.push(new V9(this.view,s)):(this.gutters[o].update(t),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>Lt.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==yr.LTR?{left:n.dom.offsetWidth*e.scaleX}:{right:n.dom.offsetWidth*e.scaleX}})});function z9(t){return Array.isArray(t)?t:[t]}function J4(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class M$e{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=Nn.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==i.elements.length){let a=new one(e,o,s,r);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,o,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];J4(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet(R$e)){let o=s(e,n.widget,n);o&&(i||(i=[])).push(o)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class V9{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=z9(n.markers(e)),n.initialSpacer&&(this.spacer=new one(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=z9(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!Nn.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class one{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),j$e(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(r+=" "+u);for(let h=o;h<this.markers.length;h++)if(this.markers[h].compare(l)){a=h,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(i);let h=i.nextSibling;i.remove(),i=h}}if(!l)break;l.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),c&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function j$e(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const F$e=Rt.define(),B$e=Rt.define(),cm=Rt.define({combine(t){return Kf(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],o=n[i];r[i]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return r}})}});class aA extends ru{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function lA(t,e){return t.state.facet(cm).formatNumber(e,t.state)}const U$e=S1.compute([cm],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(F$e)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new aA(lA(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(B$e)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(cm)!=e.state.facet(cm),initialSpacer(e){return new aA(lA(e,W9(e.state.doc.lines)))},updateSpacer(e,n){let r=lA(n.view,W9(n.view.state.doc.lines));return r==e.number?e:new aA(r)},domEventHandlers:t.facet(cm).domEventHandlers}));function $$e(t={}){return[cm.of(t),sne(),U$e]}function W9(t){let e=9;for(;e<t;)e=e*10+9;return e}const H$e=new class extends ru{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},z$e=v2.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(H$e.range(i)))}return Nn.of(e)});function V$e(){return z$e}const W$e=1024;let G$e=0;class qo{constructor(e,n){this.from=e,this.to=n}}class mn{constructor(e={}){this.id=G$e++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=zs.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}mn.closedBy=new mn({deserialize:t=>t.split(" ")});mn.openedBy=new mn({deserialize:t=>t.split(" ")});mn.group=new mn({deserialize:t=>t.split(" ")});mn.isolate=new mn({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});mn.contextHash=new mn({perNode:!0});mn.lookAhead=new mn({perNode:!0});mn.mounted=new mn({perNode:!0});class Ry{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[mn.mounted.id]}}const q$e=Object.create(null);class zs{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):q$e,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new zs(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(mn.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(mn.group),s=-1;s<(i?i.length:0);s++){let o=n[s<0?r.name:i[s]];if(o)return o}}}}zs.none=new zs("",Object.create(null),0,8);class ane{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}n.push(i?new zs(r.name,i,r.id,r.flags):r)}return new ane(n)}}const vw=new WeakMap,G9=new WeakMap;var Sr;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Sr||(Sr={}));class oi{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=Ry.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new QS(this.topNode,e)}cursorAt(e,n=0,r=0){let i=vw.get(this)||this.topNode,s=new QS(i);return s.moveTo(e,n),vw.set(this,s._tree),s}get topNode(){return new ts(this,0,0,null)}resolve(e,n=0){let r=Iy(vw.get(this)||this.topNode,e,n,!1);return vw.set(this,r),r}resolveInner(e,n=0){let r=Iy(G9.get(this)||this.topNode,e,n,!0);return G9.set(this,r),r}resolveStack(e,n=0){return X$e(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&Sr.IncludeAnonymous)>0;for(let l=this.cursor(o|Sr.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:EO(zs.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new oi(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new oi(zs.none,n,r,i)))}static build(e){return Z$e(e)}}oi.empty=new oi(zs.none,[],[],0);class wO{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new wO(this.buffer,this.index)}}class kh{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return zs.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(lne(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=i[a++],s[l++]=i[a++]-r;let c=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,c)}return new kh(s,o,this.set)}}function lne(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function Iy(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof ts&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=r?0:Sr.IgnoreOverlays;if(r)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof ts&&o.index<0&&((i=a.enter(e,n,s))===null||i===void 0?void 0:i.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class cne{cursor(e=0){return new QS(this,e)}getChild(e,n=null,r=null){let i=q9(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return q9(this,e,n,r)}resolve(e,n=0){return Iy(this,e,n,!1)}resolveInner(e,n=0){return Iy(this,e,n,!0)}matchContext(e){return Q4(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class ts extends cne{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=n>0?a.length:-1;e!=c;e+=n){let u=a[e],h=l[e]+o.from;if(lne(i,r,h,h+u.length)){if(u instanceof kh){if(s&Sr.ExcludeBuffers)continue;let d=u.findChild(0,u.buffer.length,n,r-h,i);if(d>-1)return new Bl(new K$e(o,u,e,h),null,d)}else if(s&Sr.IncludeAnonymous||!u.type.isAnonymous||SO(u)){let d;if(!(s&Sr.IgnoreMounts)&&(d=Ry.get(u))&&!d.overlay)return new ts(d.tree,h,e,o);let f=new ts(u,h,e,o);return s&Sr.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(n<0?u.children.length-1:0,n,r,i)}}}if(s&Sr.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&Sr.IgnoreOverlays)&&(i=Ry.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new ts(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function q9(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function Q4(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class K$e{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class Bl extends cne{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new Bl(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&Sr.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Bl(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Bl(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Bl(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),n.push(0)}return new oi(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function une(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let r=n instanceof ts&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new Y$e(i,n)}class Y$e{constructor(e,n){this.heads=e,this.node=n}get next(){return une(this.heads)}}function X$e(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof ts?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,n)),s=o}else{let o=Ry.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new ts(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(Iy(a,e,n,!1))}}return i?une(i):r}class QS{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof ts)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof ts?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Sr.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Sr.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Sr.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&Sr.IncludeAnonymous||a instanceof kh||!a.type.isAnonymous||SO(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;n=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new Bl(this.buffer,n,this.stack[i]);return this.bufferNode=new Bl(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Q4(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return Q4(this._tree,e,i);let o=r[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function SO(t){return t.children.some(e=>e instanceof kh||!e.type.isAnonymous||SO(e))}function Z$e(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=W$e,reused:s=[],minRepeatType:o=r.types.length}=t,a=Array.isArray(n)?new wO(n,n.length):n,l=r.types,c=0,u=0;function h(S,E,k,_,L,R){let{id:C,start:P,end:O,size:N}=a,H=u,Q=c;for(;N<0;)if(a.next(),N==-1){let Y=s[C];k.push(Y),_.push(P-S);return}else if(N==-3){c=C;return}else if(N==-4){u=C;return}else throw new RangeError(`Unrecognized record size: ${N}`);let X=l[C],J,j,F=P-S;if(O-P<=i&&(j=b(a.pos-E,L))){let Y=new Uint16Array(j.size-j.skip),M=a.pos-j.size,D=Y.length;for(;a.pos>M;)D=y(j.start,Y,D);J=new kh(Y,O-j.start,r),F=j.start-S}else{let Y=a.pos-N;a.next();let M=[],D=[],V=C>=o?C:-1,W=0,te=O;for(;a.pos>Y;)V>=0&&a.id==V&&a.size>=0?(a.end<=te-i&&(m(M,D,P,W,a.end,te,V,H,Q),W=M.length,te=a.end),a.next()):R>2500?d(P,Y,M,D):h(P,Y,M,D,V,R+1);if(V>=0&&W>0&&W<M.length&&m(M,D,P,W,P,te,V,H,Q),M.reverse(),D.reverse(),V>-1&&W>0){let ee=f(X,Q);J=EO(X,M,D,0,M.length,0,O-P,ee,ee)}else J=g(X,M,D,O-P,H-O,Q)}k.push(J),_.push(F)}function d(S,E,k,_){let L=[],R=0,C=-1;for(;a.pos>E;){let{id:P,start:O,end:N,size:H}=a;if(H>4)a.next();else{if(C>-1&&O<C)break;C<0&&(C=N-i),L.push(P,O,N),R++,a.next()}}if(R){let P=new Uint16Array(R*4),O=L[L.length-2];for(let N=L.length-3,H=0;N>=0;N-=3)P[H++]=L[N],P[H++]=L[N+1]-O,P[H++]=L[N+2]-O,P[H++]=H;k.push(new kh(P,L[2]-O,r)),_.push(O-S)}}function f(S,E){return(k,_,L)=>{let R=0,C=k.length-1,P,O;if(C>=0&&(P=k[C])instanceof oi){if(!C&&P.type==S&&P.length==L)return P;(O=P.prop(mn.lookAhead))&&(R=_[C]+P.length+O)}return g(S,k,_,L,R,E)}}function m(S,E,k,_,L,R,C,P,O){let N=[],H=[];for(;S.length>_;)N.push(S.pop()),H.push(E.pop()+k-L);S.push(g(r.types[C],N,H,R-L,P-R,O)),E.push(L-k)}function g(S,E,k,_,L,R,C){if(R){let P=[mn.contextHash,R];C=C?[P].concat(C):[P]}if(L>25){let P=[mn.lookAhead,L];C=C?[P].concat(C):[P]}return new oi(S,E,k,_,C)}function b(S,E){let k=a.fork(),_=0,L=0,R=0,C=k.end-i,P={size:0,start:0,skip:0};e:for(let O=k.pos-S;k.pos>O;){let N=k.size;if(k.id==E&&N>=0){P.size=_,P.start=L,P.skip=R,R+=4,_+=4,k.next();continue}let H=k.pos-N;if(N<0||H<O||k.start<C)break;let Q=k.id>=o?4:0,X=k.start;for(k.next();k.pos>H;){if(k.size<0)if(k.size==-3)Q+=4;else break e;else k.id>=o&&(Q+=4);k.next()}L=X,_+=N,R+=Q}return(E<0||_==S)&&(P.size=_,P.start=L,P.skip=R),P.size>4?P:void 0}function y(S,E,k){let{id:_,start:L,end:R,size:C}=a;if(a.next(),C>=0&&_<o){let P=k;if(C>4){let O=a.pos-(C-4);for(;a.pos>O;)k=y(S,E,k)}E[--k]=P,E[--k]=R-S,E[--k]=L-S,E[--k]=_}else C==-3?c=_:C==-4&&(u=_);return k}let v=[],x=[];for(;a.pos>0;)h(t.start||0,t.bufferStart||0,v,x,-1,0);let w=(e=t.length)!==null&&e!==void 0?e:v.length?x[0]+v[0].length:0;return new oi(l[t.topID],v.reverse(),x.reverse(),w)}const K9=new WeakMap;function x2(t,e){if(!t.isAnonymous||e instanceof kh||e.type!=t)return 1;let n=K9.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof oi)){n=1;break}n+=x2(t,r)}K9.set(e,n)}return n}function EO(t,e,n,r,i,s,o,a,l){let c=0;for(let m=r;m<i;m++)c+=x2(t,e[m]);let u=Math.ceil(c*1.5/8),h=[],d=[];function f(m,g,b,y,v){for(let x=b;x<y;){let w=x,S=g[x],E=x2(t,m[x]);for(x++;x<y;x++){let k=x2(t,m[x]);if(E+k>=u)break;E+=k}if(x==w+1){if(E>u){let k=m[w];f(k.children,k.positions,0,k.children.length,g[w]+v);continue}h.push(m[w])}else{let k=g[x-1]+m[x-1].length-S;h.push(EO(t,m,g,w,x,S,k,null,l))}d.push(S+v-s)}}return f(e,n,r,i,0),(a||l)(h,d,o)}class Uit{constructor(){this.map=new WeakMap}setBuffer(e,n,r){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(n,r)}getBuffer(e,n){let r=this.map.get(e);return r&&r.get(n)}set(e,n){e instanceof Bl?this.setBuffer(e.context.buffer,e.index,n):e instanceof ts&&this.map.set(e.tree,n)}get(e){return e instanceof Bl?this.getBuffer(e.context.buffer,e.index):e instanceof ts?this.map.get(e.tree):void 0}cursorSet(e,n){e.buffer?this.setBuffer(e.buffer.buffer,e.index,n):this.map.set(e.tree,n)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Wc{constructor(e,n,r,i,s=!1,o=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new Wc(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<n.length?n[a]:null,h=u?u.fromA:1e9;if(h-l>=r)for(;o&&o.from<h;){let d=o;if(l>=d.from||h<=d.to||c){let f=Math.max(d.from,l)-c,m=Math.min(d.to,h)-c;d=f>=m?null:new Wc(f,m,d.tree,d.offset+c,a>0,!!u)}if(d&&i.push(d),o.to>h)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return i}}class J$e{startParse(e,n,r){return typeof e=="string"&&(e=new Q$e(e)),r=r?r.length?r.map(i=>new qo(i.from,i.to)):[new qo(0,0)]:[new qo(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class Q$e{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}function $it(t){return(e,n,r,i)=>new tHe(e,t,n,r,i)}class Y9{constructor(e,n,r,i,s){this.parser=e,this.parse=n,this.overlay=r,this.target=i,this.from=s}}function X9(t){if(!t.length||t.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(t))}class eHe{constructor(e,n,r,i,s,o,a){this.parser=e,this.predicate=n,this.mounts=r,this.index=i,this.start=s,this.target=o,this.prev=a,this.depth=0,this.ranges=[]}}const eN=new mn({perNode:!0});class tHe{constructor(e,n,r,i,s){this.nest=n,this.input=r,this.fragments=i,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let r=this.baseParse.advance();if(!r)return null;if(this.baseParse=null,this.baseTree=r,this.startInner(),this.stoppedAt!=null)for(let i of this.inner)i.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let r=this.baseTree;return this.stoppedAt!=null&&(r=new oi(r.type,r.children,r.positions,r.length,r.propValues.concat([[eN,this.stoppedAt]]))),r}let e=this.inner[this.innerDone],n=e.parse.advance();if(n){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[mn.mounted.id]=new Ry(n,e.overlay,e.parser),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].from<e&&(e=Math.min(e,this.inner[n].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].parse.stopAt(e)}startInner(){let e=new iHe(this.fragments),n=null,r=null,i=new QS(new ts(this.baseTree,this.ranges[0].from,0,null),Sr.IncludeAnonymous|Sr.IgnoreMounts);e:for(let s,o;;){let a=!0,l;if(this.stoppedAt!=null&&i.from>=this.stoppedAt)a=!1;else if(e.hasNode(i)){if(n){let c=n.mounts.find(u=>u.frag.from<=i.from&&u.frag.to>=i.to&&u.mount.overlay);if(c)for(let u of c.mount.overlay){let h=u.from+c.pos,d=u.to+c.pos;h>=i.from&&d<=i.to&&!n.ranges.some(f=>f.from<d&&f.to>h)&&n.ranges.push({from:h,to:d})}}a=!1}else if(r&&(o=nHe(r.ranges,i.from,i.to)))a=o!=2;else if(!i.type.isAnonymous&&(s=this.nest(i,this.input))&&(i.from<i.to||!s.overlay)){i.tree||rHe(i);let c=e.findMounts(i.from,s.parser);if(typeof s.overlay=="function")n=new eHe(s.parser,s.overlay,c,this.inner.length,i.from,i.tree,n);else{let u=Q9(this.ranges,s.overlay||(i.from<i.to?[new qo(i.from,i.to)]:[]));u.length&&X9(u),(u.length||!s.overlay)&&this.inner.push(new Y9(s.parser,u.length?s.parser.startParse(this.input,eU(c,u),u):s.parser.startParse(""),s.overlay?s.overlay.map(h=>new qo(h.from-i.from,h.to-i.from)):null,i.tree,u.length?u[0].from:i.from)),s.overlay?u.length&&(r={ranges:u,depth:0,prev:r}):a=!1}}else if(n&&(l=n.predicate(i))&&(l===!0&&(l=new qo(i.from,i.to)),l.from<l.to)){let c=n.ranges.length-1;c>=0&&n.ranges[c].to==l.from?n.ranges[c]={from:n.ranges[c].from,to:l.to}:n.ranges.push(l)}if(a&&i.firstChild())n&&n.depth++,r&&r.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;if(n&&!--n.depth){let c=Q9(this.ranges,n.ranges);c.length&&(X9(c),this.inner.splice(n.index,0,new Y9(n.parser,n.parser.startParse(this.input,eU(n.mounts,c),c),n.ranges.map(u=>new qo(u.from-n.start,u.to-n.start)),n.target,c[0].from))),n=n.prev}r&&!--r.depth&&(r=r.prev)}}}}function nHe(t,e,n){for(let r of t){if(r.from>=n)break;if(r.to>e)return r.from<=e&&r.to>=n?2:1}return 0}function Z9(t,e,n,r,i,s){if(e<n){let o=t.buffer[e+1];r.push(t.slice(e,n,o)),i.push(o-s)}}function rHe(t){let{node:e}=t,n=[],r=e.context.buffer;do n.push(t.index),t.parent();while(!t.tree);let i=t.tree,s=i.children.indexOf(r),o=i.children[s],a=o.buffer,l=[s];function c(u,h,d,f,m,g){let b=n[g],y=[],v=[];Z9(o,u,b,y,v,f);let x=a[b+1],w=a[b+2];l.push(y.length);let S=g?c(b+4,a[b+3],o.set.types[a[b]],x,w-x,g-1):e.toTree();return y.push(S),v.push(x-f),Z9(o,a[b+3],h,y,v,f),new oi(d,y,v,m)}i.children[s]=c(0,a.length,zs.none,0,o.length,n.length-1);for(let u of l){let h=t.tree.children[u],d=t.tree.positions[u];t.yield(new ts(h,d+t.from,u,t._tree))}}class J9{constructor(e,n){this.offset=n,this.done=!1,this.cursor=e.cursor(Sr.IncludeAnonymous|Sr.IgnoreMounts)}moveTo(e){let{cursor:n}=this,r=e-this.offset;for(;!this.done&&n.from<r;)n.to>=e&&n.enter(r,1,Sr.IgnoreOverlays|Sr.ExcludeBuffers)||n.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let n=this.cursor.tree;;){if(n==e.tree)return!0;if(n.children.length&&n.positions[0]==0&&n.children[0]instanceof oi)n=n.children[0];else break}return!1}}class iHe{constructor(e){var n;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=(n=r.tree.prop(eN))!==null&&n!==void 0?n:r.to,this.inner=new J9(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let n=this.curFrag=this.fragments[this.fragI];this.curTo=(e=n.tree.prop(eN))!==null&&e!==void 0?e:n.to,this.inner=new J9(n.tree,-n.offset)}}findMounts(e,n){var r;let i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let o=(r=s.tree)===null||r===void 0?void 0:r.prop(mn.mounted);if(o&&o.parser==n)for(let a=this.fragI;a<this.fragments.length;a++){let l=this.fragments[a];if(l.from>=s.to)break;l.tree==this.curFrag.tree&&i.push({frag:l,pos:s.from-l.offset,mount:o})}}}return i}}function Q9(t,e){let n=null,r=e;for(let i=1,s=0;i<t.length;i++){let o=t[i-1].to,a=t[i].from;for(;s<r.length;s++){let l=r[s];if(l.from>=a)break;l.to<=o||(n||(r=n=e.slice()),l.from<o?(n[s]=new qo(l.from,o),l.to>a&&n.splice(s+1,0,new qo(a,l.to))):l.to>a?n[s--]=new qo(a,l.to):n.splice(s--,1))}}return r}function sHe(t,e,n,r){let i=0,s=0,o=!1,a=!1,l=-1e9,c=[];for(;;){let u=i==t.length?1e9:o?t[i].to:t[i].from,h=s==e.length?1e9:a?e[s].to:e[s].from;if(o!=a){let d=Math.max(l,n),f=Math.min(u,h,r);d<f&&c.push(new qo(d,f))}if(l=Math.min(u,h),l==1e9)break;u==l&&(o?(o=!1,i++):o=!0),h==l&&(a?(a=!1,s++):a=!0)}return c}function eU(t,e){let n=[];for(let{pos:r,mount:i,frag:s}of t){let o=r+(i.overlay?i.overlay[0].from:0),a=o+i.tree.length,l=Math.max(s.from,o),c=Math.min(s.to,a);if(i.overlay){let u=i.overlay.map(d=>new qo(d.from+r,d.to+r)),h=sHe(e,u,l,c);for(let d=0,f=l;;d++){let m=d==h.length,g=m?c:h[d].from;if(g>f&&n.push(new Wc(f,g,i.tree,-o,s.from>=f||s.openStart,s.to<=g||s.openEnd)),m)break;f=h[d].to}}else n.push(new Wc(l,c,i.tree,-o,s.from>=o||s.openStart,s.to<=a||s.openEnd))}return n}let oHe=0;class zo{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=oHe++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof zo&&(n=e),n?.base)throw new Error("Can not derive from a modified tag");let i=new zo(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new eE(e);return r=>r.modified.indexOf(n)>-1?r:eE.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let aHe=0;class eE{constructor(e){this.name=e,this.instances=[],this.id=aHe++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(a=>a.base==e&&lHe(n,a.modified));if(r)return r;let i=[],s=new zo(e.name,i,e,n);for(let a of n)a.instances.push(s);let o=cHe(n);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(eE.get(a,l));return s}}function lHe(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function cHe(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function uHe(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],o=2,a=i;for(let h=0;;){if(a=="..."&&h>0&&h+3==i.length){o=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!d)throw new RangeError("Invalid path: "+i);if(s.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),h+=d[0].length,h==i.length)break;let f=i[h++];if(h==i.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+i);a=i.slice(h)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+i);let u=new tE(r,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return hne.add(e)}const hne=new mn;class tE{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}tE.empty=new tE([],2,null);function dne(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:r}}function hHe(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function dHe(t,e,n,r=0,i=t.length){let s=new fHe(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class fHe{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=n)return;o.isTop&&(s=this.highlighters.filter(f=>!f.scope||f.scope(o)));let c=i,u=pHe(e)||tE.empty,h=hHe(s,u.tags);if(h&&(c&&(c+=" "),c+=h,u.mode==1&&(i+=(i?" ":"")+h)),this.startSpan(Math.max(n,a),c),u.opaque)return;let d=e.tree&&e.tree.prop(mn.mounted);if(d&&d.overlay){let f=e.node.enter(d.overlay[0].from+a,1),m=this.highlighters.filter(b=>!b.scope||b.scope(d.tree.type)),g=e.firstChild();for(let b=0,y=a;;b++){let v=b<d.overlay.length?d.overlay[b]:null,x=v?v.from+a:l,w=Math.max(n,y),S=Math.min(r,x);if(w<S&&g)for(;e.from<S&&(this.highlightRange(e,w,S,i,s),this.startSpan(Math.min(S,e.to),c),!(e.to>=x||!e.nextSibling())););if(!v||x>r)break;y=v.to+a,y>n&&(this.highlightRange(f.cursor(),Math.max(n,v.from+a),Math.min(r,y),"",m),this.startSpan(Math.min(r,y),c))}g&&e.parent()}else if(e.firstChild()){d&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),c)}while(e.nextSibling());e.parent()}}}function pHe(t){let e=t.type.prop(hne);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const wt=zo.define,xw=wt(),zu=wt(),tU=wt(zu),nU=wt(zu),Vu=wt(),_w=wt(Vu),cA=wt(Vu),Sl=wt(),od=wt(Sl),dl=wt(),fl=wt(),tN=wt(),pb=wt(tN),ww=wt(),Ge={comment:xw,lineComment:wt(xw),blockComment:wt(xw),docComment:wt(xw),name:zu,variableName:wt(zu),typeName:tU,tagName:wt(tU),propertyName:nU,attributeName:wt(nU),className:wt(zu),labelName:wt(zu),namespace:wt(zu),macroName:wt(zu),literal:Vu,string:_w,docString:wt(_w),character:wt(_w),attributeValue:wt(_w),number:cA,integer:wt(cA),float:wt(cA),bool:wt(Vu),regexp:wt(Vu),escape:wt(Vu),color:wt(Vu),url:wt(Vu),keyword:dl,self:wt(dl),null:wt(dl),atom:wt(dl),unit:wt(dl),modifier:wt(dl),operatorKeyword:wt(dl),controlKeyword:wt(dl),definitionKeyword:wt(dl),moduleKeyword:wt(dl),operator:fl,derefOperator:wt(fl),arithmeticOperator:wt(fl),logicOperator:wt(fl),bitwiseOperator:wt(fl),compareOperator:wt(fl),updateOperator:wt(fl),definitionOperator:wt(fl),typeOperator:wt(fl),controlOperator:wt(fl),punctuation:tN,separator:wt(tN),bracket:pb,angleBracket:wt(pb),squareBracket:wt(pb),paren:wt(pb),brace:wt(pb),content:Sl,heading:od,heading1:wt(od),heading2:wt(od),heading3:wt(od),heading4:wt(od),heading5:wt(od),heading6:wt(od),contentSeparator:wt(Sl),list:wt(Sl),quote:wt(Sl),emphasis:wt(Sl),strong:wt(Sl),link:wt(Sl),monospace:wt(Sl),strikethrough:wt(Sl),inserted:wt(),deleted:wt(),changed:wt(),invalid:wt(),meta:ww,documentMeta:wt(ww),annotation:wt(ww),processingInstruction:wt(ww),definition:zo.defineModifier("definition"),constant:zo.defineModifier("constant"),function:zo.defineModifier("function"),standard:zo.defineModifier("standard"),local:zo.defineModifier("local"),special:zo.defineModifier("special")};for(let t in Ge){let e=Ge[t];e instanceof zo&&(e.name=t)}dne([{tag:Ge.link,class:"tok-link"},{tag:Ge.heading,class:"tok-heading"},{tag:Ge.emphasis,class:"tok-emphasis"},{tag:Ge.strong,class:"tok-strong"},{tag:Ge.keyword,class:"tok-keyword"},{tag:Ge.atom,class:"tok-atom"},{tag:Ge.bool,class:"tok-bool"},{tag:Ge.url,class:"tok-url"},{tag:Ge.labelName,class:"tok-labelName"},{tag:Ge.inserted,class:"tok-inserted"},{tag:Ge.deleted,class:"tok-deleted"},{tag:Ge.literal,class:"tok-literal"},{tag:Ge.string,class:"tok-string"},{tag:Ge.number,class:"tok-number"},{tag:[Ge.regexp,Ge.escape,Ge.special(Ge.string)],class:"tok-string2"},{tag:Ge.variableName,class:"tok-variableName"},{tag:Ge.local(Ge.variableName),class:"tok-variableName tok-local"},{tag:Ge.definition(Ge.variableName),class:"tok-variableName tok-definition"},{tag:Ge.special(Ge.variableName),class:"tok-variableName2"},{tag:Ge.definition(Ge.propertyName),class:"tok-propertyName tok-definition"},{tag:Ge.typeName,class:"tok-typeName"},{tag:Ge.namespace,class:"tok-namespace"},{tag:Ge.className,class:"tok-className"},{tag:Ge.macroName,class:"tok-macroName"},{tag:Ge.propertyName,class:"tok-propertyName"},{tag:Ge.operator,class:"tok-operator"},{tag:Ge.comment,class:"tok-comment"},{tag:Ge.meta,class:"tok-meta"},{tag:Ge.invalid,class:"tok-invalid"},{tag:Ge.punctuation,class:"tok-punctuation"}]);var uA;const um=new mn;function mHe(t){return Rt.define({combine:t?e=>e.concat(t):void 0})}const gHe=new mn;class Oa{constructor(e,n,r=[],i=""){this.data=e,this.name=i,Sn.prototype.hasOwnProperty("tree")||Object.defineProperty(Sn.prototype,"tree",{get(){return ji(this)}}),this.parser=n,this.extension=[Ch.of(this),Sn.languageData.of((s,o,a)=>{let l=rU(s,o,a),c=l.type.prop(um);if(!c)return[];let u=s.facet(c),h=l.type.prop(gHe);if(h){let d=l.resolve(o-l.from,a);for(let f of h)if(f.test(d,s)){let m=s.facet(f.facet);return f.type=="replace"?m:m.concat(u)}}return u})].concat(r)}isActiveAt(e,n,r=-1){return rU(e,n,r).type.prop(um)==this.data}findRegions(e){let n=e.facet(Ch);if(n?.data==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(um)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(mn.mounted);if(a){if(a.tree.prop(um)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof oi&&i(c,s.positions[l]+o)}};return i(ji(e),0),r}get allowsNesting(){return!0}}Oa.setState=fn.define();function rU(t,e,n){let r=t.facet(Ch),i=ji(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,Sr.ExcludeBuffers))s.type.isTop&&(i=s);return i}class nN extends Oa{constructor(e,n,r){super(e,n,[],r),this.parser=n}static define(e){let n=mHe(e.languageData);return new nN(n,e.parser.configure({props:[um.add(r=>r.isTop?n:void 0)]}),e.name)}configure(e,n){return new nN(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function ji(t){let e=t.field(Oa.state,!1);return e?e.tree:oi.empty}class bHe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let mb=null;class nE{constructor(e,n,r=[],i,s,o,a,l){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new nE(e,n,[],oi.empty,0,r,[],null)}startParse(){return this.parser.startParse(new bHe(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=oi.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Wc.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Wc.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=mb;mb=this;try{return e()}finally{mb=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=iU(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,h,d)=>l.push({fromA:c,toA:u,fromB:h,toB:d})),r=Wc.applyChanges(r,l),i=oi.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),h=e.mapPos(c.to,-1);u<h&&a.push({from:u,to:h})}}}return new nE(this.parser,n,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=iU(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends J$e{createParse(n,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=mb;if(l){for(let c of i)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new oi(zs.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return mb}}function iU(t,e,n){return Wc.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class bg{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new bg(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=nE.create(e.facet(Ch).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new bg(r)}}Oa.state=Ei.define({create:bg.init,update(t,e){for(let n of e.effects)if(n.is(Oa.setState))return n.value;return e.startState.facet(Ch)!=e.state.facet(Ch)?bg.init(e.state):t.apply(e)}});let fne=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(fne=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const hA=typeof navigator<"u"&&(!((uA=navigator.scheduling)===null||uA===void 0)&&uA.isInputPending)?()=>navigator.scheduling.isInputPending():null,yHe=Mi.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Oa.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Oa.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=fne(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(Oa.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!hA?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>hA&&hA()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Oa.setState.of(new bg(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>mo(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ch=Rt.define({combine(t){return t.length?t[0]:null},enables:t=>[Oa.state,yHe,Lt.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class zit{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}class Pi{constructor(e,n,r,i,s,o=void 0){this.name=e,this.alias=n,this.extensions=r,this.filename=i,this.loadFunc=s,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:n,support:r}=e;if(!n){if(!r)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");n=()=>Promise.resolve(r)}return new Pi(e.name,(e.alias||[]).concat(e.name).map(i=>i.toLowerCase()),e.extensions||[],e.filename,n,r)}static matchFilename(e,n){for(let i of e)if(i.filename&&i.filename.test(n))return i;let r=/\.([^.]+)$/.exec(n);if(r){for(let i of e)if(i.extensions.indexOf(r[1])>-1)return i}return null}static matchLanguageName(e,n,r=!0){n=n.toLowerCase();for(let i of e)if(i.alias.some(s=>s==n))return i;if(r)for(let i of e)for(let s of i.alias){let o=n.indexOf(s);if(o>-1&&(s.length>2||!/\w/.test(n[o-1])&&!/\w/.test(n[o+s.length])))return i}return null}}const vHe=Rt.define(),Qg=Rt.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function rE(t){let e=t.facet(Qg);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Oy(t,e){let n="",r=t.tabSize,i=t.facet(Qg)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function kO(t,e){t instanceof Sn&&(t=new Xk(t));for(let r of t.state.facet(vHe)){let i=r(t,e);if(i!==void 0)return i}let n=ji(t.state);return n.length>=e?_He(t,n,e):null}class Xk{constructor(e,n={}){this.state=e,this.options=n,this.unit=rE(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return Vk(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const xHe=new mn;function _He(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let o=i;o&&!(o.from==r.node.from&&o.type==r.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return pne(r,t,n)}function pne(t,e,n){for(let r=t;r;r=r.next){let i=SHe(r.node);if(i)return i(CO.create(e,n,r))}return 0}function wHe(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function SHe(t){let e=t.type.prop(xHe);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(mn.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>mne(o,!0,1,void 0,s&&!wHe(o)?i.from:void 0)}return t.parent==null?EHe:null}function EHe(){return 0}class CO extends Xk{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new CO(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(kHe(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return pne(this.context.next,this.base,this.pos)}}function kHe(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function CHe(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+c}}a=l.to}}function Vit({closing:t,align:e=!0,units:n=1}){return r=>mne(r,e,n,t)}function mne(t,e,n,r,i){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==t.pos+o,l=e?CHe(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const Wit=t=>t.baseIndent;function Git({except:t,units:e=1}={}){return n=>{let r=t&&t.test(n.textAfter);return n.baseIndent+(r?0:e*n.unit)}}const THe=200;function AHe(){return Sn.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+THe)return t;let s=n.sliceString(i.from,r);if(!e.some(c=>c.test(s)))return t;let{state:o}=t,a=-1,l=[];for(let{head:c}of o.selection.ranges){let u=o.doc.lineAt(c);if(u.from==a)continue;a=u.from;let h=kO(o,u.from);if(h==null)continue;let d=/^\s*/.exec(u.text)[0],f=Oy(o,h);d!=f&&l.push({from:u.from,to:u.from+d.length,insert:f})}return l.length?[t,{changes:l,sequential:!0}]:t})}const PHe=Rt.define(),NHe=new mn;function qit(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function LHe(t,e,n){let r=ji(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let o=i;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(NHe);if(l&&(a.to<r.length-50||r.length==t.doc.length||!RHe(a))){let c=l(a,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(s=c)}}return s}function RHe(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function sU(t,e,n){for(let r of t.facet(PHe)){let i=r(t,e,n);if(i)return i}return LHe(t,e,n)}function gne(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const bne=fn.define({map:gne}),TO=fn.define({map:gne}),iE=Ei.define({create(){return Cn.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)if(n.is(bne)&&!IHe(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(yne),i=r?Cn.replace({widget:new MHe(r(e.state,n.value))}):oU;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(TO)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:r}=e.selection.main;t.between(r,r,(i,s)=>{i<r&&s>r&&(n=!0)}),n&&(t=t.update({filterFrom:r,filterTo:r,filter:(i,s)=>s<=r||i>=r}))}return t},provide:t=>Lt.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(oU.range(r,i))}return Cn.set(e,!0)}});function rN(t,e,n){var r;let i=null;return(r=t.field(iE,!1))===null||r===void 0||r.between(e,n,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function IHe(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}const OHe={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},yne=Rt.define({combine(t){return Kf(t,OHe)}});function DHe(t){return[iE,BHe]}function vne(t,e){let{state:n}=t,r=n.facet(yne),i=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=rN(t.state,a.from,a.to);l&&t.dispatch({effects:TO.of(l)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const oU=Cn.replace({widget:new class extends Jg{toDOM(t){return vne(t,null)}}});class MHe extends Jg{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return vne(e,this.value)}}const jHe={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class dA extends ru{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function FHe(t={}){let e=Object.assign(Object.assign({},jHe),t),n=new dA(e,!0),r=new dA(e,!1),i=Mi.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Ch)!=o.state.facet(Ch)||o.startState.field(iE,!1)!=o.state.field(iE,!1)||ji(o.startState)!=ji(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new _f;for(let l of o.viewportLineBlocks){let c=rN(o.state,l.from,l.to)?r:sU(o.state,l.from,l.to)?n:null;c&&a.add(l.from,l.from,c)}return a.finish()}}),{domEventHandlers:s}=e;return[i,O$e({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(i))===null||a===void 0?void 0:a.markers)||Nn.empty},initialSpacer(){return new dA(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,a,l)=>{if(s.click&&s.click(o,a,l))return!0;let c=rN(o.state,a.from,a.to);if(c)return o.dispatch({effects:TO.of(c)}),!0;let u=sU(o.state,a.from,a.to);return u?(o.dispatch({effects:bne.of(u)}),!0):!1}})}),DHe()]}const BHe=Lt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Zk{constructor(e,n){this.specs=e;let r;function i(a){let l=wh.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,o=n.scope;this.scope=o instanceof Oa?a=>a.prop(um)==o.data:o?a=>a==o:void 0,this.style=dne(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new wh(r):null,this.themeType=n.themeType}static define(e,n){return new Zk(e,n||{})}}const iN=Rt.define(),UHe=Rt.define({combine(t){return t.length?[t[0]]:null}});function fA(t){let e=t.facet(iN);return e.length?e:t.facet(UHe)}function $He(t,e){let n=[zHe],r;return t instanceof Zk&&(t.module&&n.push(Lt.styleModule.of(t.module)),r=t.themeType),r?n.push(iN.computeN([Lt.darkTheme],i=>i.facet(Lt.darkTheme)==(r=="dark")?[t]:[])):n.push(iN.of(t)),n}class HHe{constructor(e){this.markCache=Object.create(null),this.tree=ji(e.state),this.decorations=this.buildDeco(e,fA(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=ji(e.state),r=fA(e.state),i=r!=fA(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return Cn.none;let r=new _f;for(let{from:i,to:s}of e.visibleRanges)dHe(this.tree,n,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=Cn.mark({class:l})))},i,s);return r.finish()}}const zHe=jh.high(Mi.fromClass(HHe,{decorations:t=>t.decorations})),VHe=Lt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),xne=1e4,_ne="()[]{}",wne=Rt.define({combine(t){return Kf(t,{afterCursor:!0,brackets:_ne,maxScanDistance:xne,renderMatch:qHe})}}),WHe=Cn.mark({class:"cm-matchingBracket"}),GHe=Cn.mark({class:"cm-nonmatchingBracket"});function qHe(t){let e=[],n=t.matched?WHe:GHe;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const KHe=Ei.define({create(){return Cn.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(wne);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=Ul(e.state,i.head,-1,r)||i.head>0&&Ul(e.state,i.head-1,1,r)||r.afterCursor&&(Ul(e.state,i.head,1,r)||i.head<e.state.doc.length&&Ul(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return Cn.set(n,!0)},provide:t=>Lt.decorations.from(t)}),YHe=[KHe,VHe];function XHe(t={}){return[wne.of(t),YHe]}const ZHe=new mn;function sN(t,e,n){let r=t.prop(e<0?mn.openedBy:mn.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function oN(t){let e=t.type.prop(ZHe);return e?e(t.node):t}function Ul(t,e,n,r={}){let i=r.maxScanDistance||xne,s=r.brackets||_ne,o=ji(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let c=sN(l.type,n,s);if(c&&l.from<l.to){let u=oN(l);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return JHe(t,e,n,l,u,c,s)}}return QHe(t,e,n,o,a.type,i,s)}function JHe(t,e,n,r,i,s,o){let a=r.parent,l={from:i.from,to:i.to},c=0,u=a?.cursor();if(u&&(n<0?u.childBefore(r.from):u.childAfter(r.to)))do if(n<0?u.to<=r.from:u.from>=r.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let h=oN(u);return{start:l,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(sN(u.type,n,o))c++;else if(sN(u.type,-n,o)){if(c==0){let h=oN(u);return{start:l,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function QHe(t,e,n,r,i,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),h=0;for(let d=0;!u.next().done&&d<=s;){let f=u.value;n<0&&(d+=f.length);let m=e+d*n;for(let g=n>0?0:f.length-1,b=n>0?f.length:-1;g!=b;g+=n){let y=o.indexOf(f[g]);if(!(y<0||r.resolveInner(m+g,1).type!=i))if(y%2==0==n>0)h++;else{if(h==1)return{start:c,end:{from:m+g,to:m+g+1},matched:y>>1==l>>1};h--}}n>0&&(d+=f.length)}return u.done?{start:c,matched:!1}:null}const eze=Object.create(null),aU=[zs.none],lU=[],cU=Object.create(null),tze=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])tze[t]=nze(eze,e);function pA(t,e){lU.indexOf(t)>-1||(lU.push(t),console.warn(e))}function nze(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||Ge[c];u?typeof u=="function"?l.length?l=l.map(u):pA(c,`Modifier ${c} used at start of tag`):l.length?pA(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:pA(c,`Unknown highlighting tag ${c}`)}for(let c of l)n.push(c)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(a=>a.id),s=cU[i];if(s)return s.id;let o=cU[i]=zs.define({id:aU.length,name:r,props:[uHe({[r]:n})]});return aU.push(o),o.id}yr.RTL,yr.LTR;class Sne{constructor(e,n,r,i){this.state=e,this.pos=n,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=ji(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),s=i.search(Ene(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function uU(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function rze(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let s=1;s<i.length;s++)n[i[s]]=!0}let r=uU(e)+uU(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function ize(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:rze(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:n}:null}}function Kit(t,e){return n=>{for(let r=ji(n.state).resolveInner(n.pos,-1);r;r=r.parent){if(t.indexOf(r.name)>-1)return null;if(r.type.isTop)break}return e(n)}}class hU{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}}function nf(t){return t.selection.main.from}function Ene(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?t:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const AO=lu.define();function sze(t,e,n,r){let{main:i}=t.selection,s=n-i.from,o=r-i.from;return Object.assign(Object.assign({},t.changeByRange(a=>{if(a!=i&&n!=r&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,r))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:l},range:st.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const dU=new WeakMap;function oze(t){if(!Array.isArray(t))return t;let e=dU.get(t);return e||dU.set(t,e=ize(t)),e}const sE=fn.define(),Dy=fn.define();class aze{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=Pa(e,n),i=Ic(r);this.chars.push(r);let s=e.slice(n,n+i),o=s.toUpperCase();this.folded.push(Pa(o==s?s.toLowerCase():o,0)),n+=i}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:i,precise:s,byWord:o}=this;if(n.length==1){let v=Pa(e,0),x=Ic(v),w=x==e.length?0:-100;if(v!=n[0])if(v==r[0])w+=-200;else return null;return this.ret(w,[0,x])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,c=0;if(a<0){for(let v=0,x=Math.min(e.length,200);v<x&&c<l;){let w=Pa(e,v);(w==n[c]||w==r[c])&&(i[c++]=v),v+=Ic(w)}if(c<l)return null}let u=0,h=0,d=!1,f=0,m=-1,g=-1,b=/[a-z]/.test(e),y=!0;for(let v=0,x=Math.min(e.length,200),w=0;v<x&&h<l;){let S=Pa(e,v);a<0&&(u<l&&S==n[u]&&(s[u++]=v),f<l&&(S==n[f]||S==r[f]?(f==0&&(m=v),g=v+1,f++):f=0));let E,k=S<255?S>=48&&S<=57||S>=97&&S<=122?2:S>=65&&S<=90?1:0:(E=lO(S))!=E.toLowerCase()?1:E!=E.toUpperCase()?2:0;(!v||k==1&&b||w==0&&k!=0)&&(n[h]==S||r[h]==S&&(d=!0)?o[h++]=v:o.length&&(y=!1)),w=k,v+=Ic(S)}return h==l&&o[0]==0&&y?this.result(-100+(d?-200:0),o,e):f==l&&m==0?this.ret(-200-e.length+(g==e.length?0:-100),[0,g]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):f==l?this.ret(-900-e.length,[m,g]):h==l?this.result(-100+(d?-200:0)+-700+(y?0:-1100),o,e):n.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[],s=0;for(let o of n){let a=o+(this.astral?Ic(Pa(r,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-r.length,i)}}class lze{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),r=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,n.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const vi=Rt.define({combine(t){return Kf(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:cze,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>fU(e(r),n(r)),optionClass:(e,n)=>r=>fU(e(r),n(r)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function fU(t,e){return t?e?t+" "+e:t:e}function cze(t,e,n,r,i,s){let o=t.textDirection==yr.RTL,a=o,l=!1,c="top",u,h,d=e.left-i.left,f=i.right-e.right,m=r.right-r.left,g=r.bottom-r.top;if(a&&d<Math.min(m,f)?a=!1:!a&&f<Math.min(m,d)&&(a=!0),m<=(a?d:f))u=Math.max(i.top,Math.min(n.top,i.bottom-g))-e.top,h=Math.min(400,a?d:f);else{l=!0,h=Math.min(400,(o?e.right:i.right-e.left)-30);let v=i.bottom-e.bottom;v>=g||v>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let b=(e.bottom-e.top)/s.offsetHeight,y=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/b}px; max-width: ${h/y}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function uze(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let c=0;c<s.length;){let u=s[c++],h=s[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let d=o.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(a.slice(u,h))),d.className="cm-completionMatchedText",l=h}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function mA(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class hze{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:s,selected:o}=i.open,a=e.state.facet(vi);this.optionContent=uze(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=mA(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(n).open;for(let u=l.target,h;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(h=/-(\d+)$/.exec(u.id))&&+h[1]<c.length){this.applyCompletion(e,c[+h[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(vi).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:Dy.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:a}=r.open;(!i.open||i.open.options!=s)&&(this.range=mA(s.length,o,e.state.facet(vi).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),a!=((n=i.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=mA(n.options.length,n.selected,this.view.state.facet(vi).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:r}=n.options[n.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>mo(this.view.state,o,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return n&&fze(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return i.top>Math.min(s.bottom,n.bottom)-10||i.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(vi).positionInfo(this.view,n,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",o=>{o.target==i&&o.preventDefault()});let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let d=typeof c=="string"?c:c.name;if(d!=s&&(o>r.from||r.from==0))if(s=d,typeof c!="string"&&c.header)i.appendChild(c.header(c));else{let f=i.appendChild(document.createElement("completion-section"));f.textContent=d}}const u=i.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let h=this.optionClass(a);h&&(u.className=h);for(let d of this.optionContent){let f=d(a,this.view.state,this.view,l);f&&u.appendChild(f)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function dze(t,e){return n=>new hze(n,t,e)}function fze(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.height/t.offsetHeight;r.top<n.top?t.scrollTop-=(n.top-r.top)/i:r.bottom>n.bottom&&(t.scrollTop+=(r.bottom-n.bottom)/i)}function pU(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function pze(t,e){let n=[],r=null,i=c=>{n.push(c);let{section:u}=c.completion;if(u){r||(r=[]);let h=typeof u=="string"?u:u.name;r.some(d=>d.name==h)||r.push(typeof u=="string"?{name:h}:u)}},s=e.facet(vi);for(let c of t)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let h of c.result.options)i(new hU(h,c.source,u?u(h):[],1e9-n.length));else{let h=e.sliceDoc(c.from,c.to),d,f=s.filterStrict?new lze(h):new aze(h);for(let m of c.result.options)if(d=f.match(m.label)){let g=m.displayLabel?u?u(m,d.matched):[]:d.matched;i(new hU(m,c.source,g,d.score+(m.boost||0)))}}}if(r){let c=Object.create(null),u=0,h=(d,f)=>{var m,g;return((m=d.rank)!==null&&m!==void 0?m:1e9)-((g=f.rank)!==null&&g!==void 0?g:1e9)||(d.name<f.name?-1:1)};for(let d of r.sort(h))u-=1e5,c[d.name]=u;for(let d of n){let{section:f}=d.completion;f&&(d.score+=c[typeof f=="string"?f:f.name])}}let o=[],a=null,l=s.compareCompletions;for(let c of n.sort((u,h)=>h.score-u.score||l(u.completion,h.completion))){let u=c.completion;!a||a.label!=u.label||a.detail!=u.detail||a.type!=null&&u.type!=null&&a.type!=u.type||a.apply!=u.apply||a.boost!=u.boost?o.push(c):pU(c.completion)>pU(a)&&(o[o.length-1]=c),a=c.completion}return o}class hm{constructor(e,n,r,i,s,o){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new hm(this.options,mU(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,s,o){if(i&&!o&&e.some(c=>c.isPending))return i.setDisabled();let a=pze(e,n);if(!a.length)return i&&e.some(c=>c.isPending)?i.setDisabled():null;let l=n.facet(vi).selectOnOpen?0:-1;if(i&&i.selected!=l&&i.selected!=-1){let c=i.options[i.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==c){l=u;break}}return new hm(a,mU(r,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:xze,above:s.aboveCursor},i?i.timestamp:Date.now(),l,!1)}map(e){return new hm(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new hm(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class oE{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new oE(yze,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(vi),s=(r.override||n.languageDataAt("autocomplete",nf(n)).map(oze)).map(l=>(this.active.find(u=>u.source==l)||new Ko(l,this.active.some(u=>u.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((l,c)=>l==this.active[c])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(PO));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!mze(s,this.active)||a?o=hm.build(s,n,this.id,o,r,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new Ko(l.source,0):l));for(let l of e.effects)l.is(Cne)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new oE(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?gze:bze}}function mze(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;r<e.length&&!e[r].hasResult();)r++;let i=n==t.length,s=r==e.length;if(i||s)return i==s;if(t[n++].result!=e[r++].result)return!1}}const gze={"aria-autocomplete":"list"},bze={};function mU(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const yze=[];function kne(t,e){if(t.isUserEvent("input.complete")){let r=t.annotation(AO);if(r&&e.activateOnCompletion(r))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class Ko{constructor(e,n,r=!1){this.source=e,this.state=n,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let r=kne(e,n),i=this;(r&8||r&16&&this.touches(e))&&(i=new Ko(i.source,0)),r&4&&i.state==0&&(i=new Ko(this.source,1)),i=i.updateFor(e,r);for(let s of e.effects)if(s.is(sE))i=new Ko(i.source,1,s.value);else if(s.is(Dy))i=new Ko(i.source,0);else if(s.is(PO))for(let o of s.value)o.source==i.source&&(i=o);return i}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(nf(e.state))}}class Dm extends Ko{constructor(e,n,r,i,s,o){super(e,3,n),this.limit=r,this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var r;if(!(n&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=nf(e.state);if(a>o||!i||n&2&&(nf(e.startState)==this.from||a<this.limit))return new Ko(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return vze(i.validFor,e.state,s,o)?new Dm(this.source,this.explicit,l,i,s,o):i.update&&(i=i.update(i,s,o,new Sne(e.state,a,!1)))?new Dm(this.source,this.explicit,l,i,i.from,(r=i.to)!==null&&r!==void 0?r:nf(e.state)):new Ko(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Dm(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Ko(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function vze(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):Ene(t,!0).test(i)}const PO=fn.define({map(t,e){return t.map(n=>n.map(e))}}),Cne=fn.define(),js=Ei.define({create(){return oE.start()},update(t,e){return t.update(e)},provide:t=>[_O.from(t,e=>e.tooltip),Lt.contentAttributes.from(t,e=>e.attrs)]});function NO(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(js).active.find(i=>i.source==e.source);return r instanceof Dm?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},sze(t.state,n,r.from,r.to)),{annotations:AO.of(e.completion)})):n(t,e.completion,r.from,r.to),!0):!1}const xze=dze(js,NO);function Sw(t,e="option"){return n=>{let r=n.state.field(js,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(vi).interactionDelay)return!1;let i=1,s;e=="page"&&(s=rne(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:Cne.of(a)}),!0}}const Tne=t=>{let e=t.state.field(js,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(vi).interactionDelay?!1:NO(t,e.open.options[e.open.selected])},gU=t=>t.state.field(js,!1)?(t.dispatch({effects:sE.of(!0)}),!0):!1,_ze=t=>{let e=t.state.field(js,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:Dy.of(null)}),!0)};class wze{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const Sze=50,Eze=1e3,kze=Mi.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(js).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(js),n=t.state.facet(vi);if(!t.selectionSet&&!t.docChanged&&t.startState.field(js)==e)return;let r=t.transactions.some(s=>{let o=kne(s,n);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(r||o.context.abortOnDocChange&&t.docChanged||o.updates.length+t.transactions.length>Sze&&Date.now()-o.time>Eze){for(let a of o.context.abortListeners)try{a()}catch(l){mo(this.view.state,l)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(s=>s.effects.some(o=>o.is(sE)))&&(this.pendingStart=!0);let i=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of t.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(js);for(let n of e.active)n.isPending&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(vi).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=nf(e),r=new Sne(e,n,t.explicit,this.view),i=new wze(t,r);this.running.push(i),Promise.resolve(t.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:Dy.of(null)}),mo(this.view.state,s)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(vi).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(vi),r=this.view.state.field(js);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let a=nf(s.updates.length?s.updates[0].startState:this.view.state),l=Math.min(a,s.done.from+(s.active.explicit?0:1)),c=new Dm(s.active.source,s.active.explicit,l,s.done,s.done.from,(t=s.done.to)!==null&&t!==void 0?t:a);for(let u of s.updates)c=c.update(u,n);if(c.hasResult()){e.push(c);continue}}let o=r.active.find(a=>a.source==s.active.source);if(o&&o.isPending)if(s.done==null){let a=new Ko(s.active.source,0);for(let l of s.updates)a=a.update(l,n);a.isPending||e.push(a)}else this.startQuery(o)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:PO.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(js,!1);if(e&&e.tooltip&&this.view.state.facet(vi).closeOnBlur){let n=e.open&&rne(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Dy.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:sE.of(!1)}),20),this.composing=0}}}),Cze=typeof navigator=="object"&&/Win/.test(navigator.platform),Tze=jh.highest(Lt.domEventHandlers({keydown(t,e){let n=e.state.field(js,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(Cze&&t.altKey)||t.metaKey)return!1;let r=n.open.options[n.open.selected],i=n.active.find(o=>o.source==r.source),s=r.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(t.key)>-1&&NO(e,r),!1}})),Ane=Lt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class Aze{constructor(e,n,r,i){this.field=e,this.line=n,this.from=r,this.to=i}}class LO{constructor(e,n,r){this.field=e,this.from=n,this.to=r}map(e){let n=e.mapPos(this.from,-1,Ji.TrackDel),r=e.mapPos(this.to,1,Ji.TrackDel);return n==null||r==null?null:new LO(this.field,n,r)}}class RO{constructor(e,n){this.lines=e,this.fieldPositions=n}instantiate(e,n){let r=[],i=[n],s=e.doc.lineAt(n),o=/^\s*/.exec(s.text)[0];for(let l of this.lines){if(r.length){let c=o,u=/^\t*/.exec(l)[0].length;for(let h=0;h<u;h++)c+=e.facet(Qg);i.push(n+c.length-u),l=c+l.slice(u)}r.push(l),n+=l.length+1}let a=this.fieldPositions.map(l=>new LO(l.field,i[l.line]+l.from,i[l.line]+l.to));return{text:r,ranges:a}}static parse(e){let n=[],r=[],i=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(o);){let a=s[1]?+s[1]:null,l=s[2]||s[3]||"",c=-1,u=l.replace(/\\[{}]/g,h=>h[1]);for(let h=0;h<n.length;h++)(a!=null?n[h].seq==a:u&&n[h].name==u)&&(c=h);if(c<0){let h=0;for(;h<n.length&&(a==null||n[h].seq!=null&&n[h].seq<a);)h++;n.splice(h,0,{seq:a,name:u}),c=h;for(let d of i)d.field>=c&&d.field++}i.push(new Aze(c,r.length,s.index,s.index+u.length)),o=o.slice(0,s.index)+l+o.slice(s.index+s[0].length)}o=o.replace(/\\([{}])/g,(a,l,c)=>{for(let u of i)u.line==r.length&&u.from>c&&(u.from--,u.to--);return l}),r.push(o)}return new RO(r,i)}}let Pze=Cn.widget({widget:new class extends Jg{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),Nze=Cn.mark({class:"cm-snippetField"});class e0{constructor(e,n){this.ranges=e,this.active=n,this.deco=Cn.set(e.map(r=>(r.from==r.to?Pze:Nze).range(r.from,r.to)))}map(e){let n=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;n.push(i)}return new e0(n,this.active)}selectionInsideField(e){return e.ranges.every(n=>this.ranges.some(r=>r.field==this.active&&r.from<=n.from&&r.to>=n.to))}}const jv=fn.define({map(t,e){return t&&t.map(e)}}),Lze=fn.define(),My=Ei.define({create(){return null},update(t,e){for(let n of e.effects){if(n.is(jv))return n.value;if(n.is(Lze)&&t)return new e0(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>Lt.decorations.from(t,e=>e?e.deco:Cn.none)});function IO(t,e){return st.create(t.filter(n=>n.field==e).map(n=>st.range(n.from,n.to)))}function Rze(t){let e=RO.parse(t);return(n,r,i,s)=>{let{text:o,ranges:a}=e.instantiate(n.state,i),{main:l}=n.state.selection,c={changes:{from:i,to:s==l.from?l.to:s,insert:Rn.of(o)},scrollIntoView:!0,annotations:r?[AO.of(r),Jr.userEvent.of("input.complete")]:void 0};if(a.length&&(c.selection=IO(a,0)),a.some(u=>u.field>0)){let u=new e0(a,0),h=c.effects=[jv.of(u)];n.state.field(My,!1)===void 0&&h.push(fn.appendConfig.of([My,jze,Fze,Ane]))}n.dispatch(n.state.update(c))}}function Pne(t){return({state:e,dispatch:n})=>{let r=e.field(My,!1);if(!r||t<0&&r.active==0)return!1;let i=r.active+t,s=t>0&&!r.ranges.some(o=>o.field==i+t);return n(e.update({selection:IO(r.ranges,i),effects:jv.of(s?null:new e0(r.ranges,i)),scrollIntoView:!0})),!0}}const Ize=({state:t,dispatch:e})=>t.field(My,!1)?(e(t.update({effects:jv.of(null)})),!0):!1,Oze=Pne(1),Dze=Pne(-1),Mze=[{key:"Tab",run:Oze,shift:Dze},{key:"Escape",run:Ize}],bU=Rt.define({combine(t){return t.length?t[0]:Mze}}),jze=jh.highest(Yk.compute([bU],t=>t.facet(bU)));function Yit(t,e){return Object.assign(Object.assign({},e),{apply:Rze(t)})}const Fze=Lt.domEventHandlers({mousedown(t,e){let n=e.state.field(My,!1),r;if(!n||(r=e.posAtCoords({x:t.clientX,y:t.clientY}))==null)return!1;let i=n.ranges.find(s=>s.from<=r&&s.to>=r);return!i||i.field==n.active?!1:(e.dispatch({selection:IO(n.ranges,i.field),effects:jv.of(n.ranges.some(s=>s.field>i.field)?new e0(n.ranges,i.field):null),scrollIntoView:!0}),!0)}}),aE={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Fd=fn.define({map(t,e){let n=e.mapPos(t,-1,Ji.TrackAfter);return n??void 0}}),OO=new class extends xf{};OO.startSide=1;OO.endSide=-1;const Nne=Ei.define({create(){return Nn.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:r=>r>=n.from&&r<=n.to})}for(let n of e.effects)n.is(Fd)&&(t=t.update({add:[OO.range(n.value,n.value+1)]}));return t}});function Bze(){return[zze,Nne]}const gA="()[]{}<>";function Uze(t){for(let e=0;e<gA.length;e+=2)if(gA.charCodeAt(e)==t)return gA.charAt(e+1);return lO(t<128?t:t+1)}function $ze(t,e){return t.languageDataAt("closeBrackets",e)[0]||aE}const Hze=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),zze=Lt.inputHandler.of((t,e,n,r)=>{if((Hze?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(r.length>2||r.length==2&&Ic(Pa(r,0))==1||e!=i.from||n!=i.to)return!1;let s=Vze(t.state,r);return s?(t.dispatch(s),!0):!1});function Vze(t,e){let n=$ze(t,t.selection.main.head),r=n.brackets||aE.brackets;for(let i of r){let s=Uze(Pa(i,0));if(e==i)return s==i?qze(t,i,r.indexOf(i+i+i)>-1,n):Wze(t,i,s,n.before||aE.before);if(e==s&&Lne(t,t.selection.main.from))return Gze(t,i,s)}return null}function Lne(t,e){let n=!1;return t.field(Nne).between(0,t.doc.length,r=>{r==e&&(n=!0)}),n}function DO(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Ic(Pa(n,0)))}function Wze(t,e,n,r){let i=null,s=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:Fd.of(o.to+e.length),range:st.range(o.anchor+e.length,o.head+e.length)};let a=DO(t.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+n,from:o.head},effects:Fd.of(o.head+e.length),range:st.cursor(o.head+e.length)}:{range:i=o}});return i?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function Gze(t,e,n){let r=null,i=t.changeByRange(s=>s.empty&&DO(t.doc,s.head)==n?{changes:{from:s.head,to:s.head+n.length,insert:n},range:st.cursor(s.head+n.length)}:r={range:s});return r?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function qze(t,e,n,r){let i=r.stringPrefixes||aE.stringPrefixes,s=null,o=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:Fd.of(a.to+e.length),range:st.range(a.anchor+e.length,a.head+e.length)};let l=a.head,c=DO(t.doc,l),u;if(c==e){if(yU(t,l))return{changes:{insert:e+e,from:l},effects:Fd.of(l+e.length),range:st.cursor(l+e.length)};if(Lne(t,l)){let d=n&&t.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+d.length,insert:d},range:st.cursor(l+d.length)}}}else{if(n&&t.sliceDoc(l-2*e.length,l)==e+e&&(u=vU(t,l-2*e.length,i))>-1&&yU(t,u))return{changes:{insert:e+e+e+e,from:l},effects:Fd.of(l+e.length),range:st.cursor(l+e.length)};if(t.charCategorizer(l)(c)!=Qr.Word&&vU(t,l,i)>-1&&!Kze(t,l,e,i))return{changes:{insert:e+e,from:l},effects:Fd.of(l+e.length),range:st.cursor(l+e.length)}}return{range:s=a}});return s?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function yU(t,e){let n=ji(t).resolveInner(e+1);return n.parent&&n.from==e}function Kze(t,e,n,r){let i=ji(t).resolveInner(e,-1),s=r.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+s)),l=a.indexOf(n);if(!l||l>-1&&r.indexOf(a.slice(0,l))>-1){let u=i.firstChild;for(;u&&u.from==i.from&&u.to-u.from>n.length+l;){if(t.sliceDoc(u.to-n.length,u.to)==n)return!1;u=u.firstChild}return!0}let c=i.to==e&&i.parent;if(!c)break;i=c}return!1}function vU(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=Qr.Word)return e;for(let i of n){let s=e-i.length;if(t.sliceDoc(s,e)==i&&r(t.sliceDoc(s-1,s))!=Qr.Word)return s}return-1}function Yze(t={}){return[Tze,js,vi.of(t),kze,Zze,Ane]}const Xze=[{key:"Ctrl-Space",run:gU},{mac:"Alt-`",run:gU},{key:"Escape",run:_ze},{key:"ArrowDown",run:Sw(!0)},{key:"ArrowUp",run:Sw(!1)},{key:"PageDown",run:Sw(!0,"page")},{key:"PageUp",run:Sw(!1,"page")},{key:"Enter",run:Tne}],Zze=jh.highest(Yk.computeN([vi],t=>t.facet(vi).defaultKeymap?[Xze]:[])),Jze=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=jO(t.state,n.from);return r.line?Qze(t):r.block?tVe(t):!1};function MO(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const Qze=MO(iVe,0),eVe=MO(Rne,0),tVe=MO((t,e)=>Rne(t,e,rVe(e)),0);function jO(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const gb=50;function nVe(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-gb,r),o=t.sliceDoc(i,i+gb),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+n.length)==n)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let u,h;i-r<=2*gb?u=h=t.sliceDoc(r,i):(u=t.sliceDoc(r,r+gb),h=t.sliceDoc(i-gb,i));let d=/^\s*/.exec(u)[0].length,f=/\s*$/.exec(h)[0].length,m=h.length-f-n.length;return u.slice(d,d+e.length)==e&&h.slice(m,m+n.length)==n?{open:{pos:r+d+e.length,margin:/\s/.test(u.charAt(d+e.length))?1:0},close:{pos:i-f-n.length,margin:/\s/.test(h.charAt(m-1))?1:0}}:null}function rVe(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function Rne(t,e,n=e.selection.ranges){let r=n.map(s=>jO(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,o)=>nVe(e,r[o],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function iVe(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of n){let a=r.length,l=1e9,c=jO(e,s).line;if(c){for(let u=s;u<=o;){let h=e.doc.lineAt(u);if(h.from>i&&(s==o||o>h.from)){i=h.from;let d=/^\s*/.exec(h.text)[0].length,f=d==h.length,m=h.text.slice(d,d+c.length)==c?d:-1;d<h.text.length&&d<l&&(l=d),r.push({line:h,comment:m,token:c,indent:d,empty:f,single:!1})}u=h.to+1}if(l<1e9)for(let u=a;u<r.length;u++)r[u].indent<r[u].line.text.length&&(r[u].indent=l);r.length==a+1&&(r[a].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:h}of r)(h||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const aN=lu.define(),sVe=lu.define(),oVe=Rt.define(),Ine=Rt.define({combine(t){return Kf(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}}),One=Ei.define({create(){return $l.empty},update(t,e){let n=e.state.facet(Ine),r=e.annotation(aN);if(r){let l=Bs.fromTransaction(e,r.selection),c=r.side,u=c==0?t.undone:t.done;return l?u=lE(u,u.length,n.minDepth,l):u=jne(u,e.startState.selection),new $l(c==0?r.rest:u,c==0?u:r.rest)}let i=e.annotation(sVe);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(Jr.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Bs.fromTransaction(e),o=e.annotation(Jr.time),a=e.annotation(Jr.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new $l(t.done.map(Bs.fromJSON),t.undone.map(Bs.fromJSON))}});function aVe(t={}){return[One,Ine.of(t),Lt.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?Dne:e.inputType=="historyRedo"?lN:null;return r?(e.preventDefault(),r(n)):!1}})]}function Jk(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(One,!1);if(!i)return!1;let s=i.pop(t,n,e);return s?(r(s),!0):!1}}const Dne=Jk(0,!1),lN=Jk(1,!1),lVe=Jk(0,!0),cVe=Jk(1,!0);class Bs{constructor(e,n,r,i,s){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Bs(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Bs(e.changes&&ri.fromJSON(e.changes),[],e.mapped&&Xl.fromJSON(e.mapped),e.startSelection&&st.fromJSON(e.startSelection),e.selectionsAfter.map(st.fromJSON))}static fromTransaction(e,n){let r=Yo;for(let i of e.startState.facet(oVe)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Bs(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,Yo)}static selection(e){return new Bs(void 0,Yo,void 0,void 0,e)}}function lE(t,e,n,r){let i=e+1>n+20?e-n-1:0,s=t.slice(i,e);return s.push(r),s}function uVe(t,e){let n=[],r=!1;return t.iterChangedRanges((i,s)=>n.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<n.length;){let c=n[l++],u=n[l++];a>=c&&o<=u&&(r=!0)}}),r}function hVe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function Mne(t,e){return t.length?e.length?t.concat(e):t:e}const Yo=[],dVe=200;function jne(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-dVe));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),lE(t,t.length-1,1e9,n.setSelAfter(r)))}else return[Bs.selection([e])]}function fVe(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function bA(t,e){if(!t.length)return t;let n=t.length,r=Yo;for(;n;){let i=pVe(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=t.slice(0,n);return s[n-1]=i,s}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[Bs.selection(r)]:Yo}function pVe(t,e,n){let r=Mne(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Yo,n);if(!t.changes)return Bs.selection(r);let i=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Bs(i,fn.mapEffects(t.effects,e),o,t.startSelection.map(s),r)}const mVe=/^(input\.type|delete)($|\.)/;class $l{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new $l(this.done,this.undone):this}addChanges(e,n,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||mVe.test(r))&&(!a.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,uVe(a.changes,e.changes))||r=="input.type.compose")?o=lE(o,o.length-1,i.minDepth,new Bs(e.changes.compose(a.changes),Mne(fn.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Yo)):o=lE(o,o.length,i.minDepth,e),new $l(o,Yo,n,r)}addSelection(e,n,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Yo;return s.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&hVe(s[s.length-1],e)?this:new $l(jne(this.done,e),this.undone,n,r)}addMapping(e){return new $l(bA(this.done,e),bA(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||n.selection;if(r&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:aN.of({side:e,rest:fVe(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=i.length==1?Yo:i.slice(0,i.length-1);return s.mapped&&(a=bA(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:aN.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}$l.empty=new $l(Yo,Yo);const gVe=[{key:"Mod-z",run:Dne,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:lN,preventDefault:!0},{linux:"Ctrl-Shift-z",run:lN,preventDefault:!0},{key:"Mod-u",run:lVe,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:cVe,preventDefault:!0}];function t0(t,e){return st.create(t.ranges.map(e),t.mainIndex)}function lc(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Xa({state:t,dispatch:e},n){let r=t0(t.selection,n);return r.eq(t.selection,!0)?!1:(e(lc(t,r)),!0)}function Qk(t,e){return st.cursor(e?t.to:t.from)}function Fne(t,e){return Xa(t,n=>n.empty?t.moveByChar(n,e):Qk(n,e))}function ss(t){return t.textDirectionAt(t.state.selection.main.head)==yr.LTR}const Bne=t=>Fne(t,!ss(t)),Une=t=>Fne(t,ss(t));function $ne(t,e){return Xa(t,n=>n.empty?t.moveByGroup(n,e):Qk(n,e))}const bVe=t=>$ne(t,!ss(t)),yVe=t=>$ne(t,ss(t));function vVe(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function e5(t,e,n){let r=ji(t).resolveInner(e.head),i=n?mn.closedBy:mn.openedBy;for(let l=e.head;;){let c=n?r.childAfter(l):r.childBefore(l);if(!c)break;vVe(t,c,i)?r=c:l=n?c.to:c.from}let s=r.type.prop(i),o,a;return s&&(o=n?Ul(t,r.from,1):Ul(t,r.to,-1))&&o.matched?a=n?o.end.to:o.end.from:a=n?r.to:r.from,st.cursor(a,n?-1:1)}const xVe=t=>Xa(t,e=>e5(t.state,e,!ss(t))),_Ve=t=>Xa(t,e=>e5(t.state,e,ss(t)));function Hne(t,e){return Xa(t,n=>{if(!n.empty)return Qk(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const zne=t=>Hne(t,!1),Vne=t=>Hne(t,!0);function Wne(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(Lt.scrollMargins)){let o=s(t);o?.top&&(n=Math.max(o?.top,n)),o?.bottom&&(r=Math.max(o?.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function Gne(t,e){let n=Wne(t),{state:r}=t,i=t0(r.selection,o=>o.empty?t.moveVertically(o,e,n.height):Qk(o,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(r.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,c=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(s=Lt.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(lc(r,i),{effects:s}),!0}const xU=t=>Gne(t,!1),cN=t=>Gne(t,!0);function Fh(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=st.cursor(r.from+s))}return i}const wVe=t=>Xa(t,e=>Fh(t,e,!0)),SVe=t=>Xa(t,e=>Fh(t,e,!1)),EVe=t=>Xa(t,e=>Fh(t,e,!ss(t))),kVe=t=>Xa(t,e=>Fh(t,e,ss(t))),CVe=t=>Xa(t,e=>st.cursor(t.lineBlockAt(e.head).from,1)),TVe=t=>Xa(t,e=>st.cursor(t.lineBlockAt(e.head).to,-1));function AVe(t,e,n){let r=!1,i=t0(t.selection,s=>{let o=Ul(t,s.head,-1)||Ul(t,s.head,1)||s.head>0&&Ul(t,s.head-1,1)||s.head<t.doc.length&&Ul(t,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return st.cursor(a)});return r?(e(lc(t,i)),!0):!1}const PVe=({state:t,dispatch:e})=>AVe(t,e);function da(t,e){let n=t0(t.state.selection,r=>{let i=e(r);return st.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(lc(t.state,n)),!0)}function qne(t,e){return da(t,n=>t.moveByChar(n,e))}const Kne=t=>qne(t,!ss(t)),Yne=t=>qne(t,ss(t));function Xne(t,e){return da(t,n=>t.moveByGroup(n,e))}const NVe=t=>Xne(t,!ss(t)),LVe=t=>Xne(t,ss(t)),RVe=t=>da(t,e=>e5(t.state,e,!ss(t))),IVe=t=>da(t,e=>e5(t.state,e,ss(t)));function Zne(t,e){return da(t,n=>t.moveVertically(n,e))}const Jne=t=>Zne(t,!1),Qne=t=>Zne(t,!0);function ere(t,e){return da(t,n=>t.moveVertically(n,e,Wne(t).height))}const _U=t=>ere(t,!1),wU=t=>ere(t,!0),OVe=t=>da(t,e=>Fh(t,e,!0)),DVe=t=>da(t,e=>Fh(t,e,!1)),MVe=t=>da(t,e=>Fh(t,e,!ss(t))),jVe=t=>da(t,e=>Fh(t,e,ss(t))),FVe=t=>da(t,e=>st.cursor(t.lineBlockAt(e.head).from)),BVe=t=>da(t,e=>st.cursor(t.lineBlockAt(e.head).to)),SU=({state:t,dispatch:e})=>(e(lc(t,{anchor:0})),!0),EU=({state:t,dispatch:e})=>(e(lc(t,{anchor:t.doc.length})),!0),kU=({state:t,dispatch:e})=>(e(lc(t,{anchor:t.selection.main.anchor,head:0})),!0),CU=({state:t,dispatch:e})=>(e(lc(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),UVe=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),$Ve=({state:t,dispatch:e})=>{let n=t5(t).map(({from:r,to:i})=>st.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:st.create(n),userEvent:"select"})),!0},HVe=({state:t,dispatch:e})=>{let n=t0(t.selection,r=>{let i=ji(t),s=i.resolveStack(r.from,1);if(r.empty){let o=i.resolveStack(r.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:a}=o;if((a.from<r.from&&a.to>=r.to||a.to>r.to&&a.from<=r.from)&&o.next)return st.range(a.to,a.from)}return r});return n.eq(t.selection)?!1:(e(lc(t,n)),!0)},zVe=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=st.create([n.main]):n.main.empty||(r=st.create([st.cursor(n.main.head)])),r?(e(lc(t,r)),!0):!1};function Fv(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=Ew(t,l,!1)):l>o&&(n="delete.forward",l=Ew(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Ew(t,o,!1),a=Ew(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:st.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Lt.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Ew(t,e,n){if(t instanceof Lt)for(let r of t.state.facet(Lt.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const tre=(t,e,n)=>Fv(t,r=>{let i=r.from,{state:s}=t,o=s.doc.lineAt(i),a,l;if(n&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,i-o.from))){if(a[a.length-1]=="	")return i-1;let c=Vk(a,s.tabSize),u=c%rE(s)||rE(s);for(let h=0;h<u&&a[a.length-1-h]==" ";h++)i--;l=i}else l=Oi(o.text,i-o.from,e,e)+o.from,l==i&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,i-o.from))&&(l=Oi(o.text,l-o.from,!1,!1)+o.from);return l}),uN=t=>tre(t,!1,!0),nre=t=>tre(t,!0,!1),rre=(t,e)=>Fv(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=Oi(s.text,r-s.from,e)+s.from,c=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||r!=n.head)&&(a=u),r=l}return r}),ire=t=>rre(t,!1),VVe=t=>rre(t,!0),WVe=t=>Fv(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),GVe=t=>Fv(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),qVe=t=>Fv(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),KVe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Rn.of(["",""])},range:st.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},YVe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),o=i==s.from?i-1:Oi(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:Oi(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(i,a).append(t.doc.slice(o,i))},range:st.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function t5(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function sre(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of t5(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)i.push(st.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)i.push(st.range(l.anchor-a,l.head-a))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:st.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const XVe=({state:t,dispatch:e})=>sre(t,e,!1),ZVe=({state:t,dispatch:e})=>sre(t,e,!0);function ore(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of t5(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const JVe=({state:t,dispatch:e})=>ore(t,e,!1),QVe=({state:t,dispatch:e})=>ore(t,e,!0),eWe=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(t5(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=t0(e.selection,i=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(i.head),a=t.coordsAtPos(i.head,i.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function tWe(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=ji(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(mn.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const TU=are(!1),nWe=are(!0);function are(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!t&&s==o&&tWe(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new Xk(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=kO(c,s);for(u==null&&(u=Vk(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let h=["",Oy(e,u)];return l&&h.push(Oy(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:Rn.of(h)},range:st.cursor(s+1+h[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function FO(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=t.doc.lineAt(o);a.number>n&&(r.empty||r.to>a.from)&&(e(a,i,r),n=a.number),o=a.to+1}let s=t.changes(i);return{changes:i,range:st.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const rWe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new Xk(t,{overrideIndentation:s=>{let o=n[s];return o??-1}}),i=FO(t,(s,o,a)=>{let l=kO(r,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let c=/^\s*/.exec(s.text)[0],u=Oy(t,l);(c!=u||a.from<s.from+c.length)&&(n[s.from]=l,o.push({from:s.from,to:s.from+c.length,insert:u}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},iWe=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(FO(t,(n,r)=>{r.push({from:n.from,insert:t.facet(Qg)})}),{userEvent:"input.indent"})),!0),lre=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(FO(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=Vk(i,t.tabSize),o=0,a=Oy(t,Math.max(0,s-rE(t)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),sWe=t=>(t.setTabFocusMode(),!0),oWe=[{key:"Ctrl-b",run:Bne,shift:Kne,preventDefault:!0},{key:"Ctrl-f",run:Une,shift:Yne},{key:"Ctrl-p",run:zne,shift:Jne},{key:"Ctrl-n",run:Vne,shift:Qne},{key:"Ctrl-a",run:CVe,shift:FVe},{key:"Ctrl-e",run:TVe,shift:BVe},{key:"Ctrl-d",run:nre},{key:"Ctrl-h",run:uN},{key:"Ctrl-k",run:WVe},{key:"Ctrl-Alt-h",run:ire},{key:"Ctrl-o",run:KVe},{key:"Ctrl-t",run:YVe},{key:"Ctrl-v",run:cN}],aWe=[{key:"ArrowLeft",run:Bne,shift:Kne,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:bVe,shift:NVe,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:EVe,shift:MVe,preventDefault:!0},{key:"ArrowRight",run:Une,shift:Yne,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:yVe,shift:LVe,preventDefault:!0},{mac:"Cmd-ArrowRight",run:kVe,shift:jVe,preventDefault:!0},{key:"ArrowUp",run:zne,shift:Jne,preventDefault:!0},{mac:"Cmd-ArrowUp",run:SU,shift:kU},{mac:"Ctrl-ArrowUp",run:xU,shift:_U},{key:"ArrowDown",run:Vne,shift:Qne,preventDefault:!0},{mac:"Cmd-ArrowDown",run:EU,shift:CU},{mac:"Ctrl-ArrowDown",run:cN,shift:wU},{key:"PageUp",run:xU,shift:_U},{key:"PageDown",run:cN,shift:wU},{key:"Home",run:SVe,shift:DVe,preventDefault:!0},{key:"Mod-Home",run:SU,shift:kU},{key:"End",run:wVe,shift:OVe,preventDefault:!0},{key:"Mod-End",run:EU,shift:CU},{key:"Enter",run:TU,shift:TU},{key:"Mod-a",run:UVe},{key:"Backspace",run:uN,shift:uN},{key:"Delete",run:nre},{key:"Mod-Backspace",mac:"Alt-Backspace",run:ire},{key:"Mod-Delete",mac:"Alt-Delete",run:VVe},{mac:"Mod-Backspace",run:GVe},{mac:"Mod-Delete",run:qVe}].concat(oWe.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),lWe=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:xVe,shift:RVe},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:_Ve,shift:IVe},{key:"Alt-ArrowUp",run:XVe},{key:"Shift-Alt-ArrowUp",run:JVe},{key:"Alt-ArrowDown",run:ZVe},{key:"Shift-Alt-ArrowDown",run:QVe},{key:"Escape",run:zVe},{key:"Mod-Enter",run:nWe},{key:"Alt-l",mac:"Ctrl-l",run:$Ve},{key:"Mod-i",run:HVe,preventDefault:!0},{key:"Mod-[",run:lre},{key:"Mod-]",run:iWe},{key:"Mod-Alt-\\",run:rWe},{key:"Shift-Mod-k",run:eWe},{key:"Shift-Mod-\\",run:PVe},{key:"Mod-/",run:Jze},{key:"Alt-A",run:eVe},{key:"Ctrl-m",mac:"Shift-Alt-m",run:sWe}].concat(aWe);function Ni(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)cre(t,arguments[e]);return t}function cre(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)cre(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const AU=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class jy{constructor(e,n,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(AU(a)):AU,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Pa(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=lO(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Ic(e);let i=this.normalize(n);if(i.length)for(let s=0,o=r;;s++){let a=i.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==i.length-1){if(l)return this.value=l,this;break}o==r&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(jy.prototype[Symbol.iterator]=function(){return this});const ure={from:-1,to:-1,match:/.*/.exec("")},BO="gm"+(/x/.unicode==null?"":"u");class hre{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=ure,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new dre(e,n,r,i,s);this.re=new RegExp(n,BO+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=cE(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=cE(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const yA=new WeakMap;class Mm{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=yA.get(e);if(!i||i.from>=r||i.to<=n){let a=new Mm(n,e.sliceString(n,r));return yA.set(e,a),a}if(i.from==n&&i.to==r)return i;let{text:s,from:o}=i;return o>n&&(s=e.sliceString(n,o)+s,o=n),i.to<r&&(s+=e.sliceString(i.to,r)),yA.set(e,new Mm(o,s)),new Mm(n,s.slice(n-o,r-o))}}class dre{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=ure,this.matchPos=cE(e,i),this.re=new RegExp(n,BO+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=Mm.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=cE(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Mm.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(hre.prototype[Symbol.iterator]=dre.prototype[Symbol.iterator]=function(){return this});function cWe(t){try{return new RegExp(t,BO),!0}catch{return!1}}function cE(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function hN(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Ni("input",{class:"cm-textfield",name:"line",value:e}),r=Ni("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:E1.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},Ni("label",t.state.phrase("Go to line"),": ",n)," ",Ni("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),Ni("button",{name:"close",onclick:()=>{t.dispatch({effects:E1.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,h]=s,d=u?+u.slice(1):0,f=c?+c:a.number;if(c&&h){let b=f/100;l&&(b=b*(l=="-"?-1:1)+a.number/o.doc.lines),f=Math.round(o.doc.lines*b)}else c&&l&&(f=f*(l=="-"?-1:1)+a.number);let m=o.doc.line(Math.max(1,Math.min(o.doc.lines,f))),g=st.cursor(m.from+Math.max(0,Math.min(d,m.length)));t.dispatch({effects:[E1.of(!1),Lt.scrollIntoView(g.from,{y:"center"})],selection:g}),t.focus()}return{dom:r}}const E1=fn.define(),PU=Ei.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(E1)&&(t=n.value);return t},provide:t=>JS.from(t,e=>e?hN:null)}),uWe=t=>{let e=ZS(t,hN);if(!e){let n=[E1.of(!0)];t.state.field(PU,!1)==null&&n.push(fn.appendConfig.of([PU,hWe])),t.dispatch({effects:n}),e=ZS(t,hN)}return e&&e.dom.querySelector("input").select(),!0},hWe=Lt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),dWe=({state:t,dispatch:e})=>{let{selection:n}=t,r=st.create(n.ranges.map(i=>t.wordAt(i.head)||st.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function fWe(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let o=!1,a=new jy(t.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new jy(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const pWe=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return dWe({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=fWe(t,r);return i?(e(t.update({selection:t.selection.addRange(st.range(i.from,i.to),!1),effects:Lt.scrollIntoView(i.to)})),!0):!1},n0=Rt.define({combine(t){return Kf(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new CWe(e),scrollToMatch:e=>Lt.scrollIntoView(e)})}});class fre{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||cWe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new yWe(this):new gWe(this)}getCursor(e,n=0,r){let i=e.doc?e:Sn.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Xp(this,i,n,r):Yp(this,i,n,r)}}class pre{constructor(e){this.spec=e}}function Yp(t,e,n,r){return new jy(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?mWe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function mWe(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(uE(i,n-s))!=Qr.Word||e(hE(i,n-s))!=Qr.Word)&&(e(hE(i,r-s))!=Qr.Word||e(uE(i,r-s))!=Qr.Word))}class gWe extends pre{constructor(e){super(e)}nextMatch(e,n,r){let i=Yp(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=Yp(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),o=Yp(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=Yp(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Yp(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Xp(t,e,n,r){return new hre(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?bWe(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function uE(t,e){return t.slice(Oi(t,e,!1),e)}function hE(t,e){return t.slice(e,Oi(t,e))}function bWe(t){return(e,n,r)=>!r[0].length||(t(uE(r.input,r.index))!=Qr.Word||t(hE(r.input,r.index))!=Qr.Word)&&(t(hE(r.input,r.index+r[0].length))!=Qr.Word||t(uE(r.input,r.index+r[0].length))!=Qr.Word)}class yWe extends pre{nextMatch(e,n,r){let i=Xp(this.spec,e,r,e.doc.length).next();return i.done&&(i=Xp(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),o=Xp(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=Xp(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Xp(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const Fy=fn.define(),UO=fn.define(),lh=Ei.define({create(t){return new vA(dN(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Fy)?t=new vA(n.value.create(),t.panel):n.is(UO)&&(t=new vA(t.query,n.value?$O:null));return t},provide:t=>JS.from(t,e=>e.panel)});class vA{constructor(e,n){this.query=e,this.panel=n}}const vWe=Cn.mark({class:"cm-searchMatch"}),xWe=Cn.mark({class:"cm-searchMatch cm-searchMatch-selected"}),_We=Mi.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(lh))}update(t){let e=t.state.field(lh);(e!=t.startState.field(lh)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Cn.none;let{view:n}=this,r=new _f;for(let i=0,s=n.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-2*250;)l=s[++i].to;t.highlight(n.state,a,l,(c,u)=>{let h=n.state.selection.ranges.some(d=>d.from==c&&d.to==u);r.add(c,u,h?xWe:vWe)})}return r.finish()}},{decorations:t=>t.decorations});function Bv(t){return e=>{let n=e.state.field(lh,!1);return n&&n.query.spec.valid?t(e,n):bre(e)}}const dE=Bv((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=st.single(r.from,r.to),s=t.state.facet(n0);return t.dispatch({selection:i,effects:[HO(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),gre(t),!0}),fE=Bv((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=st.single(i.from,i.to),o=t.state.facet(n0);return t.dispatch({selection:s,effects:[HO(t,i),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),gre(t),!0}),wWe=Bv((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:st.create(n.map(r=>st.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),SWe=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],o=0;for(let a=new jy(t.doc,t.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(st.range(a.value.from,a.value.to))}return e(t.update({selection:st.create(s,o),userEvent:"select.search.matches"})),!0},NU=Bv((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let o=s,a=[],l,c,u=[];if(o.from==r&&o.to==i&&(c=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(n,o.from,o.to),u.push(Lt.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),o){let h=a.length==0||a[0].from>=s.to?0:s.to-s.from-c.length;l=st.single(o.from-h,o.to-h),u.push(HO(t,o)),u.push(n.facet(n0).scrollToMatch(l.main,t))}return t.dispatch({changes:a,selection:l,effects:u,userEvent:"input.replace"}),!0}),EWe=Bv((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Lt.announce.of(r),userEvent:"input.replace.all"}),!0});function $O(t){return t.state.facet(n0).createPanel(t)}function dN(t,e){var n,r,i,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(n0);return new fre({search:((n=e?.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e?.caseSensitive)!==null&&r!==void 0?r:c.caseSensitive,literal:(i=e?.literal)!==null&&i!==void 0?i:c.literal,regexp:(s=e?.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function mre(t){let e=ZS(t,$O);return e&&e.dom.querySelector("[main-field]")}function gre(t){let e=mre(t);e&&e==t.root.activeElement&&e.select()}const bre=t=>{let e=t.state.field(lh,!1);if(e&&e.panel){let n=mre(t);if(n&&n!=t.root.activeElement){let r=dN(t.state,e.query.spec);r.valid&&t.dispatch({effects:Fy.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[UO.of(!0),e?Fy.of(dN(t.state,e.query.spec)):fn.appendConfig.of(AWe)]});return!0},yre=t=>{let e=t.state.field(lh,!1);if(!e||!e.panel)return!1;let n=ZS(t,$O);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:UO.of(!1)}),!0},kWe=[{key:"Mod-f",run:bre,scope:"editor search-panel"},{key:"F3",run:dE,shift:fE,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:dE,shift:fE,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:yre,scope:"editor search-panel"},{key:"Mod-Shift-l",run:SWe},{key:"Mod-Alt-g",run:uWe},{key:"Mod-d",run:pWe,preventDefault:!0}];class CWe{constructor(e){this.view=e;let n=this.query=e.state.field(lh).query.spec;this.commit=this.commit.bind(this),this.searchField=Ni("input",{value:n.search,placeholder:ro(e,"Find"),"aria-label":ro(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ni("input",{value:n.replace,placeholder:ro(e,"Replace"),"aria-label":ro(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ni("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Ni("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Ni("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,o){return Ni("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=Ni("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>dE(e),[ro(e,"next")]),r("prev",()=>fE(e),[ro(e,"previous")]),r("select",()=>wWe(e),[ro(e,"all")]),Ni("label",null,[this.caseField,ro(e,"match case")]),Ni("label",null,[this.reField,ro(e,"regexp")]),Ni("label",null,[this.wordField,ro(e,"by word")]),...e.state.readOnly?[]:[Ni("br"),this.replaceField,r("replace",()=>NU(e),[ro(e,"replace")]),r("replaceAll",()=>EWe(e),[ro(e,"replace all")])],Ni("button",{name:"close",onclick:()=>yre(e),"aria-label":ro(e,"close"),type:"button"},[""])])}commit(){let e=new fre({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Fy.of(e)}))}keydown(e){h$e(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?fE:dE)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),NU(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(Fy)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(n0).top}}function ro(t,e){return t.state.phrase(e)}const kw=30,Cw=/[\s\.,:;?!]/;function HO(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-kw),o=Math.min(i,n+kw),a=t.state.sliceDoc(s,o);if(s!=r.from){for(let l=0;l<kw;l++)if(!Cw.test(a[l+1])&&Cw.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-kw;l--)if(!Cw.test(a[l-1])&&Cw.test(a[l])){a=a.slice(0,l);break}}return Lt.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${r.number}.`)}const TWe=Lt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),AWe=[lh,jh.low(_We),TWe];function PWe(){return p.jsx("div",{className:"flex items-center justify-center absolute inset-0 z-10 text-sm bg-tk-elements-app-backgroundColor text-tk-elements-app-textColor",children:"File format cannot be displayed."})}function pE(){return pE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pE.apply(null,arguments)}var vre=t=>{var{theme:e,settings:n={},styles:r=[]}=t,i={".cm-gutters":{}},s={};n.background&&(s.backgroundColor=n.background),n.backgroundImage&&(s.backgroundImage=n.backgroundImage),n.foreground&&(s.color=n.foreground),n.fontSize&&(s.fontSize=n.fontSize),(n.background||n.foreground)&&(i["&"]=s),n.fontFamily&&(i["&.cm-editor .cm-scroller"]={fontFamily:n.fontFamily}),n.gutterBackground&&(i[".cm-gutters"].backgroundColor=n.gutterBackground),n.gutterForeground&&(i[".cm-gutters"].color=n.gutterForeground),n.gutterBorder&&(i[".cm-gutters"].borderRightColor=n.gutterBorder),n.caret&&(i[".cm-content"]={caretColor:n.caret},i[".cm-cursor, .cm-dropCursor"]={borderLeftColor:n.caret});var o={};n.gutterActiveForeground&&(o.color=n.gutterActiveForeground),n.lineHighlight&&(i[".cm-activeLine"]={backgroundColor:n.lineHighlight},o.backgroundColor=n.lineHighlight),i[".cm-activeLineGutter"]=o,n.selection&&(i["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:n.selection+" !important"}),n.selectionMatch&&(i["& .cm-selectionMatch"]={backgroundColor:n.selectionMatch});var a=Lt.theme(i,{dark:e==="dark"}),l=Zk.define(r),c=[a,$He(l)];return c},NWe={background:"#ffffff",foreground:"#383a42",caret:"#000",selection:"#add6ff",selectionMatch:"#a8ac94",lineHighlight:"#99999926",gutterBackground:"#fff",gutterForeground:"#237893",gutterActiveForeground:"#0b216f",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},LWe=[{tag:[Ge.keyword,Ge.operatorKeyword,Ge.modifier,Ge.color,Ge.constant(Ge.name),Ge.standard(Ge.name),Ge.standard(Ge.tagName),Ge.special(Ge.brace),Ge.atom,Ge.bool,Ge.special(Ge.variableName)],color:"#0000ff"},{tag:[Ge.moduleKeyword,Ge.controlKeyword],color:"#af00db"},{tag:[Ge.name,Ge.deleted,Ge.character,Ge.macroName,Ge.propertyName,Ge.variableName,Ge.labelName,Ge.definition(Ge.name)],color:"#0070c1"},{tag:Ge.heading,fontWeight:"bold",color:"#0070c1"},{tag:[Ge.typeName,Ge.className,Ge.tagName,Ge.number,Ge.changed,Ge.annotation,Ge.self,Ge.namespace],color:"#267f99"},{tag:[Ge.function(Ge.variableName),Ge.function(Ge.propertyName)],color:"#795e26"},{tag:[Ge.number],color:"#098658"},{tag:[Ge.operator,Ge.punctuation,Ge.separator,Ge.url,Ge.escape,Ge.regexp],color:"#383a42"},{tag:[Ge.regexp],color:"#af00db"},{tag:[Ge.special(Ge.string),Ge.processingInstruction,Ge.string,Ge.inserted],color:"#a31515"},{tag:[Ge.angleBracket],color:"#383a42"},{tag:Ge.strong,fontWeight:"bold"},{tag:Ge.emphasis,fontStyle:"italic"},{tag:Ge.strikethrough,textDecoration:"line-through"},{tag:[Ge.meta,Ge.comment],color:"#008000"},{tag:Ge.link,color:"#4078f2",textDecoration:"underline"},{tag:Ge.invalid,color:"#e45649"}];function RWe(t){var{theme:e="light",settings:n={},styles:r=[]}={};return vre({theme:e,settings:pE({},NWe,n),styles:[...LWe,...r]})}var IWe=RWe(),OWe={background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},DWe=[{tag:[Ge.keyword,Ge.operatorKeyword,Ge.modifier,Ge.color,Ge.constant(Ge.name),Ge.standard(Ge.name),Ge.standard(Ge.tagName),Ge.special(Ge.brace),Ge.atom,Ge.bool,Ge.special(Ge.variableName)],color:"#569cd6"},{tag:[Ge.controlKeyword,Ge.moduleKeyword],color:"#c586c0"},{tag:[Ge.name,Ge.deleted,Ge.character,Ge.macroName,Ge.propertyName,Ge.variableName,Ge.labelName,Ge.definition(Ge.name)],color:"#9cdcfe"},{tag:Ge.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[Ge.typeName,Ge.className,Ge.tagName,Ge.number,Ge.changed,Ge.annotation,Ge.self,Ge.namespace],color:"#4ec9b0"},{tag:[Ge.function(Ge.variableName),Ge.function(Ge.propertyName)],color:"#dcdcaa"},{tag:[Ge.number],color:"#b5cea8"},{tag:[Ge.operator,Ge.punctuation,Ge.separator,Ge.url,Ge.escape,Ge.regexp],color:"#d4d4d4"},{tag:[Ge.regexp],color:"#d16969"},{tag:[Ge.special(Ge.string),Ge.processingInstruction,Ge.string,Ge.inserted],color:"#ce9178"},{tag:[Ge.angleBracket],color:"#808080"},{tag:Ge.strong,fontWeight:"bold"},{tag:Ge.emphasis,fontStyle:"italic"},{tag:Ge.strikethrough,textDecoration:"line-through"},{tag:[Ge.meta,Ge.comment],color:"#6a9955"},{tag:Ge.link,color:"#6a9955",textDecoration:"underline"},{tag:Ge.invalid,color:"#ff0000"}];function MWe(t){var{theme:e="dark",settings:n={},styles:r=[]}={};return vre({theme:e,settings:pE({},OWe,n),styles:[...DWe,...r]})}var jWe=MWe();Lt.theme({},{dark:!0});const fN=new Zg;function FWe(t,e={}){return[BWe(e),t==="dark"?fN.of([wre()]):fN.of([_re()])]}function xre(t){return fN.reconfigure(t==="dark"?wre():_re())}function BWe(t){return Lt.theme({"&":{fontSize:t.fontSize??"12px"},"&.cm-editor":{height:"100%",background:"var(--cm-backgroundColor)",color:"var(--cm-textColor)"},".cm-cursor":{borderLeft:"var(--cm-cursor-width) solid var(--cm-cursor-backgroundColor)"},".cm-scroller":{lineHeight:"1.5","&:focus-visible":{outline:"none"}},".cm-line":{padding:"0 0 0 4px"},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{backgroundColor:"var(--cm-selection-backgroundColorFocused) !important",opacity:"var(--cm-selection-backgroundOpacityFocused, 0.3)"},"&:not(.cm-focused) > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{backgroundColor:"var(--cm-selection-backgroundColorBlured)",opacity:"var(--cm-selection-backgroundOpacityBlured, 0.3)"},"&.cm-focused > .cm-scroller .cm-matchingBracket":{backgroundColor:"var(--cm-matching-bracket)"},".cm-activeLine":{background:"var(--cm-activeLineBackgroundColor)"},".cm-gutters":{background:"var(--cm-gutter-backgroundColor)",borderRight:0,color:"var(--cm-gutter-textColor)"},".cm-gutter":{"&.cm-lineNumbers":{fontFamily:"Roboto Mono, monospace",fontSize:t.gutterFontSize??t.fontSize??"12px",minWidth:"40px"},"& .cm-activeLineGutter":{background:"transparent",color:"var(--cm-gutter-activeLineTextColor)"},"&.cm-foldGutter .cm-gutterElement > .fold-icon":{cursor:"pointer",color:"var(--cm-foldGutter-textColor)",transform:"translateY(2px)","&:hover":{color:"var(--cm-foldGutter-textColorHover)"}}},".cm-foldGutter .cm-gutterElement":{padding:"0 4px"},".cm-tooltip-autocomplete > ul > li":{minHeight:"18px"},".cm-panel.cm-search label":{marginLeft:"2px",fontSize:"12px"},".cm-panel.cm-search .cm-button":{fontSize:"12px"},".cm-panel.cm-search .cm-textfield":{fontSize:"12px"},".cm-panel.cm-search input[type=checkbox]":{position:"relative",transform:"translateY(2px)",marginRight:"4px"},".cm-panels":{borderColor:"var(--cm-panels-borderColor)"},".cm-panels-bottom":{borderTop:"1px solid var(--cm-panels-borderColor)",backgroundColor:"transparent"},".cm-panel.cm-search":{background:"var(--cm-search-backgroundColor)",color:"var(--cm-search-textColor)",padding:"8px"},".cm-search .cm-button":{background:"var(--cm-search-button-backgroundColor)",borderColor:"var(--cm-search-button-borderColor)",color:"var(--cm-search-button-textColor)",borderRadius:"4px","&:hover":{color:"var(--cm-search-button-textColorHover)"},"&:focus-visible":{outline:"none",borderColor:"var(--cm-search-button-borderColorFocused)"},"&:hover:not(:focus-visible)":{background:"var(--cm-search-button-backgroundColorHover)",borderColor:"var(--cm-search-button-borderColorHover)"},"&:hover:focus-visible":{background:"var(--cm-search-button-backgroundColorHover)",borderColor:"var(--cm-search-button-borderColorFocused)"}},".cm-panel.cm-search [name=close]":{top:"6px",right:"6px",padding:"0 6px",fontSize:"1rem",backgroundColor:"var(--cm-search-closeButton-backgroundColor)",color:"var(--cm-search-closeButton-textColor)","&:hover":{"border-radius":"6px",color:"var(--cm-search-closeButton-textColorHover)",backgroundColor:"var(--cm-search-closeButton-backgroundColorHover)"}},".cm-search input":{background:"var(--cm-search-input-backgroundColor)",borderColor:"var(--cm-search-input-borderColor)",color:"var(--cm-search-input-textColor)",outline:"none",borderRadius:"4px","&:focus-visible":{borderColor:"var(--cm-search-input-borderColorFocused)"}},".cm-tooltip":{background:"var(--cm-tooltip-backgroundColor)",border:"1px solid transparent",borderColor:"var(--cm-tooltip-borderColor)",color:"var(--cm-tooltip-textColor)"},".cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected]":{background:"var(--cm-tooltip-backgroundColorSelected)",color:"var(--cm-tooltip-textColorSelected)"},".cm-searchMatch":{backgroundColor:"var(--cm-searchMatch-backgroundColor)"},".cm-tooltip.cm-readonly-tooltip":{padding:"4px",whiteSpace:"nowrap",backgroundColor:"var(--bolt-elements-bg-depth-2)",borderColor:"var(--bolt-elements-borderColorActive)","& .cm-tooltip-arrow:before":{borderTopColor:"var(--bolt-elements-borderColorActive)"},"& .cm-tooltip-arrow:after":{borderTopColor:"transparent"}}})}function _re(){return IWe}function wre(){return jWe}const UWe={key:"Tab",run:$We,shift:lre};function $We({state:t,dispatch:e}){return t.readOnly?!1:(e(t.update(HWe(t,(n,r,i)=>{i.push({from:n,to:r,insert:t.facet(Qg)})}),{userEvent:"input.indent"})),!0)}function HWe(t,e){return t.changeByRange(n=>{const r=[],i=t.doc.lineAt(n.from);if(n.from===n.to)e(n.from,void 0,r,i);else if(n.from<n.to&&n.to<=i.to)e(n.from,n.to,r,i);else{let o=-1;for(let a=n.from;a<=n.to;){const l=t.doc.lineAt(a);l.number>o&&(n.empty||n.to>l.from)&&(e(l.from,void 0,r,l),o=l.number),a=l.to+1}}const s=t.changes(r);return{changes:r,range:st.range(s.mapPos(n.anchor,1),s.mapPos(n.head,1))}})}const zWe=[Pi.of({name:"VUE",extensions:["vue"],async load(){return ye(()=>import("./index-3qzvSMVQ.js"),__vite__mapDeps([99,100,101,1,2,3,102,4,5,103])).then(t=>t.vue())}}),Pi.of({name:"TS",extensions:["ts"],async load(){return ye(()=>import("./index-CNu7eLcY.js"),__vite__mapDeps([103,101,1,2,3,4,5])).then(t=>t.javascript({typescript:!0}))}}),Pi.of({name:"JS",extensions:["js","mjs","cjs"],async load(){return ye(()=>import("./index-CNu7eLcY.js"),__vite__mapDeps([103,101,1,2,3,4,5])).then(t=>t.javascript())}}),Pi.of({name:"TSX",extensions:["tsx"],async load(){return ye(()=>import("./index-CNu7eLcY.js"),__vite__mapDeps([103,101,1,2,3,4,5])).then(t=>t.javascript({jsx:!0,typescript:!0}))}}),Pi.of({name:"JSX",extensions:["jsx"],async load(){return ye(()=>import("./index-CNu7eLcY.js"),__vite__mapDeps([103,101,1,2,3,4,5])).then(t=>t.javascript({jsx:!0}))}}),Pi.of({name:"HTML",extensions:["html"],async load(){return ye(()=>import("./index-C-79LYRP.js"),__vite__mapDeps([100,101,1,2,3,102,4,5,103])).then(t=>t.html())}}),Pi.of({name:"CSS",extensions:["css"],async load(){return ye(()=>import("./index-B0Mday8L.js"),__vite__mapDeps([102,101,1,2,3,4,5])).then(t=>t.css())}}),Pi.of({name:"SASS",extensions:["sass"],async load(){return ye(()=>import("./index-B-zBHrsd.js"),__vite__mapDeps([104,101,1,2,3,102,4,5])).then(t=>t.sass({indented:!0}))}}),Pi.of({name:"SCSS",extensions:["scss"],async load(){return ye(()=>import("./index-B-zBHrsd.js"),__vite__mapDeps([104,101,1,2,3,102,4,5])).then(t=>t.sass({indented:!1}))}}),Pi.of({name:"JSON",extensions:["json"],async load(){return ye(()=>import("./index-CHmdD3mr.js"),__vite__mapDeps([105,101,1,2,3,4,5])).then(t=>t.json())}}),Pi.of({name:"Markdown",extensions:["md"],async load(){return ye(()=>import("./index-D4akM7ai.js"),__vite__mapDeps([106,100,101,1,2,3,102,4,5,103])).then(t=>t.markdown())}}),Pi.of({name:"Wasm",extensions:["wat"],async load(){return ye(()=>import("./index-9p206cjr.js"),__vite__mapDeps([107,101,1,2,3,4,5])).then(t=>t.wast())}}),Pi.of({name:"Python",extensions:["py"],async load(){return ye(()=>import("./index-Dcpw_2fZ.js"),__vite__mapDeps([108,101,1,2,3,4,5])).then(t=>t.python())}}),Pi.of({name:"C++",extensions:["cpp"],async load(){return ye(()=>import("./index-FUeV-qdY.js"),__vite__mapDeps([109,101,1,2,3,4,5])).then(t=>t.cpp())}})];async function VWe(t){const e=Pi.matchFilename(zWe,t);if(e)return await e.load()}const WWe=Ws("CodeMirrorEditor"),Sre=fn.define(),GWe=Ei.define({create:()=>[],update(t,e){if(!e.state.readOnly)return[];for(const n of e.effects)if(n.is(Sre)&&n.value)return YWe(e.state);return[]},provide:t=>_O.computeN([t],e=>e.field(t))}),Ere=fn.define(),LU=Ei.define({create(){return!0},update(t,e){for(const n of e.effects)if(n.is(Ere))return n.value;return t}}),kre=A.memo(({id:t,doc:e,debounceScroll:n=100,debounceChange:r=150,autoFocusOnDocumentChange:i=!1,editable:s=!0,onScroll:o,onChange:a,onSave:l,theme:c,settings:u,className:h=""})=>{Lg.trace("CodeMirrorEditor");const[d]=A.useState(new Zg),f=A.useRef(null),m=A.useRef(),g=A.useRef(),b=A.useRef(),y=A.useRef(),v=A.useRef(o),x=A.useRef(a),w=A.useRef(l);return A.useEffect(()=>{v.current=o,x.current=a,w.current=l,b.current=e,g.current=c}),A.useEffect(()=>{const S=pv(k=>{x.current?.(k)},r),E=new Lt({parent:f.current,dispatchTransactions(k){const _=E.state.selection;E.update(k);const L=E.state.selection,R=L!==_&&(L===void 0||_===void 0||!L.eq(_));b.current&&(k.some(C=>C.docChanged)||R)&&(S({selection:E.state.selection,content:E.state.doc.toString()}),y.current.set(b.current.filePath,E.state))}});return m.current=E,()=>{m.current?.destroy(),m.current=void 0}},[]),A.useEffect(()=>{m.current&&m.current.dispatch({effects:[xre(c)]})},[c]),A.useEffect(()=>{y.current=new Map},[t]),A.useEffect(()=>{const S=y.current,E=m.current,k=g.current;if(!e){const L=RU("",k,u,v,n,w,[d.of([])]);E.setState(L),qWe(E);return}if(e.isBinary)return;e.filePath===""&&WWe.warn("File path should not be empty");let _=S.get(e.filePath);_||(_=RU(e.value,k,u,v,n,w,[d.of([])]),S.set(e.filePath,_)),E.setState(_),KWe(E,k,s,d,i,e)},[e?.value,s,e?.filePath,i]),p.jsxs("div",{className:Ae("relative h-full",h),children:[e?.isBinary&&p.jsx(PWe,{}),p.jsx("div",{className:"h-full overflow-hidden",ref:f})]})});kre.displayName="CodeMirrorEditor";function RU(t,e,n,r,i,s,o){return Sn.create({doc:t,extensions:[Lt.domEventHandlers({scroll:pv((a,l)=>{a.target===l.scrollDOM&&r.current?.({left:l.scrollDOM.scrollLeft,top:l.scrollDOM.scrollTop})},i),keydown:(a,l)=>l.state.readOnly?(l.dispatch({effects:[Sre.of(a.key!=="Escape")]}),!0):!1}),FWe(e,n),aVe(),Yk.of([...lWe,...gVe,...kWe,{key:"Tab",run:Tne},{key:"Mod-s",preventDefault:!0,run:()=>(s.current?.(),!0)},UWe]),Qg.of("	"),Yze({closeOnBlur:!1}),A$e({position:"absolute",parent:document.body,tooltipSpace:a=>{const l=a.dom.getBoundingClientRect();return{top:l.top-50,left:l.left,bottom:l.bottom,right:l.right+10}}}),Bze(),$$e(),S$e(),w$e(),b$e(),XHe(),Sn.tabSize.of(n?.tabSize??2),AHe(),GWe,LU,Sn.readOnly.from(LU,a=>!a),V$e(),E$e(),FHe({markerDOM:a=>{const l=document.createElement("div");return l.className=`fold-icon ${a?"i-ph-caret-down-bold":"i-ph-caret-right-bold"}`,l}}),...o]})}function qWe(t){t.dispatch({selection:{anchor:0},changes:{from:0,to:t.state.doc.length,insert:""}}),t.scrollDOM.scrollTo(0,0)}function KWe(t,e,n,r,i,s){s.value!==t.state.doc.toString()&&t.dispatch({selection:{anchor:0},changes:{from:0,to:t.state.doc.length,insert:s.value}}),t.dispatch({effects:[Ere.of(n&&!s.isBinary)]}),VWe(s.filePath).then(o=>{o&&(t.dispatch({effects:[r.reconfigure([o]),xre(e)]}),requestAnimationFrame(()=>{const a=t.scrollDOM.scrollLeft,l=t.scrollDOM.scrollTop,c=s.scroll?.left??0,u=s.scroll?.top??0;i&&n&&(a!==c||l!==u?t.scrollDOM.addEventListener("scroll",()=>{t.focus()},{once:!0}):t.focus()),t.scrollDOM.scrollTo(c,u)}))})}function YWe(t){return t.readOnly?t.selection.ranges.filter(e=>e.empty).map(e=>({pos:e.head,above:!0,strictSide:!0,arrow:!0,create:()=>{const n=document.createElement("div");return n.className="cm-readonly-tooltip",n.textContent="Cannot edit file while AI response is being generated",{dom:n}}})):[]}const dm=A.memo(({className:t,disabledClassName:e,disabled:n=!1,children:r,onClick:i})=>p.jsx("button",{className:Ae("flex items-center shrink-0 gap-1.5 px-1.5 rounded-md py-0.5 text-bolt-elements-item-contentDefault bg-transparent enabled:hover:text-bolt-elements-item-contentActive enabled:hover:bg-bolt-elements-item-backgroundActive disabled:cursor-not-allowed",{[Ae("opacity-30",e)]:n},t),disabled:n,onClick:s=>{n||i?.(s)},children:r})),XWe=A.memo,ZWe=XWe(({selected:t,options:e,setSelected:n})=>{const r=!!e.middle,i=t===e.left.value,s=r&&e.middle?t===e.middle.value:!1;return p.jsxs("div",{className:"flex items-center flex-wrap shrink-0 gap-1 bg-bolt-elements-background-depth-1 overflow-hidden rounded-full p-1",children:[p.jsx(xA,{selected:i,setSelected:()=>n?.(e.left.value),children:e.left.text}),e.middle&&p.jsx(xA,{selected:s,setSelected:()=>n?.(e.middle.value),children:e.middle.text}),p.jsx(xA,{selected:!i&&!s,setSelected:()=>n?.(e.right.value),children:e.right.text})]})}),xA=A.memo(({selected:t,children:e,setSelected:n})=>p.jsxs("button",{onClick:n,className:Ae("bg-transparent text-sm px-2.5 py-0.5 rounded-full relative",t?"text-bolt-elements-item-contentAccent":"text-bolt-elements-item-contentDefault hover:text-bolt-elements-item-contentActive"),children:[p.jsx("span",{className:"relative z-10",children:e}),t&&p.jsx(at.span,{layoutId:"pill-tab",transition:{duration:.2,ease:So},className:"absolute inset-0 z-0 bg-bolt-elements-item-backgroundAccent rounded-full"})]})),{createElement:yg,createContext:JWe,forwardRef:Cre,useCallback:Os,useContext:Tre,useEffect:rf,useImperativeHandle:Are,useLayoutEffect:QWe,useMemo:eGe,useRef:Ds,useState:jm}=zm,IU=zm[`useId${Math.random()}`.slice(0,5)],tGe=QWe,n5=JWe(null);n5.displayName="PanelGroupContext";const sf=tGe,nGe=typeof IU=="function"?IU:()=>null;let rGe=0;function zO(t=null){const e=nGe(),n=Ds(t||e||null);return n.current===null&&(n.current=""+rGe++),t??n.current}function Pre({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:i,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:h,order:d,style:f,tagName:m="div",...g}){const b=Tre(n5);if(b===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:y,expandPanel:v,getPanelSize:x,getPanelStyle:w,groupId:S,isPanelCollapsed:E,reevaluatePanelConstraints:k,registerPanel:_,resizePanel:L,unregisterPanel:R}=b,C=zO(o),P=Ds({callbacks:{onCollapse:c,onExpand:u,onResize:h},constraints:{collapsedSize:n,collapsible:r,defaultSize:i,maxSize:a,minSize:l},id:C,idIsFromProps:o!==void 0,order:d});Ds({didLogMissingDefaultSizeWarning:!1}),sf(()=>{const{callbacks:N,constraints:H}=P.current,Q={...H};P.current.id=C,P.current.idIsFromProps=o!==void 0,P.current.order=d,N.onCollapse=c,N.onExpand=u,N.onResize=h,H.collapsedSize=n,H.collapsible=r,H.defaultSize=i,H.maxSize=a,H.minSize=l,(Q.collapsedSize!==H.collapsedSize||Q.collapsible!==H.collapsible||Q.maxSize!==H.maxSize||Q.minSize!==H.minSize)&&k(P.current,Q)}),sf(()=>{const N=P.current;return _(N),()=>{R(N)}},[d,C,_,R]),Are(s,()=>({collapse:()=>{y(P.current)},expand:N=>{v(P.current,N)},getId(){return C},getSize(){return x(P.current)},isCollapsed(){return E(P.current)},isExpanded(){return!E(P.current)},resize:N=>{L(P.current,N)}}),[y,v,x,E,C,L]);const O=w(P.current,i);return yg(m,{...g,children:t,className:e,id:o,style:{...O,...f},"data-panel":"","data-panel-collapsible":r||void 0,"data-panel-group-id":S,"data-panel-id":C,"data-panel-size":parseFloat(""+O.flexGrow).toFixed(1)})}const k1=Cre((t,e)=>yg(Pre,{...t,forwardedRef:e}));Pre.displayName="Panel";k1.displayName="forwardRef(Panel)";let pN=null,Bd=null;function iGe(t,e){if(e){const n=(e&Ore)!==0,r=(e&Dre)!==0,i=(e&Mre)!==0,s=(e&jre)!==0;if(n)return i?"se-resize":s?"ne-resize":"e-resize";if(r)return i?"sw-resize":s?"nw-resize":"w-resize";if(i)return"s-resize";if(s)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function sGe(){Bd!==null&&(document.head.removeChild(Bd),pN=null,Bd=null)}function _A(t,e){const n=iGe(t,e);pN!==n&&(pN=n,Bd===null&&(Bd=document.createElement("style"),document.head.appendChild(Bd)),Bd.innerHTML=`*{cursor: ${n}!important;}`)}function Nre(t){return t.type==="keydown"}function Lre(t){return t.type.startsWith("pointer")}function Rre(t){return t.type.startsWith("mouse")}function r5(t){if(Lre(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(Rre(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function oGe(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function aGe(t,e,n){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function lGe(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:MU(t),b:MU(e)};let r;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),r=t;hn(r,"Stacking order can only be calculated for elements with a common ancestor");const i={a:DU(OU(n.a)),b:DU(OU(n.b))};if(i.a===i.b){const s=r.childNodes,o={a:n.a.at(-1),b:n.b.at(-1)};let a=s.length;for(;a--;){const l=s[a];if(l===o.a)return 1;if(l===o.b)return-1}}return Math.sign(i.a-i.b)}const cGe=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function uGe(t){var e;const n=getComputedStyle((e=Ire(t))!==null&&e!==void 0?e:t).display;return n==="flex"||n==="inline-flex"}function hGe(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||uGe(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||cGe.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function OU(t){let e=t.length;for(;e--;){const n=t[e];if(hn(n,"Missing node"),hGe(n))return n}return null}function DU(t){return t&&Number(getComputedStyle(t).zIndex)||0}function MU(t){const e=[];for(;t;)e.push(t),t=Ire(t);return e}function Ire(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const Ore=1,Dre=2,Mre=4,jre=8,dGe=oGe()==="coarse";let ja=[],Fm=!1,Ku=new Map,i5=new Map;const By=new Set;function fGe(t,e,n,r,i){var s;const{ownerDocument:o}=e,a={direction:n,element:e,hitAreaMargins:r,setResizeHandlerState:i},l=(s=Ku.get(o))!==null&&s!==void 0?s:0;return Ku.set(o,l+1),By.add(a),mE(),function(){var u;i5.delete(t),By.delete(a);const h=(u=Ku.get(o))!==null&&u!==void 0?u:1;if(Ku.set(o,h-1),mE(),h===1&&Ku.delete(o),ja.includes(a)){const d=ja.indexOf(a);d>=0&&ja.splice(d,1),WO(),i("up",!0,null)}}}function jU(t){const{target:e}=t,{x:n,y:r}=r5(t);Fm=!0,VO({target:e,x:n,y:r}),mE(),ja.length>0&&(gE("down",t),t.preventDefault(),t.stopPropagation())}function bb(t){const{x:e,y:n}=r5(t);if(Fm&&t.buttons===0&&(Fm=!1,gE("up",t)),!Fm){const{target:r}=t;VO({target:r,x:e,y:n})}gE("move",t),WO(),ja.length>0&&t.preventDefault()}function Bp(t){const{target:e}=t,{x:n,y:r}=r5(t);i5.clear(),Fm=!1,ja.length>0&&t.preventDefault(),gE("up",t),VO({target:e,x:n,y:r}),WO(),mE()}function VO({target:t,x:e,y:n}){ja.splice(0);let r=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(r=t),By.forEach(i=>{const{element:s,hitAreaMargins:o}=i,a=s.getBoundingClientRect(),{bottom:l,left:c,right:u,top:h}=a,d=dGe?o.coarse:o.fine;if(e>=c-d&&e<=u+d&&n>=h-d&&n<=l+d){if(r!==null&&document.contains(r)&&s!==r&&!s.contains(r)&&!r.contains(s)&&lGe(r,s)>0){let m=r,g=!1;for(;m&&!m.contains(s);){if(aGe(m.getBoundingClientRect(),a)){g=!0;break}m=m.parentElement}if(g)return}ja.push(i)}})}function wA(t,e){i5.set(t,e)}function WO(){let t=!1,e=!1;ja.forEach(r=>{const{direction:i}=r;i==="horizontal"?t=!0:e=!0});let n=0;i5.forEach(r=>{n|=r}),t&&e?_A("intersection",n):t?_A("horizontal",n):e?_A("vertical",n):sGe()}function mE(){Ku.forEach((t,e)=>{const{body:n}=e;n.removeEventListener("contextmenu",Bp),n.removeEventListener("pointerdown",jU),n.removeEventListener("pointerleave",bb),n.removeEventListener("pointermove",bb)}),window.removeEventListener("pointerup",Bp),window.removeEventListener("pointercancel",Bp),By.size>0&&(Fm?(ja.length>0&&Ku.forEach((t,e)=>{const{body:n}=e;t>0&&(n.addEventListener("contextmenu",Bp),n.addEventListener("pointerleave",bb),n.addEventListener("pointermove",bb))}),window.addEventListener("pointerup",Bp),window.addEventListener("pointercancel",Bp)):Ku.forEach((t,e)=>{const{body:n}=e;t>0&&(n.addEventListener("pointerdown",jU,{capture:!0}),n.addEventListener("pointermove",bb))}))}function gE(t,e){By.forEach(n=>{const{setResizeHandlerState:r}=n,i=ja.includes(n);r(t,i,e)})}function pGe(){const[t,e]=jm(0);return Os(()=>e(n=>n+1),[])}function hn(t,e){if(!t)throw console.error(e),Error(e)}const GO=10;function kf(t,e,n=GO){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function Dc(t,e,n=GO){return kf(t,e,n)===0}function uo(t,e,n){return kf(t,e,n)===0}function mGe(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){const i=t[r],s=e[r];if(!uo(i,s,n))return!1}return!0}function fm({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];hn(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:i=0,collapsible:s,maxSize:o=100,minSize:a=0}=r;if(kf(n,a)<0)if(s){const l=(i+a)/2;kf(n,l)<0?n=i:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(GO)),n}function zb({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:r,prevLayout:i,trigger:s}){if(uo(t,0))return e;const o=[...e],[a,l]=r;hn(a!=null,"Invalid first pivot index"),hn(l!=null,"Invalid second pivot index");let c=0;if(s==="keyboard"){{const h=t<0?l:a,d=n[h];hn(d,`Panel constraints not found for index ${h}`);const{collapsedSize:f=0,collapsible:m,minSize:g=0}=d;if(m){const b=e[h];if(hn(b!=null,`Previous layout not found for panel index ${h}`),uo(b,f)){const y=g-b;kf(y,Math.abs(t))>0&&(t=t<0?0-y:y)}}}{const h=t<0?a:l,d=n[h];hn(d,`No panel constraints found for index ${h}`);const{collapsedSize:f=0,collapsible:m,minSize:g=0}=d;if(m){const b=e[h];if(hn(b!=null,`Previous layout not found for panel index ${h}`),uo(b,g)){const y=b-f;kf(y,Math.abs(t))>0&&(t=t<0?0-y:y)}}}}{const h=t<0?1:-1;let d=t<0?l:a,f=0;for(;;){const g=e[d];hn(g!=null,`Previous layout not found for panel index ${d}`);const y=fm({panelConstraints:n,panelIndex:d,size:100})-g;if(f+=y,d+=h,d<0||d>=n.length)break}const m=Math.min(Math.abs(t),Math.abs(f));t=t<0?0-m:m}{let d=t<0?a:l;for(;d>=0&&d<n.length;){const f=Math.abs(t)-Math.abs(c),m=e[d];hn(m!=null,`Previous layout not found for panel index ${d}`);const g=m-f,b=fm({panelConstraints:n,panelIndex:d,size:g});if(!uo(m,b)&&(c+=m-b,o[d]=b,c.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(mGe(i,o))return i;{const h=t<0?l:a,d=e[h];hn(d!=null,`Previous layout not found for panel index ${h}`);const f=d+c,m=fm({panelConstraints:n,panelIndex:h,size:f});if(o[h]=m,!uo(m,f)){let g=f-m,y=t<0?l:a;for(;y>=0&&y<n.length;){const v=o[y];hn(v!=null,`Previous layout not found for panel index ${y}`);const x=v+g,w=fm({panelConstraints:n,panelIndex:y,size:x});if(uo(v,w)||(g-=w-v,o[y]=w),uo(g,0))break;t>0?y--:y++}}}const u=o.reduce((h,d)=>d+h,0);return uo(u,100)?o:i}function gGe({layout:t,panelsArray:e,pivotIndices:n}){let r=0,i=100,s=0,o=0;const a=n[0];hn(a!=null,"No pivot index found"),e.forEach((h,d)=>{const{constraints:f}=h,{maxSize:m=100,minSize:g=0}=f;d===a?(r=g,i=m):(s+=g,o+=m)});const l=Math.min(i,100-s),c=Math.max(r,100-o),u=t[a];return{valueMax:l,valueMin:c,valueNow:u}}function Uy(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function Fre(t,e,n=document){const i=Uy(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return i??null}function Bre(t,e,n){const r=Fre(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function Ure(t,e=document){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const r=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return r||null}function s5(t,e=document){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function bGe(t,e,n,r=document){var i,s,o,a;const l=s5(e,r),c=Uy(t,r),u=l?c.indexOf(l):-1,h=(i=(s=n[u])===null||s===void 0?void 0:s.id)!==null&&i!==void 0?i:null,d=(o=(a=n[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[h,d]}function yGe({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:i,panelGroupElement:s,setLayout:o}){Ds({didWarnAboutMissingResizeHandle:!1}),sf(()=>{if(!s)return;const a=Uy(n,s);for(let l=0;l<i.length-1;l++){const{valueMax:c,valueMin:u,valueNow:h}=gGe({layout:r,panelsArray:i,pivotIndices:[l,l+1]}),d=a[l];if(d!=null){const f=i[l];hn(f,`No panel data found for index "${l}"`),d.setAttribute("aria-controls",f.id),d.setAttribute("aria-valuemax",""+Math.round(c)),d.setAttribute("aria-valuemin",""+Math.round(u)),d.setAttribute("aria-valuenow",h!=null?""+Math.round(h):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,r,i,s]),rf(()=>{if(!s)return;const a=e.current;hn(a,"Eager values not found");const{panelDataArray:l}=a,c=Ure(n,s);hn(c!=null,`No group found for id "${n}"`);const u=Uy(n,s);hn(u,`No resize handles found for group id "${n}"`);const h=u.map(d=>{const f=d.getAttribute("data-panel-resize-handle-id");hn(f,"Resize handle element has no handle id attribute");const[m,g]=bGe(n,f,l,s);if(m==null||g==null)return()=>{};const b=y=>{if(!y.defaultPrevented)switch(y.key){case"Enter":{y.preventDefault();const v=l.findIndex(x=>x.id===m);if(v>=0){const x=l[v];hn(x,`No panel data found for index ${v}`);const w=r[v],{collapsedSize:S=0,collapsible:E,minSize:k=0}=x.constraints;if(w!=null&&E){const _=zb({delta:uo(w,S)?k-S:S-w,initialLayout:r,panelConstraints:l.map(L=>L.constraints),pivotIndices:Bre(n,f,s),prevLayout:r,trigger:"keyboard"});r!==_&&o(_)}}break}}};return d.addEventListener("keydown",b),()=>{d.removeEventListener("keydown",b)}});return()=>{h.forEach(d=>d())}},[s,t,e,n,r,i,o])}function FU(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function $re(t,e){const n=t==="horizontal",{x:r,y:i}=r5(e);return n?r:i}function vGe(t,e,n,r,i){const s=n==="horizontal",o=s5(e,i);hn(o,`No resize handle element found for id "${e}"`);const a=o.getAttribute("data-panel-group-id");hn(a,"Resize handle element has no group id attribute");let{initialCursorPosition:l}=r;const c=$re(n,t),u=Ure(a,i);hn(u,`No group element found for id "${a}"`);const h=u.getBoundingClientRect(),d=s?h.width:h.height;return(c-l)/d*100}function xGe(t,e,n,r,i,s){if(Nre(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:i!=null?a=i:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return r==null?0:vGe(t,e,n,r,s)}function _Ge({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let r=0,i=100;for(let s=0;s<t.length;s++){const o=n[s];hn(o,`Panel constraints not found for index ${s}`);const{defaultSize:a}=o;a!=null&&(r++,e[s]=a,i-=a)}for(let s=0;s<t.length;s++){const o=n[s];hn(o,`Panel constraints not found for index ${s}`);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-r,c=i/l;r++,e[s]=c,i-=c}return e}function Up(t,e,n){e.forEach((r,i)=>{const s=t[i];hn(s,`Panel data not found for index ${i}`);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:c=0,collapsible:u}=a,h=n[l];if(h==null||r!==h){n[l]=r;const{onCollapse:d,onExpand:f,onResize:m}=o;m&&m(r,h),u&&(d||f)&&(f&&(h==null||Dc(h,c))&&!Dc(r,c)&&f(),d&&(h==null||!Dc(h,c))&&Dc(r,c)&&d())}})}function Tw(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function wGe({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:i,precision:s=3}){const o=n[i];let a;return o==null?a=t!=null?t.toPrecision(s):"1":r.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function SGe(t,e=10){let n=null;return(...i)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...i)},e)}}function BU(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function Hre(t){return`react-resizable-panels:${t}`}function zre(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:i,order:s}=e;return i?r:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function Vre(t,e){try{const n=Hre(t),r=e.getItem(n);if(r){const i=JSON.parse(r);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function EGe(t,e,n){var r,i;const s=(r=Vre(t,n))!==null&&r!==void 0?r:{},o=zre(e);return(i=s[o])!==null&&i!==void 0?i:null}function kGe(t,e,n,r,i){var s;const o=Hre(t),a=zre(e),l=(s=Vre(t,i))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{i.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function UU({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!uo(r,100)&&n.length>0)for(let s=0;s<e.length;s++){const o=n[s];hn(o!=null,`No layout data found for index ${s}`);const a=100/r*o;n[s]=a}let i=0;for(let s=0;s<e.length;s++){const o=n[s];hn(o!=null,`No layout data found for index ${s}`);const a=fm({panelConstraints:e,panelIndex:s,size:o});o!=a&&(i+=o-a,n[s]=a)}if(!uo(i,0))for(let s=0;s<e.length;s++){const o=n[s];hn(o!=null,`No layout data found for index ${s}`);const a=o+i,l=fm({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(i-=l-o,n[s]=l,uo(i,0)))break}return n}const CGe=100,Vb={getItem:t=>(BU(Vb),Vb.getItem(t)),setItem:(t,e)=>{BU(Vb),Vb.setItem(t,e)}},$U={};function Wre({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:i,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=Vb,style:c,tagName:u="div",...h}){const d=zO(s),f=Ds(null),[m,g]=jm(null),[b,y]=jm([]),v=pGe(),x=Ds({}),w=Ds(new Map),S=Ds(0),E=Ds({autoSaveId:t,direction:r,dragState:m,id:d,keyboardResizeBy:a,onLayout:o,storage:l}),k=Ds({layout:b,panelDataArray:[],panelDataArrayChanged:!1});Ds({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),Are(i,()=>({getId:()=>E.current.id,getLayout:()=>{const{layout:D}=k.current;return D},setLayout:D=>{const{onLayout:V}=E.current,{layout:W,panelDataArray:te}=k.current,ee=UU({layout:D,panelConstraints:te.map(K=>K.constraints)});FU(W,ee)||(y(ee),k.current.layout=ee,V&&V(ee),Up(te,ee,x.current))}}),[]),sf(()=>{E.current.autoSaveId=t,E.current.direction=r,E.current.dragState=m,E.current.id=d,E.current.onLayout=o,E.current.storage=l}),yGe({committedValuesRef:E,eagerValuesRef:k,groupId:d,layout:b,panelDataArray:k.current.panelDataArray,setLayout:y,panelGroupElement:f.current}),rf(()=>{const{panelDataArray:D}=k.current;if(t){if(b.length===0||b.length!==D.length)return;let V=$U[t];V==null&&(V=SGe(kGe,CGe),$U[t]=V);const W=[...D],te=new Map(w.current);V(t,W,te,b,l)}},[t,b,l]),rf(()=>{});const _=Os(D=>{const{onLayout:V}=E.current,{layout:W,panelDataArray:te}=k.current;if(D.constraints.collapsible){const ee=te.map(Se=>Se.constraints),{collapsedSize:K=0,panelSize:he,pivotIndices:be}=ad(te,D,W);if(hn(he!=null,`Panel size not found for panel "${D.id}"`),!Dc(he,K)){w.current.set(D.id,he);const Ce=Zp(te,D)===te.length-1?he-K:K-he,ke=zb({delta:Ce,initialLayout:W,panelConstraints:ee,pivotIndices:be,prevLayout:W,trigger:"imperative-api"});Tw(W,ke)||(y(ke),k.current.layout=ke,V&&V(ke),Up(te,ke,x.current))}}},[]),L=Os((D,V)=>{const{onLayout:W}=E.current,{layout:te,panelDataArray:ee}=k.current;if(D.constraints.collapsible){const K=ee.map(q=>q.constraints),{collapsedSize:he=0,panelSize:be=0,minSize:Se=0,pivotIndices:Ce}=ad(ee,D,te),ke=V??Se;if(Dc(be,he)){const q=w.current.get(D.id),pe=q!=null&&q>=ke?q:ke,oe=Zp(ee,D)===ee.length-1?be-pe:pe-be,ae=zb({delta:oe,initialLayout:te,panelConstraints:K,pivotIndices:Ce,prevLayout:te,trigger:"imperative-api"});Tw(te,ae)||(y(ae),k.current.layout=ae,W&&W(ae),Up(ee,ae,x.current))}}},[]),R=Os(D=>{const{layout:V,panelDataArray:W}=k.current,{panelSize:te}=ad(W,D,V);return hn(te!=null,`Panel size not found for panel "${D.id}"`),te},[]),C=Os((D,V)=>{const{panelDataArray:W}=k.current,te=Zp(W,D);return wGe({defaultSize:V,dragState:m,layout:b,panelData:W,panelIndex:te})},[m,b]),P=Os(D=>{const{layout:V,panelDataArray:W}=k.current,{collapsedSize:te=0,collapsible:ee,panelSize:K}=ad(W,D,V);return hn(K!=null,`Panel size not found for panel "${D.id}"`),ee===!0&&Dc(K,te)},[]),O=Os(D=>{const{layout:V,panelDataArray:W}=k.current,{collapsedSize:te=0,collapsible:ee,panelSize:K}=ad(W,D,V);return hn(K!=null,`Panel size not found for panel "${D.id}"`),!ee||kf(K,te)>0},[]),N=Os(D=>{const{panelDataArray:V}=k.current;V.push(D),V.sort((W,te)=>{const ee=W.order,K=te.order;return ee==null&&K==null?0:ee==null?-1:K==null?1:ee-K}),k.current.panelDataArrayChanged=!0,v()},[v]);sf(()=>{if(k.current.panelDataArrayChanged){k.current.panelDataArrayChanged=!1;const{autoSaveId:D,onLayout:V,storage:W}=E.current,{layout:te,panelDataArray:ee}=k.current;let K=null;if(D){const be=EGe(D,ee,W);be&&(w.current=new Map(Object.entries(be.expandToSizes)),K=be.layout)}K==null&&(K=_Ge({panelDataArray:ee}));const he=UU({layout:K,panelConstraints:ee.map(be=>be.constraints)});FU(te,he)||(y(he),k.current.layout=he,V&&V(he),Up(ee,he,x.current))}}),sf(()=>{const D=k.current;return()=>{D.layout=[]}},[]);const H=Os(D=>{let V=!1;const W=f.current;return W&&window.getComputedStyle(W,null).getPropertyValue("direction")==="rtl"&&(V=!0),function(ee){ee.preventDefault();const K=f.current;if(!K)return()=>null;const{direction:he,dragState:be,id:Se,keyboardResizeBy:Ce,onLayout:ke}=E.current,{layout:q,panelDataArray:pe}=k.current,{initialLayout:ne}=be??{},oe=Bre(Se,D,K);let ae=xGe(ee,D,he,be,Ce,K);const me=he==="horizontal";me&&V&&(ae=-ae);const Pe=pe.map($e=>$e.constraints),Re=zb({delta:ae,initialLayout:ne??q,panelConstraints:Pe,pivotIndices:oe,prevLayout:q,trigger:Nre(ee)?"keyboard":"mouse-or-touch"}),we=!Tw(q,Re);(Lre(ee)||Rre(ee))&&S.current!=ae&&(S.current=ae,!we&&ae!==0?me?wA(D,ae<0?Ore:Dre):wA(D,ae<0?Mre:jre):wA(D,0)),we&&(y(Re),k.current.layout=Re,ke&&ke(Re),Up(pe,Re,x.current))}},[]),Q=Os((D,V)=>{const{onLayout:W}=E.current,{layout:te,panelDataArray:ee}=k.current,K=ee.map(q=>q.constraints),{panelSize:he,pivotIndices:be}=ad(ee,D,te);hn(he!=null,`Panel size not found for panel "${D.id}"`);const Ce=Zp(ee,D)===ee.length-1?he-V:V-he,ke=zb({delta:Ce,initialLayout:te,panelConstraints:K,pivotIndices:be,prevLayout:te,trigger:"imperative-api"});Tw(te,ke)||(y(ke),k.current.layout=ke,W&&W(ke),Up(ee,ke,x.current))},[]),X=Os((D,V)=>{const{layout:W,panelDataArray:te}=k.current,{collapsedSize:ee=0,collapsible:K}=V,{collapsedSize:he=0,collapsible:be,maxSize:Se=100,minSize:Ce=0}=D.constraints,{panelSize:ke}=ad(te,D,W);ke!=null&&(K&&be&&Dc(ke,ee)?Dc(ee,he)||Q(D,he):ke<Ce?Q(D,Ce):ke>Se&&Q(D,Se))},[Q]),J=Os((D,V)=>{const{direction:W}=E.current,{layout:te}=k.current;if(!f.current)return;const ee=s5(D,f.current);hn(ee,`Drag handle element not found for id "${D}"`);const K=$re(W,V);g({dragHandleId:D,dragHandleRect:ee.getBoundingClientRect(),initialCursorPosition:K,initialLayout:te})},[]),j=Os(()=>{g(null)},[]),F=Os(D=>{const{panelDataArray:V}=k.current,W=Zp(V,D);W>=0&&(V.splice(W,1),delete x.current[D.id],k.current.panelDataArrayChanged=!0,v())},[v]),Y=eGe(()=>({collapsePanel:_,direction:r,dragState:m,expandPanel:L,getPanelSize:R,getPanelStyle:C,groupId:d,isPanelCollapsed:P,isPanelExpanded:O,reevaluatePanelConstraints:X,registerPanel:N,registerResizeHandle:H,resizePanel:Q,startDragging:J,stopDragging:j,unregisterPanel:F,panelGroupElement:f.current}),[_,m,r,L,R,C,d,P,O,X,N,H,Q,J,j,F]),M={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return yg(n5.Provider,{value:Y},yg(u,{...h,children:e,className:n,id:s,ref:f,style:{...M,...c},"data-panel-group":"","data-panel-group-direction":r,"data-panel-group-id":d}))}const mN=Cre((t,e)=>yg(Wre,{...t,forwardedRef:e}));Wre.displayName="PanelGroup";mN.displayName="forwardRef(PanelGroup)";function Zp(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function ad(t,e,n){const r=Zp(t,e),s=r===t.length-1?[r-1,r]:[r,r+1],o=n[r];return{...e.constraints,panelSize:o,pivotIndices:s}}function TGe({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:r}){rf(()=>{if(t||n==null||r==null)return;const i=s5(e,r);if(i==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=i.getAttribute("data-panel-group-id");hn(a,`No group element found for id "${a}"`);const l=Uy(a,r),c=Fre(a,e,r);hn(c!==null,`No resize element found for id "${e}"`);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return i.addEventListener("keydown",s),()=>{i.removeEventListener("keydown",s)}},[r,t,e,n])}function gN({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:r,id:i,onBlur:s,onDragging:o,onFocus:a,style:l={},tabIndex:c=0,tagName:u="div",...h}){var d,f;const m=Ds(null),g=Ds({onDragging:o});rf(()=>{g.current.onDragging=o});const b=Tre(n5);if(b===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:y,groupId:v,registerResizeHandle:x,startDragging:w,stopDragging:S,panelGroupElement:E}=b,k=zO(i),[_,L]=jm("inactive"),[R,C]=jm(!1),[P,O]=jm(null),N=Ds({state:_});sf(()=>{N.current.state=_}),rf(()=>{if(n)O(null);else{const J=x(k);O(()=>J)}},[n,k,x]);const H=(d=r?.coarse)!==null&&d!==void 0?d:15,Q=(f=r?.fine)!==null&&f!==void 0?f:5;return rf(()=>{if(n||P==null)return;const J=m.current;return hn(J,"Element ref not attached"),fGe(k,J,y,{coarse:H,fine:Q},(F,Y,M)=>{if(Y)switch(F){case"down":{L("drag"),hn(M,'Expected event to be defined for "down" action'),w(k,M);const{onDragging:D}=g.current;D&&D(!0);break}case"move":{const{state:D}=N.current;D!=="drag"&&L("hover"),hn(M,'Expected event to be defined for "move" action'),P(M);break}case"up":{L("hover"),S();const{onDragging:D}=g.current;D&&D(!1);break}}else L("inactive")})},[H,y,n,Q,x,k,P,w,S]),TGe({disabled:n,handleId:k,resizeHandler:P,panelGroupElement:E}),yg(u,{...h,children:t,className:e,id:i,onBlur:()=>{C(!1),s?.()},onFocus:()=>{C(!0),a?.()},ref:m,role:"separator",style:{...{touchAction:"none",userSelect:"none"},...l},tabIndex:c,"data-panel-group-direction":y,"data-panel-group-id":v,"data-resize-handle":"","data-resize-handle-active":_==="drag"?"pointer":R?"keyboard":void 0,"data-resize-handle-state":_,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":k})}gN.displayName="PanelResizeHandle";const HU=A.memo(({className:t,children:e})=>p.jsx("div",{className:Ae("flex items-center gap-2 bg-bolt-elements-background-depth-2 text-bolt-elements-textSecondary border-b border-bolt-elements-borderColor px-4 py-1 min-h-[34px] text-sm",t),children:e}));function AGe(){return globalThis.innerWidth<640}var qO="ContextMenu",[PGe,Xit]=ca(qO,[nk]),Ss=nk(),[NGe,Gre]=PGe(qO),qre=t=>{const{__scopeContextMenu:e,children:n,onOpenChange:r,dir:i,modal:s=!0}=t,[o,a]=A.useState(!1),l=Ss(e),c=ii(r),u=A.useCallback(h=>{a(h),c(h)},[c]);return p.jsx(NGe,{scope:e,open:o,onOpenChange:u,modal:s,children:p.jsx(bq,{...l,dir:i,open:o,onOpenChange:u,modal:s,children:n})})};qre.displayName=qO;var Kre="ContextMenuTrigger",Yre=A.forwardRef((t,e)=>{const{__scopeContextMenu:n,disabled:r=!1,...i}=t,s=Gre(Kre,n),o=Ss(n),a=A.useRef({x:0,y:0}),l=A.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...a.current})}),c=A.useRef(0),u=A.useCallback(()=>window.clearTimeout(c.current),[]),h=d=>{a.current={x:d.clientX,y:d.clientY},s.onOpenChange(!0)};return A.useEffect(()=>u,[u]),A.useEffect(()=>void(r&&u()),[r,u]),p.jsxs(p.Fragment,{children:[p.jsx(yq,{...o,virtualRef:l}),p.jsx(vn.span,{"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,...i,ref:e,style:{WebkitTouchCallout:"none",...t.style},onContextMenu:r?t.onContextMenu:Mt(t.onContextMenu,d=>{u(),h(d),d.preventDefault()}),onPointerDown:r?t.onPointerDown:Mt(t.onPointerDown,Aw(d=>{u(),c.current=window.setTimeout(()=>h(d),700)})),onPointerMove:r?t.onPointerMove:Mt(t.onPointerMove,Aw(u)),onPointerCancel:r?t.onPointerCancel:Mt(t.onPointerCancel,Aw(u)),onPointerUp:r?t.onPointerUp:Mt(t.onPointerUp,Aw(u))})]})});Yre.displayName=Kre;var LGe="ContextMenuPortal",Xre=t=>{const{__scopeContextMenu:e,...n}=t,r=Ss(e);return p.jsx(vq,{...r,...n})};Xre.displayName=LGe;var Zre="ContextMenuContent",Jre=A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=Gre(Zre,n),s=Ss(n),o=A.useRef(!1);return p.jsx(xq,{...s,...r,ref:e,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:a=>{t.onCloseAutoFocus?.(a),!a.defaultPrevented&&o.current&&a.preventDefault(),o.current=!1},onInteractOutside:a=>{t.onInteractOutside?.(a),!a.defaultPrevented&&!i.modal&&(o.current=!0)},style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Jre.displayName=Zre;var RGe="ContextMenuGroup",Qre=A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=Ss(n);return p.jsx(_q,{...i,...r,ref:e})});Qre.displayName=RGe;var IGe="ContextMenuLabel",OGe=A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=Ss(n);return p.jsx(wq,{...i,...r,ref:e})});OGe.displayName=IGe;var DGe="ContextMenuItem",eie=A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=Ss(n);return p.jsx(Sq,{...i,...r,ref:e})});eie.displayName=DGe;var MGe="ContextMenuCheckboxItem",jGe=A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=Ss(n);return p.jsx(Eq,{...i,...r,ref:e})});jGe.displayName=MGe;var FGe="ContextMenuRadioGroup",BGe=A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=Ss(n);return p.jsx(kq,{...i,...r,ref:e})});BGe.displayName=FGe;var UGe="ContextMenuRadioItem",$Ge=A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=Ss(n);return p.jsx(Cq,{...i,...r,ref:e})});$Ge.displayName=UGe;var HGe="ContextMenuItemIndicator",zGe=A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=Ss(n);return p.jsx(Tq,{...i,...r,ref:e})});zGe.displayName=HGe;var VGe="ContextMenuSeparator",WGe=A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=Ss(n);return p.jsx(Aq,{...i,...r,ref:e})});WGe.displayName=VGe;var GGe="ContextMenuArrow",qGe=A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=Ss(n);return p.jsx(Pq,{...i,...r,ref:e})});qGe.displayName=GGe;var KGe="ContextMenuSubTrigger",YGe=A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=Ss(n);return p.jsx(Nq,{...i,...r,ref:e})});YGe.displayName=KGe;var XGe="ContextMenuSubContent",ZGe=A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=Ss(n);return p.jsx(Lq,{...i,...r,ref:e,style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ZGe.displayName=XGe;function Aw(t){return e=>e.pointerType!=="mouse"?t(e):void 0}var JGe=qre,QGe=Yre,eqe=Xre,tqe=Jre,nqe=Qre,rqe=eie;const bN=Ws("FileTree"),iqe=8,sqe=[/\/node_modules\//,/\/\.next/,/\/\.astro/],tie=A.memo(({files:t={},onFileSelect:e,selectedFile:n,rootFolder:r,hideRoot:i=!1,collapsed:s=!1,allowFolderSelection:o=!1,hiddenFiles:a,className:l,unsavedFiles:c,fileHistory:u={}})=>{Lg.trace("FileTree");const h=A.useMemo(()=>[...sqe,...a??[]],[a]),d=A.useMemo(()=>lqe(t,r,i,h),[t,r,i,h]),[f,m]=A.useState(()=>s?new Set(d.filter(x=>x.kind==="folder").map(x=>x.fullPath)):new Set);A.useEffect(()=>{if(s){m(new Set(d.filter(x=>x.kind==="folder").map(x=>x.fullPath)));return}m(x=>{const w=new Set;for(const S of d)S.kind==="folder"&&x.has(S.fullPath)&&w.add(S.fullPath);return w})},[d,s]);const g=A.useMemo(()=>{const x=[];let w=Number.MAX_SAFE_INTEGER;for(const S of d){const E=S.depth;w===E&&(w=Number.MAX_SAFE_INTEGER),f.has(S.fullPath)&&(w=Math.min(w,E)),!(w<E)&&x.push(S)}return x},[d,f]),b=x=>{m(w=>{const S=new Set(w);return S.has(x)?S.delete(x):S.add(x),S})},y=x=>{try{navigator.clipboard.writeText(x.fullPath)}catch(w){bN.error(w)}},v=x=>{try{navigator.clipboard.writeText(x.fullPath.substring((r||"").length))}catch(w){bN.error(w)}};return p.jsx("div",{className:Ae("text-sm",l,"overflow-y-auto"),children:g.map(x=>{switch(x.kind){case"file":return p.jsx(aqe,{selected:n===x.fullPath,file:x,unsavedChanges:c?.has(x.fullPath),fileHistory:u,onCopyPath:()=>{y(x)},onCopyRelativePath:()=>{v(x)},onClick:()=>{e?.(x.fullPath)}},x.id);case"folder":return p.jsx(oqe,{folder:x,selected:o&&n===x.fullPath,collapsed:f.has(x.fullPath),onCopyPath:()=>{y(x)},onCopyRelativePath:()=>{v(x)},onClick:()=>{b(x.fullPath)}},x.id);default:return}})})});function zU({onSelect:t,children:e}){return p.jsxs(rqe,{onSelect:t,className:"flex items-center gap-2 px-2 py-1.5 outline-0 text-sm text-bolt-elements-textPrimary cursor-pointer ws-nowrap text-bolt-elements-item-contentDefault hover:text-bolt-elements-item-contentActive hover:bg-bolt-elements-item-backgroundActive rounded-md",children:[p.jsx("span",{className:"size-4 shrink-0"}),p.jsx("span",{children:e})]})}function nie({onCopyPath:t,onCopyRelativePath:e,children:n}){return p.jsxs(JGe,{children:[p.jsx(QGe,{children:n}),p.jsx(eqe,{children:p.jsx(tqe,{style:{zIndex:998},className:"border border-bolt-elements-borderColor rounded-md z-context-menu bg-bolt-elements-background-depth-1 dark:bg-bolt-elements-background-depth-2 data-[state=open]:animate-in animate-duration-100 data-[state=open]:fade-in-0 data-[state=open]:zoom-in-98 w-56",children:p.jsxs(nqe,{className:"p-1 border-b-px border-solid border-bolt-elements-borderColor",children:[p.jsx(zU,{onSelect:t,children:"Copy path"}),p.jsx(zU,{onSelect:e,children:"Copy relative path"})]})})})]})}function oqe({folder:t,collapsed:e,selected:n=!1,onCopyPath:r,onCopyRelativePath:i,onClick:s}){return p.jsx(nie,{onCopyPath:r,onCopyRelativePath:i,children:p.jsx(rie,{className:Ae("group",{"bg-transparent text-bolt-elements-item-contentDefault hover:text-bolt-elements-item-contentActive hover:bg-bolt-elements-item-backgroundActive":!n,"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":n}),depth:t.depth,iconClasses:Ae({"i-ph:caret-right scale-98":e,"i-ph:caret-down scale-98":!e}),onClick:s,children:t.name})})}function aqe({file:{depth:t,name:e,fullPath:n},onClick:r,onCopyPath:i,onCopyRelativePath:s,selected:o,unsavedChanges:a=!1,fileHistory:l={}}){const c=l[n],{additions:u,deletions:h}=A.useMemo(()=>{if(!c?.originalContent)return{additions:0,deletions:0};const f=c.originalContent.replace(/\r\n/g,`
`),m=c.versions[c.versions.length-1]?.content.replace(/\r\n/g,`
`)||"";return f===m?{additions:0,deletions:0}:ng(f,m,{newlineIsToken:!1,ignoreWhitespace:!0,ignoreCase:!1}).reduce((b,y)=>(y.added&&(b.additions+=y.value.split(`
`).length),y.removed&&(b.deletions+=y.value.split(`
`).length),b),{additions:0,deletions:0})},[c]),d=u>0||h>0;return p.jsx(nie,{onCopyPath:i,onCopyRelativePath:s,children:p.jsx(rie,{className:Ae("group",{"bg-transparent hover:bg-bolt-elements-item-backgroundActive text-bolt-elements-item-contentDefault":!o,"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":o}),depth:t,iconClasses:Ae("i-ph:file-duotone scale-98",{"group-hover:text-bolt-elements-item-contentActive":!o}),onClick:r,children:p.jsxs("div",{className:Ae("flex items-center",{"group-hover:text-bolt-elements-item-contentActive":!o}),children:[p.jsx("div",{className:"flex-1 truncate pr-2",children:e}),p.jsxs("div",{className:"flex items-center gap-1",children:[d&&p.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[u>0&&p.jsxs("span",{className:"text-green-500",children:["+",u]}),h>0&&p.jsxs("span",{className:"text-red-500",children:["-",h]})]}),a&&p.jsx("span",{className:"i-ph:circle-fill scale-68 shrink-0 text-orange-500"})]})]})})})}function rie({depth:t,iconClasses:e,onClick:n,className:r,children:i}){return p.jsxs("button",{className:Ae("flex items-center gap-1.5 w-full pr-2 border-2 border-transparent text-faded py-0.5",r),style:{paddingLeft:`${6+t*iqe}px`},onClick:()=>n?.(),children:[p.jsx("div",{className:Ae("scale-120 shrink-0",e)}),p.jsx("div",{className:"truncate w-full text-left",children:i})]})}function lqe(t,e="/",n,r){const i=new Set,s=[];let o=0;e==="/"&&!n&&(o=1,s.push({kind:"folder",name:"/",depth:0,id:0,fullPath:"/"}));for(const[a,l]of Object.entries(t)){const c=a.split("/").filter(m=>m),u=c.at(-1);if(!u||cqe(a,u,r))continue;let h="",d=0,f=0;for(;d<c.length;){const m=c[d],g=h+=`/${m}`;if(!g.startsWith(e)||n&&g===e){d++;continue}d===c.length-1&&l?.type==="file"?s.push({kind:"file",id:s.length,name:m,fullPath:g,depth:f+o}):i.has(g)||(i.add(g),s.push({kind:"folder",id:s.length,name:m,fullPath:g,depth:f+o})),d++,f++}}return uqe(e,s,n)}function cqe(t,e,n){return n.some(r=>typeof r=="string"?e===r:r.test(t))}function uqe(t,e,n){bN.trace("sortFileList");const r=new Map,i=new Map;e.sort((a,l)=>hqe(a,l));for(const a of e){r.set(a.fullPath,a);const l=a.fullPath.slice(0,a.fullPath.lastIndexOf("/"));l!==t.slice(0,t.lastIndexOf("/"))&&(i.has(l)||i.set(l,[]),i.get(l)?.push(a))}const s=[],o=a=>{const l=r.get(a);l&&s.push(l);const c=i.get(a);if(c)for(const u of c)u.kind==="folder"?o(u.fullPath):s.push(u)};if(n){const a=i.get(t)||[];for(const l of a)o(l.fullPath)}else o(t);return s}function hqe(t,e){return t.kind!==e.kind?t.kind==="folder"?-1:1:t.name.localeCompare(e.name,void 0,{numeric:!0,sensitivity:"base"})}const dqe=new RegExp(`^${Kc.split("/").slice(0,-1).join("/").replaceAll("/","\\/")}/`),fqe={open:{y:0,opacity:1,transition:{duration:.15,ease:So}},close:{y:6,opacity:0,transition:{duration:.15,ease:So}}},pqe=A.memo(({files:t,pathSegments:e=[],onFileSelect:n})=>{Lg.trace("FileBreadcrumb");const[r,i]=A.useState(null),s=A.useRef(null),o=A.useRef([]),a=l=>{i(c=>c===l?null:l)};return A.useEffect(()=>{const l=c=>{r!==null&&!s.current?.contains(c.target)&&!o.current.some(u=>u?.contains(c.target))&&i(null)};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[r]),t===void 0||e.length===0?null:p.jsx("div",{className:"flex",children:e.map((l,c)=>{const u=c===e.length-1,h=e.slice(0,c).join("/");if(!dqe.test(h))return null;const d=r===c;return p.jsx("div",{className:"relative flex items-center",children:p.jsxs(sk,{open:d,modal:!1,children:[p.jsx(ok,{asChild:!0,children:p.jsxs("span",{ref:f=>{o.current[c]=f},className:Ae("flex items-center gap-1.5 cursor-pointer shrink-0",{"text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary":!d,"text-bolt-elements-textPrimary underline":d,"pr-4":u}),onClick:()=>a(c),children:[u&&p.jsx("div",{className:"i-ph:file-duotone"}),l]})}),c>0&&!u&&p.jsx("span",{className:"i-ph:caret-right inline-block mx-1"}),p.jsx(Ql,{children:d&&p.jsx(ak,{children:p.jsx(lk,{className:"z-file-tree-breadcrumb",asChild:!0,align:"start",side:"bottom",avoidCollisions:!1,children:p.jsxs(at.div,{ref:s,initial:"close",animate:"open",exit:"close",variants:fqe,children:[p.jsx("div",{className:"rounded-lg overflow-hidden",children:p.jsx("div",{className:"max-h-[50vh] min-w-[300px] overflow-scroll bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor shadow-sm rounded-lg",children:p.jsx(tie,{files:t,hideRoot:!0,rootFolder:h,collapsed:!0,allowFolderSelection:!0,selectedFile:`${h}/${l}`,onFileSelect:f=>{i(null),n?.(f)}})})}),p.jsx(eye,{className:"fill-bolt-elements-borderColor"})]})})})})]})},c)})})});var iie={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(self,()=>(()=>{var n={};return(()=>{var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.FitAddon=void 0,r.FitAddon=class{activate(i){this._terminal=i}dispose(){}fit(){const i=this.proposeDimensions();if(!i||!this._terminal||isNaN(i.cols)||isNaN(i.rows))return;const s=this._terminal._core;this._terminal.rows===i.rows&&this._terminal.cols===i.cols||(s._renderService.clear(),this._terminal.resize(i.cols,i.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const i=this._terminal._core,s=i._renderService.dimensions;if(s.css.cell.width===0||s.css.cell.height===0)return;const o=this._terminal.options.scrollback===0?0:i.viewport.scrollBarWidth,a=window.getComputedStyle(this._terminal.element.parentElement),l=parseInt(a.getPropertyValue("height")),c=Math.max(0,parseInt(a.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),h=l-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),d=c-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-o;return{cols:Math.max(2,Math.floor(d/s.css.cell.width)),rows:Math.max(1,Math.floor(h/s.css.cell.height))}}}})(),n})())})(iie);var mqe=iie.exports,sie={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(self,()=>(()=>{var n={6:(o,a)=>{function l(u){try{const h=new URL(u),d=h.password&&h.username?`${h.protocol}//${h.username}:${h.password}@${h.host}`:h.username?`${h.protocol}//${h.username}@${h.host}`:`${h.protocol}//${h.host}`;return u.toLocaleLowerCase().startsWith(d.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(a,"__esModule",{value:!0}),a.LinkComputer=a.WebLinkProvider=void 0,a.WebLinkProvider=class{constructor(u,h,d,f={}){this._terminal=u,this._regex=h,this._handler=d,this._options=f}provideLinks(u,h){const d=c.computeLink(u,this._regex,this._terminal,this._handler);h(this._addCallbacks(d))}_addCallbacks(u){return u.map(h=>(h.leave=this._options.leave,h.hover=(d,f)=>{if(this._options.hover){const{range:m}=h;this._options.hover(d,f,m)}},h))}};class c{static computeLink(h,d,f,m){const g=new RegExp(d.source,(d.flags||"")+"g"),[b,y]=c._getWindowedLineStrings(h-1,f),v=b.join("");let x;const w=[];for(;x=g.exec(v);){const S=x[0];if(!l(S))continue;const[E,k]=c._mapStrIdx(f,y,0,x.index),[_,L]=c._mapStrIdx(f,E,k,S.length);if(E===-1||k===-1||_===-1||L===-1)continue;const R={start:{x:k+1,y:E+1},end:{x:L,y:_+1}};w.push({range:R,text:S,activate:m})}return w}static _getWindowedLineStrings(h,d){let f,m=h,g=h,b=0,y="";const v=[];if(f=d.buffer.active.getLine(h)){const x=f.translateToString(!0);if(f.isWrapped&&x[0]!==" "){for(b=0;(f=d.buffer.active.getLine(--m))&&b<2048&&(y=f.translateToString(!0),b+=y.length,v.push(y),f.isWrapped&&y.indexOf(" ")===-1););v.reverse()}for(v.push(x),b=0;(f=d.buffer.active.getLine(++g))&&f.isWrapped&&b<2048&&(y=f.translateToString(!0),b+=y.length,v.push(y),y.indexOf(" ")===-1););}return[v,m]}static _mapStrIdx(h,d,f,m){const g=h.buffer.active,b=g.getNullCell();let y=f;for(;m;){const v=g.getLine(d);if(!v)return[-1,-1];for(let x=y;x<v.length;++x){v.getCell(x,b);const w=b.getChars();if(b.getWidth()&&(m-=w.length||1,x===v.length-1&&w==="")){const S=g.getLine(d+1);S&&S.isWrapped&&(S.getCell(0,b),b.getWidth()===2&&(m+=1))}if(m<0)return[d,x]}d++,y=0}return[d,y]}}a.LinkComputer=c}},r={};function i(o){var a=r[o];if(a!==void 0)return a.exports;var l=r[o]={exports:{}};return n[o](l,l.exports,i),l.exports}var s={};return(()=>{var o=s;Object.defineProperty(o,"__esModule",{value:!0}),o.WebLinksAddon=void 0;const a=i(6),l=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function c(u,h){const d=window.open();if(d){try{d.opener=null}catch{}d.location.href=h}else console.warn("Opening link blocked as opener could not be cleared")}o.WebLinksAddon=class{constructor(u=c,h={}){this._handler=u,this._options=h}activate(u){this._terminal=u;const h=this._options,d=h.urlRegex||l;this._linkProvider=this._terminal.registerLinkProvider(new a.WebLinkProvider(this._terminal,d,this._handler,h))}dispose(){this._linkProvider?.dispose()}}})(),s})())})(sie);var gqe=sie.exports,oie={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(globalThis,()=>(()=>{var n={4567:function(o,a,l){var c=this&&this.__decorate||function(v,x,w,S){var E,k=arguments.length,_=k<3?x:S===null?S=Object.getOwnPropertyDescriptor(x,w):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(v,x,w,S);else for(var L=v.length-1;L>=0;L--)(E=v[L])&&(_=(k<3?E(_):k>3?E(x,w,_):E(x,w))||_);return k>3&&_&&Object.defineProperty(x,w,_),_},u=this&&this.__param||function(v,x){return function(w,S){x(w,S,v)}};Object.defineProperty(a,"__esModule",{value:!0}),a.AccessibilityManager=void 0;const h=l(9042),d=l(9924),f=l(844),m=l(4725),g=l(2585),b=l(3656);let y=a.AccessibilityManager=class extends f.Disposable{constructor(v,x,w,S){super(),this._terminal=v,this._coreBrowserService=w,this._renderService=S,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let E=0;E<this._terminal.rows;E++)this._rowElements[E]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[E]);if(this._topBoundaryFocusListener=E=>this._handleBoundaryFocus(E,0),this._bottomBoundaryFocusListener=E=>this._handleBoundaryFocus(E,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new d.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(E=>this._handleResize(E.rows))),this.register(this._terminal.onRender(E=>this._refreshRows(E.start,E.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(E=>this._handleChar(E))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(E=>this._handleTab(E))),this.register(this._terminal.onKey(E=>this._handleKey(E.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,b.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,f.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(v){for(let x=0;x<v;x++)this._handleChar(" ")}_handleChar(v){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==v&&(this._charsToAnnounce+=v):this._charsToAnnounce+=v,v===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=h.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(v){this._clearLiveRegion(),/\p{Control}/u.test(v)||this._charsToConsume.push(v)}_refreshRows(v,x){this._liveRegionDebouncer.refresh(v,x,this._terminal.rows)}_renderRows(v,x){const w=this._terminal.buffer,S=w.lines.length.toString();for(let E=v;E<=x;E++){const k=w.lines.get(w.ydisp+E),_=[],L=k?.translateToString(!0,void 0,void 0,_)||"",R=(w.ydisp+E+1).toString(),C=this._rowElements[E];C&&(L.length===0?(C.innerText="",this._rowColumns.set(C,[0,1])):(C.textContent=L,this._rowColumns.set(C,_)),C.setAttribute("aria-posinset",R),C.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(v,x){const w=v.target,S=this._rowElements[x===0?1:this._rowElements.length-2];if(w.getAttribute("aria-posinset")===(x===0?"1":`${this._terminal.buffer.lines.length}`)||v.relatedTarget!==S)return;let E,k;if(x===0?(E=w,k=this._rowElements.pop(),this._rowContainer.removeChild(k)):(E=this._rowElements.shift(),k=w,this._rowContainer.removeChild(E)),E.removeEventListener("focus",this._topBoundaryFocusListener),k.removeEventListener("focus",this._bottomBoundaryFocusListener),x===0){const _=this._createAccessibilityTreeNode();this._rowElements.unshift(_),this._rowContainer.insertAdjacentElement("afterbegin",_)}else{const _=this._createAccessibilityTreeNode();this._rowElements.push(_),this._rowContainer.appendChild(_)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(x===0?-1:1),this._rowElements[x===0?1:this._rowElements.length-2].focus(),v.preventDefault(),v.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;const v=document.getSelection();if(!v)return;if(v.isCollapsed)return void(this._rowContainer.contains(v.anchorNode)&&this._terminal.clearSelection());if(!v.anchorNode||!v.focusNode)return void console.error("anchorNode and/or focusNode are null");let x={node:v.anchorNode,offset:v.anchorOffset},w={node:v.focusNode,offset:v.focusOffset};if((x.node.compareDocumentPosition(w.node)&Node.DOCUMENT_POSITION_PRECEDING||x.node===w.node&&x.offset>w.offset)&&([x,w]=[w,x]),x.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(x={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(x.node))return;const S=this._rowElements.slice(-1)[0];if(w.node.compareDocumentPosition(S)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(w={node:S,offset:S.textContent?.length??0}),!this._rowContainer.contains(w.node))return;const E=({node:L,offset:R})=>{const C=L instanceof Text?L.parentNode:L;let P=parseInt(C?.getAttribute("aria-posinset"),10)-1;if(isNaN(P))return console.warn("row is invalid. Race condition?"),null;const O=this._rowColumns.get(C);if(!O)return console.warn("columns is null. Race condition?"),null;let N=R<O.length?O[R]:O.slice(-1)[0]+1;return N>=this._terminal.cols&&(++P,N=0),{row:P,column:N}},k=E(x),_=E(w);if(k&&_){if(k.row>_.row||k.row===_.row&&k.column>=_.column)throw new Error("invalid range");this._terminal.select(k.column,k.row,(_.row-k.row)*this._terminal.cols-k.column+_.column)}}_handleResize(v){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let x=this._rowContainer.children.length;x<this._terminal.rows;x++)this._rowElements[x]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[x]);for(;this._rowElements.length>v;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const v=this._coreBrowserService.mainDocument.createElement("div");return v.setAttribute("role","listitem"),v.tabIndex=-1,this._refreshRowDimensions(v),v}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let v=0;v<this._terminal.rows;v++)this._refreshRowDimensions(this._rowElements[v])}}_refreshRowDimensions(v){v.style.height=`${this._renderService.dimensions.css.cell.height}px`}};a.AccessibilityManager=y=c([u(1,g.IInstantiationService),u(2,m.ICoreBrowserService),u(3,m.IRenderService)],y)},3614:(o,a)=>{function l(d){return d.replace(/\r?\n/g,"\r")}function c(d,f){return f?"\x1B[200~"+d+"\x1B[201~":d}function u(d,f,m,g){d=c(d=l(d),m.decPrivateModes.bracketedPasteMode&&g.rawOptions.ignoreBracketedPasteMode!==!0),m.triggerDataEvent(d,!0),f.value=""}function h(d,f,m){const g=m.getBoundingClientRect(),b=d.clientX-g.left-10,y=d.clientY-g.top-10;f.style.width="20px",f.style.height="20px",f.style.left=`${b}px`,f.style.top=`${y}px`,f.style.zIndex="1000",f.focus()}Object.defineProperty(a,"__esModule",{value:!0}),a.rightClickHandler=a.moveTextAreaUnderMouseCursor=a.paste=a.handlePasteEvent=a.copyHandler=a.bracketTextForPaste=a.prepareTextForTerminal=void 0,a.prepareTextForTerminal=l,a.bracketTextForPaste=c,a.copyHandler=function(d,f){d.clipboardData&&d.clipboardData.setData("text/plain",f.selectionText),d.preventDefault()},a.handlePasteEvent=function(d,f,m,g){d.stopPropagation(),d.clipboardData&&u(d.clipboardData.getData("text/plain"),f,m,g)},a.paste=u,a.moveTextAreaUnderMouseCursor=h,a.rightClickHandler=function(d,f,m,g,b){h(d,f,m),b&&g.rightClickSelect(d),f.value=g.selectionText,f.select()}},7239:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorContrastCache=void 0;const c=l(1505);a.ColorContrastCache=class{constructor(){this._color=new c.TwoKeyMap,this._css=new c.TwoKeyMap}setCss(u,h,d){this._css.set(u,h,d)}getCss(u,h){return this._css.get(u,h)}setColor(u,h,d){this._color.set(u,h,d)}getColor(u,h){return this._color.get(u,h)}clear(){this._color.clear(),this._css.clear()}}},3656:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.addDisposableDomListener=void 0,a.addDisposableDomListener=function(l,c,u,h){l.addEventListener(c,u,h);let d=!1;return{dispose:()=>{d||(d=!0,l.removeEventListener(c,u,h))}}}},3551:function(o,a,l){var c=this&&this.__decorate||function(y,v,x,w){var S,E=arguments.length,k=E<3?v:w===null?w=Object.getOwnPropertyDescriptor(v,x):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(y,v,x,w);else for(var _=y.length-1;_>=0;_--)(S=y[_])&&(k=(E<3?S(k):E>3?S(v,x,k):S(v,x))||k);return E>3&&k&&Object.defineProperty(v,x,k),k},u=this&&this.__param||function(y,v){return function(x,w){v(x,w,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Linkifier=void 0;const h=l(3656),d=l(8460),f=l(844),m=l(2585),g=l(4725);let b=a.Linkifier=class extends f.Disposable{get currentLink(){return this._currentLink}constructor(y,v,x,w,S){super(),this._element=y,this._mouseService=v,this._renderService=x,this._bufferService=w,this._linkProviderService=S,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new d.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new d.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,f.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,f.toDisposable)(()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,h.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,h.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(y){this._lastMouseEvent=y;const v=this._positionFromMouseEvent(y,this._element,this._mouseService);if(!v)return;this._isMouseOut=!1;const x=y.composedPath();for(let w=0;w<x.length;w++){const S=x[w];if(S.classList.contains("xterm"))break;if(S.classList.contains("xterm-hover"))return}this._lastBufferCell&&v.x===this._lastBufferCell.x&&v.y===this._lastBufferCell.y||(this._handleHover(v),this._lastBufferCell=v)}_handleHover(y){if(this._activeLine!==y.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(y,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,y)||(this._clearCurrentLink(),this._askForLink(y,!0))}_askForLink(y,v){this._activeProviderReplies&&v||(this._activeProviderReplies?.forEach(w=>{w?.forEach(S=>{S.link.dispose&&S.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=y.y);let x=!1;for(const[w,S]of this._linkProviderService.linkProviders.entries())v?this._activeProviderReplies?.get(w)&&(x=this._checkLinkProviderResult(w,y,x)):S.provideLinks(y.y,E=>{if(this._isMouseOut)return;const k=E?.map(_=>({link:_}));this._activeProviderReplies?.set(w,k),x=this._checkLinkProviderResult(w,y,x),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(y.y,this._activeProviderReplies)})}_removeIntersectingLinks(y,v){const x=new Set;for(let w=0;w<v.size;w++){const S=v.get(w);if(S)for(let E=0;E<S.length;E++){const k=S[E],_=k.link.range.start.y<y?0:k.link.range.start.x,L=k.link.range.end.y>y?this._bufferService.cols:k.link.range.end.x;for(let R=_;R<=L;R++){if(x.has(R)){S.splice(E--,1);break}x.add(R)}}}}_checkLinkProviderResult(y,v,x){if(!this._activeProviderReplies)return x;const w=this._activeProviderReplies.get(y);let S=!1;for(let E=0;E<y;E++)this._activeProviderReplies.has(E)&&!this._activeProviderReplies.get(E)||(S=!0);if(!S&&w){const E=w.find(k=>this._linkAtPosition(k.link,v));E&&(x=!0,this._handleNewLink(E))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!x)for(let E=0;E<this._activeProviderReplies.size;E++){const k=this._activeProviderReplies.get(E)?.find(_=>this._linkAtPosition(_.link,v));if(k){x=!0,this._handleNewLink(k);break}}return x}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(y){if(!this._currentLink)return;const v=this._positionFromMouseEvent(y,this._element,this._mouseService);v&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,v)&&this._currentLink.link.activate(y,this._currentLink.link.text)}_clearCurrentLink(y,v){this._currentLink&&this._lastMouseEvent&&(!y||!v||this._currentLink.link.range.start.y>=y&&this._currentLink.link.range.end.y<=v)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,f.disposeArray)(this._linkCacheDisposables))}_handleNewLink(y){if(!this._lastMouseEvent)return;const v=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);v&&this._linkAtPosition(y.link,v)&&(this._currentLink=y,this._currentLink.state={decorations:{underline:y.link.decorations===void 0||y.link.decorations.underline,pointerCursor:y.link.decorations===void 0||y.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,y.link,this._lastMouseEvent),y.link.decorations={},Object.defineProperties(y.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:x=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==x&&(this._currentLink.state.decorations.pointerCursor=x,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",x))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:x=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==x&&(this._currentLink.state.decorations.underline=x,this._currentLink.state.isHovered&&this._fireUnderlineEvent(y.link,x))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(x=>{if(!this._currentLink)return;const w=x.start===0?0:x.start+1+this._bufferService.buffer.ydisp,S=this._bufferService.buffer.ydisp+1+x.end;if(this._currentLink.link.range.start.y>=w&&this._currentLink.link.range.end.y<=S&&(this._clearCurrentLink(w,S),this._lastMouseEvent)){const E=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);E&&this._askForLink(E,!1)}})))}_linkHover(y,v,x){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(v,!0),this._currentLink.state.decorations.pointerCursor&&y.classList.add("xterm-cursor-pointer")),v.hover&&v.hover(x,v.text)}_fireUnderlineEvent(y,v){const x=y.range,w=this._bufferService.buffer.ydisp,S=this._createLinkUnderlineEvent(x.start.x-1,x.start.y-w-1,x.end.x,x.end.y-w-1,void 0);(v?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(S)}_linkLeave(y,v,x){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(v,!1),this._currentLink.state.decorations.pointerCursor&&y.classList.remove("xterm-cursor-pointer")),v.leave&&v.leave(x,v.text)}_linkAtPosition(y,v){const x=y.range.start.y*this._bufferService.cols+y.range.start.x,w=y.range.end.y*this._bufferService.cols+y.range.end.x,S=v.y*this._bufferService.cols+v.x;return x<=S&&S<=w}_positionFromMouseEvent(y,v,x){const w=x.getCoords(y,v,this._bufferService.cols,this._bufferService.rows);if(w)return{x:w[0],y:w[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(y,v,x,w,S){return{x1:y,y1:v,x2:x,y2:w,cols:this._bufferService.cols,fg:S}}};a.Linkifier=b=c([u(1,g.IMouseService),u(2,g.IRenderService),u(3,m.IBufferService),u(4,g.ILinkProviderService)],b)},9042:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.tooMuchOutput=a.promptLabel=void 0,a.promptLabel="Terminal input",a.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(o,a,l){var c=this&&this.__decorate||function(g,b,y,v){var x,w=arguments.length,S=w<3?b:v===null?v=Object.getOwnPropertyDescriptor(b,y):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(g,b,y,v);else for(var E=g.length-1;E>=0;E--)(x=g[E])&&(S=(w<3?x(S):w>3?x(b,y,S):x(b,y))||S);return w>3&&S&&Object.defineProperty(b,y,S),S},u=this&&this.__param||function(g,b){return function(y,v){b(y,v,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkProvider=void 0;const h=l(511),d=l(2585);let f=a.OscLinkProvider=class{constructor(g,b,y){this._bufferService=g,this._optionsService=b,this._oscLinkService=y}provideLinks(g,b){const y=this._bufferService.buffer.lines.get(g-1);if(!y)return void b(void 0);const v=[],x=this._optionsService.rawOptions.linkHandler,w=new h.CellData,S=y.getTrimmedLength();let E=-1,k=-1,_=!1;for(let L=0;L<S;L++)if(k!==-1||y.hasContent(L)){if(y.loadCell(L,w),w.hasExtendedAttrs()&&w.extended.urlId){if(k===-1){k=L,E=w.extended.urlId;continue}_=w.extended.urlId!==E}else k!==-1&&(_=!0);if(_||k!==-1&&L===S-1){const R=this._oscLinkService.getLinkData(E)?.uri;if(R){const C={start:{x:k+1,y:g},end:{x:L+(_||L!==S-1?0:1),y:g}};let P=!1;if(!x?.allowNonHttpProtocols)try{const O=new URL(R);["http:","https:"].includes(O.protocol)||(P=!0)}catch{P=!0}P||v.push({text:R,range:C,activate:(O,N)=>x?x.activate(O,N,C):m(0,N),hover:(O,N)=>x?.hover?.(O,N,C),leave:(O,N)=>x?.leave?.(O,N,C)})}_=!1,w.hasExtendedAttrs()&&w.extended.urlId?(k=L,E=w.extended.urlId):(k=-1,E=-1)}}b(v)}};function m(g,b){if(confirm(`Do you want to navigate to ${b}?

WARNING: This link could potentially be dangerous`)){const y=window.open();if(y){try{y.opener=null}catch{}y.location.href=b}else console.warn("Opening link blocked as opener could not be cleared")}}a.OscLinkProvider=f=c([u(0,d.IBufferService),u(1,d.IOptionsService),u(2,d.IOscLinkService)],f)},6193:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.RenderDebouncer=void 0,a.RenderDebouncer=class{constructor(l,c){this._renderCallback=l,this._coreBrowserService=c,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(l){return this._refreshCallbacks.push(l),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(l,c,u){this._rowCount=u,l=l!==void 0?l:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const l=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,c),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const l of this._refreshCallbacks)l(0);this._refreshCallbacks=[]}}},3236:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Terminal=void 0;const c=l(3614),u=l(3656),h=l(3551),d=l(9042),f=l(3730),m=l(1680),g=l(3107),b=l(5744),y=l(2950),v=l(1296),x=l(428),w=l(4269),S=l(5114),E=l(8934),k=l(3230),_=l(9312),L=l(4725),R=l(6731),C=l(8055),P=l(8969),O=l(8460),N=l(844),H=l(6114),Q=l(8437),X=l(2584),J=l(7399),j=l(5941),F=l(9074),Y=l(2585),M=l(5435),D=l(4567),V=l(779);class W extends P.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(ee={}){super(ee),this.browser=H,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new N.MutableDisposable),this._onCursorMove=this.register(new O.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new O.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new O.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new O.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new O.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new O.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new O.EventEmitter),this._onBlur=this.register(new O.EventEmitter),this._onA11yCharEmitter=this.register(new O.EventEmitter),this._onA11yTabEmitter=this.register(new O.EventEmitter),this._onWillOpen=this.register(new O.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(F.DecorationService),this._instantiationService.setService(Y.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(V.LinkProviderService),this._instantiationService.setService(L.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(f.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((K,he)=>this.refresh(K,he))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(K=>this._reportWindowsOptions(K))),this.register(this._inputHandler.onColor(K=>this._handleColorEvent(K))),this.register((0,O.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,O.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,O.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,O.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(K=>this._afterResize(K.cols,K.rows))),this.register((0,N.toDisposable)(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}_handleColorEvent(ee){if(this._themeService)for(const K of ee){let he,be="";switch(K.index){case 256:he="foreground",be="10";break;case 257:he="background",be="11";break;case 258:he="cursor",be="12";break;default:he="ansi",be="4;"+K.index}switch(K.type){case 0:const Se=C.color.toColorRGB(he==="ansi"?this._themeService.colors.ansi[K.index]:this._themeService.colors[he]);this.coreService.triggerDataEvent(`${X.C0.ESC}]${be};${(0,j.toRgbString)(Se)}${X.C1_ESCAPED.ST}`);break;case 1:if(he==="ansi")this._themeService.modifyColors(Ce=>Ce.ansi[K.index]=C.channels.toColor(...K.color));else{const Ce=he;this._themeService.modifyColors(ke=>ke[Ce]=C.channels.toColor(...K.color))}break;case 2:this._themeService.restoreColor(K.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(ee){ee?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(D.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(ee){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(X.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(X.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const ee=this.buffer.ybase+this.buffer.y,K=this.buffer.lines.get(ee);if(!K)return;const he=Math.min(this.buffer.x,this.cols-1),be=this._renderService.dimensions.css.cell.height,Se=K.getWidth(he),Ce=this._renderService.dimensions.css.cell.width*Se,ke=this.buffer.y*this._renderService.dimensions.css.cell.height,q=he*this._renderService.dimensions.css.cell.width;this.textarea.style.left=q+"px",this.textarea.style.top=ke+"px",this.textarea.style.width=Ce+"px",this.textarea.style.height=be+"px",this.textarea.style.lineHeight=be+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,u.addDisposableDomListener)(this.element,"copy",K=>{this.hasSelection()&&(0,c.copyHandler)(K,this._selectionService)}));const ee=K=>(0,c.handlePasteEvent)(K,this.textarea,this.coreService,this.optionsService);this.register((0,u.addDisposableDomListener)(this.textarea,"paste",ee)),this.register((0,u.addDisposableDomListener)(this.element,"paste",ee)),H.isFirefox?this.register((0,u.addDisposableDomListener)(this.element,"mousedown",K=>{K.button===2&&(0,c.rightClickHandler)(K,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,u.addDisposableDomListener)(this.element,"contextmenu",K=>{(0,c.rightClickHandler)(K,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),H.isLinux&&this.register((0,u.addDisposableDomListener)(this.element,"auxclick",K=>{K.button===1&&(0,c.moveTextAreaUnderMouseCursor)(K,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,u.addDisposableDomListener)(this.textarea,"keyup",ee=>this._keyUp(ee),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keydown",ee=>this._keyDown(ee),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keypress",ee=>this._keyPress(ee),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionupdate",ee=>this._compositionHelper.compositionupdate(ee))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,u.addDisposableDomListener)(this.textarea,"input",ee=>this._inputEvent(ee),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(ee){if(!ee)throw new Error("Terminal requires a parent element.");if(ee.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=ee.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),ee.appendChild(this.element);const K=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),K.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,u.addDisposableDomListener)(this.screenElement,"mousemove",he=>this.updateCursorStyle(he))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),K.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",d.promptLabel),H.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(S.CoreBrowserService,this.textarea,ee.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(L.ICoreBrowserService,this._coreBrowserService),this.register((0,u.addDisposableDomListener)(this.textarea,"focus",he=>this._handleTextAreaFocus(he))),this.register((0,u.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(x.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(L.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(R.ThemeService),this._instantiationService.setService(L.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(w.CharacterJoinerService),this._instantiationService.setService(L.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(k.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(L.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(he=>this._onRender.fire(he))),this.onResize(he=>this._renderService.resize(he.cols,he.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(y.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(E.MouseService),this._instantiationService.setService(L.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(h.Linkifier,this.screenElement)),this.element.appendChild(K);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(m.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(he=>this.scrollLines(he.amount,he.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(_.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(L.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(he=>this.scrollLines(he.amount,he.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(he=>this._renderService.handleSelectionChanged(he.start,he.end,he.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(he=>{this.textarea.value=he,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(he=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(g.BufferDecorationRenderer,this.screenElement)),this.register((0,u.addDisposableDomListener)(this.element,"mousedown",he=>this._selectionService.handleMouseDown(he))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(D.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",he=>this._handleScreenReaderModeOptionChange(he))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(b.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",he=>{!this._overviewRulerRenderer&&he&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(b.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(v.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const ee=this,K=this.element;function he(Ce){const ke=ee._mouseService.getMouseReportCoords(Ce,ee.screenElement);if(!ke)return!1;let q,pe;switch(Ce.overrideType||Ce.type){case"mousemove":pe=32,Ce.buttons===void 0?(q=3,Ce.button!==void 0&&(q=Ce.button<3?Ce.button:3)):q=1&Ce.buttons?0:4&Ce.buttons?1:2&Ce.buttons?2:3;break;case"mouseup":pe=0,q=Ce.button<3?Ce.button:3;break;case"mousedown":pe=1,q=Ce.button<3?Ce.button:3;break;case"wheel":if(ee._customWheelEventHandler&&ee._customWheelEventHandler(Ce)===!1||ee.viewport.getLinesScrolled(Ce)===0)return!1;pe=Ce.deltaY<0?0:1,q=4;break;default:return!1}return!(pe===void 0||q===void 0||q>4)&&ee.coreMouseService.triggerMouseEvent({col:ke.col,row:ke.row,x:ke.x,y:ke.y,button:q,action:pe,ctrl:Ce.ctrlKey,alt:Ce.altKey,shift:Ce.shiftKey})}const be={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Se={mouseup:Ce=>(he(Ce),Ce.buttons||(this._document.removeEventListener("mouseup",be.mouseup),be.mousedrag&&this._document.removeEventListener("mousemove",be.mousedrag)),this.cancel(Ce)),wheel:Ce=>(he(Ce),this.cancel(Ce,!0)),mousedrag:Ce=>{Ce.buttons&&he(Ce)},mousemove:Ce=>{Ce.buttons||he(Ce)}};this.register(this.coreMouseService.onProtocolChange(Ce=>{Ce?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Ce)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Ce?be.mousemove||(K.addEventListener("mousemove",Se.mousemove),be.mousemove=Se.mousemove):(K.removeEventListener("mousemove",be.mousemove),be.mousemove=null),16&Ce?be.wheel||(K.addEventListener("wheel",Se.wheel,{passive:!1}),be.wheel=Se.wheel):(K.removeEventListener("wheel",be.wheel),be.wheel=null),2&Ce?be.mouseup||(be.mouseup=Se.mouseup):(this._document.removeEventListener("mouseup",be.mouseup),be.mouseup=null),4&Ce?be.mousedrag||(be.mousedrag=Se.mousedrag):(this._document.removeEventListener("mousemove",be.mousedrag),be.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,u.addDisposableDomListener)(K,"mousedown",Ce=>{if(Ce.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Ce))return he(Ce),be.mouseup&&this._document.addEventListener("mouseup",be.mouseup),be.mousedrag&&this._document.addEventListener("mousemove",be.mousedrag),this.cancel(Ce)})),this.register((0,u.addDisposableDomListener)(K,"wheel",Ce=>{if(!be.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(Ce)===!1)return!1;if(!this.buffer.hasScrollback){const ke=this.viewport.getLinesScrolled(Ce);if(ke===0)return;const q=X.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Ce.deltaY<0?"A":"B");let pe="";for(let ne=0;ne<Math.abs(ke);ne++)pe+=q;return this.coreService.triggerDataEvent(pe,!0),this.cancel(Ce,!0)}return this.viewport.handleWheel(Ce)?this.cancel(Ce):void 0}},{passive:!1})),this.register((0,u.addDisposableDomListener)(K,"touchstart",Ce=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Ce),this.cancel(Ce)},{passive:!0})),this.register((0,u.addDisposableDomListener)(K,"touchmove",Ce=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Ce)?void 0:this.cancel(Ce)},{passive:!1}))}refresh(ee,K){this._renderService?.refreshRows(ee,K)}updateCursorStyle(ee){this._selectionService?.shouldColumnSelect(ee)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(ee,K,he=0){he===1?(super.scrollLines(ee,K,he),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(ee)}paste(ee){(0,c.paste)(ee,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(ee){this._customKeyEventHandler=ee}attachCustomWheelEventHandler(ee){this._customWheelEventHandler=ee}registerLinkProvider(ee){return this._linkProviderService.registerLinkProvider(ee)}registerCharacterJoiner(ee){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const K=this._characterJoinerService.register(ee);return this.refresh(0,this.rows-1),K}deregisterCharacterJoiner(ee){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(ee)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(ee){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+ee)}registerDecoration(ee){return this._decorationService.registerDecoration(ee)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(ee,K,he){this._selectionService.setSelection(ee,K,he)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(ee,K){this._selectionService?.selectLines(ee,K)}_keyDown(ee){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(ee)===!1)return!1;const K=this.browser.isMac&&this.options.macOptionIsMeta&&ee.altKey;if(!K&&!this._compositionHelper.keydown(ee))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;K||ee.key!=="Dead"&&ee.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const he=(0,J.evaluateKeyboardEvent)(ee,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(ee),he.type===3||he.type===2){const be=this.rows-1;return this.scrollLines(he.type===2?-be:be),this.cancel(ee,!0)}return he.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,ee)||(he.cancel&&this.cancel(ee,!0),!he.key||!!(ee.key&&!ee.ctrlKey&&!ee.altKey&&!ee.metaKey&&ee.key.length===1&&ee.key.charCodeAt(0)>=65&&ee.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(he.key!==X.C0.ETX&&he.key!==X.C0.CR||(this.textarea.value=""),this._onKey.fire({key:he.key,domEvent:ee}),this._showCursor(),this.coreService.triggerDataEvent(he.key,!0),!this.optionsService.rawOptions.screenReaderMode||ee.altKey||ee.ctrlKey?this.cancel(ee,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(ee,K){const he=ee.isMac&&!this.options.macOptionIsMeta&&K.altKey&&!K.ctrlKey&&!K.metaKey||ee.isWindows&&K.altKey&&K.ctrlKey&&!K.metaKey||ee.isWindows&&K.getModifierState("AltGraph");return K.type==="keypress"?he:he&&(!K.keyCode||K.keyCode>47)}_keyUp(ee){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(ee)===!1||(function(K){return K.keyCode===16||K.keyCode===17||K.keyCode===18}(ee)||this.focus(),this.updateCursorStyle(ee),this._keyPressHandled=!1)}_keyPress(ee){let K;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(ee)===!1)return!1;if(this.cancel(ee),ee.charCode)K=ee.charCode;else if(ee.which===null||ee.which===void 0)K=ee.keyCode;else{if(ee.which===0||ee.charCode===0)return!1;K=ee.which}return!(!K||(ee.altKey||ee.ctrlKey||ee.metaKey)&&!this._isThirdLevelShift(this.browser,ee)||(K=String.fromCharCode(K),this._onKey.fire({key:K,domEvent:ee}),this._showCursor(),this.coreService.triggerDataEvent(K,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(ee){if(ee.data&&ee.inputType==="insertText"&&(!ee.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const K=ee.data;return this.coreService.triggerDataEvent(K,!0),this.cancel(ee),!0}return!1}resize(ee,K){ee!==this.cols||K!==this.rows?super.resize(ee,K):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(ee,K){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let ee=1;ee<this.rows;ee++)this.buffer.lines.push(this.buffer.getBlankLine(Q.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const ee=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=ee,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(X.C0.ESC+"[I"):this.coreService.triggerDataEvent(X.C0.ESC+"[O")}_reportWindowsOptions(ee){if(this._renderService)switch(ee){case M.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const K=this._renderService.dimensions.css.canvas.width.toFixed(0),he=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${X.C0.ESC}[4;${he};${K}t`);break;case M.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const be=this._renderService.dimensions.css.cell.width.toFixed(0),Se=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${X.C0.ESC}[6;${Se};${be}t`)}}cancel(ee,K){if(this.options.cancelEvents||K)return ee.preventDefault(),ee.stopPropagation(),!1}}a.Terminal=W},9924:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TimeBasedDebouncer=void 0,a.TimeBasedDebouncer=class{constructor(l,c=1e3){this._renderCallback=l,this._debounceThresholdMS=c,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(l,c,u){this._rowCount=u,l=l!==void 0?l:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c;const h=Date.now();if(h-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=h,this._innerRefresh();else if(!this._additionalRefreshRequested){const d=h-this._lastRefreshMs,f=this._debounceThresholdMS-d;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},f)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const l=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,c)}}},1680:function(o,a,l){var c=this&&this.__decorate||function(y,v,x,w){var S,E=arguments.length,k=E<3?v:w===null?w=Object.getOwnPropertyDescriptor(v,x):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(y,v,x,w);else for(var _=y.length-1;_>=0;_--)(S=y[_])&&(k=(E<3?S(k):E>3?S(v,x,k):S(v,x))||k);return E>3&&k&&Object.defineProperty(v,x,k),k},u=this&&this.__param||function(y,v){return function(x,w){v(x,w,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Viewport=void 0;const h=l(3656),d=l(4725),f=l(8460),m=l(844),g=l(2585);let b=a.Viewport=class extends m.Disposable{constructor(y,v,x,w,S,E,k,_){super(),this._viewportElement=y,this._scrollArea=v,this._bufferService=x,this._optionsService=w,this._charSizeService=S,this._renderService=E,this._coreBrowserService=k,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new f.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,h.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(L=>this._activeBuffer=L.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(L=>this._renderDimensions=L)),this._handleThemeChange(_.colors),this.register(_.onChangeColors(L=>this._handleThemeChange(L))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(y){this._viewportElement.style.backgroundColor=y.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(y){if(y)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const v=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==v&&(this._lastRecordedBufferHeight=v,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const y=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==y&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=y),this._refreshAnimationFrame=null}syncScrollArea(y=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(y);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(y)}_handleScroll(y){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const v=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:v,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const y=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(y*(this._smoothScrollState.target-this._smoothScrollState.origin)),y<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(y,v){const x=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(v<0&&this._viewportElement.scrollTop!==0||v>0&&x<this._lastRecordedBufferHeight)||(y.cancelable&&y.preventDefault(),!1)}handleWheel(y){const v=this._getPixelsScrolled(y);return v!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+v:this._smoothScrollState.target+=v,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=v,this._bubbleScroll(y,v))}scrollLines(y){if(y!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const v=y*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+v,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:y,suppressScrollEvent:!1})}_getPixelsScrolled(y){if(y.deltaY===0||y.shiftKey)return 0;let v=this._applyScrollModifier(y.deltaY,y);return y.deltaMode===WheelEvent.DOM_DELTA_LINE?v*=this._currentRowHeight:y.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(v*=this._currentRowHeight*this._bufferService.rows),v}getBufferElements(y,v){let x,w="";const S=[],E=v??this._bufferService.buffer.lines.length,k=this._bufferService.buffer.lines;for(let _=y;_<E;_++){const L=k.get(_);if(!L)continue;const R=k.get(_+1)?.isWrapped;if(w+=L.translateToString(!R),!R||_===k.length-1){const C=document.createElement("div");C.textContent=w,S.push(C),w.length>0&&(x=C),w=""}}return{bufferElements:S,cursorElement:x}}getLinesScrolled(y){if(y.deltaY===0||y.shiftKey)return 0;let v=this._applyScrollModifier(y.deltaY,y);return y.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(v/=this._currentRowHeight+0,this._wheelPartialScroll+=v,v=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):y.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(v*=this._bufferService.rows),v}_applyScrollModifier(y,v){const x=this._optionsService.rawOptions.fastScrollModifier;return x==="alt"&&v.altKey||x==="ctrl"&&v.ctrlKey||x==="shift"&&v.shiftKey?y*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:y*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(y){this._lastTouchY=y.touches[0].pageY}handleTouchMove(y){const v=this._lastTouchY-y.touches[0].pageY;return this._lastTouchY=y.touches[0].pageY,v!==0&&(this._viewportElement.scrollTop+=v,this._bubbleScroll(y,v))}};a.Viewport=b=c([u(2,g.IBufferService),u(3,g.IOptionsService),u(4,d.ICharSizeService),u(5,d.IRenderService),u(6,d.ICoreBrowserService),u(7,d.IThemeService)],b)},3107:function(o,a,l){var c=this&&this.__decorate||function(g,b,y,v){var x,w=arguments.length,S=w<3?b:v===null?v=Object.getOwnPropertyDescriptor(b,y):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(g,b,y,v);else for(var E=g.length-1;E>=0;E--)(x=g[E])&&(S=(w<3?x(S):w>3?x(b,y,S):x(b,y))||S);return w>3&&S&&Object.defineProperty(b,y,S),S},u=this&&this.__param||function(g,b){return function(y,v){b(y,v,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferDecorationRenderer=void 0;const h=l(4725),d=l(844),f=l(2585);let m=a.BufferDecorationRenderer=class extends d.Disposable{constructor(g,b,y,v,x){super(),this._screenElement=g,this._bufferService=b,this._coreBrowserService=y,this._decorationService=v,this._renderService=x,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(w=>this._removeDecoration(w))),this.register((0,d.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const g of this._decorationService.decorations)this._renderDecoration(g);this._dimensionsChanged=!1}_renderDecoration(g){this._refreshStyle(g),this._dimensionsChanged&&this._refreshXPosition(g)}_createElement(g){const b=this._coreBrowserService.mainDocument.createElement("div");b.classList.add("xterm-decoration"),b.classList.toggle("xterm-decoration-top-layer",g?.options?.layer==="top"),b.style.width=`${Math.round((g.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,b.style.height=(g.options.height||1)*this._renderService.dimensions.css.cell.height+"px",b.style.top=(g.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",b.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const y=g.options.x??0;return y&&y>this._bufferService.cols&&(b.style.display="none"),this._refreshXPosition(g,b),b}_refreshStyle(g){const b=g.marker.line-this._bufferService.buffers.active.ydisp;if(b<0||b>=this._bufferService.rows)g.element&&(g.element.style.display="none",g.onRenderEmitter.fire(g.element));else{let y=this._decorationElements.get(g);y||(y=this._createElement(g),g.element=y,this._decorationElements.set(g,y),this._container.appendChild(y),g.onDispose(()=>{this._decorationElements.delete(g),y.remove()})),y.style.top=b*this._renderService.dimensions.css.cell.height+"px",y.style.display=this._altBufferIsActive?"none":"block",g.onRenderEmitter.fire(y)}}_refreshXPosition(g,b=g.element){if(!b)return;const y=g.options.x??0;(g.options.anchor||"left")==="right"?b.style.right=y?y*this._renderService.dimensions.css.cell.width+"px":"":b.style.left=y?y*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(g){this._decorationElements.get(g)?.remove(),this._decorationElements.delete(g),g.dispose()}};a.BufferDecorationRenderer=m=c([u(1,f.IBufferService),u(2,h.ICoreBrowserService),u(3,f.IDecorationService),u(4,h.IRenderService)],m)},5871:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorZoneStore=void 0,a.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(l){if(l.options.overviewRulerOptions){for(const c of this._zones)if(c.color===l.options.overviewRulerOptions.color&&c.position===l.options.overviewRulerOptions.position){if(this._lineIntersectsZone(c,l.marker.line))return;if(this._lineAdjacentToZone(c,l.marker.line,l.options.overviewRulerOptions.position))return void this._addLineToZone(c,l.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=l.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=l.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=l.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=l.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:l.options.overviewRulerOptions.color,position:l.options.overviewRulerOptions.position,startBufferLine:l.marker.line,endBufferLine:l.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(l){this._linePadding=l}_lineIntersectsZone(l,c){return c>=l.startBufferLine&&c<=l.endBufferLine}_lineAdjacentToZone(l,c,u){return c>=l.startBufferLine-this._linePadding[u||"full"]&&c<=l.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(l,c){l.startBufferLine=Math.min(l.startBufferLine,c),l.endBufferLine=Math.max(l.endBufferLine,c)}}},5744:function(o,a,l){var c=this&&this.__decorate||function(x,w,S,E){var k,_=arguments.length,L=_<3?w:E===null?E=Object.getOwnPropertyDescriptor(w,S):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(x,w,S,E);else for(var R=x.length-1;R>=0;R--)(k=x[R])&&(L=(_<3?k(L):_>3?k(w,S,L):k(w,S))||L);return _>3&&L&&Object.defineProperty(w,S,L),L},u=this&&this.__param||function(x,w){return function(S,E){w(S,E,x)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OverviewRulerRenderer=void 0;const h=l(5871),d=l(4725),f=l(844),m=l(2585),g={full:0,left:0,center:0,right:0},b={full:0,left:0,center:0,right:0},y={full:0,left:0,center:0,right:0};let v=a.OverviewRulerRenderer=class extends f.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(x,w,S,E,k,_,L){super(),this._viewportElement=x,this._screenElement=w,this._bufferService=S,this._decorationService=E,this._renderService=k,this._optionsService=_,this._coreBrowserService=L,this._colorZoneStore=new h.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const R=this._canvas.getContext("2d");if(!R)throw new Error("Ctx cannot be null");this._ctx=R,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,f.toDisposable)(()=>{this._canvas?.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const x=Math.floor(this._canvas.width/3),w=Math.ceil(this._canvas.width/3);b.full=this._canvas.width,b.left=x,b.center=w,b.right=x,this._refreshDrawHeightConstants(),y.full=0,y.left=0,y.center=b.left,y.right=b.left+b.center}_refreshDrawHeightConstants(){g.full=Math.round(2*this._coreBrowserService.dpr);const x=this._canvas.height/this._bufferService.buffer.lines.length,w=Math.round(Math.max(Math.min(x,12),6)*this._coreBrowserService.dpr);g.left=w,g.center=w,g.right=w}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const w of this._decorationService.decorations)this._colorZoneStore.addDecoration(w);this._ctx.lineWidth=1;const x=this._colorZoneStore.zones;for(const w of x)w.position!=="full"&&this._renderColorZone(w);for(const w of x)w.position==="full"&&this._renderColorZone(w);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(x){this._ctx.fillStyle=x.color,this._ctx.fillRect(y[x.position||"full"],Math.round((this._canvas.height-1)*(x.startBufferLine/this._bufferService.buffers.active.lines.length)-g[x.position||"full"]/2),b[x.position||"full"],Math.round((this._canvas.height-1)*((x.endBufferLine-x.startBufferLine)/this._bufferService.buffers.active.lines.length)+g[x.position||"full"]))}_queueRefresh(x,w){this._shouldUpdateDimensions=x||this._shouldUpdateDimensions,this._shouldUpdateAnchor=w||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};a.OverviewRulerRenderer=v=c([u(2,m.IBufferService),u(3,m.IDecorationService),u(4,d.IRenderService),u(5,m.IOptionsService),u(6,d.ICoreBrowserService)],v)},2950:function(o,a,l){var c=this&&this.__decorate||function(g,b,y,v){var x,w=arguments.length,S=w<3?b:v===null?v=Object.getOwnPropertyDescriptor(b,y):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(g,b,y,v);else for(var E=g.length-1;E>=0;E--)(x=g[E])&&(S=(w<3?x(S):w>3?x(b,y,S):x(b,y))||S);return w>3&&S&&Object.defineProperty(b,y,S),S},u=this&&this.__param||function(g,b){return function(y,v){b(y,v,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CompositionHelper=void 0;const h=l(4725),d=l(2585),f=l(2584);let m=a.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(g,b,y,v,x,w){this._textarea=g,this._compositionView=b,this._bufferService=y,this._optionsService=v,this._coreService=x,this._renderService=w,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(g){this._compositionView.textContent=g.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(g){if(this._isComposing||this._isSendingComposition){if(g.keyCode===229||g.keyCode===16||g.keyCode===17||g.keyCode===18)return!1;this._finalizeComposition(!1)}return g.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(g){if(this._compositionView.classList.remove("active"),this._isComposing=!1,g){const b={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let y;this._isSendingComposition=!1,b.start+=this._dataAlreadySent.length,y=this._isComposing?this._textarea.value.substring(b.start,b.end):this._textarea.value.substring(b.start),y.length>0&&this._coreService.triggerDataEvent(y,!0)}},0)}else{this._isSendingComposition=!1;const b=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(b,!0)}}_handleAnyTextareaChanges(){const g=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const b=this._textarea.value,y=b.replace(g,"");this._dataAlreadySent=y,b.length>g.length?this._coreService.triggerDataEvent(y,!0):b.length<g.length?this._coreService.triggerDataEvent(`${f.C0.DEL}`,!0):b.length===g.length&&b!==g&&this._coreService.triggerDataEvent(b,!0)}},0)}updateCompositionElements(g){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const b=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),y=this._renderService.dimensions.css.cell.height,v=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,x=b*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=x+"px",this._compositionView.style.top=v+"px",this._compositionView.style.height=y+"px",this._compositionView.style.lineHeight=y+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const w=this._compositionView.getBoundingClientRect();this._textarea.style.left=x+"px",this._textarea.style.top=v+"px",this._textarea.style.width=Math.max(w.width,1)+"px",this._textarea.style.height=Math.max(w.height,1)+"px",this._textarea.style.lineHeight=w.height+"px"}g||setTimeout(()=>this.updateCompositionElements(!0),0)}}};a.CompositionHelper=m=c([u(2,d.IBufferService),u(3,d.IOptionsService),u(4,d.ICoreService),u(5,h.IRenderService)],m)},9806:(o,a)=>{function l(c,u,h){const d=h.getBoundingClientRect(),f=c.getComputedStyle(h),m=parseInt(f.getPropertyValue("padding-left")),g=parseInt(f.getPropertyValue("padding-top"));return[u.clientX-d.left-m,u.clientY-d.top-g]}Object.defineProperty(a,"__esModule",{value:!0}),a.getCoords=a.getCoordsRelativeToElement=void 0,a.getCoordsRelativeToElement=l,a.getCoords=function(c,u,h,d,f,m,g,b,y){if(!m)return;const v=l(c,u,h);return v?(v[0]=Math.ceil((v[0]+(y?g/2:0))/g),v[1]=Math.ceil(v[1]/b),v[0]=Math.min(Math.max(v[0],1),d+(y?1:0)),v[1]=Math.min(Math.max(v[1],1),f),v):void 0}},9504:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.moveToCellSequence=void 0;const c=l(2584);function u(b,y,v,x){const w=b-h(b,v),S=y-h(y,v),E=Math.abs(w-S)-function(k,_,L){let R=0;const C=k-h(k,L),P=_-h(_,L);for(let O=0;O<Math.abs(C-P);O++){const N=d(k,_)==="A"?-1:1;L.buffer.lines.get(C+N*O)?.isWrapped&&R++}return R}(b,y,v);return g(E,m(d(b,y),x))}function h(b,y){let v=0,x=y.buffer.lines.get(b),w=x?.isWrapped;for(;w&&b>=0&&b<y.rows;)v++,x=y.buffer.lines.get(--b),w=x?.isWrapped;return v}function d(b,y){return b>y?"A":"B"}function f(b,y,v,x,w,S){let E=b,k=y,_="";for(;E!==v||k!==x;)E+=w?1:-1,w&&E>S.cols-1?(_+=S.buffer.translateBufferLineToString(k,!1,b,E),E=0,b=0,k++):!w&&E<0&&(_+=S.buffer.translateBufferLineToString(k,!1,0,b+1),E=S.cols-1,b=E,k--);return _+S.buffer.translateBufferLineToString(k,!1,b,E)}function m(b,y){const v=y?"O":"[";return c.C0.ESC+v+b}function g(b,y){b=Math.floor(b);let v="";for(let x=0;x<b;x++)v+=y;return v}a.moveToCellSequence=function(b,y,v,x){const w=v.buffer.x,S=v.buffer.y;if(!v.buffer.hasScrollback)return function(_,L,R,C,P,O){return u(L,C,P,O).length===0?"":g(f(_,L,_,L-h(L,P),!1,P).length,m("D",O))}(w,S,0,y,v,x)+u(S,y,v,x)+function(_,L,R,C,P,O){let N;N=u(L,C,P,O).length>0?C-h(C,P):L;const H=C,Q=function(X,J,j,F,Y,M){let D;return D=u(j,F,Y,M).length>0?F-h(F,Y):J,X<j&&D<=F||X>=j&&D<F?"C":"D"}(_,L,R,C,P,O);return g(f(_,N,R,H,Q==="C",P).length,m(Q,O))}(w,S,b,y,v,x);let E;if(S===y)return E=w>b?"D":"C",g(Math.abs(w-b),m(E,x));E=S>y?"D":"C";const k=Math.abs(S-y);return g(function(_,L){return L.cols-_}(S>y?b:w,v)+(k-1)*v.cols+1+((S>y?w:b)-1),m(E,x))}},1296:function(o,a,l){var c=this&&this.__decorate||function(O,N,H,Q){var X,J=arguments.length,j=J<3?N:Q===null?Q=Object.getOwnPropertyDescriptor(N,H):Q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(O,N,H,Q);else for(var F=O.length-1;F>=0;F--)(X=O[F])&&(j=(J<3?X(j):J>3?X(N,H,j):X(N,H))||j);return J>3&&j&&Object.defineProperty(N,H,j),j},u=this&&this.__param||function(O,N){return function(H,Q){N(H,Q,O)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRenderer=void 0;const h=l(3787),d=l(2550),f=l(2223),m=l(6171),g=l(6052),b=l(4725),y=l(8055),v=l(8460),x=l(844),w=l(2585),S="xterm-dom-renderer-owner-",E="xterm-rows",k="xterm-fg-",_="xterm-bg-",L="xterm-focus",R="xterm-selection";let C=1,P=a.DomRenderer=class extends x.Disposable{constructor(O,N,H,Q,X,J,j,F,Y,M,D,V,W){super(),this._terminal=O,this._document=N,this._element=H,this._screenElement=Q,this._viewportElement=X,this._helperContainer=J,this._linkifier2=j,this._charSizeService=Y,this._optionsService=M,this._bufferService=D,this._coreBrowserService=V,this._themeService=W,this._terminalClass=C++,this._rowElements=[],this._selectionRenderModel=(0,g.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new v.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(E),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(R),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,m.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(te=>this._injectCss(te))),this._injectCss(this._themeService.colors),this._rowFactory=F.createInstance(h.DomRendererRowFactory,document),this._element.classList.add(S+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(te=>this._handleLinkHover(te))),this.register(this._linkifier2.onHideLinkUnderline(te=>this._handleLinkLeave(te))),this.register((0,x.toDisposable)(()=>{this._element.classList.remove(S+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new d.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const O=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*O,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*O),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/O),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/O),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const H of this._rowElements)H.style.width=`${this.dimensions.css.canvas.width}px`,H.style.height=`${this.dimensions.css.cell.height}px`,H.style.lineHeight=`${this.dimensions.css.cell.height}px`,H.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const N=`${this._terminalSelector} .${E} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=N,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(O){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let N=`${this._terminalSelector} .${E} { color: ${O.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;N+=`${this._terminalSelector} .${E} .xterm-dim { color: ${y.color.multiplyOpacity(O.foreground,.5).css};}`,N+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const H=`blink_underline_${this._terminalClass}`,Q=`blink_bar_${this._terminalClass}`,X=`blink_block_${this._terminalClass}`;N+=`@keyframes ${H} { 50% {  border-bottom-style: hidden; }}`,N+=`@keyframes ${Q} { 50% {  box-shadow: none; }}`,N+=`@keyframes ${X} { 0% {  background-color: ${O.cursor.css};  color: ${O.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${O.cursor.css}; }}`,N+=`${this._terminalSelector} .${E}.${L} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${H} 1s step-end infinite;}${this._terminalSelector} .${E}.${L} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${Q} 1s step-end infinite;}${this._terminalSelector} .${E}.${L} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${X} 1s step-end infinite;}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-block { background-color: ${O.cursor.css}; color: ${O.cursorAccent.css};}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${O.cursor.css} !important; color: ${O.cursorAccent.css} !important;}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${O.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${O.cursor.css} inset;}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${O.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,N+=`${this._terminalSelector} .${R} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${R} div { position: absolute; background-color: ${O.selectionBackgroundOpaque.css};}${this._terminalSelector} .${R} div { position: absolute; background-color: ${O.selectionInactiveBackgroundOpaque.css};}`;for(const[J,j]of O.ansi.entries())N+=`${this._terminalSelector} .${k}${J} { color: ${j.css}; }${this._terminalSelector} .${k}${J}.xterm-dim { color: ${y.color.multiplyOpacity(j,.5).css}; }${this._terminalSelector} .${_}${J} { background-color: ${j.css}; }`;N+=`${this._terminalSelector} .${k}${f.INVERTED_DEFAULT_COLOR} { color: ${y.color.opaque(O.background).css}; }${this._terminalSelector} .${k}${f.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${y.color.multiplyOpacity(y.color.opaque(O.background),.5).css}; }${this._terminalSelector} .${_}${f.INVERTED_DEFAULT_COLOR} { background-color: ${O.foreground.css}; }`,this._themeStyleElement.textContent=N}_setDefaultSpacing(){const O=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${O}px`,this._rowFactory.defaultSpacing=O}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(O,N){for(let H=this._rowElements.length;H<=N;H++){const Q=this._document.createElement("div");this._rowContainer.appendChild(Q),this._rowElements.push(Q)}for(;this._rowElements.length>N;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(O,N){this._refreshRowElements(O,N),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(L),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(L),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(O,N,H){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(O,N,H),this.renderRows(0,this._bufferService.rows-1),!O||!N)return;this._selectionRenderModel.update(this._terminal,O,N,H);const Q=this._selectionRenderModel.viewportStartRow,X=this._selectionRenderModel.viewportEndRow,J=this._selectionRenderModel.viewportCappedStartRow,j=this._selectionRenderModel.viewportCappedEndRow;if(J>=this._bufferService.rows||j<0)return;const F=this._document.createDocumentFragment();if(H){const Y=O[0]>N[0];F.appendChild(this._createSelectionElement(J,Y?N[0]:O[0],Y?O[0]:N[0],j-J+1))}else{const Y=Q===J?O[0]:0,M=J===X?N[0]:this._bufferService.cols;F.appendChild(this._createSelectionElement(J,Y,M));const D=j-J-1;if(F.appendChild(this._createSelectionElement(J+1,0,this._bufferService.cols,D)),J!==j){const V=X===j?N[0]:this._bufferService.cols;F.appendChild(this._createSelectionElement(j,0,V))}}this._selectionContainer.appendChild(F)}_createSelectionElement(O,N,H,Q=1){const X=this._document.createElement("div"),J=N*this.dimensions.css.cell.width;let j=this.dimensions.css.cell.width*(H-N);return J+j>this.dimensions.css.canvas.width&&(j=this.dimensions.css.canvas.width-J),X.style.height=Q*this.dimensions.css.cell.height+"px",X.style.top=O*this.dimensions.css.cell.height+"px",X.style.left=`${J}px`,X.style.width=`${j}px`,X}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const O of this._rowElements)O.replaceChildren()}renderRows(O,N){const H=this._bufferService.buffer,Q=H.ybase+H.y,X=Math.min(H.x,this._bufferService.cols-1),J=this._optionsService.rawOptions.cursorBlink,j=this._optionsService.rawOptions.cursorStyle,F=this._optionsService.rawOptions.cursorInactiveStyle;for(let Y=O;Y<=N;Y++){const M=Y+H.ydisp,D=this._rowElements[Y],V=H.lines.get(M);if(!D||!V)break;D.replaceChildren(...this._rowFactory.createRow(V,M,M===Q,j,F,X,J,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${S}${this._terminalClass}`}_handleLinkHover(O){this._setCellUnderline(O.x1,O.x2,O.y1,O.y2,O.cols,!0)}_handleLinkLeave(O){this._setCellUnderline(O.x1,O.x2,O.y1,O.y2,O.cols,!1)}_setCellUnderline(O,N,H,Q,X,J){H<0&&(O=0),Q<0&&(N=0);const j=this._bufferService.rows-1;H=Math.max(Math.min(H,j),0),Q=Math.max(Math.min(Q,j),0),X=Math.min(X,this._bufferService.cols);const F=this._bufferService.buffer,Y=F.ybase+F.y,M=Math.min(F.x,X-1),D=this._optionsService.rawOptions.cursorBlink,V=this._optionsService.rawOptions.cursorStyle,W=this._optionsService.rawOptions.cursorInactiveStyle;for(let te=H;te<=Q;++te){const ee=te+F.ydisp,K=this._rowElements[te],he=F.lines.get(ee);if(!K||!he)break;K.replaceChildren(...this._rowFactory.createRow(he,ee,ee===Y,V,W,M,D,this.dimensions.css.cell.width,this._widthCache,J?te===H?O:0:-1,J?(te===Q?N:X)-1:-1))}}};a.DomRenderer=P=c([u(7,w.IInstantiationService),u(8,b.ICharSizeService),u(9,w.IOptionsService),u(10,w.IBufferService),u(11,b.ICoreBrowserService),u(12,b.IThemeService)],P)},3787:function(o,a,l){var c=this&&this.__decorate||function(E,k,_,L){var R,C=arguments.length,P=C<3?k:L===null?L=Object.getOwnPropertyDescriptor(k,_):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(E,k,_,L);else for(var O=E.length-1;O>=0;O--)(R=E[O])&&(P=(C<3?R(P):C>3?R(k,_,P):R(k,_))||P);return C>3&&P&&Object.defineProperty(k,_,P),P},u=this&&this.__param||function(E,k){return function(_,L){k(_,L,E)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRendererRowFactory=void 0;const h=l(2223),d=l(643),f=l(511),m=l(2585),g=l(8055),b=l(4725),y=l(4269),v=l(6171),x=l(3734);let w=a.DomRendererRowFactory=class{constructor(E,k,_,L,R,C,P){this._document=E,this._characterJoinerService=k,this._optionsService=_,this._coreBrowserService=L,this._coreService=R,this._decorationService=C,this._themeService=P,this._workCell=new f.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(E,k,_){this._selectionStart=E,this._selectionEnd=k,this._columnSelectMode=_}createRow(E,k,_,L,R,C,P,O,N,H,Q){const X=[],J=this._characterJoinerService.getJoinedCharacters(k),j=this._themeService.colors;let F,Y=E.getNoBgTrimmedLength();_&&Y<C+1&&(Y=C+1);let M=0,D="",V=0,W=0,te=0,ee=!1,K=0,he=!1,be=0;const Se=[],Ce=H!==-1&&Q!==-1;for(let ke=0;ke<Y;ke++){E.loadCell(ke,this._workCell);let q=this._workCell.getWidth();if(q===0)continue;let pe=!1,ne=ke,oe=this._workCell;if(J.length>0&&ke===J[0][0]){pe=!0;const G=J.shift();oe=new y.JoinedCellData(this._workCell,E.translateToString(!0,G[0],G[1]),G[1]-G[0]),ne=G[1]-1,q=oe.getWidth()}const ae=this._isCellInSelection(ke,k),me=_&&ke===C,Pe=Ce&&ke>=H&&ke<=Q;let Re=!1;this._decorationService.forEachDecorationAtCell(ke,k,void 0,G=>{Re=!0});let we=oe.getChars()||d.WHITESPACE_CELL_CHAR;if(we===" "&&(oe.isUnderline()||oe.isOverline())&&(we=""),be=q*O-N.get(we,oe.isBold(),oe.isItalic()),F){if(M&&(ae&&he||!ae&&!he&&oe.bg===V)&&(ae&&he&&j.selectionForeground||oe.fg===W)&&oe.extended.ext===te&&Pe===ee&&be===K&&!me&&!pe&&!Re){oe.isInvisible()?D+=d.WHITESPACE_CELL_CHAR:D+=we,M++;continue}M&&(F.textContent=D),F=this._document.createElement("span"),M=0,D=""}else F=this._document.createElement("span");if(V=oe.bg,W=oe.fg,te=oe.extended.ext,ee=Pe,K=be,he=ae,pe&&C>=ke&&C<=ne&&(C=ke),!this._coreService.isCursorHidden&&me&&this._coreService.isCursorInitialized){if(Se.push("xterm-cursor"),this._coreBrowserService.isFocused)P&&Se.push("xterm-cursor-blink"),Se.push(L==="bar"?"xterm-cursor-bar":L==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(R)switch(R){case"outline":Se.push("xterm-cursor-outline");break;case"block":Se.push("xterm-cursor-block");break;case"bar":Se.push("xterm-cursor-bar");break;case"underline":Se.push("xterm-cursor-underline")}}if(oe.isBold()&&Se.push("xterm-bold"),oe.isItalic()&&Se.push("xterm-italic"),oe.isDim()&&Se.push("xterm-dim"),D=oe.isInvisible()?d.WHITESPACE_CELL_CHAR:oe.getChars()||d.WHITESPACE_CELL_CHAR,oe.isUnderline()&&(Se.push(`xterm-underline-${oe.extended.underlineStyle}`),D===" "&&(D=""),!oe.isUnderlineColorDefault()))if(oe.isUnderlineColorRGB())F.style.textDecorationColor=`rgb(${x.AttributeData.toColorRGB(oe.getUnderlineColor()).join(",")})`;else{let G=oe.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&oe.isBold()&&G<8&&(G+=8),F.style.textDecorationColor=j.ansi[G].css}oe.isOverline()&&(Se.push("xterm-overline"),D===" "&&(D="")),oe.isStrikethrough()&&Se.push("xterm-strikethrough"),Pe&&(F.style.textDecoration="underline");let $e=oe.getFgColor(),Fe=oe.getFgColorMode(),Be=oe.getBgColor(),Ee=oe.getBgColorMode();const qe=!!oe.isInverse();if(qe){const G=$e;$e=Be,Be=G;const ue=Fe;Fe=Ee,Ee=ue}let Xe,et,re,$=!1;switch(this._decorationService.forEachDecorationAtCell(ke,k,void 0,G=>{G.options.layer!=="top"&&$||(G.backgroundColorRGB&&(Ee=50331648,Be=G.backgroundColorRGB.rgba>>8&16777215,Xe=G.backgroundColorRGB),G.foregroundColorRGB&&(Fe=50331648,$e=G.foregroundColorRGB.rgba>>8&16777215,et=G.foregroundColorRGB),$=G.options.layer==="top")}),!$&&ae&&(Xe=this._coreBrowserService.isFocused?j.selectionBackgroundOpaque:j.selectionInactiveBackgroundOpaque,Be=Xe.rgba>>8&16777215,Ee=50331648,$=!0,j.selectionForeground&&(Fe=50331648,$e=j.selectionForeground.rgba>>8&16777215,et=j.selectionForeground)),$&&Se.push("xterm-decoration-top"),Ee){case 16777216:case 33554432:re=j.ansi[Be],Se.push(`xterm-bg-${Be}`);break;case 50331648:re=g.channels.toColor(Be>>16,Be>>8&255,255&Be),this._addStyle(F,`background-color:#${S((Be>>>0).toString(16),"0",6)}`);break;default:qe?(re=j.foreground,Se.push(`xterm-bg-${h.INVERTED_DEFAULT_COLOR}`)):re=j.background}switch(Xe||oe.isDim()&&(Xe=g.color.multiplyOpacity(re,.5)),Fe){case 16777216:case 33554432:oe.isBold()&&$e<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&($e+=8),this._applyMinimumContrast(F,re,j.ansi[$e],oe,Xe,void 0)||Se.push(`xterm-fg-${$e}`);break;case 50331648:const G=g.channels.toColor($e>>16&255,$e>>8&255,255&$e);this._applyMinimumContrast(F,re,G,oe,Xe,et)||this._addStyle(F,`color:#${S($e.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(F,re,j.foreground,oe,Xe,et)||qe&&Se.push(`xterm-fg-${h.INVERTED_DEFAULT_COLOR}`)}Se.length&&(F.className=Se.join(" "),Se.length=0),me||pe||Re?F.textContent=D:M++,be!==this.defaultSpacing&&(F.style.letterSpacing=`${be}px`),X.push(F),ke=ne}return F&&M&&(F.textContent=D),X}_applyMinimumContrast(E,k,_,L,R,C){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,v.treatGlyphAsBackgroundColor)(L.getCode()))return!1;const P=this._getContrastCache(L);let O;if(R||C||(O=P.getColor(k.rgba,_.rgba)),O===void 0){const N=this._optionsService.rawOptions.minimumContrastRatio/(L.isDim()?2:1);O=g.color.ensureContrastRatio(R||k,C||_,N),P.setColor((R||k).rgba,(C||_).rgba,O??null)}return!!O&&(this._addStyle(E,`color:${O.css}`),!0)}_getContrastCache(E){return E.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(E,k){E.setAttribute("style",`${E.getAttribute("style")||""}${k};`)}_isCellInSelection(E,k){const _=this._selectionStart,L=this._selectionEnd;return!(!_||!L)&&(this._columnSelectMode?_[0]<=L[0]?E>=_[0]&&k>=_[1]&&E<L[0]&&k<=L[1]:E<_[0]&&k>=_[1]&&E>=L[0]&&k<=L[1]:k>_[1]&&k<L[1]||_[1]===L[1]&&k===_[1]&&E>=_[0]&&E<L[0]||_[1]<L[1]&&k===L[1]&&E<L[0]||_[1]<L[1]&&k===_[1]&&E>=_[0])}};function S(E,k,_){for(;E.length<_;)E=k+E;return E}a.DomRendererRowFactory=w=c([u(1,b.ICharacterJoinerService),u(2,m.IOptionsService),u(3,b.ICoreBrowserService),u(4,m.ICoreService),u(5,m.IDecorationService),u(6,b.IThemeService)],w)},2550:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WidthCache=void 0,a.WidthCache=class{constructor(l,c){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=l.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const u=l.createElement("span");u.classList.add("xterm-char-measure-element");const h=l.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontWeight="bold";const d=l.createElement("span");d.classList.add("xterm-char-measure-element"),d.style.fontStyle="italic";const f=l.createElement("span");f.classList.add("xterm-char-measure-element"),f.style.fontWeight="bold",f.style.fontStyle="italic",this._measureElements=[u,h,d,f],this._container.appendChild(u),this._container.appendChild(h),this._container.appendChild(d),this._container.appendChild(f),c.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(l,c,u,h){l===this._font&&c===this._fontSize&&u===this._weight&&h===this._weightBold||(this._font=l,this._fontSize=c,this._weight=u,this._weightBold=h,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${u}`,this._measureElements[1].style.fontWeight=`${h}`,this._measureElements[2].style.fontWeight=`${u}`,this._measureElements[3].style.fontWeight=`${h}`,this.clear())}get(l,c,u){let h=0;if(!c&&!u&&l.length===1&&(h=l.charCodeAt(0))<256){if(this._flat[h]!==-9999)return this._flat[h];const m=this._measure(l,0);return m>0&&(this._flat[h]=m),m}let d=l;c&&(d+="B"),u&&(d+="I");let f=this._holey.get(d);if(f===void 0){let m=0;c&&(m|=1),u&&(m|=2),f=this._measure(l,m),f>0&&this._holey.set(d,f)}return f}_measure(l,c){const u=this._measureElements[c];return u.textContent=l.repeat(32),u.offsetWidth/32}}},2223:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TEXT_BASELINE=a.DIM_OPACITY=a.INVERTED_DEFAULT_COLOR=void 0;const c=l(6114);a.INVERTED_DEFAULT_COLOR=257,a.DIM_OPACITY=.5,a.TEXT_BASELINE=c.isFirefox||c.isLegacyEdge?"bottom":"ideographic"},6171:(o,a)=>{function l(u){return 57508<=u&&u<=57558}function c(u){return u>=128512&&u<=128591||u>=127744&&u<=128511||u>=128640&&u<=128767||u>=9728&&u<=9983||u>=9984&&u<=10175||u>=65024&&u<=65039||u>=129280&&u<=129535||u>=127462&&u<=127487}Object.defineProperty(a,"__esModule",{value:!0}),a.computeNextVariantOffset=a.createRenderDimensions=a.treatGlyphAsBackgroundColor=a.allowRescaling=a.isEmoji=a.isRestrictedPowerlineGlyph=a.isPowerlineGlyph=a.throwIfFalsy=void 0,a.throwIfFalsy=function(u){if(!u)throw new Error("value must not be falsy");return u},a.isPowerlineGlyph=l,a.isRestrictedPowerlineGlyph=function(u){return 57520<=u&&u<=57527},a.isEmoji=c,a.allowRescaling=function(u,h,d,f){return h===1&&d>Math.ceil(1.5*f)&&u!==void 0&&u>255&&!c(u)&&!l(u)&&!function(m){return 57344<=m&&m<=63743}(u)},a.treatGlyphAsBackgroundColor=function(u){return l(u)||function(h){return 9472<=h&&h<=9631}(u)},a.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},a.computeNextVariantOffset=function(u,h,d=0){return(u-(2*Math.round(h)-d))%(2*Math.round(h))}},6052:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createSelectionRenderModel=void 0;class l{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(u,h,d,f=!1){if(this.selectionStart=h,this.selectionEnd=d,!h||!d||h[0]===d[0]&&h[1]===d[1])return void this.clear();const m=u.buffers.active.ydisp,g=h[1]-m,b=d[1]-m,y=Math.max(g,0),v=Math.min(b,u.rows-1);y>=u.rows||v<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=f,this.viewportStartRow=g,this.viewportEndRow=b,this.viewportCappedStartRow=y,this.viewportCappedEndRow=v,this.startCol=h[0],this.endCol=d[0])}isCellSelected(u,h,d){return!!this.hasSelection&&(d-=u.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&d>=this.viewportCappedStartRow&&h<this.endCol&&d<=this.viewportCappedEndRow:h<this.startCol&&d>=this.viewportCappedStartRow&&h>=this.endCol&&d<=this.viewportCappedEndRow:d>this.viewportStartRow&&d<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&d===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&d===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&d===this.viewportStartRow&&h>=this.startCol)}}a.createSelectionRenderModel=function(){return new l}},456:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionModel=void 0,a.SelectionModel=class{constructor(l){this._bufferService=l,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?l%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)-1]:[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[l,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[Math.max(l,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const l=this.selectionStart,c=this.selectionEnd;return!(!l||!c)&&(l[1]>c[1]||l[1]===c[1]&&l[0]>c[0])}handleTrim(l){return this.selectionStart&&(this.selectionStart[1]-=l),this.selectionEnd&&(this.selectionEnd[1]-=l),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(o,a,l){var c=this&&this.__decorate||function(v,x,w,S){var E,k=arguments.length,_=k<3?x:S===null?S=Object.getOwnPropertyDescriptor(x,w):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(v,x,w,S);else for(var L=v.length-1;L>=0;L--)(E=v[L])&&(_=(k<3?E(_):k>3?E(x,w,_):E(x,w))||_);return k>3&&_&&Object.defineProperty(x,w,_),_},u=this&&this.__param||function(v,x){return function(w,S){x(w,S,v)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharSizeService=void 0;const h=l(2585),d=l(8460),f=l(844);let m=a.CharSizeService=class extends f.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(v,x,w){super(),this._optionsService=w,this.width=0,this.height=0,this._onCharSizeChange=this.register(new d.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new y(this._optionsService))}catch{this._measureStrategy=this.register(new b(v,x,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const v=this._measureStrategy.measure();v.width===this.width&&v.height===this.height||(this.width=v.width,this.height=v.height,this._onCharSizeChange.fire())}};a.CharSizeService=m=c([u(2,h.IOptionsService)],m);class g extends f.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(x,w){x!==void 0&&x>0&&w!==void 0&&w>0&&(this._result.width=x,this._result.height=w)}}class b extends g{constructor(x,w,S){super(),this._document=x,this._parentElement=w,this._optionsService=S,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class y extends g{constructor(x){super(),this._optionsService=x,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const w=this._ctx.measureText("W");if(!("width"in w&&"fontBoundingBoxAscent"in w&&"fontBoundingBoxDescent"in w))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const x=this._ctx.measureText("W");return this._validateAndSet(x.width,x.fontBoundingBoxAscent+x.fontBoundingBoxDescent),this._result}}},4269:function(o,a,l){var c=this&&this.__decorate||function(y,v,x,w){var S,E=arguments.length,k=E<3?v:w===null?w=Object.getOwnPropertyDescriptor(v,x):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(y,v,x,w);else for(var _=y.length-1;_>=0;_--)(S=y[_])&&(k=(E<3?S(k):E>3?S(v,x,k):S(v,x))||k);return E>3&&k&&Object.defineProperty(v,x,k),k},u=this&&this.__param||function(y,v){return function(x,w){v(x,w,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharacterJoinerService=a.JoinedCellData=void 0;const h=l(3734),d=l(643),f=l(511),m=l(2585);class g extends h.AttributeData{constructor(v,x,w){super(),this.content=0,this.combinedData="",this.fg=v.fg,this.bg=v.bg,this.combinedData=x,this._width=w}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(v){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.JoinedCellData=g;let b=a.CharacterJoinerService=class aie{constructor(v){this._bufferService=v,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new f.CellData}register(v){const x={id:this._nextCharacterJoinerId++,handler:v};return this._characterJoiners.push(x),x.id}deregister(v){for(let x=0;x<this._characterJoiners.length;x++)if(this._characterJoiners[x].id===v)return this._characterJoiners.splice(x,1),!0;return!1}getJoinedCharacters(v){if(this._characterJoiners.length===0)return[];const x=this._bufferService.buffer.lines.get(v);if(!x||x.length===0)return[];const w=[],S=x.translateToString(!0);let E=0,k=0,_=0,L=x.getFg(0),R=x.getBg(0);for(let C=0;C<x.getTrimmedLength();C++)if(x.loadCell(C,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==L||this._workCell.bg!==R){if(C-E>1){const P=this._getJoinedRanges(S,_,k,x,E);for(let O=0;O<P.length;O++)w.push(P[O])}E=C,_=k,L=this._workCell.fg,R=this._workCell.bg}k+=this._workCell.getChars().length||d.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-E>1){const C=this._getJoinedRanges(S,_,k,x,E);for(let P=0;P<C.length;P++)w.push(C[P])}return w}_getJoinedRanges(v,x,w,S,E){const k=v.substring(x,w);let _=[];try{_=this._characterJoiners[0].handler(k)}catch(L){console.error(L)}for(let L=1;L<this._characterJoiners.length;L++)try{const R=this._characterJoiners[L].handler(k);for(let C=0;C<R.length;C++)aie._mergeRanges(_,R[C])}catch(R){console.error(R)}return this._stringRangesToCellRanges(_,S,E),_}_stringRangesToCellRanges(v,x,w){let S=0,E=!1,k=0,_=v[S];if(_){for(let L=w;L<this._bufferService.cols;L++){const R=x.getWidth(L),C=x.getString(L).length||d.WHITESPACE_CELL_CHAR.length;if(R!==0){if(!E&&_[0]<=k&&(_[0]=L,E=!0),_[1]<=k){if(_[1]=L,_=v[++S],!_)break;_[0]<=k?(_[0]=L,E=!0):E=!1}k+=C}}_&&(_[1]=this._bufferService.cols)}}static _mergeRanges(v,x){let w=!1;for(let S=0;S<v.length;S++){const E=v[S];if(w){if(x[1]<=E[0])return v[S-1][1]=x[1],v;if(x[1]<=E[1])return v[S-1][1]=Math.max(x[1],E[1]),v.splice(S,1),v;v.splice(S,1),S--}else{if(x[1]<=E[0])return v.splice(S,0,x),v;if(x[1]<=E[1])return E[0]=Math.min(x[0],E[0]),v;x[0]<E[1]&&(E[0]=Math.min(x[0],E[0]),w=!0)}}return w?v[v.length-1][1]=x[1]:v.push(x),v}};a.CharacterJoinerService=b=c([u(0,m.IBufferService)],b)},5114:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreBrowserService=void 0;const c=l(844),u=l(8460),h=l(3656);class d extends c.Disposable{constructor(g,b,y){super(),this._textarea=g,this._window=b,this.mainDocument=y,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new f(this._window),this._onDprChange=this.register(new u.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new u.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(v=>this._screenDprMonitor.setWindow(v))),this.register((0,u.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(g){this._window!==g&&(this._window=g,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}a.CoreBrowserService=d;class f extends c.Disposable{constructor(g){super(),this._parentWindow=g,this._windowResizeListener=this.register(new c.MutableDisposable),this._onDprChange=this.register(new u.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,c.toDisposable)(()=>this.clearListener()))}setWindow(g){this._parentWindow=g,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,h.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.LinkProviderService=void 0;const c=l(844);class u extends c.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,c.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(d){return this.linkProviders.push(d),{dispose:()=>{const f=this.linkProviders.indexOf(d);f!==-1&&this.linkProviders.splice(f,1)}}}}a.LinkProviderService=u},8934:function(o,a,l){var c=this&&this.__decorate||function(m,g,b,y){var v,x=arguments.length,w=x<3?g:y===null?y=Object.getOwnPropertyDescriptor(g,b):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(m,g,b,y);else for(var S=m.length-1;S>=0;S--)(v=m[S])&&(w=(x<3?v(w):x>3?v(g,b,w):v(g,b))||w);return x>3&&w&&Object.defineProperty(g,b,w),w},u=this&&this.__param||function(m,g){return function(b,y){g(b,y,m)}};Object.defineProperty(a,"__esModule",{value:!0}),a.MouseService=void 0;const h=l(4725),d=l(9806);let f=a.MouseService=class{constructor(m,g){this._renderService=m,this._charSizeService=g}getCoords(m,g,b,y,v){return(0,d.getCoords)(window,m,g,b,y,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,v)}getMouseReportCoords(m,g){const b=(0,d.getCoordsRelativeToElement)(window,m,g);if(this._charSizeService.hasValidSize)return b[0]=Math.min(Math.max(b[0],0),this._renderService.dimensions.css.canvas.width-1),b[1]=Math.min(Math.max(b[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(b[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(b[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(b[0]),y:Math.floor(b[1])}}};a.MouseService=f=c([u(0,h.IRenderService),u(1,h.ICharSizeService)],f)},3230:function(o,a,l){var c=this&&this.__decorate||function(v,x,w,S){var E,k=arguments.length,_=k<3?x:S===null?S=Object.getOwnPropertyDescriptor(x,w):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(v,x,w,S);else for(var L=v.length-1;L>=0;L--)(E=v[L])&&(_=(k<3?E(_):k>3?E(x,w,_):E(x,w))||_);return k>3&&_&&Object.defineProperty(x,w,_),_},u=this&&this.__param||function(v,x){return function(w,S){x(w,S,v)}};Object.defineProperty(a,"__esModule",{value:!0}),a.RenderService=void 0;const h=l(6193),d=l(4725),f=l(8460),m=l(844),g=l(7226),b=l(2585);let y=a.RenderService=class extends m.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(v,x,w,S,E,k,_,L){super(),this._rowCount=v,this._charSizeService=S,this._renderer=this.register(new m.MutableDisposable),this._pausedResizeTask=new g.DebouncedIdleTask,this._observerDisposable=this.register(new m.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new f.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new f.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new f.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new f.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new h.RenderDebouncer((R,C)=>this._renderRows(R,C),_),this.register(this._renderDebouncer),this.register(_.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(k.onResize(()=>this._fullRefresh())),this.register(k.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this.register(w.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(E.onDecorationRegistered(()=>this._fullRefresh())),this.register(E.onDecorationRemoved(()=>this._fullRefresh())),this.register(w.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(k.cols,k.rows),this._fullRefresh()})),this.register(w.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(k.buffer.y,k.buffer.y,!0))),this.register(L.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(_.window,x),this.register(_.onWindowChange(R=>this._registerIntersectionObserver(R,x)))}_registerIntersectionObserver(v,x){if("IntersectionObserver"in v){const w=new v.IntersectionObserver(S=>this._handleIntersectionChange(S[S.length-1]),{threshold:0});w.observe(x),this._observerDisposable.value=(0,m.toDisposable)(()=>w.disconnect())}}_handleIntersectionChange(v){this._isPaused=v.isIntersecting===void 0?v.intersectionRatio===0:!v.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(v,x,w=!1){this._isPaused?this._needsFullRefresh=!0:(w||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(v,x,this._rowCount))}_renderRows(v,x){this._renderer.value&&(v=Math.min(v,this._rowCount-1),x=Math.min(x,this._rowCount-1),this._renderer.value.renderRows(v,x),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:v,end:x}),this._onRender.fire({start:v,end:x}),this._isNextRenderRedrawOnly=!0)}resize(v,x){this._rowCount=x,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(v){this._renderer.value=v,this._renderer.value&&(this._renderer.value.onRequestRedraw(x=>this.refreshRows(x.start,x.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(v){return this._renderDebouncer.addRefreshCallback(v)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(v,x){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(v,x)):this._renderer.value.handleResize(v,x),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(v,x,w){this._selectionState.start=v,this._selectionState.end=x,this._selectionState.columnSelectMode=w,this._renderer.value?.handleSelectionChanged(v,x,w)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};a.RenderService=y=c([u(2,b.IOptionsService),u(3,d.ICharSizeService),u(4,b.IDecorationService),u(5,b.IBufferService),u(6,d.ICoreBrowserService),u(7,d.IThemeService)],y)},9312:function(o,a,l){var c=this&&this.__decorate||function(_,L,R,C){var P,O=arguments.length,N=O<3?L:C===null?C=Object.getOwnPropertyDescriptor(L,R):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(_,L,R,C);else for(var H=_.length-1;H>=0;H--)(P=_[H])&&(N=(O<3?P(N):O>3?P(L,R,N):P(L,R))||N);return O>3&&N&&Object.defineProperty(L,R,N),N},u=this&&this.__param||function(_,L){return function(R,C){L(R,C,_)}};Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionService=void 0;const h=l(9806),d=l(9504),f=l(456),m=l(4725),g=l(8460),b=l(844),y=l(6114),v=l(4841),x=l(511),w=l(2585),S="",E=new RegExp(S,"g");let k=a.SelectionService=class extends b.Disposable{constructor(_,L,R,C,P,O,N,H,Q){super(),this._element=_,this._screenElement=L,this._linkifier=R,this._bufferService=C,this._coreService=P,this._mouseService=O,this._optionsService=N,this._renderService=H,this._coreBrowserService=Q,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new x.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new g.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new g.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new g.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new g.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=X=>this._handleMouseMove(X),this._mouseUpListener=X=>this._handleMouseUp(X),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(X=>this._handleTrim(X)),this.register(this._bufferService.buffers.onBufferActivate(X=>this._handleBufferActivate(X))),this.enable(),this._model=new f.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,b.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const _=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;return!(!_||!L||_[0]===L[0]&&_[1]===L[1])}get selectionText(){const _=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;if(!_||!L)return"";const R=this._bufferService.buffer,C=[];if(this._activeSelectionMode===3){if(_[0]===L[0])return"";const P=_[0]<L[0]?_[0]:L[0],O=_[0]<L[0]?L[0]:_[0];for(let N=_[1];N<=L[1];N++){const H=R.translateBufferLineToString(N,!0,P,O);C.push(H)}}else{const P=_[1]===L[1]?L[0]:void 0;C.push(R.translateBufferLineToString(_[1],!0,_[0],P));for(let O=_[1]+1;O<=L[1]-1;O++){const N=R.lines.get(O),H=R.translateBufferLineToString(O,!0);N?.isWrapped?C[C.length-1]+=H:C.push(H)}if(_[1]!==L[1]){const O=R.lines.get(L[1]),N=R.translateBufferLineToString(L[1],!0,0,L[0]);O&&O.isWrapped?C[C.length-1]+=N:C.push(N)}}return C.map(P=>P.replace(E," ")).join(y.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(_){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),y.isLinux&&_&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(_){const L=this._getMouseBufferCoords(_),R=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;return!!(R&&C&&L)&&this._areCoordsInSelection(L,R,C)}isCellInSelection(_,L){const R=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;return!(!R||!C)&&this._areCoordsInSelection([_,L],R,C)}_areCoordsInSelection(_,L,R){return _[1]>L[1]&&_[1]<R[1]||L[1]===R[1]&&_[1]===L[1]&&_[0]>=L[0]&&_[0]<R[0]||L[1]<R[1]&&_[1]===R[1]&&_[0]<R[0]||L[1]<R[1]&&_[1]===L[1]&&_[0]>=L[0]}_selectWordAtCursor(_,L){const R=this._linkifier.currentLink?.link?.range;if(R)return this._model.selectionStart=[R.start.x-1,R.start.y-1],this._model.selectionStartLength=(0,v.getRangeLength)(R,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const C=this._getMouseBufferCoords(_);return!!C&&(this._selectWordAt(C,L),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(_,L){this._model.clearSelection(),_=Math.max(_,0),L=Math.min(L,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,_],this._model.selectionEnd=[this._bufferService.cols,L],this.refresh(),this._onSelectionChange.fire()}_handleTrim(_){this._model.handleTrim(_)&&this.refresh()}_getMouseBufferCoords(_){const L=this._mouseService.getCoords(_,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(L)return L[0]--,L[1]--,L[1]+=this._bufferService.buffer.ydisp,L}_getMouseEventScrollAmount(_){let L=(0,h.getCoordsRelativeToElement)(this._coreBrowserService.window,_,this._screenElement)[1];const R=this._renderService.dimensions.css.canvas.height;return L>=0&&L<=R?0:(L>R&&(L-=R),L=Math.min(Math.max(L,-50),50),L/=50,L/Math.abs(L)+Math.round(14*L))}shouldForceSelection(_){return y.isMac?_.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:_.shiftKey}handleMouseDown(_){if(this._mouseDownTimeStamp=_.timeStamp,(_.button!==2||!this.hasSelection)&&_.button===0){if(!this._enabled){if(!this.shouldForceSelection(_))return;_.stopPropagation()}_.preventDefault(),this._dragScrollAmount=0,this._enabled&&_.shiftKey?this._handleIncrementalClick(_):_.detail===1?this._handleSingleClick(_):_.detail===2?this._handleDoubleClick(_):_.detail===3&&this._handleTripleClick(_),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(_){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(_))}_handleSingleClick(_){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(_)?3:0,this._model.selectionStart=this._getMouseBufferCoords(_),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const L=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);L&&L.length!==this._model.selectionStart[0]&&L.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(_){this._selectWordAtCursor(_,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(_){const L=this._getMouseBufferCoords(_);L&&(this._activeSelectionMode=2,this._selectLineAt(L[1]))}shouldColumnSelect(_){return _.altKey&&!(y.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(_){if(_.stopImmediatePropagation(),!this._model.selectionStart)return;const L=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(_),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(_),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const R=this._bufferService.buffer;if(this._model.selectionEnd[1]<R.lines.length){const C=R.lines.get(this._model.selectionEnd[1]);C&&C.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}L&&L[0]===this._model.selectionEnd[0]&&L[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const _=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(_.ydisp+this._bufferService.rows,_.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=_.ydisp),this.refresh()}}_handleMouseUp(_){const L=_.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&L<500&&_.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const R=this._mouseService.getCoords(_,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(R&&R[0]!==void 0&&R[1]!==void 0){const C=(0,d.moveToCellSequence)(R[0]-1,R[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(C,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const _=this._model.finalSelectionStart,L=this._model.finalSelectionEnd,R=!(!_||!L||_[0]===L[0]&&_[1]===L[1]);R?_&&L&&(this._oldSelectionStart&&this._oldSelectionEnd&&_[0]===this._oldSelectionStart[0]&&_[1]===this._oldSelectionStart[1]&&L[0]===this._oldSelectionEnd[0]&&L[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(_,L,R)):this._oldHasSelection&&this._fireOnSelectionChange(_,L,R)}_fireOnSelectionChange(_,L,R){this._oldSelectionStart=_,this._oldSelectionEnd=L,this._oldHasSelection=R,this._onSelectionChange.fire()}_handleBufferActivate(_){this.clearSelection(),this._trimListener.dispose(),this._trimListener=_.activeBuffer.lines.onTrim(L=>this._handleTrim(L))}_convertViewportColToCharacterIndex(_,L){let R=L;for(let C=0;L>=C;C++){const P=_.loadCell(C,this._workCell).getChars().length;this._workCell.getWidth()===0?R--:P>1&&L!==C&&(R+=P-1)}return R}setSelection(_,L,R){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[_,L],this._model.selectionStartLength=R,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(_){this._isClickInSelection(_)||(this._selectWordAtCursor(_,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(_,L,R=!0,C=!0){if(_[0]>=this._bufferService.cols)return;const P=this._bufferService.buffer,O=P.lines.get(_[1]);if(!O)return;const N=P.translateBufferLineToString(_[1],!1);let H=this._convertViewportColToCharacterIndex(O,_[0]),Q=H;const X=_[0]-H;let J=0,j=0,F=0,Y=0;if(N.charAt(H)===" "){for(;H>0&&N.charAt(H-1)===" ";)H--;for(;Q<N.length&&N.charAt(Q+1)===" ";)Q++}else{let V=_[0],W=_[0];O.getWidth(V)===0&&(J++,V--),O.getWidth(W)===2&&(j++,W++);const te=O.getString(W).length;for(te>1&&(Y+=te-1,Q+=te-1);V>0&&H>0&&!this._isCharWordSeparator(O.loadCell(V-1,this._workCell));){O.loadCell(V-1,this._workCell);const ee=this._workCell.getChars().length;this._workCell.getWidth()===0?(J++,V--):ee>1&&(F+=ee-1,H-=ee-1),H--,V--}for(;W<O.length&&Q+1<N.length&&!this._isCharWordSeparator(O.loadCell(W+1,this._workCell));){O.loadCell(W+1,this._workCell);const ee=this._workCell.getChars().length;this._workCell.getWidth()===2?(j++,W++):ee>1&&(Y+=ee-1,Q+=ee-1),Q++,W++}}Q++;let M=H+X-J+F,D=Math.min(this._bufferService.cols,Q-H+J+j-F-Y);if(L||N.slice(H,Q).trim()!==""){if(R&&M===0&&O.getCodePoint(0)!==32){const V=P.lines.get(_[1]-1);if(V&&O.isWrapped&&V.getCodePoint(this._bufferService.cols-1)!==32){const W=this._getWordAt([this._bufferService.cols-1,_[1]-1],!1,!0,!1);if(W){const te=this._bufferService.cols-W.start;M-=te,D+=te}}}if(C&&M+D===this._bufferService.cols&&O.getCodePoint(this._bufferService.cols-1)!==32){const V=P.lines.get(_[1]+1);if(V?.isWrapped&&V.getCodePoint(0)!==32){const W=this._getWordAt([0,_[1]+1],!1,!1,!0);W&&(D+=W.length)}}return{start:M,length:D}}}_selectWordAt(_,L){const R=this._getWordAt(_,L);if(R){for(;R.start<0;)R.start+=this._bufferService.cols,_[1]--;this._model.selectionStart=[R.start,_[1]],this._model.selectionStartLength=R.length}}_selectToWordAt(_){const L=this._getWordAt(_,!0);if(L){let R=_[1];for(;L.start<0;)L.start+=this._bufferService.cols,R--;if(!this._model.areSelectionValuesReversed())for(;L.start+L.length>this._bufferService.cols;)L.length-=this._bufferService.cols,R++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?L.start:L.start+L.length,R]}}_isCharWordSeparator(_){return _.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(_.getChars())>=0}_selectLineAt(_){const L=this._bufferService.buffer.getWrappedRangeForLine(_),R={start:{x:0,y:L.first},end:{x:this._bufferService.cols-1,y:L.last}};this._model.selectionStart=[0,L.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,v.getRangeLength)(R,this._bufferService.cols)}};a.SelectionService=k=c([u(3,w.IBufferService),u(4,w.ICoreService),u(5,m.IMouseService),u(6,w.IOptionsService),u(7,m.IRenderService),u(8,m.ICoreBrowserService)],k)},4725:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ILinkProviderService=a.IThemeService=a.ICharacterJoinerService=a.ISelectionService=a.IRenderService=a.IMouseService=a.ICoreBrowserService=a.ICharSizeService=void 0;const c=l(8343);a.ICharSizeService=(0,c.createDecorator)("CharSizeService"),a.ICoreBrowserService=(0,c.createDecorator)("CoreBrowserService"),a.IMouseService=(0,c.createDecorator)("MouseService"),a.IRenderService=(0,c.createDecorator)("RenderService"),a.ISelectionService=(0,c.createDecorator)("SelectionService"),a.ICharacterJoinerService=(0,c.createDecorator)("CharacterJoinerService"),a.IThemeService=(0,c.createDecorator)("ThemeService"),a.ILinkProviderService=(0,c.createDecorator)("LinkProviderService")},6731:function(o,a,l){var c=this&&this.__decorate||function(k,_,L,R){var C,P=arguments.length,O=P<3?_:R===null?R=Object.getOwnPropertyDescriptor(_,L):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(k,_,L,R);else for(var N=k.length-1;N>=0;N--)(C=k[N])&&(O=(P<3?C(O):P>3?C(_,L,O):C(_,L))||O);return P>3&&O&&Object.defineProperty(_,L,O),O},u=this&&this.__param||function(k,_){return function(L,R){_(L,R,k)}};Object.defineProperty(a,"__esModule",{value:!0}),a.ThemeService=a.DEFAULT_ANSI_COLORS=void 0;const h=l(7239),d=l(8055),f=l(8460),m=l(844),g=l(2585),b=d.css.toColor("#ffffff"),y=d.css.toColor("#000000"),v=d.css.toColor("#ffffff"),x=d.css.toColor("#000000"),w={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};a.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const k=[d.css.toColor("#2e3436"),d.css.toColor("#cc0000"),d.css.toColor("#4e9a06"),d.css.toColor("#c4a000"),d.css.toColor("#3465a4"),d.css.toColor("#75507b"),d.css.toColor("#06989a"),d.css.toColor("#d3d7cf"),d.css.toColor("#555753"),d.css.toColor("#ef2929"),d.css.toColor("#8ae234"),d.css.toColor("#fce94f"),d.css.toColor("#729fcf"),d.css.toColor("#ad7fa8"),d.css.toColor("#34e2e2"),d.css.toColor("#eeeeec")],_=[0,95,135,175,215,255];for(let L=0;L<216;L++){const R=_[L/36%6|0],C=_[L/6%6|0],P=_[L%6];k.push({css:d.channels.toCss(R,C,P),rgba:d.channels.toRgba(R,C,P)})}for(let L=0;L<24;L++){const R=8+10*L;k.push({css:d.channels.toCss(R,R,R),rgba:d.channels.toRgba(R,R,R)})}return k})());let S=a.ThemeService=class extends m.Disposable{get colors(){return this._colors}constructor(k){super(),this._optionsService=k,this._contrastCache=new h.ColorContrastCache,this._halfContrastCache=new h.ColorContrastCache,this._onChangeColors=this.register(new f.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:b,background:y,cursor:v,cursorAccent:x,selectionForeground:void 0,selectionBackgroundTransparent:w,selectionBackgroundOpaque:d.color.blend(y,w),selectionInactiveBackgroundTransparent:w,selectionInactiveBackgroundOpaque:d.color.blend(y,w),ansi:a.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(k={}){const _=this._colors;if(_.foreground=E(k.foreground,b),_.background=E(k.background,y),_.cursor=E(k.cursor,v),_.cursorAccent=E(k.cursorAccent,x),_.selectionBackgroundTransparent=E(k.selectionBackground,w),_.selectionBackgroundOpaque=d.color.blend(_.background,_.selectionBackgroundTransparent),_.selectionInactiveBackgroundTransparent=E(k.selectionInactiveBackground,_.selectionBackgroundTransparent),_.selectionInactiveBackgroundOpaque=d.color.blend(_.background,_.selectionInactiveBackgroundTransparent),_.selectionForeground=k.selectionForeground?E(k.selectionForeground,d.NULL_COLOR):void 0,_.selectionForeground===d.NULL_COLOR&&(_.selectionForeground=void 0),d.color.isOpaque(_.selectionBackgroundTransparent)&&(_.selectionBackgroundTransparent=d.color.opacity(_.selectionBackgroundTransparent,.3)),d.color.isOpaque(_.selectionInactiveBackgroundTransparent)&&(_.selectionInactiveBackgroundTransparent=d.color.opacity(_.selectionInactiveBackgroundTransparent,.3)),_.ansi=a.DEFAULT_ANSI_COLORS.slice(),_.ansi[0]=E(k.black,a.DEFAULT_ANSI_COLORS[0]),_.ansi[1]=E(k.red,a.DEFAULT_ANSI_COLORS[1]),_.ansi[2]=E(k.green,a.DEFAULT_ANSI_COLORS[2]),_.ansi[3]=E(k.yellow,a.DEFAULT_ANSI_COLORS[3]),_.ansi[4]=E(k.blue,a.DEFAULT_ANSI_COLORS[4]),_.ansi[5]=E(k.magenta,a.DEFAULT_ANSI_COLORS[5]),_.ansi[6]=E(k.cyan,a.DEFAULT_ANSI_COLORS[6]),_.ansi[7]=E(k.white,a.DEFAULT_ANSI_COLORS[7]),_.ansi[8]=E(k.brightBlack,a.DEFAULT_ANSI_COLORS[8]),_.ansi[9]=E(k.brightRed,a.DEFAULT_ANSI_COLORS[9]),_.ansi[10]=E(k.brightGreen,a.DEFAULT_ANSI_COLORS[10]),_.ansi[11]=E(k.brightYellow,a.DEFAULT_ANSI_COLORS[11]),_.ansi[12]=E(k.brightBlue,a.DEFAULT_ANSI_COLORS[12]),_.ansi[13]=E(k.brightMagenta,a.DEFAULT_ANSI_COLORS[13]),_.ansi[14]=E(k.brightCyan,a.DEFAULT_ANSI_COLORS[14]),_.ansi[15]=E(k.brightWhite,a.DEFAULT_ANSI_COLORS[15]),k.extendedAnsi){const L=Math.min(_.ansi.length-16,k.extendedAnsi.length);for(let R=0;R<L;R++)_.ansi[R+16]=E(k.extendedAnsi[R],a.DEFAULT_ANSI_COLORS[R+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(k){this._restoreColor(k),this._onChangeColors.fire(this.colors)}_restoreColor(k){if(k!==void 0)switch(k){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[k]=this._restoreColors.ansi[k]}else for(let _=0;_<this._restoreColors.ansi.length;++_)this._colors.ansi[_]=this._restoreColors.ansi[_]}modifyColors(k){k(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function E(k,_){if(k!==void 0)try{return d.css.toColor(k)}catch{}return _}a.ThemeService=S=c([u(0,g.IOptionsService)],S)},6349:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CircularList=void 0;const c=l(8460),u=l(844);class h extends u.Disposable{constructor(f){super(),this._maxLength=f,this.onDeleteEmitter=this.register(new c.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new c.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new c.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(f){if(this._maxLength===f)return;const m=new Array(f);for(let g=0;g<Math.min(f,this.length);g++)m[g]=this._array[this._getCyclicIndex(g)];this._array=m,this._maxLength=f,this._startIndex=0}get length(){return this._length}set length(f){if(f>this._length)for(let m=this._length;m<f;m++)this._array[m]=void 0;this._length=f}get(f){return this._array[this._getCyclicIndex(f)]}set(f,m){this._array[this._getCyclicIndex(f)]=m}push(f){this._array[this._getCyclicIndex(this._length)]=f,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(f,m,...g){if(m){for(let b=f;b<this._length-m;b++)this._array[this._getCyclicIndex(b)]=this._array[this._getCyclicIndex(b+m)];this._length-=m,this.onDeleteEmitter.fire({index:f,amount:m})}for(let b=this._length-1;b>=f;b--)this._array[this._getCyclicIndex(b+g.length)]=this._array[this._getCyclicIndex(b)];for(let b=0;b<g.length;b++)this._array[this._getCyclicIndex(f+b)]=g[b];if(g.length&&this.onInsertEmitter.fire({index:f,amount:g.length}),this._length+g.length>this._maxLength){const b=this._length+g.length-this._maxLength;this._startIndex+=b,this._length=this._maxLength,this.onTrimEmitter.fire(b)}else this._length+=g.length}trimStart(f){f>this._length&&(f=this._length),this._startIndex+=f,this._length-=f,this.onTrimEmitter.fire(f)}shiftElements(f,m,g){if(!(m<=0)){if(f<0||f>=this._length)throw new Error("start argument out of range");if(f+g<0)throw new Error("Cannot shift elements in list beyond index 0");if(g>0){for(let y=m-1;y>=0;y--)this.set(f+y+g,this.get(f+y));const b=f+m+g-this._length;if(b>0)for(this._length+=b;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let b=0;b<m;b++)this.set(f+b+g,this.get(f+b))}}_getCyclicIndex(f){return(this._startIndex+f)%this._maxLength}}a.CircularList=h},1439:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.clone=void 0,a.clone=function l(c,u=5){if(typeof c!="object")return c;const h=Array.isArray(c)?[]:{};for(const d in c)h[d]=u<=1?c[d]:c[d]&&l(c[d],u-1);return h}},8055:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.contrastRatio=a.toPaddedHex=a.rgba=a.rgb=a.css=a.color=a.channels=a.NULL_COLOR=void 0;let l=0,c=0,u=0,h=0;var d,f,m,g,b;function y(x){const w=x.toString(16);return w.length<2?"0"+w:w}function v(x,w){return x<w?(w+.05)/(x+.05):(x+.05)/(w+.05)}a.NULL_COLOR={css:"#00000000",rgba:0},function(x){x.toCss=function(w,S,E,k){return k!==void 0?`#${y(w)}${y(S)}${y(E)}${y(k)}`:`#${y(w)}${y(S)}${y(E)}`},x.toRgba=function(w,S,E,k=255){return(w<<24|S<<16|E<<8|k)>>>0},x.toColor=function(w,S,E,k){return{css:x.toCss(w,S,E,k),rgba:x.toRgba(w,S,E,k)}}}(d||(a.channels=d={})),function(x){function w(S,E){return h=Math.round(255*E),[l,c,u]=b.toChannels(S.rgba),{css:d.toCss(l,c,u,h),rgba:d.toRgba(l,c,u,h)}}x.blend=function(S,E){if(h=(255&E.rgba)/255,h===1)return{css:E.css,rgba:E.rgba};const k=E.rgba>>24&255,_=E.rgba>>16&255,L=E.rgba>>8&255,R=S.rgba>>24&255,C=S.rgba>>16&255,P=S.rgba>>8&255;return l=R+Math.round((k-R)*h),c=C+Math.round((_-C)*h),u=P+Math.round((L-P)*h),{css:d.toCss(l,c,u),rgba:d.toRgba(l,c,u)}},x.isOpaque=function(S){return(255&S.rgba)==255},x.ensureContrastRatio=function(S,E,k){const _=b.ensureContrastRatio(S.rgba,E.rgba,k);if(_)return d.toColor(_>>24&255,_>>16&255,_>>8&255)},x.opaque=function(S){const E=(255|S.rgba)>>>0;return[l,c,u]=b.toChannels(E),{css:d.toCss(l,c,u),rgba:E}},x.opacity=w,x.multiplyOpacity=function(S,E){return h=255&S.rgba,w(S,h*E/255)},x.toColorRGB=function(S){return[S.rgba>>24&255,S.rgba>>16&255,S.rgba>>8&255]}}(f||(a.color=f={})),function(x){let w,S;try{const E=document.createElement("canvas");E.width=1,E.height=1;const k=E.getContext("2d",{willReadFrequently:!0});k&&(w=k,w.globalCompositeOperation="copy",S=w.createLinearGradient(0,0,1,1))}catch{}x.toColor=function(E){if(E.match(/#[\da-f]{3,8}/i))switch(E.length){case 4:return l=parseInt(E.slice(1,2).repeat(2),16),c=parseInt(E.slice(2,3).repeat(2),16),u=parseInt(E.slice(3,4).repeat(2),16),d.toColor(l,c,u);case 5:return l=parseInt(E.slice(1,2).repeat(2),16),c=parseInt(E.slice(2,3).repeat(2),16),u=parseInt(E.slice(3,4).repeat(2),16),h=parseInt(E.slice(4,5).repeat(2),16),d.toColor(l,c,u,h);case 7:return{css:E,rgba:(parseInt(E.slice(1),16)<<8|255)>>>0};case 9:return{css:E,rgba:parseInt(E.slice(1),16)>>>0}}const k=E.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(k)return l=parseInt(k[1]),c=parseInt(k[2]),u=parseInt(k[3]),h=Math.round(255*(k[5]===void 0?1:parseFloat(k[5]))),d.toColor(l,c,u,h);if(!w||!S)throw new Error("css.toColor: Unsupported css format");if(w.fillStyle=S,w.fillStyle=E,typeof w.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(w.fillRect(0,0,1,1),[l,c,u,h]=w.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:d.toRgba(l,c,u,h),css:E}}}(m||(a.css=m={})),function(x){function w(S,E,k){const _=S/255,L=E/255,R=k/255;return .2126*(_<=.03928?_/12.92:Math.pow((_+.055)/1.055,2.4))+.7152*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))+.0722*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))}x.relativeLuminance=function(S){return w(S>>16&255,S>>8&255,255&S)},x.relativeLuminance2=w}(g||(a.rgb=g={})),function(x){function w(E,k,_){const L=E>>24&255,R=E>>16&255,C=E>>8&255;let P=k>>24&255,O=k>>16&255,N=k>>8&255,H=v(g.relativeLuminance2(P,O,N),g.relativeLuminance2(L,R,C));for(;H<_&&(P>0||O>0||N>0);)P-=Math.max(0,Math.ceil(.1*P)),O-=Math.max(0,Math.ceil(.1*O)),N-=Math.max(0,Math.ceil(.1*N)),H=v(g.relativeLuminance2(P,O,N),g.relativeLuminance2(L,R,C));return(P<<24|O<<16|N<<8|255)>>>0}function S(E,k,_){const L=E>>24&255,R=E>>16&255,C=E>>8&255;let P=k>>24&255,O=k>>16&255,N=k>>8&255,H=v(g.relativeLuminance2(P,O,N),g.relativeLuminance2(L,R,C));for(;H<_&&(P<255||O<255||N<255);)P=Math.min(255,P+Math.ceil(.1*(255-P))),O=Math.min(255,O+Math.ceil(.1*(255-O))),N=Math.min(255,N+Math.ceil(.1*(255-N))),H=v(g.relativeLuminance2(P,O,N),g.relativeLuminance2(L,R,C));return(P<<24|O<<16|N<<8|255)>>>0}x.blend=function(E,k){if(h=(255&k)/255,h===1)return k;const _=k>>24&255,L=k>>16&255,R=k>>8&255,C=E>>24&255,P=E>>16&255,O=E>>8&255;return l=C+Math.round((_-C)*h),c=P+Math.round((L-P)*h),u=O+Math.round((R-O)*h),d.toRgba(l,c,u)},x.ensureContrastRatio=function(E,k,_){const L=g.relativeLuminance(E>>8),R=g.relativeLuminance(k>>8);if(v(L,R)<_){if(R<L){const O=w(E,k,_),N=v(L,g.relativeLuminance(O>>8));if(N<_){const H=S(E,k,_);return N>v(L,g.relativeLuminance(H>>8))?O:H}return O}const C=S(E,k,_),P=v(L,g.relativeLuminance(C>>8));if(P<_){const O=w(E,k,_);return P>v(L,g.relativeLuminance(O>>8))?C:O}return C}},x.reduceLuminance=w,x.increaseLuminance=S,x.toChannels=function(E){return[E>>24&255,E>>16&255,E>>8&255,255&E]}}(b||(a.rgba=b={})),a.toPaddedHex=y,a.contrastRatio=v},8969:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreTerminal=void 0;const c=l(844),u=l(2585),h=l(4348),d=l(7866),f=l(744),m=l(7302),g=l(6975),b=l(8460),y=l(1753),v=l(1480),x=l(7994),w=l(9282),S=l(5435),E=l(5981),k=l(2660);let _=!1;class L extends c.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new b.EventEmitter),this._onScroll.event(C=>{this._onScrollApi?.fire(C.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(C){for(const P in C)this.optionsService.options[P]=C[P]}constructor(C){super(),this._windowsWrappingHeuristics=this.register(new c.MutableDisposable),this._onBinary=this.register(new b.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new b.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new b.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new b.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new b.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new b.EventEmitter),this._instantiationService=new h.InstantiationService,this.optionsService=this.register(new m.OptionsService(C)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(f.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(d.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(g.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(y.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(v.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(x.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(k.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new S.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,b.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,b.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,b.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,b.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new E.WriteBuffer((P,O)=>this._inputHandler.parse(P,O))),this.register((0,b.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(C,P){this._writeBuffer.write(C,P)}writeSync(C,P){this._logService.logLevel<=u.LogLevelEnum.WARN&&!_&&(this._logService.warn("writeSync is unreliable and will be removed soon."),_=!0),this._writeBuffer.writeSync(C,P)}input(C,P=!0){this.coreService.triggerDataEvent(C,P)}resize(C,P){isNaN(C)||isNaN(P)||(C=Math.max(C,f.MINIMUM_COLS),P=Math.max(P,f.MINIMUM_ROWS),this._bufferService.resize(C,P))}scroll(C,P=!1){this._bufferService.scroll(C,P)}scrollLines(C,P,O){this._bufferService.scrollLines(C,P,O)}scrollPages(C){this.scrollLines(C*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(C){const P=C-this._bufferService.buffer.ydisp;P!==0&&this.scrollLines(P)}registerEscHandler(C,P){return this._inputHandler.registerEscHandler(C,P)}registerDcsHandler(C,P){return this._inputHandler.registerDcsHandler(C,P)}registerCsiHandler(C,P){return this._inputHandler.registerCsiHandler(C,P)}registerOscHandler(C,P){return this._inputHandler.registerOscHandler(C,P)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let C=!1;const P=this.optionsService.rawOptions.windowsPty;P&&P.buildNumber!==void 0&&P.buildNumber!==void 0?C=P.backend==="conpty"&&P.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(C=!0),C?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const C=[];C.push(this.onLineFeed(w.updateWindowsModeWrappedState.bind(null,this._bufferService))),C.push(this.registerCsiHandler({final:"H"},()=>((0,w.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,c.toDisposable)(()=>{for(const P of C)P.dispose()})}}}a.CoreTerminal=L},8460:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.runAndSubscribe=a.forwardEvent=a.EventEmitter=void 0,a.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=l=>(this._listeners.push(l),{dispose:()=>{if(!this._disposed){for(let c=0;c<this._listeners.length;c++)if(this._listeners[c]===l)return void this._listeners.splice(c,1)}}})),this._event}fire(l,c){const u=[];for(let h=0;h<this._listeners.length;h++)u.push(this._listeners[h]);for(let h=0;h<u.length;h++)u[h].call(void 0,l,c)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},a.forwardEvent=function(l,c){return l(u=>c.fire(u))},a.runAndSubscribe=function(l,c){return c(void 0),l(u=>c(u))}},5435:function(o,a,l){var c=this&&this.__decorate||function(J,j,F,Y){var M,D=arguments.length,V=D<3?j:Y===null?Y=Object.getOwnPropertyDescriptor(j,F):Y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")V=Reflect.decorate(J,j,F,Y);else for(var W=J.length-1;W>=0;W--)(M=J[W])&&(V=(D<3?M(V):D>3?M(j,F,V):M(j,F))||V);return D>3&&V&&Object.defineProperty(j,F,V),V},u=this&&this.__param||function(J,j){return function(F,Y){j(F,Y,J)}};Object.defineProperty(a,"__esModule",{value:!0}),a.InputHandler=a.WindowsOptionsReportType=void 0;const h=l(2584),d=l(7116),f=l(2015),m=l(844),g=l(482),b=l(8437),y=l(8460),v=l(643),x=l(511),w=l(3734),S=l(2585),E=l(1480),k=l(6242),_=l(6351),L=l(5941),R={"(":0,")":1,"*":2,"+":3,"-":1,".":2},C=131072;function P(J,j){if(J>24)return j.setWinLines||!1;switch(J){case 1:return!!j.restoreWin;case 2:return!!j.minimizeWin;case 3:return!!j.setWinPosition;case 4:return!!j.setWinSizePixels;case 5:return!!j.raiseWin;case 6:return!!j.lowerWin;case 7:return!!j.refreshWin;case 8:return!!j.setWinSizeChars;case 9:return!!j.maximizeWin;case 10:return!!j.fullscreenWin;case 11:return!!j.getWinState;case 13:return!!j.getWinPosition;case 14:return!!j.getWinSizePixels;case 15:return!!j.getScreenSizePixels;case 16:return!!j.getCellSizePixels;case 18:return!!j.getWinSizeChars;case 19:return!!j.getScreenSizeChars;case 20:return!!j.getIconTitle;case 21:return!!j.getWinTitle;case 22:return!!j.pushTitle;case 23:return!!j.popTitle;case 24:return!!j.setWinLines}return!1}var O;(function(J){J[J.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",J[J.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(O||(a.WindowsOptionsReportType=O={}));let N=0;class H extends m.Disposable{getAttrData(){return this._curAttrData}constructor(j,F,Y,M,D,V,W,te,ee=new f.EscapeSequenceParser){super(),this._bufferService=j,this._charsetService=F,this._coreService=Y,this._logService=M,this._optionsService=D,this._oscLinkService=V,this._coreMouseService=W,this._unicodeService=te,this._parser=ee,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new g.StringToUtf32,this._utf8Decoder=new g.Utf8ToUtf32,this._workCell=new x.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=b.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=b.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new y.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new y.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new y.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new y.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new y.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new y.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new y.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new y.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new y.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new y.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new y.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new y.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new y.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new Q(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(K=>this._activeBuffer=K.activeBuffer)),this._parser.setCsiHandlerFallback((K,he)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(K),params:he.toArray()})}),this._parser.setEscHandlerFallback(K=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(K)})}),this._parser.setExecuteHandlerFallback(K=>{this._logService.debug("Unknown EXECUTE code: ",{code:K})}),this._parser.setOscHandlerFallback((K,he,be)=>{this._logService.debug("Unknown OSC code: ",{identifier:K,action:he,data:be})}),this._parser.setDcsHandlerFallback((K,he,be)=>{he==="HOOK"&&(be=be.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(K),action:he,payload:be})}),this._parser.setPrintHandler((K,he,be)=>this.print(K,he,be)),this._parser.registerCsiHandler({final:"@"},K=>this.insertChars(K)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},K=>this.scrollLeft(K)),this._parser.registerCsiHandler({final:"A"},K=>this.cursorUp(K)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},K=>this.scrollRight(K)),this._parser.registerCsiHandler({final:"B"},K=>this.cursorDown(K)),this._parser.registerCsiHandler({final:"C"},K=>this.cursorForward(K)),this._parser.registerCsiHandler({final:"D"},K=>this.cursorBackward(K)),this._parser.registerCsiHandler({final:"E"},K=>this.cursorNextLine(K)),this._parser.registerCsiHandler({final:"F"},K=>this.cursorPrecedingLine(K)),this._parser.registerCsiHandler({final:"G"},K=>this.cursorCharAbsolute(K)),this._parser.registerCsiHandler({final:"H"},K=>this.cursorPosition(K)),this._parser.registerCsiHandler({final:"I"},K=>this.cursorForwardTab(K)),this._parser.registerCsiHandler({final:"J"},K=>this.eraseInDisplay(K,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},K=>this.eraseInDisplay(K,!0)),this._parser.registerCsiHandler({final:"K"},K=>this.eraseInLine(K,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},K=>this.eraseInLine(K,!0)),this._parser.registerCsiHandler({final:"L"},K=>this.insertLines(K)),this._parser.registerCsiHandler({final:"M"},K=>this.deleteLines(K)),this._parser.registerCsiHandler({final:"P"},K=>this.deleteChars(K)),this._parser.registerCsiHandler({final:"S"},K=>this.scrollUp(K)),this._parser.registerCsiHandler({final:"T"},K=>this.scrollDown(K)),this._parser.registerCsiHandler({final:"X"},K=>this.eraseChars(K)),this._parser.registerCsiHandler({final:"Z"},K=>this.cursorBackwardTab(K)),this._parser.registerCsiHandler({final:"`"},K=>this.charPosAbsolute(K)),this._parser.registerCsiHandler({final:"a"},K=>this.hPositionRelative(K)),this._parser.registerCsiHandler({final:"b"},K=>this.repeatPrecedingCharacter(K)),this._parser.registerCsiHandler({final:"c"},K=>this.sendDeviceAttributesPrimary(K)),this._parser.registerCsiHandler({prefix:">",final:"c"},K=>this.sendDeviceAttributesSecondary(K)),this._parser.registerCsiHandler({final:"d"},K=>this.linePosAbsolute(K)),this._parser.registerCsiHandler({final:"e"},K=>this.vPositionRelative(K)),this._parser.registerCsiHandler({final:"f"},K=>this.hVPosition(K)),this._parser.registerCsiHandler({final:"g"},K=>this.tabClear(K)),this._parser.registerCsiHandler({final:"h"},K=>this.setMode(K)),this._parser.registerCsiHandler({prefix:"?",final:"h"},K=>this.setModePrivate(K)),this._parser.registerCsiHandler({final:"l"},K=>this.resetMode(K)),this._parser.registerCsiHandler({prefix:"?",final:"l"},K=>this.resetModePrivate(K)),this._parser.registerCsiHandler({final:"m"},K=>this.charAttributes(K)),this._parser.registerCsiHandler({final:"n"},K=>this.deviceStatus(K)),this._parser.registerCsiHandler({prefix:"?",final:"n"},K=>this.deviceStatusPrivate(K)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},K=>this.softReset(K)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},K=>this.setCursorStyle(K)),this._parser.registerCsiHandler({final:"r"},K=>this.setScrollRegion(K)),this._parser.registerCsiHandler({final:"s"},K=>this.saveCursor(K)),this._parser.registerCsiHandler({final:"t"},K=>this.windowOptions(K)),this._parser.registerCsiHandler({final:"u"},K=>this.restoreCursor(K)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},K=>this.insertColumns(K)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},K=>this.deleteColumns(K)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},K=>this.selectProtected(K)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},K=>this.requestMode(K,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},K=>this.requestMode(K,!1)),this._parser.setExecuteHandler(h.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(h.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(h.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(h.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(h.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(h.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(h.C1.IND,()=>this.index()),this._parser.setExecuteHandler(h.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(h.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new k.OscHandler(K=>(this.setTitle(K),this.setIconName(K),!0))),this._parser.registerOscHandler(1,new k.OscHandler(K=>this.setIconName(K))),this._parser.registerOscHandler(2,new k.OscHandler(K=>this.setTitle(K))),this._parser.registerOscHandler(4,new k.OscHandler(K=>this.setOrReportIndexedColor(K))),this._parser.registerOscHandler(8,new k.OscHandler(K=>this.setHyperlink(K))),this._parser.registerOscHandler(10,new k.OscHandler(K=>this.setOrReportFgColor(K))),this._parser.registerOscHandler(11,new k.OscHandler(K=>this.setOrReportBgColor(K))),this._parser.registerOscHandler(12,new k.OscHandler(K=>this.setOrReportCursorColor(K))),this._parser.registerOscHandler(104,new k.OscHandler(K=>this.restoreIndexedColor(K))),this._parser.registerOscHandler(110,new k.OscHandler(K=>this.restoreFgColor(K))),this._parser.registerOscHandler(111,new k.OscHandler(K=>this.restoreBgColor(K))),this._parser.registerOscHandler(112,new k.OscHandler(K=>this.restoreCursorColor(K))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const K in d.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:K},()=>this.selectCharset("("+K)),this._parser.registerEscHandler({intermediates:")",final:K},()=>this.selectCharset(")"+K)),this._parser.registerEscHandler({intermediates:"*",final:K},()=>this.selectCharset("*"+K)),this._parser.registerEscHandler({intermediates:"+",final:K},()=>this.selectCharset("+"+K)),this._parser.registerEscHandler({intermediates:"-",final:K},()=>this.selectCharset("-"+K)),this._parser.registerEscHandler({intermediates:".",final:K},()=>this.selectCharset("."+K)),this._parser.registerEscHandler({intermediates:"/",final:K},()=>this.selectCharset("/"+K));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(K=>(this._logService.error("Parsing error: ",K),K)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new _.DcsHandler((K,he)=>this.requestStatusString(K,he)))}_preserveStack(j,F,Y,M){this._parseStack.paused=!0,this._parseStack.cursorStartX=j,this._parseStack.cursorStartY=F,this._parseStack.decodedLength=Y,this._parseStack.position=M}_logSlowResolvingAsync(j){this._logService.logLevel<=S.LogLevelEnum.WARN&&Promise.race([j,new Promise((F,Y)=>setTimeout(()=>Y("#SLOW_TIMEOUT"),5e3))]).catch(F=>{if(F!=="#SLOW_TIMEOUT")throw F;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(j,F){let Y,M=this._activeBuffer.x,D=this._activeBuffer.y,V=0;const W=this._parseStack.paused;if(W){if(Y=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,F))return this._logSlowResolvingAsync(Y),Y;M=this._parseStack.cursorStartX,D=this._parseStack.cursorStartY,this._parseStack.paused=!1,j.length>C&&(V=this._parseStack.position+C)}if(this._logService.logLevel<=S.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof j=="string"?` "${j}"`:` "${Array.prototype.map.call(j,K=>String.fromCharCode(K)).join("")}"`),typeof j=="string"?j.split("").map(K=>K.charCodeAt(0)):j),this._parseBuffer.length<j.length&&this._parseBuffer.length<C&&(this._parseBuffer=new Uint32Array(Math.min(j.length,C))),W||this._dirtyRowTracker.clearRange(),j.length>C)for(let K=V;K<j.length;K+=C){const he=K+C<j.length?K+C:j.length,be=typeof j=="string"?this._stringDecoder.decode(j.substring(K,he),this._parseBuffer):this._utf8Decoder.decode(j.subarray(K,he),this._parseBuffer);if(Y=this._parser.parse(this._parseBuffer,be))return this._preserveStack(M,D,be,K),this._logSlowResolvingAsync(Y),Y}else if(!W){const K=typeof j=="string"?this._stringDecoder.decode(j,this._parseBuffer):this._utf8Decoder.decode(j,this._parseBuffer);if(Y=this._parser.parse(this._parseBuffer,K))return this._preserveStack(M,D,K,0),this._logSlowResolvingAsync(Y),Y}this._activeBuffer.x===M&&this._activeBuffer.y===D||this._onCursorMove.fire();const te=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),ee=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);ee<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(ee,this._bufferService.rows-1),Math.min(te,this._bufferService.rows-1))}print(j,F,Y){let M,D;const V=this._charsetService.charset,W=this._optionsService.rawOptions.screenReaderMode,te=this._bufferService.cols,ee=this._coreService.decPrivateModes.wraparound,K=this._coreService.modes.insertMode,he=this._curAttrData;let be=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&Y-F>0&&be.getWidth(this._activeBuffer.x-1)===2&&be.setCellFromCodepoint(this._activeBuffer.x-1,0,1,he);let Se=this._parser.precedingJoinState;for(let Ce=F;Ce<Y;++Ce){if(M=j[Ce],M<127&&V){const ne=V[String.fromCharCode(M)];ne&&(M=ne.charCodeAt(0))}const ke=this._unicodeService.charProperties(M,Se);D=E.UnicodeService.extractWidth(ke);const q=E.UnicodeService.extractShouldJoin(ke),pe=q?E.UnicodeService.extractWidth(Se):0;if(Se=ke,W&&this._onA11yChar.fire((0,g.stringFromCodePoint)(M)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+D-pe>te){if(ee){const ne=be;let oe=this._activeBuffer.x-pe;for(this._activeBuffer.x=pe,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),be=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),pe>0&&be instanceof b.BufferLine&&be.copyCellsFrom(ne,oe,0,pe,!1);oe<te;)ne.setCellFromCodepoint(oe++,0,1,he)}else if(this._activeBuffer.x=te-1,D===2)continue}if(q&&this._activeBuffer.x){const ne=be.getWidth(this._activeBuffer.x-1)?1:2;be.addCodepointToCell(this._activeBuffer.x-ne,M,D);for(let oe=D-pe;--oe>=0;)be.setCellFromCodepoint(this._activeBuffer.x++,0,0,he)}else if(K&&(be.insertCells(this._activeBuffer.x,D-pe,this._activeBuffer.getNullCell(he)),be.getWidth(te-1)===2&&be.setCellFromCodepoint(te-1,v.NULL_CELL_CODE,v.NULL_CELL_WIDTH,he)),be.setCellFromCodepoint(this._activeBuffer.x++,M,D,he),D>0)for(;--D;)be.setCellFromCodepoint(this._activeBuffer.x++,0,0,he)}this._parser.precedingJoinState=Se,this._activeBuffer.x<te&&Y-F>0&&be.getWidth(this._activeBuffer.x)===0&&!be.hasContent(this._activeBuffer.x)&&be.setCellFromCodepoint(this._activeBuffer.x,0,1,he),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(j,F){return j.final!=="t"||j.prefix||j.intermediates?this._parser.registerCsiHandler(j,F):this._parser.registerCsiHandler(j,Y=>!P(Y.params[0],this._optionsService.rawOptions.windowOptions)||F(Y))}registerDcsHandler(j,F){return this._parser.registerDcsHandler(j,new _.DcsHandler(F))}registerEscHandler(j,F){return this._parser.registerEscHandler(j,F)}registerOscHandler(j,F){return this._parser.registerOscHandler(j,new k.OscHandler(F))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);j.hasWidth(this._activeBuffer.x)&&!j.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const j=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-j),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(j=this._bufferService.cols-1){this._activeBuffer.x=Math.min(j,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(j,F){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=j,this._activeBuffer.y=this._activeBuffer.scrollTop+F):(this._activeBuffer.x=j,this._activeBuffer.y=F),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(j,F){this._restrictCursor(),this._setCursor(this._activeBuffer.x+j,this._activeBuffer.y+F)}cursorUp(j){const F=this._activeBuffer.y-this._activeBuffer.scrollTop;return F>=0?this._moveCursor(0,-Math.min(F,j.params[0]||1)):this._moveCursor(0,-(j.params[0]||1)),!0}cursorDown(j){const F=this._activeBuffer.scrollBottom-this._activeBuffer.y;return F>=0?this._moveCursor(0,Math.min(F,j.params[0]||1)):this._moveCursor(0,j.params[0]||1),!0}cursorForward(j){return this._moveCursor(j.params[0]||1,0),!0}cursorBackward(j){return this._moveCursor(-(j.params[0]||1),0),!0}cursorNextLine(j){return this.cursorDown(j),this._activeBuffer.x=0,!0}cursorPrecedingLine(j){return this.cursorUp(j),this._activeBuffer.x=0,!0}cursorCharAbsolute(j){return this._setCursor((j.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(j){return this._setCursor(j.length>=2?(j.params[1]||1)-1:0,(j.params[0]||1)-1),!0}charPosAbsolute(j){return this._setCursor((j.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(j){return this._moveCursor(j.params[0]||1,0),!0}linePosAbsolute(j){return this._setCursor(this._activeBuffer.x,(j.params[0]||1)-1),!0}vPositionRelative(j){return this._moveCursor(0,j.params[0]||1),!0}hVPosition(j){return this.cursorPosition(j),!0}tabClear(j){const F=j.params[0];return F===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:F===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(j){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let F=j.params[0]||1;for(;F--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(j){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let F=j.params[0]||1;for(;F--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(j){const F=j.params[0];return F===1&&(this._curAttrData.bg|=536870912),F!==2&&F!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(j,F,Y,M=!1,D=!1){const V=this._activeBuffer.lines.get(this._activeBuffer.ybase+j);V.replaceCells(F,Y,this._activeBuffer.getNullCell(this._eraseAttrData()),D),M&&(V.isWrapped=!1)}_resetBufferLine(j,F=!1){const Y=this._activeBuffer.lines.get(this._activeBuffer.ybase+j);Y&&(Y.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),F),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+j),Y.isWrapped=!1)}eraseInDisplay(j,F=!1){let Y;switch(this._restrictCursor(this._bufferService.cols),j.params[0]){case 0:for(Y=this._activeBuffer.y,this._dirtyRowTracker.markDirty(Y),this._eraseInBufferLine(Y++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,F);Y<this._bufferService.rows;Y++)this._resetBufferLine(Y,F);this._dirtyRowTracker.markDirty(Y);break;case 1:for(Y=this._activeBuffer.y,this._dirtyRowTracker.markDirty(Y),this._eraseInBufferLine(Y,0,this._activeBuffer.x+1,!0,F),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(Y+1).isWrapped=!1);Y--;)this._resetBufferLine(Y,F);this._dirtyRowTracker.markDirty(0);break;case 2:for(Y=this._bufferService.rows,this._dirtyRowTracker.markDirty(Y-1);Y--;)this._resetBufferLine(Y,F);this._dirtyRowTracker.markDirty(0);break;case 3:const M=this._activeBuffer.lines.length-this._bufferService.rows;M>0&&(this._activeBuffer.lines.trimStart(M),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-M,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-M,0),this._onScroll.fire(0))}return!0}eraseInLine(j,F=!1){switch(this._restrictCursor(this._bufferService.cols),j.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,F);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,F);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,F)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(j){this._restrictCursor();let F=j.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const Y=this._activeBuffer.ybase+this._activeBuffer.y,M=this._bufferService.rows-1-this._activeBuffer.scrollBottom,D=this._bufferService.rows-1+this._activeBuffer.ybase-M+1;for(;F--;)this._activeBuffer.lines.splice(D-1,1),this._activeBuffer.lines.splice(Y,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(j){this._restrictCursor();let F=j.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const Y=this._activeBuffer.ybase+this._activeBuffer.y;let M;for(M=this._bufferService.rows-1-this._activeBuffer.scrollBottom,M=this._bufferService.rows-1+this._activeBuffer.ybase-M;F--;)this._activeBuffer.lines.splice(Y,1),this._activeBuffer.lines.splice(M,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(j){this._restrictCursor();const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.insertCells(this._activeBuffer.x,j.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(j){this._restrictCursor();const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.deleteCells(this._activeBuffer.x,j.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(j){let F=j.params[0]||1;for(;F--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(j){let F=j.params[0]||1;for(;F--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(b.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(j){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=j.params[0]||1;for(let Y=this._activeBuffer.scrollTop;Y<=this._activeBuffer.scrollBottom;++Y){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+Y);M.deleteCells(0,F,this._activeBuffer.getNullCell(this._eraseAttrData())),M.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(j){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=j.params[0]||1;for(let Y=this._activeBuffer.scrollTop;Y<=this._activeBuffer.scrollBottom;++Y){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+Y);M.insertCells(0,F,this._activeBuffer.getNullCell(this._eraseAttrData())),M.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(j){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=j.params[0]||1;for(let Y=this._activeBuffer.scrollTop;Y<=this._activeBuffer.scrollBottom;++Y){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+Y);M.insertCells(this._activeBuffer.x,F,this._activeBuffer.getNullCell(this._eraseAttrData())),M.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(j){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=j.params[0]||1;for(let Y=this._activeBuffer.scrollTop;Y<=this._activeBuffer.scrollBottom;++Y){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+Y);M.deleteCells(this._activeBuffer.x,F,this._activeBuffer.getNullCell(this._eraseAttrData())),M.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(j){this._restrictCursor();const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(j.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(j){const F=this._parser.precedingJoinState;if(!F)return!0;const Y=j.params[0]||1,M=E.UnicodeService.extractWidth(F),D=this._activeBuffer.x-M,V=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(D),W=new Uint32Array(V.length*Y);let te=0;for(let K=0;K<V.length;){const he=V.codePointAt(K)||0;W[te++]=he,K+=he>65535?2:1}let ee=te;for(let K=1;K<Y;++K)W.copyWithin(ee,0,te),ee+=te;return this.print(W,0,ee),!0}sendDeviceAttributesPrimary(j){return j.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(j){return j.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(j.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0}_is(j){return(this._optionsService.rawOptions.termName+"").indexOf(j)===0}setMode(j){for(let F=0;F<j.length;F++)switch(j.params[F]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(j){for(let F=0;F<j.length;F++)switch(j.params[F]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,d.DEFAULT_CHARSET),this._charsetService.setgCharset(1,d.DEFAULT_CHARSET),this._charsetService.setgCharset(2,d.DEFAULT_CHARSET),this._charsetService.setgCharset(3,d.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(j){for(let F=0;F<j.length;F++)switch(j.params[F]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(j){for(let F=0;F<j.length;F++)switch(j.params[F]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),j.params[F]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(j,F){const Y=this._coreService.decPrivateModes,{activeProtocol:M,activeEncoding:D}=this._coreMouseService,V=this._coreService,{buffers:W,cols:te}=this._bufferService,{active:ee,alt:K}=W,he=this._optionsService.rawOptions,be=q=>q?1:2,Se=j.params[0];return Ce=Se,ke=F?Se===2?4:Se===4?be(V.modes.insertMode):Se===12?3:Se===20?be(he.convertEol):0:Se===1?be(Y.applicationCursorKeys):Se===3?he.windowOptions.setWinLines?te===80?2:te===132?1:0:0:Se===6?be(Y.origin):Se===7?be(Y.wraparound):Se===8?3:Se===9?be(M==="X10"):Se===12?be(he.cursorBlink):Se===25?be(!V.isCursorHidden):Se===45?be(Y.reverseWraparound):Se===66?be(Y.applicationKeypad):Se===67?4:Se===1e3?be(M==="VT200"):Se===1002?be(M==="DRAG"):Se===1003?be(M==="ANY"):Se===1004?be(Y.sendFocus):Se===1005?4:Se===1006?be(D==="SGR"):Se===1015?4:Se===1016?be(D==="SGR_PIXELS"):Se===1048?1:Se===47||Se===1047||Se===1049?be(ee===K):Se===2004?be(Y.bracketedPasteMode):0,V.triggerDataEvent(`${h.C0.ESC}[${F?"":"?"}${Ce};${ke}$y`),!0;var Ce,ke}_updateAttrColor(j,F,Y,M,D){return F===2?(j|=50331648,j&=-16777216,j|=w.AttributeData.fromColorRGB([Y,M,D])):F===5&&(j&=-50331904,j|=33554432|255&Y),j}_extractColor(j,F,Y){const M=[0,0,-1,0,0,0];let D=0,V=0;do{if(M[V+D]=j.params[F+V],j.hasSubParams(F+V)){const W=j.getSubParams(F+V);let te=0;do M[1]===5&&(D=1),M[V+te+1+D]=W[te];while(++te<W.length&&te+V+1+D<M.length);break}if(M[1]===5&&V+D>=2||M[1]===2&&V+D>=5)break;M[1]&&(D=1)}while(++V+F<j.length&&V+D<M.length);for(let W=2;W<M.length;++W)M[W]===-1&&(M[W]=0);switch(M[0]){case 38:Y.fg=this._updateAttrColor(Y.fg,M[1],M[3],M[4],M[5]);break;case 48:Y.bg=this._updateAttrColor(Y.bg,M[1],M[3],M[4],M[5]);break;case 58:Y.extended=Y.extended.clone(),Y.extended.underlineColor=this._updateAttrColor(Y.extended.underlineColor,M[1],M[3],M[4],M[5])}return V}_processUnderline(j,F){F.extended=F.extended.clone(),(!~j||j>5)&&(j=1),F.extended.underlineStyle=j,F.fg|=268435456,j===0&&(F.fg&=-268435457),F.updateExtended()}_processSGR0(j){j.fg=b.DEFAULT_ATTR_DATA.fg,j.bg=b.DEFAULT_ATTR_DATA.bg,j.extended=j.extended.clone(),j.extended.underlineStyle=0,j.extended.underlineColor&=-67108864,j.updateExtended()}charAttributes(j){if(j.length===1&&j.params[0]===0)return this._processSGR0(this._curAttrData),!0;const F=j.length;let Y;const M=this._curAttrData;for(let D=0;D<F;D++)Y=j.params[D],Y>=30&&Y<=37?(M.fg&=-50331904,M.fg|=16777216|Y-30):Y>=40&&Y<=47?(M.bg&=-50331904,M.bg|=16777216|Y-40):Y>=90&&Y<=97?(M.fg&=-50331904,M.fg|=16777224|Y-90):Y>=100&&Y<=107?(M.bg&=-50331904,M.bg|=16777224|Y-100):Y===0?this._processSGR0(M):Y===1?M.fg|=134217728:Y===3?M.bg|=67108864:Y===4?(M.fg|=268435456,this._processUnderline(j.hasSubParams(D)?j.getSubParams(D)[0]:1,M)):Y===5?M.fg|=536870912:Y===7?M.fg|=67108864:Y===8?M.fg|=1073741824:Y===9?M.fg|=2147483648:Y===2?M.bg|=134217728:Y===21?this._processUnderline(2,M):Y===22?(M.fg&=-134217729,M.bg&=-134217729):Y===23?M.bg&=-67108865:Y===24?(M.fg&=-268435457,this._processUnderline(0,M)):Y===25?M.fg&=-536870913:Y===27?M.fg&=-67108865:Y===28?M.fg&=-1073741825:Y===29?M.fg&=2147483647:Y===39?(M.fg&=-67108864,M.fg|=16777215&b.DEFAULT_ATTR_DATA.fg):Y===49?(M.bg&=-67108864,M.bg|=16777215&b.DEFAULT_ATTR_DATA.bg):Y===38||Y===48||Y===58?D+=this._extractColor(j,D,M):Y===53?M.bg|=1073741824:Y===55?M.bg&=-1073741825:Y===59?(M.extended=M.extended.clone(),M.extended.underlineColor=-1,M.updateExtended()):Y===100?(M.fg&=-67108864,M.fg|=16777215&b.DEFAULT_ATTR_DATA.fg,M.bg&=-67108864,M.bg|=16777215&b.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",Y);return!0}deviceStatus(j){switch(j.params[0]){case 5:this._coreService.triggerDataEvent(`${h.C0.ESC}[0n`);break;case 6:const F=this._activeBuffer.y+1,Y=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[${F};${Y}R`)}return!0}deviceStatusPrivate(j){if(j.params[0]===6){const F=this._activeBuffer.y+1,Y=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[?${F};${Y}R`)}return!0}softReset(j){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=b.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(j){const F=j.params[0]||1;switch(F){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const Y=F%2==1;return this._optionsService.options.cursorBlink=Y,!0}setScrollRegion(j){const F=j.params[0]||1;let Y;return(j.length<2||(Y=j.params[1])>this._bufferService.rows||Y===0)&&(Y=this._bufferService.rows),Y>F&&(this._activeBuffer.scrollTop=F-1,this._activeBuffer.scrollBottom=Y-1,this._setCursor(0,0)),!0}windowOptions(j){if(!P(j.params[0],this._optionsService.rawOptions.windowOptions))return!0;const F=j.length>1?j.params[1]:0;switch(j.params[0]){case 14:F!==2&&this._onRequestWindowsOptionsReport.fire(O.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(O.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${h.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:F!==0&&F!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),F!==0&&F!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:F!==0&&F!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),F!==0&&F!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(j){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(j){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(j){return this._windowTitle=j,this._onTitleChange.fire(j),!0}setIconName(j){return this._iconName=j,!0}setOrReportIndexedColor(j){const F=[],Y=j.split(";");for(;Y.length>1;){const M=Y.shift(),D=Y.shift();if(/^\d+$/.exec(M)){const V=parseInt(M);if(X(V))if(D==="?")F.push({type:0,index:V});else{const W=(0,L.parseColor)(D);W&&F.push({type:1,index:V,color:W})}}}return F.length&&this._onColor.fire(F),!0}setHyperlink(j){const F=j.split(";");return!(F.length<2)&&(F[1]?this._createHyperlink(F[0],F[1]):!F[0]&&this._finishHyperlink())}_createHyperlink(j,F){this._getCurrentLinkId()&&this._finishHyperlink();const Y=j.split(":");let M;const D=Y.findIndex(V=>V.startsWith("id="));return D!==-1&&(M=Y[D].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:M,uri:F}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(j,F){const Y=j.split(";");for(let M=0;M<Y.length&&!(F>=this._specialColors.length);++M,++F)if(Y[M]==="?")this._onColor.fire([{type:0,index:this._specialColors[F]}]);else{const D=(0,L.parseColor)(Y[M]);D&&this._onColor.fire([{type:1,index:this._specialColors[F],color:D}])}return!0}setOrReportFgColor(j){return this._setOrReportSpecialColor(j,0)}setOrReportBgColor(j){return this._setOrReportSpecialColor(j,1)}setOrReportCursorColor(j){return this._setOrReportSpecialColor(j,2)}restoreIndexedColor(j){if(!j)return this._onColor.fire([{type:2}]),!0;const F=[],Y=j.split(";");for(let M=0;M<Y.length;++M)if(/^\d+$/.exec(Y[M])){const D=parseInt(Y[M]);X(D)&&F.push({type:2,index:D})}return F.length&&this._onColor.fire(F),!0}restoreFgColor(j){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(j){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(j){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,d.DEFAULT_CHARSET),!0}selectCharset(j){return j.length!==2?(this.selectDefaultCharset(),!0):(j[0]==="/"||this._charsetService.setgCharset(R[j[0]],d.CHARSETS[j[1]]||d.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const j=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,j,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=b.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=b.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(j){return this._charsetService.setgLevel(j),!0}screenAlignmentPattern(){const j=new x.CellData;j.content=4194373,j.fg=this._curAttrData.fg,j.bg=this._curAttrData.bg,this._setCursor(0,0);for(let F=0;F<this._bufferService.rows;++F){const Y=this._activeBuffer.ybase+this._activeBuffer.y+F,M=this._activeBuffer.lines.get(Y);M&&(M.fill(j),M.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(j,F){const Y=this._bufferService.buffer,M=this._optionsService.rawOptions;return(D=>(this._coreService.triggerDataEvent(`${h.C0.ESC}${D}${h.C0.ESC}\\`),!0))(j==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:j==='"p'?'P1$r61;1"p':j==="r"?`P1$r${Y.scrollTop+1};${Y.scrollBottom+1}r`:j==="m"?"P1$r0m":j===" q"?`P1$r${{block:2,underline:4,bar:6}[M.cursorStyle]-(M.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(j,F){this._dirtyRowTracker.markRangeDirty(j,F)}}a.InputHandler=H;let Q=class{constructor(J){this._bufferService=J,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(J){J<this.start?this.start=J:J>this.end&&(this.end=J)}markRangeDirty(J,j){J>j&&(N=J,J=j,j=N),J<this.start&&(this.start=J),j>this.end&&(this.end=j)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function X(J){return 0<=J&&J<256}Q=c([u(0,S.IBufferService)],Q)},844:(o,a)=>{function l(c){for(const u of c)u.dispose();c.length=0}Object.defineProperty(a,"__esModule",{value:!0}),a.getDisposeArrayDisposable=a.disposeArray=a.toDisposable=a.MutableDisposable=a.Disposable=void 0,a.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const c of this._disposables)c.dispose();this._disposables.length=0}register(c){return this._disposables.push(c),c}unregister(c){const u=this._disposables.indexOf(c);u!==-1&&this._disposables.splice(u,1)}},a.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(c){this._isDisposed||c===this._value||(this._value?.dispose(),this._value=c)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},a.toDisposable=function(c){return{dispose:c}},a.disposeArray=l,a.getDisposeArrayDisposable=function(c){return{dispose:()=>l(c)}}},1505:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FourKeyMap=a.TwoKeyMap=void 0;class l{constructor(){this._data={}}set(u,h,d){this._data[u]||(this._data[u]={}),this._data[u][h]=d}get(u,h){return this._data[u]?this._data[u][h]:void 0}clear(){this._data={}}}a.TwoKeyMap=l,a.FourKeyMap=class{constructor(){this._data=new l}set(c,u,h,d,f){this._data.get(c,u)||this._data.set(c,u,new l),this._data.get(c,u).set(h,d,f)}get(c,u,h,d){return this._data.get(c,u)?.get(h,d)}clear(){this._data.clear()}}},6114:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isChromeOS=a.isLinux=a.isWindows=a.isIphone=a.isIpad=a.isMac=a.getSafariVersion=a.isSafari=a.isLegacyEdge=a.isFirefox=a.isNode=void 0,a.isNode=typeof Qn<"u"&&"title"in Qn;const l=a.isNode?"node":navigator.userAgent,c=a.isNode?"node":navigator.platform;a.isFirefox=l.includes("Firefox"),a.isLegacyEdge=l.includes("Edge"),a.isSafari=/^((?!chrome|android).)*safari/i.test(l),a.getSafariVersion=function(){if(!a.isSafari)return 0;const u=l.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},a.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(c),a.isIpad=c==="iPad",a.isIphone=c==="iPhone",a.isWindows=["Windows","Win16","Win32","WinCE"].includes(c),a.isLinux=c.indexOf("Linux")>=0,a.isChromeOS=/\bCrOS\b/.test(l)},6106:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SortedList=void 0;let l=0;a.SortedList=class{constructor(c){this._getKey=c,this._array=[]}clear(){this._array.length=0}insert(c){this._array.length!==0?(l=this._search(this._getKey(c)),this._array.splice(l,0,c)):this._array.push(c)}delete(c){if(this._array.length===0)return!1;const u=this._getKey(c);if(u===void 0||(l=this._search(u),l===-1)||this._getKey(this._array[l])!==u)return!1;do if(this._array[l]===c)return this._array.splice(l,1),!0;while(++l<this._array.length&&this._getKey(this._array[l])===u);return!1}*getKeyIterator(c){if(this._array.length!==0&&(l=this._search(c),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===c))do yield this._array[l];while(++l<this._array.length&&this._getKey(this._array[l])===c)}forEachByKey(c,u){if(this._array.length!==0&&(l=this._search(c),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===c))do u(this._array[l]);while(++l<this._array.length&&this._getKey(this._array[l])===c)}values(){return[...this._array].values()}_search(c){let u=0,h=this._array.length-1;for(;h>=u;){let d=u+h>>1;const f=this._getKey(this._array[d]);if(f>c)h=d-1;else{if(!(f<c)){for(;d>0&&this._getKey(this._array[d-1])===c;)d--;return d}u=d+1}}return u}}},7226:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DebouncedIdleTask=a.IdleTaskQueue=a.PriorityTaskQueue=void 0;const c=l(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(f){this._tasks.push(f),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(f){this._idleCallback=void 0;let m=0,g=0,b=f.timeRemaining(),y=0;for(;this._i<this._tasks.length;){if(m=Date.now(),this._tasks[this._i]()||this._i++,m=Math.max(1,Date.now()-m),g=Math.max(m,g),y=f.timeRemaining(),1.5*g>y)return b-m<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(b-m))}ms`),void this._start();b=y}this.clear()}}class h extends u{_requestCallback(f){return setTimeout(()=>f(this._createDeadline(16)))}_cancelCallback(f){clearTimeout(f)}_createDeadline(f){const m=Date.now()+f;return{timeRemaining:()=>Math.max(0,m-Date.now())}}}a.PriorityTaskQueue=h,a.IdleTaskQueue=!c.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(d){return requestIdleCallback(d)}_cancelCallback(d){cancelIdleCallback(d)}}:h,a.DebouncedIdleTask=class{constructor(){this._queue=new a.IdleTaskQueue}set(d){this._queue.clear(),this._queue.enqueue(d)}flush(){this._queue.flush()}}},9282:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.updateWindowsModeWrappedState=void 0;const c=l(643);a.updateWindowsModeWrappedState=function(u){const h=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),d=h?.get(u.cols-1),f=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);f&&d&&(f.isWrapped=d[c.CHAR_DATA_CODE_INDEX]!==c.NULL_CELL_CODE&&d[c.CHAR_DATA_CODE_INDEX]!==c.WHITESPACE_CELL_CODE)}},3734:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ExtendedAttrs=a.AttributeData=void 0;class l{constructor(){this.fg=0,this.bg=0,this.extended=new c}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new l;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}a.AttributeData=l;class c{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,d=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=d}clone(){return new c(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}a.ExtendedAttrs=c},9092:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Buffer=a.MAX_BUFFER_SIZE=void 0;const c=l(6349),u=l(7226),h=l(3734),d=l(8437),f=l(4634),m=l(511),g=l(643),b=l(4863),y=l(7116);a.MAX_BUFFER_SIZE=4294967295,a.Buffer=class{constructor(v,x,w){this._hasScrollback=v,this._optionsService=x,this._bufferService=w,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=d.DEFAULT_ATTR_DATA.clone(),this.savedCharset=y.DEFAULT_CHARSET,this.markers=[],this._nullCell=m.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]),this._whitespaceCell=m.CellData.fromCharData([0,g.WHITESPACE_CELL_CHAR,g.WHITESPACE_CELL_WIDTH,g.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new u.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(v){return v?(this._nullCell.fg=v.fg,this._nullCell.bg=v.bg,this._nullCell.extended=v.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new h.ExtendedAttrs),this._nullCell}getWhitespaceCell(v){return v?(this._whitespaceCell.fg=v.fg,this._whitespaceCell.bg=v.bg,this._whitespaceCell.extended=v.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new h.ExtendedAttrs),this._whitespaceCell}getBlankLine(v,x){return new d.BufferLine(this._bufferService.cols,this.getNullCell(v),x)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const v=this.ybase+this.y-this.ydisp;return v>=0&&v<this._rows}_getCorrectBufferLength(v){if(!this._hasScrollback)return v;const x=v+this._optionsService.rawOptions.scrollback;return x>a.MAX_BUFFER_SIZE?a.MAX_BUFFER_SIZE:x}fillViewportRows(v){if(this.lines.length===0){v===void 0&&(v=d.DEFAULT_ATTR_DATA);let x=this._rows;for(;x--;)this.lines.push(this.getBlankLine(v))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(v,x){const w=this.getNullCell(d.DEFAULT_ATTR_DATA);let S=0;const E=this._getCorrectBufferLength(x);if(E>this.lines.maxLength&&(this.lines.maxLength=E),this.lines.length>0){if(this._cols<v)for(let _=0;_<this.lines.length;_++)S+=+this.lines.get(_).resize(v,w);let k=0;if(this._rows<x)for(let _=this._rows;_<x;_++)this.lines.length<x+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new d.BufferLine(v,w)):this.ybase>0&&this.lines.length<=this.ybase+this.y+k+1?(this.ybase--,k++,this.ydisp>0&&this.ydisp--):this.lines.push(new d.BufferLine(v,w)));else for(let _=this._rows;_>x;_--)this.lines.length>x+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(E<this.lines.maxLength){const _=this.lines.length-E;_>0&&(this.lines.trimStart(_),this.ybase=Math.max(this.ybase-_,0),this.ydisp=Math.max(this.ydisp-_,0),this.savedY=Math.max(this.savedY-_,0)),this.lines.maxLength=E}this.x=Math.min(this.x,v-1),this.y=Math.min(this.y,x-1),k&&(this.y+=k),this.savedX=Math.min(this.savedX,v-1),this.scrollTop=0}if(this.scrollBottom=x-1,this._isReflowEnabled&&(this._reflow(v,x),this._cols>v))for(let k=0;k<this.lines.length;k++)S+=+this.lines.get(k).resize(v,w);this._cols=v,this._rows=x,this._memoryCleanupQueue.clear(),S>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let v=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,v=!1);let x=0;for(;this._memoryCleanupPosition<this.lines.length;)if(x+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),x>100)return!0;return v}get _isReflowEnabled(){const v=this._optionsService.rawOptions.windowsPty;return v&&v.buildNumber?this._hasScrollback&&v.backend==="conpty"&&v.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(v,x){this._cols!==v&&(v>this._cols?this._reflowLarger(v,x):this._reflowSmaller(v,x))}_reflowLarger(v,x){const w=(0,f.reflowLargerGetLinesToRemove)(this.lines,this._cols,v,this.ybase+this.y,this.getNullCell(d.DEFAULT_ATTR_DATA));if(w.length>0){const S=(0,f.reflowLargerCreateNewLayout)(this.lines,w);(0,f.reflowLargerApplyNewLayout)(this.lines,S.layout),this._reflowLargerAdjustViewport(v,x,S.countRemoved)}}_reflowLargerAdjustViewport(v,x,w){const S=this.getNullCell(d.DEFAULT_ATTR_DATA);let E=w;for(;E-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<x&&this.lines.push(new d.BufferLine(v,S))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-w,0)}_reflowSmaller(v,x){const w=this.getNullCell(d.DEFAULT_ATTR_DATA),S=[];let E=0;for(let k=this.lines.length-1;k>=0;k--){let _=this.lines.get(k);if(!_||!_.isWrapped&&_.getTrimmedLength()<=v)continue;const L=[_];for(;_.isWrapped&&k>0;)_=this.lines.get(--k),L.unshift(_);const R=this.ybase+this.y;if(R>=k&&R<k+L.length)continue;const C=L[L.length-1].getTrimmedLength(),P=(0,f.reflowSmallerGetNewLineLengths)(L,this._cols,v),O=P.length-L.length;let N;N=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+O):Math.max(0,this.lines.length-this.lines.maxLength+O);const H=[];for(let Y=0;Y<O;Y++){const M=this.getBlankLine(d.DEFAULT_ATTR_DATA,!0);H.push(M)}H.length>0&&(S.push({start:k+L.length+E,newLines:H}),E+=H.length),L.push(...H);let Q=P.length-1,X=P[Q];X===0&&(Q--,X=P[Q]);let J=L.length-O-1,j=C;for(;J>=0;){const Y=Math.min(j,X);if(L[Q]===void 0)break;if(L[Q].copyCellsFrom(L[J],j-Y,X-Y,Y,!0),X-=Y,X===0&&(Q--,X=P[Q]),j-=Y,j===0){J--;const M=Math.max(J,0);j=(0,f.getWrappedLineTrimmedLength)(L,M,this._cols)}}for(let Y=0;Y<L.length;Y++)P[Y]<v&&L[Y].setCell(P[Y],w);let F=O-N;for(;F-- >0;)this.ybase===0?this.y<x-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+E)-x&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+O,this.ybase+x-1)}if(S.length>0){const k=[],_=[];for(let Q=0;Q<this.lines.length;Q++)_.push(this.lines.get(Q));const L=this.lines.length;let R=L-1,C=0,P=S[C];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+E);let O=0;for(let Q=Math.min(this.lines.maxLength-1,L+E-1);Q>=0;Q--)if(P&&P.start>R+O){for(let X=P.newLines.length-1;X>=0;X--)this.lines.set(Q--,P.newLines[X]);Q++,k.push({index:R+1,amount:P.newLines.length}),O+=P.newLines.length,P=S[++C]}else this.lines.set(Q,_[R--]);let N=0;for(let Q=k.length-1;Q>=0;Q--)k[Q].index+=N,this.lines.onInsertEmitter.fire(k[Q]),N+=k[Q].amount;const H=Math.max(0,L+E-this.lines.maxLength);H>0&&this.lines.onTrimEmitter.fire(H)}}translateBufferLineToString(v,x,w=0,S){const E=this.lines.get(v);return E?E.translateToString(x,w,S):""}getWrappedRangeForLine(v){let x=v,w=v;for(;x>0&&this.lines.get(x).isWrapped;)x--;for(;w+1<this.lines.length&&this.lines.get(w+1).isWrapped;)w++;return{first:x,last:w}}setupTabStops(v){for(v!=null?this.tabs[v]||(v=this.prevStop(v)):(this.tabs={},v=0);v<this._cols;v+=this._optionsService.rawOptions.tabStopWidth)this.tabs[v]=!0}prevStop(v){for(v==null&&(v=this.x);!this.tabs[--v]&&v>0;);return v>=this._cols?this._cols-1:v<0?0:v}nextStop(v){for(v==null&&(v=this.x);!this.tabs[++v]&&v<this._cols;);return v>=this._cols?this._cols-1:v<0?0:v}clearMarkers(v){this._isClearing=!0;for(let x=0;x<this.markers.length;x++)this.markers[x].line===v&&(this.markers[x].dispose(),this.markers.splice(x--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let v=0;v<this.markers.length;v++)this.markers[v].dispose(),this.markers.splice(v--,1);this._isClearing=!1}addMarker(v){const x=new b.Marker(v);return this.markers.push(x),x.register(this.lines.onTrim(w=>{x.line-=w,x.line<0&&x.dispose()})),x.register(this.lines.onInsert(w=>{x.line>=w.index&&(x.line+=w.amount)})),x.register(this.lines.onDelete(w=>{x.line>=w.index&&x.line<w.index+w.amount&&x.dispose(),x.line>w.index&&(x.line-=w.amount)})),x.register(x.onDispose(()=>this._removeMarker(x))),x}_removeMarker(v){this._isClearing||this.markers.splice(this.markers.indexOf(v),1)}}},8437:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLine=a.DEFAULT_ATTR_DATA=void 0;const c=l(3734),u=l(511),h=l(643),d=l(482);a.DEFAULT_ATTR_DATA=Object.freeze(new c.AttributeData);let f=0;class m{constructor(b,y,v=!1){this.isWrapped=v,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*b);const x=y||u.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]);for(let w=0;w<b;++w)this.setCell(w,x);this.length=b}get(b){const y=this._data[3*b+0],v=2097151&y;return[this._data[3*b+1],2097152&y?this._combined[b]:v?(0,d.stringFromCodePoint)(v):"",y>>22,2097152&y?this._combined[b].charCodeAt(this._combined[b].length-1):v]}set(b,y){this._data[3*b+1]=y[h.CHAR_DATA_ATTR_INDEX],y[h.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[b]=y[1],this._data[3*b+0]=2097152|b|y[h.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*b+0]=y[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|y[h.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(b){return this._data[3*b+0]>>22}hasWidth(b){return 12582912&this._data[3*b+0]}getFg(b){return this._data[3*b+1]}getBg(b){return this._data[3*b+2]}hasContent(b){return 4194303&this._data[3*b+0]}getCodePoint(b){const y=this._data[3*b+0];return 2097152&y?this._combined[b].charCodeAt(this._combined[b].length-1):2097151&y}isCombined(b){return 2097152&this._data[3*b+0]}getString(b){const y=this._data[3*b+0];return 2097152&y?this._combined[b]:2097151&y?(0,d.stringFromCodePoint)(2097151&y):""}isProtected(b){return 536870912&this._data[3*b+2]}loadCell(b,y){return f=3*b,y.content=this._data[f+0],y.fg=this._data[f+1],y.bg=this._data[f+2],2097152&y.content&&(y.combinedData=this._combined[b]),268435456&y.bg&&(y.extended=this._extendedAttrs[b]),y}setCell(b,y){2097152&y.content&&(this._combined[b]=y.combinedData),268435456&y.bg&&(this._extendedAttrs[b]=y.extended),this._data[3*b+0]=y.content,this._data[3*b+1]=y.fg,this._data[3*b+2]=y.bg}setCellFromCodepoint(b,y,v,x){268435456&x.bg&&(this._extendedAttrs[b]=x.extended),this._data[3*b+0]=y|v<<22,this._data[3*b+1]=x.fg,this._data[3*b+2]=x.bg}addCodepointToCell(b,y,v){let x=this._data[3*b+0];2097152&x?this._combined[b]+=(0,d.stringFromCodePoint)(y):2097151&x?(this._combined[b]=(0,d.stringFromCodePoint)(2097151&x)+(0,d.stringFromCodePoint)(y),x&=-2097152,x|=2097152):x=y|4194304,v&&(x&=-12582913,x|=v<<22),this._data[3*b+0]=x}insertCells(b,y,v){if((b%=this.length)&&this.getWidth(b-1)===2&&this.setCellFromCodepoint(b-1,0,1,v),y<this.length-b){const x=new u.CellData;for(let w=this.length-b-y-1;w>=0;--w)this.setCell(b+y+w,this.loadCell(b+w,x));for(let w=0;w<y;++w)this.setCell(b+w,v)}else for(let x=b;x<this.length;++x)this.setCell(x,v);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,v)}deleteCells(b,y,v){if(b%=this.length,y<this.length-b){const x=new u.CellData;for(let w=0;w<this.length-b-y;++w)this.setCell(b+w,this.loadCell(b+y+w,x));for(let w=this.length-y;w<this.length;++w)this.setCell(w,v)}else for(let x=b;x<this.length;++x)this.setCell(x,v);b&&this.getWidth(b-1)===2&&this.setCellFromCodepoint(b-1,0,1,v),this.getWidth(b)!==0||this.hasContent(b)||this.setCellFromCodepoint(b,0,1,v)}replaceCells(b,y,v,x=!1){if(x)for(b&&this.getWidth(b-1)===2&&!this.isProtected(b-1)&&this.setCellFromCodepoint(b-1,0,1,v),y<this.length&&this.getWidth(y-1)===2&&!this.isProtected(y)&&this.setCellFromCodepoint(y,0,1,v);b<y&&b<this.length;)this.isProtected(b)||this.setCell(b,v),b++;else for(b&&this.getWidth(b-1)===2&&this.setCellFromCodepoint(b-1,0,1,v),y<this.length&&this.getWidth(y-1)===2&&this.setCellFromCodepoint(y,0,1,v);b<y&&b<this.length;)this.setCell(b++,v)}resize(b,y){if(b===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const v=3*b;if(b>this.length){if(this._data.buffer.byteLength>=4*v)this._data=new Uint32Array(this._data.buffer,0,v);else{const x=new Uint32Array(v);x.set(this._data),this._data=x}for(let x=this.length;x<b;++x)this.setCell(x,y)}else{this._data=this._data.subarray(0,v);const x=Object.keys(this._combined);for(let S=0;S<x.length;S++){const E=parseInt(x[S],10);E>=b&&delete this._combined[E]}const w=Object.keys(this._extendedAttrs);for(let S=0;S<w.length;S++){const E=parseInt(w[S],10);E>=b&&delete this._extendedAttrs[E]}}return this.length=b,4*v*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const b=new Uint32Array(this._data.length);return b.set(this._data),this._data=b,1}return 0}fill(b,y=!1){if(y)for(let v=0;v<this.length;++v)this.isProtected(v)||this.setCell(v,b);else{this._combined={},this._extendedAttrs={};for(let v=0;v<this.length;++v)this.setCell(v,b)}}copyFrom(b){this.length!==b.length?this._data=new Uint32Array(b._data):this._data.set(b._data),this.length=b.length,this._combined={};for(const y in b._combined)this._combined[y]=b._combined[y];this._extendedAttrs={};for(const y in b._extendedAttrs)this._extendedAttrs[y]=b._extendedAttrs[y];this.isWrapped=b.isWrapped}clone(){const b=new m(0);b._data=new Uint32Array(this._data),b.length=this.length;for(const y in this._combined)b._combined[y]=this._combined[y];for(const y in this._extendedAttrs)b._extendedAttrs[y]=this._extendedAttrs[y];return b.isWrapped=this.isWrapped,b}getTrimmedLength(){for(let b=this.length-1;b>=0;--b)if(4194303&this._data[3*b+0])return b+(this._data[3*b+0]>>22);return 0}getNoBgTrimmedLength(){for(let b=this.length-1;b>=0;--b)if(4194303&this._data[3*b+0]||50331648&this._data[3*b+2])return b+(this._data[3*b+0]>>22);return 0}copyCellsFrom(b,y,v,x,w){const S=b._data;if(w)for(let k=x-1;k>=0;k--){for(let _=0;_<3;_++)this._data[3*(v+k)+_]=S[3*(y+k)+_];268435456&S[3*(y+k)+2]&&(this._extendedAttrs[v+k]=b._extendedAttrs[y+k])}else for(let k=0;k<x;k++){for(let _=0;_<3;_++)this._data[3*(v+k)+_]=S[3*(y+k)+_];268435456&S[3*(y+k)+2]&&(this._extendedAttrs[v+k]=b._extendedAttrs[y+k])}const E=Object.keys(b._combined);for(let k=0;k<E.length;k++){const _=parseInt(E[k],10);_>=y&&(this._combined[_-y+v]=b._combined[_])}}translateToString(b,y,v,x){y=y??0,v=v??this.length,b&&(v=Math.min(v,this.getTrimmedLength())),x&&(x.length=0);let w="";for(;y<v;){const S=this._data[3*y+0],E=2097151&S,k=2097152&S?this._combined[y]:E?(0,d.stringFromCodePoint)(E):h.WHITESPACE_CELL_CHAR;if(w+=k,x)for(let _=0;_<k.length;++_)x.push(y);y+=S>>22||1}return x&&x.push(y),w}}a.BufferLine=m},4841:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getRangeLength=void 0,a.getRangeLength=function(l,c){if(l.start.y>l.end.y)throw new Error(`Buffer range end (${l.end.x}, ${l.end.y}) cannot be before start (${l.start.x}, ${l.start.y})`);return c*(l.end.y-l.start.y)+(l.end.x-l.start.x+1)}},4634:(o,a)=>{function l(c,u,h){if(u===c.length-1)return c[u].getTrimmedLength();const d=!c[u].hasContent(h-1)&&c[u].getWidth(h-1)===1,f=c[u+1].getWidth(0)===2;return d&&f?h-1:h}Object.defineProperty(a,"__esModule",{value:!0}),a.getWrappedLineTrimmedLength=a.reflowSmallerGetNewLineLengths=a.reflowLargerApplyNewLayout=a.reflowLargerCreateNewLayout=a.reflowLargerGetLinesToRemove=void 0,a.reflowLargerGetLinesToRemove=function(c,u,h,d,f){const m=[];for(let g=0;g<c.length-1;g++){let b=g,y=c.get(++b);if(!y.isWrapped)continue;const v=[c.get(g)];for(;b<c.length&&y.isWrapped;)v.push(y),y=c.get(++b);if(d>=g&&d<b){g+=v.length-1;continue}let x=0,w=l(v,x,u),S=1,E=0;for(;S<v.length;){const _=l(v,S,u),L=_-E,R=h-w,C=Math.min(L,R);v[x].copyCellsFrom(v[S],E,w,C,!1),w+=C,w===h&&(x++,w=0),E+=C,E===_&&(S++,E=0),w===0&&x!==0&&v[x-1].getWidth(h-1)===2&&(v[x].copyCellsFrom(v[x-1],h-1,w++,1,!1),v[x-1].setCell(h-1,f))}v[x].replaceCells(w,h,f);let k=0;for(let _=v.length-1;_>0&&(_>x||v[_].getTrimmedLength()===0);_--)k++;k>0&&(m.push(g+v.length-k),m.push(k)),g+=v.length-1}return m},a.reflowLargerCreateNewLayout=function(c,u){const h=[];let d=0,f=u[d],m=0;for(let g=0;g<c.length;g++)if(f===g){const b=u[++d];c.onDeleteEmitter.fire({index:g-m,amount:b}),g+=b-1,m+=b,f=u[++d]}else h.push(g);return{layout:h,countRemoved:m}},a.reflowLargerApplyNewLayout=function(c,u){const h=[];for(let d=0;d<u.length;d++)h.push(c.get(u[d]));for(let d=0;d<h.length;d++)c.set(d,h[d]);c.length=u.length},a.reflowSmallerGetNewLineLengths=function(c,u,h){const d=[],f=c.map((y,v)=>l(c,v,u)).reduce((y,v)=>y+v);let m=0,g=0,b=0;for(;b<f;){if(f-b<h){d.push(f-b);break}m+=h;const y=l(c,g,u);m>y&&(m-=y,g++);const v=c[g].getWidth(m-1)===2;v&&m--;const x=v?h-1:h;d.push(x),b+=x}return d},a.getWrappedLineTrimmedLength=l},5295:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferSet=void 0;const c=l(8460),u=l(844),h=l(9092);class d extends u.Disposable{constructor(m,g){super(),this._optionsService=m,this._bufferService=g,this._onBufferActivate=this.register(new c.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new h.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new h.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(m){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(m),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(m,g){this._normal.resize(m,g),this._alt.resize(m,g),this.setupTabStops(m)}setupTabStops(m){this._normal.setupTabStops(m),this._alt.setupTabStops(m)}}a.BufferSet=d},511:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CellData=void 0;const c=l(482),u=l(643),h=l(3734);class d extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(m){const g=new d;return g.setFromCharData(m),g}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,c.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(m){this.fg=m[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let g=!1;if(m[u.CHAR_DATA_CHAR_INDEX].length>2)g=!0;else if(m[u.CHAR_DATA_CHAR_INDEX].length===2){const b=m[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=b&&b<=56319){const y=m[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=y&&y<=57343?this.content=1024*(b-55296)+y-56320+65536|m[u.CHAR_DATA_WIDTH_INDEX]<<22:g=!0}else g=!0}else this.content=m[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|m[u.CHAR_DATA_WIDTH_INDEX]<<22;g&&(this.combinedData=m[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|m[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.CellData=d},643:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WHITESPACE_CELL_CODE=a.WHITESPACE_CELL_WIDTH=a.WHITESPACE_CELL_CHAR=a.NULL_CELL_CODE=a.NULL_CELL_WIDTH=a.NULL_CELL_CHAR=a.CHAR_DATA_CODE_INDEX=a.CHAR_DATA_WIDTH_INDEX=a.CHAR_DATA_CHAR_INDEX=a.CHAR_DATA_ATTR_INDEX=a.DEFAULT_EXT=a.DEFAULT_ATTR=a.DEFAULT_COLOR=void 0,a.DEFAULT_COLOR=0,a.DEFAULT_ATTR=256|a.DEFAULT_COLOR<<9,a.DEFAULT_EXT=0,a.CHAR_DATA_ATTR_INDEX=0,a.CHAR_DATA_CHAR_INDEX=1,a.CHAR_DATA_WIDTH_INDEX=2,a.CHAR_DATA_CODE_INDEX=3,a.NULL_CELL_CHAR="",a.NULL_CELL_WIDTH=1,a.NULL_CELL_CODE=0,a.WHITESPACE_CELL_CHAR=" ",a.WHITESPACE_CELL_WIDTH=1,a.WHITESPACE_CELL_CODE=32},4863:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Marker=void 0;const c=l(8460),u=l(844);class h{get id(){return this._id}constructor(f){this.line=f,this.isDisposed=!1,this._disposables=[],this._id=h._nextId++,this._onDispose=this.register(new c.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(f){return this._disposables.push(f),f}}a.Marker=h,h._nextId=1},7116:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DEFAULT_CHARSET=a.CHARSETS=void 0,a.CHARSETS={},a.DEFAULT_CHARSET=a.CHARSETS.B,a.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},a.CHARSETS.A={"#":""},a.CHARSETS.B=void 0,a.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},a.CHARSETS.C=a.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},a.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},a.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.E=a.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},a.CHARSETS.H=a.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(o,a)=>{var l,c,u;Object.defineProperty(a,"__esModule",{value:!0}),a.C1_ESCAPED=a.C1=a.C0=void 0,function(h){h.NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="\x1B",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL=""}(l||(a.C0=l={})),function(h){h.PAD="",h.HOP="",h.BPH="",h.NBH="",h.IND="",h.NEL="",h.SSA="",h.ESA="",h.HTS="",h.HTJ="",h.VTS="",h.PLD="",h.PLU="",h.RI="",h.SS2="",h.SS3="",h.DCS="",h.PU1="",h.PU2="",h.STS="",h.CCH="",h.MW="",h.SPA="",h.EPA="",h.SOS="",h.SGCI="",h.SCI="",h.CSI="",h.ST="",h.OSC="",h.PM="",h.APC=""}(c||(a.C1=c={})),function(h){h.ST=`${l.ESC}\\`}(u||(a.C1_ESCAPED=u={}))},7399:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.evaluateKeyboardEvent=void 0;const c=l(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};a.evaluateKeyboardEvent=function(h,d,f,m){const g={type:0,cancel:!1,key:void 0},b=(h.shiftKey?1:0)|(h.altKey?2:0)|(h.ctrlKey?4:0)|(h.metaKey?8:0);switch(h.keyCode){case 0:h.key==="UIKeyInputUpArrow"?g.key=d?c.C0.ESC+"OA":c.C0.ESC+"[A":h.key==="UIKeyInputLeftArrow"?g.key=d?c.C0.ESC+"OD":c.C0.ESC+"[D":h.key==="UIKeyInputRightArrow"?g.key=d?c.C0.ESC+"OC":c.C0.ESC+"[C":h.key==="UIKeyInputDownArrow"&&(g.key=d?c.C0.ESC+"OB":c.C0.ESC+"[B");break;case 8:g.key=h.ctrlKey?"\b":c.C0.DEL,h.altKey&&(g.key=c.C0.ESC+g.key);break;case 9:if(h.shiftKey){g.key=c.C0.ESC+"[Z";break}g.key=c.C0.HT,g.cancel=!0;break;case 13:g.key=h.altKey?c.C0.ESC+c.C0.CR:c.C0.CR,g.cancel=!0;break;case 27:g.key=c.C0.ESC,h.altKey&&(g.key=c.C0.ESC+c.C0.ESC),g.cancel=!0;break;case 37:if(h.metaKey)break;b?(g.key=c.C0.ESC+"[1;"+(b+1)+"D",g.key===c.C0.ESC+"[1;3D"&&(g.key=c.C0.ESC+(f?"b":"[1;5D"))):g.key=d?c.C0.ESC+"OD":c.C0.ESC+"[D";break;case 39:if(h.metaKey)break;b?(g.key=c.C0.ESC+"[1;"+(b+1)+"C",g.key===c.C0.ESC+"[1;3C"&&(g.key=c.C0.ESC+(f?"f":"[1;5C"))):g.key=d?c.C0.ESC+"OC":c.C0.ESC+"[C";break;case 38:if(h.metaKey)break;b?(g.key=c.C0.ESC+"[1;"+(b+1)+"A",f||g.key!==c.C0.ESC+"[1;3A"||(g.key=c.C0.ESC+"[1;5A")):g.key=d?c.C0.ESC+"OA":c.C0.ESC+"[A";break;case 40:if(h.metaKey)break;b?(g.key=c.C0.ESC+"[1;"+(b+1)+"B",f||g.key!==c.C0.ESC+"[1;3B"||(g.key=c.C0.ESC+"[1;5B")):g.key=d?c.C0.ESC+"OB":c.C0.ESC+"[B";break;case 45:h.shiftKey||h.ctrlKey||(g.key=c.C0.ESC+"[2~");break;case 46:g.key=b?c.C0.ESC+"[3;"+(b+1)+"~":c.C0.ESC+"[3~";break;case 36:g.key=b?c.C0.ESC+"[1;"+(b+1)+"H":d?c.C0.ESC+"OH":c.C0.ESC+"[H";break;case 35:g.key=b?c.C0.ESC+"[1;"+(b+1)+"F":d?c.C0.ESC+"OF":c.C0.ESC+"[F";break;case 33:h.shiftKey?g.type=2:h.ctrlKey?g.key=c.C0.ESC+"[5;"+(b+1)+"~":g.key=c.C0.ESC+"[5~";break;case 34:h.shiftKey?g.type=3:h.ctrlKey?g.key=c.C0.ESC+"[6;"+(b+1)+"~":g.key=c.C0.ESC+"[6~";break;case 112:g.key=b?c.C0.ESC+"[1;"+(b+1)+"P":c.C0.ESC+"OP";break;case 113:g.key=b?c.C0.ESC+"[1;"+(b+1)+"Q":c.C0.ESC+"OQ";break;case 114:g.key=b?c.C0.ESC+"[1;"+(b+1)+"R":c.C0.ESC+"OR";break;case 115:g.key=b?c.C0.ESC+"[1;"+(b+1)+"S":c.C0.ESC+"OS";break;case 116:g.key=b?c.C0.ESC+"[15;"+(b+1)+"~":c.C0.ESC+"[15~";break;case 117:g.key=b?c.C0.ESC+"[17;"+(b+1)+"~":c.C0.ESC+"[17~";break;case 118:g.key=b?c.C0.ESC+"[18;"+(b+1)+"~":c.C0.ESC+"[18~";break;case 119:g.key=b?c.C0.ESC+"[19;"+(b+1)+"~":c.C0.ESC+"[19~";break;case 120:g.key=b?c.C0.ESC+"[20;"+(b+1)+"~":c.C0.ESC+"[20~";break;case 121:g.key=b?c.C0.ESC+"[21;"+(b+1)+"~":c.C0.ESC+"[21~";break;case 122:g.key=b?c.C0.ESC+"[23;"+(b+1)+"~":c.C0.ESC+"[23~";break;case 123:g.key=b?c.C0.ESC+"[24;"+(b+1)+"~":c.C0.ESC+"[24~";break;default:if(!h.ctrlKey||h.shiftKey||h.altKey||h.metaKey)if(f&&!m||!h.altKey||h.metaKey)!f||h.altKey||h.ctrlKey||h.shiftKey||!h.metaKey?h.key&&!h.ctrlKey&&!h.altKey&&!h.metaKey&&h.keyCode>=48&&h.key.length===1?g.key=h.key:h.key&&h.ctrlKey&&(h.key==="_"&&(g.key=c.C0.US),h.key==="@"&&(g.key=c.C0.NUL)):h.keyCode===65&&(g.type=1);else{const y=u[h.keyCode],v=y?.[h.shiftKey?1:0];if(v)g.key=c.C0.ESC+v;else if(h.keyCode>=65&&h.keyCode<=90){const x=h.ctrlKey?h.keyCode-64:h.keyCode+32;let w=String.fromCharCode(x);h.shiftKey&&(w=w.toUpperCase()),g.key=c.C0.ESC+w}else if(h.keyCode===32)g.key=c.C0.ESC+(h.ctrlKey?c.C0.NUL:" ");else if(h.key==="Dead"&&h.code.startsWith("Key")){let x=h.code.slice(3,4);h.shiftKey||(x=x.toLowerCase()),g.key=c.C0.ESC+x,g.cancel=!0}}else h.keyCode>=65&&h.keyCode<=90?g.key=String.fromCharCode(h.keyCode-64):h.keyCode===32?g.key=c.C0.NUL:h.keyCode>=51&&h.keyCode<=55?g.key=String.fromCharCode(h.keyCode-51+27):h.keyCode===56?g.key=c.C0.DEL:h.keyCode===219?g.key=c.C0.ESC:h.keyCode===220?g.key=c.C0.FS:h.keyCode===221&&(g.key=c.C0.GS)}return g}},482:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Utf8ToUtf32=a.StringToUtf32=a.utf32ToString=a.stringFromCodePoint=void 0,a.stringFromCodePoint=function(l){return l>65535?(l-=65536,String.fromCharCode(55296+(l>>10))+String.fromCharCode(l%1024+56320)):String.fromCharCode(l)},a.utf32ToString=function(l,c=0,u=l.length){let h="";for(let d=c;d<u;++d){let f=l[d];f>65535?(f-=65536,h+=String.fromCharCode(55296+(f>>10))+String.fromCharCode(f%1024+56320)):h+=String.fromCharCode(f)}return h},a.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(l,c){const u=l.length;if(!u)return 0;let h=0,d=0;if(this._interim){const f=l.charCodeAt(d++);56320<=f&&f<=57343?c[h++]=1024*(this._interim-55296)+f-56320+65536:(c[h++]=this._interim,c[h++]=f),this._interim=0}for(let f=d;f<u;++f){const m=l.charCodeAt(f);if(55296<=m&&m<=56319){if(++f>=u)return this._interim=m,h;const g=l.charCodeAt(f);56320<=g&&g<=57343?c[h++]=1024*(m-55296)+g-56320+65536:(c[h++]=m,c[h++]=g)}else m!==65279&&(c[h++]=m)}return h}},a.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(l,c){const u=l.length;if(!u)return 0;let h,d,f,m,g=0,b=0,y=0;if(this.interim[0]){let w=!1,S=this.interim[0];S&=(224&S)==192?31:(240&S)==224?15:7;let E,k=0;for(;(E=63&this.interim[++k])&&k<4;)S<<=6,S|=E;const _=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,L=_-k;for(;y<L;){if(y>=u)return 0;if(E=l[y++],(192&E)!=128){y--,w=!0;break}this.interim[k++]=E,S<<=6,S|=63&E}w||(_===2?S<128?y--:c[g++]=S:_===3?S<2048||S>=55296&&S<=57343||S===65279||(c[g++]=S):S<65536||S>1114111||(c[g++]=S)),this.interim.fill(0)}const v=u-4;let x=y;for(;x<u;){for(;!(!(x<v)||128&(h=l[x])||128&(d=l[x+1])||128&(f=l[x+2])||128&(m=l[x+3]));)c[g++]=h,c[g++]=d,c[g++]=f,c[g++]=m,x+=4;if(h=l[x++],h<128)c[g++]=h;else if((224&h)==192){if(x>=u)return this.interim[0]=h,g;if(d=l[x++],(192&d)!=128){x--;continue}if(b=(31&h)<<6|63&d,b<128){x--;continue}c[g++]=b}else if((240&h)==224){if(x>=u)return this.interim[0]=h,g;if(d=l[x++],(192&d)!=128){x--;continue}if(x>=u)return this.interim[0]=h,this.interim[1]=d,g;if(f=l[x++],(192&f)!=128){x--;continue}if(b=(15&h)<<12|(63&d)<<6|63&f,b<2048||b>=55296&&b<=57343||b===65279)continue;c[g++]=b}else if((248&h)==240){if(x>=u)return this.interim[0]=h,g;if(d=l[x++],(192&d)!=128){x--;continue}if(x>=u)return this.interim[0]=h,this.interim[1]=d,g;if(f=l[x++],(192&f)!=128){x--;continue}if(x>=u)return this.interim[0]=h,this.interim[1]=d,this.interim[2]=f,g;if(m=l[x++],(192&m)!=128){x--;continue}if(b=(7&h)<<18|(63&d)<<12|(63&f)<<6|63&m,b<65536||b>1114111)continue;c[g++]=b}}return g}}},225:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeV6=void 0;const c=l(1480),u=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let d;a.UnicodeV6=class{constructor(){if(this.version="6",!d){d=new Uint8Array(65536),d.fill(1),d[0]=0,d.fill(0,1,32),d.fill(0,127,160),d.fill(2,4352,4448),d[9001]=2,d[9002]=2,d.fill(2,11904,42192),d[12351]=1,d.fill(2,44032,55204),d.fill(2,63744,64256),d.fill(2,65040,65050),d.fill(2,65072,65136),d.fill(2,65280,65377),d.fill(2,65504,65511);for(let f=0;f<u.length;++f)d.fill(0,u[f][0],u[f][1]+1)}}wcwidth(f){return f<32?0:f<127?1:f<65536?d[f]:function(m,g){let b,y=0,v=g.length-1;if(m<g[0][0]||m>g[v][1])return!1;for(;v>=y;)if(b=y+v>>1,m>g[b][1])y=b+1;else{if(!(m<g[b][0]))return!0;v=b-1}return!1}(f,h)?0:f>=131072&&f<=196605||f>=196608&&f<=262141?2:1}charProperties(f,m){let g=this.wcwidth(f),b=g===0&&m!==0;if(b){const y=c.UnicodeService.extractWidth(m);y===0?b=!1:y>g&&(g=y)}return c.UnicodeService.createPropertyValue(0,g,b)}}},5981:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WriteBuffer=void 0;const c=l(8460),u=l(844);class h extends u.Disposable{constructor(f){super(),this._action=f,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(f,m){if(m!==void 0&&this._syncCalls>m)return void(this._syncCalls=0);if(this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let g;for(this._isSyncWriting=!0;g=this._writeBuffer.shift();){this._action(g);const b=this._callbacks.shift();b&&b()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(f,m){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(m),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(m)}_innerWrite(f=0,m=!0){const g=f||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const b=this._writeBuffer[this._bufferOffset],y=this._action(b,m);if(y){const x=w=>Date.now()-g>=12?setTimeout(()=>this._innerWrite(0,w)):this._innerWrite(g,w);return void y.catch(w=>(queueMicrotask(()=>{throw w}),Promise.resolve(!1))).then(x)}const v=this._callbacks[this._bufferOffset];if(v&&v(),this._bufferOffset++,this._pendingData-=b.length,Date.now()-g>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}a.WriteBuffer=h},5941:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.toRgbString=a.parseColor=void 0;const l=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,c=/^[\da-f]+$/;function u(h,d){const f=h.toString(16),m=f.length<2?"0"+f:f;switch(d){case 4:return f[0];case 8:return m;case 12:return(m+m).slice(0,3);default:return m+m}}a.parseColor=function(h){if(!h)return;let d=h.toLowerCase();if(d.indexOf("rgb:")===0){d=d.slice(4);const f=l.exec(d);if(f){const m=f[1]?15:f[4]?255:f[7]?4095:65535;return[Math.round(parseInt(f[1]||f[4]||f[7]||f[10],16)/m*255),Math.round(parseInt(f[2]||f[5]||f[8]||f[11],16)/m*255),Math.round(parseInt(f[3]||f[6]||f[9]||f[12],16)/m*255)]}}else if(d.indexOf("#")===0&&(d=d.slice(1),c.exec(d)&&[3,6,9,12].includes(d.length))){const f=d.length/3,m=[0,0,0];for(let g=0;g<3;++g){const b=parseInt(d.slice(f*g,f*g+f),16);m[g]=f===1?b<<4:f===2?b:f===3?b>>4:b>>8}return m}},a.toRgbString=function(h,d=16){const[f,m,g]=h;return`rgb:${u(f,d)}/${u(m,d)}/${u(g,d)}`}},5770:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PAYLOAD_LIMIT=void 0,a.PAYLOAD_LIMIT=1e7},6351:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DcsHandler=a.DcsParser=void 0;const c=l(482),u=l(8742),h=l(5770),d=[];a.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=d,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=d}registerHandler(m,g){this._handlers[m]===void 0&&(this._handlers[m]=[]);const b=this._handlers[m];return b.push(g),{dispose:()=>{const y=b.indexOf(g);y!==-1&&b.splice(y,1)}}}clearHandler(m){this._handlers[m]&&delete this._handlers[m]}setHandlerFallback(m){this._handlerFb=m}reset(){if(this._active.length)for(let m=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;m>=0;--m)this._active[m].unhook(!1);this._stack.paused=!1,this._active=d,this._ident=0}hook(m,g){if(this.reset(),this._ident=m,this._active=this._handlers[m]||d,this._active.length)for(let b=this._active.length-1;b>=0;b--)this._active[b].hook(g);else this._handlerFb(this._ident,"HOOK",g)}put(m,g,b){if(this._active.length)for(let y=this._active.length-1;y>=0;y--)this._active[y].put(m,g,b);else this._handlerFb(this._ident,"PUT",(0,c.utf32ToString)(m,g,b))}unhook(m,g=!0){if(this._active.length){let b=!1,y=this._active.length-1,v=!1;if(this._stack.paused&&(y=this._stack.loopPosition-1,b=g,v=this._stack.fallThrough,this._stack.paused=!1),!v&&b===!1){for(;y>=0&&(b=this._active[y].unhook(m),b!==!0);y--)if(b instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!1,b;y--}for(;y>=0;y--)if(b=this._active[y].unhook(!1),b instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!0,b}else this._handlerFb(this._ident,"UNHOOK",m);this._active=d,this._ident=0}};const f=new u.Params;f.addParam(0),a.DcsHandler=class{constructor(m){this._handler=m,this._data="",this._params=f,this._hitLimit=!1}hook(m){this._params=m.length>1||m.params[0]?m.clone():f,this._data="",this._hitLimit=!1}put(m,g,b){this._hitLimit||(this._data+=(0,c.utf32ToString)(m,g,b),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(m){let g=!1;if(this._hitLimit)g=!1;else if(m&&(g=this._handler(this._data,this._params),g instanceof Promise))return g.then(b=>(this._params=f,this._data="",this._hitLimit=!1,b));return this._params=f,this._data="",this._hitLimit=!1,g}}},2015:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.EscapeSequenceParser=a.VT500_TRANSITION_TABLE=a.TransitionTable=void 0;const c=l(844),u=l(8742),h=l(6242),d=l(6351);class f{constructor(y){this.table=new Uint8Array(y)}setDefault(y,v){this.table.fill(y<<4|v)}add(y,v,x,w){this.table[v<<8|y]=x<<4|w}addMany(y,v,x,w){for(let S=0;S<y.length;S++)this.table[v<<8|y[S]]=x<<4|w}}a.TransitionTable=f;const m=160;a.VT500_TRANSITION_TABLE=function(){const b=new f(4095),y=Array.apply(null,Array(256)).map((k,_)=>_),v=(k,_)=>y.slice(k,_),x=v(32,127),w=v(0,24);w.push(25),w.push.apply(w,v(28,32));const S=v(0,14);let E;for(E in b.setDefault(1,0),b.addMany(x,0,2,0),S)b.addMany([24,26,153,154],E,3,0),b.addMany(v(128,144),E,3,0),b.addMany(v(144,152),E,3,0),b.add(156,E,0,0),b.add(27,E,11,1),b.add(157,E,4,8),b.addMany([152,158,159],E,0,7),b.add(155,E,11,3),b.add(144,E,11,9);return b.addMany(w,0,3,0),b.addMany(w,1,3,1),b.add(127,1,0,1),b.addMany(w,8,0,8),b.addMany(w,3,3,3),b.add(127,3,0,3),b.addMany(w,4,3,4),b.add(127,4,0,4),b.addMany(w,6,3,6),b.addMany(w,5,3,5),b.add(127,5,0,5),b.addMany(w,2,3,2),b.add(127,2,0,2),b.add(93,1,4,8),b.addMany(x,8,5,8),b.add(127,8,5,8),b.addMany([156,27,24,26,7],8,6,0),b.addMany(v(28,32),8,0,8),b.addMany([88,94,95],1,0,7),b.addMany(x,7,0,7),b.addMany(w,7,0,7),b.add(156,7,0,0),b.add(127,7,0,7),b.add(91,1,11,3),b.addMany(v(64,127),3,7,0),b.addMany(v(48,60),3,8,4),b.addMany([60,61,62,63],3,9,4),b.addMany(v(48,60),4,8,4),b.addMany(v(64,127),4,7,0),b.addMany([60,61,62,63],4,0,6),b.addMany(v(32,64),6,0,6),b.add(127,6,0,6),b.addMany(v(64,127),6,0,0),b.addMany(v(32,48),3,9,5),b.addMany(v(32,48),5,9,5),b.addMany(v(48,64),5,0,6),b.addMany(v(64,127),5,7,0),b.addMany(v(32,48),4,9,5),b.addMany(v(32,48),1,9,2),b.addMany(v(32,48),2,9,2),b.addMany(v(48,127),2,10,0),b.addMany(v(48,80),1,10,0),b.addMany(v(81,88),1,10,0),b.addMany([89,90,92],1,10,0),b.addMany(v(96,127),1,10,0),b.add(80,1,11,9),b.addMany(w,9,0,9),b.add(127,9,0,9),b.addMany(v(28,32),9,0,9),b.addMany(v(32,48),9,9,12),b.addMany(v(48,60),9,8,10),b.addMany([60,61,62,63],9,9,10),b.addMany(w,11,0,11),b.addMany(v(32,128),11,0,11),b.addMany(v(28,32),11,0,11),b.addMany(w,10,0,10),b.add(127,10,0,10),b.addMany(v(28,32),10,0,10),b.addMany(v(48,60),10,8,10),b.addMany([60,61,62,63],10,0,11),b.addMany(v(32,48),10,9,12),b.addMany(w,12,0,12),b.add(127,12,0,12),b.addMany(v(28,32),12,0,12),b.addMany(v(32,48),12,9,12),b.addMany(v(48,64),12,0,11),b.addMany(v(64,127),12,12,13),b.addMany(v(64,127),10,12,13),b.addMany(v(64,127),9,12,13),b.addMany(w,13,13,13),b.addMany(x,13,13,13),b.add(127,13,0,13),b.addMany([27,156,24,26],13,14,0),b.add(m,0,2,0),b.add(m,8,5,8),b.add(m,6,0,6),b.add(m,11,0,11),b.add(m,13,13,13),b}();class g extends c.Disposable{constructor(y=a.VT500_TRANSITION_TABLE){super(),this._transitions=y,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(v,x,w)=>{},this._executeHandlerFb=v=>{},this._csiHandlerFb=(v,x)=>{},this._escHandlerFb=v=>{},this._errorHandlerFb=v=>v,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,c.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new h.OscParser),this._dcsParser=this.register(new d.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(y,v=[64,126]){let x=0;if(y.prefix){if(y.prefix.length>1)throw new Error("only one byte as prefix supported");if(x=y.prefix.charCodeAt(0),x&&60>x||x>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(y.intermediates){if(y.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let S=0;S<y.intermediates.length;++S){const E=y.intermediates.charCodeAt(S);if(32>E||E>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");x<<=8,x|=E}}if(y.final.length!==1)throw new Error("final must be a single byte");const w=y.final.charCodeAt(0);if(v[0]>w||w>v[1])throw new Error(`final must be in range ${v[0]} .. ${v[1]}`);return x<<=8,x|=w,x}identToString(y){const v=[];for(;y;)v.push(String.fromCharCode(255&y)),y>>=8;return v.reverse().join("")}setPrintHandler(y){this._printHandler=y}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(y,v){const x=this._identifier(y,[48,126]);this._escHandlers[x]===void 0&&(this._escHandlers[x]=[]);const w=this._escHandlers[x];return w.push(v),{dispose:()=>{const S=w.indexOf(v);S!==-1&&w.splice(S,1)}}}clearEscHandler(y){this._escHandlers[this._identifier(y,[48,126])]&&delete this._escHandlers[this._identifier(y,[48,126])]}setEscHandlerFallback(y){this._escHandlerFb=y}setExecuteHandler(y,v){this._executeHandlers[y.charCodeAt(0)]=v}clearExecuteHandler(y){this._executeHandlers[y.charCodeAt(0)]&&delete this._executeHandlers[y.charCodeAt(0)]}setExecuteHandlerFallback(y){this._executeHandlerFb=y}registerCsiHandler(y,v){const x=this._identifier(y);this._csiHandlers[x]===void 0&&(this._csiHandlers[x]=[]);const w=this._csiHandlers[x];return w.push(v),{dispose:()=>{const S=w.indexOf(v);S!==-1&&w.splice(S,1)}}}clearCsiHandler(y){this._csiHandlers[this._identifier(y)]&&delete this._csiHandlers[this._identifier(y)]}setCsiHandlerFallback(y){this._csiHandlerFb=y}registerDcsHandler(y,v){return this._dcsParser.registerHandler(this._identifier(y),v)}clearDcsHandler(y){this._dcsParser.clearHandler(this._identifier(y))}setDcsHandlerFallback(y){this._dcsParser.setHandlerFallback(y)}registerOscHandler(y,v){return this._oscParser.registerHandler(y,v)}clearOscHandler(y){this._oscParser.clearHandler(y)}setOscHandlerFallback(y){this._oscParser.setHandlerFallback(y)}setErrorHandler(y){this._errorHandler=y}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(y,v,x,w,S){this._parseStack.state=y,this._parseStack.handlers=v,this._parseStack.handlerPos=x,this._parseStack.transition=w,this._parseStack.chunkPos=S}parse(y,v,x){let w,S=0,E=0,k=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,k=this._parseStack.chunkPos+1;else{if(x===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const _=this._parseStack.handlers;let L=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(x===!1&&L>-1){for(;L>=0&&(w=_[L](this._params),w!==!0);L--)if(w instanceof Promise)return this._parseStack.handlerPos=L,w}this._parseStack.handlers=[];break;case 4:if(x===!1&&L>-1){for(;L>=0&&(w=_[L](),w!==!0);L--)if(w instanceof Promise)return this._parseStack.handlerPos=L,w}this._parseStack.handlers=[];break;case 6:if(S=y[this._parseStack.chunkPos],w=this._dcsParser.unhook(S!==24&&S!==26,x),w)return w;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(S=y[this._parseStack.chunkPos],w=this._oscParser.end(S!==24&&S!==26,x),w)return w;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,k=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let _=k;_<v;++_){switch(S=y[_],E=this._transitions.table[this.currentState<<8|(S<160?S:m)],E>>4){case 2:for(let O=_+1;;++O){if(O>=v||(S=y[O])<32||S>126&&S<m){this._printHandler(y,_,O),_=O-1;break}if(++O>=v||(S=y[O])<32||S>126&&S<m){this._printHandler(y,_,O),_=O-1;break}if(++O>=v||(S=y[O])<32||S>126&&S<m){this._printHandler(y,_,O),_=O-1;break}if(++O>=v||(S=y[O])<32||S>126&&S<m){this._printHandler(y,_,O),_=O-1;break}}break;case 3:this._executeHandlers[S]?this._executeHandlers[S]():this._executeHandlerFb(S),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:_,code:S,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const L=this._csiHandlers[this._collect<<8|S];let R=L?L.length-1:-1;for(;R>=0&&(w=L[R](this._params),w!==!0);R--)if(w instanceof Promise)return this._preserveStack(3,L,R,E,_),w;R<0&&this._csiHandlerFb(this._collect<<8|S,this._params),this.precedingJoinState=0;break;case 8:do switch(S){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(S-48)}while(++_<v&&(S=y[_])>47&&S<60);_--;break;case 9:this._collect<<=8,this._collect|=S;break;case 10:const C=this._escHandlers[this._collect<<8|S];let P=C?C.length-1:-1;for(;P>=0&&(w=C[P](),w!==!0);P--)if(w instanceof Promise)return this._preserveStack(4,C,P,E,_),w;P<0&&this._escHandlerFb(this._collect<<8|S),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|S,this._params);break;case 13:for(let O=_+1;;++O)if(O>=v||(S=y[O])===24||S===26||S===27||S>127&&S<m){this._dcsParser.put(y,_,O),_=O-1;break}break;case 14:if(w=this._dcsParser.unhook(S!==24&&S!==26),w)return this._preserveStack(6,[],0,E,_),w;S===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let O=_+1;;O++)if(O>=v||(S=y[O])<32||S>127&&S<m){this._oscParser.put(y,_,O),_=O-1;break}break;case 6:if(w=this._oscParser.end(S!==24&&S!==26),w)return this._preserveStack(5,[],0,E,_),w;S===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&E}}}a.EscapeSequenceParser=g},6242:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OscHandler=a.OscParser=void 0;const c=l(5770),u=l(482),h=[];a.OscParser=class{constructor(){this._state=0,this._active=h,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(d,f){this._handlers[d]===void 0&&(this._handlers[d]=[]);const m=this._handlers[d];return m.push(f),{dispose:()=>{const g=m.indexOf(f);g!==-1&&m.splice(g,1)}}}clearHandler(d){this._handlers[d]&&delete this._handlers[d]}setHandlerFallback(d){this._handlerFb=d}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=h}reset(){if(this._state===2)for(let d=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;d>=0;--d)this._active[d].end(!1);this._stack.paused=!1,this._active=h,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||h,this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].start();else this._handlerFb(this._id,"START")}_put(d,f,m){if(this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].put(d,f,m);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(d,f,m))}start(){this.reset(),this._state=1}put(d,f,m){if(this._state!==3){if(this._state===1)for(;f<m;){const g=d[f++];if(g===59){this._state=2,this._start();break}if(g<48||57<g)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+g-48}this._state===2&&m-f>0&&this._put(d,f,m)}}end(d,f=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let m=!1,g=this._active.length-1,b=!1;if(this._stack.paused&&(g=this._stack.loopPosition-1,m=f,b=this._stack.fallThrough,this._stack.paused=!1),!b&&m===!1){for(;g>=0&&(m=this._active[g].end(d),m!==!0);g--)if(m instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!1,m;g--}for(;g>=0;g--)if(m=this._active[g].end(!1),m instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!0,m}else this._handlerFb(this._id,"END",d);this._active=h,this._id=-1,this._state=0}}},a.OscHandler=class{constructor(d){this._handler=d,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(d,f,m){this._hitLimit||(this._data+=(0,u.utf32ToString)(d,f,m),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(d){let f=!1;if(this._hitLimit)f=!1;else if(d&&(f=this._handler(this._data),f instanceof Promise))return f.then(m=>(this._data="",this._hitLimit=!1,m));return this._data="",this._hitLimit=!1,f}}},8742:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Params=void 0;const l=2147483647;class c{static fromArray(h){const d=new c;if(!h.length)return d;for(let f=Array.isArray(h[0])?1:0;f<h.length;++f){const m=h[f];if(Array.isArray(m))for(let g=0;g<m.length;++g)d.addSubParam(m[g]);else d.addParam(m)}return d}constructor(h=32,d=32){if(this.maxLength=h,this.maxSubParamsLength=d,d>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(h),this.length=0,this._subParams=new Int32Array(d),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(h),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const h=new c(this.maxLength,this.maxSubParamsLength);return h.params.set(this.params),h.length=this.length,h._subParams.set(this._subParams),h._subParamsLength=this._subParamsLength,h._subParamsIdx.set(this._subParamsIdx),h._rejectDigits=this._rejectDigits,h._rejectSubDigits=this._rejectSubDigits,h._digitIsSub=this._digitIsSub,h}toArray(){const h=[];for(let d=0;d<this.length;++d){h.push(this.params[d]);const f=this._subParamsIdx[d]>>8,m=255&this._subParamsIdx[d];m-f>0&&h.push(Array.prototype.slice.call(this._subParams,f,m))}return h}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(h){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=h>l?l:h}}addSubParam(h){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=h>l?l:h,this._subParamsIdx[this.length-1]++}}hasSubParams(h){return(255&this._subParamsIdx[h])-(this._subParamsIdx[h]>>8)>0}getSubParams(h){const d=this._subParamsIdx[h]>>8,f=255&this._subParamsIdx[h];return f-d>0?this._subParams.subarray(d,f):null}getSubParamsAll(){const h={};for(let d=0;d<this.length;++d){const f=this._subParamsIdx[d]>>8,m=255&this._subParamsIdx[d];m-f>0&&(h[d]=this._subParams.slice(f,m))}return h}addDigit(h){let d;if(this._rejectDigits||!(d=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const f=this._digitIsSub?this._subParams:this.params,m=f[d-1];f[d-1]=~m?Math.min(10*m+h,l):h}}a.Params=c},5741:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AddonManager=void 0,a.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let l=this._addons.length-1;l>=0;l--)this._addons[l].instance.dispose()}loadAddon(l,c){const u={instance:c,dispose:c.dispose,isDisposed:!1};this._addons.push(u),c.dispose=()=>this._wrappedAddonDispose(u),c.activate(l)}_wrappedAddonDispose(l){if(l.isDisposed)return;let c=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===l){c=u;break}if(c===-1)throw new Error("Could not dispose an addon that has not been loaded");l.isDisposed=!0,l.dispose.apply(l.instance),this._addons.splice(c,1)}}},8771:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferApiView=void 0;const c=l(3785),u=l(511);a.BufferApiView=class{constructor(h,d){this._buffer=h,this.type=d}init(h){return this._buffer=h,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(h){const d=this._buffer.lines.get(h);if(d)return new c.BufferLineApiView(d)}getNullCell(){return new u.CellData}}},3785:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLineApiView=void 0;const c=l(511);a.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,h){if(!(u<0||u>=this._line.length))return h?(this._line.loadCell(u,h),h):this._line.loadCell(u,new c.CellData)}translateToString(u,h,d){return this._line.translateToString(u,h,d)}}},8285:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferNamespaceApi=void 0;const c=l(8771),u=l(8460),h=l(844);class d extends h.Disposable{constructor(m){super(),this._core=m,this._onBufferChange=this.register(new u.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new c.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new c.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}a.BufferNamespaceApi=d},7975:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ParserApi=void 0,a.ParserApi=class{constructor(l){this._core=l}registerCsiHandler(l,c){return this._core.registerCsiHandler(l,u=>c(u.toArray()))}addCsiHandler(l,c){return this.registerCsiHandler(l,c)}registerDcsHandler(l,c){return this._core.registerDcsHandler(l,(u,h)=>c(u,h.toArray()))}addDcsHandler(l,c){return this.registerDcsHandler(l,c)}registerEscHandler(l,c){return this._core.registerEscHandler(l,c)}addEscHandler(l,c){return this.registerEscHandler(l,c)}registerOscHandler(l,c){return this._core.registerOscHandler(l,c)}addOscHandler(l,c){return this.registerOscHandler(l,c)}}},7090:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeApi=void 0,a.UnicodeApi=class{constructor(l){this._core=l}register(l){this._core.unicodeService.register(l)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(l){this._core.unicodeService.activeVersion=l}}},744:function(o,a,l){var c=this&&this.__decorate||function(b,y,v,x){var w,S=arguments.length,E=S<3?y:x===null?x=Object.getOwnPropertyDescriptor(y,v):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(b,y,v,x);else for(var k=b.length-1;k>=0;k--)(w=b[k])&&(E=(S<3?w(E):S>3?w(y,v,E):w(y,v))||E);return S>3&&E&&Object.defineProperty(y,v,E),E},u=this&&this.__param||function(b,y){return function(v,x){y(v,x,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferService=a.MINIMUM_ROWS=a.MINIMUM_COLS=void 0;const h=l(8460),d=l(844),f=l(5295),m=l(2585);a.MINIMUM_COLS=2,a.MINIMUM_ROWS=1;let g=a.BufferService=class extends d.Disposable{get buffer(){return this.buffers.active}constructor(b){super(),this.isUserScrolling=!1,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(b.rawOptions.cols||0,a.MINIMUM_COLS),this.rows=Math.max(b.rawOptions.rows||0,a.MINIMUM_ROWS),this.buffers=this.register(new f.BufferSet(b,this))}resize(b,y){this.cols=b,this.rows=y,this.buffers.resize(b,y),this._onResize.fire({cols:b,rows:y})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(b,y=!1){const v=this.buffer;let x;x=this._cachedBlankLine,x&&x.length===this.cols&&x.getFg(0)===b.fg&&x.getBg(0)===b.bg||(x=v.getBlankLine(b,y),this._cachedBlankLine=x),x.isWrapped=y;const w=v.ybase+v.scrollTop,S=v.ybase+v.scrollBottom;if(v.scrollTop===0){const E=v.lines.isFull;S===v.lines.length-1?E?v.lines.recycle().copyFrom(x):v.lines.push(x.clone()):v.lines.splice(S+1,0,x.clone()),E?this.isUserScrolling&&(v.ydisp=Math.max(v.ydisp-1,0)):(v.ybase++,this.isUserScrolling||v.ydisp++)}else{const E=S-w+1;v.lines.shiftElements(w+1,E-1,-1),v.lines.set(S,x.clone())}this.isUserScrolling||(v.ydisp=v.ybase),this._onScroll.fire(v.ydisp)}scrollLines(b,y,v){const x=this.buffer;if(b<0){if(x.ydisp===0)return;this.isUserScrolling=!0}else b+x.ydisp>=x.ybase&&(this.isUserScrolling=!1);const w=x.ydisp;x.ydisp=Math.max(Math.min(x.ydisp+b,x.ybase),0),w!==x.ydisp&&(y||this._onScroll.fire(x.ydisp))}};a.BufferService=g=c([u(0,m.IOptionsService)],g)},7994:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CharsetService=void 0,a.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(l){this.glevel=l,this.charset=this._charsets[l]}setgCharset(l,c){this._charsets[l]=c,this.glevel===l&&(this.charset=c)}}},1753:function(o,a,l){var c=this&&this.__decorate||function(x,w,S,E){var k,_=arguments.length,L=_<3?w:E===null?E=Object.getOwnPropertyDescriptor(w,S):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(x,w,S,E);else for(var R=x.length-1;R>=0;R--)(k=x[R])&&(L=(_<3?k(L):_>3?k(w,S,L):k(w,S))||L);return _>3&&L&&Object.defineProperty(w,S,L),L},u=this&&this.__param||function(x,w){return function(S,E){w(S,E,x)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreMouseService=void 0;const h=l(2585),d=l(8460),f=l(844),m={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:x=>x.button!==4&&x.action===1&&(x.ctrl=!1,x.alt=!1,x.shift=!1,!0)},VT200:{events:19,restrict:x=>x.action!==32},DRAG:{events:23,restrict:x=>x.action!==32||x.button!==3},ANY:{events:31,restrict:x=>!0}};function g(x,w){let S=(x.ctrl?16:0)|(x.shift?4:0)|(x.alt?8:0);return x.button===4?(S|=64,S|=x.action):(S|=3&x.button,4&x.button&&(S|=64),8&x.button&&(S|=128),x.action===32?S|=32:x.action!==0||w||(S|=3)),S}const b=String.fromCharCode,y={DEFAULT:x=>{const w=[g(x,!1)+32,x.col+32,x.row+32];return w[0]>255||w[1]>255||w[2]>255?"":`\x1B[M${b(w[0])}${b(w[1])}${b(w[2])}`},SGR:x=>{const w=x.action===0&&x.button!==4?"m":"M";return`\x1B[<${g(x,!0)};${x.col};${x.row}${w}`},SGR_PIXELS:x=>{const w=x.action===0&&x.button!==4?"m":"M";return`\x1B[<${g(x,!0)};${x.x};${x.y}${w}`}};let v=a.CoreMouseService=class extends f.Disposable{constructor(x,w){super(),this._bufferService=x,this._coreService=w,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new d.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const S of Object.keys(m))this.addProtocol(S,m[S]);for(const S of Object.keys(y))this.addEncoding(S,y[S]);this.reset()}addProtocol(x,w){this._protocols[x]=w}addEncoding(x,w){this._encodings[x]=w}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(x){if(!this._protocols[x])throw new Error(`unknown protocol "${x}"`);this._activeProtocol=x,this._onProtocolChange.fire(this._protocols[x].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(x){if(!this._encodings[x])throw new Error(`unknown encoding "${x}"`);this._activeEncoding=x}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(x){if(x.col<0||x.col>=this._bufferService.cols||x.row<0||x.row>=this._bufferService.rows||x.button===4&&x.action===32||x.button===3&&x.action!==32||x.button!==4&&(x.action===2||x.action===3)||(x.col++,x.row++,x.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,x,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(x))return!1;const w=this._encodings[this._activeEncoding](x);return w&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(w):this._coreService.triggerDataEvent(w,!0)),this._lastEvent=x,!0}explainEvents(x){return{down:!!(1&x),up:!!(2&x),drag:!!(4&x),move:!!(8&x),wheel:!!(16&x)}}_equalEvents(x,w,S){if(S){if(x.x!==w.x||x.y!==w.y)return!1}else if(x.col!==w.col||x.row!==w.row)return!1;return x.button===w.button&&x.action===w.action&&x.ctrl===w.ctrl&&x.alt===w.alt&&x.shift===w.shift}};a.CoreMouseService=v=c([u(0,h.IBufferService),u(1,h.ICoreService)],v)},6975:function(o,a,l){var c=this&&this.__decorate||function(v,x,w,S){var E,k=arguments.length,_=k<3?x:S===null?S=Object.getOwnPropertyDescriptor(x,w):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(v,x,w,S);else for(var L=v.length-1;L>=0;L--)(E=v[L])&&(_=(k<3?E(_):k>3?E(x,w,_):E(x,w))||_);return k>3&&_&&Object.defineProperty(x,w,_),_},u=this&&this.__param||function(v,x){return function(w,S){x(w,S,v)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreService=void 0;const h=l(1439),d=l(8460),f=l(844),m=l(2585),g=Object.freeze({insertMode:!1}),b=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let y=a.CoreService=class extends f.Disposable{constructor(v,x,w){super(),this._bufferService=v,this._logService=x,this._optionsService=w,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new d.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new d.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new d.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new d.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,h.clone)(g),this.decPrivateModes=(0,h.clone)(b)}reset(){this.modes=(0,h.clone)(g),this.decPrivateModes=(0,h.clone)(b)}triggerDataEvent(v,x=!1){if(this._optionsService.rawOptions.disableStdin)return;const w=this._bufferService.buffer;x&&this._optionsService.rawOptions.scrollOnUserInput&&w.ybase!==w.ydisp&&this._onRequestScrollToBottom.fire(),x&&this._onUserInput.fire(),this._logService.debug(`sending data "${v}"`,()=>v.split("").map(S=>S.charCodeAt(0))),this._onData.fire(v)}triggerBinaryEvent(v){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${v}"`,()=>v.split("").map(x=>x.charCodeAt(0))),this._onBinary.fire(v))}};a.CoreService=y=c([u(0,m.IBufferService),u(1,m.ILogService),u(2,m.IOptionsService)],y)},9074:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DecorationService=void 0;const c=l(8055),u=l(8460),h=l(844),d=l(6106);let f=0,m=0;class g extends h.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new d.SortedList(v=>v?.marker.line),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,h.toDisposable)(()=>this.reset()))}registerDecoration(v){if(v.marker.isDisposed)return;const x=new b(v);if(x){const w=x.marker.onDispose(()=>x.dispose());x.onDispose(()=>{x&&(this._decorations.delete(x)&&this._onDecorationRemoved.fire(x),w.dispose())}),this._decorations.insert(x),this._onDecorationRegistered.fire(x)}return x}reset(){for(const v of this._decorations.values())v.dispose();this._decorations.clear()}*getDecorationsAtCell(v,x,w){let S=0,E=0;for(const k of this._decorations.getKeyIterator(x))S=k.options.x??0,E=S+(k.options.width??1),v>=S&&v<E&&(!w||(k.options.layer??"bottom")===w)&&(yield k)}forEachDecorationAtCell(v,x,w,S){this._decorations.forEachByKey(x,E=>{f=E.options.x??0,m=f+(E.options.width??1),v>=f&&v<m&&(!w||(E.options.layer??"bottom")===w)&&S(E)})}}a.DecorationService=g;class b extends h.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=c.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=c.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(v){super(),this.options=v,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=v.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.InstantiationService=a.ServiceCollection=void 0;const c=l(2585),u=l(8343);class h{constructor(...f){this._entries=new Map;for(const[m,g]of f)this.set(m,g)}set(f,m){const g=this._entries.get(f);return this._entries.set(f,m),g}forEach(f){for(const[m,g]of this._entries.entries())f(m,g)}has(f){return this._entries.has(f)}get(f){return this._entries.get(f)}}a.ServiceCollection=h,a.InstantiationService=class{constructor(){this._services=new h,this._services.set(c.IInstantiationService,this)}setService(d,f){this._services.set(d,f)}getService(d){return this._services.get(d)}createInstance(d,...f){const m=(0,u.getServiceDependencies)(d).sort((y,v)=>y.index-v.index),g=[];for(const y of m){const v=this._services.get(y.id);if(!v)throw new Error(`[createInstance] ${d.name} depends on UNKNOWN service ${y.id}.`);g.push(v)}const b=m.length>0?m[0].index:f.length;if(f.length!==b)throw new Error(`[createInstance] First service dependency of ${d.name} at position ${b+1} conflicts with ${f.length} static arguments`);return new d(...f,...g)}}},7866:function(o,a,l){var c=this&&this.__decorate||function(b,y,v,x){var w,S=arguments.length,E=S<3?y:x===null?x=Object.getOwnPropertyDescriptor(y,v):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(b,y,v,x);else for(var k=b.length-1;k>=0;k--)(w=b[k])&&(E=(S<3?w(E):S>3?w(y,v,E):w(y,v))||E);return S>3&&E&&Object.defineProperty(y,v,E),E},u=this&&this.__param||function(b,y){return function(v,x){y(v,x,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.traceCall=a.setTraceLogger=a.LogService=void 0;const h=l(844),d=l(2585),f={trace:d.LogLevelEnum.TRACE,debug:d.LogLevelEnum.DEBUG,info:d.LogLevelEnum.INFO,warn:d.LogLevelEnum.WARN,error:d.LogLevelEnum.ERROR,off:d.LogLevelEnum.OFF};let m,g=a.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(b){super(),this._optionsService=b,this._logLevel=d.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),m=this}_updateLogLevel(){this._logLevel=f[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(b){for(let y=0;y<b.length;y++)typeof b[y]=="function"&&(b[y]=b[y]())}_log(b,y,v){this._evalLazyOptionalParams(v),b.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+y,...v)}trace(b,...y){this._logLevel<=d.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,b,y)}debug(b,...y){this._logLevel<=d.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,b,y)}info(b,...y){this._logLevel<=d.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,b,y)}warn(b,...y){this._logLevel<=d.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,b,y)}error(b,...y){this._logLevel<=d.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,b,y)}};a.LogService=g=c([u(0,d.IOptionsService)],g),a.setTraceLogger=function(b){m=b},a.traceCall=function(b,y,v){if(typeof v.value!="function")throw new Error("not supported");const x=v.value;v.value=function(...w){if(m.logLevel!==d.LogLevelEnum.TRACE)return x.apply(this,w);m.trace(`GlyphRenderer#${x.name}(${w.map(E=>JSON.stringify(E)).join(", ")})`);const S=x.apply(this,w);return m.trace(`GlyphRenderer#${x.name} return`,S),S}}},7302:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OptionsService=a.DEFAULT_OPTIONS=void 0;const c=l(8460),u=l(844),h=l(6114);a.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:h.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const d=["normal","bold","100","200","300","400","500","600","700","800","900"];class f extends u.Disposable{constructor(g){super(),this._onOptionChange=this.register(new c.EventEmitter),this.onOptionChange=this._onOptionChange.event;const b={...a.DEFAULT_OPTIONS};for(const y in g)if(y in b)try{const v=g[y];b[y]=this._sanitizeAndValidateOption(y,v)}catch(v){console.error(v)}this.rawOptions=b,this.options={...b},this._setupOptions(),this.register((0,u.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(g,b){return this.onOptionChange(y=>{y===g&&b(this.rawOptions[g])})}onMultipleOptionChange(g,b){return this.onOptionChange(y=>{g.indexOf(y)!==-1&&b()})}_setupOptions(){const g=y=>{if(!(y in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${y}"`);return this.rawOptions[y]},b=(y,v)=>{if(!(y in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${y}"`);v=this._sanitizeAndValidateOption(y,v),this.rawOptions[y]!==v&&(this.rawOptions[y]=v,this._onOptionChange.fire(y))};for(const y in this.rawOptions){const v={get:g.bind(this,y),set:b.bind(this,y)};Object.defineProperty(this.options,y,v)}}_sanitizeAndValidateOption(g,b){switch(g){case"cursorStyle":if(b||(b=a.DEFAULT_OPTIONS[g]),!function(y){return y==="block"||y==="underline"||y==="bar"}(b))throw new Error(`"${b}" is not a valid value for ${g}`);break;case"wordSeparator":b||(b=a.DEFAULT_OPTIONS[g]);break;case"fontWeight":case"fontWeightBold":if(typeof b=="number"&&1<=b&&b<=1e3)break;b=d.includes(b)?b:a.DEFAULT_OPTIONS[g];break;case"cursorWidth":b=Math.floor(b);case"lineHeight":case"tabStopWidth":if(b<1)throw new Error(`${g} cannot be less than 1, value: ${b}`);break;case"minimumContrastRatio":b=Math.max(1,Math.min(21,Math.round(10*b)/10));break;case"scrollback":if((b=Math.min(b,4294967295))<0)throw new Error(`${g} cannot be less than 0, value: ${b}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(b<=0)throw new Error(`${g} cannot be less than or equal to 0, value: ${b}`);break;case"rows":case"cols":if(!b&&b!==0)throw new Error(`${g} must be numeric, value: ${b}`);break;case"windowsPty":b=b??{}}return b}}a.OptionsService=f},2660:function(o,a,l){var c=this&&this.__decorate||function(f,m,g,b){var y,v=arguments.length,x=v<3?m:b===null?b=Object.getOwnPropertyDescriptor(m,g):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(f,m,g,b);else for(var w=f.length-1;w>=0;w--)(y=f[w])&&(x=(v<3?y(x):v>3?y(m,g,x):y(m,g))||x);return v>3&&x&&Object.defineProperty(m,g,x),x},u=this&&this.__param||function(f,m){return function(g,b){m(g,b,f)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkService=void 0;const h=l(2585);let d=a.OscLinkService=class{constructor(f){this._bufferService=f,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(f){const m=this._bufferService.buffer;if(f.id===void 0){const w=m.addMarker(m.ybase+m.y),S={data:f,id:this._nextId++,lines:[w]};return w.onDispose(()=>this._removeMarkerFromLink(S,w)),this._dataByLinkId.set(S.id,S),S.id}const g=f,b=this._getEntryIdKey(g),y=this._entriesWithId.get(b);if(y)return this.addLineToLink(y.id,m.ybase+m.y),y.id;const v=m.addMarker(m.ybase+m.y),x={id:this._nextId++,key:this._getEntryIdKey(g),data:g,lines:[v]};return v.onDispose(()=>this._removeMarkerFromLink(x,v)),this._entriesWithId.set(x.key,x),this._dataByLinkId.set(x.id,x),x.id}addLineToLink(f,m){const g=this._dataByLinkId.get(f);if(g&&g.lines.every(b=>b.line!==m)){const b=this._bufferService.buffer.addMarker(m);g.lines.push(b),b.onDispose(()=>this._removeMarkerFromLink(g,b))}}getLinkData(f){return this._dataByLinkId.get(f)?.data}_getEntryIdKey(f){return`${f.id};;${f.uri}`}_removeMarkerFromLink(f,m){const g=f.lines.indexOf(m);g!==-1&&(f.lines.splice(g,1),f.lines.length===0&&(f.data.id!==void 0&&this._entriesWithId.delete(f.key),this._dataByLinkId.delete(f.id)))}};a.OscLinkService=d=c([u(0,h.IBufferService)],d)},8343:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createDecorator=a.getServiceDependencies=a.serviceRegistry=void 0;const l="di$target",c="di$dependencies";a.serviceRegistry=new Map,a.getServiceDependencies=function(u){return u[c]||[]},a.createDecorator=function(u){if(a.serviceRegistry.has(u))return a.serviceRegistry.get(u);const h=function(d,f,m){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(g,b,y){b[l]===b?b[c].push({id:g,index:y}):(b[c]=[{id:g,index:y}],b[l]=b)})(h,d,m)};return h.toString=()=>u,a.serviceRegistry.set(u,h),h}},2585:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.IDecorationService=a.IUnicodeService=a.IOscLinkService=a.IOptionsService=a.ILogService=a.LogLevelEnum=a.IInstantiationService=a.ICharsetService=a.ICoreService=a.ICoreMouseService=a.IBufferService=void 0;const c=l(8343);var u;a.IBufferService=(0,c.createDecorator)("BufferService"),a.ICoreMouseService=(0,c.createDecorator)("CoreMouseService"),a.ICoreService=(0,c.createDecorator)("CoreService"),a.ICharsetService=(0,c.createDecorator)("CharsetService"),a.IInstantiationService=(0,c.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(u||(a.LogLevelEnum=u={})),a.ILogService=(0,c.createDecorator)("LogService"),a.IOptionsService=(0,c.createDecorator)("OptionsService"),a.IOscLinkService=(0,c.createDecorator)("OscLinkService"),a.IUnicodeService=(0,c.createDecorator)("UnicodeService"),a.IDecorationService=(0,c.createDecorator)("DecorationService")},1480:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeService=void 0;const c=l(8460),u=l(225);class h{static extractShouldJoin(f){return(1&f)!=0}static extractWidth(f){return f>>1&3}static extractCharKind(f){return f>>3}static createPropertyValue(f,m,g=!1){return(16777215&f)<<3|(3&m)<<1|(g?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new c.EventEmitter,this.onChange=this._onChange.event;const f=new u.UnicodeV6;this.register(f),this._active=f.version,this._activeProvider=f}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(f){if(!this._providers[f])throw new Error(`unknown Unicode version "${f}"`);this._active=f,this._activeProvider=this._providers[f],this._onChange.fire(f)}register(f){this._providers[f.version]=f}wcwidth(f){return this._activeProvider.wcwidth(f)}getStringCellWidth(f){let m=0,g=0;const b=f.length;for(let y=0;y<b;++y){let v=f.charCodeAt(y);if(55296<=v&&v<=56319){if(++y>=b)return m+this.wcwidth(v);const S=f.charCodeAt(y);56320<=S&&S<=57343?v=1024*(v-55296)+S-56320+65536:m+=this.wcwidth(S)}const x=this.charProperties(v,g);let w=h.extractWidth(x);h.extractShouldJoin(x)&&(w-=h.extractWidth(g)),m+=w,g=x}return m}charProperties(f,m){return this._activeProvider.charProperties(f,m)}}a.UnicodeService=h}},r={};function i(o){var a=r[o];if(a!==void 0)return a.exports;var l=r[o]={exports:{}};return n[o].call(l.exports,l,l.exports,i),l.exports}var s={};return(()=>{var o=s;Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;const a=i(9042),l=i(3236),c=i(844),u=i(5741),h=i(8285),d=i(7975),f=i(7090),m=["cols","rows"];class g extends c.Disposable{constructor(y){super(),this._core=this.register(new l.Terminal(y)),this._addonManager=this.register(new u.AddonManager),this._publicOptions={...this._core.options};const v=w=>this._core.options[w],x=(w,S)=>{this._checkReadonlyOptions(w),this._core.options[w]=S};for(const w in this._core.options){const S={get:v.bind(this,w),set:x.bind(this,w)};Object.defineProperty(this._publicOptions,w,S)}}_checkReadonlyOptions(y){if(m.includes(y))throw new Error(`Option "${y}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new d.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new f.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new h.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const y=this._core.coreService.decPrivateModes;let v="none";switch(this._core.coreMouseService.activeProtocol){case"X10":v="x10";break;case"VT200":v="vt200";break;case"DRAG":v="drag";break;case"ANY":v="any"}return{applicationCursorKeysMode:y.applicationCursorKeys,applicationKeypadMode:y.applicationKeypad,bracketedPasteMode:y.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:v,originMode:y.origin,reverseWraparoundMode:y.reverseWraparound,sendFocusMode:y.sendFocus,wraparoundMode:y.wraparound}}get options(){return this._publicOptions}set options(y){for(const v in y)this._publicOptions[v]=y[v]}blur(){this._core.blur()}focus(){this._core.focus()}input(y,v=!0){this._core.input(y,v)}resize(y,v){this._verifyIntegers(y,v),this._core.resize(y,v)}open(y){this._core.open(y)}attachCustomKeyEventHandler(y){this._core.attachCustomKeyEventHandler(y)}attachCustomWheelEventHandler(y){this._core.attachCustomWheelEventHandler(y)}registerLinkProvider(y){return this._core.registerLinkProvider(y)}registerCharacterJoiner(y){return this._checkProposedApi(),this._core.registerCharacterJoiner(y)}deregisterCharacterJoiner(y){this._checkProposedApi(),this._core.deregisterCharacterJoiner(y)}registerMarker(y=0){return this._verifyIntegers(y),this._core.registerMarker(y)}registerDecoration(y){return this._checkProposedApi(),this._verifyPositiveIntegers(y.x??0,y.width??0,y.height??0),this._core.registerDecoration(y)}hasSelection(){return this._core.hasSelection()}select(y,v,x){this._verifyIntegers(y,v,x),this._core.select(y,v,x)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(y,v){this._verifyIntegers(y,v),this._core.selectLines(y,v)}dispose(){super.dispose()}scrollLines(y){this._verifyIntegers(y),this._core.scrollLines(y)}scrollPages(y){this._verifyIntegers(y),this._core.scrollPages(y)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(y){this._verifyIntegers(y),this._core.scrollToLine(y)}clear(){this._core.clear()}write(y,v){this._core.write(y,v)}writeln(y,v){this._core.write(y),this._core.write(`\r
`,v)}paste(y){this._core.paste(y)}refresh(y,v){this._verifyIntegers(y,v),this._core.refresh(y,v)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(y){this._addonManager.loadAddon(this,y)}static get strings(){return a}_verifyIntegers(...y){for(const v of y)if(v===1/0||isNaN(v)||v%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...y){for(const v of y)if(v&&(v===1/0||isNaN(v)||v%1!=0||v<0))throw new Error("This API only accepts positive integers")}}o.Terminal=g})(),s})())})(oie);var bqe=oie.exports;const yqe=getComputedStyle(document.documentElement),_r=t=>yqe.getPropertyValue(t)||void 0;function SA(t){return{cursor:_r("--bolt-elements-terminal-cursorColor"),cursorAccent:_r("--bolt-elements-terminal-cursorColorAccent"),foreground:_r("--bolt-elements-terminal-textColor"),background:_r("--bolt-elements-terminal-backgroundColor"),selectionBackground:_r("--bolt-elements-terminal-selection-backgroundColor"),selectionForeground:_r("--bolt-elements-terminal-selection-textColor"),selectionInactiveBackground:_r("--bolt-elements-terminal-selection-backgroundColorInactive"),black:_r("--bolt-elements-terminal-color-black"),red:_r("--bolt-elements-terminal-color-red"),green:_r("--bolt-elements-terminal-color-green"),yellow:_r("--bolt-elements-terminal-color-yellow"),blue:_r("--bolt-elements-terminal-color-blue"),magenta:_r("--bolt-elements-terminal-color-magenta"),cyan:_r("--bolt-elements-terminal-color-cyan"),white:_r("--bolt-elements-terminal-color-white"),brightBlack:_r("--bolt-elements-terminal-color-brightBlack"),brightRed:_r("--bolt-elements-terminal-color-brightRed"),brightGreen:_r("--bolt-elements-terminal-color-brightGreen"),brightYellow:_r("--bolt-elements-terminal-color-brightYellow"),brightBlue:_r("--bolt-elements-terminal-color-brightBlue"),brightMagenta:_r("--bolt-elements-terminal-color-brightMagenta"),brightCyan:_r("--bolt-elements-terminal-color-brightCyan"),brightWhite:_r("--bolt-elements-terminal-color-brightWhite"),...t}}const vqe=Ws("Terminal"),VU=A.memo(A.forwardRef(({className:t,theme:e,readonly:n,id:r,onTerminalReady:i,onTerminalResize:s},o)=>{const a=A.useRef(null),l=A.useRef();return A.useEffect(()=>{const c=a.current,u=new mqe.FitAddon,h=new gqe.WebLinksAddon,d=new bqe.Terminal({cursorBlink:!0,convertEol:!0,disableStdin:n,theme:SA(n?{cursor:"#00000000"}:{}),fontSize:12,fontFamily:"Menlo, courier-new, courier, monospace"});l.current=d,d.loadAddon(u),d.loadAddon(h),d.open(c);const f=new ResizeObserver(()=>{u.fit(),s?.(d.cols,d.rows)});return f.observe(c),vqe.debug(`Attach [${r}]`),i?.(d),()=>{f.disconnect(),d.dispose()}},[]),A.useEffect(()=>{const c=l.current;c.options.theme=SA(n?{cursor:"#00000000"}:{}),c.options.disableStdin=n},[e,n]),A.useImperativeHandle(o,()=>({reloadStyles:()=>{const c=l.current;c.options.theme=SA(n?{cursor:"#00000000"}:{})}}),[]),p.jsx("div",{className:t,ref:a})})),xqe=Ws("Terminal"),WU=3,yN=25,_qe=A.memo(()=>{const t=Ot(Nt.showTerminal),e=Ot(R1),n=A.useRef([]),r=A.useRef(null),i=A.useRef(!1),[s,o]=A.useState(0),[a,l]=A.useState(1),c=()=>{a<WU&&(l(a+1),o(a))};return A.useEffect(()=>{const{current:u}=r;if(!u)return;const h=u.isCollapsed();!t&&!h?u.collapse():t&&h&&u.resize(yN),i.current=!1},[t]),A.useEffect(()=>{const u=GQ.on("toggleTerminal",()=>{i.current=!0}),h=R1.subscribe(()=>{for(const d of Object.values(n.current))d?.reloadStyles()});return()=>{u(),h()}},[]),p.jsx(k1,{ref:r,defaultSize:t?yN:0,minSize:10,collapsible:!0,onExpand:()=>{i.current||Nt.toggleTerminal(!0)},onCollapse:()=>{i.current||Nt.toggleTerminal(!1)},children:p.jsx("div",{className:"h-full",children:p.jsxs("div",{className:"bg-bolt-elements-terminals-background h-full flex flex-col",children:[p.jsxs("div",{className:"flex items-center bg-bolt-elements-background-depth-2 border-y border-bolt-elements-borderColor gap-1.5 min-h-[34px] p-2",children:[Array.from({length:a+1},(u,h)=>{const d=s===h;return p.jsx(ut.Fragment,{children:h==0?p.jsxs("button",{className:Ae("flex items-center text-sm cursor-pointer gap-1.5 px-3 py-2 h-full whitespace-nowrap rounded-full",{"bg-bolt-elements-terminals-buttonBackground text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary":d,"bg-bolt-elements-background-depth-2 text-bolt-elements-textSecondary hover:bg-bolt-elements-terminals-buttonBackground":!d}),onClick:()=>o(h),children:[p.jsx("div",{className:"i-ph:terminal-window-duotone text-lg"}),"Ada Terminal"]},h):p.jsx(ut.Fragment,{children:p.jsxs("button",{className:Ae("flex items-center text-sm cursor-pointer gap-1.5 px-3 py-2 h-full whitespace-nowrap rounded-full",{"bg-bolt-elements-terminals-buttonBackground text-bolt-elements-textPrimary":d,"bg-bolt-elements-background-depth-2 text-bolt-elements-textSecondary hover:bg-bolt-elements-terminals-buttonBackground":!d}),onClick:()=>o(h),children:[p.jsx("div",{className:"i-ph:terminal-window-duotone text-lg"}),"Terminal ",a>1&&h]},h)})},h)}),a<WU&&p.jsx(gi,{icon:"i-ph:plus",size:"md",onClick:c}),p.jsx(gi,{className:"ml-auto",icon:"i-ph:caret-down",title:"Close",size:"md",onClick:()=>Nt.toggleTerminal(!1)})]}),Array.from({length:a+1},(u,h)=>{const d=s===h;return xqe.debug(`Starting bolt terminal [${h}]`),h==0?p.jsx(VU,{id:`terminal_${h}`,className:Ae("h-full overflow-hidden",{hidden:!d}),ref:f=>{n.current.push(f)},onTerminalReady:f=>Nt.attachBoltTerminal(f),onTerminalResize:(f,m)=>Nt.onTerminalResize(f,m),theme:e},h):p.jsx(VU,{id:`terminal_${h}`,className:Ae("h-full overflow-hidden",{hidden:!d}),ref:f=>{n.current.push(f)},onTerminalReady:f=>Nt.attachTerminal(f),onTerminalResize:(f,m)=>Nt.onTerminalResize(f,m),theme:e},h)})]})})})}),wqe=100-yN,Sqe={tabSize:2},Eqe=A.memo(({files:t,unsavedFiles:e,editorDocument:n,selectedFile:r,isStreaming:i,fileHistory:s,onFileSelect:o,onEditorChange:a,onEditorScroll:l,onFileSave:c,onFileReset:u})=>{Lg.trace("EditorPanel");const h=Ot(R1),d=Ot(Nt.showTerminal),f=A.useMemo(()=>{if(n)return n.filePath.split("/")},[n]),m=A.useMemo(()=>n!==void 0&&e?.has(n.filePath),[n,e]);return p.jsxs(mN,{direction:"vertical",children:[p.jsx(k1,{defaultSize:d?wqe:100,minSize:20,children:p.jsxs(mN,{direction:"horizontal",children:[p.jsx(k1,{defaultSize:20,minSize:10,collapsible:!0,children:p.jsxs("div",{className:"flex flex-col border-r border-bolt-elements-borderColor h-full",children:[p.jsxs(HU,{children:[p.jsx("div",{className:"i-ph:tree-structure-duotone shrink-0"}),"Files"]}),p.jsx(tie,{className:"h-full",files:t,hideRoot:!0,unsavedFiles:e,fileHistory:s,rootFolder:Kc,selectedFile:r,onFileSelect:o})]})}),p.jsx(gN,{}),p.jsxs(k1,{className:"flex flex-col",defaultSize:80,minSize:20,children:[p.jsx(HU,{className:"overflow-x-auto",children:f?.length&&p.jsxs("div",{className:"flex items-center flex-1 text-sm",children:[p.jsx(pqe,{pathSegments:f,files:t,onFileSelect:o}),m&&p.jsxs("div",{className:"flex gap-1 ml-auto -mr-1.5",children:[p.jsxs(dm,{onClick:c,children:[p.jsx("div",{className:"i-ph:floppy-disk-duotone"}),"Save"]}),p.jsxs(dm,{onClick:u,children:[p.jsx("div",{className:"i-ph:clock-counter-clockwise-duotone"}),"Reset"]})]})]})}),p.jsx("div",{className:"h-full flex-1 overflow-hidden",children:p.jsx(kre,{theme:h,editable:!i&&n!==void 0,settings:Sqe,doc:n,autoFocusOnDocumentChange:!AGe(),onScroll:l,onChange:a,onSave:c})})]})]})}),p.jsx(gN,{}),p.jsx(_qe,{})]})}),kqe=A.memo(({activePreviewIndex:t,setActivePreviewIndex:e,isDropdownOpen:n,setIsDropdownOpen:r,setHasSelectedPreview:i,previews:s})=>{const o=A.useRef(null),a=s.map((l,c)=>({...l,index:c})).sort((l,c)=>l.port-c.port);return A.useEffect(()=>{const l=c=>{o.current&&!o.current.contains(c.target)&&r(!1)};return n?window.addEventListener("mousedown",l):window.removeEventListener("mousedown",l),()=>{window.removeEventListener("mousedown",l)}},[n]),p.jsxs("div",{className:"relative z-port-dropdown",ref:o,children:[p.jsx(gi,{icon:"i-ph:plug",onClick:()=>r(!n)}),n&&p.jsxs("div",{className:"absolute right-0 mt-2 bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor rounded shadow-sm min-w-[140px] dropdown-animation",children:[p.jsx("div",{className:"px-4 py-2 border-b border-bolt-elements-borderColor text-sm font-semibold text-bolt-elements-textPrimary",children:"Ports"}),a.map(l=>p.jsx("div",{className:"flex items-center px-4 py-2 cursor-pointer hover:bg-bolt-elements-item-backgroundActive",onClick:()=>{e(l.index),r(!1),i(!0)},children:p.jsx("span",{className:t===l.index?"text-bolt-elements-item-contentAccent":"text-bolt-elements-item-contentDefault group-hover:text-bolt-elements-item-contentActive",children:l.port})},l.port))]})]})}),Cqe=A.memo(({isSelectionMode:t,setIsSelectionMode:e,containerRef:n})=>{const[r,i]=A.useState(!1),[s,o]=A.useState(null),[a,l]=A.useState(null),c=A.useRef(null),u=A.useRef(null);A.useEffect(()=>()=>{u.current&&(u.current.pause(),u.current.srcObject=null,u.current.remove(),u.current=null),c.current&&(c.current.getTracks().forEach(g=>g.stop()),c.current=null)},[]);const h=async()=>{if(!c.current)try{const g=await navigator.mediaDevices.getDisplayMedia({audio:!1,video:{displaySurface:"window",preferCurrentTab:!0,surfaceSwitching:"include",systemAudio:"exclude"}});if(g.addEventListener("inactive",()=>{u.current&&(u.current.pause(),u.current.srcObject=null,u.current.remove(),u.current=null),c.current&&(c.current.getTracks().forEach(b=>b.stop()),c.current=null),e(!1),o(null),l(null),i(!1)}),c.current=g,!u.current){const b=document.createElement("video");b.style.opacity="0",b.style.position="fixed",b.style.pointerEvents="none",b.style.zIndex="-1",document.body.appendChild(b),u.current=b}u.current.srcObject=g,await u.current.play()}catch(g){console.error("Failed to initialize stream:",g),e(!1),He.error("Failed to initialize screen capture")}return c.current},d=A.useCallback(async()=>{if(!(!t||!s||!a||!n.current)){i(!0);try{if(!await h()||!u.current)return;await new Promise(X=>setTimeout(X,300));const b=document.createElement("canvas");b.width=u.current.videoWidth,b.height=u.current.videoHeight;const y=b.getContext("2d");if(!y)throw new Error("Failed to get temporary canvas context");y.drawImage(u.current,0,0);const v=u.current.videoWidth/window.innerWidth,x=u.current.videoHeight/window.innerHeight,w=window.scrollX,S=window.scrollY+40,E=n.current.getBoundingClientRect(),k=-9,_=-14,L=Math.round((E.left+Math.min(s.x,a.x)+w+k)*v),R=Math.round((E.top+Math.min(s.y,a.y)+S+_)*x),C=Math.round(Math.abs(a.x-s.x)*v),P=Math.round(Math.abs(a.y-s.y)*x),O=document.createElement("canvas");O.width=Math.round(Math.abs(a.x-s.x)),O.height=Math.round(Math.abs(a.y-s.y));const N=O.getContext("2d");if(!N)throw new Error("Failed to get canvas context");N.drawImage(b,L,R,C,P,0,0,O.width,O.height);const H=await new Promise((X,J)=>{O.toBlob(j=>{j?X(j):J(new Error("Failed to create blob"))},"image/png")}),Q=new FileReader;Q.onload=X=>{const J=X.target?.result;if(document.querySelector("textarea")){const F=window.__BOLT_SET_UPLOADED_FILES__,Y=window.__BOLT_SET_IMAGE_DATA_LIST__,M=window.__BOLT_UPLOADED_FILES__||[],D=window.__BOLT_IMAGE_DATA_LIST__||[];if(F&&Y){const V=new File([H],"screenshot.png",{type:"image/png"});F([...M,V]),Y([...D,J]),He.success("Screenshot captured and added to chat")}else He.error("Could not add screenshot to chat")}},Q.readAsDataURL(H)}catch(g){console.error("Failed to capture screenshot:",g),He.error("Failed to capture screenshot"),c.current&&(c.current.getTracks().forEach(b=>b.stop()),c.current=null)}finally{i(!1),o(null),l(null),e(!1)}}},[t,s,a,n,e]),f=A.useCallback(g=>{if(g.preventDefault(),g.stopPropagation(),!t)return;const b=g.currentTarget.getBoundingClientRect(),y=g.clientX-b.left,v=g.clientY-b.top;o({x:y,y:v}),l({x:y,y:v})},[t]),m=A.useCallback(g=>{if(g.preventDefault(),g.stopPropagation(),!t||!s)return;const b=g.currentTarget.getBoundingClientRect(),y=g.clientX-b.left,v=g.clientY-b.top;l({x:y,y:v})},[t,s]);return t?p.jsx("div",{className:"absolute inset-0 cursor-crosshair",onMouseDown:f,onMouseMove:m,onMouseUp:d,onMouseLeave:()=>{s&&o(null)},style:{backgroundColor:r?"transparent":"rgba(0, 0, 0, 0.1)",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"all",opacity:r?0:1,zIndex:50,transition:"opacity 0.1s ease-in-out"},children:s&&a&&!r&&p.jsx("div",{className:"absolute border-2 border-blue-500 bg-blue-200 bg-opacity-20",style:{left:Math.min(s.x,a.x),top:Math.min(s.y,a.y),width:Math.abs(a.x-s.x),height:Math.abs(a.y-s.y)}})}):null}),GU=[{name:"Mobile",width:375,height:667,icon:"i-ph:device-mobile"},{name:"Tablet",width:768,height:1024,icon:"i-ph:device-tablet"},{name:"Laptop",width:1366,height:768,icon:"i-ph:laptop"},{name:"Desktop",width:1920,height:1080,icon:"i-ph:monitor"}],Tqe=A.memo(()=>{const t=A.useRef(null),e=A.useRef(null),n=A.useRef(null),[r,i]=A.useState(0),[s,o]=A.useState(!1),[a,l]=A.useState(!1),[c,u]=A.useState(!1),h=A.useRef(!1),d=Ot(Nt.previews),f=d[r],[m,g]=A.useState(""),[b,y]=A.useState(),[v,x]=A.useState(!1),[w,S]=A.useState(!1),[E,k]=A.useState(37.5),_=A.useRef({isResizing:!1,side:null,startX:0,startWidthPercent:37.5,windowWidth:window.innerWidth}),L=2,[R,C]=A.useState(!1),[P,O]=A.useState(GU[0]);A.useEffect(()=>{if(!f){g(""),y(void 0);return}const{baseUrl:V}=f;g(V),y(V)},[f]);const N=A.useCallback(V=>{if(!f)return!1;const{baseUrl:W}=f;return V===W?!0:V.startsWith(W)?["/","?","#"].includes(V.charAt(W.length)):!1},[f]),H=A.useCallback((V,W,te,ee)=>W.port<ee[V].port?te:V,[]);A.useEffect(()=>{if(d.length>1&&!h.current){const V=d.reduce(H,0);i(V)}},[d,H]);const Q=()=>{t.current&&(t.current.src=t.current.src)},X=async()=>{!a&&e.current?await e.current.requestFullscreen():document.fullscreenElement&&await document.exitFullscreen()};A.useEffect(()=>{const V=()=>{l(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",V),()=>{document.removeEventListener("fullscreenchange",V)}},[]);const J=()=>{S(V=>!V)},j=(V,W)=>{w&&(document.body.style.userSelect="none",_.current.isResizing=!0,_.current.side=W,_.current.startX=V.clientX,_.current.startWidthPercent=E,_.current.windowWidth=window.innerWidth,document.addEventListener("mousemove",F),document.addEventListener("mouseup",Y),V.preventDefault())},F=V=>{if(!_.current.isResizing)return;const W=V.clientX-_.current.startX,te=_.current.windowWidth,ee=W/te*100*L;let K=_.current.startWidthPercent;_.current.side==="right"?K=_.current.startWidthPercent+ee:_.current.side==="left"&&(K=_.current.startWidthPercent-ee),K=Math.max(10,Math.min(K,90)),k(K)},Y=()=>{_.current.isResizing=!1,_.current.side=null,document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",Y),document.body.style.userSelect=""};A.useEffect(()=>{const V=()=>{};return window.addEventListener("resize",V),()=>{window.removeEventListener("resize",V)}},[]);const M=()=>p.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",pointerEvents:"none"},children:p.jsx("div",{style:{color:"rgba(0,0,0,0.5)",fontSize:"10px",lineHeight:"5px",userSelect:"none",marginLeft:"1px"},children:" "})}),D=V=>{if(f?.baseUrl){const W=f.baseUrl.match(/^https?:\/\/([^.]+)\.local-credentialless\.webcontainer-api\.io/);if(W){const ee=`/webcontainer/preview/${W[1]}`,K=window.open(ee,"_blank",`noopener,noreferrer,width=${V.width},height=${V.height},menubar=no,toolbar=no,location=no,status=no`);K&&K.focus()}else console.warn("[Preview] Invalid WebContainer URL:",f.baseUrl)}};return p.jsxs("div",{ref:e,className:`w-full h-full flex flex-col relative ${c?"fixed inset-0 z-50 bg-white":""}`,children:[s&&p.jsx("div",{className:"z-iframe-overlay w-full h-full absolute",onClick:()=>o(!1)}),p.jsxs("div",{className:"bg-bolt-elements-background-depth-2 p-2 flex items-center gap-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(gi,{icon:"i-ph:arrow-clockwise",onClick:Q}),p.jsx(gi,{icon:"i-ph:selection",onClick:()=>x(!v),className:v?"bg-bolt-elements-background-depth-3":""})]}),p.jsx("div",{className:"flex-grow flex items-center gap-1 bg-bolt-elements-preview-addressBar-background border border-bolt-elements-borderColor text-bolt-elements-preview-addressBar-text rounded-full px-3 py-1 text-sm hover:bg-bolt-elements-preview-addressBar-backgroundHover hover:focus-within:bg-bolt-elements-preview-addressBar-backgroundActive focus-within:bg-bolt-elements-preview-addressBar-backgroundActive focus-within-border-bolt-elements-borderColorActive focus-within:text-bolt-elements-preview-addressBar-textActive",children:p.jsx("input",{title:"URL",ref:n,className:"w-full bg-transparent outline-none",type:"text",value:m,onChange:V=>{g(V.target.value)},onKeyDown:V=>{V.key==="Enter"&&N(m)&&(y(m),n.current&&n.current.blur())}})}),p.jsxs("div",{className:"flex items-center gap-2",children:[d.length>1&&p.jsx(kqe,{activePreviewIndex:r,setActivePreviewIndex:i,isDropdownOpen:s,setHasSelectedPreview:V=>h.current=V,setIsDropdownOpen:o,previews:d}),p.jsx(gi,{icon:"i-ph:devices",onClick:J,title:w?"Switch to Responsive Mode":"Switch to Device Mode"}),p.jsx(gi,{icon:"i-ph:layout-light",onClick:()=>u(!c),title:c?"Show Full Interface":"Show Preview Only"}),p.jsx(gi,{icon:a?"i-ph:arrows-in":"i-ph:arrows-out",onClick:X,title:a?"Exit Full Screen":"Full Screen"}),p.jsxs("div",{className:"flex items-center relative",children:[p.jsx(gi,{icon:"i-ph:arrow-square-out",onClick:()=>D(P),title:`Open Preview in ${P.name} Window`}),p.jsx(gi,{icon:"i-ph:caret-down",onClick:()=>C(!R),className:"ml-1",title:"Select Window Size"}),R&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>C(!1)}),p.jsx("div",{className:"absolute right-0 top-full mt-2 z-50 min-w-[240px] bg-white dark:bg-black rounded-xl shadow-2xl border border-[#E5E7EB] dark:border-[rgba(255,255,255,0.1)] overflow-hidden",children:GU.map(V=>p.jsxs("button",{className:"w-full px-4 py-3.5 text-left text-[#111827] dark:text-gray-300 text-sm whitespace-nowrap flex items-center gap-3 group hover:bg-[#F5EEFF] dark:hover:bg-gray-900 bg-white dark:bg-black",onClick:()=>{O(V),C(!1),D(V)},children:[p.jsx("div",{className:`${V.icon} w-5 h-5 text-[#6B7280] dark:text-gray-400 group-hover:text-[#6D28D9] dark:group-hover:text-[#6D28D9] transition-colors duration-200`}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"font-medium group-hover:text-[#6D28D9] dark:group-hover:text-[#6D28D9] transition-colors duration-200",children:V.name}),p.jsxs("span",{className:"text-xs text-[#6B7280] dark:text-gray-400 group-hover:text-[#6D28D9] dark:group-hover:text-[#6D28D9] transition-colors duration-200",children:[V.width,"  ",V.height]})]})]},V.name))})]})]})]})]}),p.jsx("div",{className:"flex-1 border-t border-bolt-elements-borderColor flex justify-center items-center overflow-auto",children:p.jsxs("div",{style:{width:w?`${E}%`:"100%",height:"100%",overflow:"visible",background:"var(--bolt-elements-background-depth-1)",position:"relative",display:"flex"},children:[f?p.jsxs(p.Fragment,{children:[p.jsx("iframe",{ref:t,title:"preview",className:"border-none w-full h-full bg-bolt-elements-background-depth-1",src:b,sandbox:"allow-scripts allow-forms allow-popups allow-modals allow-storage-access-by-user-activation allow-same-origin",allow:"cross-origin-isolated"}),p.jsx(Cqe,{isSelectionMode:v,setIsSelectionMode:x,containerRef:t})]}):p.jsx("div",{className:"flex w-full h-full justify-center items-center bg-bolt-elements-background-depth-1 text-bolt-elements-textPrimary",children:"No preview available"}),w&&p.jsxs(p.Fragment,{children:[p.jsx("div",{onMouseDown:V=>j(V,"left"),style:{position:"absolute",top:0,left:0,width:"15px",marginLeft:"-15px",height:"100%",cursor:"ew-resize",background:"rgba(255,255,255,.2)",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s",userSelect:"none"},onMouseOver:V=>V.currentTarget.style.background="rgba(255,255,255,.5)",onMouseOut:V=>V.currentTarget.style.background="rgba(255,255,255,.2)",title:"Drag to resize width",children:p.jsx(M,{})}),p.jsx("div",{onMouseDown:V=>j(V,"right"),style:{position:"absolute",top:0,right:0,width:"15px",marginRight:"-15px",height:"100%",cursor:"ew-resize",background:"rgba(255,255,255,.2)",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s",userSelect:"none"},onMouseOver:V=>V.currentTarget.style.background="rgba(255,255,255,.5)",onMouseOut:V=>V.currentTarget.style.background="rgba(255,255,255,.2)",title:"Drag to resize width",children:p.jsx(M,{})})]})]})})]})});function _2(t){const e=["B","KB","MB","GB","TB"];let n=t,r=0;for(;n>=1024&&r<e.length-1;)n/=1024,r++;return`${n.toFixed(1)} ${e[r]}`}function Aqe({isOpen:t,onClose:e,onPush:n}){const[r,i]=A.useState(""),[s,o]=A.useState(!1),[a,l]=A.useState(!1),[c,u]=A.useState(null),[h,d]=A.useState([]),[f,m]=A.useState(!1),[g,b]=A.useState(!1),[y,v]=A.useState(""),[x,w]=A.useState([]);A.useEffect(()=>{if(t){const _=Xd("github_connection");_?.user&&_?.token&&(u(_.user),_.token.trim()&&S(_.token))}},[t]);const S=async _=>{if(!_){Ut.logError("No GitHub token available"),He.error("GitHub authentication required");return}try{m(!0);const L=await fetch("https://api.github.com/user/repos?sort=updated&per_page=5&type=all&affiliation=owner,organization_member",{headers:{Accept:"application/vnd.github.v3+json",Authorization:`Bearer ${_.trim()}`}});if(!L.ok){const C=await L.json().catch(()=>({}));L.status===401?(He.error("GitHub token expired. Please reconnect your account."),Xd("github_connection")&&(localStorage.removeItem("github_connection"),u(null))):(Ut.logError("Failed to fetch GitHub repositories",{status:L.status,statusText:L.statusText,error:C}),He.error(`Failed to fetch repositories: ${L.statusText}`));return}const R=await L.json();d(R)}catch(L){Ut.logError("Failed to fetch GitHub repositories",{error:L}),He.error("Failed to fetch recent repositories")}finally{m(!1)}},E=async _=>{_.preventDefault();const L=Xd("github_connection");if(!L?.token||!L?.user){He.error("Please connect your GitHub account in Settings > Connections first");return}if(!r.trim()){He.error("Repository name is required");return}l(!0);try{const R=new EK({auth:L.token});try{if(await R.repos.get({owner:L.user.login,repo:r}),!window.confirm(`Repository "${r}" already exists. Do you want to update it? This will add or modify files in the repository.`)){l(!1);return}}catch(N){if(N instanceof Error&&"status"in N&&N.status!==404)throw N}const C=await n(r,L.user.login,L.token,s);v(C);const P=Nt.files.get(),O=Object.entries(P).filter(([,N])=>N?.type==="file"&&!N.isBinary).map(([N,H])=>({path:n1(N),size:new TextEncoder().encode(H.content||"").length}));w(O),b(!0)}catch(R){console.error("Error pushing to GitHub:",R),He.error("Failed to push to GitHub. Please check your repository name and try again.")}finally{l(!1)}},k=()=>{i(""),o(!1),b(!1),v(""),e()};return g?p.jsx(xo,{open:t,onOpenChange:_=>!_&&k(),children:p.jsxs(Gd,{children:[p.jsx(qd,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999]"}),p.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999]",children:p.jsx(at.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"w-[90vw] md:w-[600px] max-h-[85vh] overflow-y-auto",children:p.jsx(Kd,{className:"bg-white dark:bg-[#1E1E1E] rounded-lg border border-[#E5E5E5] dark:border-[#333333] shadow-xl",children:p.jsxs("div",{className:"p-6 space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2 text-green-500",children:[p.jsx("div",{className:"i-ph:check-circle w-5 h-5"}),p.jsx("h3",{className:"text-lg font-medium",children:"Successfully pushed to GitHub"})]}),p.jsx(gh,{onClick:k,className:"p-2 text-gray-400 hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-400",children:p.jsx("div",{className:"i-ph:x w-5 h-5"})})]}),p.jsxs("div",{className:"bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 rounded-lg p-3 text-left",children:[p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark mb-2",children:"Repository URL"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("code",{className:"flex-1 text-sm bg-bolt-elements-background dark:bg-bolt-elements-background-dark px-3 py-2 rounded border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark font-mono",children:y}),p.jsx(at.button,{onClick:()=>{navigator.clipboard.writeText(y),He.success("URL copied to clipboard")},className:"p-2 text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary dark:text-bolt-elements-textSecondary-dark dark:hover:text-bolt-elements-textPrimary-dark",whileHover:{scale:1.1},whileTap:{scale:.9},children:p.jsx("div",{className:"i-ph:copy w-4 h-4"})})]})]}),p.jsxs("div",{className:"bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 rounded-lg p-3",children:[p.jsxs("p",{className:"text-xs text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark mb-2",children:["Pushed Files (",x.length,")"]}),p.jsx("div",{className:"max-h-[200px] overflow-y-auto custom-scrollbar",children:x.map(_=>p.jsxs("div",{className:"flex items-center justify-between py-1 text-sm text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark",children:[p.jsx("span",{className:"font-mono truncate flex-1",children:_.path}),p.jsx("span",{className:"text-xs text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark ml-2",children:_2(_.size)})]},_.path))})]}),p.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[p.jsxs(at.a,{href:y,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 text-sm inline-flex items-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[p.jsx("div",{className:"i-ph:github-logo w-4 h-4"}),"View Repository"]}),p.jsxs(at.button,{onClick:()=>{navigator.clipboard.writeText(y),He.success("URL copied to clipboard")},className:"px-4 py-2 rounded-lg bg-[#F5F5F5] dark:bg-[#1A1A1A] text-gray-600 dark:text-gray-400 hover:bg-[#E5E5E5] dark:hover:bg-[#252525] text-sm inline-flex items-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[p.jsx("div",{className:"i-ph:copy w-4 h-4"}),"Copy URL"]}),p.jsx(at.button,{onClick:k,className:"px-4 py-2 rounded-lg bg-[#F5F5F5] dark:bg-[#1A1A1A] text-gray-600 dark:text-gray-400 hover:bg-[#E5E5E5] dark:hover:bg-[#252525] text-sm",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Close"})]})]})})})})]})}):c?p.jsx(xo,{open:t,onOpenChange:_=>!_&&k(),children:p.jsxs(Gd,{children:[p.jsx(qd,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999]"}),p.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999]",children:p.jsx(at.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"w-[90vw] md:w-[500px]",children:p.jsx(Kd,{className:"bg-white dark:bg-[#0A0A0A] rounded-lg border border-[#E5E5E5] dark:border-[#1A1A1A] shadow-xl",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[p.jsx(at.div,{initial:{scale:.8},animate:{scale:1},transition:{delay:.1},className:"w-10 h-10 rounded-xl bg-bolt-elements-background-depth-3 flex items-center justify-center text-purple-500",children:p.jsx("div",{className:"i-ph:git-branch w-5 h-5"})}),p.jsxs("div",{children:[p.jsx(WL,{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Push to GitHub"}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Push your code to a new or existing GitHub repository"})]}),p.jsx(gh,{className:"ml-auto p-2 text-gray-400 hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-400",onClick:k,children:p.jsx("div",{className:"i-ph:x w-5 h-5"})})]}),p.jsxs("div",{className:"flex items-center gap-3 mb-6 p-3 bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 rounded-lg",children:[p.jsx("img",{src:c.avatar_url,alt:c.login,className:"w-10 h-10 rounded-full"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:c.name||c.login}),p.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["@",c.login]})]})]}),p.jsxs("form",{onSubmit:E,className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{htmlFor:"repoName",className:"text-sm text-gray-600 dark:text-gray-400",children:"Repository Name"}),p.jsx("input",{id:"repoName",type:"text",value:r,onChange:_=>i(_.target.value),placeholder:"my-awesome-project",className:"w-full px-4 py-2 rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 border border-[#E5E5E5] dark:border-[#1A1A1A] text-gray-900 dark:text-white placeholder-gray-400",required:!0})]}),h.length>0&&p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Recent Repositories"}),p.jsx("div",{className:"space-y-2",children:h.map(_=>p.jsxs(at.button,{type:"button",onClick:()=>i(_.name),className:"w-full p-3 text-left rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 hover:bg-bolt-elements-background-depth-3 dark:hover:bg-bolt-elements-background-depth-4 transition-colors group",whileHover:{scale:1.01},whileTap:{scale:.99},children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:git-repository w-4 h-4 text-purple-500"}),p.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white group-hover:text-purple-500",children:_.name})]}),_.private&&p.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-purple-500/10 text-purple-500",children:"Private"})]}),_.description&&p.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400 line-clamp-2",children:_.description}),p.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs text-gray-400 dark:text-gray-500",children:[_.language&&p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:code w-3 h-3"}),_.language]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:star w-3 h-3"}),_.stargazers_count.toLocaleString()]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:git-fork w-3 h-3"}),_.forks_count.toLocaleString()]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:clock w-3 h-3"}),new Date(_.updated_at).toLocaleDateString()]})]})]},_.full_name))})]}),f&&p.jsxs("div",{className:"flex items-center justify-center py-4 text-gray-500 dark:text-gray-400",children:[p.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4 mr-2"}),"Loading repositories..."]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",id:"private",checked:s,onChange:_=>o(_.target.checked),className:"rounded border-[#E5E5E5] dark:border-[#1A1A1A] text-purple-500 focus:ring-purple-500 dark:bg-[#0A0A0A]"}),p.jsx("label",{htmlFor:"private",className:"text-sm text-gray-600 dark:text-gray-400",children:"Make repository private"})]}),p.jsxs("div",{className:"pt-4 flex gap-2",children:[p.jsx(at.button,{type:"button",onClick:k,className:"px-4 py-2 rounded-lg bg-[#F5F5F5] dark:bg-[#1A1A1A] text-gray-600 dark:text-gray-400 hover:bg-[#E5E5E5] dark:hover:bg-[#252525] text-sm",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Cancel"}),p.jsx(at.button,{type:"submit",disabled:a,className:Ae("flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 text-sm inline-flex items-center justify-center gap-2",a?"opacity-50 cursor-not-allowed":""),whileHover:a?{}:{scale:1.02},whileTap:a?{}:{scale:.98},children:a?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}),"Pushing..."]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:git-branch w-4 h-4"}),"Push to GitHub"]})})]})]})]})})})})]})}):p.jsx(xo,{open:t,onOpenChange:_=>!_&&k(),children:p.jsxs(Gd,{children:[p.jsx(qd,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999]"}),p.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999]",children:p.jsx(at.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"w-[90vw] md:w-[500px]",children:p.jsx(Kd,{className:"bg-white dark:bg-[#0A0A0A] rounded-lg p-6 border border-[#E5E5E5] dark:border-[#1A1A1A] shadow-xl",children:p.jsxs("div",{className:"text-center space-y-4",children:[p.jsx(at.div,{initial:{scale:.8},animate:{scale:1},transition:{delay:.1},className:"mx-auto w-12 h-12 rounded-xl bg-bolt-elements-background-depth-3 flex items-center justify-center text-purple-500",children:p.jsx("div",{className:"i-ph:github-logo w-6 h-6"})}),p.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"GitHub Connection Required"}),p.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Please connect your GitHub account in Settings ",">"," Connections to push your code to GitHub."]}),p.jsxs(at.button,{className:"px-4 py-2 rounded-lg bg-purple-500 text-white text-sm hover:bg-purple-600 inline-flex items-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:k,children:[p.jsx("div",{className:"i-ph:x-circle"}),"Close"]})]})})})})]})})}const Pqe={ease:So},Nqe={left:{value:"code",text:"Code"},middle:{value:"diff",text:"Diff"},right:{value:"preview",text:"Preview"}},Lqe={closed:{width:0,transition:{duration:.2,ease:So}},open:{width:"var(--workbench-width)",transition:{duration:.2,ease:So}}},Rqe=A.memo(({fileHistory:t,onSelectFile:e})=>{const n=Object.entries(t),r=n.length>0,[i,s]=A.useState(""),o=A.useMemo(()=>n.filter(([a])=>a.toLowerCase().includes(i.toLowerCase())),[n,i]);return p.jsx("div",{className:"flex items-center gap-2",children:p.jsx(ZT,{className:"relative",children:({open:a})=>p.jsxs(p.Fragment,{children:[p.jsxs(ZT.Button,{className:"flex items-center gap-2 px-3 py-1.5 text-sm rounded-lg bg-bolt-elements-background-depth-2 hover:bg-bolt-elements-background-depth-3 transition-colors text-bolt-elements-textPrimary border border-bolt-elements-borderColor",children:[p.jsx("span",{className:"font-medium",children:"File Changes"}),r&&p.jsx("span",{className:"w-5 h-5 rounded-full bg-accent-500/20 text-accent-500 text-xs flex items-center justify-center border border-accent-500/30",children:n.length})]}),p.jsx(N7e,{show:a,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",children:p.jsxs(ZT.Panel,{className:"absolute right-0 z-20 mt-2 w-80 origin-top-right rounded-xl bg-bolt-elements-background-depth-2 shadow-xl border border-bolt-elements-borderColor",children:[p.jsxs("div",{className:"p-2",children:[p.jsxs("div",{className:"relative mx-2 mb-2",children:[p.jsx("input",{type:"text",placeholder:"Search files...",value:i,onChange:l=>s(l.target.value),className:"w-full pl-8 pr-3 py-1.5 text-sm rounded-lg bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor focus:outline-none focus:ring-2 focus:ring-blue-500/50"}),p.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-bolt-elements-textTertiary",children:p.jsx("div",{className:"i-ph:magnifying-glass"})})]}),p.jsx("div",{className:"max-h-60 overflow-y-auto",children:o.length>0?o.map(([l,c])=>{const u=l.split(".").pop()||"",h=Lee(u);return p.jsx("button",{onClick:()=>e(l),className:"w-full px-3 py-2 text-left rounded-md hover:bg-bolt-elements-background-depth-1 transition-colors group bg-transparent",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("div",{className:"shrink-0 w-5 h-5 text-bolt-elements-textTertiary",children:[["typescript","javascript","jsx","tsx"].includes(h)&&p.jsx("div",{className:"i-ph:file-js"}),["css","scss","less"].includes(h)&&p.jsx("div",{className:"i-ph:paint-brush"}),h==="html"&&p.jsx("div",{className:"i-ph:code"}),h==="json"&&p.jsx("div",{className:"i-ph:brackets-curly"}),h==="python"&&p.jsx("div",{className:"i-ph:file-text"}),h==="markdown"&&p.jsx("div",{className:"i-ph:article"}),["yaml","yml"].includes(h)&&p.jsx("div",{className:"i-ph:file-text"}),h==="sql"&&p.jsx("div",{className:"i-ph:database"}),h==="dockerfile"&&p.jsx("div",{className:"i-ph:cube"}),h==="shell"&&p.jsx("div",{className:"i-ph:terminal"}),!["typescript","javascript","css","html","json","python","markdown","yaml","yml","sql","dockerfile","shell","jsx","tsx","scss","less"].includes(h)&&p.jsx("div",{className:"i-ph:file-text"})]}),p.jsx("div",{className:"flex-1 min-w-0",children:p.jsxs("div",{className:"flex items-center justify-between gap-2",children:[p.jsxs("div",{className:"flex flex-col min-w-0",children:[p.jsx("span",{className:"truncate text-sm font-medium text-bolt-elements-textPrimary",children:l.split("/").pop()}),p.jsx("span",{className:"truncate text-xs text-bolt-elements-textTertiary",children:l})]}),(()=>{const{additions:d,deletions:f}=(()=>{if(!c.originalContent)return{additions:0,deletions:0};const g=c.originalContent.replace(/\r\n/g,`
`),b=c.versions[c.versions.length-1]?.content.replace(/\r\n/g,`
`)||"";return g===b?{additions:0,deletions:0}:ng(g,b,{newlineIsToken:!1,ignoreWhitespace:!0,ignoreCase:!1}).reduce((v,x)=>(x.added&&(v.additions+=x.value.split(`
`).length),x.removed&&(v.deletions+=x.value.split(`
`).length),v),{additions:0,deletions:0})})();return(d>0||f>0)&&p.jsxs("div",{className:"flex items-center gap-1 text-xs shrink-0",children:[d>0&&p.jsxs("span",{className:"text-green-500",children:["+",d]}),f>0&&p.jsxs("span",{className:"text-red-500",children:["-",f]})]})})()]})})]})},l)}):p.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center",children:[p.jsx("div",{className:"w-12 h-12 mb-2 text-bolt-elements-textTertiary",children:p.jsx("div",{className:"i-ph:file-dashed"})}),p.jsx("p",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:i?"No matching files":"No modified files"}),p.jsx("p",{className:"text-xs text-bolt-elements-textTertiary mt-1",children:i?"Try another search":"Changes will appear here as you edit"})]})})]}),r&&p.jsx("div",{className:"border-t border-bolt-elements-borderColor p-2",children:p.jsx("button",{onClick:()=>{navigator.clipboard.writeText(o.map(([l])=>l).join(`
`)),He("File list copied to clipboard",{icon:p.jsx("div",{className:"i-ph:check-circle text-accent-500"})})},className:"w-full flex items-center justify-center gap-2 px-3 py-1.5 text-sm rounded-lg bg-bolt-elements-background-depth-1 hover:bg-bolt-elements-background-depth-3 transition-colors text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary",children:"Copy File List"})})]})})]})})})}),Iqe=A.memo(({chatStarted:t,isStreaming:e,actionRunner:n,metadata:r,updateChatMestaData:i})=>{Lg.trace("Workbench");const[s,o]=A.useState(!1),[a,l]=A.useState(!1),[c,u]=A.useState({}),h=Ot(XN(Nt.previews,C=>C.length>0)),d=Ot(Nt.showWorkbench),f=Ot(Nt.selectedFile),m=Ot(Nt.currentDocument),g=Ot(Nt.unsavedFiles),b=Ot(Nt.files),y=Ot(Nt.currentView),v=KQ(1024),x=C=>{Nt.currentView.set(C)};A.useEffect(()=>{h&&x("preview")},[h]),A.useEffect(()=>{Nt.setDocuments(b)},[b]);const w=A.useCallback(C=>{Nt.setCurrentDocumentContent(C.content)},[]),S=A.useCallback(C=>{Nt.setCurrentDocumentScrollPosition(C)},[]),E=A.useCallback(C=>{Nt.setSelectedFile(C)},[]),k=A.useCallback(()=>{Nt.saveCurrentDocument().catch(()=>{He.error("Failed to update file content")})},[]),_=A.useCallback(()=>{Nt.resetCurrentDocument()},[]),L=A.useCallback(async()=>{o(!0);try{const C=await window.showDirectoryPicker();await Nt.syncFiles(C),He.success("Files synced successfully")}catch(C){console.error("Error syncing files:",C),He.error("Failed to sync files")}finally{o(!1)}},[]),R=A.useCallback(C=>{Nt.setSelectedFile(C),Nt.currentView.set("diff")},[]);return t&&p.jsxs(at.div,{initial:"closed",animate:d?"open":"closed",variants:Lqe,className:"z-workbench",children:[p.jsx("div",{className:Ae("fixed top-[calc(var(--header-height)+1.5rem)] bottom-6 w-[var(--workbench-inner-width)] mr-4 z-0 transition-[left,width] duration-200 bolt-ease-cubic-bezier",{"w-full":v,"left-0":d&&v,"left-[var(--workbench-left)]":d,"left-[100%]":!d}),children:p.jsx("div",{className:"absolute inset-0 px-2 lg:px-6",children:p.jsxs("div",{className:"h-full flex flex-col bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor shadow-sm rounded-lg overflow-hidden",children:[p.jsxs("div",{className:"flex items-center px-3 py-2 border-b border-bolt-elements-borderColor",children:[p.jsx(ZWe,{selected:y,options:Nqe,setSelected:x}),p.jsx("div",{className:"ml-auto"}),y==="code"&&p.jsxs("div",{className:"flex overflow-y-auto",children:[p.jsxs(dm,{className:"mr-1 text-sm",onClick:()=>{Nt.downloadZip()},children:[p.jsx("div",{className:"i-ph:code"}),"Download Code"]}),p.jsxs(dm,{className:"mr-1 text-sm",onClick:L,disabled:s,children:[s?p.jsx("div",{className:"i-ph:spinner"}):p.jsx("div",{className:"i-ph:cloud-arrow-down"}),s?"Syncing...":"Sync Files"]}),p.jsxs(dm,{className:"mr-1 text-sm",onClick:()=>{Nt.toggleTerminal(!Nt.showTerminal.get())},children:[p.jsx("div",{className:"i-ph:terminal"}),"Toggle Terminal"]}),p.jsxs(dm,{className:"mr-1 text-sm",onClick:()=>l(!0),children:[p.jsx("div",{className:"i-ph:git-branch"}),"Push to GitHub"]})]}),y==="diff"&&p.jsx(Rqe,{fileHistory:c,onSelectFile:R}),p.jsx(gi,{icon:"i-ph:x-circle",className:"-mr-1",size:"xl",onClick:()=>{Nt.showWorkbench.set(!1)}})]}),p.jsxs("div",{className:"relative flex-1 overflow-hidden",children:[p.jsx(EA,{initial:{x:"0%"},animate:{x:y==="code"?"0%":"-100%"},children:p.jsx(Eqe,{editorDocument:m,isStreaming:e,selectedFile:f,files:b,unsavedFiles:g,fileHistory:c,onFileSelect:E,onEditorScroll:S,onEditorChange:w,onFileSave:k,onFileReset:_})}),p.jsx(EA,{initial:{x:"100%"},animate:{x:y==="diff"?"0%":y==="code"?"100%":"-100%"},children:p.jsx(f9e,{fileHistory:c,setFileHistory:u,actionRunner:n})}),p.jsx(EA,{initial:{x:"100%"},animate:{x:y==="preview"?"0%":"100%"},children:p.jsx(Tqe,{})})]})]})})}),p.jsx(Aqe,{isOpen:a,onClose:()=>l(!1),onPush:async(C,P,O)=>{try{const N=prompt("Please enter a commit message:","Initial commit")||"Initial commit";await Nt.pushToGitHub(C,N,P,O);const H=`https://github.com/${P}/${C}`;return i&&!r?.gitUrl&&i({...r||{},gitUrl:H}),H}catch(N){throw console.error("Error pushing to GitHub:",N),He.error("Failed to push to GitHub"),N}}})]})}),EA=A.memo(({children:t,...e})=>p.jsx(at.div,{className:"absolute inset-0",transition:Pqe,...e,children:t}));var KO="Popover",[lie,Zit]=ca(KO,[Fg]),Uv=Fg(),[Oqe,Bh]=lie(KO),cie=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=t,a=Uv(e),l=A.useRef(null),[c,u]=A.useState(!1),[h=!1,d]=If({prop:r,defaultProp:i,onChange:s});return p.jsx(iR,{...a,children:p.jsx(Oqe,{scope:e,contentId:Hc(),triggerRef:l,open:h,onOpenChange:d,onOpenToggle:A.useCallback(()=>d(f=>!f),[d]),hasCustomAnchor:c,onCustomAnchorAdd:A.useCallback(()=>u(!0),[]),onCustomAnchorRemove:A.useCallback(()=>u(!1),[]),modal:o,children:n})})};cie.displayName=KO;var uie="PopoverAnchor",hie=A.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Bh(uie,n),s=Uv(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=i;return A.useEffect(()=>(o(),()=>a()),[o,a]),p.jsx(ZE,{...s,...r,ref:e})});hie.displayName=uie;var die="PopoverTrigger",fie=A.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Bh(die,n),s=Uv(n),o=Wn(e,i.triggerRef),a=p.jsx(vn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":vie(i.open),...r,ref:o,onClick:Mt(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?a:p.jsx(ZE,{asChild:!0,...s,children:a})});fie.displayName=die;var YO="PopoverPortal",[Dqe,Mqe]=lie(YO,{forceMount:void 0}),pie=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,s=Bh(YO,e);return p.jsx(Dqe,{scope:e,forceMount:n,children:p.jsx(Fi,{present:n||s.open,children:p.jsx(cv,{asChild:!0,container:i,children:r})})})};pie.displayName=YO;var vg="PopoverContent",mie=A.forwardRef((t,e)=>{const n=Mqe(vg,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,s=Bh(vg,t.__scopePopover);return p.jsx(Fi,{present:r||s.open,children:s.modal?p.jsx(jqe,{...i,ref:e}):p.jsx(Fqe,{...i,ref:e})})});mie.displayName=vg;var jqe=A.forwardRef((t,e)=>{const n=Bh(vg,t.__scopePopover),r=A.useRef(null),i=Wn(e,r),s=A.useRef(!1);return A.useEffect(()=>{const o=r.current;if(o)return UL(o)},[]),p.jsx(qE,{as:uf,allowPinchZoom:!0,children:p.jsx(gie,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Mt(t.onCloseAutoFocus,o=>{o.preventDefault(),s.current||n.triggerRef.current?.focus()}),onPointerDownOutside:Mt(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Mt(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Fqe=A.forwardRef((t,e)=>{const n=Bh(vg,t.__scopePopover),r=A.useRef(!1),i=A.useRef(!1);return p.jsx(gie,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{t.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||n.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{t.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;n.triggerRef.current?.contains(o)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),gie=A.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...h}=t,d=Bh(vg,n),f=Uv(n);return BL(),p.jsx(WE,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:p.jsx(lv,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>d.onOpenChange(!1),children:p.jsx(sR,{"data-state":vie(d.open),role:"dialog",id:d.contentId,...f,...h,ref:e,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),bie="PopoverClose",Bqe=A.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Bh(bie,n);return p.jsx(vn.button,{type:"button",...r,ref:e,onClick:Mt(t.onClick,()=>i.onOpenChange(!1))})});Bqe.displayName=bie;var Uqe="PopoverArrow",yie=A.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Uv(n);return p.jsx(oR,{...i,...r,ref:e})});yie.displayName=Uqe;function vie(t){return t?"open":"closed"}var $qe=cie,Hqe=hie,zqe=fie,Vqe=pie,Wqe=mie,Gqe=yie;const qqe=({children:t,trigger:e,side:n,align:r})=>p.jsxs($qe,{children:[p.jsx(zqe,{asChild:!0,children:e}),p.jsx(Hqe,{}),p.jsx(Vqe,{children:p.jsxs(Wqe,{sideOffset:10,side:n,align:r,className:"bg-bolt-elements-background-depth-2 text-bolt-elements-item-contentAccent p-2 rounded-md shadow-xl z-workbench",children:[t,p.jsx(Gqe,{className:"bg-bolt-elements-item-background-depth-2"})]})})]});function Kqe(t){t=xie(t),Nt.currentView.get()!=="code"&&Nt.currentView.set("code"),Nt.setSelectedFile(`${Kc}/${t}`)}function xie(t){let e=t;return e.startsWith(Kc)&&(e=t.replace(Kc,"")),e.startsWith("/")&&(e=e.slice(1)),e}const Yqe=A.memo(({content:t,annotations:e})=>{const n=e?.filter(o=>o&&typeof o=="object"&&Object.keys(o).includes("type"))||[];let r;n.find(o=>o.type==="chatSummary")&&(r=n.find(o=>o.type==="chatSummary")?.summary);let i;n.find(o=>o.type==="codeContext")&&(i=n.find(o=>o.type==="codeContext")?.files);const s=n.find(o=>o.type==="usage")?.value;return p.jsxs("div",{className:"overflow-hidden w-full",children:[p.jsx(p.Fragment,{children:p.jsxs("div",{className:" flex gap-2 items-center text-sm text-bolt-elements-textSecondary mb-2",children:[(i||r)&&p.jsxs(qqe,{side:"right",align:"start",trigger:p.jsx("div",{className:"i-ph:info"}),children:[r&&p.jsxs("div",{className:"max-w-chat",children:[p.jsxs("div",{className:"summary max-h-96 flex flex-col",children:[p.jsx("h2",{className:"border border-bolt-elements-borderColor rounded-md p4",children:"Summary"}),p.jsx("div",{style:{zoom:.7},className:"overflow-y-auto m4",children:p.jsx(ag,{children:r})})]}),i&&p.jsxs("div",{className:"code-context flex flex-col p4 border border-bolt-elements-borderColor rounded-md",children:[p.jsx("h2",{children:"Context"}),p.jsx("div",{className:"flex gap-4 mt-4 bolt",style:{zoom:.6},children:i.map(o=>{const a=xie(o);return p.jsx(p.Fragment,{children:p.jsx("code",{className:"bg-bolt-elements-artifacts-inlineCode-background text-bolt-elements-artifacts-inlineCode-text px-1.5 py-1 rounded-md text-bolt-elements-item-contentAccent hover:underline cursor-pointer",onClick:l=>{l.preventDefault(),l.stopPropagation(),Kqe(a)},children:a})})})})]})]}),p.jsx("div",{className:"context"})]}),s&&p.jsxs("div",{children:["Tokens: ",s.totalTokens," (prompt: ",s.promptTokens,", completion: ",s.completionTokens,")"]})]})}),p.jsx(ag,{html:!0,children:t})]})});function Xqe({content:t}){if(Array.isArray(t)){const n=t.find(s=>s.type==="text"),r=qU(n?.text||""),i=t.filter(s=>s.type==="image"&&s.image);return p.jsx("div",{className:"overflow-hidden pt-[4px]",children:p.jsxs("div",{className:"flex flex-col gap-4",children:[r&&p.jsx(ag,{html:!0,children:r}),i.map((s,o)=>p.jsx("img",{src:s.image,alt:`Image ${o+1}`,className:"max-w-full h-auto rounded-lg",style:{maxHeight:"512px",objectFit:"contain"}},o))]})})}const e=qU(t);return p.jsx("div",{className:"overflow-hidden pt-[4px]",children:p.jsx(ag,{html:!0,children:e})})}function qU(t){const e=/<boltArtifact\s+[^>]*>[\s\S]*?<\/boltArtifact>/gm;return t.replace(iue,"").replace(sue,"").replace(e,"")}const Zqe=A.forwardRef((t,e)=>{const{id:n,isStreaming:r=!1,messages:i=[]}=t,s=Aae(),o=Ot(nv),a=c=>{const u=new URLSearchParams(s.search);u.set("rewindTo",c),window.location.search=u.toString()},l=async c=>{try{if(!wn||!Vo.get()){He.error("Chat persistence is not available");return}const u=await Vve(wn,Vo.get(),c);window.location.href=`/chat/${u}`}catch(u){He.error("Failed to fork chat: "+u.message)}};return p.jsxs("div",{id:n,className:t.className,ref:e,children:[i.length>0?i.map((c,u)=>{const{role:h,content:d,id:f,annotations:m}=c,g=h==="user",b=u===0,y=u===i.length-1;return m?.includes("hidden")?p.jsx(A.Fragment,{},u):p.jsxs("div",{className:Ae("flex gap-4 p-6 w-full rounded-[calc(0.75rem-1px)]",{"bg-bolt-elements-messages-background":g||!r||r&&!y,"bg-gradient-to-b from-bolt-elements-messages-background from-30% to-transparent":r&&y,"mt-4":!b}),children:[g&&p.jsx("div",{className:"flex items-center justify-center w-[40px] h-[40px] overflow-hidden bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-500 rounded-full shrink-0 self-start",children:o?.avatar?p.jsx("img",{src:o.avatar,alt:o?.username||"User",className:"w-full h-full object-cover",loading:"eager",decoding:"sync"}):p.jsx("div",{className:"i-ph:user-fill text-2xl"})}),p.jsx("div",{className:"grid grid-col-1 w-full",children:g?p.jsx(Xqe,{content:d}):p.jsx(Yqe,{content:d,annotations:c.annotations})}),!g&&p.jsxs("div",{className:"flex gap-2 flex-col lg:flex-row",children:[f&&p.jsx(yf,{tooltip:"Revert to this message",children:p.jsx("button",{onClick:()=>a(f),className:Ae("i-ph:arrow-u-up-left","text-xl text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary transition-colors")},"i-ph:arrow-u-up-left")}),p.jsx(yf,{tooltip:"Fork chat from this message",children:p.jsx("button",{onClick:()=>l(f),className:Ae("i-ph:git-fork","text-xl text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary transition-colors")},"i-ph:git-fork")})]})]},u)}):null,r&&p.jsx("div",{className:"text-center w-full text-bolt-elements-textSecondary i-svg-spinners:3-dots-fade text-4xl mt-4"})]})}),Jqe=Rf(.4,0,.2,1),Qqe=({show:t,isStreaming:e,disabled:n,onClick:r})=>p.jsx(Ql,{children:t?p.jsx(at.button,{className:"absolute flex justify-center items-center top-[18px] right-[22px] p-1 bg-blue-500 hover:brightness-94 text-white rounded-md w-[34px] h-[34px] transition-theme disabled:opacity-50 disabled:cursor-not-allowed",transition:{ease:Jqe,duration:.17},initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},disabled:n,onClick:i=>{i.preventDefault(),n||r?.(i)},children:p.jsx("div",{className:"text-lg",children:e?p.jsx("div",{className:"i-ph:stop-circle-bold"}):p.jsx("div",{className:"i-ph:arrow-right"})})}):null}),eKe="s",tKe="t",nKe="u",rKe="v",iKe="w",yb={BaseChat:eKe,Chat:tKe,PromptEffectContainer:nKe,PromptEffectLine:rKe,PromptShine:iKe},sKe=({exportChat:t})=>{const[e,n]=A.useState(null),r=!!e;A.useEffect(()=>{try{const h=localStorage.getItem("userData");h&&n(JSON.parse(h))}catch(h){console.error("Error checking authentication:",h)}},[]);const{exportCount:i,monthlyLimit:s,showSubscriptionPlans:o,incrementExportCount:a,closeSubscriptionPlans:l,canExport:c}=yz(r,e),u=()=>{if(!c){a();return}if(!a())return;t?.();const d=s-i-1;d>0?He.success(`Chat exported! You have ${d} exports remaining this month.`):d===0&&He.warning("Chat exported! This was your last export for this month.")};return p.jsxs(p.Fragment,{children:[p.jsx(yf,{tooltip:c?"Export Chat":"Export limit reached",children:p.jsx(gi,{title:"Export Chat",onClick:u,disabled:!c,className:c?"":"opacity-50 cursor-not-allowed",children:p.jsx("div",{className:"i-ph:download-simple text-xl"})})}),p.jsx(rL,{isOpen:o,onClose:l})]})};var KU={};function YU(t){return Array.isArray(t)?t:[t]}const vN="",XU=" ",kA="\\",oKe=/^\s+$/,aKe=/(?:[^\\]|^)\\$/,lKe=/^\\!/,cKe=/^\\#/,uKe=/\r?\n/g,hKe=/^\.*\/|^\.+$/,CA="/";let _ie="node-ignore";typeof Symbol<"u"&&(_ie=Symbol.for("node-ignore"));const ZU=_ie,dKe=(t,e,n)=>Object.defineProperty(t,e,{value:n}),fKe=/([0-z])-([0-z])/g,wie=()=>!1,pKe=t=>t.replace(fKe,(e,n,r)=>n.charCodeAt(0)<=r.charCodeAt(0)?e:vN),mKe=t=>{const{length:e}=t;return t.slice(0,e-e%2)},gKe=[[/^\uFEFF/,()=>vN],[/((?:\\\\)*?)(\\?\s+)$/,(t,e,n)=>e+(n.indexOf("\\")===0?XU:vN)],[/(\\+?)\s/g,(t,e)=>{const{length:n}=e;return e.slice(0,n-n%2)+XU}],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,n)=>e+6<n.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,n)=>{const r=n.replace(/\\\*/g,"[^\\/]*");return e+r}],[/\\\\\\(?=[$.|*+(){^])/g,()=>kA],[/\\\\/g,()=>kA],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,n,r,i)=>e===kA?`\\[${n}${mKe(r)}${i}`:i==="]"&&r.length%2===0?`[${pKe(n)}${r}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(t,e)=>`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`]],JU=Object.create(null),bKe=(t,e)=>{let n=JU[t];return n||(n=gKe.reduce((r,[i,s])=>r.replace(i,s.bind(t)),t),JU[t]=n),e?new RegExp(n,"i"):new RegExp(n)},XO=t=>typeof t=="string",yKe=t=>t&&XO(t)&&!oKe.test(t)&&!aKe.test(t)&&t.indexOf("#")!==0,vKe=t=>t.split(uKe);let xKe=class{constructor(e,n,r,i){this.origin=e,this.pattern=n,this.negative=r,this.regex=i}};const _Ke=(t,e)=>{const n=t;let r=!1;t.indexOf("!")===0&&(r=!0,t=t.substr(1)),t=t.replace(lKe,"!").replace(cKe,"#");const i=bKe(t,e);return new xKe(n,t,r,i)},wKe=(t,e)=>{throw new e(t)},iu=(t,e,n)=>XO(t)?t?iu.isNotRelative(t)?n(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:n("path must not be empty",TypeError):n(`path must be a string, but got \`${e}\``,TypeError),Sie=t=>hKe.test(t);iu.isNotRelative=Sie;iu.convert=t=>t;let SKe=class{constructor({ignorecase:e=!0,ignoreCase:n=e,allowRelativePaths:r=!1}={}){dKe(this,ZU,!0),this._rules=[],this._ignoreCase=n,this._allowRelativePaths=r,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(e){if(e&&e[ZU]){this._rules=this._rules.concat(e._rules),this._added=!0;return}if(yKe(e)){const n=_Ke(e,this._ignoreCase);this._added=!0,this._rules.push(n)}}add(e){return this._added=!1,YU(XO(e)?vKe(e):e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_testOne(e,n){let r=!1,i=!1;return this._rules.forEach(s=>{const{negative:o}=s;if(i===o&&r!==i||o&&!r&&!i&&!n)return;s.regex.test(e)&&(r=!o,i=o)}),{ignored:r,unignored:i}}_test(e,n,r,i){const s=e&&iu.convert(e);return iu(s,e,this._allowRelativePaths?wie:wKe),this._t(s,n,r,i)}_t(e,n,r,i){if(e in n)return n[e];if(i||(i=e.split(CA)),i.pop(),!i.length)return n[e]=this._testOne(e,r);const s=this._t(i.join(CA)+CA,n,r,i);return n[e]=s.ignored?s:this._testOne(e,r)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return YU(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}};const bE=t=>new SKe(t),EKe=t=>iu(t&&iu.convert(t),t,wie);bE.isPathValid=EKe;bE.default=bE;var kKe=bE;if(typeof Qn<"u"&&(KU&&KU.IGNORE_TEST_WIN32||Qn.platform==="win32")){const t=n=>/^\\\\\?\\/.test(n)||/["<>|\u0000-\u001F]+/u.test(n)?n:n.replace(/\\/g,"/");iu.convert=t;const e=/^[a-z]:\//i;iu.isNotRelative=n=>e.test(n)||Sie(n)}const ZO=_s(kKe),CKe=["node_modules/**",".git/**","dist/**","build/**",".next/**","coverage/**",".cache/**",".vscode/**",".idea/**","**/*.log","**/.DS_Store","**/npm-debug.log*","**/yarn-debug.log*","**/yarn-error.log*"],TA=1e3,TKe=ZO().add(CKe),C1=()=>Math.random().toString(36).substring(2,15),AKe=async t=>{const n=new Uint8Array(await t.slice(0,1024).arrayBuffer());for(let r=0;r<n.length;r++){const i=n[r];if(i===0||i<32&&i!==9&&i!==10&&i!==13)return!0}return!1},PKe=t=>!TKe.ignores(t),NKe=(t,e)=>`
<boltArtifact id="${e}" title="User Updated Files">
${Object.keys(t).map(n=>`
<boltAction type="file" filePath="${n}">
${t[n].content}
</boltAction>
`).join(`
`)}
</boltArtifact>
  `;async function Eie(t){const e=n=>t.some(r=>r.path.endsWith(n));if(e("package.json")){const n=t.find(r=>r.path.endsWith("package.json"));if(!n)return{type:"",setupCommand:"",followupMessage:""};try{const i=JSON.parse(n.content)?.scripts||{},o=["dev","start","preview"].find(a=>i[a]);return o?{type:"Node.js",setupCommand:"npm install",startCommand:`npm run ${o}`,followupMessage:`Found "${o}" script in package.json. Running "npm run ${o}" after installation.`}:{type:"Node.js",setupCommand:"npm install",followupMessage:"Would you like me to inspect package.json to determine the available scripts for running this project?"}}catch(r){return console.error("Error parsing package.json:",r),{type:"",setupCommand:"",followupMessage:""}}}return e("index.html")?{type:"Static",startCommand:"npx --yes serve",followupMessage:""}:{type:"",setupCommand:"",followupMessage:""}}function kie(t){if(!t.setupCommand&&!t.startCommand)return null;let e="";return t.setupCommand&&(e+=`
<boltAction type="shell">${t.setupCommand}</boltAction>`),t.startCommand&&(e+=`
<boltAction type="start">${t.startCommand}</boltAction>
`),{role:"assistant",content:`
<boltArtifact id="project-setup" title="Project Setup">
${e}
</boltArtifact>${t.followupMessage?`

${t.followupMessage}`:""}`,id:C1(),createdAt:new Date}}function LKe(t){const e=/(<boltArtifact[^>]*>)([\s\S]*?)(<\/boltArtifact>)/g;return t.replace(e,(n,r,i,s)=>{const o=r.replace(/</g,"&lt;").replace(/>/g,"&gt;"),a=s.replace(/</g,"&lt;").replace(/>/g,"&gt;");return`${o}${i}${a}`})}function RKe(t){const e=/(<boltAction[^>]*>)([\s\S]*?)(<\/boltAction>)/g;return t.replace(e,(n,r,i,s)=>{const o=r.replace(/</g,"&lt;").replace(/>/g,"&gt;"),a=s.replace(/</g,"&lt;").replace(/>/g,"&gt;");return`${o}${i}${a}`})}function Cie(t){return LKe(RKe(t))}const IKe=async(t,e,n)=>{const r=await Promise.all(t.map(async u=>new Promise((h,d)=>{const f=new FileReader;f.onload=()=>{const m=f.result,g=u.webkitRelativePath.split("/").slice(1).join("/");h({content:m,path:g})},f.onerror=d,f.readAsText(u)}))),i=await Eie(r),s=kie(i),o=e.length>0?`

Skipped ${e.length} binary files:
${e.map(u=>`- ${u}`).join(`
`)}`:"",a={role:"assistant",content:`I've imported the contents of the "${n}" folder.${o}

<boltArtifact id="imported-files" title="Imported Files" type="bundled" >
${r.map(u=>`<boltAction type="file" filePath="${u.path}">
${Cie(u.content)}
</boltAction>`).join(`

`)}
</boltArtifact>`,id:C1(),createdAt:new Date},c=[{role:"user",id:C1(),content:`Import the "${n}" folder`,createdAt:new Date},a];return s&&(c.push({role:"user",id:C1(),content:"Setup the codebase and Start the application"}),c.push(s)),c},OKe=cZ("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-bolt-elements-borderColor disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-bolt-elements-background text-bolt-elements-textPrimary hover:bg-bolt-elements-background-depth-2",destructive:"bg-red-500 text-white hover:bg-red-600",outline:"border border-input bg-transparent hover:bg-bolt-elements-background-depth-2 hover:text-bolt-elements-textPrimary",secondary:"bg-bolt-elements-background-depth-1 text-bolt-elements-textPrimary hover:bg-bolt-elements-background-depth-2",ghost:"hover:bg-bolt-elements-background-depth-1 hover:text-bolt-elements-textPrimary",link:"text-bolt-elements-textPrimary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o5=A.forwardRef(({className:t,variant:e,size:n,_asChild:r=!1,...i},s)=>p.jsx("button",{className:Ae(OKe({variant:e,size:n}),t),ref:s,...i}));o5.displayName="Button";const DKe=({className:t,importChat:e})=>{const[n,r]=A.useState(!1),i=async s=>{const a=Array.from(s.target.files||[]).filter(u=>{const h=u.webkitRelativePath.split("/").slice(1).join("/");return PKe(h)});if(a.length===0){const u=new Error("No valid files found");Ut.logError("File import failed - no valid files",u,{folderName:"Unknown Folder"}),He.error("No files found in the selected folder");return}if(a.length>TA){const u=new Error(`Too many files: ${a.length}`);Ut.logError("File import failed - too many files",u,{fileCount:a.length,maxFiles:TA}),He.error(`This folder contains ${a.length.toLocaleString()} files. This product is not yet optimized for very large projects. Please select a folder with fewer than ${TA.toLocaleString()} files.`);return}const l=a[0]?.webkitRelativePath.split("/")[0]||"Unknown Folder";r(!0);const c=He.loading(`Importing ${l}...`);try{const u=await Promise.all(a.map(async m=>({file:m,isBinary:await AKe(m)}))),h=u.filter(m=>!m.isBinary).map(m=>m.file),d=u.filter(m=>m.isBinary).map(m=>m.file.webkitRelativePath.split("/").slice(1).join("/"));if(h.length===0){const m=new Error("No text files found");Ut.logError("File import failed - no text files",m,{folderName:l}),He.error("No text files found in the selected folder");return}d.length>0&&(Ut.logWarning("Skipping binary files during import",{folderName:l,binaryCount:d.length}),He.info(`Skipping ${d.length} binary files`));const f=await IKe(h,d,l);e&&await e(l,[...f]),Ut.logSystem("Folder imported successfully",{folderName:l,textFileCount:h.length,binaryFileCount:d.length}),He.success("Folder imported successfully")}catch(u){Ut.logError("Failed to import folder",u,{folderName:l}),console.error("Failed to import folder:",u),He.error("Failed to import folder")}finally{r(!1),He.dismiss(c),s.target.value=""}};return p.jsxs(p.Fragment,{children:[p.jsx("input",{type:"file",id:"folder-import",className:"hidden",webkitdirectory:"",directory:"",onChange:i}),p.jsxs(o5,{onClick:()=>{document.getElementById("folder-import")?.click()},title:"Import Folder",variant:"outline",size:"lg",className:Ae("gap-2 bg-[#F5F5F5] dark:bg-[#252525]","text-bolt-elements-textPrimary dark:text-white","hover:bg-[#E5E5E5] dark:hover:bg-[#333333]","border-[#E5E5E5] dark:border-[#333333]","h-10 px-4 py-2 min-w-[120px] justify-center","transition-all duration-200 ease-in-out",t),disabled:n,children:[p.jsx("span",{className:"i-ph:upload-simple w-4 h-4"}),n?"Importing...":"Import Folder"]})]})};function MKe(t){return p.jsxs("div",{className:"flex flex-col items-center justify-center w-auto",children:[p.jsx("input",{type:"file",id:"chat-import",className:"hidden",accept:".json",onChange:async e=>{const n=e.target.files?.[0];if(n&&t){try{const r=new FileReader;r.onload=async i=>{try{const s=i.target?.result,o=JSON.parse(s);if(Array.isArray(o.messages)){await t(o.description||"Imported Chat",o.messages),He.success("Chat imported successfully");return}He.error("Invalid chat file format")}catch(s){s instanceof Error?He.error("Failed to parse chat file: "+s.message):He.error("Failed to parse chat file")}},r.onerror=()=>He.error("Failed to read chat file"),r.readAsText(n)}catch(r){He.error(r instanceof Error?r.message:"Failed to import chat")}e.target.value=""}else He.error("Something went wrong")}}),p.jsx("div",{className:"flex flex-col items-center gap-4 max-w-2xl text-center",children:p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(o5,{onClick:()=>{document.getElementById("chat-import")?.click()},variant:"outline",size:"lg",className:Ae("gap-2 bg-[#F5F5F5] dark:bg-[#252525]","text-bolt-elements-textPrimary dark:text-white","hover:bg-[#E5E5E5] dark:hover:bg-[#333333]","border-[#E5E5E5] dark:border-[#333333]","h-10 px-4 py-2 min-w-[120px] justify-center","transition-all duration-200 ease-in-out"),children:[p.jsx("span",{className:"i-ph:upload-simple w-4 h-4"}),"Import Chat"]}),p.jsx(DKe,{importChat:t,className:Ae("gap-2 bg-[#F5F5F5] dark:bg-[#252525]","text-bolt-elements-textPrimary dark:text-white","hover:bg-[#E5E5E5] dark:hover:bg-[#333333]","border border-[#E5E5E5] dark:border-[#333333]","h-10 px-4 py-2 min-w-[120px] justify-center","transition-all duration-200 ease-in-out rounded-lg")})]})})]})}const jKe=[{text:"Build a todo app in React using Tailwind"},{text:"Build a simple blog using Astro"},{text:"Create a cookie consent form using Material UI"},{text:"Make a space invaders game"},{text:"Make a Tic Tac Toe game in html, css and js only"}];function FKe(t){return p.jsx("div",{id:"examples",className:"relative flex flex-col gap-9 w-full max-w-3xl mx-auto flex justify-center mt-6",children:p.jsx("div",{className:"flex flex-wrap justify-center gap-2",style:{animation:".25s ease-out 0s 1 _fade-and-move-in_g2ptj_1 forwards"},children:jKe.map((e,n)=>p.jsx("button",{onClick:r=>{t?.(r,e.text)},className:"border border-bolt-elements-borderColor rounded-full bg-gray-50 hover:bg-gray-100 dark:bg-gray-950 dark:hover:bg-gray-900 text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary px-3 py-1 text-xs transition-theme",children:e.text},n))})})}var go=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof Qn>"u"||typeof Qn.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||go.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||go.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||go.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=go.DEFAULT_MAX_PENDING};go.DEFAULT_TIMEOUT=0;go.DEFAULT_MAX_OCCUPATION_TIME=0;go.DEFAULT_MAX_EXECUTION_TIME=0;go.DEFAULT_MAX_PENDING=1e3;go.prototype.acquire=function(t,e,n,r){if(Array.isArray(t))return this._acquireBatch(t,e,n,r);if(typeof e!="function")throw new Error("You must pass a function to execute");var i=null,s=null,o=null;typeof n!="function"&&(r=n,n=null,o=new this.Promise(function(v,x){i=v,s=x})),r=r||{};var a=!1,l=null,c=null,u=null,h=this,d=function(v,x,w){c&&(clearTimeout(c),c=null),u&&(clearTimeout(u),u=null),v&&(h.queues[t]&&h.queues[t].length===0&&delete h.queues[t],h.domainReentrant&&delete h.domains[t]),a||(o?x?s(x):i(w):typeof n=="function"&&n(x,w),a=!0),v&&h.queues[t]&&h.queues[t].length>0&&h.queues[t].shift()()},f=function(v){if(a)return d(v);l&&(clearTimeout(l),l=null),h.domainReentrant&&v&&(h.domains[t]=Qn.domain);var x=r.maxExecutionTime||h.maxExecutionTime;if(x&&(u=setTimeout(function(){h.queues[t]&&d(v,new Error("Maximum execution time is exceeded "+t))},x)),e.length===1){var w=!1;try{e(function(S,E){w||(w=!0,d(v,S,E))})}catch(S){w||(w=!0,d(v,S))}}else h._promiseTry(function(){return e()}).then(function(S){d(v,void 0,S)},function(S){d(v,S)})};h.domainReentrant&&Qn.domain&&(f=Qn.domain.bind(f));var m=r.maxPending||h.maxPending;if(!h.queues[t])h.queues[t]=[],f(!0);else if(h.domainReentrant&&Qn.domain&&Qn.domain===h.domains[t])f(!1);else if(h.queues[t].length>=m)d(!1,new Error("Too many pending tasks in queue "+t));else{var g=function(){f(!0)};r.skipQueue?h.queues[t].unshift(g):h.queues[t].push(g);var b=r.timeout||h.timeout;b&&(l=setTimeout(function(){l=null,d(!1,new Error("async-lock timed out in queue "+t))},b))}var y=r.maxOccupationTime||h.maxOccupationTime;if(y&&(c=setTimeout(function(){h.queues[t]&&d(!1,new Error("Maximum occupation time is exceeded in queue "+t))},y)),o)return o};go.prototype._acquireBatch=function(t,e,n,r){typeof n!="function"&&(r=n,n=null);var i=this,s=function(a,l){return function(c){i.acquire(a,l,c,r)}},o=t.reduceRight(function(a,l){return s(l,a)},e);if(typeof n=="function")o(n);else return new this.Promise(function(a,l){o.length===1?o(function(c,u){c?l(c):a(u)}):a(o())})};go.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0};go.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(e){return this.Promise.reject(e)}};var BKe=go,UKe=BKe;const $y=_s(UKe);var xN={exports:{}};typeof Object.create=="function"?xN.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:xN.exports=function(e,n){if(n){e.super_=n;var r=function(){};r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e}};var $Ke=xN.exports,_N={exports:{}};const HKe=Pae(cle);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var n=HKe,r=n.Buffer;function i(o,a){for(var l in o)a[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=s);function s(o,a,l){return r(o,a,l)}s.prototype=Object.create(r.prototype),i(r,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=r(o);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(_N,_N.exports);var Tie=_N.exports,Aie=Tie.Buffer;function a5(t,e){this._block=Aie.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}a5.prototype.update=function(t,e){typeof t=="string"&&(e=e||"utf8",t=Aie.from(t,e));for(var n=this._block,r=this._blockSize,i=t.length,s=this._len,o=0;o<i;){for(var a=s%r,l=Math.min(i-o,r-a),c=0;c<l;c++)n[a+c]=t[o+c];s+=l,o+=l,s%r===0&&this._update(n)}return this._len+=i,this};a5.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=this._len*8;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var r=(n&4294967295)>>>0,i=(n-r)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var s=this._hash();return t?s.toString(t):s};a5.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var zKe=a5,VKe=$Ke,Pie=zKe,WKe=Tie.Buffer,GKe=[1518500249,1859775393,-1894007588,-899497514],qKe=new Array(80);function $v(){this.init(),this._w=qKe,Pie.call(this,64,56)}VKe($v,Pie);$v.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function KKe(t){return t<<1|t>>>31}function YKe(t){return t<<5|t>>>27}function XKe(t){return t<<30|t>>>2}function ZKe(t,e,n,r){return t===0?e&n|~e&r:t===2?e&n|e&r|n&r:e^n^r}$v.prototype._update=function(t){for(var e=this._w,n=this._a|0,r=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=0;a<16;++a)e[a]=t.readInt32BE(a*4);for(;a<80;++a)e[a]=KKe(e[a-3]^e[a-8]^e[a-14]^e[a-16]);for(var l=0;l<80;++l){var c=~~(l/20),u=YKe(n)+ZKe(c,r,i,s)+o+e[l]+GKe[c]|0;o=s,s=i,i=XKe(r),r=n,n=u}this._a=n+this._a|0,this._b=r+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0};$v.prototype._hash=function(){var t=WKe.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var JKe=$v;const Nie=_s(JKe);var Lie={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */(function(t){(function(e){e(typeof DO_NOT_EXPORT_CRC>"u"?t:{})})(function(e){e.version="1.2.2";function n(){for(var _=0,L=new Array(256),R=0;R!=256;++R)_=R,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,L[R]=_;return typeof Int32Array<"u"?new Int32Array(L):L}var r=n();function i(_){var L=0,R=0,C=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(C=0;C!=256;++C)P[C]=_[C];for(C=0;C!=256;++C)for(R=_[C],L=256+C;L<4096;L+=256)R=P[L]=R>>>8^_[R&255];var O=[];for(C=1;C!=16;++C)O[C-1]=typeof Int32Array<"u"?P.subarray(C*256,C*256+256):P.slice(C*256,C*256+256);return O}var s=i(r),o=s[0],a=s[1],l=s[2],c=s[3],u=s[4],h=s[5],d=s[6],f=s[7],m=s[8],g=s[9],b=s[10],y=s[11],v=s[12],x=s[13],w=s[14];function S(_,L){for(var R=L^-1,C=0,P=_.length;C<P;)R=R>>>8^r[(R^_.charCodeAt(C++))&255];return~R}function E(_,L){for(var R=L^-1,C=_.length-15,P=0;P<C;)R=w[_[P++]^R&255]^x[_[P++]^R>>8&255]^v[_[P++]^R>>16&255]^y[_[P++]^R>>>24]^b[_[P++]]^g[_[P++]]^m[_[P++]]^f[_[P++]]^d[_[P++]]^h[_[P++]]^u[_[P++]]^c[_[P++]]^l[_[P++]]^a[_[P++]]^o[_[P++]]^r[_[P++]];for(C+=15;P<C;)R=R>>>8^r[(R^_[P++])&255];return~R}function k(_,L){for(var R=L^-1,C=0,P=_.length,O=0,N=0;C<P;)O=_.charCodeAt(C++),O<128?R=R>>>8^r[(R^O)&255]:O<2048?(R=R>>>8^r[(R^(192|O>>6&31))&255],R=R>>>8^r[(R^(128|O&63))&255]):O>=55296&&O<57344?(O=(O&1023)+64,N=_.charCodeAt(C++)&1023,R=R>>>8^r[(R^(240|O>>8&7))&255],R=R>>>8^r[(R^(128|O>>2&63))&255],R=R>>>8^r[(R^(128|N>>6&15|(O&3)<<4))&255],R=R>>>8^r[(R^(128|N&63))&255]):(R=R>>>8^r[(R^(224|O>>12&15))&255],R=R>>>8^r[(R^(128|O>>6&63))&255],R=R>>>8^r[(R^(128|O&63))&255]);return~R}e.table=r,e.bstr=S,e.buf=E,e.str=k})})(Lie);const QKe=_s(Lie);var cu={};(function(t){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(s,o){return Object.prototype.hasOwnProperty.call(s,o)}t.assign=function(s){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var a=o.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(var l in a)n(a,l)&&(s[l]=a[l])}}return s},t.shrinkBuf=function(s,o){return s.length===o?s:s.subarray?s.subarray(0,o):(s.length=o,s)};var r={arraySet:function(s,o,a,l,c){if(o.subarray&&s.subarray){s.set(o.subarray(a,a+l),c);return}for(var u=0;u<l;u++)s[c+u]=o[a+u]},flattenChunks:function(s){var o,a,l,c,u,h;for(l=0,o=0,a=s.length;o<a;o++)l+=s[o].length;for(h=new Uint8Array(l),c=0,o=0,a=s.length;o<a;o++)u=s[o],h.set(u,c),c+=u.length;return h}},i={arraySet:function(s,o,a,l,c){for(var u=0;u<l;u++)s[c+u]=o[a+u]},flattenChunks:function(s){return[].concat.apply([],s)}};t.setTyped=function(s){s?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(e)})(cu);var Hv={},cc={},r0={},eYe=cu,tYe=4,QU=0,e$=1,nYe=2;function i0(t){for(var e=t.length;--e>=0;)t[e]=0}var rYe=0,Rie=1,iYe=2,sYe=3,oYe=258,JO=29,zv=256,Hy=zv+1+JO,Bm=30,QO=19,Iie=2*Hy+1,Ud=15,AA=16,aYe=7,eD=256,Oie=16,Die=17,Mie=18,wN=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],w2=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],lYe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],jie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],cYe=512,Pc=new Array((Hy+2)*2);i0(Pc);var T1=new Array(Bm*2);i0(T1);var zy=new Array(cYe);i0(zy);var Vy=new Array(oYe-sYe+1);i0(Vy);var tD=new Array(JO);i0(tD);var yE=new Array(Bm);i0(yE);function PA(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}var Fie,Bie,Uie;function NA(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function $ie(t){return t<256?zy[t]:zy[256+(t>>>7)]}function Wy(t,e){t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255}function Us(t,e,n){t.bi_valid>AA-n?(t.bi_buf|=e<<t.bi_valid&65535,Wy(t,t.bi_buf),t.bi_buf=e>>AA-t.bi_valid,t.bi_valid+=n-AA):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function Ol(t,e,n){Us(t,n[e*2],n[e*2+1])}function Hie(t,e){var n=0;do n|=t&1,t>>>=1,n<<=1;while(--e>0);return n>>>1}function uYe(t){t.bi_valid===16?(Wy(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)}function hYe(t,e){var n=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,s=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,l=e.stat_desc.max_length,c,u,h,d,f,m,g=0;for(d=0;d<=Ud;d++)t.bl_count[d]=0;for(n[t.heap[t.heap_max]*2+1]=0,c=t.heap_max+1;c<Iie;c++)u=t.heap[c],d=n[n[u*2+1]*2+1]+1,d>l&&(d=l,g++),n[u*2+1]=d,!(u>r)&&(t.bl_count[d]++,f=0,u>=a&&(f=o[u-a]),m=n[u*2],t.opt_len+=m*(d+f),s&&(t.static_len+=m*(i[u*2+1]+f)));if(g!==0){do{for(d=l-1;t.bl_count[d]===0;)d--;t.bl_count[d]--,t.bl_count[d+1]+=2,t.bl_count[l]--,g-=2}while(g>0);for(d=l;d!==0;d--)for(u=t.bl_count[d];u!==0;)h=t.heap[--c],!(h>r)&&(n[h*2+1]!==d&&(t.opt_len+=(d-n[h*2+1])*n[h*2],n[h*2+1]=d),u--)}}function zie(t,e,n){var r=new Array(Ud+1),i=0,s,o;for(s=1;s<=Ud;s++)r[s]=i=i+n[s-1]<<1;for(o=0;o<=e;o++){var a=t[o*2+1];a!==0&&(t[o*2]=Hie(r[a]++,a))}}function dYe(){var t,e,n,r,i,s=new Array(Ud+1);for(n=0,r=0;r<JO-1;r++)for(tD[r]=n,t=0;t<1<<wN[r];t++)Vy[n++]=r;for(Vy[n-1]=r,i=0,r=0;r<16;r++)for(yE[r]=i,t=0;t<1<<w2[r];t++)zy[i++]=r;for(i>>=7;r<Bm;r++)for(yE[r]=i<<7,t=0;t<1<<w2[r]-7;t++)zy[256+i++]=r;for(e=0;e<=Ud;e++)s[e]=0;for(t=0;t<=143;)Pc[t*2+1]=8,t++,s[8]++;for(;t<=255;)Pc[t*2+1]=9,t++,s[9]++;for(;t<=279;)Pc[t*2+1]=7,t++,s[7]++;for(;t<=287;)Pc[t*2+1]=8,t++,s[8]++;for(zie(Pc,Hy+1,s),t=0;t<Bm;t++)T1[t*2+1]=5,T1[t*2]=Hie(t,5);Fie=new PA(Pc,wN,zv+1,Hy,Ud),Bie=new PA(T1,w2,0,Bm,Ud),Uie=new PA(new Array(0),lYe,0,QO,aYe)}function Vie(t){var e;for(e=0;e<Hy;e++)t.dyn_ltree[e*2]=0;for(e=0;e<Bm;e++)t.dyn_dtree[e*2]=0;for(e=0;e<QO;e++)t.bl_tree[e*2]=0;t.dyn_ltree[eD*2]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function Wie(t){t.bi_valid>8?Wy(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function fYe(t,e,n,r){Wie(t),Wy(t,n),Wy(t,~n),eYe.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}function t$(t,e,n,r){var i=e*2,s=n*2;return t[i]<t[s]||t[i]===t[s]&&r[e]<=r[n]}function LA(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&t$(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!t$(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function n$(t,e,n){var r,i,s=0,o,a;if(t.last_lit!==0)do r=t.pending_buf[t.d_buf+s*2]<<8|t.pending_buf[t.d_buf+s*2+1],i=t.pending_buf[t.l_buf+s],s++,r===0?Ol(t,i,e):(o=Vy[i],Ol(t,o+zv+1,e),a=wN[o],a!==0&&(i-=tD[o],Us(t,i,a)),r--,o=$ie(r),Ol(t,o,n),a=w2[o],a!==0&&(r-=yE[o],Us(t,r,a)));while(s<t.last_lit);Ol(t,eD,e)}function SN(t,e){var n=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.elems,o,a,l=-1,c;for(t.heap_len=0,t.heap_max=Iie,o=0;o<s;o++)n[o*2]!==0?(t.heap[++t.heap_len]=l=o,t.depth[o]=0):n[o*2+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=l<2?++l:0,n[c*2]=1,t.depth[c]=0,t.opt_len--,i&&(t.static_len-=r[c*2+1]);for(e.max_code=l,o=t.heap_len>>1;o>=1;o--)LA(t,n,o);c=s;do o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],LA(t,n,1),a=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=a,n[c*2]=n[o*2]+n[a*2],t.depth[c]=(t.depth[o]>=t.depth[a]?t.depth[o]:t.depth[a])+1,n[o*2+1]=n[a*2+1]=c,t.heap[1]=c++,LA(t,n,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],hYe(t,e),zie(n,l,t.bl_count)}function r$(t,e,n){var r,i=-1,s,o=e[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),e[(n+1)*2+1]=65535,r=0;r<=n;r++)s=o,o=e[(r+1)*2+1],!(++a<l&&s===o)&&(a<c?t.bl_tree[s*2]+=a:s!==0?(s!==i&&t.bl_tree[s*2]++,t.bl_tree[Oie*2]++):a<=10?t.bl_tree[Die*2]++:t.bl_tree[Mie*2]++,a=0,i=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4))}function i$(t,e,n){var r,i=-1,s,o=e[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),r=0;r<=n;r++)if(s=o,o=e[(r+1)*2+1],!(++a<l&&s===o)){if(a<c)do Ol(t,s,t.bl_tree);while(--a!==0);else s!==0?(s!==i&&(Ol(t,s,t.bl_tree),a--),Ol(t,Oie,t.bl_tree),Us(t,a-3,2)):a<=10?(Ol(t,Die,t.bl_tree),Us(t,a-3,3)):(Ol(t,Mie,t.bl_tree),Us(t,a-11,7));a=0,i=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4)}}function pYe(t){var e;for(r$(t,t.dyn_ltree,t.l_desc.max_code),r$(t,t.dyn_dtree,t.d_desc.max_code),SN(t,t.bl_desc),e=QO-1;e>=3&&t.bl_tree[jie[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e}function mYe(t,e,n,r){var i;for(Us(t,e-257,5),Us(t,n-1,5),Us(t,r-4,4),i=0;i<r;i++)Us(t,t.bl_tree[jie[i]*2+1],3);i$(t,t.dyn_ltree,e-1),i$(t,t.dyn_dtree,n-1)}function gYe(t){var e=4093624447,n;for(n=0;n<=31;n++,e>>>=1)if(e&1&&t.dyn_ltree[n*2]!==0)return QU;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return e$;for(n=32;n<zv;n++)if(t.dyn_ltree[n*2]!==0)return e$;return QU}var s$=!1;function bYe(t){s$||(dYe(),s$=!0),t.l_desc=new NA(t.dyn_ltree,Fie),t.d_desc=new NA(t.dyn_dtree,Bie),t.bl_desc=new NA(t.bl_tree,Uie),t.bi_buf=0,t.bi_valid=0,Vie(t)}function Gie(t,e,n,r){Us(t,(rYe<<1)+(r?1:0),3),fYe(t,e,n)}function yYe(t){Us(t,Rie<<1,3),Ol(t,eD,Pc),uYe(t)}function vYe(t,e,n,r){var i,s,o=0;t.level>0?(t.strm.data_type===nYe&&(t.strm.data_type=gYe(t)),SN(t,t.l_desc),SN(t,t.d_desc),o=pYe(t),i=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&e!==-1?Gie(t,e,n,r):t.strategy===tYe||s===i?(Us(t,(Rie<<1)+(r?1:0),3),n$(t,Pc,T1)):(Us(t,(iYe<<1)+(r?1:0),3),mYe(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),n$(t,t.dyn_ltree,t.dyn_dtree)),Vie(t),r&&Wie(t)}function xYe(t,e,n){return t.pending_buf[t.d_buf+t.last_lit*2]=e>>>8&255,t.pending_buf[t.d_buf+t.last_lit*2+1]=e&255,t.pending_buf[t.l_buf+t.last_lit]=n&255,t.last_lit++,e===0?t.dyn_ltree[n*2]++:(t.matches++,e--,t.dyn_ltree[(Vy[n]+zv+1)*2]++,t.dyn_dtree[$ie(e)*2]++),t.last_lit===t.lit_bufsize-1}r0._tr_init=bYe;r0._tr_stored_block=Gie;r0._tr_flush_block=vYe;r0._tr_tally=xYe;r0._tr_align=yYe;function _Ye(t,e,n,r){for(var i=t&65535|0,s=t>>>16&65535|0,o=0;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+e[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0}var qie=_Ye;function wYe(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e}var SYe=wYe();function EYe(t,e,n,r){var i=SYe,s=r+n;t^=-1;for(var o=r;o<s;o++)t=t>>>8^i[(t^e[o])&255];return t^-1}var Kie=EYe,nD={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},fs=cu,ta=r0,Yie=qie,ju=Kie,kYe=nD,Yf=0,CYe=1,TYe=3,ch=4,o$=5,Dl=0,a$=1,na=-2,AYe=-3,RA=-5,PYe=-1,NYe=1,Pw=2,LYe=3,RYe=4,IYe=0,OYe=2,l5=8,DYe=9,MYe=15,jYe=8,FYe=29,BYe=256,EN=BYe+1+FYe,UYe=30,$Ye=19,HYe=2*EN+1,zYe=15,bn=3,nh=258,Fa=nh+bn+1,VYe=32,c5=42,kN=69,S2=73,E2=91,k2=103,$d=113,Wb=666,si=1,Vv=2,Cf=3,s0=4,WYe=3;function rh(t,e){return t.msg=kYe[e],e}function l$(t){return(t<<1)-(t>4?9:0)}function Yu(t){for(var e=t.length;--e>=0;)t[e]=0}function Fu(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),n!==0&&(fs.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,e.pending===0&&(e.pending_out=0))}function Di(t,e){ta._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Fu(t.strm)}function Ln(t,e){t.pending_buf[t.pending++]=e}function vb(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255}function GYe(t,e,n,r){var i=t.avail_in;return i>r&&(i=r),i===0?0:(t.avail_in-=i,fs.arraySet(e,t.input,t.next_in,i,n),t.state.wrap===1?t.adler=Yie(t.adler,e,i,n):t.state.wrap===2&&(t.adler=ju(t.adler,e,i,n)),t.next_in+=i,t.total_in+=i,i)}function Xie(t,e){var n=t.max_chain_length,r=t.strstart,i,s,o=t.prev_length,a=t.nice_match,l=t.strstart>t.w_size-Fa?t.strstart-(t.w_size-Fa):0,c=t.window,u=t.w_mask,h=t.prev,d=t.strstart+nh,f=c[r+o-1],m=c[r+o];t.prev_length>=t.good_match&&(n>>=2),a>t.lookahead&&(a=t.lookahead);do if(i=e,!(c[i+o]!==m||c[i+o-1]!==f||c[i]!==c[r]||c[++i]!==c[r+1])){r+=2,i++;do;while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<d);if(s=nh-(d-r),r=d-nh,s>o){if(t.match_start=e,o=s,s>=a)break;f=c[r+o-1],m=c[r+o]}}while((e=h[e&u])>l&&--n!==0);return o<=t.lookahead?o:t.lookahead}function Tf(t){var e=t.w_size,n,r,i,s,o;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-Fa)){fs.arraySet(t.window,t.window,e,e,0),t.match_start-=e,t.strstart-=e,t.block_start-=e,r=t.hash_size,n=r;do i=t.head[--n],t.head[n]=i>=e?i-e:0;while(--r);r=e,n=r;do i=t.prev[--n],t.prev[n]=i>=e?i-e:0;while(--r);s+=e}if(t.strm.avail_in===0)break;if(r=GYe(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=r,t.lookahead+t.insert>=bn)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+bn-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<bn)););}while(t.lookahead<Fa&&t.strm.avail_in!==0)}function qYe(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Tf(t),t.lookahead===0&&e===Yf)return si;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((t.strstart===0||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,Di(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-Fa&&(Di(t,!1),t.strm.avail_out===0))return si}return t.insert=0,e===ch?(Di(t,!0),t.strm.avail_out===0?Cf:s0):(t.strstart>t.block_start&&(Di(t,!1),t.strm.avail_out===0),si)}function IA(t,e){for(var n,r;;){if(t.lookahead<Fa){if(Tf(t),t.lookahead<Fa&&e===Yf)return si;if(t.lookahead===0)break}if(n=0,t.lookahead>=bn&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+bn-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),n!==0&&t.strstart-n<=t.w_size-Fa&&(t.match_length=Xie(t,n)),t.match_length>=bn)if(r=ta._tr_tally(t,t.strstart-t.match_start,t.match_length-bn),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=bn){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+bn-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=ta._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(Di(t,!1),t.strm.avail_out===0))return si}return t.insert=t.strstart<bn-1?t.strstart:bn-1,e===ch?(Di(t,!0),t.strm.avail_out===0?Cf:s0):t.last_lit&&(Di(t,!1),t.strm.avail_out===0)?si:Vv}function $p(t,e){for(var n,r,i;;){if(t.lookahead<Fa){if(Tf(t),t.lookahead<Fa&&e===Yf)return si;if(t.lookahead===0)break}if(n=0,t.lookahead>=bn&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+bn-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=bn-1,n!==0&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-Fa&&(t.match_length=Xie(t,n),t.match_length<=5&&(t.strategy===NYe||t.match_length===bn&&t.strstart-t.match_start>4096)&&(t.match_length=bn-1)),t.prev_length>=bn&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-bn,r=ta._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-bn),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+bn-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=bn-1,t.strstart++,r&&(Di(t,!1),t.strm.avail_out===0))return si}else if(t.match_available){if(r=ta._tr_tally(t,0,t.window[t.strstart-1]),r&&Di(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return si}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=ta._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<bn-1?t.strstart:bn-1,e===ch?(Di(t,!0),t.strm.avail_out===0?Cf:s0):t.last_lit&&(Di(t,!1),t.strm.avail_out===0)?si:Vv}function KYe(t,e){for(var n,r,i,s,o=t.window;;){if(t.lookahead<=nh){if(Tf(t),t.lookahead<=nh&&e===Yf)return si;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=bn&&t.strstart>0&&(i=t.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){s=t.strstart+nh;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);t.match_length=nh-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=bn?(n=ta._tr_tally(t,1,t.match_length-bn),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=ta._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(Di(t,!1),t.strm.avail_out===0))return si}return t.insert=0,e===ch?(Di(t,!0),t.strm.avail_out===0?Cf:s0):t.last_lit&&(Di(t,!1),t.strm.avail_out===0)?si:Vv}function YYe(t,e){for(var n;;){if(t.lookahead===0&&(Tf(t),t.lookahead===0)){if(e===Yf)return si;break}if(t.match_length=0,n=ta._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(Di(t,!1),t.strm.avail_out===0))return si}return t.insert=0,e===ch?(Di(t,!0),t.strm.avail_out===0?Cf:s0):t.last_lit&&(Di(t,!1),t.strm.avail_out===0)?si:Vv}function pl(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}var pm;pm=[new pl(0,0,0,0,qYe),new pl(4,4,8,4,IA),new pl(4,5,16,8,IA),new pl(4,6,32,32,IA),new pl(4,4,16,16,$p),new pl(8,16,32,32,$p),new pl(8,16,128,128,$p),new pl(8,32,128,256,$p),new pl(32,128,258,1024,$p),new pl(32,258,258,4096,$p)];function XYe(t){t.window_size=2*t.w_size,Yu(t.head),t.max_lazy_match=pm[t.level].max_lazy,t.good_match=pm[t.level].good_length,t.nice_match=pm[t.level].nice_length,t.max_chain_length=pm[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=bn-1,t.match_available=0,t.ins_h=0}function ZYe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=l5,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new fs.Buf16(HYe*2),this.dyn_dtree=new fs.Buf16((2*UYe+1)*2),this.bl_tree=new fs.Buf16((2*$Ye+1)*2),Yu(this.dyn_ltree),Yu(this.dyn_dtree),Yu(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new fs.Buf16(zYe+1),this.heap=new fs.Buf16(2*EN+1),Yu(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new fs.Buf16(2*EN+1),Yu(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Zie(t){var e;return!t||!t.state?rh(t,na):(t.total_in=t.total_out=0,t.data_type=OYe,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?c5:$d,t.adler=e.wrap===2?0:1,e.last_flush=Yf,ta._tr_init(e),Dl)}function Jie(t){var e=Zie(t);return e===Dl&&XYe(t.state),e}function JYe(t,e){return!t||!t.state||t.state.wrap!==2?na:(t.state.gzhead=e,Dl)}function Qie(t,e,n,r,i,s){if(!t)return na;var o=1;if(e===PYe&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>DYe||n!==l5||r<8||r>15||e<0||e>9||s<0||s>RYe)return rh(t,na);r===8&&(r=9);var a=new ZYe;return t.state=a,a.strm=t,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+bn-1)/bn),a.window=new fs.Buf8(a.w_size*2),a.head=new fs.Buf16(a.hash_size),a.prev=new fs.Buf16(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new fs.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=e,a.strategy=s,a.method=n,Jie(t)}function QYe(t,e){return Qie(t,e,l5,MYe,jYe,IYe)}function eXe(t,e){var n,r,i,s;if(!t||!t.state||e>o$||e<0)return t?rh(t,na):na;if(r=t.state,!t.output||!t.input&&t.avail_in!==0||r.status===Wb&&e!==ch)return rh(t,t.avail_out===0?RA:na);if(r.strm=t,n=r.last_flush,r.last_flush=e,r.status===c5)if(r.wrap===2)t.adler=0,Ln(r,31),Ln(r,139),Ln(r,8),r.gzhead?(Ln(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Ln(r,r.gzhead.time&255),Ln(r,r.gzhead.time>>8&255),Ln(r,r.gzhead.time>>16&255),Ln(r,r.gzhead.time>>24&255),Ln(r,r.level===9?2:r.strategy>=Pw||r.level<2?4:0),Ln(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(Ln(r,r.gzhead.extra.length&255),Ln(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=ju(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=kN):(Ln(r,0),Ln(r,0),Ln(r,0),Ln(r,0),Ln(r,0),Ln(r,r.level===9?2:r.strategy>=Pw||r.level<2?4:0),Ln(r,WYe),r.status=$d);else{var o=l5+(r.w_bits-8<<4)<<8,a=-1;r.strategy>=Pw||r.level<2?a=0:r.level<6?a=1:r.level===6?a=2:a=3,o|=a<<6,r.strstart!==0&&(o|=VYe),o+=31-o%31,r.status=$d,vb(r,o),r.strstart!==0&&(vb(r,t.adler>>>16),vb(r,t.adler&65535)),t.adler=1}if(r.status===kN)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(r.gzhead.extra.length&65535)&&!(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=ju(t.adler,r.pending_buf,r.pending-i,i)),Fu(t),i=r.pending,r.pending===r.pending_buf_size));)Ln(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(t.adler=ju(t.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=S2)}else r.status=S2;if(r.status===S2)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=ju(t.adler,r.pending_buf,r.pending-i,i)),Fu(t),i=r.pending,r.pending===r.pending_buf_size)){s=1;break}r.gzindex<r.gzhead.name.length?s=r.gzhead.name.charCodeAt(r.gzindex++)&255:s=0,Ln(r,s)}while(s!==0);r.gzhead.hcrc&&r.pending>i&&(t.adler=ju(t.adler,r.pending_buf,r.pending-i,i)),s===0&&(r.gzindex=0,r.status=E2)}else r.status=E2;if(r.status===E2)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=ju(t.adler,r.pending_buf,r.pending-i,i)),Fu(t),i=r.pending,r.pending===r.pending_buf_size)){s=1;break}r.gzindex<r.gzhead.comment.length?s=r.gzhead.comment.charCodeAt(r.gzindex++)&255:s=0,Ln(r,s)}while(s!==0);r.gzhead.hcrc&&r.pending>i&&(t.adler=ju(t.adler,r.pending_buf,r.pending-i,i)),s===0&&(r.status=k2)}else r.status=k2;if(r.status===k2&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Fu(t),r.pending+2<=r.pending_buf_size&&(Ln(r,t.adler&255),Ln(r,t.adler>>8&255),t.adler=0,r.status=$d)):r.status=$d),r.pending!==0){if(Fu(t),t.avail_out===0)return r.last_flush=-1,Dl}else if(t.avail_in===0&&l$(e)<=l$(n)&&e!==ch)return rh(t,RA);if(r.status===Wb&&t.avail_in!==0)return rh(t,RA);if(t.avail_in!==0||r.lookahead!==0||e!==Yf&&r.status!==Wb){var l=r.strategy===Pw?YYe(r,e):r.strategy===LYe?KYe(r,e):pm[r.level].func(r,e);if((l===Cf||l===s0)&&(r.status=Wb),l===si||l===Cf)return t.avail_out===0&&(r.last_flush=-1),Dl;if(l===Vv&&(e===CYe?ta._tr_align(r):e!==o$&&(ta._tr_stored_block(r,0,0,!1),e===TYe&&(Yu(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Fu(t),t.avail_out===0))return r.last_flush=-1,Dl}return e!==ch?Dl:r.wrap<=0?a$:(r.wrap===2?(Ln(r,t.adler&255),Ln(r,t.adler>>8&255),Ln(r,t.adler>>16&255),Ln(r,t.adler>>24&255),Ln(r,t.total_in&255),Ln(r,t.total_in>>8&255),Ln(r,t.total_in>>16&255),Ln(r,t.total_in>>24&255)):(vb(r,t.adler>>>16),vb(r,t.adler&65535)),Fu(t),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?Dl:a$)}function tXe(t){var e;return!t||!t.state?na:(e=t.state.status,e!==c5&&e!==kN&&e!==S2&&e!==E2&&e!==k2&&e!==$d&&e!==Wb?rh(t,na):(t.state=null,e===$d?rh(t,AYe):Dl))}function nXe(t,e){var n=e.length,r,i,s,o,a,l,c,u;if(!t||!t.state||(r=t.state,o=r.wrap,o===2||o===1&&r.status!==c5||r.lookahead))return na;for(o===1&&(t.adler=Yie(t.adler,e,n,0)),r.wrap=0,n>=r.w_size&&(o===0&&(Yu(r.head),r.strstart=0,r.block_start=0,r.insert=0),u=new fs.Buf8(r.w_size),fs.arraySet(u,e,n-r.w_size,r.w_size,0),e=u,n=r.w_size),a=t.avail_in,l=t.next_in,c=t.input,t.avail_in=n,t.next_in=0,t.input=e,Tf(r);r.lookahead>=bn;){i=r.strstart,s=r.lookahead-(bn-1);do r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+bn-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++;while(--s);r.strstart=i,r.lookahead=bn-1,Tf(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=bn-1,r.match_available=0,t.next_in=l,t.input=c,t.avail_in=a,r.wrap=o,Dl}cc.deflateInit=QYe;cc.deflateInit2=Qie;cc.deflateReset=Jie;cc.deflateResetKeep=Zie;cc.deflateSetHeader=JYe;cc.deflate=eXe;cc.deflateEnd=tXe;cc.deflateSetDictionary=nXe;cc.deflateInfo="pako deflate (from Nodeca project)";var Xf={},u5=cu,ese=!0,tse=!0;try{String.fromCharCode.apply(null,[0])}catch{ese=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{tse=!1}var Gy=new u5.Buf8(256);for(var Au=0;Au<256;Au++)Gy[Au]=Au>=252?6:Au>=248?5:Au>=240?4:Au>=224?3:Au>=192?2:1;Gy[254]=Gy[254]=1;Xf.string2buf=function(t){var e,n,r,i,s,o=t.length,a=0;for(i=0;i<o;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new u5.Buf8(a),s=0,i=0;s<a;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|n&63):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|n&63):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|n&63);return e};function nse(t,e){if(e<65534&&(t.subarray&&tse||!t.subarray&&ese))return String.fromCharCode.apply(null,u5.shrinkBuf(t,e));for(var n="",r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n}Xf.buf2binstring=function(t){return nse(t,t.length)};Xf.binstring2buf=function(t){for(var e=new u5.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e};Xf.buf2string=function(t,e){var n,r,i,s,o=e||t.length,a=new Array(o*2);for(r=0,n=0;n<o;){if(i=t[n++],i<128){a[r++]=i;continue}if(s=Gy[i],s>4){a[r++]=65533,n+=s-1;continue}for(i&=s===2?31:s===3?15:7;s>1&&n<o;)i=i<<6|t[n++]&63,s--;if(s>1){a[r++]=65533;continue}i<65536?a[r++]=i:(i-=65536,a[r++]=55296|i>>10&1023,a[r++]=56320|i&1023)}return nse(a,r)};Xf.utf8border=function(t,e){var n;for(e=e||t.length,e>t.length&&(e=t.length),n=e-1;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+Gy[t[n]]>e?n:e};function rXe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var rse=rXe,A1=cc,P1=cu,CN=Xf,TN=nD,iXe=rse,ise=Object.prototype.toString,sXe=0,OA=4,Um=0,c$=1,u$=2,oXe=-1,aXe=0,lXe=8;function Af(t){if(!(this instanceof Af))return new Af(t);this.options=P1.assign({level:oXe,method:lXe,chunkSize:16384,windowBits:15,memLevel:8,strategy:aXe,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new iXe,this.strm.avail_out=0;var n=A1.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==Um)throw new Error(TN[n]);if(e.header&&A1.deflateSetHeader(this.strm,e.header),e.dictionary){var r;if(typeof e.dictionary=="string"?r=CN.string2buf(e.dictionary):ise.call(e.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(e.dictionary):r=e.dictionary,n=A1.deflateSetDictionary(this.strm,r),n!==Um)throw new Error(TN[n]);this._dict_set=!0}}Af.prototype.push=function(t,e){var n=this.strm,r=this.options.chunkSize,i,s;if(this.ended)return!1;s=e===~~e?e:e===!0?OA:sXe,typeof t=="string"?n.input=CN.string2buf(t):ise.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new P1.Buf8(r),n.next_out=0,n.avail_out=r),i=A1.deflate(n,s),i!==c$&&i!==Um)return this.onEnd(i),this.ended=!0,!1;(n.avail_out===0||n.avail_in===0&&(s===OA||s===u$))&&(this.options.to==="string"?this.onData(CN.buf2binstring(P1.shrinkBuf(n.output,n.next_out))):this.onData(P1.shrinkBuf(n.output,n.next_out)))}while((n.avail_in>0||n.avail_out===0)&&i!==c$);return s===OA?(i=A1.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Um):(s===u$&&(this.onEnd(Um),n.avail_out=0),!0)};Af.prototype.onData=function(t){this.chunks.push(t)};Af.prototype.onEnd=function(t){t===Um&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=P1.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function rD(t,e){var n=new Af(e);if(n.push(t,!0),n.err)throw n.msg||TN[n.err];return n.result}function cXe(t,e){return e=e||{},e.raw=!0,rD(t,e)}function uXe(t,e){return e=e||{},e.gzip=!0,rD(t,e)}Hv.Deflate=Af;Hv.deflate=rD;Hv.deflateRaw=cXe;Hv.gzip=uXe;var Wv={},Za={},Nw=30,hXe=12,dXe=function(e,n){var r,i,s,o,a,l,c,u,h,d,f,m,g,b,y,v,x,w,S,E,k,_,L,R,C;r=e.state,i=e.next_in,R=e.input,s=i+(e.avail_in-5),o=e.next_out,C=e.output,a=o-(n-e.avail_out),l=o+(e.avail_out-257),c=r.dmax,u=r.wsize,h=r.whave,d=r.wnext,f=r.window,m=r.hold,g=r.bits,b=r.lencode,y=r.distcode,v=(1<<r.lenbits)-1,x=(1<<r.distbits)-1;e:do{g<15&&(m+=R[i++]<<g,g+=8,m+=R[i++]<<g,g+=8),w=b[m&v];t:for(;;){if(S=w>>>24,m>>>=S,g-=S,S=w>>>16&255,S===0)C[o++]=w&65535;else if(S&16){E=w&65535,S&=15,S&&(g<S&&(m+=R[i++]<<g,g+=8),E+=m&(1<<S)-1,m>>>=S,g-=S),g<15&&(m+=R[i++]<<g,g+=8,m+=R[i++]<<g,g+=8),w=y[m&x];n:for(;;){if(S=w>>>24,m>>>=S,g-=S,S=w>>>16&255,S&16){if(k=w&65535,S&=15,g<S&&(m+=R[i++]<<g,g+=8,g<S&&(m+=R[i++]<<g,g+=8)),k+=m&(1<<S)-1,k>c){e.msg="invalid distance too far back",r.mode=Nw;break e}if(m>>>=S,g-=S,S=o-a,k>S){if(S=k-S,S>h&&r.sane){e.msg="invalid distance too far back",r.mode=Nw;break e}if(_=0,L=f,d===0){if(_+=u-S,S<E){E-=S;do C[o++]=f[_++];while(--S);_=o-k,L=C}}else if(d<S){if(_+=u+d-S,S-=d,S<E){E-=S;do C[o++]=f[_++];while(--S);if(_=0,d<E){S=d,E-=S;do C[o++]=f[_++];while(--S);_=o-k,L=C}}}else if(_+=d-S,S<E){E-=S;do C[o++]=f[_++];while(--S);_=o-k,L=C}for(;E>2;)C[o++]=L[_++],C[o++]=L[_++],C[o++]=L[_++],E-=3;E&&(C[o++]=L[_++],E>1&&(C[o++]=L[_++]))}else{_=o-k;do C[o++]=C[_++],C[o++]=C[_++],C[o++]=C[_++],E-=3;while(E>2);E&&(C[o++]=C[_++],E>1&&(C[o++]=C[_++]))}}else if(S&64){e.msg="invalid distance code",r.mode=Nw;break e}else{w=y[(w&65535)+(m&(1<<S)-1)];continue n}break}}else if(S&64)if(S&32){r.mode=hXe;break e}else{e.msg="invalid literal/length code",r.mode=Nw;break e}else{w=b[(w&65535)+(m&(1<<S)-1)];continue t}break}}while(i<s&&o<l);E=g>>3,i-=E,g-=E<<3,m&=(1<<g)-1,e.next_in=i,e.next_out=o,e.avail_in=i<s?5+(s-i):5-(i-s),e.avail_out=o<l?257+(l-o):257-(o-l),r.hold=m,r.bits=g},h$=cu,Hp=15,d$=852,f$=592,p$=0,DA=1,m$=2,fXe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],pXe=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],mXe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],gXe=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],bXe=function(e,n,r,i,s,o,a,l){var c=l.bits,u=0,h=0,d=0,f=0,m=0,g=0,b=0,y=0,v=0,x=0,w,S,E,k,_,L=null,R=0,C,P=new h$.Buf16(Hp+1),O=new h$.Buf16(Hp+1),N=null,H=0,Q,X,J;for(u=0;u<=Hp;u++)P[u]=0;for(h=0;h<i;h++)P[n[r+h]]++;for(m=c,f=Hp;f>=1&&P[f]===0;f--);if(m>f&&(m=f),f===0)return s[o++]=1<<24|64<<16|0,s[o++]=1<<24|64<<16|0,l.bits=1,0;for(d=1;d<f&&P[d]===0;d++);for(m<d&&(m=d),y=1,u=1;u<=Hp;u++)if(y<<=1,y-=P[u],y<0)return-1;if(y>0&&(e===p$||f!==1))return-1;for(O[1]=0,u=1;u<Hp;u++)O[u+1]=O[u]+P[u];for(h=0;h<i;h++)n[r+h]!==0&&(a[O[n[r+h]]++]=h);if(e===p$?(L=N=a,C=19):e===DA?(L=fXe,R-=257,N=pXe,H-=257,C=256):(L=mXe,N=gXe,C=-1),x=0,h=0,u=d,_=o,g=m,b=0,E=-1,v=1<<m,k=v-1,e===DA&&v>d$||e===m$&&v>f$)return 1;for(;;){Q=u-b,a[h]<C?(X=0,J=a[h]):a[h]>C?(X=N[H+a[h]],J=L[R+a[h]]):(X=96,J=0),w=1<<u-b,S=1<<g,d=S;do S-=w,s[_+(x>>b)+S]=Q<<24|X<<16|J|0;while(S!==0);for(w=1<<u-1;x&w;)w>>=1;if(w!==0?(x&=w-1,x+=w):x=0,h++,--P[u]===0){if(u===f)break;u=n[r+a[h]]}if(u>m&&(x&k)!==E){for(b===0&&(b=m),_+=d,g=u-b,y=1<<g;g+b<f&&(y-=P[g+b],!(y<=0));)g++,y<<=1;if(v+=1<<g,e===DA&&v>d$||e===m$&&v>f$)return 1;E=x&k,s[E]=m<<24|g<<16|_-o|0}}return x!==0&&(s[_+x]=u-b<<24|64<<16|0),l.bits=m,0},bo=cu,AN=qie,ml=Kie,yXe=dXe,N1=bXe,vXe=0,sse=1,ose=2,g$=4,xXe=5,Lw=6,Pf=0,_Xe=1,wXe=2,la=-2,ase=-3,lse=-4,SXe=-5,b$=8,cse=1,y$=2,v$=3,x$=4,_$=5,w$=6,S$=7,E$=8,k$=9,C$=10,vE=11,Sc=12,MA=13,T$=14,jA=15,A$=16,P$=17,N$=18,L$=19,Rw=20,Iw=21,R$=22,I$=23,O$=24,D$=25,M$=26,FA=27,j$=28,F$=29,pr=30,use=31,EXe=32,kXe=852,CXe=592,TXe=15,AXe=TXe;function B$(t){return(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24)}function PXe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new bo.Buf16(320),this.work=new bo.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function hse(t){var e;return!t||!t.state?la:(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=cse,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new bo.Buf32(kXe),e.distcode=e.distdyn=new bo.Buf32(CXe),e.sane=1,e.back=-1,Pf)}function dse(t){var e;return!t||!t.state?la:(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,hse(t))}function fse(t,e){var n,r;return!t||!t.state||(r=t.state,e<0?(n=0,e=-e):(n=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?la:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,dse(t))}function pse(t,e){var n,r;return t?(r=new PXe,t.state=r,r.window=null,n=fse(t,e),n!==Pf&&(t.state=null),n):la}function NXe(t){return pse(t,AXe)}var U$=!0,BA,UA;function LXe(t){if(U$){var e;for(BA=new bo.Buf32(512),UA=new bo.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(N1(sse,t.lens,0,288,BA,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;N1(ose,t.lens,0,32,UA,0,t.work,{bits:5}),U$=!1}t.lencode=BA,t.lenbits=9,t.distcode=UA,t.distbits=5}function mse(t,e,n,r){var i,s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new bo.Buf8(s.wsize)),r>=s.wsize?(bo.arraySet(s.window,e,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),bo.arraySet(s.window,e,n-r,i,s.wnext),r-=i,r?(bo.arraySet(s.window,e,n-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}function RXe(t,e){var n,r,i,s,o,a,l,c,u,h,d,f,m,g,b=0,y,v,x,w,S,E,k,_,L=new bo.Buf8(4),R,C,P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&t.avail_in!==0)return la;n=t.state,n.mode===Sc&&(n.mode=MA),o=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,r=t.input,a=t.avail_in,c=n.hold,u=n.bits,h=a,d=l,_=Pf;e:for(;;)switch(n.mode){case cse:if(n.wrap===0){n.mode=MA;break}for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(n.wrap&2&&c===35615){n.check=0,L[0]=c&255,L[1]=c>>>8&255,n.check=ml(n.check,L,2,0),c=0,u=0,n.mode=y$;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=pr;break}if((c&15)!==b$){t.msg="unknown compression method",n.mode=pr;break}if(c>>>=4,u-=4,k=(c&15)+8,n.wbits===0)n.wbits=k;else if(k>n.wbits){t.msg="invalid window size",n.mode=pr;break}n.dmax=1<<k,t.adler=n.check=1,n.mode=c&512?C$:Sc,c=0,u=0;break;case y$:for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==b$){t.msg="unknown compression method",n.mode=pr;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=pr;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&(L[0]=c&255,L[1]=c>>>8&255,n.check=ml(n.check,L,2,0)),c=0,u=0,n.mode=v$;case v$:for(;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&(L[0]=c&255,L[1]=c>>>8&255,L[2]=c>>>16&255,L[3]=c>>>24&255,n.check=ml(n.check,L,4,0)),c=0,u=0,n.mode=x$;case x$:for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&(L[0]=c&255,L[1]=c>>>8&255,n.check=ml(n.check,L,2,0)),c=0,u=0,n.mode=_$;case _$:if(n.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&(L[0]=c&255,L[1]=c>>>8&255,n.check=ml(n.check,L,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=w$;case w$:if(n.flags&1024&&(f=n.length,f>a&&(f=a),f&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),bo.arraySet(n.head.extra,r,s,f,k)),n.flags&512&&(n.check=ml(n.check,r,f,s)),a-=f,s+=f,n.length-=f),n.length))break e;n.length=0,n.mode=S$;case S$:if(n.flags&2048){if(a===0)break e;f=0;do k=r[s+f++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k));while(k&&f<a);if(n.flags&512&&(n.check=ml(n.check,r,f,s)),a-=f,s+=f,k)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=E$;case E$:if(n.flags&4096){if(a===0)break e;f=0;do k=r[s+f++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k));while(k&&f<a);if(n.flags&512&&(n.check=ml(n.check,r,f,s)),a-=f,s+=f,k)break e}else n.head&&(n.head.comment=null);n.mode=k$;case k$:if(n.flags&512){for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(c!==(n.check&65535)){t.msg="header crc mismatch",n.mode=pr;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Sc;break;case C$:for(;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}t.adler=n.check=B$(c),c=0,u=0,n.mode=vE;case vE:if(n.havedict===0)return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=u,wXe;t.adler=n.check=1,n.mode=Sc;case Sc:if(e===xXe||e===Lw)break e;case MA:if(n.last){c>>>=u&7,u-=u&7,n.mode=FA;break}for(;u<3;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=T$;break;case 1:if(LXe(n),n.mode=Rw,e===Lw){c>>>=2,u-=2;break e}break;case 2:n.mode=P$;break;case 3:t.msg="invalid block type",n.mode=pr}c>>>=2,u-=2;break;case T$:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=pr;break}if(n.length=c&65535,c=0,u=0,n.mode=jA,e===Lw)break e;case jA:n.mode=A$;case A$:if(f=n.length,f){if(f>a&&(f=a),f>l&&(f=l),f===0)break e;bo.arraySet(i,r,s,f,o),a-=f,s+=f,l-=f,o+=f,n.length-=f;break}n.mode=Sc;break;case P$:for(;u<14;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=pr;break}n.have=0,n.mode=N$;case N$:for(;n.have<n.ncode;){for(;u<3;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.lens[P[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[P[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,R={bits:n.lenbits},_=N1(vXe,n.lens,0,19,n.lencode,0,n.work,R),n.lenbits=R.bits,_){t.msg="invalid code lengths set",n.mode=pr;break}n.have=0,n.mode=L$;case L$:for(;n.have<n.nlen+n.ndist;){for(;b=n.lencode[c&(1<<n.lenbits)-1],y=b>>>24,v=b>>>16&255,x=b&65535,!(y<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(x<16)c>>>=y,u-=y,n.lens[n.have++]=x;else{if(x===16){for(C=y+2;u<C;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(c>>>=y,u-=y,n.have===0){t.msg="invalid bit length repeat",n.mode=pr;break}k=n.lens[n.have-1],f=3+(c&3),c>>>=2,u-=2}else if(x===17){for(C=y+3;u<C;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=y,u-=y,k=0,f=3+(c&7),c>>>=3,u-=3}else{for(C=y+7;u<C;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=y,u-=y,k=0,f=11+(c&127),c>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=pr;break}for(;f--;)n.lens[n.have++]=k}}if(n.mode===pr)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=pr;break}if(n.lenbits=9,R={bits:n.lenbits},_=N1(sse,n.lens,0,n.nlen,n.lencode,0,n.work,R),n.lenbits=R.bits,_){t.msg="invalid literal/lengths set",n.mode=pr;break}if(n.distbits=6,n.distcode=n.distdyn,R={bits:n.distbits},_=N1(ose,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,R),n.distbits=R.bits,_){t.msg="invalid distances set",n.mode=pr;break}if(n.mode=Rw,e===Lw)break e;case Rw:n.mode=Iw;case Iw:if(a>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=u,yXe(t,d),o=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,r=t.input,a=t.avail_in,c=n.hold,u=n.bits,n.mode===Sc&&(n.back=-1);break}for(n.back=0;b=n.lencode[c&(1<<n.lenbits)-1],y=b>>>24,v=b>>>16&255,x=b&65535,!(y<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(v&&!(v&240)){for(w=y,S=v,E=x;b=n.lencode[E+((c&(1<<w+S)-1)>>w)],y=b>>>24,v=b>>>16&255,x=b&65535,!(w+y<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=w,u-=w,n.back+=w}if(c>>>=y,u-=y,n.back+=y,n.length=x,v===0){n.mode=M$;break}if(v&32){n.back=-1,n.mode=Sc;break}if(v&64){t.msg="invalid literal/length code",n.mode=pr;break}n.extra=v&15,n.mode=R$;case R$:if(n.extra){for(C=n.extra;u<C;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=I$;case I$:for(;b=n.distcode[c&(1<<n.distbits)-1],y=b>>>24,v=b>>>16&255,x=b&65535,!(y<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(!(v&240)){for(w=y,S=v,E=x;b=n.distcode[E+((c&(1<<w+S)-1)>>w)],y=b>>>24,v=b>>>16&255,x=b&65535,!(w+y<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=w,u-=w,n.back+=w}if(c>>>=y,u-=y,n.back+=y,v&64){t.msg="invalid distance code",n.mode=pr;break}n.offset=x,n.extra=v&15,n.mode=O$;case O$:if(n.extra){for(C=n.extra;u<C;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=pr;break}n.mode=D$;case D$:if(l===0)break e;if(f=d-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=pr;break}f>n.wnext?(f-=n.wnext,m=n.wsize-f):m=n.wnext-f,f>n.length&&(f=n.length),g=n.window}else g=i,m=o-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do i[o++]=g[m++];while(--f);n.length===0&&(n.mode=Iw);break;case M$:if(l===0)break e;i[o++]=n.length,l--,n.mode=Iw;break;case FA:if(n.wrap){for(;u<32;){if(a===0)break e;a--,c|=r[s++]<<u,u+=8}if(d-=l,t.total_out+=d,n.total+=d,d&&(t.adler=n.check=n.flags?ml(n.check,i,d,o-d):AN(n.check,i,d,o-d)),d=l,(n.flags?c:B$(c))!==n.check){t.msg="incorrect data check",n.mode=pr;break}c=0,u=0}n.mode=j$;case j$:if(n.wrap&&n.flags){for(;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(c!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=pr;break}c=0,u=0}n.mode=F$;case F$:_=_Xe;break e;case pr:_=ase;break e;case use:return lse;case EXe:default:return la}return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=u,(n.wsize||d!==t.avail_out&&n.mode<pr&&(n.mode<FA||e!==g$))&&mse(t,t.output,t.next_out,d-t.avail_out),h-=t.avail_in,d-=t.avail_out,t.total_in+=h,t.total_out+=d,n.total+=d,n.wrap&&d&&(t.adler=n.check=n.flags?ml(n.check,i,d,t.next_out-d):AN(n.check,i,d,t.next_out-d)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Sc?128:0)+(n.mode===Rw||n.mode===jA?256:0),(h===0&&d===0||e===g$)&&_===Pf&&(_=SXe),_}function IXe(t){if(!t||!t.state)return la;var e=t.state;return e.window&&(e.window=null),t.state=null,Pf}function OXe(t,e){var n;return!t||!t.state||(n=t.state,!(n.wrap&2))?la:(n.head=e,e.done=!1,Pf)}function DXe(t,e){var n=e.length,r,i,s;return!t||!t.state||(r=t.state,r.wrap!==0&&r.mode!==vE)?la:r.mode===vE&&(i=1,i=AN(i,e,n,0),i!==r.check)?ase:(s=mse(t,e,n,n),s?(r.mode=use,lse):(r.havedict=1,Pf))}Za.inflateReset=dse;Za.inflateReset2=fse;Za.inflateResetKeep=hse;Za.inflateInit=NXe;Za.inflateInit2=pse;Za.inflate=RXe;Za.inflateEnd=IXe;Za.inflateGetHeader=OXe;Za.inflateSetDictionary=DXe;Za.inflateInfo="pako inflate (from Nodeca project)";var gse={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function MXe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var jXe=MXe,$m=Za,L1=cu,C2=Xf,Rr=gse,PN=nD,FXe=rse,BXe=jXe,bse=Object.prototype.toString;function Nf(t){if(!(this instanceof Nf))return new Nf(t);this.options=L1.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new FXe,this.strm.avail_out=0;var n=$m.inflateInit2(this.strm,e.windowBits);if(n!==Rr.Z_OK)throw new Error(PN[n]);if(this.header=new BXe,$m.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=C2.string2buf(e.dictionary):bse.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=$m.inflateSetDictionary(this.strm,e.dictionary),n!==Rr.Z_OK)))throw new Error(PN[n])}Nf.prototype.push=function(t,e){var n=this.strm,r=this.options.chunkSize,i=this.options.dictionary,s,o,a,l,c,u=!1;if(this.ended)return!1;o=e===~~e?e:e===!0?Rr.Z_FINISH:Rr.Z_NO_FLUSH,typeof t=="string"?n.input=C2.binstring2buf(t):bse.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new L1.Buf8(r),n.next_out=0,n.avail_out=r),s=$m.inflate(n,Rr.Z_NO_FLUSH),s===Rr.Z_NEED_DICT&&i&&(s=$m.inflateSetDictionary(this.strm,i)),s===Rr.Z_BUF_ERROR&&u===!0&&(s=Rr.Z_OK,u=!1),s!==Rr.Z_STREAM_END&&s!==Rr.Z_OK)return this.onEnd(s),this.ended=!0,!1;n.next_out&&(n.avail_out===0||s===Rr.Z_STREAM_END||n.avail_in===0&&(o===Rr.Z_FINISH||o===Rr.Z_SYNC_FLUSH))&&(this.options.to==="string"?(a=C2.utf8border(n.output,n.next_out),l=n.next_out-a,c=C2.buf2string(n.output,a),n.next_out=l,n.avail_out=r-l,l&&L1.arraySet(n.output,n.output,a,l,0),this.onData(c)):this.onData(L1.shrinkBuf(n.output,n.next_out))),n.avail_in===0&&n.avail_out===0&&(u=!0)}while((n.avail_in>0||n.avail_out===0)&&s!==Rr.Z_STREAM_END);return s===Rr.Z_STREAM_END&&(o=Rr.Z_FINISH),o===Rr.Z_FINISH?(s=$m.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===Rr.Z_OK):(o===Rr.Z_SYNC_FLUSH&&(this.onEnd(Rr.Z_OK),n.avail_out=0),!0)};Nf.prototype.onData=function(t){this.chunks.push(t)};Nf.prototype.onEnd=function(t){t===Rr.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=L1.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function iD(t,e){var n=new Nf(e);if(n.push(t,!0),n.err)throw n.msg||PN[n.err];return n.result}function UXe(t,e){return e=e||{},e.raw=!0,iD(t,e)}Wv.Inflate=Nf;Wv.inflate=iD;Wv.inflateRaw=UXe;Wv.ungzip=iD;var $Xe=cu.assign,HXe=Hv,zXe=Wv,VXe=gse,yse={};$Xe(yse,HXe,zXe,VXe);var WXe=yse;const sD=_s(WXe),$$=(t,e)=>function(...n){const r=e.promiseModule;return new r((i,s)=>{e.multiArgs?n.push((...o)=>{e.errorFirst?o[0]?s(o):(o.shift(),i(o)):i(o)}):e.errorFirst?n.push((o,a)=>{o?s(o):i(a)}):n.push(i),t.apply(this,n)})};var GXe=(t,e)=>{e=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},e);const n=typeof t;if(!(t!==null&&(n==="object"||n==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":n}\``);const r=s=>{const o=a=>typeof a=="string"?s===a:a.test(s);return e.include?e.include.some(o):!e.exclude.some(o)};let i;n==="function"?i=function(...s){return e.excludeMain?t(...s):$$(t,e).apply(this,s)}:i=Object.create(Object.getPrototypeOf(t));for(const s in t){const o=t[s];i[s]=typeof o=="function"&&r(s)?$$(o,e):o}return i};const $A=_s(GXe);var H$={};function z$(t){return Array.isArray(t)?t:[t]}const NN="",V$=" ",HA="\\",qXe=/^\s+$/,KXe=/(?:[^\\]|^)\\$/,YXe=/^\\!/,XXe=/^\\#/,ZXe=/\r?\n/g,JXe=/^\.*\/|^\.+$/,zA="/";let vse="node-ignore";typeof Symbol<"u"&&(vse=Symbol.for("node-ignore"));const W$=vse,QXe=(t,e,n)=>Object.defineProperty(t,e,{value:n}),eZe=/([0-z])-([0-z])/g,xse=()=>!1,tZe=t=>t.replace(eZe,(e,n,r)=>n.charCodeAt(0)<=r.charCodeAt(0)?e:NN),nZe=t=>{const{length:e}=t;return t.slice(0,e-e%2)},rZe=[[/^\uFEFF/,()=>NN],[/((?:\\\\)*?)(\\?\s+)$/,(t,e,n)=>e+(n.indexOf("\\")===0?V$:NN)],[/(\\+?)\s/g,(t,e)=>{const{length:n}=e;return e.slice(0,n-n%2)+V$}],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,n)=>e+6<n.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,n)=>{const r=n.replace(/\\\*/g,"[^\\/]*");return e+r}],[/\\\\\\(?=[$.|*+(){^])/g,()=>HA],[/\\\\/g,()=>HA],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,n,r,i)=>e===HA?`\\[${n}${nZe(r)}${i}`:i==="]"&&r.length%2===0?`[${tZe(n)}${r}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(t,e)=>`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`]],G$=Object.create(null),iZe=(t,e)=>{let n=G$[t];return n||(n=rZe.reduce((r,[i,s])=>r.replace(i,s.bind(t)),t),G$[t]=n),e?new RegExp(n,"i"):new RegExp(n)},oD=t=>typeof t=="string",sZe=t=>t&&oD(t)&&!qXe.test(t)&&!KXe.test(t)&&t.indexOf("#")!==0,oZe=t=>t.split(ZXe);class aZe{constructor(e,n,r,i){this.origin=e,this.pattern=n,this.negative=r,this.regex=i}}const lZe=(t,e)=>{const n=t;let r=!1;t.indexOf("!")===0&&(r=!0,t=t.substr(1)),t=t.replace(YXe,"!").replace(XXe,"#");const i=iZe(t,e);return new aZe(n,t,r,i)},cZe=(t,e)=>{throw new e(t)},su=(t,e,n)=>oD(t)?t?su.isNotRelative(t)?n(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:n("path must not be empty",TypeError):n(`path must be a string, but got \`${e}\``,TypeError),_se=t=>JXe.test(t);su.isNotRelative=_se;su.convert=t=>t;class uZe{constructor({ignorecase:e=!0,ignoreCase:n=e,allowRelativePaths:r=!1}={}){QXe(this,W$,!0),this._rules=[],this._ignoreCase=n,this._allowRelativePaths=r,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(e){if(e&&e[W$]){this._rules=this._rules.concat(e._rules),this._added=!0;return}if(sZe(e)){const n=lZe(e,this._ignoreCase);this._added=!0,this._rules.push(n)}}add(e){return this._added=!1,z$(oD(e)?oZe(e):e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_testOne(e,n){let r=!1,i=!1;return this._rules.forEach(s=>{const{negative:o}=s;if(i===o&&r!==i||o&&!r&&!i&&!n)return;s.regex.test(e)&&(r=!o,i=o)}),{ignored:r,unignored:i}}_test(e,n,r,i){const s=e&&su.convert(e);return su(s,e,this._allowRelativePaths?xse:cZe),this._t(s,n,r,i)}_t(e,n,r,i){if(e in n)return n[e];if(i||(i=e.split(zA)),i.pop(),!i.length)return n[e]=this._testOne(e,r);const s=this._t(i.join(zA)+zA,n,r,i);return n[e]=s.ignored?s:this._testOne(e,r)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return z$(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}}const xE=t=>new uZe(t),hZe=t=>su(t&&su.convert(t),t,xse);xE.isPathValid=hZe;xE.default=xE;var dZe=xE;if(typeof Qn<"u"&&(H$&&H$.IGNORE_TEST_WIN32||Qn.platform==="win32")){const t=n=>/^\\\\\?\\/.test(n)||/["<>|\u0000-\u001F]+/u.test(n)?n:n.replace(/\\/g,"/");su.convert=t;const e=/^[a-z]:\//i;su.isNotRelative=n=>e.test(n)||_se(n)}const fZe=_s(dZe);function pZe(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function gl(t,e,n){return e=e instanceof RegExp?e:new RegExp(pZe(e),"g"),t.replace(e,n)}var mZe={clean:function(e){if(typeof e!="string")throw new Error("Expected a string, received: "+e);return e=gl(e,"./","/"),e=gl(e,"..","."),e=gl(e," ","-"),e=gl(e,/^[~^:?*\\\-]/g,""),e=gl(e,/[~^:?*\\]/g,"-"),e=gl(e,/[~^:?*\\\-]$/g,""),e=gl(e,"@{","-"),e=gl(e,/\.$/g,""),e=gl(e,/\/$/g,""),e=gl(e,/\.lock$/g,""),e}},gZe=mZe;const Hl=_s(gZe);var bZe=function(t,e){var n=t,r=e,i=n.length,s=r.length,o=!1,a=null,l=i+1,c=[],u=[],h=[],d="",f=-1,m=0,g=1,b,y,v=function(){i>=s&&(b=n,y=i,n=r,r=b,i=s,s=y,o=!0,l=i+1)},x=function(k,_,L){return{x:k,y:_,k:L}},w=function(k,_){return{elem:k,t:_}},S=function(k,_,L){var R,C,P;for(_>L?R=c[k-1+l]:R=c[k+1+l],P=Math.max(_,L),C=P-k;C<i&&P<s&&n[C]===r[P];)++C,++P;return c[k+l]=u.length,u[u.length]=new x(C,P,R),P},E=function(k){var _,L,R;for(_=L=0,R=k.length-1;R>=0;--R)for(;_<k[R].x||L<k[R].y;)k[R].y-k[R].x>L-_?(o?h[h.length]=new w(r[L],f):h[h.length]=new w(r[L],g),++L):k[R].y-k[R].x<L-_?(o?h[h.length]=new w(n[_],g):h[h.length]=new w(n[_],f),++_):(h[h.length]=new w(n[_],m),d+=n[_],++_,++L)};return v(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return a},getlcs:function(){return d},getses:function(){return h},compose:function(){var k,_,L,R,C,P,O,N;for(k=s-i,_=i+s+3,L={},O=0;O<_;++O)L[O]=-1,c[O]=-1;R=-1;do{for(++R,N=-R;N<=k-1;++N)L[N+l]=S(N,L[N-1+l]+1,L[N+1+l]);for(N=k+R;N>=k+1;--N)L[N+l]=S(N,L[N-1+l]+1,L[N+1+l]);L[k+l]=S(k,L[k-1+l]+1,L[k+1+l])}while(L[k+l]!==s);for(a=k+2*R,C=c[k+l],P=[];C!==-1;)P[P.length]=new x(u[C].x,u[C].y,null),C=u[C].k;E(P)}}},yZe=bZe;function vZe(t,e){var n=new yZe(t,e);n.compose();for(var r=n.getses(),i,s,o=t.length-1,a=e.length-1,l=r.length-1;l>=0;--l)r[l].t===n.SES_COMMON?(s?(s.chain={file1index:o,file2index:a,chain:null},s=s.chain):(i={file1index:o,file2index:a,chain:null},s=i),o--,a--):r[l].t===n.SES_DELETE?o--:r[l].t===n.SES_ADD&&a--;var c={file1index:-1,file2index:-1,chain:null};return s?(s.chain=c,i):c}function q$(t,e){for(var n=[],r=t.length,i=e.length,s=vZe(t,e);s!==null;s=s.chain){var o=r-s.file1index-1,a=i-s.file2index-1;r=s.file1index,i=s.file2index,(o||a)&&n.push({file1:[r+1,o],file2:[i+1,a]})}return n.reverse(),n}function xZe(t,e,n){var r,i=q$(e,t),s=q$(e,n),o=[];function a(O,N){o.push([O.file1[0],N,O.file1[1],O.file2[0],O.file2[1]])}for(r=0;r<i.length;r++)a(i[r],0);for(r=0;r<s.length;r++)a(s[r],2);o.sort(function(O,N){return O[0]-N[0]});var l=[],c=0;function u(O){O>c&&(l.push([1,c,O-c]),c=O)}for(var h=0;h<o.length;h++){for(var d=h,f=o[h],m=f[0],g=m+f[2];h<o.length-1;){var b=o[h+1],y=b[0];if(y>g)break;g=Math.max(g,y+b[2]),h++}if(u(m),d==h)f[4]>0&&l.push([f[1],f[3],f[4]]);else{var v={0:[t.length,-1,e.length,-1],2:[n.length,-1,e.length,-1]};for(r=d;r<=h;r++){f=o[r];var x=f[1],w=v[x],S=f[0],E=S+f[2],k=f[3],_=k+f[4];w[0]=Math.min(k,w[0]),w[1]=Math.max(_,w[1]),w[2]=Math.min(S,w[2]),w[3]=Math.max(E,w[3])}var L=v[0][0]+(m-v[0][2]),R=v[0][1]+(g-v[0][3]),C=v[2][0]+(m-v[2][2]),P=v[2][1]+(g-v[2][3]);l.push([-1,L,R-L,m,g-m,C,P-C])}c=g}return u(e.length),l}function _Ze(t,e,n){var r=[],i=[t,e,n],s=xZe(t,e,n),o=[];function a(){o.length&&r.push({ok:o}),o=[]}function l(f){for(var m=0;m<f.length;m++)o.push(f[m])}function c(f){if(f[2]!=f[6])return!0;for(var m=f[1],g=f[5],b=0;b<f[2];b++)if(t[b+m]!=n[b+g])return!0;return!1}for(var u=0;u<s.length;u++){var h=s[u],d=h[0];d==-1?c(h)?(a(),r.push({conflict:{a:t.slice(h[1],h[1]+h[2]),aIndex:h[1],o:e.slice(h[3],h[3]+h[4]),oIndex:h[3],b:n.slice(h[5],h[5]+h[6]),bIndex:h[5]}})):l(i[0].slice(h[1],h[1]+h[2])):l(i[d].slice(h[1],h[1]+h[2]))}return a(),r}var wZe=_Ze;const SZe=_s(wZe);class Tn extends Error{constructor(e){super(e),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(e){const n=new Tn(e.message);return n.code=e.code,n.data=e.data,n.caller=e.caller,n.stack=e.stack,n}get isIsomorphicGitError(){return!0}}class Gv extends Tn{constructor(e){super(`Modifying the index is not possible because you have unmerged files: ${e.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=Gv.code,this.data={filepaths:e}}}Gv.code="UnmergedPathsError";class tn extends Tn{constructor(e){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${e}`),this.code=this.name=tn.code,this.data={message:e}}}tn.code="InternalError";class o0 extends Tn{constructor(e){super(`The filepath "${e}" contains unsafe character sequences`),this.code=this.name=o0.code,this.data={filepath:e}}}o0.code="UnsafeFilepathError";class Ml{constructor(e){this.buffer=e,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(e){this._start=e}slice(e){const n=this.buffer.slice(this._start,this._start+e);return this._start+=e,n}toString(e,n){const r=this.buffer.toString(e,this._start,this._start+n);return this._start+=n,r}write(e,n,r){const i=this.buffer.write(e,this._start,n,r);return this._start+=n,i}copy(e,n,r){const i=e.copy(this.buffer,this._start,n,r);return this._start+=i,i}readUInt8(){const e=this.buffer.readUInt8(this._start);return this._start+=1,e}writeUInt8(e){const n=this.buffer.writeUInt8(e,this._start);return this._start+=1,n}readUInt16BE(){const e=this.buffer.readUInt16BE(this._start);return this._start+=2,e}writeUInt16BE(e){const n=this.buffer.writeUInt16BE(e,this._start);return this._start+=2,n}readUInt32BE(){const e=this.buffer.readUInt32BE(this._start);return this._start+=4,e}writeUInt32BE(e){const n=this.buffer.writeUInt32BE(e,this._start);return this._start+=4,n}}function h5(t,e){return-(t<e)||+(t>e)}function wse(t,e){return h5(t.path,e.path)}function Sse(t){let e=t>0?t>>12:0;e!==4&&e!==8&&e!==10&&e!==14&&(e=8);let n=t&511;return n&73?n=493:n=420,e!==8&&(n=0),(e<<12)+n}const bl=2**32;function K$(t,e,n,r){if(t!==void 0&&e!==void 0)return[t,e];n===void 0&&(n=r.valueOf());const i=Math.floor(n/1e3),s=(n-i*1e3)*1e6;return[i,s]}function xg(t){const[e,n]=K$(t.ctimeSeconds,t.ctimeNanoseconds,t.ctimeMs,t.ctime),[r,i]=K$(t.mtimeSeconds,t.mtimeNanoseconds,t.mtimeMs,t.mtime);return{ctimeSeconds:e%bl,ctimeNanoseconds:n%bl,mtimeSeconds:r%bl,mtimeNanoseconds:i%bl,dev:t.dev%bl,ino:t.ino%bl,mode:Sse(t.mode%bl),uid:t.uid%bl,gid:t.gid%bl,size:t.size>-1?t.size%bl:0}}function EZe(t){let e="";for(const n of new Uint8Array(t))n<16&&(e+="0"),e+=n.toString(16);return e}let VA=null;async function ou(t){return VA===null&&(VA=await CZe()),VA?Ese(t):kZe(t)}function kZe(t){return new Nie().update(t).digest("hex")}async function Ese(t){const e=await crypto.subtle.digest("SHA-1",t);return EZe(e)}async function CZe(){try{if(await Ese(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function TZe(t){return{assumeValid:!!(t&32768),extended:!!(t&16384),stage:(t&12288)>>12,nameLength:t&4095}}function AZe(t){const e=t.flags;return e.extended=!1,e.nameLength=Math.min(xt.from(t.path).length,4095),(e.assumeValid?32768:0)+(e.extended?16384:0)+((e.stage&3)<<12)+(e.nameLength&4095)}class Sd{constructor(e,n){this._dirty=!1,this._unmergedPaths=n||new Set,this._entries=e||new Map}_addEntry(e){if(e.flags.stage===0)e.stages=[e],this._entries.set(e.path,e),this._unmergedPaths.delete(e.path);else{let n=this._entries.get(e.path);n||(this._entries.set(e.path,e),n=e),n.stages[e.flags.stage]=e,this._unmergedPaths.add(e.path)}}static async from(e){if(xt.isBuffer(e))return Sd.fromBuffer(e);if(e===null)return new Sd(null);throw new tn("invalid type passed to GitIndex.from")}static async fromBuffer(e){if(e.length===0)throw new tn("Index file is empty (.git/index)");const n=new Sd,r=new Ml(e),i=r.toString("utf8",4);if(i!=="DIRC")throw new tn(`Invalid dircache magic file number: ${i}`);const s=await ou(e.slice(0,-20)),o=e.slice(-20).toString("hex");if(o!==s)throw new tn(`Invalid checksum in GitIndex buffer: expected ${o} but saw ${s}`);const a=r.readUInt32BE();if(a!==2)throw new tn(`Unsupported dircache version: ${a}`);const l=r.readUInt32BE();let c=0;for(;!r.eof()&&c<l;){const u={};u.ctimeSeconds=r.readUInt32BE(),u.ctimeNanoseconds=r.readUInt32BE(),u.mtimeSeconds=r.readUInt32BE(),u.mtimeNanoseconds=r.readUInt32BE(),u.dev=r.readUInt32BE(),u.ino=r.readUInt32BE(),u.mode=r.readUInt32BE(),u.uid=r.readUInt32BE(),u.gid=r.readUInt32BE(),u.size=r.readUInt32BE(),u.oid=r.slice(20).toString("hex");const h=r.readUInt16BE();u.flags=TZe(h);const d=e.indexOf(0,r.tell()+1)-r.tell();if(d<1)throw new tn(`Got a path length of: ${d}`);if(u.path=r.toString("utf8",d),u.path.includes("..\\")||u.path.includes("../"))throw new o0(u.path);let f=8-(r.tell()-12)%8;for(f===0&&(f=8);f--;){const m=r.readUInt8();if(m!==0)throw new tn(`Expected 1-8 null characters but got '${m}' after ${u.path}`);if(r.eof())throw new tn("Unexpected end of file")}u.stages=[],n._addEntry(u),c++}return n}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(wse)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(e=>e.stages.length>1?e.stages.filter(n=>n):e)}*[Symbol.iterator](){for(const e of this.entries)yield e}insert({filepath:e,stats:n,oid:r,stage:i=0}){n||(n={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),n=xg(n);const s=xt.from(e),o={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:e,oid:r,flags:{assumeValid:!1,extended:!1,stage:i,nameLength:s.length<4095?s.length:4095},stages:[]};this._addEntry(o),this._dirty=!0}delete({filepath:e}){if(this._entries.has(e))this._entries.delete(e);else for(const n of this._entries.keys())n.startsWith(e+"/")&&this._entries.delete(n);this._unmergedPaths.has(e)&&this._unmergedPaths.delete(e),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:e}){return this._entries.has(e)}render(){return this.entries.map(e=>`${e.mode.toString(8)} ${e.oid}    ${e.path}`).join(`
`)}static async _entryToBuffer(e){const n=xt.from(e.path),r=Math.ceil((62+n.length+1)/8)*8,i=xt.alloc(r),s=new Ml(i),o=xg(e);return s.writeUInt32BE(o.ctimeSeconds),s.writeUInt32BE(o.ctimeNanoseconds),s.writeUInt32BE(o.mtimeSeconds),s.writeUInt32BE(o.mtimeNanoseconds),s.writeUInt32BE(o.dev),s.writeUInt32BE(o.ino),s.writeUInt32BE(o.mode),s.writeUInt32BE(o.uid),s.writeUInt32BE(o.gid),s.writeUInt32BE(o.size),s.write(e.oid,20,"hex"),s.writeUInt16BE(AZe(e)),s.write(e.path,n.length,"utf8"),i}async toObject(){const e=xt.alloc(12),n=new Ml(e);n.write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entriesFlat.length);let r=[];for(const a of this.entries)if(r.push(Sd._entryToBuffer(a)),a.stages.length>1)for(const l of a.stages)l&&l!==a&&r.push(Sd._entryToBuffer(l));r=await Promise.all(r);const i=xt.concat(r),s=xt.concat([e,i]),o=await ou(s);return xt.concat([s,xt.from(o,"hex")])}}function _E(t,e,n=!0,r=!0){const i=xg(t),s=xg(e);return n&&i.mode!==s.mode||i.mtimeSeconds!==s.mtimeSeconds||i.ctimeSeconds!==s.ctimeSeconds||i.uid!==s.uid||i.gid!==s.gid||r&&i.ino!==s.ino||i.size!==s.size}let WA=null;const zp=Symbol("IndexCache");function PZe(){return{map:new Map,stats:new Map}}async function NZe(t,e,n){const r=await t.lstat(e),i=await t.read(e),s=await Sd.from(i);n.map.set(e,s),n.stats.set(e,r)}async function LZe(t,e,n){const r=n.stats.get(e);if(r===void 0)return!0;const i=await t.lstat(e);return r===null||i===null?!1:_E(r,i)}class Si{static async acquire({fs:e,gitdir:n,cache:r,allowUnmerged:i=!0},s){r[zp]||(r[zp]=PZe());const o=`${n}/index`;WA===null&&(WA=new $y({maxPending:1/0}));let a,l=[];return await WA.acquire(o,async()=>{await LZe(e,o,r[zp])&&await NZe(e,o,r[zp]);const c=r[zp].map.get(o);if(l=c.unmergedPaths,l.length&&!i)throw new Gv(l);if(a=await s(c),c._dirty){const u=await c.toObject();await e.write(o,u),r[zp].stats.set(o,await e.lstat(o)),c._dirty=!1}}),a}}function wE(t){const e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return e>-1&&(t=t.slice(e+1)),t}function _g(t){const e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return e===-1?".":e===0?"/":t.slice(0,e)}function kse(t){const e=new Map,n=function(i){if(!e.has(i)){const s={type:"tree",fullpath:i,basename:wE(i),metadata:{},children:[]};e.set(i,s),s.parent=n(_g(i)),s.parent&&s.parent!==s&&s.parent.children.push(s)}return e.get(i)},r=function(i,s){if(!e.has(i)){const o={type:"blob",fullpath:i,basename:wE(i),metadata:s,parent:n(_g(i)),children:[]};o.parent&&o.parent.children.push(o),e.set(i,o)}return e.get(i)};n(".");for(const i of t)r(i.path,i);return e}function RZe(t){switch(t){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new tn(`Unexpected GitTree entry mode: ${t.toString(8)}`)}class IZe{constructor({fs:e,gitdir:n,cache:r}){this.treePromise=Si.acquire({fs:e,gitdir:n,cache:r},async function(s){return kse(s.entries)});const i=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(e){const n=e._fullpath,i=(await this.treePromise).get(n);if(!i||i.type==="blob")return null;if(i.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${n}'`);const s=i.children.map(o=>o.fullpath);return s.sort(h5),s}async type(e){return e._type===!1&&await e.stat(),e._type}async mode(e){return e._mode===!1&&await e.stat(),e._mode}async stat(e){if(e._stat===!1){const r=(await this.treePromise).get(e._fullpath);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${e._fullpath}'`);const i=r.type==="tree"?{}:xg(r.metadata);e._type=r.type==="tree"?"tree":RZe(i.mode),e._mode=i.mode,r.type==="tree"?e._stat=void 0:e._stat=i}return e._stat}async content(e){}async oid(e){if(e._oid===!1){const r=(await this.treePromise).get(e._fullpath);e._oid=r.metadata.oid}return e._oid}}const d5=Symbol("GitWalkSymbol");function a0(){const t=Object.create(null);return Object.defineProperty(t,d5,{value:function({fs:e,gitdir:n,cache:r}){return new IZe({fs:e,gitdir:n,cache:r})}}),Object.freeze(t),t}class Kn extends Tn{constructor(e){super(`Could not find ${e}.`),this.code=this.name=Kn.code,this.data={what:e}}}Kn.code="NotFoundError";class Es extends Tn{constructor(e,n,r,i){super(`Object ${e} ${i?`at ${i}`:""}was anticipated to be a ${r} but it is a ${n}.`),this.code=this.name=Es.code,this.data={oid:e,actual:n,expected:r,filepath:i}}}Es.code="ObjectTypeError";class Th extends Tn{constructor(e){super(`Expected a 40-char hex object id but saw "${e}".`),this.code=this.name=Th.code,this.data={value:e}}}Th.code="InvalidOidError";class qv extends Tn{constructor(e){super(`Could not find a fetch refspec for remote "${e}". Make sure the config file has an entry like the following:
[remote "${e}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=qv.code,this.data={remote:e}}}qv.code="NoRefspecError";class SE{constructor(e){if(this.refs=new Map,this.parsedConfig=[],e){let n=null;this.parsedConfig=e.trim().split(`
`).map(r=>{if(/^\s*#/.test(r))return{line:r,comment:!0};const i=r.indexOf(" ");if(r.startsWith("^")){const s=r.slice(1);return this.refs.set(n+"^{}",s),{line:r,ref:n,peeled:s}}else{const s=r.slice(0,i);return n=r.slice(i+1),this.refs.set(n,s),{line:r,ref:n,oid:s}}})}return this}static from(e){return new SE(e)}delete(e){this.parsedConfig=this.parsedConfig.filter(n=>n.ref!==e),this.refs.delete(e)}toString(){return this.parsedConfig.map(({line:e})=>e).join(`
`)+`
`}}class EE{constructor({remotePath:e,localPath:n,force:r,matchPrefix:i}){Object.assign(this,{remotePath:e,localPath:n,force:r,matchPrefix:i})}static from(e){const[n,r,i,s,o]=e.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),a=n==="+",l=i==="*";if(l!==(o==="*"))throw new tn("Invalid refspec");return new EE({remotePath:r,localPath:s,force:a,matchPrefix:l})}translate(e){if(this.matchPrefix){if(e.startsWith(this.remotePath))return this.localPath+e.replace(this.remotePath,"")}else if(e===this.remotePath)return this.localPath;return null}reverseTranslate(e){if(this.matchPrefix){if(e.startsWith(this.localPath))return this.remotePath+e.replace(this.localPath,"")}else if(e===this.localPath)return this.remotePath;return null}}class aD{constructor(e=[]){this.rules=e}static from(e){const n=[];for(const r of e)n.push(EE.from(r));return new aD(n)}add(e){const n=EE.from(e);this.rules.push(n)}translate(e){const n=[];for(const r of this.rules)for(const i of e){const s=r.translate(i);s&&n.push([i,s])}return n}translateOne(e){let n=null;for(const r of this.rules){const i=r.translate(e);i&&(n=i)}return n}localNamespaces(){return this.rules.filter(e=>e.matchPrefix).map(e=>e.localPath.replace(/\/$/,""))}}function OZe(t,e){const n=t.replace(/\^\{\}$/,""),r=e.replace(/\^\{\}$/,""),i=-(n<r)||+(n>r);return i===0?t.endsWith("^{}")?1:-1:i}const DZe=t=>{t=t.toLowerCase();let e=parseInt(t);return t.endsWith("k")&&(e*=1024),t.endsWith("m")&&(e*=1024*1024),t.endsWith("g")&&(e*=1024*1024*1024),e},xb=t=>{if(t=t.trim().toLowerCase(),t==="true"||t==="yes"||t==="on")return!0;if(t==="false"||t==="no"||t==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${t}`)},Y$={core:{filemode:xb,bare:xb,logallrefupdates:xb,symlinks:xb,ignorecase:xb,bigFileThreshold:DZe}},MZe=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,jZe=/^[A-Za-z0-9-.]+$/,FZe=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,BZe=/^[A-Za-z][A-Za-z-]*$/,UZe=/^(.*?)( *[#;].*)$/,$Ze=t=>{const e=MZe.exec(t);if(e!=null){const[n,r]=e.slice(1);return[n,r]}return null},HZe=t=>{const e=FZe.exec(t);if(e!=null){const[n,r="true"]=e.slice(1),i=zZe(r),s=VZe(i);return[n,s]}return null},zZe=t=>{const e=UZe.exec(t);if(e==null)return t;const[n,r]=e.slice(1);return X$(n)&&X$(r)?`${n}${r}`:n},X$=t=>(t.match(/(?:^|[^\\])"/g)||[]).length%2!==0,VZe=t=>t.split("").reduce((e,n,r,i)=>{const s=n==='"'&&i[r-1]!=="\\",o=n==="\\"&&i[r+1]==='"';return s||o?e:e+n},""),Z$=t=>t!=null?t.toLowerCase():null,LN=(t,e,n)=>[Z$(t),e,Z$(n)].filter(r=>r!=null).join("."),J$=t=>{const e=t.split("."),n=e.shift(),r=e.pop(),i=e.length?e.join("."):void 0;return{section:n,subsection:i,name:r,path:LN(n,i,r),sectionPath:LN(n,i,null)}},WZe=(t,e)=>t.reduce((n,r,i)=>e(r)?i:n,-1);class lD{constructor(e){let n=null,r=null;this.parsedConfig=e?e.split(`
`).map(i=>{let s=null,o=null;const a=i.trim(),l=$Ze(a),c=l!=null;if(c)[n,r]=l;else{const h=HZe(a);h!=null&&([s,o]=h)}const u=LN(n,r,s);return{line:i,isSection:c,section:n,subsection:r,name:s,value:o,path:u}}):[]}static from(e){return new lD(e)}async get(e,n=!1){const r=J$(e).path,i=this.parsedConfig.filter(s=>s.path===r).map(({section:s,name:o,value:a})=>{const l=Y$[s]&&Y$[s][o];return l?l(a):a});return n?i:i.pop()}async getall(e){return this.get(e,!0)}async getSubsections(e){return this.parsedConfig.filter(n=>n.section===e&&n.isSection).map(n=>n.subsection)}async deleteSection(e,n){this.parsedConfig=this.parsedConfig.filter(r=>!(r.section===e&&r.subsection===n))}async append(e,n){return this.set(e,n,!0)}async set(e,n,r=!1){const{section:i,subsection:s,name:o,path:a,sectionPath:l}=J$(e),c=WZe(this.parsedConfig,u=>u.path===a);if(n==null)c!==-1&&this.parsedConfig.splice(c,1);else if(c!==-1){const u=this.parsedConfig[c],h=Object.assign({},u,{name:o,value:n,modified:!0});r?this.parsedConfig.splice(c+1,0,h):this.parsedConfig[c]=h}else{const u=this.parsedConfig.findIndex(d=>d.path===l),h={section:i,subsection:s,name:o,value:n,modified:!0,path:a};if(jZe.test(i)&&BZe.test(o))if(u>=0)this.parsedConfig.splice(u+1,0,h);else{const d={section:i,subsection:s,modified:!0,path:l};this.parsedConfig.push(d,h)}}}toString(){return this.parsedConfig.map(({line:e,section:n,subsection:r,name:i,value:s,modified:o=!1})=>o?i!=null&&s!=null?typeof s=="string"&&/[#;]/.test(s)?`	${i} = "${s}"`:`	${i} = ${s}`:r!=null?`[${n} "${r}"]`:`[${n}]`:e).join(`
`)}}class Ur{static async get({fs:e,gitdir:n}){const r=await e.read(`${n}/config`,{encoding:"utf8"});return lD.from(r)}static async save({fs:e,gitdir:n,config:r}){await e.write(`${n}/config`,r.toString(),{encoding:"utf8"})}}const Ow=t=>[`${t}`,`refs/${t}`,`refs/tags/${t}`,`refs/heads/${t}`,`refs/remotes/${t}`,`refs/remotes/${t}/HEAD`],GZe=["config","description","index","shallow","commondir"];let GA;async function Pu(t,e){return GA===void 0&&(GA=new $y),GA.acquire(t,e)}class ft{static async updateRemoteRefs({fs:e,gitdir:n,remote:r,refs:i,symrefs:s,tags:o,refspecs:a=void 0,prune:l=!1,pruneTags:c=!1}){for(const b of i.values())if(!b.match(/[0-9a-f]{40}/))throw new Th(b);const u=await Ur.get({fs:e,gitdir:n});if(!a){if(a=await u.getall(`remote.${r}.fetch`),a.length===0)throw new qv(r);a.unshift(`+HEAD:refs/remotes/${r}/HEAD`)}const h=aD.from(a),d=new Map;if(c){const b=await ft.listRefs({fs:e,gitdir:n,filepath:"refs/tags"});await ft.deleteRefs({fs:e,gitdir:n,refs:b.map(y=>`refs/tags/${y}`)})}if(o){for(const b of i.keys())if(b.startsWith("refs/tags")&&!b.endsWith("^{}")&&!await ft.exists({fs:e,gitdir:n,ref:b})){const y=i.get(b);d.set(b,y)}}const f=h.translate([...i.keys()]);for(const[b,y]of f){const v=i.get(b);d.set(y,v)}const m=h.translate([...s.keys()]);for(const[b,y]of m){const v=s.get(b),x=h.translateOne(v);x&&d.set(y,`ref: ${x}`)}const g=[];if(l){for(const b of h.localNamespaces()){const y=(await ft.listRefs({fs:e,gitdir:n,filepath:b})).map(v=>`${b}/${v}`);for(const v of y)d.has(v)||g.push(v)}g.length>0&&await ft.deleteRefs({fs:e,gitdir:n,refs:g})}for(const[b,y]of d)await Pu(b,async()=>e.write(it.join(n,b),`${y.trim()}
`,"utf8"));return{pruned:g}}static async writeRef({fs:e,gitdir:n,ref:r,value:i}){if(!i.match(/[0-9a-f]{40}/))throw new Th(i);await Pu(r,async()=>e.write(it.join(n,r),`${i.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:e,gitdir:n,ref:r,value:i}){await Pu(r,async()=>e.write(it.join(n,r),`ref: ${i.trim()}
`,"utf8"))}static async deleteRef({fs:e,gitdir:n,ref:r}){return ft.deleteRefs({fs:e,gitdir:n,refs:[r]})}static async deleteRefs({fs:e,gitdir:n,refs:r}){await Promise.all(r.map(a=>e.rm(it.join(n,a))));let i=await Pu("packed-refs",async()=>e.read(`${n}/packed-refs`,{encoding:"utf8"}));const s=SE.from(i),o=s.refs.size;for(const a of r)s.refs.has(a)&&s.delete(a);s.refs.size<o&&(i=s.toString(),await Pu("packed-refs",async()=>e.write(`${n}/packed-refs`,i,{encoding:"utf8"})))}static async resolve({fs:e,gitdir:n,ref:r,depth:i=void 0}){if(i!==void 0&&(i--,i===-1))return r;if(r.startsWith("ref: "))return r=r.slice(5),ft.resolve({fs:e,gitdir:n,ref:r,depth:i});if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const s=await ft.packedRefs({fs:e,gitdir:n}),o=Ow(r).filter(a=>!GZe.includes(a));for(const a of o){const l=await Pu(a,async()=>await e.read(`${n}/${a}`,{encoding:"utf8"})||s.get(a));if(l)return ft.resolve({fs:e,gitdir:n,ref:l.trim(),depth:i})}throw new Kn(r)}static async exists({fs:e,gitdir:n,ref:r}){try{return await ft.expand({fs:e,gitdir:n,ref:r}),!0}catch{return!1}}static async expand({fs:e,gitdir:n,ref:r}){if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const i=await ft.packedRefs({fs:e,gitdir:n}),s=Ow(r);for(const o of s)if(await Pu(o,async()=>e.exists(`${n}/${o}`))||i.has(o))return o;throw new Kn(r)}static async expandAgainstMap({ref:e,map:n}){const r=Ow(e);for(const i of r)if(await n.has(i))return i;throw new Kn(e)}static resolveAgainstMap({ref:e,fullref:n=e,depth:r=void 0,map:i}){if(r!==void 0&&(r--,r===-1))return{fullref:n,oid:e};if(e.startsWith("ref: "))return e=e.slice(5),ft.resolveAgainstMap({ref:e,fullref:n,depth:r,map:i});if(e.length===40&&/[0-9a-f]{40}/.test(e))return{fullref:n,oid:e};const s=Ow(e);for(const o of s){const a=i.get(o);if(a)return ft.resolveAgainstMap({ref:a.trim(),fullref:o,depth:r,map:i})}throw new Kn(e)}static async packedRefs({fs:e,gitdir:n}){const r=await Pu("packed-refs",async()=>e.read(`${n}/packed-refs`,{encoding:"utf8"}));return SE.from(r).refs}static async listRefs({fs:e,gitdir:n,filepath:r}){const i=ft.packedRefs({fs:e,gitdir:n});let s=null;try{s=await e.readdirDeep(`${n}/${r}`),s=s.map(o=>o.replace(`${n}/${r}/`,""))}catch{s=[]}for(let o of(await i).keys())o.startsWith(r)&&(o=o.replace(r+"/",""),s.includes(o)||s.push(o));return s.sort(OZe),s}static async listBranches({fs:e,gitdir:n,remote:r}){return r?ft.listRefs({fs:e,gitdir:n,filepath:`refs/remotes/${r}`}):ft.listRefs({fs:e,gitdir:n,filepath:"refs/heads"})}static async listTags({fs:e,gitdir:n}){return(await ft.listRefs({fs:e,gitdir:n,filepath:"refs/tags"})).filter(i=>!i.endsWith("^{}"))}}function qZe(t,e){return h5(Q$(t),Q$(e))}function Q$(t){return t.mode==="040000"?t.path+"/":t.path}function Cse(t){switch(t){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new tn(`Unexpected GitTree entry mode: ${t}`)}function KZe(t){const e=[];let n=0;for(;n<t.length;){const r=t.indexOf(32,n);if(r===-1)throw new tn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const i=t.indexOf(0,n);if(i===-1)throw new tn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let s=t.slice(n,r).toString("utf8");s==="40000"&&(s="040000");const o=Cse(s),a=t.slice(r+1,i).toString("utf8");if(a.includes("\\")||a.includes("/"))throw new o0(a);const l=t.slice(i+1,i+21).toString("hex");n=i+21,e.push({mode:s,path:a,oid:l,type:o})}return e}function YZe(t){if(typeof t=="number"&&(t=t.toString(8)),t.match(/^0?4.*/))return"040000";if(t.match(/^1006.*/))return"100644";if(t.match(/^1007.*/))return"100755";if(t.match(/^120.*/))return"120000";if(t.match(/^160.*/))return"160000";throw new tn(`Could not understand file mode: ${t}`)}function XZe(t){return!t.oid&&t.sha&&(t.oid=t.sha),t.mode=YZe(t.mode),t.type||(t.type=Cse(t.mode)),t}class Vs{constructor(e){if(xt.isBuffer(e))this._entries=KZe(e);else if(Array.isArray(e))this._entries=e.map(XZe);else throw new tn("invalid type passed to GitTree constructor");this._entries.sort(wse)}static from(e){return new Vs(e)}render(){return this._entries.map(e=>`${e.mode} ${e.type} ${e.oid}    ${e.path}`).join(`
`)}toObject(){const e=[...this._entries];return e.sort(qZe),xt.concat(e.map(n=>{const r=xt.from(n.mode.replace(/^0/,"")),i=xt.from(" "),s=xt.from(n.path,"utf8"),o=xt.from([0]),a=xt.from(n.oid,"hex");return xt.concat([r,i,s,o,a])}))}entries(){return this._entries}*[Symbol.iterator](){for(const e of this._entries)yield e}}class l0{static wrap({type:e,object:n}){return xt.concat([xt.from(`${e} ${n.byteLength.toString()}\0`),xt.from(n)])}static unwrap(e){const n=e.indexOf(32),r=e.indexOf(0),i=e.slice(0,n).toString("utf8"),s=e.slice(n+1,r).toString("utf8"),o=e.length-(r+1);if(parseInt(s)!==o)throw new tn(`Length mismatch: expected ${s} bytes but got ${o} instead.`);return{type:i,object:xt.from(e.slice(r+1))}}}async function Tse({fs:t,gitdir:e,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,i=await t.read(`${e}/${r}`);return i?{object:i,format:"deflated",source:r}:null}function ZZe(t,e){const n=new Ml(t),r=eH(n);if(r!==e.byteLength)throw new tn(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${e.length} bytes`);const i=eH(n);let s;const o=nH(n,e);if(o.byteLength===i)s=o;else{s=xt.alloc(i);const a=new Ml(s);for(a.copy(o);!n.eof();)a.copy(nH(n,e));const l=a.tell();if(i!==l)throw new tn(`applyDelta expected target buffer to be ${i} bytes but the resulting buffer was ${l} bytes`)}return s}function eH(t){let e=0,n=0,r=null;do r=t.readUInt8(),e|=(r&127)<<n,n+=7;while(r&128);return e}function tH(t,e,n){let r=0,i=0;for(;n--;)e&1&&(r|=t.readUInt8()<<i),e>>=1,i+=8;return r}function nH(t,e){const n=t.readUInt8(),r=128,i=15,s=112;if(n&r){const o=tH(t,n&i,4);let a=tH(t,(n&s)>>4,3);return a===0&&(a=65536),e.slice(o,o+a)}else return t.slice(n)}function JZe(t){let e=[t];return{next(){return Promise.resolve({done:e.length===0,value:e.pop()})},return(){return e=[],{}},[Symbol.asyncIterator](){return this}}}function Ase(t){return t[Symbol.asyncIterator]?t[Symbol.asyncIterator]():t[Symbol.iterator]?t[Symbol.iterator]():t.next?t:JZe(t)}class Pse{constructor(e){if(typeof xt>"u")throw new Error("Missing Buffer dependency");this.stream=Ase(e),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(e){if(!this.eof())return this.started||await this._init(),this.cursor+e>this.buffer.length&&(this._trim(),await this._accumulate(e)),this._moveCursor(e),this.buffer.slice(this.undoCursor,this.cursor)}async skip(e){this.eof()||(this.started||await this._init(),this.cursor+e>this.buffer.length&&(this._trim(),await this._accumulate(e)),this._moveCursor(e))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:e,value:n}=await this.stream.next();return e&&(this._ended=!0,!n)?xt.alloc(0):(n&&(n=xt.from(n)),n)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(e){this.undoCursor=this.cursor,this.cursor+=e,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(e){if(this._ended)return;const n=[this.buffer];for(;this.cursor+e>QZe(n);){const r=await this._next();if(this._ended)break;n.push(r)}this.buffer=xt.concat(n)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function QZe(t){return t.reduce((e,n)=>e+n.length,0)}async function eJe(t,e){const n=new Pse(t);let r=await n.read(4);if(r=r.toString("utf8"),r!=="PACK")throw new tn(`Invalid PACK header '${r}'`);let i=await n.read(4);if(i=i.readUInt32BE(0),i!==2)throw new tn(`Invalid packfile version: ${i}`);let s=await n.read(4);if(s=s.readUInt32BE(0),!(s<1))for(;!n.eof()&&s--;){const o=n.tell(),{type:a,length:l,ofs:c,reference:u}=await tJe(n),h=new sD.Inflate;for(;!h.result;){const d=await n.chunk();if(!d)break;if(h.push(d,!1),h.err)throw new tn(`Pako error: ${h.msg}`);if(h.result){if(h.result.length!==l)throw new tn("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(d.length-h.strm.avail_in);const f=n.tell();await e({data:h.result,type:a,num:s,offset:o,end:f,reference:u,ofs:c})}}}}async function tJe(t){let e=await t.byte();const n=e>>4&7;let r=e&15;if(e&128){let o=4;do e=await t.byte(),r|=(e&127)<<o,o+=7;while(e&128)}let i,s;if(n===6){let o=0;i=0;const a=[];do e=await t.byte(),i|=(e&127)<<o,o+=7,a.push(e);while(e&128);s=xt.from(a)}return n===7&&(s=await t.read(20)),{type:n,length:r,ofs:i,reference:s}}async function Nse(t){return sD.inflate(t)}function nJe(t){const e=[];let n=0,r=0;do{n=t.readUInt8();const i=n&127;e.push(i),r=n&128}while(r);return e.reduce((i,s)=>i+1<<7|s,-1)}function rJe(t,e){let n=e,r=4,i=null;do i=t.readUInt8(),n|=(i&127)<<r,r+=7;while(i&128);return n}class wg{constructor(e){Object.assign(this,e),this.offsetCache={}}static async fromIdx({idx:e,getExternalRefDelta:n}){const r=new Ml(e);if(r.slice(4).toString("hex")!=="ff744f63")return;const s=r.readUInt32BE();if(s!==2)throw new tn(`Unable to read version ${s} packfile IDX. (Only version 2 supported)`);if(e.byteLength>2048*1024*1024)throw new tn("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");r.seek(r.tell()+4*255);const o=r.readUInt32BE(),a=[];for(let u=0;u<o;u++){const h=r.slice(20).toString("hex");a[u]=h}r.seek(r.tell()+4*o);const l=new Map;for(let u=0;u<o;u++)l.set(a[u],r.readUInt32BE());const c=r.slice(20).toString("hex");return new wg({hashes:a,crcs:{},offsets:l,packfileSha:c,getExternalRefDelta:n})}static async fromPack({pack:e,getExternalRefDelta:n,onProgress:r}){const i={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},s={},o=e.slice(-20).toString("hex"),a=[],l={},c=new Map;let u=null,h=null;await eJe([e],async({data:b,type:y,reference:v,offset:x,num:w})=>{u===null&&(u=w);const S=Math.floor((u-w)*100/u);S!==h&&r&&await r({phase:"Receiving objects",loaded:u-w,total:u}),h=S,y=i[y],["commit","tree","blob","tag"].includes(y)?s[x]={type:y,offset:x}:y==="ofs-delta"?s[x]={type:y,offset:x}:y==="ref-delta"&&(s[x]={type:y,offset:x})});const d=Object.keys(s).map(Number);for(const[b,y]of d.entries()){const v=b+1===d.length?e.byteLength-20:d[b+1],x=s[y],w=QKe.buf(e.slice(y,v))>>>0;x.end=v,x.crc=w}const f=new wg({pack:Promise.resolve(e),packfileSha:o,crcs:l,hashes:a,offsets:c,getExternalRefDelta:n});h=null;let m=0;const g=[0,0,0,0,0,0,0,0,0,0,0,0];for(let b in s){b=Number(b);const y=Math.floor(m*100/u);y!==h&&r&&await r({phase:"Resolving deltas",loaded:m,total:u}),m++,h=y;const v=s[b];if(!v.oid)try{f.readDepth=0,f.externalReadDepth=0;const{type:x,object:w}=await f.readSlice({start:b});g[f.readDepth]+=1;const S=await ou(l0.wrap({type:x,object:w}));v.oid=S,a.push(S),c.set(S,b),l[S]=v.crc}catch{continue}}return a.sort(),f}async toBuffer(){const e=[],n=(c,u)=>{e.push(xt.from(c,u))};n("ff744f63","hex"),n("00000002","hex");const r=new Ml(xt.alloc(256*4));for(let c=0;c<256;c++){let u=0;for(const h of this.hashes)parseInt(h.slice(0,2),16)<=c&&u++;r.writeUInt32BE(u)}e.push(r.buffer);for(const c of this.hashes)n(c,"hex");const i=new Ml(xt.alloc(this.hashes.length*4));for(const c of this.hashes)i.writeUInt32BE(this.crcs[c]);e.push(i.buffer);const s=new Ml(xt.alloc(this.hashes.length*4));for(const c of this.hashes)s.writeUInt32BE(this.offsets.get(c));e.push(s.buffer),n(this.packfileSha,"hex");const o=xt.concat(e),a=await ou(o),l=xt.alloc(20);return l.write(a,"hex"),xt.concat([o,l])}async load({pack:e}){this.pack=e}async unload(){this.pack=null}async read({oid:e}){if(!this.offsets.get(e)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(e);throw new tn(`Could not read object ${e} from packfile`)}const n=this.offsets.get(e);return this.readSlice({start:n})}async readSlice({start:e}){if(this.offsetCache[e])return Object.assign({},this.offsetCache[e]);this.readDepth++;const n={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new tn("Tried to read from a GitPackIndex with no packfile loaded into memory");const r=(await this.pack).slice(e),i=new Ml(r),s=i.readUInt8(),o=s&112;let a=n[o];if(a===void 0)throw new tn("Unrecognized type: 0b"+o.toString(2));const l=s&15;let c=l;s&128&&(c=rJe(i,l));let h=null,d=null;if(a==="ofs_delta"){const m=nJe(i),g=e-m;({object:h,type:a}=await this.readSlice({start:g}))}if(a==="ref_delta"){const m=i.slice(20).toString("hex");({object:h,type:a}=await this.read({oid:m}))}const f=r.slice(i.tell());if(d=xt.from(await Nse(f)),d.byteLength!==c)throw new tn(`Packfile told us object would have length ${c} but it had length ${d.byteLength}`);return h&&(d=xt.from(ZZe(d,h))),this.readDepth>3&&(this.offsetCache[e]={type:a,object:d}),{type:a,format:"content",object:d}}}const Dw=Symbol("PackfileCache");async function iJe({fs:t,filename:e,getExternalRefDelta:n,emitter:r,emitterPrefix:i}){const s=await t.read(e);return wg.fromIdx({idx:s,getExternalRefDelta:n})}function cD({fs:t,cache:e,filename:n,getExternalRefDelta:r,emitter:i,emitterPrefix:s}){e[Dw]||(e[Dw]=new Map);let o=e[Dw].get(n);return o||(o=iJe({fs:t,filename:n,getExternalRefDelta:r,emitter:i,emitterPrefix:s}),e[Dw].set(n,o)),o}async function sJe({fs:t,cache:e,gitdir:n,oid:r,format:i="content",getExternalRefDelta:s}){let o=await t.readdir(it.join(n,"objects/pack"));o=o.filter(a=>a.endsWith(".idx"));for(const a of o){const l=`${n}/objects/pack/${a}`,c=await cD({fs:t,cache:e,filename:l,getExternalRefDelta:s});if(c.error)throw new tn(c.error);if(c.offsets.has(r)){if(!c.pack){const h=l.replace(/idx$/,"pack");c.pack=t.read(h)}const u=await c.read({oid:r,getExternalRefDelta:s});return u.format="content",u.source=`objects/pack/${a.replace(/idx$/,"pack")}`,u}}return null}async function vr({fs:t,cache:e,gitdir:n,oid:r,format:i="content"}){const s=u=>vr({fs:t,cache:e,gitdir:n,oid:u});let o;if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(o={format:"wrapped",object:xt.from("tree 0\0")}),o||(o=await Tse({fs:t,gitdir:n,oid:r})),!o){if(o=await sJe({fs:t,cache:e,gitdir:n,oid:r,getExternalRefDelta:s}),!o)throw new Kn(r);return o}if(i==="deflated"||(o.format==="deflated"&&(o.object=xt.from(await Nse(o.object)),o.format="wrapped"),i==="wrapped"))return o;const a=await ou(o.object);if(a!==r)throw new tn(`SHA check failed! Expected ${r}, computed ${a}`);const{object:l,type:c}=l0.unwrap(o.object);if(o.type=c,o.object=l,o.format="content",i==="content")return o;throw new tn(`invalid requested format "${i}"`)}class Ja extends Tn{constructor(e,n,r=!0){super(`Failed to create ${e} at ${n} because it already exists.${r?` (Hint: use 'force: true' parameter to overwrite existing ${e}.)`:""}`),this.code=this.name=Ja.code,this.data={noun:e,where:n,canForce:r}}}Ja.code="AlreadyExistsError";class Kv extends Tn{constructor(e,n,r){super(`Found multiple ${e} matching "${n}" (${r.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=Kv.code,this.data={nouns:e,short:n,matches:r}}}Kv.code="AmbiguousError";class Yv extends Tn{constructor(e){super(`Your local changes to the following files would be overwritten by checkout: ${e.join(", ")}`),this.code=this.name=Yv.code,this.data={filepaths:e}}}Yv.code="CheckoutConflictError";class Xv extends Tn{constructor(e,n){super(`Failed to checkout "${e}" because commit ${n} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=Xv.code,this.data={ref:e,oid:n}}}Xv.code="CommitNotFetchedError";class Zv extends Tn{constructor(){super("Empty response from git server."),this.code=this.name=Zv.code,this.data={}}}Zv.code="EmptyServerResponseError";class Jv extends Tn{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=Jv.code,this.data={}}}Jv.code="FastForwardError";class Qv extends Tn{constructor(e,n){super(`One or more branches were not updated: ${e}`),this.code=this.name=Qv.code,this.data={prettyDetails:e,result:n}}}Qv.code="GitPushError";class Sg extends Tn{constructor(e,n,r){super(`HTTP Error: ${e} ${n}`),this.code=this.name=Sg.code,this.data={statusCode:e,statusMessage:n,response:r}}}Sg.code="HttpError";class Ah extends Tn{constructor(e){let n="invalid filepath";e==="leading-slash"||e==="trailing-slash"?n='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':e==="directory"&&(n='"filepath" should not be a directory.'),super(n),this.code=this.name=Ah.code,this.data={reason:e}}}Ah.code="InvalidFilepathError";class Va extends Tn{constructor(e,n){super(`"${e}" would be an invalid git reference. (Hint: a valid alternative would be "${n}".)`),this.code=this.name=Va.code,this.data={ref:e,suggestion:n}}}Va.code="InvalidRefNameError";class ex extends Tn{constructor(e){super(`Maximum search depth of ${e} exceeded.`),this.code=this.name=ex.code,this.data={depth:e}}}ex.code="MaxDepthError";class c0 extends Tn{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=c0.code,this.data={}}}c0.code="MergeNotSupportedError";class u0 extends Tn{constructor(e,n,r,i){super(`Automatic merge failed with one or more merge conflicts in the following files: ${e.toString()}. Fix conflicts then commit the result.`),this.code=this.name=u0.code,this.data={filepaths:e,bothModified:n,deleteByUs:r,deleteByTheirs:i}}}u0.code="MergeConflictError";class rs extends Tn{constructor(e){super(`No name was provided for ${e} in the argument or in the .git/config file.`),this.code=this.name=rs.code,this.data={role:e}}}rs.code="MissingNameError";class Hs extends Tn{constructor(e){super(`The function requires a "${e}" parameter but none was provided.`),this.code=this.name=Hs.code,this.data={parameter:e}}}Hs.code="MissingParameterError";class tx extends Tn{constructor(e){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=tx.code,this.data={errors:e},this.errors=e}}tx.code="MultipleGitError";class Zf extends Tn{constructor(e,n){super(`Expected "${e}" but received "${n}".`),this.code=this.name=Zf.code,this.data={expected:e,actual:n}}}Zf.code="ParseError";class Eg extends Tn{constructor(e){let n="";e==="not-fast-forward"?n=" because it was not a simple fast-forward":e==="tag-exists"&&(n=" because tag already exists"),super(`Push rejected${n}. Use "force: true" to override.`),this.code=this.name=Eg.code,this.data={reason:e}}}Eg.code="PushRejectedError";class ih extends Tn{constructor(e,n){super(`Remote does not support the "${e}" so the "${n}" parameter cannot be used.`),this.code=this.name=ih.code,this.data={capability:e,parameter:n}}}ih.code="RemoteCapabilityError";class nx extends Tn{constructor(e,n){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${e}`),this.code=this.name=nx.code,this.data={preview:e,response:n}}}nx.code="SmartHttpError";class rx extends Tn{constructor(e,n,r){super(`Git remote "${e}" uses an unrecognized transport protocol: "${n}"`),this.code=this.name=rx.code,this.data={url:e,transport:n,suggestion:r}}}rx.code="UnknownTransportError";class ix extends Tn{constructor(e){super(`Cannot parse remote URL: "${e}"`),this.code=this.name=ix.code,this.data={url:e}}}ix.code="UrlParseError";class h0 extends Tn{constructor(){super("The operation was canceled."),this.code=this.name=h0.code,this.data={}}}h0.code="UserCanceledError";class sx extends Tn{constructor(e){super(`Could not merge index: Entry for '${e}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=sx.code,this.data={filepath:e}}}sx.code="IndexResetError";class ox extends Tn{constructor(e){super(`"${e}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=ox.code,this.data={ref:e}}}ox.code="NoCommitError";var oJe=Object.freeze({__proto__:null,AlreadyExistsError:Ja,AmbiguousError:Kv,CheckoutConflictError:Yv,CommitNotFetchedError:Xv,EmptyServerResponseError:Zv,FastForwardError:Jv,GitPushError:Qv,HttpError:Sg,InternalError:tn,InvalidFilepathError:Ah,InvalidOidError:Th,InvalidRefNameError:Va,MaxDepthError:ex,MergeNotSupportedError:c0,MergeConflictError:u0,MissingNameError:rs,MissingParameterError:Hs,MultipleGitError:tx,NoRefspecError:qv,NotFoundError:Kn,ObjectTypeError:Es,ParseError:Zf,PushRejectedError:Eg,RemoteCapabilityError:ih,SmartHttpError:nx,UnknownTransportError:rx,UnsafeFilepathError:o0,UrlParseError:ix,UserCanceledError:h0,UnmergedPathsError:Gv,IndexResetError:sx,NoCommitError:ox});function RN({name:t,email:e,timestamp:n,timezoneOffset:r}){return r=aJe(r),`${t} <${e}> ${n} ${r}`}function aJe(t){const e=lJe(cJe(t));t=Math.abs(t);const n=Math.floor(t/60);t-=n*60;let r=String(n),i=String(t);return r.length<2&&(r="0"+r),i.length<2&&(i="0"+i),(e===-1?"-":"+")+r+i}function lJe(t){return Math.sign(t)||(Object.is(t,-0)?-1:1)}function cJe(t){return t===0?t:-t}function Nc(t){return t=t.replace(/\r/g,""),t=t.replace(/^\n+/,""),t=t.replace(/\n+$/,"")+`
`,t}function kE(t){const[,e,n,r,i]=t.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:e,email:n,timestamp:Number(r),timezoneOffset:uJe(i)}}function uJe(t){let[,e,n,r]=t.match(/(\+|-)(\d\d)(\d\d)/);return r=(e==="+"?1:-1)*(Number(n)*60+Number(r)),hJe(r)}function hJe(t){return t===0?t:-t}class vs{constructor(e){if(typeof e=="string")this._tag=e;else if(xt.isBuffer(e))this._tag=e.toString("utf8");else if(typeof e=="object")this._tag=vs.render(e);else throw new tn("invalid type passed to GitAnnotatedTag constructor")}static from(e){return new vs(e)}static render(e){return`object ${e.object}
type ${e.type}
tag ${e.tag}
tagger ${RN(e.tagger)}

${e.message}
${e.gpgsig?e.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const e=this.withoutSignature();return e.slice(e.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const e=this.justHeaders().split(`
`),n=[];for(const i of e)i[0]===" "?n[n.length-1]+=`
`+i.slice(1):n.push(i);const r={};for(const i of n){const s=i.slice(0,i.indexOf(" ")),o=i.slice(i.indexOf(" ")+1);Array.isArray(r[s])?r[s].push(o):r[s]=o}return r.tagger&&(r.tagger=kE(r.tagger)),r.committer&&(r.committer=kE(r.committer)),r}withoutSignature(){const e=Nc(this._tag);return e.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?e:e.slice(0,e.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const e=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return Nc(e)}payload(){return this.withoutSignature()+`
`}toObject(){return xt.from(this._tag,"utf8")}static async sign(e,n,r){const i=e.payload();let{signature:s}=await n({payload:i,secretKey:r});s=Nc(s);const o=i+s;return vs.from(o)}}function qA(t){return t.trim().split(`
`).map(e=>" "+e).join(`
`)+`
`}function dJe(t){return t.split(`
`).map(e=>e.replace(/^ /,"")).join(`
`)}class gr{constructor(e){if(typeof e=="string")this._commit=e;else if(xt.isBuffer(e))this._commit=e.toString("utf8");else if(typeof e=="object")this._commit=gr.render(e);else throw new tn("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:e,signature:n}){const r=gr.justHeaders(e),i=gr.justMessage(e),s=Nc(r+`
gpgsig`+qA(n)+`
`+i);return new gr(s)}static from(e){return new gr(e)}toObject(){return xt.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return gr.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(e){return Nc(e.slice(e.indexOf(`

`)+2))}static justHeaders(e){return e.slice(0,e.indexOf(`

`))}parseHeaders(){const e=gr.justHeaders(this._commit).split(`
`),n=[];for(const i of e)i[0]===" "?n[n.length-1]+=`
`+i.slice(1):n.push(i);const r={parent:[]};for(const i of n){const s=i.slice(0,i.indexOf(" ")),o=i.slice(i.indexOf(" ")+1);Array.isArray(r[s])?r[s].push(o):r[s]=o}return r.author&&(r.author=kE(r.author)),r.committer&&(r.committer=kE(r.committer)),r}static renderHeaders(e){let n="";if(e.tree?n+=`tree ${e.tree}
`:n+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,e.parent){if(e.parent.length===void 0)throw new tn("commit 'parent' property should be an array");for(const s of e.parent)n+=`parent ${s}
`}const r=e.author;n+=`author ${RN(r)}
`;const i=e.committer||e.author;return n+=`committer ${RN(i)}
`,e.gpgsig&&(n+="gpgsig"+qA(e.gpgsig)),n}static render(e){return gr.renderHeaders(e)+`
`+Nc(e.message)}render(){return this._commit}withoutSignature(){const e=Nc(this._commit);if(e.indexOf(`
gpgsig`)===-1)return e;const n=e.slice(0,e.indexOf(`
gpgsig`)),r=e.slice(e.indexOf(`-----END PGP SIGNATURE-----
`)+28);return Nc(n+`
`+r)}isolateSignature(){const e=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return dJe(e)}static async sign(e,n,r){const i=e.withoutSignature(),s=gr.justMessage(e._commit);let{signature:o}=await n({payload:i,secretKey:r});o=Nc(o);const l=gr.justHeaders(e._commit)+`
gpgsig`+qA(o)+`
`+s;return gr.from(l)}}async function kg({fs:t,cache:e,gitdir:n,oid:r}){if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:Vs.from([]),oid:r};const{type:i,object:s}=await vr({fs:t,cache:e,gitdir:n,oid:r});if(i==="tag")return r=vs.from(s).parse().object,kg({fs:t,cache:e,gitdir:n,oid:r});if(i==="commit")return r=gr.from(s).parse().tree,kg({fs:t,cache:e,gitdir:n,oid:r});if(i!=="tree")throw new Es(r,i,"tree");return{tree:Vs.from(s),oid:r}}class fJe{constructor({fs:e,gitdir:n,ref:r,cache:i}){this.fs=e,this.cache=i,this.gitdir=n,this.mapPromise=(async()=>{const o=new Map;let a;try{a=await ft.resolve({fs:e,gitdir:n,ref:r})}catch(c){c instanceof Kn&&(a="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const l=await kg({fs:e,cache:this.cache,gitdir:n,oid:a});return l.type="tree",l.mode="40000",o.set(".",l),o})();const s=this;this.ConstructEntry=class{constructor(a){this._fullpath=a,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return s.type(this)}async mode(){return s.mode(this)}async stat(){return s.stat(this)}async content(){return s.content(this)}async oid(){return s.oid(this)}}}async readdir(e){const n=e._fullpath,{fs:r,cache:i,gitdir:s}=this,o=await this.mapPromise,a=o.get(n);if(!a)throw new Error(`No obj for ${n}`);const l=a.oid;if(!l)throw new Error(`No oid for obj ${JSON.stringify(a)}`);if(a.type!=="tree")return null;const{type:c,object:u}=await vr({fs:r,cache:i,gitdir:s,oid:l});if(c!==a.type)throw new Es(l,c,a.type);const h=Vs.from(u);for(const d of h)o.set(it.join(n,d.path),d);return h.entries().map(d=>it.join(n,d.path))}async type(e){if(e._type===!1){const n=await this.mapPromise,{type:r}=n.get(e._fullpath);e._type=r}return e._type}async mode(e){if(e._mode===!1){const n=await this.mapPromise,{mode:r}=n.get(e._fullpath);e._mode=Sse(parseInt(r,8))}return e._mode}async stat(e){}async content(e){if(e._content===!1){const n=await this.mapPromise,{fs:r,cache:i,gitdir:s}=this,a=n.get(e._fullpath).oid,{type:l,object:c}=await vr({fs:r,cache:i,gitdir:s,oid:a});l!=="blob"?e._content=void 0:e._content=new Uint8Array(c)}return e._content}async oid(e){if(e._oid===!1){const r=(await this.mapPromise).get(e._fullpath);e._oid=r.oid}return e._oid}}function Xo({ref:t="HEAD"}={}){const e=Object.create(null);return Object.defineProperty(e,d5,{value:function({fs:n,gitdir:r,cache:i}){return new fJe({fs:n,gitdir:r,ref:t,cache:i})}}),Object.freeze(e),e}class pJe{constructor({fs:e,dir:n,gitdir:r,cache:i}){this.fs=e,this.cache=i,this.dir=n,this.gitdir=r;const s=this;this.ConstructEntry=class{constructor(a){this._fullpath=a,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return s.type(this)}async mode(){return s.mode(this)}async stat(){return s.stat(this)}async content(){return s.content(this)}async oid(){return s.oid(this)}}}async readdir(e){const n=e._fullpath,{fs:r,dir:i}=this,s=await r.readdir(it.join(i,n));return s===null?null:s.map(o=>it.join(n,o))}async type(e){return e._type===!1&&await e.stat(),e._type}async mode(e){return e._mode===!1&&await e.stat(),e._mode}async stat(e){if(e._stat===!1){const{fs:n,dir:r}=this;let i=await n.lstat(`${r}/${e._fullpath}`);if(!i)throw new Error(`ENOENT: no such file or directory, lstat '${e._fullpath}'`);let s=i.isDirectory()?"tree":"blob";s==="blob"&&!i.isFile()&&!i.isSymbolicLink()&&(s="special"),e._type=s,i=xg(i),e._mode=i.mode,i.size===-1&&e._actualSize&&(i.size=e._actualSize),e._stat=i}return e._stat}async content(e){if(e._content===!1){const{fs:n,dir:r,gitdir:i}=this;if(await e.type()==="tree")e._content=void 0;else{const o=await(await Ur.get({fs:n,gitdir:i})).get("core.autocrlf"),a=await n.read(`${r}/${e._fullpath}`,{autocrlf:o});e._actualSize=a.length,e._stat&&e._stat.size===-1&&(e._stat.size=e._actualSize),e._content=new Uint8Array(a)}}return e._content}async oid(e){if(e._oid===!1){const{fs:n,gitdir:r,cache:i}=this;let s;await Si.acquire({fs:n,gitdir:r,cache:i},async function(o){const a=o.entriesMap.get(e._fullpath),l=await e.stat(),u=await(await Ur.get({fs:n,gitdir:r})).get("core.filemode"),h=typeof Qn<"u"?Qn.platform!=="win32":!0;!a||_E(l,a,u,h)?await e.content()===void 0?s=void 0:(s=await ou(l0.wrap({type:"blob",object:await e.content()})),a&&s===a.oid&&(!u||l.mode===a.mode)&&_E(l,a,u,h)&&o.insert({filepath:e._fullpath,stats:l,oid:s})):s=a.oid}),e._oid=s}return e._oid}}function ax(){const t=Object.create(null);return Object.defineProperty(t,d5,{value:function({fs:e,dir:n,gitdir:r,cache:i}){return new pJe({fs:e,dir:n,gitdir:r,cache:i})}}),Object.freeze(t),t}function mJe(t,e){const n=e-t;return Array.from({length:n},(r,i)=>t+i)}const Lse=typeof Array.prototype.flat>"u"?t=>t.reduce((e,n)=>e.concat(n),[]):t=>t.flat();class gJe{constructor(){this.value=null}consider(e){e!=null&&(this.value===null?this.value=e:e<this.value&&(this.value=e))}reset(){this.value=null}}function*bJe(t){const e=new gJe;let n;const r=[],i=t.length;for(let s=0;s<i;s++)r[s]=t[s].next().value,r[s]!==void 0&&e.consider(r[s]);if(e.value!==null)for(;;){const s=[];n=e.value,e.reset();for(let o=0;o<i;o++)r[o]!==void 0&&r[o]===n?(s[o]=r[o],r[o]=t[o].next().value):s[o]=null,r[o]!==void 0&&e.consider(r[o]);if(yield s,e.value===null)return}}async function Ph({fs:t,cache:e,dir:n,gitdir:r,trees:i,map:s=async(l,c)=>c,reduce:o=async(l,c)=>{const u=Lse(c);return l!==void 0&&u.unshift(l),u},iterate:a=(l,c)=>Promise.all([...c].map(l))}){const l=i.map(f=>f[d5]({fs:t,dir:n,gitdir:r,cache:e})),c=new Array(l.length).fill("."),u=mJe(0,l.length),h=async f=>{u.map(b=>{f[b]=f[b]&&new l[b].ConstructEntry(f[b])});const g=(await Promise.all(u.map(b=>f[b]?l[b].readdir(f[b]):[]))).map(b=>b===null?[]:b).map(b=>b[Symbol.iterator]());return{entries:f,children:bJe(g)}},d=async f=>{const{entries:m,children:g}=await h(f),b=m.find(v=>v&&v._fullpath)._fullpath,y=await s(b,m);if(y!==null){let v=await a(d,g);return v=v.filter(x=>x!==void 0),o(y,v)}};return d(c)}async function IN(t,e){const n=await t.readdir(e);n==null?await t.rm(e):n.length?await Promise.all(n.map(r=>{const i=it.join(e,r);return t.lstat(i).then(s=>{if(s)return s.isDirectory()?IN(t,i):t.rm(i)})})).then(()=>t.rmdir(e)):await t.rmdir(e)}function yJe(t){return vJe(t)&&rH(t.then)&&rH(t.catch)}function vJe(t){return t&&typeof t=="object"}function rH(t){return typeof t=="function"}function iH(t){return yJe((n=>{try{return n.readFile().catch(r=>r)}catch(r){return r}})(t))}const sH=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function oH(t,e){if(iH(e))for(const n of sH)t[`_${n}`]=e[n].bind(e);else for(const n of sH)t[`_${n}`]=$A(e[n].bind(e));iH(e)?e.rm?t._rm=e.rm.bind(e):e.rmdir.length>1?t._rm=e.rmdir.bind(e):t._rm=IN.bind(null,t):e.rm?t._rm=$A(e.rm.bind(e)):e.rmdir.length>2?t._rm=$A(e.rmdir.bind(e)):t._rm=IN.bind(null,t)}class jt{constructor(e){if(typeof e._original_unwrapped_fs<"u")return e;const n=Object.getOwnPropertyDescriptor(e,"promises");n&&n.enumerable?oH(this,e.promises):oH(this,e),this._original_unwrapped_fs=e}async exists(e,n={}){try{return await this._stat(e),!0}catch(r){if(r.code==="ENOENT"||r.code==="ENOTDIR"||(r.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',r),r}}async read(e,n={}){try{let r=await this._readFile(e,n);if(n.autocrlf==="true")try{r=new TextDecoder("utf8",{fatal:!0}).decode(r),r=r.replace(/\r\n/g,`
`),r=new TextEncoder().encode(r)}catch{}return typeof r!="string"&&(r=xt.from(r)),r}catch{return null}}async write(e,n,r={}){try{await this._writeFile(e,n,r);return}catch{await this.mkdir(_g(e)),await this._writeFile(e,n,r)}}async mkdir(e,n=!1){try{await this._mkdir(e);return}catch(r){if(r===null||r.code==="EEXIST")return;if(n)throw r;if(r.code==="ENOENT"){const i=_g(e);if(i==="."||i==="/"||i===e)throw r;await this.mkdir(i),await this.mkdir(e,!0)}}}async rm(e){try{await this._unlink(e)}catch(n){if(n.code!=="ENOENT")throw n}}async rmdir(e,n){try{n&&n.recursive?await this._rm(e,n):await this._rmdir(e)}catch(r){if(r.code!=="ENOENT")throw r}}async readdir(e){try{const n=await this._readdir(e);return n.sort(h5),n}catch(n){return n.code==="ENOTDIR"?null:[]}}async readdirDeep(e){const n=await this._readdir(e);return(await Promise.all(n.map(async i=>{const s=e+"/"+i;return(await this._stat(s)).isDirectory()?this.readdirDeep(s):s}))).reduce((i,s)=>i.concat(s),[])}async lstat(e){try{return await this._lstat(e)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async readlink(e,n={encoding:"buffer"}){try{const r=await this._readlink(e,n);return xt.isBuffer(r)?r:xt.from(r)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async writelink(e,n){return this._symlink(n.toString("utf8"),e)}}function je(t,e){if(e===void 0)throw new Hs(t)}async function CE(t,e){return!t&&!e?!1:t&&!e||!t&&e?!0:!(await t.type()==="tree"&&await e.type()==="tree"||await t.type()===await e.type()&&await t.mode()===await e.mode()&&await t.oid()===await e.oid())}async function xJe({fs:t,dir:e,gitdir:n=it.join(e,".git"),commit:r="HEAD",cache:i={}}){try{je("fs",t),je("dir",e),je("gitdir",n);const s=new jt(t),o=[Xo({ref:r}),ax(),a0()];let a=[];await Si.acquire({fs:s,gitdir:n,cache:i},async function(c){a=c.unmergedPaths});const l=await Ph({fs:s,cache:i,dir:e,gitdir:n,trees:o,map:async function(c,[u,h,d]){const f=!await CE(h,d),m=a.includes(c),g=!await CE(d,u);if(f||m)return u?{path:c,mode:await u.mode(),oid:await u.oid(),type:await u.type(),content:await u.content()}:void 0;if(g)return!1;throw new sx(c)}});await Si.acquire({fs:s,gitdir:n,cache:i},async function(c){for(const u of l)if(u!==!1){if(!u){await s.rmdir(`${e}/${u.path}`,{recursive:!0}),c.delete({filepath:u.path});continue}if(u.type==="blob"){const h=new TextDecoder().decode(u.content);await s.write(`${e}/${u.path}`,h,{mode:u.mode}),c.insert({filepath:u.path,oid:u.oid,stage:0})}}})}catch(s){throw s.caller="git.abortMerge",s}}class d0{static async isIgnored({fs:e,dir:n,gitdir:r=it.join(n,".git"),filepath:i}){if(wE(i)===".git")return!0;if(i===".")return!1;let s="";const o=it.join(r,"info","exclude");await e.exists(o)&&(s=await e.read(o,"utf8"));const a=[{gitignore:it.join(n,".gitignore"),filepath:i}],l=i.split("/").filter(Boolean);for(let u=1;u<l.length;u++){const h=l.slice(0,u).join("/"),d=l.slice(u).join("/");a.push({gitignore:it.join(n,h,".gitignore"),filepath:d})}let c=!1;for(const u of a){let h;try{h=await e.read(u.gitignore,"utf8")}catch(m){if(m.code==="NOENT")continue}const d=fZe().add(s);d.add(h);const f=_g(u.filepath);if(f!=="."&&d.ignores(f))return!0;c?c=!d.test(u.filepath).unignored:c=d.test(u.filepath).ignored}return c}}async function _Je({fs:t,gitdir:e,object:n,format:r,oid:i}){const s=`objects/${i.slice(0,2)}/${i.slice(2)}`,o=`${e}/${s}`;await t.exists(o)||await t.write(o,n)}let KA=null;async function Rse(t){return KA===null&&(KA=SJe()),KA?wJe(t):sD.deflate(t)}async function wJe(t){const e=new CompressionStream("deflate"),n=new Blob([t]).stream().pipeThrough(e);return new Uint8Array(await new Response(n).arrayBuffer())}function SJe(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function Zs({fs:t,gitdir:e,type:n,object:r,format:i="content",oid:s=void 0,dryRun:o=!1}){return i!=="deflated"&&(i!=="wrapped"&&(r=l0.wrap({type:n,object:r})),s=await ou(r),r=xt.from(await Rse(r))),o||await _Je({fs:t,gitdir:e,object:r,format:"deflated",oid:s}),s}function Ise(t){let e;for(;~(e=t.indexOf(92));)t[e]=47;return t}async function EJe({fs:t,dir:e,gitdir:n=it.join(e,".git"),filepath:r,cache:i={},force:s=!1,parallel:o=!0}){try{je("fs",t),je("dir",e),je("gitdir",n),je("filepath",r);const a=new jt(t);await Si.acquire({fs:a,gitdir:n,cache:i},async l=>ON({dir:e,gitdir:n,fs:a,filepath:r,index:l,force:s,parallel:o}))}catch(a){throw a.caller="git.add",a}}async function ON({dir:t,gitdir:e,fs:n,filepath:r,index:i,force:s,parallel:o}){r=Array.isArray(r)?r:[r];const a=r.map(async h=>{if(!s&&await d0.isIgnored({fs:n,dir:t,gitdir:e,filepath:h}))return;const d=await n.lstat(it.join(t,h));if(!d)throw new Kn(h);if(d.isDirectory()){const f=await n.readdir(it.join(t,h));if(o){const m=f.map(g=>ON({dir:t,gitdir:e,fs:n,filepath:[it.join(h,g)],index:i,force:s,parallel:o}));await Promise.all(m)}else for(const m of f)await ON({dir:t,gitdir:e,fs:n,filepath:[it.join(h,m)],index:i,force:s,parallel:o})}else{const m=await(await Ur.get({fs:n,gitdir:e})).get("core.autocrlf"),g=d.isSymbolicLink()?await n.readlink(it.join(t,h)).then(Ise):await n.read(it.join(t,h),{autocrlf:m});if(g===null)throw new Kn(h);const b=await Zs({fs:n,gitdir:e,type:"blob",object:g});i.insert({filepath:h,stats:d,oid:b})}}),l=await Promise.allSettled(a),c=l.filter(h=>h.status==="rejected").map(h=>h.reason);if(c.length>1)throw new tx(c);if(c.length===1)throw c[0];return l.filter(h=>h.status==="fulfilled"&&h.value).map(h=>h.value)}async function qy({fs:t,gitdir:e,path:n}){return(await Ur.get({fs:t,gitdir:e})).get(n)}function Ose(t,...e){for(const n of e)if(n)for(const r of Object.keys(n)){const i=n[r];i!==void 0&&(t[r]=i)}return t}async function Nh({fs:t,gitdir:e,author:n,commit:r}){const i=Math.floor(Date.now()/1e3),s={name:await qy({fs:t,gitdir:e,path:"user.name"}),email:await qy({fs:t,gitdir:e,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},o=Ose({},s,r?r.author:void 0,n);if(o.name!==void 0)return o}async function Cg({fs:t,gitdir:e,author:n,committer:r,commit:i}){const s=Math.floor(Date.now()/1e3),o={name:await qy({fs:t,gitdir:e,path:"user.name"}),email:await qy({fs:t,gitdir:e,path:"user.email"})||"",timestamp:s,timezoneOffset:new Date(s*1e3).getTimezoneOffset()},a=Ose({},o,i?i.committer:void 0,n,r);if(a.name!==void 0)return a}async function Dse({fs:t,cache:e,gitdir:n,oid:r}){const{type:i,object:s}=await vr({fs:t,cache:e,gitdir:n,oid:r});if(i==="tag")return r=vs.from(s).parse().object,Dse({fs:t,cache:e,gitdir:n,oid:r});if(i!=="commit")throw new Es(r,i,"commit");return{commit:gr.from(s),oid:r}}async function Tg({fs:t,cache:e,gitdir:n,oid:r}){const{commit:i,oid:s}=await Dse({fs:t,cache:e,gitdir:n,oid:r});return{oid:s,commit:i.parse(),payload:i.withoutSignature()}}async function f5({fs:t,cache:e,onSign:n,gitdir:r,message:i,author:s,committer:o,signingKey:a,amend:l=!1,dryRun:c=!1,noUpdateBranch:u=!1,ref:h,parent:d,tree:f}){let m=!1;h||(h=await ft.resolve({fs:t,gitdir:r,ref:"HEAD",depth:2}));let g,b;try{g=await ft.resolve({fs:t,gitdir:r,ref:h}),b=await Tg({fs:t,gitdir:r,oid:g,cache:{}})}catch{m=!0}if(l&&m)throw new ox(h);const y=l?await Nh({fs:t,gitdir:r,author:s,commit:b.commit}):await Nh({fs:t,gitdir:r,author:s});if(!y)throw new rs("author");const v=l?await Cg({fs:t,gitdir:r,author:y,committer:o,commit:b.commit}):await Cg({fs:t,gitdir:r,author:y,committer:o});if(!v)throw new rs("committer");return Si.acquire({fs:t,gitdir:r,cache:e,allowUnmerged:!1},async function(x){const S=kse(x.entries).get(".");if(f||(f=await Mse({fs:t,gitdir:r,inode:S,dryRun:c})),d?d=await Promise.all(d.map(_=>ft.resolve({fs:t,gitdir:r,ref:_}))):l?d=b.commit.parent:d=g?[g]:[],!i)if(l)i=b.commit.message;else throw new Hs("message");let E=gr.from({tree:f,parent:d,author:y,committer:v,message:i});a&&(E=await gr.sign(E,n,a));const k=await Zs({fs:t,gitdir:r,type:"commit",object:E.toObject(),dryRun:c});return!u&&!c&&await ft.writeRef({fs:t,gitdir:r,ref:h,value:k}),k})}async function Mse({fs:t,gitdir:e,inode:n,dryRun:r}){const i=n.children;for(const l of i)l.type==="tree"&&(l.metadata.mode="040000",l.metadata.oid=await Mse({fs:t,gitdir:e,inode:l,dryRun:r}));const s=i.map(l=>({mode:l.metadata.mode,path:l.basename,oid:l.metadata.oid,type:l.type})),o=Vs.from(s);return await Zs({fs:t,gitdir:e,type:"tree",object:o.toObject(),dryRun:r})}async function lx({fs:t,cache:e,gitdir:n,oid:r,filepath:i}){if(i.startsWith("/"))throw new Ah("leading-slash");if(i.endsWith("/"))throw new Ah("trailing-slash");const s=r,o=await kg({fs:t,cache:e,gitdir:n,oid:r}),a=o.tree;if(i==="")r=o.oid;else{const l=i.split("/");r=await jse({fs:t,cache:e,gitdir:n,tree:a,pathArray:l,oid:s,filepath:i})}return r}async function jse({fs:t,cache:e,gitdir:n,tree:r,pathArray:i,oid:s,filepath:o}){const a=i.shift();for(const l of r)if(l.path===a){if(i.length===0)return l.oid;{const{type:c,object:u}=await vr({fs:t,cache:e,gitdir:n,oid:l.oid});if(c!=="tree")throw new Es(s,c,"tree",o);return r=Vs.from(u),jse({fs:t,cache:e,gitdir:n,tree:r,pathArray:i,oid:s,filepath:o})}}throw new Kn(`file or directory found at "${s}:${o}"`)}async function f0({fs:t,cache:e,gitdir:n,oid:r,filepath:i=void 0}){i!==void 0&&(r=await lx({fs:t,cache:e,gitdir:n,oid:r,filepath:i}));const{tree:s,oid:o}=await kg({fs:t,cache:e,gitdir:n,oid:r});return{oid:o,tree:s.entries()}}async function cx({fs:t,gitdir:e,tree:n}){const r=Vs.from(n).toObject();return await Zs({fs:t,gitdir:e,type:"tree",object:r,format:"content"})}async function kJe({fs:t,cache:e,onSign:n,gitdir:r,ref:i,oid:s,note:o,force:a,author:l,committer:c,signingKey:u}){let h;try{h=await ft.resolve({gitdir:r,fs:t,ref:i})}catch(y){if(!(y instanceof Kn))throw y}let f=(await f0({fs:t,cache:e,gitdir:r,oid:h||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(a)f=f.filter(y=>y.path!==s);else for(const y of f)if(y.path===s)throw new Ja("note",s);typeof o=="string"&&(o=xt.from(o,"utf8"));const m=await Zs({fs:t,gitdir:r,type:"blob",object:o,format:"content"});f.push({mode:"100644",path:s,oid:m,type:"blob"});const g=await cx({fs:t,gitdir:r,tree:f});return await f5({fs:t,cache:e,onSign:n,gitdir:r,ref:i,tree:g,parent:h&&[h],message:`Note added by 'isomorphic-git addNote'
`,author:l,committer:c,signingKey:u})}async function CJe({fs:t,onSign:e,dir:n,gitdir:r=it.join(n,".git"),ref:i="refs/notes/commits",oid:s,note:o,force:a,author:l,committer:c,signingKey:u,cache:h={}}){try{je("fs",t),je("gitdir",r),je("oid",s),je("note",o),u&&je("onSign",e);const d=new jt(t),f=await Nh({fs:d,gitdir:r,author:l});if(!f)throw new rs("author");const m=await Cg({fs:d,gitdir:r,author:f,committer:c});if(!m)throw new rs("committer");return await kJe({fs:new jt(d),cache:h,onSign:e,gitdir:r,ref:i,oid:s,note:o,force:a,author:f,committer:m,signingKey:u})}catch(d){throw d.caller="git.addNote",d}}async function Fse({fs:t,gitdir:e,remote:n,url:r,force:i}){if(n!==Hl.clean(n))throw new Va(n,Hl.clean(n));const s=await Ur.get({fs:t,gitdir:e});if(!i&&(await s.getSubsections("remote")).includes(n)&&r!==await s.get(`remote.${n}.url`))throw new Ja("remote",n);await s.set(`remote.${n}.url`,r),await s.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await Ur.save({fs:t,gitdir:e,config:s})}async function TJe({fs:t,dir:e,gitdir:n=it.join(e,".git"),remote:r,url:i,force:s=!1}){try{return je("fs",t),je("gitdir",n),je("remote",r),je("url",i),await Fse({fs:new jt(t),gitdir:n,remote:r,url:i,force:s})}catch(o){throw o.caller="git.addRemote",o}}async function AJe({fs:t,cache:e,onSign:n,gitdir:r,ref:i,tagger:s,message:o=i,gpgsig:a,object:l,signingKey:c,force:u=!1}){if(i=i.startsWith("refs/tags/")?i:`refs/tags/${i}`,!u&&await ft.exists({fs:t,gitdir:r,ref:i}))throw new Ja("tag",i);const h=await ft.resolve({fs:t,gitdir:r,ref:l||"HEAD"}),{type:d}=await vr({fs:t,cache:e,gitdir:r,oid:h});let f=vs.from({object:h,type:d,tag:i.replace("refs/tags/",""),tagger:s,message:o,gpgsig:a});c&&(f=await vs.sign(f,n,c));const m=await Zs({fs:t,gitdir:r,type:"tag",object:f.toObject()});await ft.writeRef({fs:t,gitdir:r,ref:i,value:m})}async function PJe({fs:t,onSign:e,dir:n,gitdir:r=it.join(n,".git"),ref:i,tagger:s,message:o=i,gpgsig:a,object:l,signingKey:c,force:u=!1,cache:h={}}){try{je("fs",t),je("gitdir",r),je("ref",i),c&&je("onSign",e);const d=new jt(t),f=await Nh({fs:d,gitdir:r,author:s});if(!f)throw new rs("tagger");return await AJe({fs:d,cache:h,onSign:e,gitdir:r,ref:i,tagger:f,message:o,gpgsig:a,object:l,signingKey:c,force:u})}catch(d){throw d.caller="git.annotatedTag",d}}async function NJe({fs:t,gitdir:e,ref:n,object:r,checkout:i=!1,force:s=!1}){if(n!==Hl.clean(n))throw new Va(n,Hl.clean(n));const o=`refs/heads/${n}`;if(!s&&await ft.exists({fs:t,gitdir:e,ref:o}))throw new Ja("branch",n,!1);let a;try{a=await ft.resolve({fs:t,gitdir:e,ref:r||"HEAD"})}catch{}a&&await ft.writeRef({fs:t,gitdir:e,ref:o,value:a}),i&&await ft.writeSymbolicRef({fs:t,gitdir:e,ref:"HEAD",value:o})}async function LJe({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r,object:i,checkout:s=!1,force:o=!1}){try{return je("fs",t),je("gitdir",n),je("ref",r),await NJe({fs:new jt(t),gitdir:n,ref:r,object:i,checkout:s,force:o})}catch(a){throw a.caller="git.branch",a}}const Bse=(t,e)=>t==="."||e==null||e.length===0||e==="."?!0:e.length>=t.length?e.startsWith(t):t.startsWith(e);async function uD({fs:t,cache:e,onProgress:n,onPostCheckout:r,dir:i,gitdir:s,remote:o,ref:a,filepaths:l,noCheckout:c,noUpdateHead:u,dryRun:h,force:d,track:f=!0}){let m;if(r)try{m=await ft.resolve({fs:t,gitdir:s,ref:"HEAD"})}catch{m="0000000000000000000000000000000000000000"}let g;try{g=await ft.resolve({fs:t,gitdir:s,ref:a})}catch(b){if(a==="HEAD")throw b;const y=`${o}/${a}`;if(g=await ft.resolve({fs:t,gitdir:s,ref:y}),f){const v=await Ur.get({fs:t,gitdir:s});await v.set(`branch.${a}.remote`,o),await v.set(`branch.${a}.merge`,`refs/heads/${a}`),await Ur.save({fs:t,gitdir:s,config:v})}await ft.writeRef({fs:t,gitdir:s,ref:`refs/heads/${a}`,value:g})}if(!c){let b;try{b=await RJe({fs:t,cache:e,onProgress:n,dir:i,gitdir:s,ref:a,force:d,filepaths:l})}catch(S){throw S instanceof Kn&&S.data.what===g?new Xv(a,g):S}const y=b.filter(([S])=>S==="conflict").map(([S,E])=>E);if(y.length>0)throw new Yv(y);const v=b.filter(([S])=>S==="error").map(([S,E])=>E);if(v.length>0)throw new tn(v.join(", "));if(h){r&&await r({previousHead:m,newHead:g,type:l!=null&&l.length>0?"file":"branch"});return}let x=0;const w=b.length;await Si.acquire({fs:t,gitdir:s,cache:e},async function(S){await Promise.all(b.filter(([E])=>E==="delete"||E==="delete-index").map(async function([E,k]){const _=`${i}/${k}`;E==="delete"&&await t.rm(_),S.delete({filepath:k}),n&&await n({phase:"Updating workdir",loaded:++x,total:w})}))}),await Si.acquire({fs:t,gitdir:s,cache:e},async function(S){for(const[E,k]of b)if(E==="rmdir"||E==="rmdir-index"){const _=`${i}/${k}`;try{E==="rmdir-index"&&S.delete({filepath:k}),await t.rmdir(_),n&&await n({phase:"Updating workdir",loaded:++x,total:w})}catch(L){if(L.code==="ENOTEMPTY")console.log(`Did not delete ${k} because directory is not empty`);else throw L}}}),await Promise.all(b.filter(([S])=>S==="mkdir"||S==="mkdir-index").map(async function([S,E]){const k=`${i}/${E}`;await t.mkdir(k),n&&await n({phase:"Updating workdir",loaded:++x,total:w})})),await Si.acquire({fs:t,gitdir:s,cache:e},async function(S){await Promise.all(b.filter(([E])=>E==="create"||E==="create-index"||E==="update"||E==="mkdir-index").map(async function([E,k,_,L,R]){const C=`${i}/${k}`;try{if(E!=="create-index"&&E!=="mkdir-index"){const{object:O}=await vr({fs:t,cache:e,gitdir:s,oid:_});if(R&&await t.rm(C),L===33188)await t.write(C,O);else if(L===33261)await t.write(C,O,{mode:511});else if(L===40960)await t.writelink(C,O);else throw new tn(`Invalid mode 0o${L.toString(8)} detected in blob ${_}`)}const P=await t.lstat(C);L===33261&&(P.mode=493),E==="mkdir-index"&&(P.mode=57344),S.insert({filepath:k,stats:P,oid:_}),n&&await n({phase:"Updating workdir",loaded:++x,total:w})}catch(P){console.log(P)}}))}),r&&await r({previousHead:m,newHead:g,type:l!=null&&l.length>0?"file":"branch"})}if(!u){const b=await ft.expand({fs:t,gitdir:s,ref:a});b.startsWith("refs/heads")?await ft.writeSymbolicRef({fs:t,gitdir:s,ref:"HEAD",value:b}):await ft.writeRef({fs:t,gitdir:s,ref:"HEAD",value:g})}}async function RJe({fs:t,cache:e,onProgress:n,dir:r,gitdir:i,ref:s,force:o,filepaths:a}){let l=0;return Ph({fs:t,cache:e,dir:r,gitdir:i,trees:[Xo({ref:s}),ax(),a0()],map:async function(c,[u,h,d]){if(c===".")return;if(a&&!a.some(m=>Bse(c,m)))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++l}),[!!d,!!u,!!h].map(Number).join("")){case"000":return;case"001":return o&&a&&a.includes(c)?["delete",c]:void 0;case"010":switch(await u.type()){case"tree":return["mkdir",c];case"blob":return["create",c,await u.oid(),await u.mode()];case"commit":return["mkdir-index",c,await u.oid(),await u.mode()];default:return["error",`new entry Unhandled type ${await u.type()}`]}case"011":switch(`${await u.type()}-${await h.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",c];case"blob-blob":return await u.oid()!==await h.oid()?o?["update",c,await u.oid(),await u.mode(),await u.mode()!==await h.mode()]:["conflict",c]:await u.mode()!==await h.mode()?o?["update",c,await u.oid(),await u.mode(),!0]:["conflict",c]:["create-index",c,await u.oid(),await u.mode()];case"commit-tree":return;case"commit-blob":return["conflict",c];default:return["error",`new entry Unhandled type ${u.type}`]}case"100":return["delete-index",c];case"101":switch(await d.type()){case"tree":return["rmdir",c];case"blob":return await d.oid()!==await h.oid()?o?["delete",c]:["conflict",c]:["delete",c];case"commit":return["rmdir-index",c];default:return["error",`delete entry Unhandled type ${await d.type()}`]}case"110":case"111":switch(`${await d.type()}-${await u.type()}`){case"tree-tree":return;case"blob-blob":{if(await d.oid()===await u.oid()&&await d.mode()===await u.mode()&&!o)return;if(h){if(await h.oid()!==await d.oid()&&await h.oid()!==await u.oid())return o?["update",c,await u.oid(),await u.mode(),await u.mode()!==await h.mode()]:["conflict",c]}else if(o)return["update",c,await u.oid(),await u.mode(),await u.mode()!==await d.mode()];return await u.mode()!==await d.mode()?["update",c,await u.oid(),await u.mode(),!0]:await u.oid()!==await d.oid()?["update",c,await u.oid(),await u.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",c,await u.oid()];case"blob-tree":return["update-blob-to-tree",c];case"commit-commit":return["mkdir-index",c,await u.oid(),await u.mode()];default:return["error",`update entry Unhandled type ${await d.type()}-${await u.type()}`]}}},reduce:async function(c,u){return u=Lse(u),c?c&&c[0]==="rmdir"?(u.push(c),u):(u.unshift(c),u):u}})}async function Use({fs:t,onProgress:e,onPostCheckout:n,dir:r,gitdir:i=it.join(r,".git"),remote:s="origin",ref:o,filepaths:a,noCheckout:l=!1,noUpdateHead:c=o===void 0,dryRun:u=!1,force:h=!1,track:d=!0,cache:f={}}){try{je("fs",t),je("dir",r),je("gitdir",i);const m=o||"HEAD";return await uD({fs:new jt(t),cache:f,onProgress:e,onPostCheckout:n,dir:r,gitdir:i,remote:s,ref:m,filepaths:a,noCheckout:l,noUpdateHead:c,dryRun:u,force:h,track:d})}catch(m){throw m.caller="git.checkout",m}}const IJe=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function Hd(t){const e=IJe.exec(t);return e?e[1]==="remotes/"&&t.endsWith("/HEAD")?e[2].slice(0,-5):e[2]:t}async function Uh({fs:t,gitdir:e,fullname:n=!1,test:r=!1}){const i=await ft.resolve({fs:t,gitdir:e,ref:"HEAD",depth:2});if(r)try{await ft.resolve({fs:t,gitdir:e,ref:i})}catch{return}if(i.startsWith("refs/"))return n?i:Hd(i)}function OJe(t){return t=t.replace(/^git@([^:]+):/,"https://$1/"),t=t.replace(/^ssh:\/\//,"https://"),t}function $se({username:t="",password:e=""}){return`Basic ${xt.from(`${t}:${e}`).toString("base64")}`}async function ux(t,e){const n=Ase(t);for(;;){const{value:r,done:i}=await n.next();if(r&&await e(r),i)break}n.return&&n.return()}async function TE(t){let e=0;const n=[];await ux(t,s=>{n.push(s),e+=s.byteLength});const r=new Uint8Array(e);let i=0;for(const s of n)r.set(s,i),i+=s.byteLength;return r}function aH(t){let e=t.match(/^https?:\/\/([^/]+)@/);if(e==null)return{url:t,auth:{}};e=e[1];const[n,r]=e.split(":");return t=t.replace(`${e}@`,""),{url:t,auth:{username:n,password:r}}}function DN(t,e){const n=e.toString(16);return"0".repeat(t-n.length)+n}class Or{static flush(){return xt.from("0000","utf8")}static delim(){return xt.from("0001","utf8")}static encode(e){typeof e=="string"&&(e=xt.from(e));const n=e.length+4,r=DN(4,n);return xt.concat([xt.from(r,"utf8"),e])}static streamReader(e){const n=new Pse(e);return async function(){try{let i=await n.read(4);if(i==null)return!0;if(i=parseInt(i.toString("utf8"),16),i===0||i===1)return null;const s=await n.read(i-4);return s??!0}catch(i){return e.error=i,!0}}}}async function lH(t){const e={};let n;for(;n=await t(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const r=n.indexOf("=");if(r>-1){const i=n.slice(0,r),s=n.slice(r+1);e[i]=s}else e[n]=!0}return{protocolVersion:2,capabilities2:e}}async function cH(t,{service:e}){const n=new Set,r=new Map,i=new Map,s=Or.streamReader(t);let o=await s();for(;o===null;)o=await s();if(o===!0)throw new Zv;if(o.includes("version 2"))return lH(s);if(o.toString("utf8").replace(/\n$/,"")!==`# service=${e}`)throw new Zf(`# service=${e}\\n`,o.toString("utf8"));let a=await s();for(;a===null;)a=await s();if(a===!0)return{capabilities:n,refs:r,symrefs:i};if(a=a.toString("utf8"),a.includes("version 2"))return lH(s);const[l,c]=YA(a,"\0","\\x00");if(c.split(" ").map(u=>n.add(u)),l!=="0000000000000000000000000000000000000000 capabilities^{}"){const[u,h]=YA(l," "," ");for(r.set(h,u);;){const d=await s();if(d===!0)break;if(d!==null){const[f,m]=YA(d.toString("utf8")," "," ");r.set(m,f)}}}for(const u of n)if(u.startsWith("symref=")){const h=u.match(/symref=([^:]+):(.*)/);h.length===3&&i.set(h[1],h[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:i}}function YA(t,e,n){const r=t.trim().split(e);if(r.length!==2)throw new Zf(`Two strings separated by '${n}'`,t.toString("utf8"));return r}const uH=(t,e)=>t.endsWith("?")?`${t}${e}`:`${t}/${e.replace(/^https?:\/\//,"")}`,hH=(t,e)=>{(e.username||e.password)&&(t.Authorization=$se(e)),e.headers&&Object.assign(t,e.headers)},XA=async t=>{try{const e=xt.from(await TE(t.body)),n=e.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:e}}catch{return{}}};class AE{static async capabilities(){return["discover","connect"]}static async discover({http:e,onProgress:n,onAuth:r,onAuthSuccess:i,onAuthFailure:s,corsProxy:o,service:a,url:l,headers:c,protocolVersion:u}){let{url:h,auth:d}=aH(l);const f=o?uH(o,h):h;(d.username||d.password)&&(c.Authorization=$se(d)),u===2&&(c["Git-Protocol"]="version=2");let m,g,b=!1;do if(m=await e.request({onProgress:n,method:"GET",url:`${f}/info/refs?service=${a}`,headers:c}),g=!1,m.statusCode===401||m.statusCode===203){const y=b?s:r;if(y){if(d=await y(h,{...d,headers:{...c}}),d&&d.cancel)throw new h0;d&&(hH(c,d),b=!0,g=!0)}}else m.statusCode===200&&b&&i&&await i(h,d);while(g);if(m.statusCode!==200){const{response:y}=await XA(m);throw new Sg(m.statusCode,m.statusMessage,y)}if(m.headers["content-type"]===`application/x-${a}-advertisement`){const y=await cH(m.body,{service:a});return y.auth=d,y}else{const{preview:y,response:v,data:x}=await XA(m);try{const w=await cH([x],{service:a});return w.auth=d,w}catch{throw new nx(y,v)}}}static async connect({http:e,onProgress:n,corsProxy:r,service:i,url:s,auth:o,body:a,headers:l}){const c=aH(s);c&&(s=c.url),r&&(s=uH(r,s)),l["content-type"]=`application/x-${i}-request`,l.accept=`application/x-${i}-result`,hH(l,o);const u=await e.request({onProgress:n,method:"POST",url:`${s}/${i}`,body:a,headers:l});if(u.statusCode!==200){const{response:h}=XA(u);throw new Sg(u.statusCode,u.statusMessage,h)}return u}}function DJe({url:t}){if(t.startsWith("git@"))return{transport:"ssh",address:t};const e=t.match(/(\w+)(:\/\/|::)(.*)/);if(e!==null){if(e[2]==="://")return{transport:e[1],address:e[0]};if(e[2]==="::")return{transport:e[1],address:e[3]}}}class p5{static getRemoteHelperFor({url:e}){const n=new Map;n.set("http",AE),n.set("https",AE);const r=DJe({url:e});if(!r)throw new ix(e);if(n.has(r.transport))return n.get(r.transport);throw new rx(e,r.transport,r.transport==="ssh"?OJe(e):void 0)}}let ld=null;class Ky{static async read({fs:e,gitdir:n}){ld===null&&(ld=new $y);const r=it.join(n,"shallow"),i=new Set;return await ld.acquire(r,async function(){const s=await e.read(r,{encoding:"utf8"});if(s===null||s.trim()==="")return i;s.trim().split(`
`).map(o=>i.add(o))}),i}static async write({fs:e,gitdir:n,oids:r}){ld===null&&(ld=new $y);const i=it.join(n,"shallow");if(r.size>0){const s=[...r].join(`
`)+`
`;await ld.acquire(i,async function(){await e.write(i,s,{encoding:"utf8"})})}else await ld.acquire(i,async function(){await e.rm(i)})}}async function MJe({fs:t,gitdir:e,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return t.exists(`${e}/${r}`)}async function jJe({fs:t,cache:e,gitdir:n,oid:r,getExternalRefDelta:i}){let s=await t.readdir(it.join(n,"objects/pack"));s=s.filter(o=>o.endsWith(".idx"));for(const o of s){const a=`${n}/objects/pack/${o}`,l=await cD({fs:t,cache:e,filename:a,getExternalRefDelta:i});if(l.error)throw new tn(l.error);if(l.offsets.has(r))return!0}return!1}async function dH({fs:t,cache:e,gitdir:n,oid:r,format:i="content"}){const s=a=>vr({fs:t,cache:e,gitdir:n,oid:a});let o=await MJe({fs:t,gitdir:n,oid:r});return o||(o=await jJe({fs:t,cache:e,gitdir:n,oid:r,getExternalRefDelta:s})),o}function FJe(t){const i="5041434b"+"00000002"+"00000000";return t.slice(0,12).toString("hex")===i}function Hse(t,e){const n=t.map(r=>r.split("=",1)[0]);return e.filter(r=>{const i=r.split("=",1)[0];return n.includes(i)})}const m5={name:"isomorphic-git",version:"1.29.0",agent:"git/isomorphic-git@1.29.0"};class T2{constructor(){this._queue=[]}write(e){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const n=this._waiting;this._waiting=null,n({value:e})}else this._queue.push(e)}end(){if(this._ended=!0,this._waiting){const e=this._waiting;this._waiting=null,e({done:!0})}}destroy(e){this.error=e,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(e=>{this._waiting=e})}}function BJe(t){const e=t.indexOf("\r"),n=t.indexOf(`
`);return e===-1&&n===-1?-1:e===-1?n+1:n===-1?e+1:n===e+1?n+1:Math.min(e,n)+1}function zse(t){const e=new T2;let n="";return(async()=>(await ux(t,r=>{for(r=r.toString("utf8"),n+=r;;){const i=BJe(n);if(i===-1)break;e.write(n.slice(0,i)),n=n.slice(i)}}),n.length>0&&e.write(n),e.end()))(),e}class Vse{static demux(e){const n=Or.streamReader(e),r=new T2,i=new T2,s=new T2,o=async function(){const a=await n();if(a===null)return o();if(a===!0){r.end(),s.end(),e.error?i.destroy(e.error):i.end();return}switch(a[0]){case 1:{i.write(a.slice(1));break}case 2:{s.write(a.slice(1));break}case 3:{const l=a.slice(1);s.write(l),r.end(),s.end(),i.destroy(new Error(l.toString("utf8")));return}default:r.write(a)}o()};return o(),{packetlines:r,packfile:i,progress:s}}}async function UJe(t){const{packetlines:e,packfile:n,progress:r}=Vse.demux(t),i=[],s=[],o=[];let a=!1,l=!1;return new Promise((c,u)=>{ux(e,h=>{const d=h.toString("utf8").trim();if(d.startsWith("shallow")){const f=d.slice(-41).trim();f.length!==40&&u(new Th(f)),i.push(f)}else if(d.startsWith("unshallow")){const f=d.slice(-41).trim();f.length!==40&&u(new Th(f)),s.push(f)}else if(d.startsWith("ACK")){const[,f,m]=d.split(" ");o.push({oid:f,status:m}),m||(l=!0)}else d.startsWith("NAK")?(a=!0,l=!0):(l=!0,a=!0);l&&(t.error?u(t.error):c({shallows:i,unshallows:s,acks:o,nak:a,packfile:n,progress:r}))}).finally(()=>{l||(t.error?u(t.error):c({shallows:i,unshallows:s,acks:o,nak:a,packfile:n,progress:r}))})})}function $Je({capabilities:t=[],wants:e=[],haves:n=[],shallows:r=[],depth:i=null,since:s=null,exclude:o=[]}){const a=[];e=[...new Set(e)];let l=` ${t.join(" ")}`;for(const c of e)a.push(Or.encode(`want ${c}${l}
`)),l="";for(const c of r)a.push(Or.encode(`shallow ${c}
`));i!==null&&a.push(Or.encode(`deepen ${i}
`)),s!==null&&a.push(Or.encode(`deepen-since ${Math.floor(s.valueOf()/1e3)}
`));for(const c of o)a.push(Or.encode(`deepen-not ${c}
`));a.push(Or.flush());for(const c of n)a.push(Or.encode(`have ${c}
`));return a.push(Or.encode(`done
`)),a}async function hD({fs:t,cache:e,http:n,onProgress:r,onMessage:i,onAuth:s,onAuthSuccess:o,onAuthFailure:a,gitdir:l,ref:c,remoteRef:u,remote:h,url:d,corsProxy:f,depth:m=null,since:g=null,exclude:b=[],relative:y=!1,tags:v=!1,singleBranch:x=!1,headers:w={},prune:S=!1,pruneTags:E=!1}){const k=c||await Uh({fs:t,gitdir:l,test:!0}),_=await Ur.get({fs:t,gitdir:l}),L=h||k&&await _.get(`branch.${k}.remote`)||"origin",R=d||await _.get(`remote.${L}.url`);if(typeof R>"u")throw new Hs("remote OR url");const C=u||k&&await _.get(`branch.${k}.merge`)||c||"HEAD";f===void 0&&(f=await _.get("http.corsProxy"));const P=p5.getRemoteHelperFor({url:R}),O=await P.discover({http:n,onAuth:s,onAuthSuccess:o,onAuthFailure:a,corsProxy:f,service:"git-upload-pack",url:R,headers:w,protocolVersion:1}),N=O.auth,H=O.refs;if(H.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(m!==null&&!O.capabilities.has("shallow"))throw new ih("shallow","depth");if(g!==null&&!O.capabilities.has("deepen-since"))throw new ih("deepen-since","since");if(b.length>0&&!O.capabilities.has("deepen-not"))throw new ih("deepen-not","exclude");if(y===!0&&!O.capabilities.has("deepen-relative"))throw new ih("deepen-relative","relative");const{oid:Q,fullref:X}=ft.resolveAgainstMap({ref:C,map:H});for(const Ce of H.keys())Ce===X||Ce==="HEAD"||Ce.startsWith("refs/heads/")||v&&Ce.startsWith("refs/tags/")||H.delete(Ce);const J=Hse([...O.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${m5.agent}`]);y&&J.push("deepen-relative");const j=x?[Q]:H.values(),F=x?[k]:await ft.listRefs({fs:t,gitdir:l,filepath:"refs"});let Y=[];for(let Ce of F)try{Ce=await ft.expand({fs:t,gitdir:l,ref:Ce});const ke=await ft.resolve({fs:t,gitdir:l,ref:Ce});await dH({fs:t,cache:e,gitdir:l,oid:ke})&&Y.push(ke)}catch{}Y=[...new Set(Y)];const M=await Ky.read({fs:t,gitdir:l}),D=O.capabilities.has("shallow")?[...M]:[],V=$Je({capabilities:J,wants:j,haves:Y,shallows:D,depth:m,since:g,exclude:b}),W=xt.from(await TE(V)),te=await P.connect({http:n,onProgress:r,corsProxy:f,service:"git-upload-pack",url:R,auth:N,body:[W],headers:w}),ee=await UJe(te.body);te.headers&&(ee.headers=te.headers);for(const Ce of ee.shallows)if(!M.has(Ce))try{const{object:ke}=await vr({fs:t,cache:e,gitdir:l,oid:Ce}),q=new gr(ke),pe=await Promise.all(q.headers().parent.map(oe=>dH({fs:t,cache:e,gitdir:l,oid:oe})));pe.length===0||pe.every(oe=>oe)||M.add(Ce)}catch{M.add(Ce)}for(const Ce of ee.unshallows)M.delete(Ce);if(await Ky.write({fs:t,gitdir:l,oids:M}),x){const Ce=new Map([[X,Q]]),ke=new Map;let q=10,pe=X;for(;q--;){const ae=O.symrefs.get(pe);if(ae===void 0)break;ke.set(pe,ae),pe=ae}const ne=H.get(pe);ne&&Ce.set(pe,ne);const{pruned:oe}=await ft.updateRemoteRefs({fs:t,gitdir:l,remote:L,refs:Ce,symrefs:ke,tags:v,prune:S});S&&(ee.pruned=oe)}else{const{pruned:Ce}=await ft.updateRemoteRefs({fs:t,gitdir:l,remote:L,refs:H,symrefs:O.symrefs,tags:v,prune:S,pruneTags:E});S&&(ee.pruned=Ce)}if(ee.HEAD=O.symrefs.get("HEAD"),ee.HEAD===void 0){const{oid:Ce}=ft.resolveAgainstMap({ref:"HEAD",map:H});for(const[ke,q]of H.entries())if(ke!=="HEAD"&&q===Ce){ee.HEAD=ke;break}}const K=X.startsWith("refs/tags")?"tag":"branch";if(ee.FETCH_HEAD={oid:Q,description:`${K} '${Hd(X)}' of ${R}`},r||i){const Ce=zse(ee.progress);ux(Ce,async ke=>{if(i&&await i(ke),r){const q=ke.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);q&&await r({phase:q[1].trim(),loaded:parseInt(q[2],10),total:parseInt(q[3],10)})}})}const he=xt.from(await TE(ee.packfile));if(te.body.error)throw te.body.error;const be=he.slice(-20).toString("hex"),Se={defaultBranch:ee.HEAD,fetchHead:ee.FETCH_HEAD.oid,fetchHeadDescription:ee.FETCH_HEAD.description};if(ee.headers&&(Se.headers=ee.headers),S&&(Se.pruned=ee.pruned),be!==""&&!FJe(he)){Se.packfile=`objects/pack/pack-${be}.pack`;const Ce=it.join(l,Se.packfile);await t.write(Ce,he);const ke=pe=>vr({fs:t,cache:e,gitdir:l,oid:pe}),q=await wg.fromPack({pack:he,getExternalRefDelta:ke,onProgress:r});await t.write(Ce.replace(/\.pack$/,".idx"),await q.toBuffer())}return Se}async function Wse({fs:t,bare:e=!1,dir:n,gitdir:r=e?n:it.join(n,".git"),defaultBranch:i="master"}){if(await t.exists(r+"/config"))return;let s=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];s=s.map(o=>r+"/"+o);for(const o of s)await t.mkdir(o);await t.write(r+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${e}
`+(e?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await t.write(r+"/HEAD",`ref: refs/heads/${i}
`)}async function HJe({fs:t,cache:e,http:n,onProgress:r,onMessage:i,onAuth:s,onAuthSuccess:o,onAuthFailure:a,onPostCheckout:l,dir:c,gitdir:u,url:h,corsProxy:d,ref:f,remote:m,depth:g,since:b,exclude:y,relative:v,singleBranch:x,noCheckout:w,noTags:S,headers:E}){try{if(await Wse({fs:t,gitdir:u}),await Fse({fs:t,gitdir:u,remote:m,url:h,force:!1}),d){const L=await Ur.get({fs:t,gitdir:u});await L.set("http.corsProxy",d),await Ur.save({fs:t,gitdir:u,config:L})}const{defaultBranch:k,fetchHead:_}=await hD({fs:t,cache:e,http:n,onProgress:r,onMessage:i,onAuth:s,onAuthSuccess:o,onAuthFailure:a,gitdir:u,ref:f,remote:m,corsProxy:d,depth:g,since:b,exclude:y,relative:v,singleBranch:x,headers:E,tags:!S});if(_===null)return;f=f||k,f=f.replace("refs/heads/",""),await uD({fs:t,cache:e,onProgress:r,onPostCheckout:l,dir:c,gitdir:u,ref:f,remote:m,noCheckout:w})}catch(k){throw await t.rmdir(u,{recursive:!0,maxRetries:10}).catch(()=>{}),k}}async function zJe({fs:t,http:e,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:o,onPostCheckout:a,dir:l,gitdir:c=it.join(l,".git"),url:u,corsProxy:h=void 0,ref:d=void 0,remote:f="origin",depth:m=void 0,since:g=void 0,exclude:b=[],relative:y=!1,singleBranch:v=!1,noCheckout:x=!1,noTags:w=!1,headers:S={},cache:E={}}){try{return je("fs",t),je("http",e),je("gitdir",c),x||je("dir",l),je("url",u),await HJe({fs:new jt(t),cache:E,http:e,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:o,onPostCheckout:a,dir:l,gitdir:c,url:u,corsProxy:h,ref:d,remote:f,depth:m,since:g,exclude:b,relative:y,singleBranch:v,noCheckout:x,noTags:w,headers:S})}catch(k){throw k.caller="git.clone",k}}async function VJe({fs:t,onSign:e,dir:n,gitdir:r=it.join(n,".git"),message:i,author:s,committer:o,signingKey:a,amend:l=!1,dryRun:c=!1,noUpdateBranch:u=!1,ref:h,parent:d,tree:f,cache:m={}}){try{je("fs",t),l||je("message",i),a&&je("onSign",e);const g=new jt(t);return await f5({fs:g,cache:m,onSign:e,gitdir:r,message:i,author:s,committer:o,signingKey:a,amend:l,dryRun:c,noUpdateBranch:u,ref:h,parent:d,tree:f})}catch(g){throw g.caller="git.commit",g}}async function WJe({fs:t,dir:e,gitdir:n=it.join(e,".git"),fullname:r=!1,test:i=!1}){try{return je("fs",t),je("gitdir",n),await Uh({fs:new jt(t),gitdir:n,fullname:r,test:i})}catch(s){throw s.caller="git.currentBranch",s}}async function GJe({fs:t,gitdir:e,ref:n}){if(n=n.startsWith("refs/heads/")?n:`refs/heads/${n}`,!await ft.exists({fs:t,gitdir:e,ref:n}))throw new Kn(n);const i=await ft.expand({fs:t,gitdir:e,ref:n}),s=await Uh({fs:t,gitdir:e,fullname:!0});if(i===s){const l=await ft.resolve({fs:t,gitdir:e,ref:i});await ft.writeRef({fs:t,gitdir:e,ref:"HEAD",value:l})}await ft.deleteRef({fs:t,gitdir:e,ref:i});const o=Hd(n),a=await Ur.get({fs:t,gitdir:e});await a.deleteSection("branch",o),await Ur.save({fs:t,gitdir:e,config:a})}async function qJe({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r}){try{return je("fs",t),je("ref",r),await GJe({fs:new jt(t),gitdir:n,ref:r})}catch(i){throw i.caller="git.deleteBranch",i}}async function KJe({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r}){try{je("fs",t),je("ref",r),await ft.deleteRef({fs:new jt(t),gitdir:n,ref:r})}catch(i){throw i.caller="git.deleteRef",i}}async function YJe({fs:t,gitdir:e,remote:n}){const r=await Ur.get({fs:t,gitdir:e});await r.deleteSection("remote",n),await Ur.save({fs:t,gitdir:e,config:r})}async function XJe({fs:t,dir:e,gitdir:n=it.join(e,".git"),remote:r}){try{return je("fs",t),je("remote",r),await YJe({fs:new jt(t),gitdir:n,remote:r})}catch(i){throw i.caller="git.deleteRemote",i}}async function ZJe({fs:t,gitdir:e,ref:n}){n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`,await ft.deleteRef({fs:t,gitdir:e,ref:n})}async function JJe({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r}){try{return je("fs",t),je("ref",r),await ZJe({fs:new jt(t),gitdir:n,ref:r})}catch(i){throw i.caller="git.deleteTag",i}}async function QJe({fs:t,gitdir:e,oid:n}){const r=n.slice(0,2);return(await t.readdir(`${e}/objects/${r}`)).map(s=>`${r}${s}`).filter(s=>s.startsWith(n))}async function eQe({fs:t,cache:e,gitdir:n,oid:r,getExternalRefDelta:i}){const s=[];let o=await t.readdir(it.join(n,"objects/pack"));o=o.filter(a=>a.endsWith(".idx"));for(const a of o){const l=`${n}/objects/pack/${a}`,c=await cD({fs:t,cache:e,filename:l,getExternalRefDelta:i});if(c.error)throw new tn(c.error);for(const u of c.offsets.keys())u.startsWith(r)&&s.push(u)}return s}async function tQe({fs:t,cache:e,gitdir:n,oid:r}){const i=a=>vr({fs:t,cache:e,gitdir:n,oid:a}),s=await QJe({fs:t,gitdir:n,oid:r}),o=await eQe({fs:t,cache:e,gitdir:n,oid:r,getExternalRefDelta:i});for(const a of o)s.indexOf(a)===-1&&s.push(a);if(s.length===1)return s[0];throw s.length>1?new Kv("oids",r,s):new Kn(`an object matching "${r}"`)}async function nQe({fs:t,dir:e,gitdir:n=it.join(e,".git"),oid:r,cache:i={}}){try{return je("fs",t),je("gitdir",n),je("oid",r),await tQe({fs:new jt(t),cache:i,gitdir:n,oid:r})}catch(s){throw s.caller="git.expandOid",s}}async function rQe({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r}){try{return je("fs",t),je("gitdir",n),je("ref",r),await ft.expand({fs:new jt(t),gitdir:n,ref:r})}catch(i){throw i.caller="git.expandRef",i}}async function dD({fs:t,cache:e,gitdir:n,oids:r}){const i={},s=r.length;let o=r.map((a,l)=>({index:l,oid:a}));for(;o.length;){const a=new Set;for(const{oid:c,index:u}of o)i[c]||(i[c]=new Set),i[c].add(u),i[c].size===s&&a.add(c);if(a.size>0)return[...a];const l=new Map;for(const{oid:c,index:u}of o)try{const{object:h}=await vr({fs:t,cache:e,gitdir:n,oid:c}),d=gr.from(h),{parent:f}=d.parseHeaders();for(const m of f)(!i[m]||!i[m].has(u))&&l.set(m+":"+u,{oid:m,index:u})}catch{}o=Array.from(l.values())}return[]}const ZA=/^.*(\r?\n|$)/gm;function iQe({branches:t,contents:e}){const n=t[1],r=t[2],i=e[0],s=e[1],o=e[2],a=s.match(ZA),l=i.match(ZA),c=o.match(ZA),u=SZe(a,l,c),h=7;let d="",f=!0;for(const m of u)m.ok&&(d+=m.ok.join("")),m.conflict&&(f=!1,d+=`${"<".repeat(h)} ${n}
`,d+=m.conflict.a.join(""),d+=`${"=".repeat(h)}
`,d+=m.conflict.b.join(""),d+=`${">".repeat(h)} ${r}
`);return{cleanMerge:f,mergedText:d}}async function sQe({fs:t,cache:e,dir:n,gitdir:r=it.join(n,".git"),index:i,ourOid:s,baseOid:o,theirOid:a,ourName:l="ours",baseName:c="base",theirName:u="theirs",dryRun:h=!1,abortOnConflict:d=!0,mergeDriver:f}){const m=Xo({ref:s}),g=Xo({ref:o}),b=Xo({ref:a}),y=[],v=[],x=[],w=[],S=await Ph({fs:t,cache:e,dir:n,gitdir:r,trees:[m,g,b],map:async function(E,[k,_,L]){const R=wE(E),C=await CE(k,_),P=await CE(L,_);switch(`${C}-${P}`){case"false-false":return{mode:await _.mode(),path:R,oid:await _.oid(),type:await _.type()};case"false-true":return L?{mode:await L.mode(),path:R,oid:await L.oid(),type:await L.type()}:void 0;case"true-false":return k?{mode:await k.mode(),path:R,oid:await k.oid(),type:await k.type()}:void 0;case"true-true":{if(k&&_&&L&&await k.type()==="blob"&&await _.type()==="blob"&&await L.type()==="blob")return oQe({fs:t,gitdir:r,path:R,ours:k,base:_,theirs:L,ourName:l,baseName:c,theirName:u,mergeDriver:f}).then(async O=>{if(O.cleanMerge)d||i.insert({filepath:E,oid:O.mergeResult.oid,stage:0});else if(y.push(E),v.push(E),!d){const N=await _.oid(),H=await k.oid(),Q=await L.oid();i.delete({filepath:E}),i.insert({filepath:E,oid:N,stage:1}),i.insert({filepath:E,oid:H,stage:2}),i.insert({filepath:E,oid:Q,stage:3})}return O.mergeResult});if(_&&!k&&L&&await _.type()==="blob"&&await L.type()==="blob"){if(y.push(E),x.push(E),!d){const O=await _.oid(),N=await L.oid();i.delete({filepath:E}),i.insert({filepath:E,oid:O,stage:1}),i.insert({filepath:E,oid:N,stage:3})}return{mode:await L.mode(),oid:await L.oid(),type:"blob",path:R}}if(_&&k&&!L&&await _.type()==="blob"&&await k.type()==="blob"){if(y.push(E),w.push(E),!d){const O=await _.oid(),N=await k.oid();i.delete({filepath:E}),i.insert({filepath:E,oid:O,stage:1}),i.insert({filepath:E,oid:N,stage:2})}return{mode:await k.mode(),oid:await k.oid(),type:"blob",path:R}}if(_&&!k&&!L&&await _.type()==="blob")return;throw new c0}}},reduce:y.length!==0&&(!n||d)?void 0:async(E,k)=>{const _=k.filter(Boolean);if(E&&!(E&&E.type==="tree"&&_.length===0)){if(_.length>0){const R=new Vs(_).toObject(),C=await Zs({fs:t,gitdir:r,type:"tree",object:R,dryRun:h});E.oid=C}return E}}});return y.length!==0?(n&&!d&&await Ph({fs:t,cache:e,dir:n,gitdir:r,trees:[Xo({ref:S.oid})],map:async function(E,[k]){const _=`${n}/${E}`;if(await k.type()==="blob"){const L=await k.mode(),R=new TextDecoder().decode(await k.content());await t.write(_,R,{mode:L})}return!0}}),new u0(y,v,x,w)):S.oid}async function oQe({fs:t,gitdir:e,path:n,ours:r,base:i,theirs:s,ourName:o,theirName:a,baseName:l,dryRun:c,mergeDriver:u=iQe}){const h="blob",d=await i.mode()===await r.mode()?await s.mode():await r.mode();if(await r.oid()===await s.oid())return{cleanMerge:!0,mergeResult:{mode:d,path:n,oid:await r.oid(),type:h}};if(await r.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:d,path:n,oid:await s.oid(),type:h}};if(await s.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:d,path:n,oid:await r.oid(),type:h}};const f=xt.from(await r.content()).toString("utf8"),m=xt.from(await i.content()).toString("utf8"),g=xt.from(await s.content()).toString("utf8"),{mergedText:b,cleanMerge:y}=await u({branches:[l,o,a],contents:[m,f,g],path:n}),v=await Zs({fs:t,gitdir:e,type:"blob",object:xt.from(b,"utf8"),dryRun:c});return{cleanMerge:y,mergeResult:{mode:d,path:n,oid:v,type:h}}}async function Gse({fs:t,cache:e,dir:n,gitdir:r,ours:i,theirs:s,fastForward:o=!0,fastForwardOnly:a=!1,dryRun:l=!1,noUpdateBranch:c=!1,abortOnConflict:u=!0,message:h,author:d,committer:f,signingKey:m,onSign:g,mergeDriver:b}){i===void 0&&(i=await Uh({fs:t,gitdir:r,fullname:!0})),i=await ft.expand({fs:t,gitdir:r,ref:i}),s=await ft.expand({fs:t,gitdir:r,ref:s});const y=await ft.resolve({fs:t,gitdir:r,ref:i}),v=await ft.resolve({fs:t,gitdir:r,ref:s}),x=await dD({fs:t,cache:e,gitdir:r,oids:[y,v]});if(x.length!==1)throw new c0;const w=x[0];if(w===v)return{oid:y,alreadyMerged:!0};if(o&&w===y)return!l&&!c&&await ft.writeRef({fs:t,gitdir:r,ref:i,value:v}),{oid:v,fastForward:!0};{if(a)throw new Jv;const S=await Si.acquire({fs:t,gitdir:r,cache:e,allowUnmerged:!1},async k=>sQe({fs:t,cache:e,dir:n,gitdir:r,index:k,ourOid:y,theirOid:v,baseOid:w,ourName:Hd(i),baseName:"base",theirName:Hd(s),dryRun:l,abortOnConflict:u,mergeDriver:b}));if(S instanceof u0)throw S;return h||(h=`Merge branch '${Hd(s)}' into ${Hd(i)}`),{oid:await f5({fs:t,cache:e,gitdir:r,message:h,ref:i,tree:S,parent:[y,v],author:d,committer:f,signingKey:m,onSign:g,dryRun:l,noUpdateBranch:c}),tree:S,mergeCommit:!0}}}async function qse({fs:t,cache:e,http:n,onProgress:r,onMessage:i,onAuth:s,onAuthSuccess:o,onAuthFailure:a,dir:l,gitdir:c,ref:u,url:h,remote:d,remoteRef:f,prune:m,pruneTags:g,fastForward:b,fastForwardOnly:y,corsProxy:v,singleBranch:x,headers:w,author:S,committer:E,signingKey:k}){try{if(!u){const R=await Uh({fs:t,gitdir:c});if(!R)throw new Hs("ref");u=R}const{fetchHead:_,fetchHeadDescription:L}=await hD({fs:t,cache:e,http:n,onProgress:r,onMessage:i,onAuth:s,onAuthSuccess:o,onAuthFailure:a,gitdir:c,corsProxy:v,ref:u,url:h,remote:d,remoteRef:f,singleBranch:x,headers:w,prune:m,pruneTags:g});await Gse({fs:t,cache:e,gitdir:c,ours:u,theirs:_,fastForward:b,fastForwardOnly:y,message:`Merge ${L}`,author:S,committer:E,signingKey:k,dryRun:!1,noUpdateBranch:!1}),await uD({fs:t,cache:e,onProgress:r,dir:l,gitdir:c,ref:u,remote:d,noCheckout:!1})}catch(_){throw _.caller="git.pull",_}}async function aQe({fs:t,http:e,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:o,dir:a,gitdir:l=it.join(a,".git"),ref:c,url:u,remote:h,remoteRef:d,corsProxy:f,singleBranch:m,headers:g={},cache:b={}}){try{je("fs",t),je("http",e),je("gitdir",l);const y={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await qse({fs:new jt(t),cache:b,http:e,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:o,dir:a,gitdir:l,ref:c,url:u,remote:h,remoteRef:d,fastForwardOnly:!0,corsProxy:f,singleBranch:m,headers:g,author:y,committer:y})}catch(y){throw y.caller="git.fastForward",y}}async function lQe({fs:t,http:e,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:o,dir:a,gitdir:l=it.join(a,".git"),ref:c,remote:u,remoteRef:h,url:d,corsProxy:f,depth:m=null,since:g=null,exclude:b=[],relative:y=!1,tags:v=!1,singleBranch:x=!1,headers:w={},prune:S=!1,pruneTags:E=!1,cache:k={}}){try{return je("fs",t),je("http",e),je("gitdir",l),await hD({fs:new jt(t),cache:k,http:e,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:o,gitdir:l,ref:c,remote:u,remoteRef:h,url:d,corsProxy:f,depth:m,since:g,exclude:b,relative:y,tags:v,singleBranch:x,headers:w,prune:S,pruneTags:E})}catch(_){throw _.caller="git.fetch",_}}async function cQe({fs:t,dir:e,gitdir:n=it.join(e,".git"),oids:r,cache:i={}}){try{return je("fs",t),je("gitdir",n),je("oids",r),await dD({fs:new jt(t),cache:i,gitdir:n,oids:r})}catch(s){throw s.caller="git.findMergeBase",s}}async function Kse({fs:t,filepath:e}){if(await t.exists(it.join(e,".git")))return e;{const n=_g(e);if(n===e)throw new Kn(`git root for ${e}`);return Kse({fs:t,filepath:n})}}async function uQe({fs:t,filepath:e}){try{return je("fs",t),je("filepath",e),await Kse({fs:new jt(t),filepath:e})}catch(n){throw n.caller="git.findRoot",n}}async function hQe({fs:t,dir:e,gitdir:n=it.join(e,".git"),path:r}){try{return je("fs",t),je("gitdir",n),je("path",r),await qy({fs:new jt(t),gitdir:n,path:r})}catch(i){throw i.caller="git.getConfig",i}}async function dQe({fs:t,gitdir:e,path:n}){return(await Ur.get({fs:t,gitdir:e})).getall(n)}async function fQe({fs:t,dir:e,gitdir:n=it.join(e,".git"),path:r}){try{return je("fs",t),je("gitdir",n),je("path",r),await dQe({fs:new jt(t),gitdir:n,path:r})}catch(i){throw i.caller="git.getConfigAll",i}}async function pQe({http:t,onAuth:e,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,url:s,headers:o={},forPush:a=!1}){try{je("http",t),je("url",s);const c=await p5.getRemoteHelperFor({url:s}).discover({http:t,onAuth:e,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,service:a?"git-receive-pack":"git-upload-pack",url:s,headers:o,protocolVersion:1}),u={capabilities:[...c.capabilities]};for(const[h,d]of c.refs){const f=h.split("/"),m=f.pop();let g=u;for(const b of f)g[b]=g[b]||{},g=g[b];g[m]=d}for(const[h,d]of c.symrefs){const f=h.split("/"),m=f.pop();let g=u;for(const b of f)g[b]=g[b]||{},g=g[b];g[m]=d}return u}catch(l){throw l.caller="git.getRemoteInfo",l}}function Yse(t,e,n,r){const i=[];for(const[s,o]of t.refs){if(e&&!s.startsWith(e))continue;if(s.endsWith("^{}")){if(r){const l=s.replace("^{}",""),c=i[i.length-1],u=c.ref===l?c:i.find(h=>h.ref===l);if(u===void 0)throw new Error("I did not expect this to happen");u.peeled=o}continue}const a={ref:s,oid:o};n&&t.symrefs.has(s)&&(a.target=t.symrefs.get(s)),i.push(a)}return i}async function mQe({http:t,onAuth:e,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,url:s,headers:o={},forPush:a=!1,protocolVersion:l=2}){try{je("http",t),je("url",s);const u=await p5.getRemoteHelperFor({url:s}).discover({http:t,onAuth:e,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,service:a?"git-receive-pack":"git-upload-pack",url:s,headers:o,protocolVersion:l});if(u.protocolVersion===2)return{protocolVersion:u.protocolVersion,capabilities:u.capabilities2};const h={};for(const d of u.capabilities){const[f,m]=d.split("=");m?h[f]=m:h[f]=!0}return{protocolVersion:1,capabilities:h,refs:Yse(u,void 0,!0,!0)}}catch(c){throw c.caller="git.getRemoteInfo2",c}}async function gQe({type:t,object:e,format:n="content",oid:r=void 0}){return n!=="deflated"&&(n!=="wrapped"&&(e=l0.wrap({type:t,object:e})),r=await ou(e)),{oid:r,object:e}}async function bQe({object:t}){try{je("object",t),typeof t=="string"?t=xt.from(t,"utf8"):t=xt.from(t);const e="blob",{oid:n,object:r}=await gQe({type:"blob",format:"content",object:t});return{oid:n,type:e,object:new Uint8Array(r),format:"wrapped"}}catch(e){throw e.caller="git.hashBlob",e}}async function yQe({fs:t,cache:e,onProgress:n,dir:r,gitdir:i,filepath:s}){try{s=it.join(r,s);const o=await t.read(s),a=c=>vr({fs:t,cache:e,gitdir:i,oid:c}),l=await wg.fromPack({pack:o,getExternalRefDelta:a,onProgress:n});return await t.write(s.replace(/\.pack$/,".idx"),await l.toBuffer()),{oids:[...l.hashes]}}catch(o){throw o.caller="git.indexPack",o}}async function vQe({fs:t,onProgress:e,dir:n,gitdir:r=it.join(n,".git"),filepath:i,cache:s={}}){try{return je("fs",t),je("dir",n),je("gitdir",n),je("filepath",i),await yQe({fs:new jt(t),cache:s,onProgress:e,dir:n,gitdir:r,filepath:i})}catch(o){throw o.caller="git.indexPack",o}}async function xQe({fs:t,bare:e=!1,dir:n,gitdir:r=e?n:it.join(n,".git"),defaultBranch:i="master"}){try{return je("fs",t),je("gitdir",r),e||je("dir",n),await Wse({fs:new jt(t),bare:e,dir:n,gitdir:r,defaultBranch:i})}catch(s){throw s.caller="git.init",s}}async function Xse({fs:t,cache:e,gitdir:n,oid:r,ancestor:i,depth:s}){const o=await Ky.read({fs:t,gitdir:n});if(!r)throw new Hs("oid");if(!i)throw new Hs("ancestor");if(r===i)return!1;const a=[r],l=new Set;let c=0;for(;a.length;){if(c++===s)throw new ex(s);const u=a.shift(),{type:h,object:d}=await vr({fs:t,cache:e,gitdir:n,oid:u});if(h!=="commit")throw new Es(u,h,"commit");const f=gr.from(d).parse();for(const m of f.parent)if(m===i)return!0;if(!o.has(u))for(const m of f.parent)l.has(m)||(a.push(m),l.add(m))}return!1}async function _Qe({fs:t,dir:e,gitdir:n=it.join(e,".git"),oid:r,ancestor:i,depth:s=-1,cache:o={}}){try{return je("fs",t),je("gitdir",n),je("oid",r),je("ancestor",i),await Xse({fs:new jt(t),cache:o,gitdir:n,oid:r,ancestor:i,depth:s})}catch(a){throw a.caller="git.isDescendent",a}}async function wQe({fs:t,dir:e,gitdir:n=it.join(e,".git"),filepath:r}){try{return je("fs",t),je("dir",e),je("gitdir",n),je("filepath",r),d0.isIgnored({fs:new jt(t),dir:e,gitdir:n,filepath:r})}catch(i){throw i.caller="git.isIgnored",i}}async function SQe({fs:t,dir:e,gitdir:n=it.join(e,".git"),remote:r}){try{return je("fs",t),je("gitdir",n),ft.listBranches({fs:new jt(t),gitdir:n,remote:r})}catch(i){throw i.caller="git.listBranches",i}}async function EQe({fs:t,gitdir:e,ref:n,cache:r}){if(n){const i=await ft.resolve({gitdir:e,fs:t,ref:n}),s=[];return await Zse({fs:t,cache:r,gitdir:e,oid:i,filenames:s,prefix:""}),s}else return Si.acquire({fs:t,gitdir:e,cache:r},async function(i){return i.entries.map(s=>s.path)})}async function Zse({fs:t,cache:e,gitdir:n,oid:r,filenames:i,prefix:s}){const{tree:o}=await f0({fs:t,cache:e,gitdir:n,oid:r});for(const a of o)a.type==="tree"?await Zse({fs:t,cache:e,gitdir:n,oid:a.oid,filenames:i,prefix:it.join(s,a.path)}):i.push(it.join(s,a.path))}async function kQe({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r,cache:i={}}){try{return je("fs",t),je("gitdir",n),await EQe({fs:new jt(t),cache:i,gitdir:n,ref:r})}catch(s){throw s.caller="git.listFiles",s}}async function CQe({fs:t,cache:e,gitdir:n,ref:r}){let i;try{i=await ft.resolve({gitdir:n,fs:t,ref:r})}catch(a){if(a instanceof Kn)return[]}return(await f0({fs:t,cache:e,gitdir:n,oid:i})).tree.map(a=>({target:a.path,note:a.oid}))}async function TQe({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r="refs/notes/commits",cache:i={}}){try{return je("fs",t),je("gitdir",n),je("ref",r),await CQe({fs:new jt(t),cache:i,gitdir:n,ref:r})}catch(s){throw s.caller="git.listNotes",s}}async function AQe({fs:t,dir:e,gitdir:n=it.join(e,".git"),filepath:r}){try{return je("fs",t),je("gitdir",n),ft.listRefs({fs:new jt(t),gitdir:n,filepath:r})}catch(i){throw i.caller="git.listRefs",i}}async function PQe({fs:t,gitdir:e}){const n=await Ur.get({fs:t,gitdir:e}),r=await n.getSubsections("remote");return Promise.all(r.map(async s=>{const o=await n.get(`remote.${s}.url`);return{remote:s,url:o}}))}async function NQe({fs:t,dir:e,gitdir:n=it.join(e,".git")}){try{return je("fs",t),je("gitdir",n),await PQe({fs:new jt(t),gitdir:n})}catch(r){throw r.caller="git.listRemotes",r}}async function LQe(t){const e=Or.streamReader(t),n=[];let r;for(;r=await e(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const[i,s,...o]=r.split(" "),a={ref:s,oid:i};for(const l of o){const[c,u]=l.split(":");c==="symref-target"?a.target=u:c==="peeled"&&(a.peeled=u)}n.push(a)}return n}async function RQe({prefix:t,symrefs:e,peelTags:n}){const r=[];return r.push(Or.encode(`command=ls-refs
`)),r.push(Or.encode(`agent=${m5.agent}
`)),(n||e||t)&&r.push(Or.delim()),n&&r.push(Or.encode("peel")),e&&r.push(Or.encode("symrefs")),t&&r.push(Or.encode(`ref-prefix ${t}`)),r.push(Or.flush()),r}async function IQe({http:t,onAuth:e,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,url:s,headers:o={},forPush:a=!1,protocolVersion:l=2,prefix:c,symrefs:u,peelTags:h}){try{je("http",t),je("url",s);const d=await AE.discover({http:t,onAuth:e,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,service:a?"git-receive-pack":"git-upload-pack",url:s,headers:o,protocolVersion:l});if(d.protocolVersion===1)return Yse(d,c,u,h);const f=await RQe({prefix:c,symrefs:u,peelTags:h}),m=await AE.connect({http:t,auth:d.auth,headers:o,corsProxy:i,service:a?"git-receive-pack":"git-upload-pack",url:s,body:f});return LQe(m.body)}catch(d){throw d.caller="git.listServerRefs",d}}async function OQe({fs:t,dir:e,gitdir:n=it.join(e,".git")}){try{return je("fs",t),je("gitdir",n),ft.listTags({fs:new jt(t),gitdir:n})}catch(r){throw r.caller="git.listTags",r}}function DQe(t,e){return t.committer.timestamp-e.committer.timestamp}const MQe="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function fH({fs:t,cache:e,gitdir:n,oid:r,fileId:i}){if(i===MQe)return;const s=r;let o;const a=await kg({fs:t,cache:e,gitdir:n,oid:r}),l=a.tree;return i===a.oid?o=a.path:(o=await Jse({fs:t,cache:e,gitdir:n,tree:l,fileId:i,oid:s}),Array.isArray(o)&&(o.length===0?o=void 0:o.length===1&&(o=o[0]))),o}async function Jse({fs:t,cache:e,gitdir:n,tree:r,fileId:i,oid:s,filepaths:o=[],parentPath:a=""}){const l=r.entries().map(function(c){let u;return c.oid===i?(u=it.join(a,c.path),o.push(u)):c.type==="tree"&&(u=vr({fs:t,cache:e,gitdir:n,oid:c.oid}).then(function({object:h}){return Jse({fs:t,cache:e,gitdir:n,tree:Vs.from(h),fileId:i,oid:s,filepaths:o,parentPath:it.join(a,c.path)})})),u});return await Promise.all(l),o}async function jQe({fs:t,cache:e,gitdir:n,filepath:r,ref:i,depth:s,since:o,force:a,follow:l}){const c=typeof o>"u"?void 0:Math.floor(o.valueOf()/1e3),u=[],h=await Ky.read({fs:t,gitdir:n}),d=await ft.resolve({fs:t,gitdir:n,ref:i}),f=[await Tg({fs:t,cache:e,gitdir:n,oid:d})];let m,g,b;function y(v){b&&r&&u.push(v)}for(;f.length>0;){const v=f.pop();if(c!==void 0&&v.commit.committer.timestamp<=c)break;if(r){let x;try{x=await lx({fs:t,cache:e,gitdir:n,oid:v.commit.tree,filepath:r}),g&&m!==x&&u.push(g),m=x,g=v,b=!0}catch(w){if(w instanceof Kn){let S=l&&m;if(S&&(S=await fH({fs:t,cache:e,gitdir:n,oid:v.commit.tree,fileId:m}),S))if(Array.isArray(S)){if(g){const E=await fH({fs:t,cache:e,gitdir:n,oid:g.commit.tree,fileId:m});if(Array.isArray(E))if(S=S.filter(k=>E.indexOf(k)===-1),S.length===1)S=S[0],r=S,g&&u.push(g);else{S=!1,g&&u.push(g);break}}}else r=S,g&&u.push(g);if(!S){if(b&&m&&(u.push(g),!a))break;if(!a&&!l)throw w}g=v,b=!1}else throw w}}else u.push(v);if(s!==void 0&&u.length===s){y(v);break}if(!h.has(v.oid))for(const x of v.commit.parent){const w=await Tg({fs:t,cache:e,gitdir:n,oid:x});f.map(S=>S.oid).includes(w.oid)||f.push(w)}f.length===0&&y(v),f.sort((x,w)=>DQe(x.commit,w.commit))}return u}async function FQe({fs:t,dir:e,gitdir:n=it.join(e,".git"),filepath:r,ref:i="HEAD",depth:s,since:o,force:a,follow:l,cache:c={}}){try{return je("fs",t),je("gitdir",n),je("ref",i),await jQe({fs:new jt(t),cache:c,gitdir:n,filepath:r,ref:i,depth:s,since:o,force:a,follow:l})}catch(u){throw u.caller="git.log",u}}async function BQe({fs:t,onSign:e,dir:n,gitdir:r=it.join(n,".git"),ours:i,theirs:s,fastForward:o=!0,fastForwardOnly:a=!1,dryRun:l=!1,noUpdateBranch:c=!1,abortOnConflict:u=!0,message:h,author:d,committer:f,signingKey:m,cache:g={},mergeDriver:b}){try{je("fs",t),m&&je("onSign",e);const y=new jt(t),v=await Nh({fs:y,gitdir:r,author:d});if(!v&&(!a||!o))throw new rs("author");const x=await Cg({fs:y,gitdir:r,author:v,committer:f});if(!x&&(!a||!o))throw new rs("committer");return await Gse({fs:y,cache:g,dir:n,gitdir:r,ours:i,theirs:s,fastForward:o,fastForwardOnly:a,dryRun:l,noUpdateBranch:c,abortOnConflict:u,message:h,author:v,committer:x,signingKey:m,onSign:e,mergeDriver:b})}catch(y){throw y.caller="git.merge",y}}const UQe={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function Qse({fs:t,cache:e,dir:n,gitdir:r=it.join(n,".git"),oids:i}){const s=new Nie,o=[];function a(u,h){const d=xt.from(u,h);o.push(d),s.update(d)}async function l({stype:u,object:h}){const d=UQe[u];let f=h.length,m=f>15?128:0;const g=f&15;f=f>>>4;let b=(m|d|g).toString(16);for(a(b,"hex");m;)m=f>127?128:0,b=m|f&127,a(DN(2,b),"hex"),f=f>>>7;a(xt.from(await Rse(h)))}a("PACK"),a("00000002","hex"),a(DN(8,i.length),"hex");for(const u of i){const{type:h,object:d}=await vr({fs:t,cache:e,gitdir:r,oid:u});await l({object:d,stype:h})}const c=s.digest();return o.push(c),o}async function $Qe({fs:t,cache:e,gitdir:n,oids:r,write:i}){const s=await Qse({fs:t,cache:e,gitdir:n,oids:r}),o=xt.from(await TE(s)),l=`pack-${o.slice(-20).toString("hex")}.pack`;return i?(await t.write(it.join(n,`objects/pack/${l}`),o),{filename:l}):{filename:l,packfile:new Uint8Array(o)}}async function HQe({fs:t,dir:e,gitdir:n=it.join(e,".git"),oids:r,write:i=!1,cache:s={}}){try{return je("fs",t),je("gitdir",n),je("oids",r),await $Qe({fs:new jt(t),cache:s,gitdir:n,oids:r,write:i})}catch(o){throw o.caller="git.packObjects",o}}async function zQe({fs:t,http:e,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:o,dir:a,gitdir:l=it.join(a,".git"),ref:c,url:u,remote:h,remoteRef:d,prune:f=!1,pruneTags:m=!1,fastForward:g=!0,fastForwardOnly:b=!1,corsProxy:y,singleBranch:v,headers:x={},author:w,committer:S,signingKey:E,cache:k={}}){try{je("fs",t),je("gitdir",l);const _=new jt(t),L=await Nh({fs:_,gitdir:l,author:w});if(!L)throw new rs("author");const R=await Cg({fs:_,gitdir:l,author:L,committer:S});if(!R)throw new rs("committer");return await qse({fs:_,cache:k,http:e,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:o,dir:a,gitdir:l,ref:c,url:u,remote:h,remoteRef:d,fastForward:g,fastForwardOnly:b,corsProxy:y,singleBranch:v,headers:x,author:L,committer:R,signingKey:E,prune:f,pruneTags:m})}catch(_){throw _.caller="git.pull",_}}async function VQe({fs:t,cache:e,dir:n,gitdir:r=it.join(n,".git"),start:i,finish:s}){const o=await Ky.read({fs:t,gitdir:r}),a=new Set,l=new Set;for(const h of i)a.add(await ft.resolve({fs:t,gitdir:r,ref:h}));for(const h of s)try{const d=await ft.resolve({fs:t,gitdir:r,ref:h});l.add(d)}catch{}const c=new Set;async function u(h){c.add(h);const{type:d,object:f}=await vr({fs:t,cache:e,gitdir:r,oid:h});if(d==="tag"){const g=vs.from(f).headers().object;return u(g)}if(d!=="commit")throw new Es(h,d,"commit");if(!o.has(h)){const g=gr.from(f).headers().parent;for(h of g)!l.has(h)&&!c.has(h)&&await u(h)}}for(const h of a)await u(h);return c}async function JA({fs:t,cache:e,dir:n,gitdir:r=it.join(n,".git"),oids:i}){const s=new Set;async function o(a){if(s.has(a))return;s.add(a);const{type:l,object:c}=await vr({fs:t,cache:e,gitdir:r,oid:a});if(l==="tag"){const h=vs.from(c).headers().object;await o(h)}else if(l==="commit"){const h=gr.from(c).headers().tree;await o(h)}else if(l==="tree"){const u=Vs.from(c);for(const h of u)h.type==="blob"&&s.add(h.oid),h.type==="tree"&&await o(h.oid)}}for(const a of i)await o(a);return s}async function WQe(t){const e={};let n="";const r=Or.streamReader(t);let i=await r();for(;i!==!0;)i!==null&&(n+=i.toString("utf8")+`
`),i=await r();const s=n.toString("utf8").split(`
`);if(i=s.shift(),!i.startsWith("unpack "))throw new Zf('unpack ok" or "unpack [error message]',i);e.ok=i==="unpack ok",e.ok||(e.error=i.slice(7)),e.refs={};for(const o of s){if(o.trim()==="")continue;const a=o.slice(0,2),l=o.slice(3);let c=l.indexOf(" ");c===-1&&(c=l.length);const u=l.slice(0,c),h=l.slice(c+1);e.refs[u]={ok:a==="ok",error:h}}return e}async function GQe({capabilities:t=[],triplets:e=[]}){const n=[];let r=`\0 ${t.join(" ")}`;for(const i of e)n.push(Or.encode(`${i.oldoid} ${i.oid} ${i.fullRef}${r}
`)),r="";return n.push(Or.flush()),n}async function qQe({fs:t,cache:e,http:n,onProgress:r,onMessage:i,onAuth:s,onAuthSuccess:o,onAuthFailure:a,onPrePush:l,gitdir:c,ref:u,remoteRef:h,remote:d,url:f,force:m=!1,delete:g=!1,corsProxy:b,headers:y={}}){const v=u||await Uh({fs:t,gitdir:c});if(typeof v>"u")throw new Hs("ref");const x=await Ur.get({fs:t,gitdir:c});d=d||await x.get(`branch.${v}.pushRemote`)||await x.get("remote.pushDefault")||await x.get(`branch.${v}.remote`)||"origin";const w=f||await x.get(`remote.${d}.pushurl`)||await x.get(`remote.${d}.url`);if(typeof w>"u")throw new Hs("remote OR url");const S=h||await x.get(`branch.${v}.merge`);if(typeof w>"u")throw new Hs("remoteRef");b===void 0&&(b=await x.get("http.corsProxy"));const E=await ft.expand({fs:t,gitdir:c,ref:v}),k=g?"0000000000000000000000000000000000000000":await ft.resolve({fs:t,gitdir:c,ref:E}),_=p5.getRemoteHelperFor({url:w}),L=await _.discover({http:n,onAuth:s,onAuthSuccess:o,onAuthFailure:a,corsProxy:b,service:"git-receive-pack",url:w,headers:y,protocolVersion:1}),R=L.auth;let C;if(!S)C=E;else try{C=await ft.expandAgainstMap({ref:S,map:L.refs})}catch(M){if(M instanceof Kn)C=S.startsWith("refs/")?S:`refs/heads/${S}`;else throw M}const P=L.refs.get(C)||"0000000000000000000000000000000000000000";if(l&&!await l({remote:d,url:w,localRef:{ref:g?"(delete)":E,oid:k},remoteRef:{ref:C,oid:P}}))throw new h0;const O=!L.capabilities.has("no-thin");let N=new Set;if(!g){const M=[...L.refs.values()];let D=new Set;if(P!=="0000000000000000000000000000000000000000"){const V=await dD({fs:t,cache:e,gitdir:c,oids:[k,P]});for(const W of V)M.push(W);O&&(D=await JA({fs:t,cache:e,gitdir:c,oids:V}))}if(!M.includes(k)){const V=await VQe({fs:t,cache:e,gitdir:c,start:[k],finish:M});N=await JA({fs:t,cache:e,gitdir:c,oids:V})}if(O){try{const V=await ft.resolve({fs:t,gitdir:c,ref:`refs/remotes/${d}/HEAD`,depth:2}),{oid:W}=await ft.resolveAgainstMap({ref:V.replace(`refs/remotes/${d}/`,""),fullref:V,map:L.refs}),te=[W];for(const ee of await JA({fs:t,cache:e,gitdir:c,oids:te}))D.add(ee)}catch{}for(const V of D)N.delete(V)}if(k===P&&(m=!0),!m){if(E.startsWith("refs/tags")&&P!=="0000000000000000000000000000000000000000")throw new Eg("tag-exists");if(k!=="0000000000000000000000000000000000000000"&&P!=="0000000000000000000000000000000000000000"&&!await Xse({fs:t,cache:e,gitdir:c,oid:k,ancestor:P,depth:-1}))throw new Eg("not-fast-forward")}}const H=Hse([...L.capabilities],["report-status","side-band-64k",`agent=${m5.agent}`]),Q=await GQe({capabilities:H,triplets:[{oldoid:P,oid:k,fullRef:C}]}),X=g?[]:await Qse({fs:t,cache:e,gitdir:c,oids:[...N]}),J=await _.connect({http:n,onProgress:r,corsProxy:b,service:"git-receive-pack",url:w,auth:R,headers:y,body:[...Q,...X]}),{packfile:j,progress:F}=await Vse.demux(J.body);if(i){const M=zse(F);ux(M,async D=>{await i(D)})}const Y=await WQe(j);if(J.headers&&(Y.headers=J.headers),d&&Y.ok&&Y.refs[C].ok&&!E.startsWith("refs/tags")){const M=`refs/remotes/${d}/${C.replace("refs/heads","")}`;g?await ft.deleteRef({fs:t,gitdir:c,ref:M}):await ft.writeRef({fs:t,gitdir:c,ref:M,value:k})}if(Y.ok&&Object.values(Y.refs).every(M=>M.ok))return Y;{const M=Object.entries(Y.refs).filter(([D,V])=>!V.ok).map(([D,V])=>`
  - ${D}: ${V.error}`).join("");throw new Qv(M,Y)}}async function KQe({fs:t,http:e,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:o,onPrePush:a,dir:l,gitdir:c=it.join(l,".git"),ref:u,remoteRef:h,remote:d="origin",url:f,force:m=!1,delete:g=!1,corsProxy:b,headers:y={},cache:v={}}){try{return je("fs",t),je("http",e),je("gitdir",c),await qQe({fs:new jt(t),cache:v,http:e,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:o,onPrePush:a,gitdir:c,ref:u,remoteRef:h,remote:d,url:f,force:m,delete:g,corsProxy:b,headers:y})}catch(x){throw x.caller="git.push",x}}async function eoe({fs:t,cache:e,gitdir:n,oid:r}){const{type:i,object:s}=await vr({fs:t,cache:e,gitdir:n,oid:r});if(i==="tag")return r=vs.from(s).parse().object,eoe({fs:t,cache:e,gitdir:n,oid:r});if(i!=="blob")throw new Es(r,i,"blob");return{oid:r,blob:new Uint8Array(s)}}async function toe({fs:t,cache:e,gitdir:n,oid:r,filepath:i=void 0}){return i!==void 0&&(r=await lx({fs:t,cache:e,gitdir:n,oid:r,filepath:i})),await eoe({fs:t,cache:e,gitdir:n,oid:r})}async function YQe({fs:t,dir:e,gitdir:n=it.join(e,".git"),oid:r,filepath:i,cache:s={}}){try{return je("fs",t),je("gitdir",n),je("oid",r),await toe({fs:new jt(t),cache:s,gitdir:n,oid:r,filepath:i})}catch(o){throw o.caller="git.readBlob",o}}async function noe({fs:t,dir:e,gitdir:n=it.join(e,".git"),oid:r,cache:i={}}){try{return je("fs",t),je("gitdir",n),je("oid",r),await Tg({fs:new jt(t),cache:i,gitdir:n,oid:r})}catch(s){throw s.caller="git.readCommit",s}}async function XQe({fs:t,cache:e,gitdir:n,ref:r="refs/notes/commits",oid:i}){const s=await ft.resolve({gitdir:n,fs:t,ref:r}),{blob:o}=await toe({fs:t,cache:e,gitdir:n,oid:s,filepath:i});return o}async function ZQe({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r="refs/notes/commits",oid:i,cache:s={}}){try{return je("fs",t),je("gitdir",n),je("ref",r),je("oid",i),await XQe({fs:new jt(t),cache:s,gitdir:n,ref:r,oid:i})}catch(o){throw o.caller="git.readNote",o}}async function JQe({fs:t,dir:e,gitdir:n=it.join(e,".git"),oid:r,format:i="parsed",filepath:s=void 0,encoding:o=void 0,cache:a={}}){try{je("fs",t),je("gitdir",n),je("oid",r);const l=new jt(t);s!==void 0&&(r=await lx({fs:l,cache:a,gitdir:n,oid:r,filepath:s}));const u=await vr({fs:l,cache:a,gitdir:n,oid:r,format:i==="parsed"?"content":i});if(u.oid=r,i==="parsed")switch(u.format="parsed",u.type){case"commit":u.object=gr.from(u.object).parse();break;case"tree":u.object=Vs.from(u.object).entries();break;case"blob":o?u.object=u.object.toString(o):(u.object=new Uint8Array(u.object),u.format="content");break;case"tag":u.object=vs.from(u.object).parse();break;default:throw new Es(u.oid,u.type,"blob|commit|tag|tree")}else(u.format==="deflated"||u.format==="wrapped")&&(u.type=u.format);return u}catch(l){throw l.caller="git.readObject",l}}async function QQe({fs:t,cache:e,gitdir:n,oid:r}){const{type:i,object:s}=await vr({fs:t,cache:e,gitdir:n,oid:r,format:"content"});if(i!=="tag")throw new Es(r,i,"tag");const o=vs.from(s);return{oid:r,tag:o.parse(),payload:o.payload()}}async function eet({fs:t,dir:e,gitdir:n=it.join(e,".git"),oid:r,cache:i={}}){try{return je("fs",t),je("gitdir",n),je("oid",r),await QQe({fs:new jt(t),cache:i,gitdir:n,oid:r})}catch(s){throw s.caller="git.readTag",s}}async function tet({fs:t,dir:e,gitdir:n=it.join(e,".git"),oid:r,filepath:i=void 0,cache:s={}}){try{return je("fs",t),je("gitdir",n),je("oid",r),await f0({fs:new jt(t),cache:s,gitdir:n,oid:r,filepath:i})}catch(o){throw o.caller="git.readTree",o}}async function net({fs:t,dir:e,gitdir:n=it.join(e,".git"),filepath:r,cache:i={}}){try{je("fs",t),je("gitdir",n),je("filepath",r),await Si.acquire({fs:new jt(t),gitdir:n,cache:i},async function(s){s.delete({filepath:r})})}catch(s){throw s.caller="git.remove",s}}async function ret({fs:t,cache:e,onSign:n,gitdir:r,ref:i="refs/notes/commits",oid:s,author:o,committer:a,signingKey:l}){let c;try{c=await ft.resolve({gitdir:r,fs:t,ref:i})}catch(m){if(!(m instanceof Kn))throw m}let h=(await f0({fs:t,gitdir:r,oid:c||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;h=h.filter(m=>m.path!==s);const d=await cx({fs:t,gitdir:r,tree:h});return await f5({fs:t,cache:e,onSign:n,gitdir:r,ref:i,tree:d,parent:c&&[c],message:`Note removed by 'isomorphic-git removeNote'
`,author:o,committer:a,signingKey:l})}async function iet({fs:t,onSign:e,dir:n,gitdir:r=it.join(n,".git"),ref:i="refs/notes/commits",oid:s,author:o,committer:a,signingKey:l,cache:c={}}){try{je("fs",t),je("gitdir",r),je("oid",s);const u=new jt(t),h=await Nh({fs:u,gitdir:r,author:o});if(!h)throw new rs("author");const d=await Cg({fs:u,gitdir:r,author:h,committer:a});if(!d)throw new rs("committer");return await ret({fs:u,cache:c,onSign:e,gitdir:r,ref:i,oid:s,author:h,committer:d,signingKey:l})}catch(u){throw u.caller="git.removeNote",u}}async function set({fs:t,gitdir:e,oldref:n,ref:r,checkout:i=!1}){if(r!==Hl.clean(r))throw new Va(r,Hl.clean(r));if(n!==Hl.clean(n))throw new Va(n,Hl.clean(n));const s=`refs/heads/${n}`,o=`refs/heads/${r}`;if(await ft.exists({fs:t,gitdir:e,ref:o}))throw new Ja("branch",r,!1);const l=await ft.resolve({fs:t,gitdir:e,ref:s,depth:1});await ft.writeRef({fs:t,gitdir:e,ref:o,value:l}),await ft.deleteRef({fs:t,gitdir:e,ref:s});const u=await Uh({fs:t,gitdir:e,fullname:!0})===s;(i||u)&&await ft.writeSymbolicRef({fs:t,gitdir:e,ref:"HEAD",value:o})}async function oet({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r,oldref:i,checkout:s=!1}){try{return je("fs",t),je("gitdir",n),je("ref",r),je("oldref",i),await set({fs:new jt(t),gitdir:n,ref:r,oldref:i,checkout:s})}catch(o){throw o.caller="git.renameBranch",o}}async function roe({gitdir:t,type:e,object:n}){return ou(l0.wrap({type:e,object:n}))}async function aet({fs:t,dir:e,gitdir:n=it.join(e,".git"),filepath:r,ref:i,cache:s={}}){try{je("fs",t),je("gitdir",n),je("filepath",r);const o=new jt(t);let a,l;try{a=await ft.resolve({fs:o,gitdir:n,ref:i||"HEAD"})}catch(h){if(i)throw h}if(a)try{a=await lx({fs:o,cache:s,gitdir:n,oid:a,filepath:r})}catch{a=null}let c={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const u=e&&await o.read(it.join(e,r));u&&(l=await roe({gitdir:n,type:"blob",object:u}),a===l&&(c=await o.lstat(it.join(e,r)))),await Si.acquire({fs:o,gitdir:n,cache:s},async function(h){h.delete({filepath:r}),a&&h.insert({filepath:r,stats:c,oid:a})})}catch(o){throw o.caller="git.reset",o}}async function cet({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r,depth:i}){try{return je("fs",t),je("gitdir",n),je("ref",r),await ft.resolve({fs:new jt(t),gitdir:n,ref:r,depth:i})}catch(s){throw s.caller="git.resolveRef",s}}async function uet({fs:t,dir:e,gitdir:n=it.join(e,".git"),path:r,value:i,append:s=!1}){try{je("fs",t),je("gitdir",n),je("path",r);const o=new jt(t),a=await Ur.get({fs:o,gitdir:n});s?await a.append(r,i):await a.set(r,i),await Ur.save({fs:o,gitdir:n,config:a})}catch(o){throw o.caller="git.setConfig",o}}async function ioe({fs:t,gitdir:e,commit:n}){const r=gr.from(n).toObject();return await Zs({fs:t,gitdir:e,type:"commit",object:r,format:"content"})}class PE{static get timezoneOffsetForRefLogEntry(){const e=new Date().getTimezoneOffset(),n=Math.abs(Math.floor(e/60)),r=Math.abs(e%60).toString().padStart(2,"0");return`${e>0?"-":"+"}${n.toString().padStart(2,"0")}${r}`}static createStashReflogEntry(e,n,r){const i=e.name.replace(/\s/g,""),s="0000000000000000000000000000000000000000",o=Math.floor(Date.now()/1e3),a=PE.timezoneOffsetForRefLogEntry;return`${s} ${n} ${i} ${e.email} ${o} ${a}	${r}
`}static getStashReflogEntry(e,n=!1){return e.split(`
`).filter(s=>s).reverse().map((s,o)=>n?`stash@{${o}}: ${s.split("	")[1]}`:s)}}const het={stage:a0,workdir:ax};let QA;async function Ag(t,e){return QA===void 0&&(QA=new $y),QA.acquire(t,e)}async function det(t,e,n,r,i=null){const s=it.join(n,r),o=await t.lstat(s);if(!o)throw new Kn(s);if(o.isDirectory())throw new tn(`${s}: file expected, but found directory`);const a=i?await Tse({fs:t,gitdir:e,oid:i}):void 0;let l=a?i:void 0;return a||await Ag({fs:t,gitdir:e,currentFilepath:s},async()=>{const c=o.isSymbolicLink()?await t.readlink(s).then(Ise):await t.read(s);if(c===null)throw new Kn(s);l=await Zs({fs:t,gitdir:e,type:"blob",object:c})}),l}async function fet({fs:t,dir:e,gitdir:n,entries:r}){async function i(s){if(s.type==="tree"){if(!s.oid){const o=await Promise.all(s.children.map(i));s.oid=await cx({fs:t,gitdir:n,tree:o}),s.mode=16384}}else s.type==="blob"&&(s.oid=await det(t,n,e,s.path,s.oid),s.mode=33188);return s.path=s.path.split("/").pop(),s}return Promise.all(r.map(i))}async function pH({fs:t,dir:e,gitdir:n,treePair:r}){const i=r[1]==="stage",s=r.map(f=>typeof f=="string"?het[f]():f),o=[],u=await Ph({fs:t,cache:{},dir:e,gitdir:n,trees:s,map:async(f,[m,g])=>{if(!(f==="."||await d0.isIgnored({fs:t,dir:e,gitdir:n,filepath:f}))&&g)return(!m||await m.oid()!==await g.oid()&&await g.oid()!==void 0)&&o.push([m,g]),{mode:await g.mode(),path:f,oid:await g.oid(),type:await g.type()}},reduce:async(f,m)=>(m=m.filter(Boolean),f?(f.children=m,f):m.length>0?m:void 0),iterate:async(f,m)=>{const g=[];for(const b of m){const[y,v]=b;i?v&&(await t.exists(`${e}/${v.toString()}`)?g.push(b):o.push([null,v])):y&&(v?g.push(b):o.push([y,null]))}return g.length?Promise.all(g.map(f)):[]}});if(o.length===0||u.length===0)return null;const d=(await fet({fs:t,dir:e,gitdir:n,entries:u})).filter(Boolean).map(f=>({mode:f.mode,path:f.path,oid:f.oid,type:f.type}));return cx({fs:t,gitdir:n,tree:d})}async function pet({fs:t,dir:e,gitdir:n,stashCommit:r,parentCommit:i,wasStaged:s}){const o=[],a=[],l=await Ph({fs:t,cache:{},dir:e,gitdir:n,trees:[Xo({ref:i}),Xo({ref:r})],map:async(c,[u,h])=>{if(c==="."||await d0.isIgnored({fs:t,dir:e,gitdir:n,filepath:c}))return;const d=h?await h.type():await u.type();if(d!=="tree"&&d!=="blob")return;if(!h&&u){const m=d==="tree"?"rmdir":"rm";return d==="tree"&&o.push(c),d==="blob"&&s&&a.push({filepath:c,oid:await u.oid()}),{method:m,filepath:c}}const f=await h.oid();if(!u||await u.oid()!==f)return d==="tree"?{method:"mkdir",filepath:c}:(s&&a.push({filepath:c,oid:f,stats:await t.lstat(it.join(e,c))}),{method:"write",filepath:c,oid:f})}});await Ag({fs:t,gitdir:n,dirRemoved:o,ops:l},async()=>{for(const c of l){const u=it.join(e,c.filepath);switch(c.method){case"rmdir":await t.rmdir(u);break;case"mkdir":await t.mkdir(u);break;case"rm":await t.rm(u);break;case"write":if(!o.some(h=>u.startsWith(h))){const{object:h}=await vr({fs:t,cache:{},gitdir:n,oid:c.oid});await t.exists(u)&&await t.rm(u),await t.write(u,h)}break}}}),await Si.acquire({fs:t,gitdir:n,cache:{}},async c=>{a.forEach(({filepath:u,stats:h,oid:d})=>{c.insert({filepath:u,stats:h,oid:d})})})}class Gc{constructor({fs:e,dir:n,gitdir:r=it.join(n,".git")}){Object.assign(this,{fs:e,dir:n,gitdir:r,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return it.join(this.gitdir,Gc.refStash)}get refLogsStashPath(){return it.join(this.gitdir,Gc.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await Nh({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new rs("author");return this._author}async getStashSHA(e,n){return await this.fs.exists(this.refStashPath)?(n||await this.readStashReflogs({parsed:!1}))[e].split(" ")[1]:null}async writeStashCommit({message:e,tree:n,parent:r}){return ioe({fs:this.fs,gitdir:this.gitdir,commit:{message:e,tree:n,parent:r,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(e){const n=await this.readStashReflogs({parsed:!1});if(e!==0&&(e<0||e>n.length-1))throw new Va(`stash@${e}`,"number that is in range of [0, num of stash pushed]");const r=await this.getStashSHA(e,n);return r?Tg({fs:this.fs,cache:{},gitdir:this.gitdir,oid:r}):{}}async writeStashRef(e){return ft.writeRef({fs:this.fs,gitdir:this.gitdir,ref:Gc.refStash,value:e})}async writeStashReflogEntry({stashCommit:e,message:n}){const r=await this.getAuthor(),i=PE.createStashReflogEntry(r,e,n),s=this.refLogsStashPath;await Ag({filepath:s,entry:i},async()=>{const o=await this.fs.exists(s)?await this.fs.read(s,"utf8"):"";await this.fs.write(s,o+i,"utf8")})}async readStashReflogs({parsed:e=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const r=(await this.fs.read(this.refLogsStashPath)).toString();return PE.getStashReflogEntry(r,e)}}async function met({fs:t,dir:e,gitdir:n,message:r=""}){const i=new Gc({fs:t,dir:e,gitdir:n});await i.getAuthor();const s=await Uh({fs:t,gitdir:n,fullname:!1}),o=await ft.resolve({fs:t,gitdir:n,ref:"HEAD"}),l=(await noe({fs:t,dir:e,gitdir:n,oid:o})).commit.message,c=[o];let u=null,h=Xo({ref:"HEAD"});const d=await pH({fs:t,dir:e,gitdir:n,treePair:[Xo({ref:"HEAD"}),"stage"]});if(d){const b=await i.writeStashCommit({message:`stash-Index: WIP on ${s} - ${new Date().toISOString()}`,tree:d,parent:c});c.push(b),u=d,h=a0()}const f=await pH({fs:t,dir:e,gitdir:n,treePair:[h,"workdir"]});if(f){const b=await i.writeStashCommit({message:`stash-WorkDir: WIP on ${s} - ${new Date().toISOString()}`,tree:f,parent:[c[c.length-1]]});c.push(b),u=f}if(!u||!d&&!f)throw new Kn("changes, nothing to stash");const m=(r.trim()||`WIP on ${s}`)+`: ${o.substring(0,7)} ${l}`,g=await i.writeStashCommit({message:m,tree:u,parent:c});return await i.writeStashRef(g),await i.writeStashReflogEntry({stashCommit:g,message:m}),await Use({fs:t,dir:e,gitdir:n,ref:s,track:!1,force:!0}),g}async function soe({fs:t,dir:e,gitdir:n,refIdx:r=0}){const s=await new Gc({fs:t,dir:e,gitdir:n}).readStashCommit(r),{parent:o=null}=s.commit?s.commit:{};if(!(!o||!Array.isArray(o)))for(let a=0;a<o.length-1;a++){const c=(await Tg({fs:t,cache:{},gitdir:n,oid:o[a+1]})).commit.message.startsWith("stash-Index");await pet({fs:t,dir:e,gitdir:n,stashCommit:o[a+1],parentCommit:o[a],wasStaged:c})}}async function ooe({fs:t,dir:e,gitdir:n,refIdx:r=0}){const i=new Gc({fs:t,dir:e,gitdir:n});if(!(await i.readStashCommit(r)).commit)return;const o=i.refStashPath;await Ag(o,async()=>{await t.exists(o)&&await t.rm(o)});const a=await i.readStashReflogs({parsed:!1});if(!a.length)return;a.splice(r,1);const l=i.refLogsStashPath;await Ag({reflogEntries:a,stashReflogPath:l,stashMgr:i},async()=>{if(a.length){await t.write(l,a.join(`
`),"utf8");const c=a[a.length-1].split(" ")[1];await i.writeStashRef(c)}else await t.rm(l)})}async function get({fs:t,dir:e,gitdir:n}){return new Gc({fs:t,dir:e,gitdir:n}).readStashReflogs({parsed:!0})}async function bet({fs:t,dir:e,gitdir:n}){const r=new Gc({fs:t,dir:e,gitdir:n}),i=[r.refStashPath,r.refLogsStashPath];await Ag(i,async()=>{await Promise.all(i.map(async s=>{if(await t.exists(s))return t.rm(s)}))})}async function yet({fs:t,dir:e,gitdir:n,refIdx:r=0}){await soe({fs:t,dir:e,gitdir:n,refIdx:r}),await ooe({fs:t,dir:e,gitdir:n,refIdx:r})}async function vet({fs:t,dir:e,gitdir:n=it.join(e,".git"),op:r="push",message:i="",refIdx:s=0}){je("fs",t),je("dir",e),je("gitdir",n),je("op",r);const o={push:met,apply:soe,drop:ooe,list:get,clear:bet,pop:yet},a=["apply","drop","pop"];try{const l=new jt(t);["refs","logs","logs/refs"].map(h=>it.join(n,h)).forEach(async h=>{await l.exists(h)||await l.mkdir(h)});const u=o[r];if(u){if(a.includes(r)&&s<0)throw new Va(`stash@${s}`,"number that is in range of [0, num of stash pushed]");return await u({fs:l,dir:e,gitdir:n,message:i,refIdx:s})}throw new Error(`To be implemented: ${r}`)}catch(l){throw l.caller="git.stash",l}}async function xet({fs:t,dir:e,gitdir:n=it.join(e,".git"),filepath:r,cache:i={}}){try{je("fs",t),je("gitdir",n),je("filepath",r);const s=new jt(t);if(await d0.isIgnored({fs:s,gitdir:n,dir:e,filepath:r}))return"ignored";const a=await _et({fs:s,cache:i,gitdir:n}),l=await aoe({fs:s,cache:i,gitdir:n,tree:a,path:r}),c=await Si.acquire({fs:s,gitdir:n,cache:i},async function(g){for(const b of g)if(b.path===r)return b;return null}),u=await s.lstat(it.join(e,r)),h=l!==null,d=c!==null,f=u!==null,m=async()=>{if(d&&!_E(c,u))return c.oid;{const g=await s.read(it.join(e,r)),b=await roe({gitdir:n,type:"blob",object:g});return d&&c.oid===b&&u.size!==-1&&Si.acquire({fs:s,gitdir:n,cache:i},async function(y){y.insert({filepath:r,stats:u,oid:b})}),b}};if(!h&&!f&&!d)return"absent";if(!h&&!f&&d)return"*absent";if(!h&&f&&!d)return"*added";if(!h&&f&&d)return await m()===c.oid?"added":"*added";if(h&&!f&&!d)return"deleted";if(h&&!f&&d)return l===c.oid,"*deleted";if(h&&f&&!d)return await m()===l?"*undeleted":"*undeletemodified";if(h&&f&&d){const g=await m();return g===l?g===c.oid?"unmodified":"*unmodified":g===c.oid?"modified":"*modified"}}catch(s){throw s.caller="git.status",s}}async function aoe({fs:t,cache:e,gitdir:n,tree:r,path:i}){typeof i=="string"&&(i=i.split("/"));const s=i.shift();for(const o of r)if(o.path===s){if(i.length===0)return o.oid;const{type:a,object:l}=await vr({fs:t,cache:e,gitdir:n,oid:o.oid});if(a==="tree"){const c=Vs.from(l);return aoe({fs:t,cache:e,gitdir:n,tree:c,path:i})}if(a==="blob")throw new Es(o.oid,a,"blob",i.join("/"))}return null}async function _et({fs:t,cache:e,gitdir:n}){let r;try{r=await ft.resolve({fs:t,gitdir:n,ref:"HEAD"})}catch(s){if(s instanceof Kn)return[]}const{tree:i}=await f0({fs:t,cache:e,gitdir:n,oid:r});return i}async function wet({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r="HEAD",filepaths:i=["."],filter:s,cache:o={},ignored:a=!1}){try{je("fs",t),je("gitdir",n),je("ref",r);const l=new jt(t);return await Ph({fs:l,cache:o,dir:e,gitdir:n,trees:[Xo({ref:r}),ax(),a0()],map:async function(c,[u,h,d]){if(!u&&!d&&h&&!a&&await d0.isIgnored({fs:l,dir:e,filepath:c})||!i.some(E=>Bse(c,E)))return null;if(s&&!s(c))return;const[f,m,g]=await Promise.all([u&&u.type(),h&&h.type(),d&&d.type()]),b=[f,m,g].includes("blob");if((f==="tree"||f==="special")&&!b)return;if(f==="commit")return null;if((m==="tree"||m==="special")&&!b)return;if(g==="commit")return null;if((g==="tree"||g==="special")&&!b)return;const y=f==="blob"?await u.oid():void 0,v=g==="blob"?await d.oid():void 0;let x;f!=="blob"&&m==="blob"&&g!=="blob"?x="42":m==="blob"&&(x=await h.oid());const w=[void 0,y,x,v],S=w.map(E=>w.indexOf(E));return S.shift(),[c,...S]}})}catch(l){throw l.caller="git.statusMatrix",l}}async function Eet({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r,object:i,force:s=!1}){try{je("fs",t),je("gitdir",n),je("ref",r);const o=new jt(t);if(r===void 0)throw new Hs("ref");r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`;const a=await ft.resolve({fs:o,gitdir:n,ref:i||"HEAD"});if(!s&&await ft.exists({fs:o,gitdir:n,ref:r}))throw new Ja("tag",r);await ft.writeRef({fs:o,gitdir:n,ref:r,value:a})}catch(o){throw o.caller="git.tag",o}}async function ket({fs:t,dir:e,gitdir:n=it.join(e,".git"),cache:r={},filepath:i,oid:s,mode:o,add:a,remove:l,force:c}){try{je("fs",t),je("gitdir",n),je("filepath",i);const u=new jt(t);if(l)return await Si.acquire({fs:u,gitdir:n,cache:r},async function(d){let f;if(!c&&(f=await u.lstat(it.join(e,i)),f)){if(f.isDirectory())throw new Ah("directory");return}d.has({filepath:i})&&d.delete({filepath:i})});let h;if(!s){if(h=await u.lstat(it.join(e,i)),!h)throw new Kn(`file at "${i}" on disk and "remove" not set`);if(h.isDirectory())throw new Ah("directory")}return await Si.acquire({fs:u,gitdir:n,cache:r},async function(d){if(!a&&!d.has({filepath:i}))throw new Kn(`file at "${i}" in index and "add" not set`);let f={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:o,uid:0,gid:0,size:0};if(!s){f=h;const m=f.isSymbolicLink()?await u.readlink(it.join(e,i)):await u.read(it.join(e,i));s=await Zs({fs:u,gitdir:n,type:"blob",format:"content",object:m})}return d.insert({filepath:i,oid:s,stats:f}),s})}catch(u){throw u.caller="git.updateIndex",u}}function Cet(){try{return m5.version}catch(t){throw t.caller="git.version",t}}async function Tet({fs:t,dir:e,gitdir:n=it.join(e,".git"),trees:r,map:i,reduce:s,iterate:o,cache:a={}}){try{return je("fs",t),je("gitdir",n),je("trees",r),await Ph({fs:new jt(t),cache:a,dir:e,gitdir:n,trees:r,map:i,reduce:s,iterate:o})}catch(l){throw l.caller="git.walk",l}}async function Aet({fs:t,dir:e,gitdir:n=it.join(e,".git"),blob:r}){try{return je("fs",t),je("gitdir",n),je("blob",r),await Zs({fs:new jt(t),gitdir:n,type:"blob",object:r,format:"content"})}catch(i){throw i.caller="git.writeBlob",i}}async function Pet({fs:t,dir:e,gitdir:n=it.join(e,".git"),commit:r}){try{return je("fs",t),je("gitdir",n),je("commit",r),await ioe({fs:new jt(t),gitdir:n,commit:r})}catch(i){throw i.caller="git.writeCommit",i}}async function Net({fs:t,dir:e,gitdir:n=it.join(e,".git"),type:r,object:i,format:s="parsed",oid:o,encoding:a=void 0}){try{const l=new jt(t);if(s==="parsed"){switch(r){case"commit":i=gr.from(i).toObject();break;case"tree":i=Vs.from(i).toObject();break;case"blob":i=xt.from(i,a);break;case"tag":i=vs.from(i).toObject();break;default:throw new Es(o||"",r,"blob|commit|tag|tree")}s="content"}return o=await Zs({fs:l,gitdir:n,type:r,object:i,oid:o,format:s}),o}catch(l){throw l.caller="git.writeObject",l}}async function Let({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r,value:i,force:s=!1,symbolic:o=!1}){try{je("fs",t),je("gitdir",n),je("ref",r),je("value",i);const a=new jt(t);if(r!==Hl.clean(r))throw new Va(r,Hl.clean(r));if(!s&&await ft.exists({fs:a,gitdir:n,ref:r}))throw new Ja("ref",r);o?await ft.writeSymbolicRef({fs:a,gitdir:n,ref:r,value:i}):(i=await ft.resolve({fs:a,gitdir:n,ref:i}),await ft.writeRef({fs:a,gitdir:n,ref:r,value:i}))}catch(a){throw a.caller="git.writeRef",a}}async function Ret({fs:t,gitdir:e,tag:n}){const r=vs.from(n).toObject();return await Zs({fs:t,gitdir:e,type:"tag",object:r,format:"content"})}async function Iet({fs:t,dir:e,gitdir:n=it.join(e,".git"),tag:r}){try{return je("fs",t),je("gitdir",n),je("tag",r),await Ret({fs:new jt(t),gitdir:n,tag:r})}catch(i){throw i.caller="git.writeTag",i}}async function Oet({fs:t,dir:e,gitdir:n=it.join(e,".git"),tree:r}){try{return je("fs",t),je("gitdir",n),je("tree",r),await cx({fs:new jt(t),gitdir:n,tree:r})}catch(i){throw i.caller="git.writeTree",i}}var Det={Errors:oJe,STAGE:a0,TREE:Xo,WORKDIR:ax,add:EJe,abortMerge:xJe,addNote:CJe,addRemote:TJe,annotatedTag:PJe,branch:LJe,checkout:Use,clone:zJe,commit:VJe,getConfig:hQe,getConfigAll:fQe,setConfig:uet,currentBranch:WJe,deleteBranch:qJe,deleteRef:KJe,deleteRemote:XJe,deleteTag:JJe,expandOid:nQe,expandRef:rQe,fastForward:aQe,fetch:lQe,findMergeBase:cQe,findRoot:uQe,getRemoteInfo:pQe,getRemoteInfo2:mQe,hashBlob:bQe,indexPack:vQe,init:xQe,isDescendent:_Qe,isIgnored:wQe,listBranches:SQe,listFiles:kQe,listNotes:TQe,listRefs:AQe,listRemotes:NQe,listServerRefs:IQe,listTags:OQe,log:FQe,merge:BQe,packObjects:HQe,pull:zQe,push:KQe,readBlob:YQe,readCommit:noe,readNote:ZQe,readObject:JQe,readTag:eet,readTree:tet,remove:net,removeNote:iet,renameBranch:oet,resetIndex:aet,updateIndex:ket,resolveRef:cet,status:xet,statusMatrix:wet,tag:Eet,version:Cet,walk:Tet,writeBlob:Aet,writeCommit:Pet,writeObject:Net,writeRef:Let,writeTag:Iet,writeTree:Oet,stash:vet};function Met(t){let e=[t];return{next(){return Promise.resolve({done:e.length===0,value:e.pop()})},return(){return e=[],{}},[Symbol.asyncIterator](){return this}}}function jet(t){return t[Symbol.asyncIterator]?t[Symbol.asyncIterator]():t[Symbol.iterator]?t[Symbol.iterator]():t.next?t:Met(t)}async function Fet(t,e){const n=jet(t);for(;;){const{value:r,done:i}=await n.next();if(r&&await e(r),i)break}n.return&&n.return()}async function Bet(t){let e=0;const n=[];await Fet(t,s=>{n.push(s),e+=s.byteLength});const r=new Uint8Array(e);let i=0;for(const s of n)r.set(s,i),i+=s.byteLength;return r}function Uet(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{next(){return e.read()},return(){return e.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function $et({onProgress:t,url:e,method:n="GET",headers:r={},body:i}){i&&(i=await Bet(i));const s=await fetch(e,{method:n,headers:r,body:i}),o=s.body&&s.body.getReader?Uet(s.body):[new Uint8Array(await s.arrayBuffer())];r={};for(const[a,l]of s.headers.entries())r[a]=l;return{url:s.url,method:s.method,statusCode:s.status,statusMessage:s.statusText,body:o,headers:r}}var Het={request:$et};const mH=t=>{const e=t.split("/")[2],n=Zr.get(`git:${e}`);if(!n)return null;try{const{username:r,password:i}=JSON.parse(n||"{}");return{username:r,password:i}}catch(r){return console.log(`Failed to parse Git Cookie ${r}`),null}},zet=(t,e)=>{const n=t.split("/")[2];Zr.set(`git:${n}`,JSON.stringify(e))};function Vet(){const[t,e]=A.useState(!1),[n,r]=A.useState(),[i,s]=A.useState(),o=A.useRef({});A.useEffect(()=>{Gu.then(l=>{o.current={},r(l),s(loe(l,o)),e(!0)})},[]);const a=A.useCallback(async l=>{if(!n||!i||!t)throw"Webcontainer not initialized";o.current={};const c={"User-Agent":"bolt.diy"},u=mH(l);u&&(c.Authorization=`Basic ${xt.from(`${u.username}:${u.password}`).toString("base64")}`);try{await Det.clone({fs:i,http:Het,dir:n.workdir,url:l,depth:1,singleBranch:!0,corsProxy:"/api/git-proxy",headers:c,onAuth:d=>{let f=mH(d);return f||(confirm("This repo is password protected. Ready to enter a username & password?")?(f={username:prompt("Enter username"),password:prompt("Enter password")},f):{cancel:!0})},onAuthFailure:(d,f)=>{throw He.error(`Error Authenticating with ${d.split("/")[2]}`),`Error Authenticating with ${d.split("/")[2]}`},onAuthSuccess:(d,f)=>{zet(d,f)}});const h={};for(const[d,f]of Object.entries(o.current))h[d]=f;return{workdir:n.workdir,data:h}}catch(h){throw console.error("Git clone error:",h),h}},[n,i,t]);return{ready:t,gitClone:a}}const loe=(t,e)=>({promises:{readFile:async(n,r)=>{const i=r?.encoding,s=yl.relative(t.workdir,n);try{return await t.fs.readFile(s,i)}catch(o){throw o}},writeFile:async(n,r,i)=>{const s=i.encoding,o=yl.relative(t.workdir,n);e.current&&(e.current[o]={data:r,encoding:s});try{return await t.fs.writeFile(o,r,{...i,encoding:s})}catch(a){throw a}},mkdir:async(n,r)=>{const i=yl.relative(t.workdir,n);try{return await t.fs.mkdir(i,{...r,recursive:!0})}catch(s){throw s}},readdir:async(n,r)=>{const i=yl.relative(t.workdir,n);try{return await t.fs.readdir(i,r)}catch(s){throw s}},rm:async(n,r)=>{const i=yl.relative(t.workdir,n);try{return await t.fs.rm(i,{...r||{}})}catch(s){throw s}},rmdir:async(n,r)=>{const i=yl.relative(t.workdir,n);try{return await t.fs.rm(i,{recursive:!0,...r})}catch(s){throw s}},unlink:async n=>{const r=yl.relative(t.workdir,n);try{return await t.fs.rm(r,{recursive:!1})}catch(i){throw i}},stat:async n=>{try{const r=yl.relative(t.workdir,n),i=await t.fs.readdir(yl.dirname(r),{withFileTypes:!0}),s=yl.basename(r),o=i.find(a=>a.name==s);if(!o)throw new Error(`ENOENT: no such file or directory, stat '${n}'`);return{isFile:()=>o.isFile(),isDirectory:()=>o.isDirectory(),isSymbolicLink:()=>!1,size:1,mode:438,mtimeMs:Date.now(),uid:1e3,gid:1e3}}catch(r){console.log(r?.message);const i=new Error(`ENOENT: no such file or directory, stat '${n}'`);throw i.code="ENOENT",i.errno=-2,i.syscall="stat",i.path=n,i}},lstat:async n=>await loe(t,e).promises.stat(n),readlink:async n=>{throw new Error(`EINVAL: invalid argument, readlink '${n}'`)},symlink:async(n,r)=>{throw new Error(`EPERM: operation not permitted, symlink '${n}' -> '${r}'`)},chmod:async(n,r)=>await Promise.resolve()}}),yl={dirname:t=>!t||!t.includes("/")?".":(t=t.replace(/\/+$/,""),t.split("/").slice(0,-1).join("/")||"/"),basename:(t,e)=>{t=t.replace(/\/+$/,"");const n=t.split("/").pop()||"";return e&&n.endsWith(e)?n.slice(0,-e.length):n},relative:(t,e)=>{if(!t||!e)return".";const n=u=>u.replace(/\/+$/,"").split("/").filter(Boolean),r=n(t),i=n(e);let s=0;const o=Math.min(r.length,i.length);for(let u=0;u<o&&r[u]===i[u];u++)s++;const a=r.length-s,l=i.slice(s),c=[...Array(a).fill(".."),...l];return c.length===0?".":c.join("/")}},Wet=({message:t="Loading...",progress:e,progressText:n})=>p.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/80 z-50 backdrop-blur-sm",children:p.jsxs("div",{className:"relative flex flex-col items-center gap-4 p-8 rounded-lg bg-bolt-elements-background-depth-2 shadow-lg",children:[p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg text-bolt-elements-loader-progress",style:{fontSize:"2rem"}}),p.jsx("p",{className:"text-lg text-bolt-elements-textTertiary",children:t}),e!==void 0&&p.jsxs("div",{className:"w-64 flex flex-col gap-2",children:[p.jsx("div",{className:"w-full h-2 bg-bolt-elements-background-depth-1 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-bolt-elements-loader-progress transition-all duration-300 ease-out rounded-full",style:{width:`${Math.min(100,Math.max(0,e))}%`}})}),n&&p.jsx("p",{className:"text-sm text-bolt-elements-textTertiary text-center",children:n})]})]})}),coe=A.forwardRef(({className:t,type:e,...n},r)=>p.jsx("input",{type:e,className:Ae("flex h-10 w-full rounded-md border border-bolt-elements-border bg-bolt-elements-background px-3 py-2 text-sm ring-offset-bolt-elements-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-bolt-elements-textSecondary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-bolt-elements-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));coe.displayName="Input";function Get({isOpen:t,onClose:e,onConfirm:n,stats:r,isLargeRepo:i}){return p.jsx(xo,{open:t,onOpenChange:s=>!s&&e(),children:p.jsxs(Gd,{children:[p.jsx(qd,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999]"}),p.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999]",children:p.jsx(at.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"w-[90vw] md:w-[500px]",children:p.jsxs(Kd,{className:"bg-white dark:bg-[#1E1E1E] rounded-lg border border-[#E5E5E5] dark:border-[#333333] shadow-xl",children:[p.jsx("div",{className:"p-6 space-y-4",children:p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium text-[#111111] dark:text-white",children:"Repository Overview"}),p.jsxs("div",{className:"mt-4 space-y-2",children:[p.jsx("p",{className:"text-sm text-[#666666] dark:text-[#999999]",children:"Repository Statistics:"}),p.jsxs("div",{className:"space-y-2 text-sm text-[#111111] dark:text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"i-ph:files text-blue-500 w-4 h-4"})," ",p.jsxs("span",{children:["Total Files: ",r.totalFiles]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"i-ph:database text-blue-500 w-4 h-4"})," ",p.jsxs("span",{children:["Total Size: ",_2(r.totalSize)]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"i-ph:code text-blue-500 w-4 h-4"})," ",p.jsxs("span",{children:["Languages:"," ",Object.entries(r.languages).sort(([,s],[,o])=>o-s).slice(0,3).map(([s,o])=>`${s} (${_2(o)})`).join(", ")]})]}),r.hasPackageJson&&p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"i-ph:package text-blue-500 w-4 h-4"})," ",p.jsx("span",{children:"Has package.json"})]}),r.hasDependencies&&p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"i-ph:tree-structure text-blue-500 w-4 h-4"})," ",p.jsx("span",{children:"Has dependencies"})]})]})]}),i&&p.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-500/10 rounded-lg text-sm flex items-start gap-2",children:[p.jsx("span",{className:"i-ph:warning text-yellow-600 dark:text-yellow-500 w-4 h-4 flex-shrink-0 mt-0.5"}),p.jsxs("div",{className:"text-yellow-800 dark:text-yellow-500",children:["This repository is quite large (",_2(r.totalSize),"). Importing it might take a while and could impact performance."]})]})]})}),p.jsxs("div",{className:"border-t border-[#E5E5E5] dark:border-[#333333] p-4 flex justify-end gap-3 bg-[#F9F9F9] dark:bg-[#252525] rounded-b-lg",children:[p.jsx("button",{onClick:e,className:"px-4 py-2 rounded-lg bg-[#F5F5F5] dark:bg-[#333333] text-[#666666] hover:text-[#111111] dark:text-[#999999] dark:hover:text-white transition-colors",children:"Cancel"}),p.jsx("button",{onClick:n,className:"px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 transition-colors",children:"OK"})]})]})})})]})})}function qet({isOpen:t,onClose:e,onSelect:n}){const[r,i]=A.useState(null),[s,o]=A.useState(!1),[a,l]=A.useState([]),[c,u]=A.useState(""),[h,d]=A.useState([]),[f,m]=A.useState("my-repos"),[g,b]=A.useState(""),[y,v]=A.useState([]),[x,w]=A.useState(""),[S,E]=A.useState({}),[k,_]=A.useState(null),[L,R]=A.useState(!1),[C,P]=A.useState(null),[O,N]=A.useState("");A.useEffect(()=>{t&&f==="my-repos"&&H()},[t,f]);const H=async()=>{const W=Xd("github_connection");if(!W?.token){He.error("Please connect your GitHub account first");return}o(!0);try{const te=await fetch("https://api.github.com/user/repos?sort=updated&per_page=100&type=all",{headers:{Authorization:`Bearer ${W.token}`}});if(!te.ok)throw new Error("Failed to fetch repositories");const ee=await te.json();if(Array.isArray(ee)&&ee.every(K=>typeof K=="object"&&K!==null&&"full_name"in K))l(ee);else throw new Error("Invalid repository data format")}catch(te){console.error("Error fetching repos:",te),He.error("Failed to fetch your repositories")}finally{o(!1)}},Q=async W=>{o(!0),d([]);try{let te=W;S.language&&(te+=` language:${S.language}`),S.stars&&(te+=` stars:>${S.stars}`),S.forks&&(te+=` forks:>${S.forks}`);const ee=await fetch(`https://api.github.com/search/repositories?q=${encodeURIComponent(te)}&sort=stars&order=desc`,{headers:{Accept:"application/vnd.github.v3+json"}});if(!ee.ok)throw new Error("Failed to search repositories");const K=await ee.json();if(typeof K=="object"&&K!==null&&"items"in K&&Array.isArray(K.items))d(K.items);else throw new Error("Invalid search results format")}catch(te){console.error("Error searching repos:",te),He.error("Failed to search repositories")}finally{o(!1)}},X=async W=>{o(!0);try{const te=await fetch(`https://api.github.com/repos/${W.full_name}/branches`,{headers:{Authorization:`Bearer ${Xd("github_connection")?.token}`}});if(!te.ok)throw new Error("Failed to fetch branches");const ee=await te.json();if(Array.isArray(ee)&&ee.every(K=>typeof K=="object"&&K!==null&&"name"in K))v(ee.map(K=>({name:K.name,default:K.name===W.default_branch})));else throw new Error("Invalid branch data format")}catch(te){console.error("Error fetching branches:",te),He.error("Failed to fetch branches")}finally{o(!1)}},J=async W=>{i(W),await X(W)},j=W=>`${W.replace(/\/tree\/[^/]+/,"").replace(/\/$/,"").replace(/\.git$/,"")}.git`,F=async W=>{try{const[te,ee]=W.replace(/\.git$/,"").split("/").slice(-2),K=Xd("github_connection"),he=K?.token?{Authorization:`Bearer ${K.token}`}:{},be=await fetch(`https://api.github.com/repos/${te}/${ee}/git/trees/main?recursive=1`,{headers:he});if(!be.ok)throw new Error("Failed to fetch repository structure");const Se=await be.json();let Ce=0,ke=0;const q={};let pe=!1,ne=!1;for(const ae of Se.tree)if(ae.type==="blob"){if(ke++,ae.size&&(Ce+=ae.size),ae.path==="package.json"){pe=!0;const Pe=await fetch(`https://api.github.com/repos/${te}/${ee}/contents/package.json`,{headers:he});if(Pe.ok){const Re=await Pe.json(),we=JSON.parse(xt.from(Re.content,"base64").toString());ne=!!(we.dependencies||we.devDependencies||we.peerDependencies)}}const me=ae.path.split(".").pop()?.toLowerCase();me&&(q[me]=(q[me]||0)+(ae.size||0))}const oe={totalFiles:ke,totalSize:Ce,languages:q,hasPackageJson:pe,hasDependencies:ne};return _(oe),oe}catch(te){return console.error("Error verifying repository:",te),He.error("Failed to verify repository"),null}},Y=async()=>{try{let W;if(f==="url"&&g)W=j(g);else if(r)W=j(r.html_url),x&&(W=`${W}#${x}`);else return;const te=await F(W);if(!te)return;P(te),N(W),R(!0)}catch(W){console.error("Error preparing repository:",W),He.error("Failed to prepare repository. Please try again.")}},M=()=>{R(!1),O&&(n(O),e())},D=(W,te)=>{let ee=te;(W==="stars"||W==="forks")&&(ee=te?parseInt(te,10):void 0),E(K=>({...K,[W]:ee})),Q(c)},V=()=>{o(!1),u(""),d([]),e()};return p.jsxs(xo,{open:t,onOpenChange:W=>{W||V()},children:[p.jsxs(Gd,{children:[p.jsx(qd,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50"}),p.jsxs(Kd,{className:"fixed top-[50%] left-[50%] -translate-x-1/2 -translate-y-1/2 w-[90vw] md:w-[600px] max-h-[85vh] overflow-hidden bg-white dark:bg-[#1A1A1A] rounded-xl shadow-xl z-[51] border border-[#E5E5E5] dark:border-[#333333]",children:[p.jsxs("div",{className:"p-4 border-b border-[#E5E5E5] dark:border-[#333333] flex items-center justify-between",children:[p.jsx(WL,{className:"text-lg font-semibold text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark",children:"Import GitHub Repository"}),p.jsxs(gh,{onClick:V,className:Ae("p-2 rounded-lg transition-all duration-200 ease-in-out","text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary","dark:text-bolt-elements-textTertiary-dark dark:hover:text-bolt-elements-textPrimary-dark","hover:bg-bolt-elements-background-depth-2 dark:hover:bg-bolt-elements-background-depth-3","focus:outline-none focus:ring-2 focus:ring-bolt-elements-borderColor dark:focus:ring-bolt-elements-borderColor-dark"),children:[p.jsx("span",{className:"i-ph:x block w-5 h-5","aria-hidden":"true"}),p.jsx("span",{className:"sr-only",children:"Close dialog"})]})]}),p.jsxs("div",{className:"p-4",children:[p.jsxs("div",{className:"flex gap-2 mb-4",children:[p.jsxs(e3,{active:f==="my-repos",onClick:()=>m("my-repos"),children:[p.jsx("span",{className:"i-ph:book-bookmark"}),"My Repos"]}),p.jsxs(e3,{active:f==="search",onClick:()=>m("search"),children:[p.jsx("span",{className:"i-ph:magnifying-glass"}),"Search"]}),p.jsxs(e3,{active:f==="url",onClick:()=>m("url"),children:[p.jsx("span",{className:"i-ph:link"}),"URL"]})]}),f==="url"?p.jsxs("div",{className:"space-y-4",children:[p.jsx(coe,{placeholder:"Enter repository URL",value:g,onChange:W=>b(W.target.value),className:Ae("w-full",{"border-red-500":!1})}),p.jsx("button",{onClick:Y,disabled:!g,className:"w-full h-10 px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center gap-2 justify-center",children:"Import Repository"})]}):p.jsxs(p.Fragment,{children:[f==="search"&&p.jsxs("div",{className:"space-y-4 mb-4",children:[p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"text",placeholder:"Search repositories...",value:c,onChange:W=>{u(W.target.value),Q(W.target.value)},className:"flex-1 px-4 py-2 rounded-lg bg-[#F5F5F5] dark:bg-[#252525] border border-[#E5E5E5] dark:border-[#333333] text-bolt-elements-textPrimary"}),p.jsx("button",{onClick:()=>E({}),className:"px-3 py-2 rounded-lg bg-[#F5F5F5] dark:bg-[#252525] text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary",children:p.jsx("span",{className:"i-ph:funnel-simple"})})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx("input",{type:"text",placeholder:"Filter by language...",value:S.language||"",onChange:W=>{E({...S,language:W.target.value}),Q(c)},className:"px-3 py-1.5 text-sm rounded-lg bg-[#F5F5F5] dark:bg-[#252525] border border-[#E5E5E5] dark:border-[#333333]"}),p.jsx("input",{type:"number",placeholder:"Min stars...",value:S.stars||"",onChange:W=>D("stars",W.target.value),className:"px-3 py-1.5 text-sm rounded-lg bg-[#F5F5F5] dark:bg-[#252525] border border-[#E5E5E5] dark:border-[#333333]"})]}),p.jsx("input",{type:"number",placeholder:"Min forks...",value:S.forks||"",onChange:W=>D("forks",W.target.value),className:"px-3 py-1.5 text-sm rounded-lg bg-[#F5F5F5] dark:bg-[#252525] border border-[#E5E5E5] dark:border-[#333333]"})]}),p.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:r?p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>i(null),className:"p-1.5 rounded-lg hover:bg-[#F5F5F5] dark:hover:bg-[#252525]",children:p.jsx("span",{className:"i-ph:arrow-left w-4 h-4"})}),p.jsx("h3",{className:"font-medium",children:r.full_name})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm text-bolt-elements-textSecondary",children:"Select Branch"}),p.jsx("select",{value:x,onChange:W=>w(W.target.value),className:"w-full px-3 py-2 rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark focus:outline-none focus:ring-2 focus:ring-bolt-elements-borderColor dark:focus:ring-bolt-elements-borderColor-dark",children:y.map(W=>p.jsxs("option",{value:W.name,className:"bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark",children:[W.name," ",W.default?"(default)":""]},W.name))}),p.jsx("button",{onClick:Y,className:"w-full h-10 px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 transition-all duration-200 flex items-center gap-2 justify-center",children:"Import Selected Branch"})]})]}):p.jsx(Ket,{repos:f==="my-repos"?a:h,isLoading:s,onSelect:J,activeTab:f})})]})]})]})]}),C&&p.jsx(Get,{isOpen:L,onClose:M,onConfirm:M,stats:C,isLargeRepo:C.totalSize>50*1024*1024})]})}function e3({active:t,onClick:e,children:n}){return p.jsx("button",{onClick:e,className:Ae("px-4 py-2 h-10 rounded-lg transition-all duration-200 flex items-center gap-2 min-w-[120px] justify-center",t?"bg-blue-500 text-white hover:bg-blue-600":"bg-[#F5F5F5] dark:bg-[#252525] text-bolt-elements-textPrimary dark:text-white hover:bg-[#E5E5E5] dark:hover:bg-[#333333] border border-[#E5E5E5] dark:border-[#333333]"),children:n})}function Ket({repos:t,isLoading:e,onSelect:n,activeTab:r}){return e?p.jsxs("div",{className:"flex items-center justify-center py-8 text-bolt-elements-textSecondary",children:[p.jsx("span",{className:"i-ph:spinner animate-spin mr-2"}),"Loading repositories..."]}):t.length===0?p.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-bolt-elements-textSecondary",children:[p.jsx("span",{className:"i-ph:folder-simple-dashed w-12 h-12 mb-2 opacity-50"}),p.jsx("p",{children:r==="my-repos"?"No repositories found":"Search for repositories"})]}):t.map(i=>p.jsx(Yet,{repo:i,onSelect:()=>n(i)},i.full_name))}function Yet({repo:t,onSelect:e}){return p.jsxs("div",{className:"p-4 rounded-lg bg-[#F5F5F5] dark:bg-[#252525] border border-[#E5E5E5] dark:border-[#333333] hover:border-blue-500/50 transition-colors",children:[" ",p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"i-ph:git-repository text-bolt-elements-textTertiary"}),p.jsx("h3",{className:"font-medium text-bolt-elements-textPrimary dark:text-white",children:t.name})]}),p.jsxs("button",{onClick:e,className:"px-4 py-2 h-10 rounded-lg bg-blue-500 text-white hover:bg-blue-600 transition-all duration-200 flex items-center gap-2 min-w-[120px] justify-center",children:[p.jsx("span",{className:"i-ph:download-simple w-4 h-4"}),"Import"]})]}),t.description&&p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mb-3",children:t.description}),p.jsxs("div",{className:"flex items-center gap-4 text-sm text-bolt-elements-textTertiary",children:[t.language&&p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"i-ph:code"}),t.language]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"i-ph:star"}),t.stargazers_count.toLocaleString()]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"i-ph:clock"}),new Date(t.updated_at).toLocaleDateString()]})]})]})}const Xet=["node_modules/**",".git/**",".github/**",".vscode/**","dist/**","build/**",".next/**","coverage/**",".cache/**",".idea/**","**/*.log","**/.DS_Store","**/npm-debug.log*","**/yarn-debug.log*","**/yarn-error.log*","**/*lock.json","**/*lock.yaml"],Zet=ZO().add(Xet),Jet=100*1024,Qet=500*1024;function ett({importChat:t,className:e}){const{ready:n,gitClone:r}=Vet(),[i,s]=A.useState(!1),[o,a]=A.useState(!1),l=async c=>{if(n){s(!0);try{const{workdir:u,data:h}=await r(c);if(t){const d=Object.keys(h).filter(S=>!Zet.ignores(S)),f=new TextDecoder("utf-8");let m=0;const g=[],b=[];for(const S of d){const{data:E,encoding:k}=h[S];if(E instanceof Uint8Array&&!S.match(/\.(txt|md|astro|mjs|js|jsx|ts|tsx|json|html|css|scss|less|yml|yaml|xml|svg)$/i)){g.push(S);continue}try{const _=k==="utf8"?E:E instanceof Uint8Array?f.decode(E):"";if(!_)continue;const L=new TextEncoder().encode(_).length;if(L>Jet){g.push(`${S} (too large: ${Math.round(L/1024)}KB)`);continue}if(m+L>Qet){g.push(`${S} (would exceed total size limit)`);continue}m+=L,b.push({path:S,content:_})}catch(_){g.push(`${S} (error: ${_.message})`)}}const y=await Eie(b),v=kie(y),w=[{role:"assistant",content:`Cloning the repo ${c} into ${u}
${g.length>0?`
Skipped files (${g.length}):
${g.map(S=>`- ${S}`).join(`
`)}`:""}

<boltArtifact id="imported-files" title="Git Cloned Files" type="bundled">
${b.map(S=>`<boltAction type="file" filePath="${S.path}">
${Cie(S.content)}
</boltAction>`).join(`
`)}
</boltArtifact>`,id:C1(),createdAt:new Date}];v&&w.push(v),await t(`Git Project:${c.split("/").slice(-1)[0]}`,w)}}catch(u){console.error("Error during import:",u),He.error("Failed to import repository")}finally{s(!1)}}};return p.jsxs(p.Fragment,{children:[p.jsxs(o5,{onClick:()=>a(!0),title:"Clone a Git Repo",variant:"outline",size:"lg",className:Ae("gap-2 bg-[#F5F5F5] dark:bg-[#252525]","text-bolt-elements-textPrimary dark:text-white","hover:bg-[#E5E5E5] dark:hover:bg-[#333333]","border-[#E5E5E5] dark:border-[#333333]","h-10 px-4 py-2 min-w-[120px] justify-center","transition-all duration-200 ease-in-out",e),disabled:!n||i,children:[p.jsx("span",{className:"i-ph:git-branch w-4 h-4"}),"Clone a Git Repo"]}),p.jsx(qet,{isOpen:o,onClose:()=>a(!1),onSelect:l}),i&&p.jsx(Wet,{message:"Please wait while we clone the repository..."})]})}const ttt=({files:t,imageDataList:e,onRemove:n})=>!t||t.length===0?null:p.jsx("div",{className:"flex flex-row overflow-x-auto -mt-2",children:t.map((r,i)=>p.jsx("div",{className:"mr-2 relative",children:e[i]&&p.jsxs("div",{className:"relative pt-4 pr-4",children:[p.jsx("img",{src:e[i],alt:r.name,className:"max-h-20"}),p.jsx("button",{onClick:()=>n(i),className:"absolute top-1 right-1 z-10 bg-black rounded-full w-5 h-5 shadow-md hover:bg-gray-900 transition-colors flex items-center justify-center",children:p.jsx("div",{className:"i-ph:x w-3 h-3 text-gray-200"})})]})},r.name+r.size))}),ntt=({isListening:t,onStart:e,onStop:n,disabled:r})=>p.jsx(gi,{title:t?"Stop listening":"Start speech recognition",disabled:r,className:Ae("transition-all",{"text-bolt-elements-item-contentAccent":t}),onClick:t?n:e,children:t?p.jsx("div",{className:"i-ph:microphone-slash text-xl"}):p.jsx("div",{className:"i-ph:microphone text-xl"})}),gH=typeof localStorage<"u"?localStorage.getItem("supabase_connection"):null,bH=typeof localStorage<"u"?localStorage.getItem("supabaseCredentials"):null,Hm=gH?JSON.parse(gH):{user:null,token:"",stats:void 0,selectedProjectId:void 0,isConnected:!1,project:void 0};if(bH&&!Hm.credentials)try{Hm.credentials=JSON.parse(bH)}catch(t){console.error("Failed to parse saved credentials:",t)}const Yy=qn(Hm);Hm.token&&!Hm.stats&&FN(Hm.token).catch(console.error);const t3=qn(!1),MN=qn(!1),jN=qn(!1);function Wu(t){const e=Yy.get();if(t.user!==void 0||t.token!==void 0){const r=t.user!==void 0?t.user:e.user,i=t.token!==void 0?t.token:e.token;t.isConnected=!!(r&&i)}if(t.selectedProjectId!==void 0)if(t.selectedProjectId&&e.stats?.projects){const r=e.stats.projects.find(i=>i.id===t.selectedProjectId);r?t.project=r:t.project={id:t.selectedProjectId,name:`Project ${t.selectedProjectId.substring(0,8)}...`,region:"unknown",organization_id:"",status:"active",created_at:new Date().toISOString()}}else t.selectedProjectId===""&&(t.project=void 0,t.credentials=void 0);const n={...e,...t};Yy.set(n),t.user||t.token||t.selectedProjectId!==void 0||t.credentials?(localStorage.setItem("supabase_connection",JSON.stringify(n)),n.credentials?localStorage.setItem("supabaseCredentials",JSON.stringify(n.credentials)):localStorage.removeItem("supabaseCredentials")):(localStorage.removeItem("supabase_connection"),localStorage.removeItem("supabaseCredentials"))}async function FN(t){MN.set(!0);try{const e=await fetch("/api/supabase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})});if(!e.ok)throw new Error("Failed to fetch projects");const n=await e.json();Wu({user:n.user,stats:n.stats})}catch(e){throw console.error("Failed to fetch Supabase stats:",e),e}finally{MN.set(!1)}}async function n3(t,e){jN.set(!0);try{const n=await fetch("/api/supabase/variables",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:t,token:e})});if(!n.ok)throw new Error("Failed to fetch API keys");const s=(await n.json()).apiKeys.find(o=>o.name==="anon"||o.name==="public");if(s){const o=`https://${t}.supabase.co`;return Wu({credentials:{anonKey:s.api_key,supabaseUrl:o}}),{anonKey:s.api_key,supabaseUrl:o}}return null}catch(n){throw console.error("Failed to fetch project API keys:",n),n}finally{jN.set(!1)}}function rtt(){const t=Ot(Yy),e=Ot(t3),n=Ot(MN),r=Ot(jN),[i,s]=A.useState(!1),[o,a]=A.useState(!1);return A.useEffect(()=>{const d=localStorage.getItem("supabase_connection"),f=localStorage.getItem("supabaseCredentials");if(d){const m=JSON.parse(d);f&&!m.credentials&&(m.credentials=JSON.parse(f)),Wu(m),m.token&&m.selectedProjectId&&!m.credentials&&n3(m.selectedProjectId,m.token).catch(console.error)}},[]),{connection:t,connecting:e,fetchingStats:n,fetchingApiKeys:r,isProjectsExpanded:i,setIsProjectsExpanded:s,isDropdownOpen:o,setIsDropdownOpen:a,handleConnect:async()=>{t3.set(!0);try{const d=t.token.trim(),f=await fetch("/api/supabase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:d})}),m=await f.json();if(!f.ok)throw new Error(m.error||"Failed to connect");return Wu({user:m.user,token:t.token,stats:m.stats}),He.success("Successfully connected to Supabase"),s(!0),!0}catch(d){return console.error("Connection error:",d),He.error(d instanceof Error?d.message:"Failed to connect to Supabase"),Wu({user:null,token:""}),!1}finally{t3.set(!1)}},handleDisconnect:()=>{Wu({user:null,token:""}),He.success("Disconnected from Supabase"),a(!1)},selectProject:async d=>{const f=Yy.get();let m;if(d&&f.stats?.projects&&(m=f.stats.projects.find(g=>g.id===d)),Wu({selectedProjectId:d,project:m}),d&&f.token)try{await n3(d,f.token),He.success("Project selected successfully")}catch(g){console.error("Failed to fetch API keys:",g),He.error("Selected project but failed to fetch API keys")}else He.success("Project selected successfully");a(!1)},handleCreateProject:async()=>{window.open("https://app.supabase.com/new/new-project","_blank")},updateToken:d=>Wu({...t,token:d}),isConnected:!!(t.user&&t.token),fetchProjectApiKeys:d=>t.token?n3(d,t.token):Promise.reject(new Error("No token available"))}}function itt(){const{connection:t,connecting:e,fetchingStats:n,isProjectsExpanded:r,setIsProjectsExpanded:i,isDropdownOpen:s,setIsDropdownOpen:o,handleConnect:a,handleDisconnect:l,selectProject:c,handleCreateProject:u,updateToken:h,isConnected:d,fetchProjectApiKeys:f}=rtt(),m=Ot(Vo);return A.useEffect(()=>{const g=()=>{o(!0)};return document.addEventListener("open-supabase-connection",g),()=>{document.removeEventListener("open-supabase-connection",g)}},[o]),A.useEffect(()=>{if(d&&m){const g=localStorage.getItem(`supabase-project-${m}`);!g&&t.selectedProjectId?localStorage.setItem(`supabase-project-${m}`,t.selectedProjectId):g&&g!==t.selectedProjectId&&c(g)}},[d,m]),A.useEffect(()=>{m&&t.selectedProjectId?localStorage.setItem(`supabase-project-${m}`,t.selectedProjectId):m&&!t.selectedProjectId&&localStorage.removeItem(`supabase-project-${m}`)},[m,t.selectedProjectId]),A.useEffect(()=>{d&&t.token&&FN(t.token).catch(console.error)},[d,t.token]),A.useEffect(()=>{d&&t.selectedProjectId&&t.token&&!t.credentials&&f(t.selectedProjectId).catch(console.error)},[d,t.selectedProjectId,t.token,t.credentials]),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"flex border border-bolt-elements-borderColor rounded-md overflow-hidden mr-2 text-sm",children:p.jsxs(stt,{active:!0,disabled:e,onClick:()=>o(!s),className:"hover:bg-bolt-elements-item-backgroundActive !text-white flex items-center gap-2",children:[p.jsx("img",{className:"w-4 h-4",height:"20",width:"20",crossOrigin:"anonymous",src:"https://cdn.simpleicons.org/supabase"}),d&&t.project&&p.jsx("span",{className:"ml-1 text-xs max-w-[100px] truncate",children:t.project.name})]})}),p.jsx(xo,{open:s,onOpenChange:o,children:s&&p.jsx(df,{className:"max-w-[520px] p-6",children:d?p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{className:"flex items-center justify-between mb-2",children:p.jsxs(Zc,{children:[p.jsx("img",{className:"w-5 h-5",height:"24",width:"24",crossOrigin:"anonymous",src:"https://cdn.simpleicons.org/supabase"}),"Supabase Connection"]})}),p.jsx("div",{className:"flex items-center gap-4 p-3 bg-[#F8F8F8] dark:bg-[#1A1A1A] rounded-lg",children:p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:t.user?.email}),p.jsxs("p",{className:"text-xs text-bolt-elements-textSecondary",children:["Role: ",t.user?.role]})]})}),n?p.jsxs("div",{className:"flex items-center gap-2 text-sm text-bolt-elements-textSecondary",children:[p.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}),"Fetching projects..."]}):p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsxs("button",{onClick:()=>i(!r),className:"bg-transparent text-left text-sm font-medium text-bolt-elements-textPrimary flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:database w-4 h-4"}),"Your Projects (",t.stats?.totalProjects||0,")",p.jsx("div",{className:Ae("i-ph:caret-down w-4 h-4 transition-transform",r?"rotate-180":"")})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("button",{onClick:()=>FN(t.token),className:"px-2 py-1 rounded-md text-xs bg-[#F0F0F0] dark:bg-[#252525] text-bolt-elements-textSecondary hover:bg-[#E5E5E5] dark:hover:bg-[#333333] flex items-center gap-1",title:"Refresh projects list",children:[p.jsx("div",{className:"i-ph:arrows-clockwise w-3 h-3"}),"Refresh"]}),p.jsxs("button",{onClick:()=>u(),className:"px-2 py-1 rounded-md text-xs bg-[#3ECF8E] text-white hover:bg-[#3BBF84] flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:plus w-3 h-3"}),"New Project"]})]})]}),r&&p.jsxs(p.Fragment,{children:[!t.selectedProjectId&&p.jsx("div",{className:"mb-2 p-3 bg-[#F8F8F8] dark:bg-[#1A1A1A] rounded-lg text-sm text-bolt-elements-textSecondary",children:"Select a project or create a new one for this chat"}),t.stats?.projects?.length?p.jsx("div",{className:"grid gap-2 max-h-60 overflow-y-auto",children:t.stats.projects.map(g=>p.jsx("div",{className:"block p-3 rounded-lg border border-[#E5E5E5] dark:border-[#1A1A1A] hover:border-[#3ECF8E] dark:hover:border-[#3ECF8E] transition-colors",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsxs("h5",{className:"text-sm font-medium text-bolt-elements-textPrimary flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:database w-3 h-3 text-[#3ECF8E]"}),g.name]}),p.jsx("div",{className:"text-xs text-bolt-elements-textSecondary mt-1",children:g.region})]}),p.jsx("button",{onClick:()=>c(g.id),className:Ae("px-3 py-1 rounded-md text-xs",t.selectedProjectId===g.id?"bg-[#3ECF8E] text-white":"bg-[#F0F0F0] dark:bg-[#252525] text-bolt-elements-textSecondary hover:bg-[#3ECF8E] hover:text-white"),children:t.selectedProjectId===g.id?p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:check w-3 h-3"}),"Selected"]}):"Select"})]})},g.id))}):p.jsxs("div",{className:"text-sm text-bolt-elements-textSecondary flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:info w-4 h-4"}),"No projects found"]})]})]}),p.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[p.jsx(gh,{asChild:!0,children:p.jsx(Yd,{type:"secondary",children:"Close"})}),p.jsxs(Yd,{type:"danger",onClick:l,children:[p.jsx("div",{className:"i-ph:plug-x w-4 h-4"}),"Disconnect"]})]})]}):p.jsxs("div",{className:"space-y-4",children:[p.jsxs(Zc,{children:[p.jsx("img",{className:"w-5 h-5",height:"24",width:"24",crossOrigin:"anonymous",src:"https://cdn.simpleicons.org/supabase"}),"Connect to Supabase"]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary mb-2",children:"Access Token"}),p.jsx("input",{type:"password",value:t.token,onChange:g=>h(g.target.value),disabled:e,placeholder:"Enter your Supabase access token",className:Ae("w-full px-3 py-2 rounded-lg text-sm","bg-[#F8F8F8] dark:bg-[#1A1A1A]","border border-[#E5E5E5] dark:border-[#333333]","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-1 focus:ring-[#3ECF8E]","disabled:opacity-50")}),p.jsx("div",{className:"mt-2 text-sm text-bolt-elements-textSecondary",children:p.jsxs("a",{href:"https://app.supabase.com/account/tokens",target:"_blank",rel:"noopener noreferrer",className:"text-[#3ECF8E] hover:underline inline-flex items-center gap-1",children:["Get your token",p.jsx("div",{className:"i-ph:arrow-square-out w-4 h-4"})]})})]}),p.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[p.jsx(gh,{asChild:!0,children:p.jsx(Yd,{type:"secondary",children:"Cancel"})}),p.jsx("button",{onClick:a,disabled:e||!t.token,className:Ae("px-4 py-2 rounded-lg text-sm flex items-center gap-2","bg-[#3ECF8E] text-white","hover:bg-[#3BBF84]","disabled:opacity-50 disabled:cursor-not-allowed"),children:e?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:spinner-gap animate-spin"}),"Connecting..."]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:plug-charging w-4 h-4"}),"Connect"]})})]})]})})})]})}function stt({active:t=!1,disabled:e=!1,children:n,onClick:r,className:i}){return p.jsx("button",{className:Ae("flex items-center p-1.5",{"bg-bolt-elements-item-backgroundDefault hover:bg-bolt-elements-item-backgroundActive text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary":!t,"bg-bolt-elements-item-backgroundDefault text-bolt-elements-item-contentAccent":t&&!e,"bg-bolt-elements-item-backgroundDefault text-alpha-gray-20 dark:text-alpha-white-20 cursor-not-allowed":e},i),onClick:r,children:n})}function ott(){const t=Ot(Yy),[e,n]=A.useState(!1);if(A.useEffect(()=>{n(!!t.selectedProjectId&&!t.credentials)},[t.selectedProjectId,t.credentials]),!e)return null;const r=()=>{const i=new CustomEvent("open-supabase-connection");document.dispatchEvent(i)};return p.jsxs("div",{className:Ae("flex items-center gap-3 p-3 mb-4 rounded-lg border","bg-amber-50 dark:bg-amber-950 border-amber-200 dark:border-amber-800"),children:[p.jsx("div",{className:"i-ph:warning-circle text-amber-500 dark:text-amber-400 w-5 h-5 flex-shrink-0"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h4",{className:"text-sm font-medium text-amber-800 dark:text-amber-300",children:"Supabase Connection Issue"}),p.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400 mt-1",children:"Your Supabase project is selected, but API credentials are missing. Please reconnect to fetch the API keys."})]}),p.jsx("button",{onClick:r,className:"px-3 py-1.5 text-xs font-medium rounded-md bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-300 hover:bg-amber-200 dark:hover:bg-amber-800 transition-colors",children:"Reconnect"})]})}const att=({setUploadedFiles:t,setImageDataList:e,uploadedFiles:n,imageDataList:r})=>(A.useEffect(()=>(t&&e&&(window.__BOLT_SET_UPLOADED_FILES__=t,window.__BOLT_SET_IMAGE_DATA_LIST__=e,window.__BOLT_UPLOADED_FILES__=n,window.__BOLT_IMAGE_DATA_LIST__=r),()=>{delete window.__BOLT_SET_UPLOADED_FILES__,delete window.__BOLT_SET_IMAGE_DATA_LIST__,delete window.__BOLT_UPLOADED_FILES__,delete window.__BOLT_IMAGE_DATA_LIST__}),[t,e,n,r]),null),ltt=({template:t})=>p.jsx("a",{href:`/git?url=https://github.com/${t.githubRepo}.git`,"data-state":"closed","data-discover":"true",className:"items-center justify-center",children:p.jsx("div",{className:`inline-block ${t.icon} w-8 h-8 text-4xl transition-theme opacity-25 hover:opacity-100 hover:text-blue-500 dark:text-white dark:opacity-50 dark:hover:opacity-100 dark:hover:text-blue-400 transition-all`,title:t.label})}),ctt=()=>(ut.useEffect(()=>{console.log("Available templates:",M2.map(t=>({name:t.name,icon:t.icon})))},[]),p.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p.jsx("span",{className:"text-sm text-gray-500",children:"or start a blank app with your favorite stack"}),p.jsx("div",{className:"flex justify-center",children:p.jsx("div",{className:"flex w-70 flex-wrap items-center justify-center gap-4",children:M2.map(t=>p.jsx(ltt,{template:t},t.name))})})]}));function utt({alert:t,clearAlert:e,postMessage:n}){const{description:r,content:i,source:s}=t,o=s==="preview",a=o?"Preview Error":"Terminal Error",l=o?"We encountered an error while running the preview. Would you like Ada to analyze and help resolve this issue?":"We encountered an error while running terminal commands. Would you like Ada to analyze and help resolve this issue?";return p.jsx(Ql,{children:p.jsx(at.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"rounded-lg border border-bolt-elements-borderColor bg-bolt-elements-background-depth-2 p-4 mb-2",children:p.jsxs("div",{className:"flex items-start",children:[p.jsx(at.div,{className:"flex-shrink-0",initial:{scale:0},animate:{scale:1},transition:{delay:.2},children:p.jsx("div",{className:"i-ph:warning-duotone text-xl text-bolt-elements-button-danger-text"})}),p.jsxs("div",{className:"ml-3 flex-1",children:[p.jsx(at.h3,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-sm font-medium text-bolt-elements-textPrimary",children:a}),p.jsxs(at.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"mt-2 text-sm text-bolt-elements-textSecondary",children:[p.jsx("p",{children:l}),r&&p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary p-2 bg-bolt-elements-background-depth-3 rounded mt-4 mb-4",children:["Error: ",r]})]}),p.jsx(at.div,{className:"mt-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:p.jsxs("div",{className:Ae(" flex gap-2"),children:[p.jsxs("button",{onClick:()=>n(`*Fix this ${o?"preview":"terminal"} error* 
\`\`\`${o?"js":"sh"}
${i}
\`\`\`
`),className:Ae("px-2 py-1.5 rounded-md text-sm font-medium","bg-bolt-elements-button-primary-background","hover:bg-bolt-elements-button-primary-backgroundHover","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-bolt-elements-button-danger-background","text-bolt-elements-button-primary-text","flex items-center gap-1.5"),children:[p.jsx("div",{className:"i-ph:chat-circle-duotone"}),"Ask Ada"]}),p.jsx("button",{onClick:e,className:Ae("px-2 py-1.5 rounded-md text-sm font-medium","bg-bolt-elements-button-secondary-background","hover:bg-bolt-elements-button-secondary-backgroundHover","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-bolt-elements-button-secondary-background","text-bolt-elements-button-secondary-text"),children:"Dismiss"})]})})]})]})})})}function htt({data:t}){const[e,n]=ut.useState([]),[r,i]=A.useState(!1);return ut.useEffect(()=>{if(!t||t.length==0){n([]);return}const s=new Map;t.forEach(a=>{const l=s.get(a.label);l&&l.status==="complete"||s.set(a.label,a)});const o=Array.from(s.values());o.sort((a,l)=>a.order-l.order),n(o)},[t]),e.length===0?p.jsx(p.Fragment,{}):p.jsx(Ql,{children:p.jsx("div",{className:Ae("bg-bolt-elements-background-depth-2","border border-bolt-elements-borderColor","shadow-lg rounded-lg  relative w-full max-w-chat mx-auto z-prompt","p-1"),children:p.jsxs("div",{className:Ae("bg-bolt-elements-item-backgroundAccent","p-1 rounded-lg text-bolt-elements-item-contentAccent","flex "),children:[p.jsx("div",{className:"flex-1",children:p.jsx(Ql,{children:r?p.jsx(at.div,{className:"actions",initial:{height:0},animate:{height:"auto"},exit:{height:"0px"},transition:{duration:.15},children:e.map((s,o)=>p.jsx(yH,{progress:s},o))}):p.jsx(yH,{progress:e.slice(-1)[0]})})}),p.jsx(at.button,{initial:{width:0},animate:{width:"auto"},exit:{width:0},transition:{duration:.15,ease:So},className:" p-1 rounded-lg bg-bolt-elements-item-backgroundAccent hover:bg-bolt-elements-artifacts-backgroundHover",onClick:()=>i(s=>!s),children:p.jsx("div",{className:r?"i-ph:caret-up-bold":"i-ph:caret-down-bold"})})]})})})}const yH=({progress:t})=>p.jsxs(at.div,{className:Ae("flex text-sm gap-3"),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:[p.jsx("div",{className:"flex items-center gap-1.5 ",children:p.jsx("div",{children:t.status==="in-progress"?p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg"}):t.status==="complete"?p.jsx("div",{className:"i-ph:check"}):null})}),t.message]});function dtt(){if(typeof window<"u")try{const t=localStorage.getItem("userData");if(t){const e=JSON.parse(t);Bw({username:e.name||"",bio:e.email||"",avatar:""})}}catch(t){console.error("Error initializing profile from auth:",t)}}typeof window<"u"&&setTimeout(()=>{dtt()},0);const ftt=76,ptt=ut.forwardRef(({textareaRef:t,messageRef:e,scrollRef:n,showChat:r=!0,chatStarted:i=!1,isStreaming:s=!1,onStreamingChange:o,model:a,setModel:l,provider:c,setProvider:u,providerList:h,input:d="",enhancingPrompt:f,handleInputChange:m,enhancePrompt:g,sendMessage:b,handleStop:y,importChat:v,exportChat:x,uploadedFiles:w=[],setUploadedFiles:S,imageDataList:E=[],setImageDataList:k,messages:_,actionAlert:L,clearAlert:R,data:C,actionRunner:P},O)=>{const N=i?400:200,H={Anthropic:"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
"},[Q,X]=A.useState(H),[J,j]=A.useState([]),[F,Y]=A.useState(!1),[M,D]=A.useState(!1),[V,W]=A.useState(null),[te,ee]=A.useState(""),[K,he]=A.useState("all"),[be,Se]=A.useState([]);A.useEffect(()=>{if(C){const $=C.filter(G=>typeof G=="object"&&G.type==="progress");Se($)}},[C]),A.useEffect(()=>{console.log(te)},[te]),A.useEffect(()=>{o?.(s)},[s,o]),A.useEffect(()=>{if(typeof window<"u"&&("SpeechRecognition"in window||"webkitSpeechRecognition"in window)){const $=window.SpeechRecognition||window.webkitSpeechRecognition,G=new $;G.continuous=!0,G.interimResults=!0,G.onresult=ue=>{const Ne=Array.from(ue.results).map(De=>De[0]).map(De=>De.transcript).join("");ee(Ne),m&&m({target:{value:Ne}})},G.onerror=ue=>{console.error("Speech recognition error:",ue.error),D(!1)},W(G)}},[]),A.useEffect(()=>{const $=h?.find(G=>G.name==="Anthropic");$&&u&&u($),l&&l("claude-3-7-sonnet-20250219")},[h,u,l]),A.useEffect(()=>{X(H),typeof window<"u"&&(Zr.set("apiKeys",JSON.stringify(H),{path:"/"}),he("all"),fetch("/api/models").then($=>$.json()).then($=>{j($.modelList)}).catch($=>{console.error("Error fetching model list:",$)}).finally(()=>{he(void 0)}))},[h,c]);const Ce=()=>{V&&(V.start(),D(!0))},ke=()=>{V&&(V.stop(),D(!1))},[q,pe]=A.useState(null),ne=!!q;A.useEffect(()=>{try{const $=localStorage.getItem("userData");$&&pe(JSON.parse($))}catch($){console.error("Error checking authentication:",$)}},[]);const{monthlyLimit:oe,showLoginPrompt:ae,showSubscriptionPlans:me,incrementMessageCount:Pe,resetMessageCount:Re,closeLoginPrompt:we,closeSubscriptionPlans:$e,canSendMessage:Fe}=uue(ne,q);yz(ne,q);const Be=me,Ee=()=>{$e()},qe=($,G)=>{if(!Fe){Pe();return}Pe()&&b&&(b($,G),V&&(V.abort(),ee(""),D(!1),m&&m({target:{value:""}})))},Xe=()=>{const $=document.createElement("input");$.type="file",$.accept="image/*",$.onchange=async G=>{const ue=G.target.files?.[0];if(ue){const Ne=new FileReader;Ne.onload=De=>{const Ve=De.target?.result;S?.([...w,ue]),k?.([...E,Ve])},Ne.readAsDataURL(ue)}},$.click()},et=async $=>{const G=$.clipboardData?.items;if(G){for(const ue of G)if(ue.type.startsWith("image/")){$.preventDefault();const Ne=ue.getAsFile();if(Ne){const De=new FileReader;De.onload=Ve=>{const Ft=Ve.target?.result;S?.([...w,Ne]),k?.([...E,Ft])},De.readAsDataURL(Ne)}break}}},re=p.jsxs("div",{ref:O,className:Ae(yb.BaseChat,"relative flex h-full w-full overflow-hidden"),"data-chat-visible":r,children:[p.jsx(Bu,{children:()=>p.jsx(TFe,{})}),p.jsx(rL,{isOpen:Be,onClose:Ee}),ae&&p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:p.jsxs("div",{className:"bg-[#0d1117] rounded-lg p-8 w-full max-w-md relative border border-gray-800",children:[p.jsx("button",{onClick:we,className:"absolute top-2 right-2 text-gray-400 hover:text-white",children:p.jsx("div",{className:"i-ph:x text-xl"})}),p.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Message Limit Reached"}),p.jsx("p",{className:"text-gray-300 mb-6",children:ne?`You've reached the limit of ${oe} messages for your current plan (${q?.plan||"Free"}).
                  Upgrade your plan to send more messages this month.`:`You've reached the limit of messages for non-registered users. 
                  Sign in or create an account to continue using Ada without limitations.`}),p.jsxs("div",{className:"flex flex-col space-y-3",children:[p.jsx("button",{onClick:()=>window.location.href="/login",className:"w-full bg-[#1a2b4c] hover:bg-[#1f3461] text-white py-2 rounded-md",children:"Sign In"}),p.jsx("button",{onClick:()=>window.location.href="/register",className:"w-full bg-transparent hover:bg-gray-800 text-white border border-gray-700 py-2 rounded-md",children:"Create Account"}),p.jsx("button",{onClick:we,className:"w-full bg-transparent text-gray-400 hover:text-white py-2",children:"Continue with Limited Access"})]})]})}),p.jsxs("div",{ref:n,className:"flex flex-col lg:flex-row overflow-y-auto w-full h-full",children:[p.jsxs("div",{className:Ae(yb.Chat,"flex flex-col flex-grow lg:min-w-[var(--chat-min-width)] h-full"),children:[!i&&p.jsxs("div",{id:"intro",className:"mt-[16vh] max-w-chat mx-auto text-center px-4 lg:px-0",children:[p.jsx("h1",{className:"text-3xl lg:text-6xl font-bold text-bolt-elements-textPrimary mb-4 animate-fade-in",children:"Create your world"}),p.jsx("p",{className:"text-md lg:text-xl mb-8 text-bolt-elements-textSecondary animate-fade-in animation-delay-200",children:"Bring ideas to life in seconds or get help on existing projects."})]}),p.jsxs("div",{className:Ae("pt-6 px-2 sm:px-6",{"h-full flex flex-col":i}),ref:n,children:[p.jsx(Bu,{children:()=>i?p.jsx(Zqe,{ref:e,className:"flex flex-col w-full flex-1 max-w-chat pb-6 mx-auto z-1",messages:_,isStreaming:s}):null}),p.jsxs("div",{className:Ae("flex flex-col gap-4 w-full max-w-chat mx-auto z-prompt mb-6",{"sticky bottom-2":i}),children:[p.jsxs("div",{className:"bg-bolt-elements-background-depth-2",children:[L&&p.jsx(utt,{alert:L,clearAlert:()=>R?.(),postMessage:$=>{b?.({},$),R?.()}}),p.jsx(ott,{})]}),be&&p.jsx(htt,{data:be}),p.jsxs("div",{className:Ae("bg-bolt-elements-background-depth-2 p-3 rounded-lg border border-bolt-elements-borderColor relative w-full max-w-chat mx-auto z-prompt"),children:[p.jsxs("svg",{className:Ae(yb.PromptEffectContainer),children:[p.jsxs("defs",{children:[p.jsxs("linearGradient",{id:"line-gradient",x1:"20%",y1:"0%",x2:"-14%",y2:"10%",gradientUnits:"userSpaceOnUse",gradientTransform:"rotate(-45)",children:[p.jsx("stop",{offset:"0%",stopColor:"#1E40AF",stopOpacity:"0%"})," ",p.jsx("stop",{offset:"40%",stopColor:"#1E40AF",stopOpacity:"80%"}),p.jsx("stop",{offset:"50%",stopColor:"#3B82F6",stopOpacity:"80%"})," ",p.jsx("stop",{offset:"100%",stopColor:"#3B82F6",stopOpacity:"0%"})]}),p.jsxs("linearGradient",{id:"shine-gradient",children:[p.jsx("stop",{offset:"0%",stopColor:"#60A5FA",stopOpacity:"0%"})," ",p.jsx("stop",{offset:"40%",stopColor:"#60A5FA",stopOpacity:"80%"}),p.jsx("stop",{offset:"50%",stopColor:"#60A5FA",stopOpacity:"80%"}),p.jsx("stop",{offset:"100%",stopColor:"#60A5FA",stopOpacity:"0%"})]})]}),p.jsx("rect",{className:Ae(yb.PromptEffectLine),pathLength:"100",strokeLinecap:"round"}),p.jsx("rect",{className:Ae(yb.PromptShine),x:"48",y:"24",width:"70",height:"1"})]}),p.jsx(ttt,{files:w,imageDataList:E,onRemove:$=>{S?.(w.filter((G,ue)=>ue!==$)),k?.(E.filter((G,ue)=>ue!==$))}}),p.jsx(Bu,{children:()=>p.jsx(att,{setUploadedFiles:S,setImageDataList:k,uploadedFiles:w,imageDataList:E})}),p.jsxs("div",{className:Ae("relative shadow-xs border border-bolt-elements-borderColor backdrop-blur rounded-lg"),children:[p.jsx("textarea",{ref:t,className:Ae("w-full pl-4 pt-4 pr-16 outline-none resize-none text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary bg-transparent text-sm","transition-all duration-200","hover:border-bolt-elements-focus"),onDragEnter:$=>{$.preventDefault(),$.currentTarget.style.border="2px solid #1488fc"},onDragOver:$=>{$.preventDefault(),$.currentTarget.style.border="2px solid #1488fc"},onDragLeave:$=>{$.preventDefault(),$.currentTarget.style.border="1px solid var(--bolt-elements-borderColor)"},onDrop:$=>{$.preventDefault(),$.currentTarget.style.border="1px solid var(--bolt-elements-borderColor)",Array.from($.dataTransfer.files).forEach(ue=>{if(ue.type.startsWith("image/")){const Ne=new FileReader;Ne.onload=De=>{const Ve=De.target?.result;S?.([...w,ue]),k?.([...E,Ve])},Ne.readAsDataURL(ue)}})},onKeyDown:$=>{if($.key==="Enter"){if($.shiftKey)return;if($.preventDefault(),s){y?.();return}if($.nativeEvent.isComposing)return;qe?.($)}},value:d,onChange:$=>{m?.($)},onPaste:et,style:{minHeight:ftt,maxHeight:N},placeholder:"How can Ada help you today?",translate:"no"}),p.jsx(Bu,{children:()=>p.jsx(Qqe,{show:d.length>0||s||w.length>0,isStreaming:s,disabled:!h||h.length===0,onClick:$=>{if(s){y?.();return}(d.length>0||w.length>0)&&qe?.($)}})}),p.jsxs("div",{className:"flex justify-between items-center text-sm p-4 pt-2",children:[p.jsxs("div",{className:"flex gap-1 items-center",children:[p.jsx(gi,{title:"Upload file",className:"transition-all",onClick:()=>Xe(),children:p.jsx("div",{className:"i-ph:paperclip text-xl"})}),p.jsx(gi,{title:"Enhance prompt",disabled:d.length===0||f,className:Ae("transition-all",f?"opacity-100":""),onClick:()=>{g?.(),He.success("Prompt enhanced!")},children:f?p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg text-bolt-elements-loader-progress text-xl animate-spin"}):p.jsx("div",{className:"i-bolt:stars text-xl"})}),p.jsx(ntt,{isListening:M,onStart:Ce,onStop:ke,disabled:s}),i&&p.jsx(Bu,{children:()=>{const $=localStorage.getItem("userData");let G="free";if($)try{G=JSON.parse($).plan?.toLowerCase()||"free"}catch(ue){console.error("Error parsing user data:",ue)}return G!=="free"?p.jsx(sKe,{exportChat:x}):null}}),p.jsx(itt,{})]}),d.length>3?p.jsxs("div",{className:"text-xs text-bolt-elements-textTertiary",children:["Use ",p.jsx("kbd",{className:"kdb px-1.5 py-0.5 rounded bg-bolt-elements-background-depth-2",children:"Shift"})," ","+ ",p.jsx("kbd",{className:"kdb px-1.5 py-0.5 rounded bg-bolt-elements-background-depth-2",children:"Return"})," ","a new line"]}):null]})]})]})]})]}),p.jsxs("div",{className:"flex flex-col justify-center gap-5",children:[!i&&p.jsxs("div",{className:"flex justify-center gap-2",children:[MKe(v),p.jsx(ett,{importChat:v})]}),!i&&FKe(($,G)=>{if(s){y?.();return}qe?.($,G)}),!i&&p.jsx(ctt,{})]})]}),p.jsx(Bu,{children:()=>p.jsx(Iqe,{actionRunner:P??{},chatStarted:i,isStreaming:s})})]}),p.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:ne?p.jsxs("button",{onClick:()=>{localStorage.removeItem("userData"),pe(null),Re(),localStorage.removeItem("messageCount"),localStorage.removeItem("bolt_profile"),window.location.href="/"},className:"bg-[#1a2b4c] hover:bg-[#1f3461] text-white px-4 py-2 rounded-md flex items-center gap-2 shadow-lg",children:[p.jsx("div",{className:"i-ph:arrow-right text-sm"}),p.jsx("span",{children:"Logout"})]}):p.jsxs("button",{onClick:()=>window.location.href="/login",className:"bg-[#1a2b4c] hover:bg-[#1f3461] text-white px-4 py-2 rounded-md flex items-center gap-2 shadow-lg",children:[p.jsx("div",{className:"i-ph:sign-in text-sm"}),p.jsx("span",{children:"Login"})]})})]});return p.jsx(cR,{delayDuration:200,children:re})});var uoe="vercel.ai.error",mtt=Symbol.for(uoe),hoe,gtt=class doe extends Error{constructor({name:e,message:n,cause:r}){super(n),this[hoe]=!0,this.name=e,this.cause=r}static isInstance(e){return doe.hasMarker(e,uoe)}static hasMarker(e,n){const r=Symbol.for(n);return e!=null&&typeof e=="object"&&r in e&&typeof e[r]=="boolean"&&e[r]===!0}};hoe=mtt;var Pg=gtt;function foe(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var poe="AI_InvalidArgumentError",moe=`vercel.ai.error.${poe}`,btt=Symbol.for(moe),goe,ytt=class extends Pg{constructor({message:t,cause:e,argument:n}){super({name:poe,message:t,cause:e}),this[goe]=!0,this.argument=n}static isInstance(t){return Pg.hasMarker(t,moe)}};goe=btt;var boe="AI_JSONParseError",yoe=`vercel.ai.error.${boe}`,vtt=Symbol.for(yoe),voe,vH=class extends Pg{constructor({text:t,cause:e}){super({name:boe,message:`JSON parsing failed: Text: ${t}.
Error message: ${foe(e)}`,cause:e}),this[voe]=!0,this.text=t}static isInstance(t){return Pg.hasMarker(t,yoe)}};voe=vtt;var xoe="AI_TypeValidationError",_oe=`vercel.ai.error.${xoe}`,xtt=Symbol.for(_oe),woe,_tt=class BN extends Pg{constructor({value:e,cause:n}){super({name:xoe,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${foe(n)}`,cause:n}),this[woe]=!0,this.value=e}static isInstance(e){return Pg.hasMarker(e,_oe)}static wrap({value:e,cause:n}){return BN.isInstance(n)&&n.value===e?n:new BN({value:e,cause:n})}};woe=xtt;var xH=_tt,wtt=({prefix:t,size:e=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const i=Fae(n,e);if(t==null)return i;if(n.includes(r))throw new ytt({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return s=>`${t}${r}${i(s)}`},fD=wtt(),NE=Symbol.for("vercel.ai.validator");function Stt(t){return{[NE]:!0,validate:t}}function Ett(t){return typeof t=="object"&&t!==null&&NE in t&&t[NE]===!0&&"validate"in t}function ktt(t){return Ett(t)?t:Ctt(t)}function Ctt(t){return Stt(e=>{const n=t.safeParse(e);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function Ttt({value:t,schema:e}){const n=ktt(e);try{if(n.validate==null)return{success:!0,value:t};const r=n.validate(t);return r.success?r:{success:!1,error:xH.wrap({value:t,cause:r.error})}}catch(r){return{success:!1,error:xH.wrap({value:t,cause:r})}}}function _H({text:t,schema:e}){try{const n=QN.parse(t);if(e==null)return{success:!0,value:n,rawValue:n};const r=Ttt({value:n,schema:e});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:vH.isInstance(n)?n:new vH({text:t,cause:n})}}}const Att=Symbol("Let zodToJsonSchema decide on which parser to use"),wH={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Ptt=t=>typeof t=="string"?{...wH,name:t}:{...wH,...t},Ntt=t=>{const e=Ptt(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function Soe(t,e,n,r){r?.errorMessages&&n&&(t.errorMessage={...t.errorMessage,[e]:n})}function zn(t,e,n,r,i){t[e]=n,Soe(t,e,r,i)}function Ltt(){return{}}function Rtt(t,e){const n={type:"array"};return t.type?._def&&t.type?._def?.typeName!==vt.ZodAny&&(n.items=On(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&zn(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&zn(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(zn(n,"minItems",t.exactLength.value,t.exactLength.message,e),zn(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function Itt(t,e){const n={type:"integer",format:"int64"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?zn(n,"minimum",r.value,r.message,e):zn(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),zn(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?zn(n,"maximum",r.value,r.message,e):zn(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),zn(n,"maximum",r.value,r.message,e));break;case"multipleOf":zn(n,"multipleOf",r.value,r.message,e);break}return n}function Ott(){return{type:"boolean"}}function Eoe(t,e){return On(t.type._def,e)}const Dtt=(t,e)=>On(t.innerType._def,e);function koe(t,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((i,s)=>koe(t,e,i))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Mtt(t,e)}}const Mtt=(t,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of t.checks)switch(r.kind){case"min":zn(n,"minimum",r.value,r.message,e);break;case"max":zn(n,"maximum",r.value,r.message,e);break}return n};function jtt(t,e){return{...On(t.innerType._def,e),default:t.defaultValue()}}function Ftt(t,e){return e.effectStrategy==="input"?On(t.schema._def,e):{}}function Btt(t){return{type:"string",enum:Array.from(t.values)}}const Utt=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function $tt(t,e){const n=[On(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),On(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(s=>!!s);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const i=[];return n.forEach(s=>{if(Utt(s))i.push(...s.allOf),s.unevaluatedProperties===void 0&&(r=void 0);else{let o=s;if("additionalProperties"in s&&s.additionalProperties===!1){const{additionalProperties:a,...l}=s;o=l}else r=void 0;i.push(o)}}),i.length?{allOf:i,...r}:void 0}function Htt(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}let r3;const ka={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(r3===void 0&&(r3=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),r3),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Coe(t,e){const n={type:"string"};if(t.checks)for(const r of t.checks)switch(r.kind){case"min":zn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e);break;case"max":zn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Ca(n,"email",r.message,e);break;case"format:idn-email":Ca(n,"idn-email",r.message,e);break;case"pattern:zod":hs(n,ka.email,r.message,e);break}break;case"url":Ca(n,"uri",r.message,e);break;case"uuid":Ca(n,"uuid",r.message,e);break;case"regex":hs(n,r.regex,r.message,e);break;case"cuid":hs(n,ka.cuid,r.message,e);break;case"cuid2":hs(n,ka.cuid2,r.message,e);break;case"startsWith":hs(n,RegExp(`^${i3(r.value,e)}`),r.message,e);break;case"endsWith":hs(n,RegExp(`${i3(r.value,e)}$`),r.message,e);break;case"datetime":Ca(n,"date-time",r.message,e);break;case"date":Ca(n,"date",r.message,e);break;case"time":Ca(n,"time",r.message,e);break;case"duration":Ca(n,"duration",r.message,e);break;case"length":zn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e),zn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"includes":{hs(n,RegExp(i3(r.value,e)),r.message,e);break}case"ip":{r.version!=="v6"&&Ca(n,"ipv4",r.message,e),r.version!=="v4"&&Ca(n,"ipv6",r.message,e);break}case"base64url":hs(n,ka.base64url,r.message,e);break;case"jwt":hs(n,ka.jwt,r.message,e);break;case"cidr":{r.version!=="v6"&&hs(n,ka.ipv4Cidr,r.message,e),r.version!=="v4"&&hs(n,ka.ipv6Cidr,r.message,e);break}case"emoji":hs(n,ka.emoji(),r.message,e);break;case"ulid":{hs(n,ka.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Ca(n,"binary",r.message,e);break}case"contentEncoding:base64":{zn(n,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{hs(n,ka.base64,r.message,e);break}}break}case"nanoid":hs(n,ka.nanoid,r.message,e)}return n}function i3(t,e){return e.patternStrategy==="escape"?Vtt(t):t}const ztt=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Vtt(t){let e="";for(let n=0;n<t.length;n++)ztt.has(t[n])||(e+="\\"),e+=t[n];return e}function Ca(t,e,n,r){t.format||t.anyOf?.some(i=>i.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):zn(t,"format",e,n,r)}function hs(t,e,n,r){t.pattern||t.allOf?.some(i=>i.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:SH(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):zn(t,"pattern",SH(e,r),n,r)}function SH(t,e){if(!e.applyRegexFlags||!t.flags)return t.source;const n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},r=n.i?t.source.toLowerCase():t.source;let i="",s=!1,o=!1,a=!1;for(let l=0;l<r.length;l++){if(s){i+=r[l],s=!1;continue}if(n.i){if(o){if(r[l].match(/[a-z]/)){a?(i+=r[l],i+=`${r[l-2]}-${r[l]}`.toUpperCase(),a=!1):r[l+1]==="-"&&r[l+2]?.match(/[a-z]/)?(i+=r[l],a=!0):i+=`${r[l]}${r[l].toUpperCase()}`;continue}}else if(r[l].match(/[a-z]/)){i+=`[${r[l]}${r[l].toUpperCase()}]`;continue}}if(n.m){if(r[l]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(r[l]==="$"){i+=`($|(?=[\r
]))`;continue}}if(n.s&&r[l]==="."){i+=o?`${r[l]}\r
`:`[${r[l]}\r
]`;continue}i+=r[l],r[l]==="\\"?s=!0:o&&r[l]==="]"?o=!1:!o&&r[l]==="["&&(o=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i}function Toe(t,e){if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&t.keyType?._def.typeName===vt.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((r,i)=>({...r,[i]:On(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",i]})??{}}),{}),additionalProperties:!1};const n={type:"object",additionalProperties:On(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return n;if(t.keyType?._def.typeName===vt.ZodString&&t.keyType._def.checks?.length){const{type:r,...i}=Coe(t.keyType._def,e);return{...n,propertyNames:i}}else{if(t.keyType?._def.typeName===vt.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};if(t.keyType?._def.typeName===vt.ZodBranded&&t.keyType._def.type._def.typeName===vt.ZodString&&t.keyType._def.type._def.checks?.length){const{type:r,...i}=Eoe(t.keyType._def,e);return{...n,propertyNames:i}}}return n}function Wtt(t,e){if(e.mapStrategy==="record")return Toe(t,e);const n=On(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=On(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function Gtt(t){const e=t.values,r=Object.keys(t.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),i=Array.from(new Set(r.map(s=>typeof s)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:r}}function qtt(){return{not:{}}}function Ktt(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const LE={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Ytt(t,e){if(e.target==="openApi3")return EH(t,e);const n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(r=>r._def.typeName in LE&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((i,s)=>{const o=LE[s._def.typeName];return o&&!i.includes(o)?[...i,o]:i},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((i,s)=>{const o=typeof s._def.value;switch(o){case"string":case"number":case"boolean":return[...i,o];case"bigint":return[...i,"integer"];case"object":if(s._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(r.length===n.length){const i=r.filter((s,o,a)=>a.indexOf(s)===o);return{type:i.length>1?i:i[0],enum:n.reduce((s,o)=>s.includes(o._def.value)?s:[...s,o._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,i)=>[...r,...i._def.values.filter(s=>!r.includes(s))],[])};return EH(t,e)}const EH=(t,e)=>{const n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,i)=>On(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function Xtt(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:LE[t.innerType._def.typeName],nullable:!0}:{type:[LE[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=On(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=On(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function Ztt(t,e){const n={type:"number"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"int":n.type="integer",Soe(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?zn(n,"minimum",r.value,r.message,e):zn(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),zn(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?zn(n,"maximum",r.value,r.message,e):zn(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),zn(n,"maximum",r.value,r.message,e));break;case"multipleOf":zn(n,"multipleOf",r.value,r.message,e);break}return n}function Jtt(t,e){return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":On(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":On(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function Qtt(t,e){const n=e.target==="openAi",r={type:"object",...Object.entries(t.shape()).reduce((i,[s,o])=>{if(o===void 0||o._def===void 0)return i;let a=o.isOptional();a&&n&&(o instanceof Ma&&(o=o._def.innerType),o.isNullable()||(o=o.nullable()),a=!1);const l=On(o._def,{...e,currentPath:[...e.currentPath,"properties",s],propertyPath:[...e.currentPath,"properties",s]});return l===void 0?i:{properties:{...i.properties,[s]:l},required:a?i.required:[...i.required,s]}},{properties:{},required:[]}),additionalProperties:Jtt(t,e)};return r.required.length||delete r.required,r}const ent=(t,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return On(t.innerType._def,e);const n=On(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},tnt=(t,e)=>{if(e.pipeStrategy==="input")return On(t.in._def,e);if(e.pipeStrategy==="output")return On(t.out._def,e);const n=On(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=On(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(i=>i!==void 0)}};function nnt(t,e){return On(t.type._def,e)}function rnt(t,e){const r={type:"array",uniqueItems:!0,items:On(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&zn(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&zn(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function int(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,r)=>On(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:On(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,r)=>On(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function snt(){return{not:{}}}function ont(){return{}}const ant=(t,e)=>On(t.innerType._def,e),lnt=(t,e,n)=>{switch(e){case vt.ZodString:return Coe(t,n);case vt.ZodNumber:return Ztt(t,n);case vt.ZodObject:return Qtt(t,n);case vt.ZodBigInt:return Itt(t,n);case vt.ZodBoolean:return Ott();case vt.ZodDate:return koe(t,n);case vt.ZodUndefined:return snt();case vt.ZodNull:return Ktt(n);case vt.ZodArray:return Rtt(t,n);case vt.ZodUnion:case vt.ZodDiscriminatedUnion:return Ytt(t,n);case vt.ZodIntersection:return $tt(t,n);case vt.ZodTuple:return int(t,n);case vt.ZodRecord:return Toe(t,n);case vt.ZodLiteral:return Htt(t,n);case vt.ZodEnum:return Btt(t);case vt.ZodNativeEnum:return Gtt(t);case vt.ZodNullable:return Xtt(t,n);case vt.ZodOptional:return ent(t,n);case vt.ZodMap:return Wtt(t,n);case vt.ZodSet:return rnt(t,n);case vt.ZodLazy:return()=>t.getter()._def;case vt.ZodPromise:return nnt(t,n);case vt.ZodNaN:case vt.ZodNever:return qtt();case vt.ZodEffects:return Ftt(t,n);case vt.ZodAny:return Ltt();case vt.ZodUnknown:return ont();case vt.ZodDefault:return jtt(t,n);case vt.ZodBranded:return Eoe(t,n);case vt.ZodReadonly:return ant(t,n);case vt.ZodCatch:return Dtt(t,n);case vt.ZodPipeline:return tnt(t,n);case vt.ZodFunction:case vt.ZodVoid:case vt.ZodSymbol:return;default:return(r=>{})()}};function On(t,e,n=!1){const r=e.seen.get(t);if(e.override){const a=e.override?.(t,e,r,n);if(a!==Att)return a}if(r&&!n){const a=cnt(r,e);if(a!==void 0)return a}const i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);const s=lnt(t,t.typeName,e),o=typeof s=="function"?On(s(),e):s;if(o&&hnt(t,e,o),e.postProcess){const a=e.postProcess(o,t,e);return i.jsonSchema=o,a}return i.jsonSchema=o,o}const cnt=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:unt(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},unt=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")},hnt=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n),dnt=(t,e)=>{const n=Ntt(e),r=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((l,[c,u])=>({...l,[c]:On(u._def,{...n,currentPath:[...n.basePath,n.definitionPath,c]},!0)??{}}),{}):void 0,i=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,s=On(t._def,i===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,i]},!1)??{},o=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;o!==void 0&&(s.title=o);const a=i===void 0?r?{...s,[n.definitionPath]:r}:s:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...r,[i]:s}};return n.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in a||"oneOf"in a||"allOf"in a||"type"in a&&Array.isArray(a.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),a};var Xy={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},Zy={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},Jy={code:"4",name:"assistant_message",parse:t=>{if(t==null||typeof t!="object"||!("id"in t)||!("role"in t)||!("content"in t)||typeof t.id!="string"||typeof t.role!="string"||t.role!=="assistant"||!Array.isArray(t.content)||!t.content.every(e=>e!=null&&typeof e=="object"&&"type"in e&&e.type==="text"&&"text"in e&&e.text!=null&&typeof e.text=="object"&&"value"in e.text&&typeof e.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:t}}},Qy={code:"5",name:"assistant_control_data",parse:t=>{if(t==null||typeof t!="object"||!("threadId"in t)||!("messageId"in t)||typeof t.threadId!="string"||typeof t.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:t.threadId,messageId:t.messageId}}}},ev={code:"6",name:"data_message",parse:t=>{if(t==null||typeof t!="object"||!("role"in t)||!("data"in t)||typeof t.role!="string"||t.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:t}}},fnt=[Xy,Zy,Jy,Qy,ev];Xy.code+"",Zy.code+"",Jy.code+"",Qy.code+"",ev.code+"";Xy.name+"",Xy.code,Zy.name+"",Zy.code,Jy.name+"",Jy.code,Qy.name+"",Qy.code,ev.name+"",ev.code;fnt.map(t=>t.code);function pnt({promptTokens:t,completionTokens:e}){return{promptTokens:t,completionTokens:e,totalTokens:t+e}}function mnt(t){const e=["ROOT"];let n=-1,r=null;function i(l,c,u){switch(l){case'"':{n=c,e.pop(),e.push(u),e.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=c,r=c,e.pop(),e.push(u),e.push("INSIDE_LITERAL");break}case"-":{e.pop(),e.push(u),e.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c,e.pop(),e.push(u),e.push("INSIDE_NUMBER");break}case"{":{n=c,e.pop(),e.push(u),e.push("INSIDE_OBJECT_START");break}case"[":{n=c,e.pop(),e.push(u),e.push("INSIDE_ARRAY_START");break}}}function s(l,c){switch(l){case",":{e.pop(),e.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=c,e.pop();break}}}function o(l,c){switch(l){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,e.pop();break}}}for(let l=0;l<t.length;l++){const c=t[l];switch(e[e.length-1]){case"ROOT":i(c,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,e.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{e.pop(),e.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{e.pop(),e.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{i(c,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{s(c,l);break}case"INSIDE_STRING":{switch(c){case'"':{e.pop(),n=l;break}case"\\":{e.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{n=l,e.pop();break}default:{n=l,i(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,e.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{i(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{e.pop(),n=l;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,l),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&s(c,l);break}case"}":{e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&s(c,l);break}case"]":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,l);break}default:{e.pop();break}}break}case"INSIDE_LITERAL":{const h=t.substring(r,l+1);!"false".startsWith(h)&&!"true".startsWith(h)&&!"null".startsWith(h)?(e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?s(c,l):e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,l)):n=l;break}}}let a=t.slice(0,n+1);for(let l=e.length-1;l>=0;l--)switch(e[l]){case"INSIDE_STRING":{a+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{a+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{a+="]";break}case"INSIDE_LITERAL":{const u=t.substring(r,t.length);"true".startsWith(u)?a+="true".slice(u.length):"false".startsWith(u)?a+="false".slice(u.length):"null".startsWith(u)&&(a+="null".slice(u.length))}}return a}function gnt(t){if(t===void 0)return{value:void 0,state:"undefined-input"};let e=_H({text:t});return e.success?{value:e.value,state:"successful-parse"}:(e=_H({text:mnt(t)}),e.success?{value:e.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var bnt={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},ynt={code:"2",name:"data",parse:t=>{if(!Array.isArray(t))throw new Error('"data" parts expect an array value.');return{type:"data",value:t}}},vnt={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},xnt={code:"8",name:"message_annotations",parse:t=>{if(!Array.isArray(t))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:t}}},_nt={code:"9",name:"tool_call",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string"||!("args"in t)||typeof t.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:t}}},wnt={code:"a",name:"tool_result",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("result"in t))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:t}}},Snt={code:"b",name:"tool_call_streaming_start",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:t}}},Ent={code:"c",name:"tool_call_delta",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("argsTextDelta"in t)||typeof t.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:t}}},knt={code:"d",name:"finish_message",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const e={finishReason:t.finishReason};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),{type:"finish_message",value:e}}},Cnt={code:"e",name:"finish_step",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const e={finishReason:t.finishReason,isContinued:!1};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),"isContinued"in t&&typeof t.isContinued=="boolean"&&(e.isContinued=t.isContinued),{type:"finish_step",value:e}}},Tnt={code:"f",name:"start_step",parse:t=>{if(t==null||typeof t!="object"||!("messageId"in t)||typeof t.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:t.messageId}}}},Ant={code:"g",name:"reasoning",parse:t=>{if(typeof t!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:t}}},Pnt={code:"h",name:"source",parse:t=>{if(t==null||typeof t!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:t}}},Nnt={code:"i",name:"redacted_reasoning",parse:t=>{if(t==null||typeof t!="object"||!("data"in t)||typeof t.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:t.data}}}},Lnt={code:"j",name:"reasoning_signature",parse:t=>{if(t==null||typeof t!="object"||!("signature"in t)||typeof t.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:t.signature}}}},g5=[bnt,ynt,vnt,xnt,_nt,wnt,Snt,Ent,knt,Cnt,Tnt,Ant,Pnt,Nnt,Lnt],Rnt=Object.fromEntries(g5.map(t=>[t.code,t]));Object.fromEntries(g5.map(t=>[t.name,t.code]));var Int=g5.map(t=>t.code),Ont=t=>{const e=t.indexOf(":");if(e===-1)throw new Error("Failed to parse stream string. No separator found.");const n=t.slice(0,e);if(!Int.includes(n))throw new Error(`Failed to parse stream string. Invalid code ${n}.`);const r=n,i=t.slice(e+1),s=JSON.parse(i);return Rnt[r].parse(s)};function rst(t,e){const n=g5.find(r=>r.name===t);if(!n)throw new Error(`Invalid stream part type: ${t}`);return`${n.code}:${JSON.stringify(e)}
`}var Dnt=10;function Mnt(t,e){const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return t.length=0,n}async function jnt({stream:t,onTextPart:e,onReasoningPart:n,onReasoningSignaturePart:r,onRedactedReasoningPart:i,onSourcePart:s,onDataPart:o,onErrorPart:a,onToolCallStreamingStartPart:l,onToolCallDeltaPart:c,onToolCallPart:u,onToolResultPart:h,onMessageAnnotationsPart:d,onFinishMessagePart:f,onFinishStepPart:m,onStartStepPart:g}){const b=t.getReader(),y=new TextDecoder,v=[];let x=0;for(;;){const{value:w}=await b.read();if(w&&(v.push(w),x+=w.length,w[w.length-1]!==Dnt))continue;if(v.length===0)break;const S=Mnt(v,x);x=0;const E=y.decode(S,{stream:!0}).split(`
`).filter(k=>k!=="").map(Ont);for(const{type:k,value:_}of E)switch(k){case"text":await e?.(_);break;case"reasoning":await n?.(_);break;case"reasoning_signature":await r?.(_);break;case"redacted_reasoning":await i?.(_);break;case"source":await s?.(_);break;case"data":await o?.(_);break;case"error":await a?.(_);break;case"message_annotations":await d?.(_);break;case"tool_call_streaming_start":await l?.(_);break;case"tool_call_delta":await c?.(_);break;case"tool_call":await u?.(_);break;case"tool_result":await h?.(_);break;case"finish_message":await f?.(_);break;case"finish_step":await m?.(_);break;case"start_step":await g?.(_);break;default:{const L=k;throw new Error(`Unknown stream part type: ${L}`)}}}}async function Fnt({stream:t,update:e,onToolCall:n,onFinish:r,generateId:i=fD,getCurrentDate:s=()=>new Date,lastMessage:o}){var a,l;const c=o?.role==="assistant";let u=c?1+((l=(a=o.toolInvocations)==null?void 0:a.reduce((E,k)=>{var _;return Math.max(E,(_=k.step)!=null?_:0)},0))!=null?l:0):0;const h=c?structuredClone(o):{id:i(),createdAt:s(),role:"assistant",content:"",parts:[]};let d,f,m;function g(E,k){const _=h.parts.find(L=>L.type==="tool-invocation"&&L.toolInvocation.toolCallId===E);_!=null?_.toolInvocation=k:h.parts.push({type:"tool-invocation",toolInvocation:k})}const b=[];let y=c?o?.annotations:void 0;const v={};let x={completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},w="unknown";function S(){const E=[...b];y?.length&&(h.annotations=y);const k={...structuredClone(h),revisionId:i()};e({message:k,data:E,replaceLastMessage:c})}await jnt({stream:t,onTextPart(E){d==null?(d={type:"text",text:E},h.parts.push(d)):d.text+=E,h.content+=E,S()},onReasoningPart(E){var k;m==null?(m={type:"text",text:E},f?.details.push(m)):m.text+=E,f==null?(f={type:"reasoning",reasoning:E,details:[m]},h.parts.push(f)):f.reasoning+=E,h.reasoning=((k=h.reasoning)!=null?k:"")+E,S()},onReasoningSignaturePart(E){m!=null&&(m.signature=E.signature)},onRedactedReasoningPart(E){f==null&&(f={type:"reasoning",reasoning:"",details:[]},h.parts.push(f)),f.details.push({type:"redacted",data:E.data}),m=void 0,S()},onSourcePart(E){h.parts.push({type:"source",source:E}),S()},onToolCallStreamingStartPart(E){h.toolInvocations==null&&(h.toolInvocations=[]),v[E.toolCallId]={text:"",step:u,toolName:E.toolName,index:h.toolInvocations.length};const k={state:"partial-call",step:u,toolCallId:E.toolCallId,toolName:E.toolName,args:void 0};h.toolInvocations.push(k),g(E.toolCallId,k),S()},onToolCallDeltaPart(E){const k=v[E.toolCallId];k.text+=E.argsTextDelta;const{value:_}=gnt(k.text),L={state:"partial-call",step:k.step,toolCallId:E.toolCallId,toolName:k.toolName,args:_};h.toolInvocations[k.index]=L,g(E.toolCallId,L),S()},async onToolCallPart(E){const k={state:"call",step:u,...E};if(v[E.toolCallId]!=null?h.toolInvocations[v[E.toolCallId].index]=k:(h.toolInvocations==null&&(h.toolInvocations=[]),h.toolInvocations.push(k)),g(E.toolCallId,k),S(),n){const _=await n({toolCall:E});if(_!=null){const L={state:"result",step:u,...E,result:_};h.toolInvocations[h.toolInvocations.length-1]=L,g(E.toolCallId,L),S()}}},onToolResultPart(E){const k=h.toolInvocations;if(k==null)throw new Error("tool_result must be preceded by a tool_call");const _=k.findIndex(R=>R.toolCallId===E.toolCallId);if(_===-1)throw new Error("tool_result must be preceded by a tool_call with the same toolCallId");const L={...k[_],state:"result",...E};k[_]=L,g(E.toolCallId,L),S()},onDataPart(E){b.push(...E),S()},onMessageAnnotationsPart(E){y==null?y=[...E]:y.push(...E),S()},onFinishStepPart(E){u+=1,d=E.isContinued?d:void 0,f=void 0,m=void 0},onStartStepPart(E){c||(h.id=E.messageId)},onFinishMessagePart(E){w=E.finishReason,E.usage!=null&&(x=pnt(E.usage))},onErrorPart(E){throw new Error(E)}}),r?.({message:h,finishReason:w,usage:x})}async function Bnt({stream:t,onTextPart:e}){const n=t.pipeThrough(new TextDecoderStream).getReader();for(;;){const{done:r,value:i}=await n.read();if(r)break;await e(i)}}async function Unt({stream:t,update:e,onFinish:n,getCurrentDate:r=()=>new Date,generateId:i=fD}){const s={type:"text",text:""},o={id:i(),createdAt:r(),role:"assistant",content:"",parts:[s]};await Bnt({stream:t,onTextPart:a=>{o.content+=a,s.text+=a,e({message:{...o},data:[],replaceLastMessage:!1})}}),n?.(o,{usage:{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},finishReason:"unknown"})}var $nt=()=>fetch;async function Hnt({api:t,body:e,streamProtocol:n="data",credentials:r,headers:i,abortController:s,restoreMessagesOnFailure:o,onResponse:a,onUpdate:l,onFinish:c,onToolCall:u,generateId:h,fetch:d=$nt(),lastMessage:f}){var m,g;const b=await d(t,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",...i},signal:(m=s?.())==null?void 0:m.signal,credentials:r}).catch(y=>{throw o(),y});if(a)try{await a(b)}catch(y){throw y}if(!b.ok)throw o(),new Error((g=await b.text())!=null?g:"Failed to fetch the chat response.");if(!b.body)throw new Error("The response body is empty.");switch(n){case"text":{await Unt({stream:b.body,update:l,onFinish:c,generateId:h});return}case"data":{await Fnt({stream:b.body,update:l,lastMessage:f,onToolCall:u,onFinish({message:y,finishReason:v,usage:x}){c&&y!=null&&c(y,{usage:x,finishReason:v})},generateId:h});return}default:{const y=n;throw new Error(`Unknown stream protocol: ${y}`)}}}function UN(t){return t?.reduce((e,n)=>{var r;return Math.max(e,(r=n.step)!=null?r:0)},0)}function Aoe(t){var e;return(e=t.parts)!=null?e:[...t.toolInvocations?t.toolInvocations.map(n=>({type:"tool-invocation",toolInvocation:n})):[],...t.reasoning?[{type:"reasoning",reasoning:t.reasoning,details:[{type:"text",text:t.reasoning}]}]:[],...t.content?[{type:"text",text:t.content}]:[]]}function s3(t){return t.map(e=>({...e,parts:Aoe(e)}))}async function kH(t){if(!t)return[];if(t instanceof FileList)return Promise.all(Array.from(t).map(async e=>{const{name:n,type:r}=e,i=await new Promise((s,o)=>{const a=new FileReader;a.onload=l=>{var c;s((c=l.target)==null?void 0:c.result)},a.onerror=l=>o(l),a.readAsDataURL(e)});return{name:n,contentType:r,url:i}}));if(Array.isArray(t))return t;throw new Error("Invalid attachments type")}function znt(t,e){var n;const r=(n=void 0)!=null?n:!1;return Vnt(dnt(t,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:i=>{const s=t.safeParse(i);return s.success?{success:!0,value:s.data}:{success:!1,error:s.error}}})}var $N=Symbol.for("vercel.ai.schema");function Vnt(t,{validate:e}={}){return{[$N]:!0,_type:void 0,[NE]:!0,jsonSchema:t,validate:e}}function Wnt(t){return typeof t=="object"&&t!==null&&$N in t&&t[$N]===!0&&"jsonSchema"in t&&"validate"in t}function ist(t){return Wnt(t)?t:znt(t)}function Gnt({originalMaxToolInvocationStep:t,originalMessageCount:e,maxSteps:n,messages:r}){var i;const s=r[r.length-1];return n>1&&s!=null&&(r.length>e||UN(s.toolInvocations)!==t)&&Poe(s)&&!qnt(s)&&((i=UN(s.toolInvocations))!=null?i:0)<n}function qnt(t){let e=!1;return t.parts.forEach(n=>{n.type==="text"&&(e=!0),n.type==="tool-invocation"&&(e=!1)}),e}function Poe(t){return t.role==="assistant"&&t.parts.filter(e=>e.type==="tool-invocation").every(e=>"result"in e.toolInvocation)}function Knt({messages:t,toolCallId:e,toolResult:n}){var r;const i=t[t.length-1],s=i.parts.find(a=>a.type==="tool-invocation"&&a.toolInvocation.toolCallId===e);if(s==null)return;const o={...s.toolInvocation,state:"result",result:n};s.toolInvocation=o,i.toolInvocations=(r=i.toolInvocations)==null?void 0:r.map(a=>a.toolCallId===e?o:a)}var Noe={exports:{}},Loe={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ng=A;function Ynt(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xnt=typeof Object.is=="function"?Object.is:Ynt,Znt=Ng.useState,Jnt=Ng.useEffect,Qnt=Ng.useLayoutEffect,ert=Ng.useDebugValue;function trt(t,e){var n=e(),r=Znt({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return Qnt(function(){i.value=n,i.getSnapshot=e,o3(i)&&s({inst:i})},[t,n,e]),Jnt(function(){return o3(i)&&s({inst:i}),t(function(){o3(i)&&s({inst:i})})},[t]),ert(n),n}function o3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xnt(t,n)}catch{return!0}}function nrt(t,e){return e()}var rrt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?nrt:trt;Loe.useSyncExternalStore=Ng.useSyncExternalStore!==void 0?Ng.useSyncExternalStore:rrt;Noe.exports=Loe;var irt=Noe.exports;const Roe=0,Ioe=1,Ooe=2,CH=3;var TH=Object.prototype.hasOwnProperty;function HN(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&HN(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(TH.call(t,n)&&++r&&!TH.call(e,n)||!(n in e)||!HN(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Mc=new WeakMap,sh=()=>{},ps=sh(),zN=Object,Pn=t=>t===ps,jl=t=>typeof t=="function",Lh=(t,e)=>({...t,...e}),Doe=t=>jl(t.then),a3={},Mw={},pD="undefined",hx=typeof window!=pD,VN=typeof document!=pD,srt=hx&&"Deno"in window,ort=()=>hx&&typeof window.requestAnimationFrame!=pD,Moe=(t,e)=>{const n=Mc.get(t);return[()=>!Pn(e)&&t.get(e)||a3,r=>{if(!Pn(e)){const i=t.get(e);e in Mw||(Mw[e]=i),n[5](e,Lh(i,r),i||a3)}},n[6],()=>!Pn(e)&&e in Mw?Mw[e]:!Pn(e)&&t.get(e)||a3]};let WN=!0;const art=()=>WN,[GN,qN]=hx&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[sh,sh],lrt=()=>{const t=VN&&document.visibilityState;return Pn(t)||t!=="hidden"},crt=t=>(VN&&document.addEventListener("visibilitychange",t),GN("focus",t),()=>{VN&&document.removeEventListener("visibilitychange",t),qN("focus",t)}),urt=t=>{const e=()=>{WN=!0,t()},n=()=>{WN=!1};return GN("online",e),GN("offline",n),()=>{qN("online",e),qN("offline",n)}},hrt={isOnline:art,isVisible:lrt},drt={initFocus:crt,initReconnect:urt},AH=!ut.useId,tv=!hx||srt,frt=t=>ort()?window.requestAnimationFrame(t):setTimeout(t,1),l3=tv?A.useEffect:A.useLayoutEffect,c3=typeof navigator<"u"&&navigator.connection,PH=!tv&&c3&&(["slow-2g","2g"].includes(c3.effectiveType)||c3.saveData),jw=new WeakMap,u3=(t,e)=>zN.prototype.toString.call(t)===`[object ${e}]`;let prt=0;const KN=t=>{const e=typeof t,n=u3(t,"Date"),r=u3(t,"RegExp"),i=u3(t,"Object");let s,o;if(zN(t)===t&&!n&&!r){if(s=jw.get(t),s)return s;if(s=++prt+"~",jw.set(t,s),Array.isArray(t)){for(s="@",o=0;o<t.length;o++)s+=KN(t[o])+",";jw.set(t,s)}if(i){s="#";const a=zN.keys(t).sort();for(;!Pn(o=a.pop());)Pn(t[o])||(s+=o+":"+KN(t[o])+",");jw.set(t,s)}}else s=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return s},mD=t=>{if(jl(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?KN(t):"",[t,e]};let mrt=0;const YN=()=>++mrt;async function joe(...t){const[e,n,r,i]=t,s=Lh({populateCache:!0,throwOnError:!0},typeof i=="boolean"?{revalidate:i}:i||{});let o=s.populateCache;const a=s.rollbackOnError;let l=s.optimisticData;const c=d=>typeof a=="function"?a(d):a!==!1,u=s.throwOnError;if(jl(n)){const d=n,f=[],m=e.keys();for(const g of m)!/^\$(inf|sub)\$/.test(g)&&d(e.get(g)._k)&&f.push(g);return Promise.all(f.map(h))}return h(n);async function h(d){const[f]=mD(d);if(!f)return;const[m,g]=Moe(e,f),[b,y,v,x]=Mc.get(e),w=()=>{const O=b[f];return(jl(s.revalidate)?s.revalidate(m().data,d):s.revalidate!==!1)&&(delete v[f],delete x[f],O&&O[0])?O[0](Ooe).then(()=>m().data):m().data};if(t.length<3)return w();let S=r,E;const k=YN();y[f]=[k,0];const _=!Pn(l),L=m(),R=L.data,C=L._c,P=Pn(C)?R:C;if(_&&(l=jl(l)?l(P,R):l,g({data:l,_c:P})),jl(S))try{S=S(P)}catch(O){E=O}if(S&&Doe(S))if(S=await S.catch(O=>{E=O}),k!==y[f][0]){if(E)throw E;return S}else E&&_&&c(E)&&(o=!0,g({data:P,_c:ps}));if(o&&!E)if(jl(o)){const O=o(S,P);g({data:O,error:ps,_c:ps})}else g({data:S,error:ps,_c:ps});if(y[f][1]=YN(),Promise.resolve(w()).then(()=>{g({_c:ps})}),E){if(u)throw E;return}return S}}const NH=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},grt=(t,e)=>{if(!Mc.has(t)){const n=Lh(drt,e),r={},i=joe.bind(ps,t);let s=sh;const o={},a=(u,h)=>{const d=o[u]||[];return o[u]=d,d.push(h),()=>d.splice(d.indexOf(h),1)},l=(u,h,d)=>{t.set(u,h);const f=o[u];if(f)for(const m of f)m(h,d)},c=()=>{if(!Mc.has(t)&&(Mc.set(t,[r,{},{},{},i,l,a]),!tv)){const u=n.initFocus(setTimeout.bind(ps,NH.bind(ps,r,Roe))),h=n.initReconnect(setTimeout.bind(ps,NH.bind(ps,r,Ioe)));s=()=>{u&&u(),h&&h(),Mc.delete(t)}}};return c(),[t,i,c,s]}return[t,Mc.get(t)[4]]},brt=(t,e,n,r,i)=>{const s=n.errorRetryCount,o=i.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!Pn(s)&&o>s||setTimeout(r,a,i)},yrt=HN,[Foe,vrt]=grt(new Map),xrt=Lh({onLoadingSlow:sh,onSuccess:sh,onError:sh,onErrorRetry:brt,onDiscarded:sh,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:PH?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:PH?5e3:3e3,compare:yrt,isPaused:()=>!1,cache:Foe,mutate:vrt,fallback:{}},hrt),_rt=(t,e)=>{const n=Lh(t,e);if(e){const{use:r,fallback:i}=t,{use:s,fallback:o}=e;r&&s&&(n.use=r.concat(s)),i&&o&&(n.fallback=Lh(i,o))}return n},wrt=A.createContext({}),Srt="$inf$",Boe=hx&&window.__SWR_DEVTOOLS_USE__,Ert=Boe?window.__SWR_DEVTOOLS_USE__:[],krt=()=>{Boe&&(window.__SWR_DEVTOOLS_REACT__=ut)},Crt=t=>jl(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],Trt=()=>Lh(xrt,A.useContext(wrt)),Art=t=>(e,n,r)=>t(e,n&&((...s)=>{const[o]=mD(e),[,,,a]=Mc.get(Foe);if(o.startsWith(Srt))return n(...s);const l=a[o];return Pn(l)?n(...s):(delete a[o],l)}),r),Prt=Ert.concat(Art),Nrt=t=>function(...n){const r=Trt(),[i,s,o]=Crt(n),a=_rt(r,o);let l=t;const{use:c}=a,u=(c||[]).concat(Prt);for(let h=u.length;h--;)l=u[h](l);return l(i,s||a.fetcher||null,a)},Lrt=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i>=0&&(r[i]=r[r.length-1],r.pop())}};krt();const h3=ut.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),d3={dedupe:!0},Rrt=(t,e,n)=>{const{cache:r,compare:i,suspense:s,fallbackData:o,revalidateOnMount:a,revalidateIfStale:l,refreshInterval:c,refreshWhenHidden:u,refreshWhenOffline:h,keepPreviousData:d}=n,[f,m,g,b]=Mc.get(r),[y,v]=mD(t),x=A.useRef(!1),w=A.useRef(!1),S=A.useRef(y),E=A.useRef(e),k=A.useRef(n),_=()=>k.current,L=()=>_().isVisible()&&_().isOnline(),[R,C,P,O]=Moe(r,y),N=A.useRef({}).current,H=Pn(o)?Pn(n.fallback)?ps:n.fallback[y]:o,Q=(ke,q)=>{for(const pe in N){const ne=pe;if(ne==="data"){if(!i(ke[ne],q[ne])&&(!Pn(ke[ne])||!i(W,q[ne])))return!1}else if(q[ne]!==ke[ne])return!1}return!0},X=A.useMemo(()=>{const ke=!y||!e?!1:Pn(a)?_().isPaused()||s?!1:l!==!1:a,q=Pe=>{const Re=Lh(Pe);return delete Re._k,ke?{isValidating:!0,isLoading:!0,...Re}:Re},pe=R(),ne=O(),oe=q(pe),ae=pe===ne?oe:q(ne);let me=oe;return[()=>{const Pe=q(R());return Q(Pe,me)?(me.data=Pe.data,me.isLoading=Pe.isLoading,me.isValidating=Pe.isValidating,me.error=Pe.error,me):(me=Pe,Pe)},()=>ae]},[r,y]),J=irt.useSyncExternalStore(A.useCallback(ke=>P(y,(q,pe)=>{Q(pe,q)||ke()}),[r,y]),X[0],X[1]),j=!x.current,F=f[y]&&f[y].length>0,Y=J.data,M=Pn(Y)?H&&Doe(H)?h3(H):H:Y,D=J.error,V=A.useRef(M),W=d?Pn(Y)?Pn(V.current)?M:V.current:Y:M,te=F&&!Pn(D)?!1:j&&!Pn(a)?a:_().isPaused()?!1:s?Pn(M)?!1:l:Pn(M)||l,ee=!!(y&&e&&j&&te),K=Pn(J.isValidating)?ee:J.isValidating,he=Pn(J.isLoading)?ee:J.isLoading,be=A.useCallback(async ke=>{const q=E.current;if(!y||!q||w.current||_().isPaused())return!1;let pe,ne,oe=!0;const ae=ke||{},me=!g[y]||!ae.dedupe,Pe=()=>AH?!w.current&&y===S.current&&x.current:y===S.current,Re={isValidating:!1,isLoading:!1},we=()=>{C(Re)},$e=()=>{const Be=g[y];Be&&Be[1]===ne&&delete g[y]},Fe={isValidating:!0};Pn(R().data)&&(Fe.isLoading=!0);try{if(me&&(C(Fe),n.loadingTimeout&&Pn(R().data)&&setTimeout(()=>{oe&&Pe()&&_().onLoadingSlow(y,n)},n.loadingTimeout),g[y]=[q(v),YN()]),[pe,ne]=g[y],pe=await pe,me&&setTimeout($e,n.dedupingInterval),!g[y]||g[y][1]!==ne)return me&&Pe()&&_().onDiscarded(y),!1;Re.error=ps;const Be=m[y];if(!Pn(Be)&&(ne<=Be[0]||ne<=Be[1]||Be[1]===0))return we(),me&&Pe()&&_().onDiscarded(y),!1;const Ee=R().data;Re.data=i(Ee,pe)?Ee:pe,me&&Pe()&&_().onSuccess(pe,y,n)}catch(Be){$e();const Ee=_(),{shouldRetryOnError:qe}=Ee;Ee.isPaused()||(Re.error=Be,me&&Pe()&&(Ee.onError(Be,y,Ee),(qe===!0||jl(qe)&&qe(Be))&&(!_().revalidateOnFocus||!_().revalidateOnReconnect||L())&&Ee.onErrorRetry(Be,y,Ee,Xe=>{const et=f[y];et&&et[0]&&et[0](CH,Xe)},{retryCount:(ae.retryCount||0)+1,dedupe:!0})))}return oe=!1,we(),!0},[y,r]),Se=A.useCallback((...ke)=>joe(r,S.current,...ke),[]);if(l3(()=>{E.current=e,k.current=n,Pn(Y)||(V.current=Y)}),l3(()=>{if(!y)return;const ke=be.bind(ps,d3);let q=0;const ne=Lrt(y,f,(oe,ae={})=>{if(oe==Roe){const me=Date.now();_().revalidateOnFocus&&me>q&&L()&&(q=me+_().focusThrottleInterval,ke())}else if(oe==Ioe)_().revalidateOnReconnect&&L()&&ke();else{if(oe==Ooe)return be();if(oe==CH)return be(ae)}});return w.current=!1,S.current=y,x.current=!0,C({_k:v}),te&&(Pn(M)||tv?ke():frt(ke)),()=>{w.current=!0,ne()}},[y]),l3(()=>{let ke;function q(){const ne=jl(c)?c(R().data):c;ne&&ke!==-1&&(ke=setTimeout(pe,ne))}function pe(){!R().error&&(u||_().isVisible())&&(h||_().isOnline())?be(d3).then(q):q()}return q(),()=>{ke&&(clearTimeout(ke),ke=-1)}},[c,u,h,y]),A.useDebugValue(W),s&&Pn(M)&&y){if(!AH&&tv)throw new Error("Fallback data is required when using Suspense in SSR.");E.current=e,k.current=n,w.current=!1;const ke=b[y];if(!Pn(ke)){const q=Se(ke);h3(q)}if(Pn(D)){const q=be(d3);Pn(W)||(q.status="fulfilled",q.value=!0),h3(q)}else throw D}return{mutate:Se,get data(){return N.data=!0,W},get error(){return N.error=!0,D},get isValidating(){return N.isValidating=!0,K},get isLoading(){return N.isLoading=!0,he}}},Fw=Nrt(Rrt);function Irt(t,e){if(typeof t!="function")throw new TypeError(`Expected the first argument to be a \`function\`, got \`${typeof t}\`.`);let n,r=0;return function(...s){clearTimeout(n);const o=Date.now(),a=o-r,l=e-a;l<=0?(r=o,t.apply(this,s)):n=setTimeout(()=>{r=Date.now(),t.apply(this,s)},l)}}var Ort=Irt;const Drt=_s(Ort);function LH(t,e){return e!=null?Drt(t,e):t}function Mrt({api:t="/api/chat",id:e,initialMessages:n,initialInput:r="",sendExtraMessageFields:i,onToolCall:s,experimental_prepareRequestBody:o,maxSteps:a=1,streamProtocol:l="data",onResponse:c,onFinish:u,onError:h,credentials:d,headers:f,body:m,generateId:g=fD,fetch:b,keepLastMessageOnError:y=!0,experimental_throttle:v}={}){const[x]=A.useState(g),w=e??x,S=typeof t=="string"?[t,w]:w,[E]=A.useState(n!=null?s3(n):[]),{data:k,mutate:_}=Fw([S,"messages"],null,{fallbackData:E}),L=A.useRef(k||[]);A.useEffect(()=>{L.current=k||[]},[k]);const{data:R,mutate:C}=Fw([S,"streamData"],null),P=A.useRef(R);A.useEffect(()=>{P.current=R},[R]);const{data:O="ready",mutate:N}=Fw([S,"status"],null),{data:H=void 0,mutate:Q}=Fw([S,"error"],null),X=A.useRef(null),J=A.useRef({credentials:d,headers:f,body:m});A.useEffect(()=>{J.current={credentials:d,headers:f,body:m}},[d,f,m]);const j=A.useCallback(async be=>{var Se,Ce;N("submitted"),Q(void 0);const ke=s3(be.messages),q=ke.length,pe=UN((Se=ke[ke.length-1])==null?void 0:Se.toolInvocations);try{const oe=new AbortController;X.current=oe;const ae=LH(_,v),me=LH(C,v),Pe=L.current;ae(ke,!1);const Re=i?ke:ke.map(({role:$e,content:Fe,experimental_attachments:Be,data:Ee,annotations:qe,toolInvocations:Xe,parts:et})=>({role:$e,content:Fe,...Be!==void 0&&{experimental_attachments:Be},...Ee!==void 0&&{data:Ee},...qe!==void 0&&{annotations:qe},...Xe!==void 0&&{toolInvocations:Xe},...et!==void 0&&{parts:et}})),we=P.current;await Hnt({api:t,body:(Ce=o?.({id:w,messages:ke,requestData:be.data,requestBody:be.body}))!=null?Ce:{id:w,messages:Re,data:be.data,...J.current.body,...be.body},streamProtocol:l,credentials:J.current.credentials,headers:{...J.current.headers,...be.headers},abortController:()=>X.current,restoreMessagesOnFailure(){y||ae(Pe,!1)},onResponse:c,onUpdate({message:$e,data:Fe,replaceLastMessage:Be}){N("streaming"),ae([...Be?ke.slice(0,ke.length-1):ke,$e],!1),Fe?.length&&me([...we??[],...Fe],!1)},onToolCall:s,onFinish:u,generateId:g,fetch:b,lastMessage:ke[ke.length-1]}),X.current=null,N("ready")}catch(oe){if(oe.name==="AbortError")return X.current=null,N("ready"),null;h&&oe instanceof Error&&h(oe),Q(oe),N("error")}const ne=L.current;Gnt({originalMaxToolInvocationStep:pe,originalMessageCount:q,maxSteps:a,messages:ne})&&await j({messages:ne})},[_,N,t,J,c,u,h,Q,C,P,l,i,o,s,a,L,X,g,b,y,v,w]),F=A.useCallback(async(be,{data:Se,headers:Ce,body:ke,experimental_attachments:q}={})=>{var pe,ne;const oe=await kH(q),ae=L.current.concat({...be,id:(pe=be.id)!=null?pe:g(),createdAt:(ne=be.createdAt)!=null?ne:new Date,experimental_attachments:oe.length>0?oe:void 0,parts:Aoe(be)});return j({messages:ae,headers:Ce,body:ke,data:Se})},[j,g]),Y=A.useCallback(async({data:be,headers:Se,body:Ce}={})=>{const ke=L.current;if(ke.length===0)return null;const q=ke[ke.length-1];return j({messages:q.role==="assistant"?ke.slice(0,-1):ke,headers:Se,body:Ce,data:be})},[j]),M=A.useCallback(()=>{X.current&&(X.current.abort(),X.current=null)},[]),D=A.useCallback(be=>{typeof be=="function"&&(be=be(L.current));const Se=s3(be);_(Se,!1),L.current=Se},[_]),V=A.useCallback(be=>{typeof be=="function"&&(be=be(P.current)),C(be,!1),P.current=be},[C]),[W,te]=A.useState(r),ee=A.useCallback(async(be,Se={},Ce)=>{var ke;if((ke=be?.preventDefault)==null||ke.call(be),!W&&!Se.allowEmptySubmit)return;Ce&&(J.current={...J.current,...Ce});const q=await kH(Se.experimental_attachments),ne={messages:L.current.concat({id:g(),createdAt:new Date,role:"user",content:W,experimental_attachments:q.length>0?q:void 0,parts:[{type:"text",text:W}]}),headers:Se.headers,body:Se.body,data:Se.data};j(ne),te("")},[W,g,j]),K=be=>{te(be.target.value)},he=A.useCallback(({toolCallId:be,result:Se})=>{const Ce=L.current;Knt({messages:Ce,toolCallId:be,toolResult:Se}),_(Ce,!1);const ke=Ce[Ce.length-1];Poe(ke)&&j({messages:Ce})},[_,j]);return{messages:k??[],id:w,setMessages:D,data:R,setData:V,error:H,append:F,reload:Y,stop:M,input:W,setInput:te,handleInputChange:K,handleSubmit:ee,isLoading:O==="submitted"||O==="streaming",status:O,addToolResult:he}}var jrt=Mrt;const jc=Rh({started:!1,aborted:!1,showChat:!0}),Frt=t=>`
You are an experienced developer who helps people choose the best starter template for their projects.

Available templates:
<template>
  <name>blank</name>
  <description>Empty starter for simple scripts and trivial tasks that don't require a full template setup</description>
  <tags>basic, script</tags>
</template>
${t.map(e=>`
<template>
  <name>${e.name}</name>
  <description>${e.description}</description>
  ${e.tags?`<tags>${e.tags.join(", ")}</tags>`:""}
</template>
`).join(`
`)}

Response Format:
<selection>
  <templateName>{selected template name}</templateName>
  <title>{a proper title for the project}</title>
</selection>

Examples:

<example>
User: I need to build a todo app
Response:
<selection>
  <templateName>react-basic-starter</templateName>
  <title>Simple React todo application</title>
</selection>
</example>

<example>
User: Write a script to generate numbers from 1 to 100
Response:
<selection>
  <templateName>blank</templateName>
  <title>script to generate numbers from 1 to 100</title>
</selection>
</example>

Instructions:
1. For trivial tasks and simple scripts, always recommend the blank template
2. For more complex projects, recommend templates from the provided list
3. Follow the exact XML format
4. Consider both technical requirements and tags
5. If no perfect match exists, recommend the closest option

Important: Provide only the selection tags in your response, no additional text.
MOST IMPORTANT: YOU DONT HAVE TIME TO THINK JUST START RESPONDING BASED ON HUNCH 
`,Brt=M2.filter(t=>!t.name.includes("shadcn")),Urt=t=>{try{const e=t.match(/<templateName>(.*?)<\/templateName>/),n=t.match(/<title>(.*?)<\/title>/);return e?{template:e[1].trim(),title:n?.[1].trim()||"Untitled Project"}:null}catch(e){return console.error("Error parsing template selection:",e),null}},$rt=async t=>{const{message:e,model:n,provider:r}=t,i={message:e,model:n,provider:r,system:Frt(Brt)},o=await(await fetch("/api/llmcall",{method:"POST",body:JSON.stringify(i)})).json();console.log(o);const{text:a}=o,l=Urt(a);return l||(console.log("No template selected, using blank template"),{template:"blank",title:""})},Uoe=async(t,e="")=>{const n="https://api.github.com";try{const r=Zr.get("githubToken")||void 0,i={Accept:"application/vnd.github.v3+json"};r&&(i.Authorization="token "+r);const s=await fetch(`${n}/repos/${t}/contents/${e}`,{headers:i});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const o=await s.json();if(!Array.isArray(o)&&o.type==="file"){const l=atob(o.content);return[{name:o.name,path:o.path,content:l}]}return(await Promise.all(o.map(async l=>{if(l.type==="dir")return await Uoe(t,l.path);if(l.type==="file"){const u=await(await fetch(l.url,{headers:i})).json(),h=atob(u.content);return[{name:l.name,path:l.path,content:h}]}return[]}))).flat()}catch(r){throw console.error("Error fetching repo contents:",r),r}};async function Hrt(t,e){const n=M2.find(d=>d.name==t);if(!n)return null;const r=n.githubRepo,i=await Uoe(r);let s=i;s=s.filter(d=>d.path.startsWith(".git")==!1);const o=["package-lock.json","yarn.lock","pnpm-lock.yaml"];s=s.filter(d=>o.includes(d.name)==!1),s=s.filter(d=>d.path.startsWith(".bolt")==!1);const a=i.find(d=>d.path.startsWith(".bolt")&&d.name=="ignore"),l={files:s,ignoreFile:[]};if(a){const d=a.content.split(`
`).map(g=>g.trim()),f=ZO().add(d),m=s.filter(g=>f.ignores(g.path));l.files=s,l.ignoreFile=m}const c=`
<boltArtifact id="imported-files" title="${e||"Importing Starter Files"}" type="bundled">
${l.files.map(d=>`<boltAction type="file" filePath="${d.path}">
${d.content}
</boltAction>`).join(`
`)}
</boltArtifact>
`;let u="";const h=i.filter(d=>d.path.startsWith(".bolt")).find(d=>d.name=="prompt");return h&&(u=`
TEMPLATE INSTRUCTIONS:
${h.content}

IMPORTANT: Dont Forget to install the dependencies before running the app
---
`),l.ignoreFile.length>0&&(u=u+`
STRICT FILE ACCESS RULES - READ CAREFULLY:

The following files are READ-ONLY and must never be modified:
${l.ignoreFile.map(d=>`- ${d.path}`).join(`
`)}

Permitted actions:
 Import these files as dependencies
 Read from these files
 Reference these files

Strictly forbidden actions:
 Modify any content within these files
 Delete these files
 Rename these files
 Move these files
 Create new versions of these files
 Suggest changes to these files

Any attempt to modify these protected files will result in immediate termination of the operation.

If you need to make changes to functionality, create new files instead of modifying the protected ones listed above.
---
`),u+=`
---
template import is done, and you can now use the imported files,
edit only the files that need to be changed, and you can create new files as needed.
NO NOT EDIT/WRITE ANY FILES THAT ALREADY EXIST IN THE PROJECT AND DOES NOT NEED TO BE MODIFIED
---
Now that the Template is imported please continue with my original request
`,{assistantMessage:c,userMessage:u}}const $oe=qn(!1),zrt=av({enter:"animated fadeInRight",exit:"animated fadeOutRight"}),RH=Ws("Chat");function sst(){Lg.trace("Chat");const{ready:t,initialMessages:e,storeMessageHistory:n,importChat:r,exportChat:i}=TK(),s=Ot(Nl);return A.useEffect(()=>{Nt.setReloadedMessages(e.map(o=>o.id))},[e]),p.jsxs(p.Fragment,{children:[t&&p.jsx(Wrt,{description:s,initialMessages:e,exportChat:i,storeMessageHistory:n,importChat:r}),p.jsx(ame,{closeButton:({closeToast:o})=>p.jsx("button",{className:"Toastify__close-button",onClick:o,children:p.jsx("div",{className:"i-ph:x text-lg"})}),icon:({type:o})=>{switch(o){case"success":return p.jsx("div",{className:"i-ph:check-bold text-bolt-elements-icon-success text-2xl"});case"error":return p.jsx("div",{className:"i-ph:warning-circle-bold text-bolt-elements-icon-error text-2xl"})}},position:"bottom-right",pauseOnFocusLoss:!0,transition:zrt})]})}const Vrt=kK(t=>{const{messages:e,initialMessages:n,isLoading:r,parseMessages:i,storeMessageHistory:s}=t;i(e,r),e.length>n.length&&s(e).catch(o=>He.error(o.message))},50),Wrt=A.memo(({description:t,initialMessages:e,storeMessageHistory:n,importChat:r,exportChat:i})=>{bFe();const s=A.useRef(null),[o,a]=A.useState(e.length>0),[l,c]=A.useState([]),[u,h]=A.useState([]),[d,f]=IH(),[m,g]=A.useState(!1),b=Ot(Nt.files),y=Ot(Nt.alert),{activeProviders:v,promptId:x,autoSelectTemplate:w,contextOptimizationEnabled:S}=Dh(),[E,k]=A.useState(()=>Zr.get("selectedModel")||oue),[_,L]=A.useState(()=>{const Fe=Zr.get("selectedProvider");return tL.find(Be=>Be.name===Fe)||aue}),{showChat:R}=Ot(jc),[C,P]=Ype(),[O,N]=A.useState({}),{messages:H,isLoading:Q,input:X,handleInputChange:J,setInput:j,stop:F,append:Y,setMessages:M,reload:D,error:V,data:W,setData:te}=jrt({api:"/api/chat",body:{apiKeys:O,files:b,promptId:x,contextOptimization:S},sendExtraMessageFields:!0,onError:Fe=>{RH.error(`Request failed

`,Fe,V),Ut.logError("Chat request failed",Fe,{component:"Chat",action:"request",error:Fe.message}),He.error("There was an error processing your request: "+(Fe.message?Fe.message:"No details were returned"))},onFinish:(Fe,Be)=>{const Ee=Be.usage;te(void 0),Ee&&(console.log("Token usage:",Ee),Ut.logProvider("Chat response completed",{component:"Chat",action:"response",model:E,provider:_.name,usage:Ee,messageLength:Fe.content.length})),RH.debug("Finished streaming")},initialMessages:e,initialInput:Zr.get(lC)||""});A.useEffect(()=>{const Fe=d.get("prompt");Fe&&(f({}),ne(),Y({role:"user",content:[{type:"text",text:`[Model: ${E}]

[Provider: ${_.name}]

${Fe}`}]}))},[E,_,d]);const{enhancingPrompt:ee,promptEnhanced:K,enhancePrompt:he,resetEnhancer:be}=pFe(),{parsedMessages:Se,parseMessages:Ce}=fFe(),ke=o?400:200;A.useEffect(()=>{jc.setKey("started",e.length>0)},[]),A.useEffect(()=>{Vrt({messages:H,initialMessages:e,isLoading:Q,parseMessages:Ce,storeMessageHistory:n})},[H,Q,Ce]);const q=()=>{const Fe=s.current;Fe&&(Fe.scrollTop=Fe.scrollHeight)},pe=()=>{F(),jc.setKey("aborted",!0),Nt.abortAllActions(),Ut.logProvider("Chat response aborted",{component:"Chat",action:"abort",model:E,provider:_.name})};A.useEffect(()=>{const Fe=s.current;if(Fe){Fe.style.height="auto";const Be=Fe.scrollHeight;Fe.style.height=`${Math.min(Be,ke)}px`,Fe.style.overflowY=Be>ke?"auto":"hidden"}},[X,s]);const ne=async()=>{o||(await Promise.all([P("#examples",{opacity:0,display:"none"},{duration:.1}),P("#intro",{opacity:0,flex:1},{duration:.2,ease:So})]),jc.setKey("started",!0),a(!0))},oe=async(Fe,Be)=>{const Ee=Be||X;if(!Ee?.trim())return;if(Q){pe();return}if(ne(),!o){if(g(!0),w){const{template:Xe,title:et}=await $rt({message:Ee,model:E,provider:_});if(Xe!=="blank"){const re=await Hrt(Xe,et).catch($=>($.message.includes("rate limit")?He.warning(`Rate limit exceeded. Skipping starter template
 Continuing with blank template`):He.warning(`Failed to import starter template
 Continuing with blank template`),null));if(re){const{assistantMessage:$,userMessage:G}=re;M([{id:`1-${new Date().getTime()}`,role:"user",content:Ee},{id:`2-${new Date().getTime()}`,role:"assistant",content:$},{id:`3-${new Date().getTime()}`,role:"user",content:`[Model: ${E}]

[Provider: ${_.name}]

${G}`,annotations:["hidden"]}]),D(),g(!1);return}}}M([{id:`${new Date().getTime()}`,role:"user",content:[{type:"text",text:`[Model: ${E}]

[Provider: ${_.name}]

${Ee}`},...u.map(Xe=>({type:"image",image:Xe}))]}]),D(),g(!1);return}V!=null&&M(H.slice(0,-1));const qe=Nt.getModifiedFiles();if(jc.setKey("aborted",!1),qe!==void 0){const Xe=NKe(qe,`${Date.now()}`);Y({role:"user",content:[{type:"text",text:`[Model: ${E}]

[Provider: ${_.name}]

${Xe}${Ee}`},...u.map(et=>({type:"image",image:et}))]}),Nt.resetAllFileModifications()}else Y({role:"user",content:[{type:"text",text:`[Model: ${E}]

[Provider: ${_.name}]

${Ee}`},...u.map(Xe=>({type:"image",image:Xe}))]});j(""),Zr.remove(lC),c([]),h([]),be(),s.current?.blur()},ae=Fe=>{J(Fe)},me=A.useCallback(pv(Fe=>{const Be=Fe.target.value.trim();Zr.set(lC,Be,{expires:30})},1e3),[]),[Pe,Re]=yFe();A.useEffect(()=>{const Fe=Zr.get("apiKeys");Fe&&N(JSON.parse(Fe))},[]);const we=Fe=>{k(Fe),Zr.set("selectedModel",Fe,{expires:30})},$e=Fe=>{L(Fe),Zr.set("selectedProvider",Fe.name,{expires:30})};return p.jsx(ptt,{ref:C,textareaRef:s,input:X,showChat:R,chatStarted:o,isStreaming:Q||m,onStreamingChange:Fe=>{$oe.set(Fe)},enhancingPrompt:ee,promptEnhanced:K,sendMessage:oe,model:E,setModel:we,provider:_,setProvider:$e,providerList:v,messageRef:Pe,scrollRef:Re,handleInputChange:Fe=>{ae(Fe),me(Fe)},handleStop:pe,description:t,importChat:r,exportChat:i,messages:H.map((Fe,Be)=>Fe.role==="user"?Fe:{...Fe,content:Se[Be]||""}),enhancePrompt:()=>{he(X,Fe=>{j(Fe),q()},E,_,O)},uploadedFiles:l,setUploadedFiles:c,imageDataList:u,setImageDataList:h,actionAlert:y,clearAlert:()=>Nt.clearAlert(),data:W})});function Grt(){const t=Ot(lg),e=Ot(Vo);A.useEffect(()=>{t.token&&e&&e4(t.token)},[t.token,e]);const n=t.stats?.sites?.find(r=>r.name.includes(`bolt-diy-${e}`));return n?p.jsx(cR,{children:p.jsxs(uR,{children:[p.jsx(hR,{asChild:!0,children:p.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center w-8 h-8 rounded hover:bg-bolt-elements-item-backgroundActive text-bolt-elements-textSecondary hover:text-[#00AD9F] z-50",onClick:r=>{r.stopPropagation()},children:p.jsx("div",{className:"i-ph:rocket-launch w-5 h-5"})})}),p.jsx(dR,{children:p.jsxs(fR,{className:"px-3 py-2 rounded bg-bolt-elements-background-depth-3 text-bolt-elements-textPrimary text-xs z-50",sideOffset:5,children:[n.url,p.jsx(pR,{className:"fill-bolt-elements-background-depth-3"})]})})]})}):null}function qrt({}){const t=Ot(Nt.showWorkbench),{showChat:e}=Ot(jc),n=Ot(lg),[r]=A.useState(0),s=Ot(Nt.previews)[r],[o,a]=A.useState(!1),l=KQ(1024),c=t||!e,[u,h]=A.useState(!1),d=A.useRef(null),f=Ot($oe);A.useEffect(()=>{function b(y){d.current&&!d.current.contains(y.target)&&h(!1)}return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const m=Ot(Vo),g=async()=>{if(!n.user||!n.token){He.error("Please connect to Netlify first in the settings tab!");return}if(!m){He.error("No active chat found");return}try{a(!0);const b=Nt.firstArtifact;if(!b)throw new Error("No active project found");const y="build-"+Date.now(),v={messageId:"netlify build",artifactId:b.id,actionId:y,action:{type:"build",content:"npm run build"}};if(b.runner.addAction(v),await b.runner.runAction(v),!b.runner.buildOutput)throw new Error("Build failed");const x=await Gu,w=b.runner.buildOutput.path.replace("/home/project","");async function S(O){const N={},H=await x.fs.readdir(O,{withFileTypes:!0});for(const Q of H){const X=Cd.join(O,Q.name);if(Q.isFile()){const J=await x.fs.readFile(X,"utf-8"),j=X.replace(w,"");N[j]=J}else if(Q.isDirectory()){const J=await S(X);Object.assign(N,J)}}return N}const E=await S(w),k=localStorage.getItem(`netlify-site-${m}`),_=await fetch("/api/deploy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:k||void 0,files:E,token:n.token,chatId:m})}),L=await _.json();if(!_.ok||!L.deploy||!L.site)throw console.error("Invalid deploy response:",L),new Error(L.error||"Invalid deployment response");const R=20;let C=0,P;for(;C<R;)try{if(P=await(await fetch(`https://api.netlify.com/api/v1/sites/${L.site.id}/deploys/${L.deploy.id}`,{headers:{Authorization:`Bearer ${n.token}`}})).json(),P.state==="ready"||P.state==="uploaded")break;if(P.state==="error")throw new Error("Deployment failed: "+(P.error_message||"Unknown error"));C++,await new Promise(N=>setTimeout(N,1e3))}catch(O){console.error("Status check error:",O),C++,await new Promise(N=>setTimeout(N,2e3))}if(C>=R)throw new Error("Deployment timed out");L.site&&localStorage.setItem(`netlify-site-${m}`,L.site.id),He.success(p.jsxs("div",{children:["Deployed successfully!"," ",p.jsx("a",{href:P.ssl_url||P.url,target:"_blank",rel:"noopener noreferrer",className:"underline",children:"View site"})]}))}catch(b){console.error("Deploy error:",b),He.error(b instanceof Error?b.message:"Deployment failed")}finally{a(!1)}};return p.jsxs("div",{className:"flex",children:[p.jsxs("div",{className:"relative",ref:d,children:[p.jsx("div",{className:"flex border border-bolt-elements-borderColor rounded-md overflow-hidden mr-2 text-sm",children:p.jsxs(Vp,{active:!0,disabled:o||!s||f,onClick:()=>h(!u),className:"px-4 hover:bg-bolt-elements-item-backgroundActive flex items-center gap-2",children:[o?"Deploying...":"Deploy",p.jsx("div",{className:Ae("i-ph:caret-down w-4 h-4 transition-transform",u?"rotate-180":"")})]})}),u&&p.jsxs("div",{className:"absolute right-2 flex flex-col gap-1 z-50 p-1 mt-1 min-w-[13.5rem] bg-bolt-elements-background-depth-2 rounded-md shadow-lg bg-bolt-elements-backgroundDefault border border-bolt-elements-borderColor",children:[p.jsxs(Vp,{active:!0,onClick:()=>{g(),h(!1)},disabled:o||!s||!n.user,className:"flex items-center w-full px-4 py-2 text-sm text-bolt-elements-textPrimary hover:bg-bolt-elements-item-backgroundActive gap-2 rounded-md group relative",children:[p.jsx("img",{className:"w-5 h-5",height:"24",width:"24",crossOrigin:"anonymous",src:"https://cdn.simpleicons.org/netlify"}),p.jsx("span",{className:"mx-auto",children:n.user?"Deploy to Netlify":"No Account Connected"}),n.user&&p.jsx(Grt,{})]}),p.jsxs(Vp,{active:!1,disabled:!0,className:"flex items-center w-full rounded-md px-4 py-2 text-sm text-bolt-elements-textTertiary gap-2",children:[p.jsx("span",{className:"sr-only",children:"Coming Soon"}),p.jsx("img",{className:"w-5 h-5 bg-black p-1 rounded",height:"24",width:"24",crossOrigin:"anonymous",src:"https://cdn.simpleicons.org/vercel/white",alt:"vercel"}),p.jsx("span",{className:"mx-auto",children:"Deploy to Vercel (Coming Soon)"})]}),p.jsxs(Vp,{active:!1,disabled:!0,className:"flex items-center w-full rounded-md px-4 py-2 text-sm text-bolt-elements-textTertiary gap-2",children:[p.jsx("span",{className:"sr-only",children:"Coming Soon"}),p.jsx("img",{className:"w-5 h-5",height:"24",width:"24",crossOrigin:"anonymous",src:"https://cdn.simpleicons.org/cloudflare",alt:"vercel"}),p.jsx("span",{className:"mx-auto",children:"Deploy to Cloudflare (Coming Soon)"})]})]})]}),p.jsxs("div",{className:"flex border border-bolt-elements-borderColor rounded-md overflow-hidden",children:[p.jsx(Vp,{active:e,disabled:!c||l,onClick:()=>{c&&jc.setKey("showChat",!e)},children:p.jsx("div",{className:"i-bolt:chat text-sm"})}),p.jsx("div",{className:"w-[1px] bg-bolt-elements-borderColor"}),p.jsx(Vp,{active:t,onClick:()=>{t&&!e&&jc.setKey("showChat",!0),Nt.showWorkbench.set(!t)},children:p.jsx("div",{className:"i-ph:code-bold"})})]})]})}function Vp({active:t=!1,disabled:e=!1,children:n,onClick:r,className:i}){return p.jsx("button",{className:Ae("flex items-center p-1.5",{"bg-bolt-elements-item-backgroundDefault hover:bg-bolt-elements-item-backgroundActive text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary":!t,"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":t&&!e,"bg-bolt-elements-item-backgroundDefault text-alpha-gray-20 dark:text-alpha-white-20 cursor-not-allowed":e},i),onClick:r,children:n})}function Krt(){const t=Ot(Nl),{editing:e,handleChange:n,handleBlur:r,handleSubmit:i,handleKeyDown:s,currentDescription:o,toggleEditMode:a}=qQ({initialDescription:t,syncWithGlobalStore:!0});return t?p.jsx("div",{className:"flex items-center justify-center",children:e?p.jsxs("form",{onSubmit:i,className:"flex items-center justify-center",children:[p.jsx("input",{type:"text",className:"bg-bolt-elements-background-depth-1 text-bolt-elements-textPrimary rounded px-2 mr-2 w-fit",autoFocus:!0,value:o,onChange:n,onBlur:r,onKeyDown:s,style:{width:`${Math.max(o.length*8,100)}px`}}),p.jsx(Q2,{children:p.jsx(yf,{tooltip:"Save title",children:p.jsx("div",{className:"flex justify-between items-center p-2 rounded-md bg-bolt-elements-item-backgroundAccent",children:p.jsx("button",{type:"submit",className:"i-ph:check-bold scale-110 hover:text-bolt-elements-item-contentAccent",onMouseDown:i})})})})]}):p.jsxs(p.Fragment,{children:[o,p.jsx(Q2,{children:p.jsx(yf,{tooltip:"Rename chat",children:p.jsx("div",{className:"flex justify-between items-center p-2 rounded-md bg-bolt-elements-item-backgroundAccent ml-2",children:p.jsx("button",{type:"button",className:"i-ph:pencil-fill scale-110 hover:text-bolt-elements-item-contentAccent",onClick:l=>{l.preventDefault(),a()}})})})})]})}):null}function ost(){const t=Ot(jc);return p.jsxs("header",{className:Ae("flex items-center p-5 border-b h-[var(--header-height)]",{"border-transparent":!t.started,"border-bolt-elements-borderColor":t.started}),children:[p.jsxs("div",{className:"flex items-center gap-2 z-logo text-bolt-elements-textPrimary cursor-pointer",children:[p.jsx("div",{className:"i-ph:sidebar-simple-duotone text-xl"}),p.jsxs("a",{href:"/",className:"text-2xl font-semibold text-accent flex items-center",children:[p.jsx("img",{src:"/logo-light-styled.png",alt:"logo",className:"w-[90px] inline-block dark:hidden"}),p.jsx("img",{src:"/logo-dark-styled.png",alt:"logo",className:"w-[90px] inline-block hidden dark:block"})]})]}),t.started&&p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"flex-1 px-4 truncate text-center text-bolt-elements-textPrimary",children:p.jsx(Bu,{children:()=>p.jsx(Krt,{})})}),p.jsx(Bu,{children:()=>p.jsx("div",{className:"mr-1",children:p.jsx(qrt,{})})})]})]})}export{ZO as $,Yk as A,Qg as B,um as C,W$e as D,Lt as E,Sne as F,Sn as G,Pi as H,Sr as I,nE as J,Fae as K,nN as L,Pt as M,ane as N,ist as O,J$e as P,gnt as Q,rst as R,QN as S,oi as T,TK as U,Vet as V,He as W,Bu as X,sst as Y,Wet as Z,ptt as _,zit as a,Eie as a0,kie as a1,Cie as a2,dye as a3,ost as a4,Vn as a5,zs as b,mn as c,Vit as d,qit as e,NHe as f,ji as g,st as h,xHe as i,ZHe as j,Yit as k,Kit as l,ize as m,Git as n,Wit as o,$it as p,gHe as q,mHe as r,uHe as s,Ge as t,Uit as u,zo as v,Oa as w,PHe as x,Vk as y,jh as z};
